(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[181],Array(33).concat([function(e,t,r){"use strict";r.d(t,"d",function(){return l});r.d(t,"c",function(){return o});r.d(t,"b",function(){return s});r.d(t,"e",function(){return a});r.d(t,"a",function(){return i});r.d(t,"f",function(){return n});var a={CANADA:"Canada",JAPAN:"Japan",RUSSIAN_FEDERATION:"Russian Federation",UNITED_KINGDOM:"United Kingdom",UNITED_KINGDOM_UK:"United Kingdom (UK)",UNITED_STATES:"United States",SOUTH_AFRICA:"South Africa",SOUTH_KOREA:"Republic of Korea"};var n={COMPANY_NAME_IS_REQUIRED:"company_name_is_required",STREET_IS_REQUIRED:"street_is_required",CITY_IS_REQUIRED:"city_is_required",POSTAL_CODE_IS_REQUIRED:"postal_code_is_required",ZIP_CODE_IS_REQUIRED:"zip_code_is_required",REGION_IS_REQUIRED:"region_is_required",STATE_IS_REQUIRED:"state_is_required",COUNTRY_IS_REQUIRED:"country_is_required",VAT_ID_IS_REQUIRED:"vat_id_is_required",TIN_ID_IS_REQUIRED:"tin_id_is_required",BRN_IS_REQUIRED:"brn_is_required",IS_BUSINESS_PURCHASE_IS_REQUIRED:"is_business_purchase_is_required",STREET_INVALID_CHARACTERS:"street_invalid_characters",CITY_INVALID_CHARACTERS:"city_invalid_characters",REGION_INVALID_CHARACTERS:"region_invalid_characters",STATE_INVALID_CHARACTERS:"state_invalid_characters",POSTAL_CODE_INVALID_CHARACTERS:"postal_code_invalid_characters",ZIP_CODE_INVALID_CHARACTERS:"zip_code_invalid_characters",VAT_ID_INVALID_CHARACTERS:"vat_id_invalid_characters",ABN_ID_INVALID_CHARACTERS:"abn_id_invalid_characters",US_ZIP_CODE_INVALID_FORMAT:"us_zip_code_invalid_format",CANADA_POSTAL_CODE_INVALID_FORMAT:"canada_zip_code_invalid_format",ZIP_CODE_INVALID_API_ERROR:"zipcode_invalid_api_error",VAT_ID_INVALID_API_ERROR:"vat_id_invalid_api_error",VAT_ID_INPUT_ERROR:"vat_input_error",VAT_ID_INVALID_FORMAT:"vat_id_invalid_format",API_ERROR:"api_error",ABN_ID_INVALID_LENGTH:"abn_id_invalid_length",QST_ID_INVALID_FORMAT:"qst_id_invalid_format",TIN_ID_INVALID_LENGTH:"tin_id_invalid_length",BRN_INVALID_FORMAT:"brn_invalid_format",ADDRESS_INPUT_ERROR:"address_input_error",ERROR_UPDATING_BILLING_ADDRESS:"error_updating_billing_address",NO_PERMS:"no_perms",INVALID_AUTH:"invalid_auth",DEFAULT_ERROR:"default_error"};var i={ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX:/^[a-zA-Z\xc0-\xff0-9-'-\/.\s]+$/i,ALPHA_NUMERIC_WITH_DASH_REGEX:/^[A-Z0-9-\-\s]+$/i,VAT_ID_SOUTH_AFRICA_REGEX:/^([0-9]){10}$/i,ABN_ID_REGEX:/^(\d *?){11}$/i,QST_ID_TQ_REGEX:/^([0-9]){10}TQ([0-9]){4}$/i,QST_ID_NINE_NUM_REGEX:/^([0-9]){9}$/i,QST_ID_TEN_NUM_REGEX:/^([0-9]){10}$/i,QST_ID_NR_REGEX:/^NR([0-9]){8}$/i,BRN_REGEX:/^[0-9](-?[0-9]){8}-?[0-9]$/i,TIN_ID_REGEX:/^(?=(?:.{10}|.{12})$)[0-9]*$/i,US_POSTAL_CODE_FORMAT_REGEX:/(^\d{5}$)|(^\d{5}-{0,1}\d{4}$)/i,CANADA_POSTAL_CODE_FORMAT_REGEX:/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1} *\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1}\d{1}$/i};var s={COMPANY_NAME:"companyName",STREET:"street",SUITE:"suite",CITY:"city",REGION:"region",POSTAL_CODE:"postalCode",COUNTRY:"country",IS_BUSINESS_PURCHASE:"isBusinessPurchase",IS_VAT_AVAILABLE:"isVatIdAvailable",VAT_ID:"vatId",ABN_ID:"abnId",QST_ID:"qstId"};var o={COMPANY_NAME:"",STREET:"",SUITE:"",CITY:"",REGION:"",POSTAL_CODE:"",COUNTRY:"",IS_BUSINESS_PURCHASE:true,IS_VAT_AVAILABLE:true,VAT_ID:"",ABN_ID:"",QST_ID:""};var l={COMPANY_NAME:83,STREET:83,SUITE:83,CITY:150,REGION:100,POSTAL_CODE:15,VAT_ID:15,ABN_ID:14,TIN_ID:12,QST_ID:16}},,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(26);var n=r.n(a);var i=r(43);var s=r(2);var o=r(0);var l=r(12);var c=r(15);var u=r(23);var d=r(52);var p=r(20);var v=Object(p["b"])("TS.ms.msg_handlers",function(){return{}});var m=v;var h=r(4);var f=r(870);var b=r(49);var g=r(227);var _=r(170);var y=r(65);var O=r(24);var k=r(19);var E=r(27);var j=r(241);var C=r(113);var S=r(253);var w=r(11);var I=r(134);var T=r(282);var A=r(41);var N=void 0;var P=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r,a){var n;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return Object(i["resolve"])(Object(E["a"])(r,M({fileIds:t,reason:a})));case 2:n=o.sent;return o.abrupt("return",Object(s["keyBy"])(n,"id"));case 4:case"end":return o.stop()}},e,this)}));return function t(r,a,n){return e.apply(this,arguments)}}();var R=me;var M=S["g"];var x=k["a"];var D=k["d"];var F=T["e"];var L=O["j"];var B=f["a"];var U=f["b"];var q=T["m"];var G=j["getOrFetchMemberCounts"];var H=100;var W=["star_added","pin_added"];var V=["channel_joined","group_joined","mpim_joined","dnd_updated","dnd_updated_user","manual_presence_change","member_left_channel","presence_change","status_change","subteam_created","subteam_updated","user_removed_from_team","user_change","channel_created","channel_deleted"];function K(e){return"message"===e}var z=function e(t,r){var a=te(r)||{},n=a.objectWithFile;if(!n)return;n.file=t;r._file_attached=true};var Q=function e(t,r){if(!r)return true;if(U()&&B(r))return false;if(!J(t))return false;return!F(r)};function Y(e,t){var r=x(t());if(!r)return true;return!Object(w["isIm"])(r)&&!Object(w["isMpim"])(r)&&e!==r.id}function J(e){var t=e.type;if(W.indexOf(t)>=0)return false;return true}function X(e){var t=e.type;return V.indexOf(t)>=0}var Z=function e(t){var r=[];R(function(e){if(J(e))return;var t=te(e)||{},a=t.fileId;a&&r.indexOf(a)<0&&!Q(e,a)&&r.push(a)},t);return r};var $=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r,a){var n;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return Object(i["resolve"])(P(t,r,a));case 2:n=s.sent;R(function(e){if(J(e))return;var t=te(e)||{},r=t.fileId;r&&n[r]&&!Q(e,r)&&z(n[r],e)},r);case 4:case"end":return s.stop()}},e,N)}));return function t(r,a,n){return e.apply(this,arguments)}}();var ee=function e(t,r){var a=te(t)||{},n=a.objectWithFile,i=a.fileId;n&&n.file&&q(n.file);if(!i)return Promise.resolve();var s=r();if(J(t))return Promise.resolve();if(t._file_attached)return Promise.resolve();if(Q(t,i)){t._should_dispatch=false;return Promise.resolve()}var o=Object(u["b"])(s);var l=Z(o,r).slice(0,H);if(!l.length)return Promise.resolve();var c=t.subtype?"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type;return $(l,o,c).catch(function(){t._should_dispatch=false})};function te(e){if(e.file&&e.file.id)return{objectWithFile:e,fileId:e.file.id};if(e.file_id)return{objectWithFile:e,fileId:e.file_id};if(e.item){if(e.item.file&&e.item.file.id)return{objectWithFile:e.item,fileId:e.item.file.id};if(e.item.file_id)return{objectWithFile:e.item,fileId:e.item.file_id}}return null}function re(e,t,r){if(!K(e.type)||!e.text)return Promise.resolve();var a=A["atHereRegExp"].test(e.text)||A["atChannelRegExp"].test(e.text)||A["atEveryoneRegExp"].test(e.text)||A["atGroupRegExp"].test(e.text);if(!a)return Promise.resolve();var n=false;var i=D(r(),e.channel,n);if(!i)return Promise.resolve();var o=t(G({channelId:i.id}));return o.promise?o.promise.catch(s["noop"]):Promise.resolve()}var ae=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a,n,o,l,c;return regeneratorRuntime.wrap(function e(d){while(1)switch(d.prev=d.next){case 0:if(!(false===t._should_dispatch)){d.next=2;break}return d.abrupt("return");case 2:a=r();n=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return E["a"].apply(void 0,[Object(u["b"])(a)].concat(r))};o=t.subtype?"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type;l=K(t.type)&&Object(s["isString"])(t.channel)&&Object(I["a"])(t.channel)&&!Object(k["u"])(a,t.channel);c=l?n(Object(C["d"])({ids:[t.channel],reason:o})):Promise.resolve();d.next=9;return Object(i["resolve"])(Promise.all([c,re(t,n,r)]).catch(s["noop"]));case 9:case"end":return d.stop()}},e,N)}));return function t(r,a){return e.apply(this,arguments)}}();var ne=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:if(!X(t)){n.next=2;break}return n.abrupt("return");case 2:a=r();if(!("user_typing"===t.type&&!L(a,t.user)&&Y(t.channel,r))){n.next=6;break}t._should_dispatch=false;return n.abrupt("return");case 6:n.prev=6;n.next=9;return Object(i["resolve"])(Promise.all([ee(t,r),ae(t,r)]));case 9:n.next=13;break;case 11:n.prev=11;n.t0=n["catch"](6);case 13:case"end":return n.stop()}},e,N,[[6,11]])}));return function t(r,a){return e.apply(this,arguments)}}();var ie=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return Object(i["resolve"])(ne(t,r));case 2:a=false!==t._should_dispatch;delete t._should_dispatch;return n.abrupt("return",a);case 5:case"end":return n.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();var se={FETCH_MISSING_FILE_TYPES:W,NO_FETCH_MISSING_OBJECT_TYPES:V,canIgnoreUserTypingMessage:Y,getFileInfoFromMessage:te,maybeEnsureMemberCount:re,canSkipObjectFetchForMessage:X};Object.defineProperty(se,"applyFunctionToPendingMessagesForTeam",{get:function e(){return R},set:function e(t){R=t}});Object.defineProperty(se,"attachFileObjectToMessage",{get:function e(){return z},set:function e(t){z=t}});Object.defineProperty(se,"canIgnoreFileMessage",{get:function e(){return Q},set:function e(t){Q=t}});Object.defineProperty(se,"ensureDataIsPresent",{get:function e(){return ne},set:function e(t){ne=t}});Object.defineProperty(se,"ensureFilesInMessageArePresent",{get:function e(){return ee},set:function e(t){ee=t}});Object.defineProperty(se,"ensureModelObsInMessageArePresent",{get:function e(){return ae},set:function e(t){ae=t}});Object.defineProperty(se,"fetchAndAttachFilesForMessagesInQueue",{get:function e(){return $},set:function e(t){$=t}});Object.defineProperty(se,"fetchFilesById",{get:function e(){return M},set:function e(t){M=t}});Object.defineProperty(se,"getActiveChannel",{get:function e(){return x},set:function e(t){x=t}});Object.defineProperty(se,"getFileById",{get:function e(){return F},set:function e(t){F=t}});Object.defineProperty(se,"getFileIdsToFetchFromQueue",{get:function e(){return Z},set:function e(t){Z=t}});Object.defineProperty(se,"hasMemberWithId",{get:function e(){return L},set:function e(t){L=t}});Object.defineProperty(se,"getChannelById",{get:function e(){return D},set:function e(t){D=t}});Object.defineProperty(se,"isFileRelevantToPost",{get:function e(){return B},set:function e(t){B=t}});Object.defineProperty(se,"isOnPostPage",{get:function e(){return U},set:function e(t){U=t}});Object.defineProperty(se,"maybePruneChannels",{get:function e(){return q},set:function e(t){q=t}});Object.defineProperty(se,"getOrFetchMemberCounts",{get:function e(){return G},set:function e(t){G=t}});r.d(t,"a",function(){return ve});r.d(t,"b",function(){return me});r.d(t,"c",function(){return he});r.d(t,"d",function(){return fe});r.d(t,"e",function(){return Ce});r.d(t,"f",function(){return Se});r.d(t,"h",function(){return we});r.d(t,"g",function(){return Ie});var oe=void 0;var le={};var ce={};var ue={};var de={};function pe(e,t){if(ce[e]){var r=Object(g["a"])()||Object(_["a"])();var a=r?"addRtmErrorHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmErrorHandler: a handler is already registered for "+e;throw new Error(a)}ce[e]=t}function ve(e,t){if(le[e]){var r=Object(g["a"])()||Object(_["a"])();var a=r?"addRtmHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmHandler: a handler is already registered for "+e;throw new Error(a)}le[e]=t}function me(e,t){if(!ue[t])return;ue[t].forEach(function(t){return e(t)})}function he(){return le}function fe(){return ue}var be=function e(t,r,a){if(Te(a))return;var n=t.type;if(le[n])try{le[n](t,r,a)}catch(e){if(Object(b["a"])()){var i=a();var s=Object(u["b"])(i);window.slackDebug.setLastError&&window.slackDebug.setLastError(s,new Error("Error processing "+n+": "+e.message))}throw e}var o=m();o[t.type]&&o[t.type](t)};var ge=["T024BE7LD","T5J7PJ5PT","T5JRYUBHS","T5MTH4ARY","T5KK65FCP","T34263EUF","T5J4Q04QG","T5J7PM517","T5JN7LJ7M","T5PMP2708","T1ZPW1JUE","T57U8DUG7","T20M0MB9P"];var _e=50;function ye(e){return e>_e&&"visible"===document.visibilityState}var Oe=Object(c["b"])("Handles the next message in the queue",function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.queue,o=a.elapsed,c=void 0===o?0:o;var d,p,v,m,h,f,b;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:if(!(!n||!n.length)){a.next=2;break}return a.abrupt("return",Promise.resolve());case 2:d=n[0];p=c;v=void 0;a.prev=5;m=performance.now();a.next=9;return Object(i["resolve"])(t(je(d)));case 9:h=a.sent;v=performance.now();v-m>_e&&(p=0);h&&be(d,t,r);a.next=21;break;case 15:a.prev=15;a.t0=a["catch"](5);Object(l["a"])({getState:r}).error("Error while processing "+d.type+" event",a.t0);f=r();b=Object(u["b"])(f);if(Object(s["includes"])(ge,b)){console.error(a.t0);Object(l["a"])({getState:r}).error(a.t0,"TINYSPECK: Error while processing "+d.type+" event")}case 21:a.prev=21;n.shift();return a.finish(21);case 24:if(!n.length){a.next=27;break}p+=performance.now()-v;return a.abrupt("return",ye(p)?Promise.delay(0).then(function(){return t(Oe({queue:n}))}):t(Oe({queue:n,elapsed:p})));case 27:return a.abrupt("return",Promise.resolve());case 28:case"end":return a.stop()}},e,oe,[[5,15,21,24]])}));return function(t,r,a){return e.apply(this,arguments)}}());Oe.propTypes={queue:o["b"].arrayOf(o["b"].object).isRequired};var ke=Object(c["b"])("Pauses handling of queued messages",function(e,t){var r=t();var a=Object(u["b"])(r);de[a]=true});var Ee=Object(c["b"])("Resumes handling of queued messages",function(e,t){var r=t();var a=Object(u["b"])(r);if(!de[a])return;de[a]=false;e(Oe({queue:ue[a]}))});var je=Object(c["b"])("This is a wrapper for preprocessRtmMessage that adds a timeout",function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r,a){var n,s,o,c,u,p;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n={};s=3e4;o=Object(d["promiseToHaveOpenWebSocket"])(r());c=o.then(function(){return Promise.delay(s,n)});u=o.then(function(){return ie(a,r)});t.next=7;return Object(i["resolve"])(Promise.race([u,c]));case 7:p=t.sent;if(!(p===n)){t.next=11;break}Object(l["a"])({getState:r}).warn("Preprocessing message of type "+a.type+" took too long; continue to process queue");return t.abrupt("return",true);case 11:return t.abrupt("return",p);case 12:case"end":return t.stop()}},e,oe)}));return function(t,r,a){return e.apply(this,arguments)}}());je.propTypes=o["b"].object.isRequired;var Ce=Object(c["b"])("Calls the relevant rtm handlers with the given rtm message.",function(e,t,r){var a=t();var n=Object(u["b"])(a);ue[n]=ue[n]||[];ue[n].push(r);1!==ue[n].length||de[n]||e(Oe({queue:ue[n]}))});Ce.propTypes=o["b"].object.isRequired;var Se=Object(c["b"])("Calls the relevant rtm handlers with the given rtm messages.",function(e,t,r){var a;var i=t();var s=Object(u["b"])(i);ue[s]=ue[s]||[];var o=ue[s].length;(a=ue[s]).push.apply(a,n()(r));!o&&ue[s].length>0&&!de[s]&&e(Oe({queue:ue[s]}))});Se.propTypes=o["b"].arrayOf(o["b"].object).isRequired;var we=Object(c["b"])("Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)",function(e,t,r){be(r,e,t)});we.propTypes=o["b"].object.isRequired;var Ie=Object(c["b"])("Calls the relevant handler for the given message",function(e,t,r){if(!ce[r]){Object(l["a"])({getState:t}).error(new Error("Unexpected start error: "+r),JSON.stringify({error:r}),{subtype:"flannel_start_error"});return}ce[r](r,e,t)});Ie.propTypes=o["b"].string.isRequired;function Te(e){var t=e();return Object(h["isWebApp"])(t)&&!Object(h["processRtmStream"])(t)&&!Object(f["b"])()}var Ae={handleNextMessageFromQueue:Oe,shouldIgnoreRtmStream:Te};Object.defineProperty(Ae,"dispatchMessageToHandlers",{get:function e(){return be},set:function e(t){be=t}});Object.defineProperty(Ae,"errorHandlers",{get:function e(){return ce},set:function e(t){ce=t}});Object.defineProperty(Ae,"handlers",{get:function e(){return le},set:function e(t){le=t}});Object.defineProperty(Ae,"pendingMessages",{get:function e(){return ue},set:function e(t){ue=t}});Object(y["exportToGlobalDebugger"])("rtm",{handlers:le,errorHandlers:ce,interceptHandler:function e(t,r){var a=le[t];le[t]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[a].concat(t))}}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(36);var c=r(190);var u=r(92);var d=r(341);var p;var v={activeCurrency:null,activeTerm:u["e"].monthly,activePlanLevel:null,activePaymentMethod:u["c"].CREDIT_CARD,apiError:false,availablePlans:{},activePlanCost:{},cachedCost:{},isPlansAndCostDataLoaded:false,isPlansDataLoading:false,isCostDataLoading:false};var m=Object(l["b"])((p={},n()(p,d["l"],function(e,t){if(t.currency){var r=Object(c["b"])(e).includes(t.currency);if(!r)return e}else if(t.term&&!t.term===u["e"].yearly&&!t.term===u["e"].monthly)return e;var a=t.currency?t.currency:e.activeCurrency;var n=t.term?t.term:e.activeTerm;return s()({},e,{activeCurrency:a,activeTerm:n})}),n()(p,d["h"],function(e,t){var r=Object.keys(t.availablePlans)[0];var a=s()({},e,{activeCurrency:r,availablePlans:s()({},t.availablePlans),apiError:false});return a}),n()(p,d["c"],function(e,t){var r=t.activePlanCost,a=t.companyAddress,i=t.isInvoice,o=t.numInvoiceSeats;var l=Object(u["h"])(r.id,a,i,o);var c=s()({},e,{activePlanCost:s()({},e.activePlanCost,t.activePlanCost),cachedCost:s()({},e.cachedCost,n()({},l,t.activePlanCost)),apiError:false});return c}),n()(p,d["i"],function(e){var t=s()({},e,{apiError:true});return t}),n()(p,d["g"],function(e){var t=s()({},e,{isPlansAndCostDataLoaded:true});return t}),n()(p,d["k"],function(e,t){var r=s()({},e,{activePlanLevel:t});return r}),n()(p,d["j"],function(e,t){var r=s()({},e,{activePaymentMethod:t});return r}),n()(p,d["o"],function(e,t){var r=s()({},e,{isPlansDataLoading:t.isPlansDataLoading});return r}),n()(p,d["n"],function(e,t){var r=s()({},e,{isCostDataLoading:t.isCostDataLoading});return r}),p),v,{persistenceEnabled:true});m.propTypes={activeCurrency:o["b"].string,activeTerm:o["b"].string,activePlanLevel:o["b"].string,activePaymentMethod:o["b"].string,apiError:o["b"].bool,availablePlans:o["b"].object,activePlanCost:o["b"].object,cachedCost:o["b"].object,isPlansAndCostDataLoaded:o["b"].bool,isPlansDataLoading:o["b"].bool,isCostDataLoading:o["b"].bool};var h=m;r.d(t,"getActivePlan",function(){return c["a"]});r.d(t,"getAvailableCurrencies",function(){return c["b"]});r.d(t,"selectAvailableCurrencies",function(){return c["t"]});r.d(t,"selectActiveProductId",function(){return c["s"]});r.d(t,"selectActivePlanCostPerTerm",function(){return c["m"]});r.d(t,"selectActivePlanLevel",function(){return c["o"]});r.d(t,"selectActivePlanTerm",function(){return c["r"]});r.d(t,"selectActivePlanPaymentMethod",function(){return c["q"]});r.d(t,"selectActivePlanIsYearly",function(){return c["n"]});r.d(t,"selectActivePlanMonthsCount",function(){return c["p"]});r.d(t,"selectActiveCurrency",function(){return c["l"]});r.d(t,"getTermPlanForActiveCurrency",function(){return c["g"]});r.d(t,"selectCostPerMonthForYearlyPlan",function(){return c["v"]});r.d(t,"selectCostPerTermForYearlyPlan",function(){return c["x"]});r.d(t,"selectCostPerTermForMonthlyPlan",function(){return c["w"]});r.d(t,"selectPercentageSavingsForYearlyPlan",function(){return c["J"]});r.d(t,"selectIsPlansAndCostDataLoaded",function(){return c["C"]});r.d(t,"selectIsPlansOrCostDataLoading",function(){return c["E"]});r.d(t,"selectIsPlansDataLoading",function(){return c["D"]});r.d(t,"selectBillableActiveUsers",function(){return c["u"]});r.d(t,"selectPaidSeats",function(){return c["I"]});r.d(t,"isZeroRealActiveUsers",function(){return c["k"]});r.d(t,"selectInactiveUsers",function(){return c["A"]});r.d(t,"selectTotalUsers",function(){return c["Q"]});r.d(t,"selectSubtotal",function(){return c["K"]});r.d(t,"selectTax",function(){return c["L"]});r.d(t,"selectCreditsApplied",function(){return c["y"]});r.d(t,"selectCurrentTeamCredits",function(){return c["z"]});r.d(t,"selectTeamCreditsRemaining",function(){return c["M"]});r.d(t,"selectTotalRecurring",function(){return c["O"]});r.d(t,"selectTotalDueToday",function(){return c["N"]});r.d(t,"selectTotalRecurringTax",function(){return c["P"]});r.d(t,"getQuotedTermEndDate",function(){return c["f"]});r.d(t,"selectIsCostAvailableForPlan",function(){return c["B"]});r.d(t,"selectLocalCostForCurrentPlan",function(){return c["F"]});r.d(t,"selectMinInvoiceSeats",function(){return c["H"]});r.d(t,"selectMaxInvoiceSeats",function(){return c["G"]});r.d(t,"isAPIError",function(){return c["h"]});r.d(t,"isCostValid",function(){return c["i"]});r.d(t,"isInvoiceActivePaymentMethod",function(){return c["j"]});r.d(t,"getAvailableCurrenciesData",function(){return c["c"]});r.d(t,"getPlanProductId",function(){return c["e"]});r.d(t,"getPlanMonthlyCost",function(){return c["d"]});r.d(t,"RETRIEVE_CACHE_COST_DATA_TIMEOUT",function(){return d["a"]});r.d(t,"switchPlans",function(){return d["l"]});r.d(t,"plansFetchSuccess",function(){return d["h"]});r.d(t,"costFetchSuccess",function(){return d["c"]});r.d(t,"setErrorState",function(){return d["i"]});r.d(t,"plansAndCostDataLoaded",function(){return d["g"]});r.d(t,"setPlanLevel",function(){return d["k"]});r.d(t,"setPaymentMethod",function(){return d["j"]});r.d(t,"updateIsPlansDataLoading",function(){return d["o"]});r.d(t,"updateIsCostDataLoading",function(){return d["n"]});r.d(t,"fetchCostForCurrentPlan",function(){return d["d"]});r.d(t,"fetchPlansAndCostData",function(){return d["e"]});r.d(t,"fetchPlansData",function(){return d["f"]});r.d(t,"changeActivePlan",function(){return d["b"]});r.d(t,"updatePlanLevel",function(){return d["p"]});r.d(t,"updateActivePlanPaymentMethod",function(){return d["m"]});var f=t["default"]=h},,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});var a=r(20);var n=Object(a["b"])("TS.enterprise.actions.dispatch",function(){return null});var i=Object(a["b"])("TS.enterprise.actions.actions",function(){return null})},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(0);var l=r(2);var c=r(36);var u=r(260);var d=r(33);var p=r(92);var v=r(43);var m=r(18);var h=r(482);var f=r(313);var b=r(719);var g=r(190);var _=r(212);var y=o["b"].shape({companyName:o["b"].string,street:o["b"].string,suite:o["b"].string,city:o["b"].string,postalCode:o["b"].string,region:o["b"].string,country:o["b"].string,isBusinessPurchase:o["b"].bool,isVatIdAvailable:o["b"].bool,vatId:o["b"].string,abnId:o["b"].string,validationErrors:o["b"].object,isValidationActive:o["b"].bool});var O=Object(m["b"])("Checkout Address Form Data Loaded");O.propTypes=o["b"].object;var k=Object(m["b"])("Checkout Credit Card Form Loaded");k.propTypes=o["b"].bool;var E=Object(m["b"])("Checkout States and Countries Data Loaded");E.propTypes=o["b"].object;var j=Object(m["b"])("Checkout Company Address Data Loaded");j.propTypes=o["b"].object;var C=Object(m["b"])("Update Company Address Field");C.propTypes=o["b"].object;var S=Object(m["b"])("Company Address Validated");S.propTypes=o["b"].object;var w=Object(m["b"])("Company Address Form Field Validated");w.propTypes=o["b"].object;var I=Object(m["b"])("Clear Company Address Form Field Validation Errors");I.propTypes=o["b"].object;var T=Object(m["b"])("Credit Card Data Changed");T.propTypes=o["b"].object;var A=Object(m["b"])("Credit Card Token Created");A.propTypes=o["b"].object;var N=Object(m["b"])("Toggles if Credit Card Token is being created or not");N.propTypes=o["b"].bool;var P=Object(m["b"])("Upgrade Response Received");P.propTypes=o["b"].object;var R=Object(m["b"])("Stripe Customer Data Loaded");R.propTypes=o["b"].object;var M=Object(m["b"])("Update Stripe API Key");M.propTypes=o["b"].object;var x=Object(m["b"])("Update Invoice Data Field");x.propTypes=o["b"].object;var D=Object(m["b"])("Invoice Data Validated");D.propTypes=o["b"].object;var F=Object(m["b"])("Invoice Form Field Validated");F.propTypes=o["b"].object;var L=Object(m["b"])("Update Credit Card Selected");L.propTypes=o["b"].object;var B=Object(m["b"])("Update Credit Card Form Error");B.propTypes=o["b"].object;var U=Object(m["b"])("Clear Any Existing Credit Card Form Error");U.propTypes=null;var q=Object(m["b"])("Clear Any Existing Payment Status or Errors");q.propTypes=null;var G=Object(m["b"])("Self User Data Loaded");G.propTypes=o["b"].object;var H=Object(m["b"])("Update Is Processing Payment");H.propTypes=o["b"].object;var W=Object(m["b"])("Update Payment Method Selected");W.propTypes=o["b"].string;var V=Object(m["b"])("Update Show App Disconnect Dialog");V.propTypes=o["b"].object;var K=Object(m["b"])("Update Active Checkout Step");K.propTypes=o["b"].object;var z=Object(m["b"])("Update Active Country");z.propTypes=o["b"].string;var Q=Object(m["b"])("Update Checkout Flow API Error Indicator");Q.propTypes=o["b"].object;function Y(){var e=this;return function(){var t=Object(v["coroutine"])(regeneratorRuntime.mark(function t(r){var a,n;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return Object(v["resolve"])(r(Object(h["d"])()));case 3:a=t.sent;r(E({statesAndCountries:a}));t.next=7;return Object(v["resolve"])(r(Object(h["b"])()));case 7:n=t.sent;r(j({companyAddress:n}));r(O());t.next=15;break;case 12:t.prev=12;t.t0=t["catch"](0);r(Q({isCheckoutFlowAPIError:true}));case 15:case"end":return t.stop()}},t,e,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}function J(e){return function(t,r){return new Promise(function(a){var n=Object(_["f"])(r());var i=Object(f["r"])(e.companyAddress,n.vatCountries,e.featureVatProjectSaSkCollection);if(!Object(l["isEmpty"])(i)){t(S(i));a({isCheckoutFormValid:false});return}t(S(i));t(Object(h["h"])(e.companyAddress)).then(function(){a({isCheckoutFormValid:true})}).catch(function(e){var r=e.data||{};var n=r.response_code;var i=r.error;var s=r.format_valid;var o=Object(f["c"])(n,i,s);if(!Object(l["isEmpty"])(o)){t(S(o));a({isCheckoutFormValid:false})}})})}}J.propTypes={companyAddress:y};function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{companyAddress:{},field:null,featureVatProjectSaSkCollection:false},t=e.companyAddress,r=e.field,a=e.featureVatProjectSaSkCollection;return function(e,n){var i=Object(_["f"])(n());var s=Object(f["s"])(t,r,i.vatCountries,a);e(w({error:s,field:r}))}}X.propTypes={companyAddress:y,field:o["b"].string};function Z(e){return function(t,r){t(C(e));var a=Object(_["b"])(r());a&&a.isValidationActive&&Object(l["has"])(e,"country")&&t(J({companyAddress:Object(_["b"])(r())}))}}Z.propTypes=o["b"].object;function $(e){return function(t){t(H({isProcessingPayment:true}));t(Object(h["g"])(e)).then(function(e){return t(P(e))}).catch(function(e){t(P(e.data))})}}$.propTypes=o["b"].object;function ee(e){return function(t){return t(Object(h["e"])(e)).then(function(e){var r=e.stripe_customer;var a={};r&&!Object(l["isEmpty"])(r.sources_payable)&&(a=Object(l["pickBy"])(r.sources_payable,function(e,t){return!r.sources_payable[t].is_bank_account}));t(R({stripeApiKey:e.stripe_api_publishable_key,sourcesPayable:a}))}).catch(function(){return t(Q({isCheckoutFlowAPIError:true}))})}}ee.propTypes={country:o["b"].string};function te(e){return function(t,r){var a=r();var n=Object(_["n"])(a);var i=Object(g["H"])(a);var s=Object(g["G"])(a);var o=Object(b["e"])(n,e,i,s);t(F({error:o,field:e}))}}b["e"].propTypes={field:o["b"].string};function re(e){return function(t,r){return new Promise(function(a){var n=r();var i=Object(g["H"])(n);var s=Object(g["G"])(n);var o=Object(b["d"])(e,i,s);t(D(o));a({isInvoiceFormValid:Object(l["isEmpty"])(o)})})}}re.propTypes={invoiceData:o["b"].object};function ae(e){return function(t){t(H({isProcessingPayment:true}));var r=e.billingContacts;var a=n()({},e,{billingContacts:Object(b["c"])(r)});t(Object(h["a"])(a)).then(function(e){return t(P(e))}).catch(function(){return t(Q({isCheckoutFlowAPIError:true}))})}}ae.propTypes=o["b"].object;function ne(){return function(e){e(Object(h["c"])()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.user;return e(G(r))})}}var ie=r(552);var se,oe;var le={countries:[],usStates:{},canadaStates:{},vatCountries:{},abnCountries:{},stripeApiKey:null,sourcesPayable:{},user:null};var ce={companyName:d["c"].COMPANY_NAME,street:d["c"].STREET,suite:d["c"].SUITE,city:d["c"].CITY,postalCode:d["c"].POSTAL_CODE,region:d["c"].REGION,country:d["c"].COUNTRY,isBusinessPurchase:d["c"].IS_BUSINESS_PURCHASE,isVatIdAvailable:d["c"].IS_VAT_AVAILABLE,vatId:d["c"].VAT_ID,abnId:d["c"].ABN_ID,qstId:d["c"].QST_ID,validationErrors:{},isValidationActive:false};var ue={code:"",message:"",type:""};var de={elementType:"",complete:false,empty:true,error:ue};var pe=(se={cardName:de},s()(se,u["c"].CARD_NUMBER,de),s()(se,u["c"].CARD_EXPIRY,de),s()(se,u["c"].CARD_CVC,de),s()(se,u["c"].POSTAL_CODE,de),s()(se,"token",{}),s()(se,"tokenError",ue),s()(se,"formError",ue),s()(se,"useExistingCreditCard",false),se);var ve={ok:false,error:"",msg:"",isProcessingPayment:false};var me={numberOfUsers:"",additionalBillingContacts:"",purchaseOrderNumber:"",validationErrors:{}};var he={config:le,companyAddress:ce,isCheckoutAddressFormDataLoaded:false,isCheckoutCreditCardFormLoaded:false,creditCardData:pe,isCreatingCreditCardToken:false,paymentStatus:ve,invoiceData:me,paymentMethodSelected:p["c"].CREDIT_CARD,isAppDisconnectedDialogShown:false,activeCheckoutStep:ie["b"].form,isCheckoutFlowAPIError:false};var fe=Object(c["b"])((oe={},s()(oe,O,function(e){var t=n()({},e,{isCheckoutAddressFormDataLoaded:true});return t}),s()(oe,k,function(e,t){var r=n()({},e,{isCheckoutCreditCardFormLoaded:t});return r}),s()(oe,E,function(e,t){var r=n()({},e,{config:n()({},e.config,{countries:t.statesAndCountries.countries,usStates:t.statesAndCountries.usStates,canadaStates:t.statesAndCountries.canadaStates,vatCountries:t.statesAndCountries.vatCountries,abnCountries:t.statesAndCountries.abnCountries})});return r}),s()(oe,j,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{companyName:t.companyAddress.companyName,street:t.companyAddress.street,suite:t.companyAddress.suite,city:t.companyAddress.city,postalCode:t.companyAddress.postalCode,region:t.companyAddress.region,country:t.companyAddress.country,isBusinessPurchase:t.companyAddress.isBusinessPurchase,isVatIdAvailable:t.companyAddress.isVatIdAvailable,vatId:t.companyAddress.vatId,abnId:t.companyAddress.abnId,qstId:t.companyAddress.qstId})});return r}),s()(oe,C,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,t)});return r}),s()(oe,S,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:t,isValidationActive:true})});return r}),s()(oe,w,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,t.error))})});return r}),s()(oe,I,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,null))})});return r}),s()(oe,T,function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,s()({},t.elementType,t))});if("cardName"!==t.elementType){r.creditCardData.token=null;r.creditCardData.tokenError=null}return r}),s()(oe,U,function(e){var t=n()({},e,{creditCardData:n()({},e.creditCardData,{formError:ue})});return t}),s()(oe,B,function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,{formError:t})});return r}),s()(oe,A,function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,{token:t.token,tokenError:t.error})});return r}),s()(oe,N,function(e,t){var r=n()({},e,{isCreatingCreditCardToken:t});return r}),s()(oe,P,function(e,t){var r=n()({},e,{paymentStatus:n()({},e.paymentStatus,{ok:t.ok,error:t.error,msg:t.msg,isProcessingPayment:false})});return r}),s()(oe,q,function(e){var t=n()({},e,{paymentStatus:ve});return t}),s()(oe,H,function(e,t){var r=n()({},e,{paymentStatus:n()({},e.paymentStatus,{isProcessingPayment:t.isProcessingPayment})});return r}),s()(oe,R,function(e,t){var r=n()({},e,{config:n()({},e.config,{stripeApiKey:t.stripeApiKey,sourcesPayable:Object(l["isEmpty"])(t.sourcesPayable)?{}:t.sourcesPayable}),creditCardData:n()({},e.creditCardData,{useExistingCreditCard:!Object(l["isEmpty"])(t.sourcesPayable)})});return r}),s()(oe,M,function(e,t){var r=n()({},e,{config:n()({},e.config,{stripeApiKey:t.stripeApiKey}),creditCardData:n()({},e.creditCardData,{token:null,tokenError:null})});return r}),s()(oe,L,function(e,t){var r=t.creditCardId!==u["a"];var a=n()({},e,{creditCardData:n()({},e.creditCardData,{useExistingCreditCard:r,token:{id:t.creditCardId,card:{last4:t.creditCardLast4,brand:t.creditCardBrand}}})});return a}),s()(oe,x,function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,t.data,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,null))})});return r}),s()(oe,D,function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:t})});return r}),s()(oe,F,function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,t.error))})});return r}),s()(oe,G,function(e,t){var r=n()({},e,{config:n()({},e.config,{user:t})});return r}),s()(oe,W,function(e,t){var r=n()({},e,{paymentMethodSelected:t});return r}),s()(oe,V,function(e,t){var r=n()({},e,{isAppDisconnectedDialogShown:t.isAppDisconnectedDialogShown});return r}),s()(oe,K,function(e,t){var r=n()({},e,{activeCheckoutStep:t.activeCheckoutStep});return r}),s()(oe,z,function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{country:t})});return r}),s()(oe,Q,function(e,t){var r=n()({},e,{isCheckoutFlowAPIError:t.isCheckoutFlowAPIError});return r}),oe),he,{persistenceEnabled:true});fe.propTypes={config:o["b"].object,companyAddress:o["b"].object,isCheckoutAddressFormDataLoaded:o["b"].bool,isCheckoutCreditCardFormLoaded:o["b"].bool,creditCardData:o["b"].object,isCreatingCreditCardToken:o["b"].bool,paymentStatus:o["b"].object,invoiceData:o["b"].object,paymentMethodSelected:o["b"].string,isAppDisconnectedDialogShown:o["b"].bool,activeCheckoutStep:o["b"].string};var be=fe;r.d(t,"hasAddressFormErrors",function(){return _["q"]});r.d(t,"getCompanyAddress",function(){return _["b"]});r.d(t,"getCompanyAddressCountry",function(){return _["c"]});r.d(t,"getCompanyAddressCountryError",function(){return _["d"]});r.d(t,"getCompanyAddressPostalCode",function(){return _["e"]});r.d(t,"getConfig",function(){return _["f"]});r.d(t,"isCheckoutAddressFormDataLoaded",function(){return _["r"]});r.d(t,"getIsCheckoutCreditCardFormLoaded",function(){return _["o"]});r.d(t,"getCreditCardData",function(){return _["h"]});r.d(t,"getCreditCardToken",function(){return _["k"]});r.d(t,"getCreditCardTokenId",function(){return _["m"]});r.d(t,"getCreditCardBrandForReview",function(){return _["g"]});r.d(t,"getCreditCardLastFourForReview",function(){return _["j"]});r.d(t,"getCreditCardFormError",function(){return _["i"]});r.d(t,"getCreditCardTokenError",function(){return _["l"]});r.d(t,"isCreatingCreditCardToken",function(){return _["s"]});r.d(t,"didUpgradeSucceed",function(){return _["a"]});r.d(t,"getUpgradeError",function(){return _["p"]});r.d(t,"selectIsProcessingPayment",function(){return _["w"]});r.d(t,"selectStripeApiKey",function(){return _["A"]});r.d(t,"selectSourcesPayable",function(){return _["z"]});r.d(t,"selectIsSelfUserOwner",function(){return _["x"]});r.d(t,"selectVatCountries",function(){return _["B"]});r.d(t,"getInvoiceData",function(){return _["n"]});r.d(t,"selectPaymentMethodSelected",function(){return _["y"]});r.d(t,"selectIsAppDisconnectedDialogShown",function(){return _["u"]});r.d(t,"selectActiveCheckoutStep",function(){return _["t"]});r.d(t,"selectIsCheckoutFlowAPIError",function(){return _["v"]});r.d(t,"checkoutAddressFormDataLoaded",function(){return O});r.d(t,"updateCheckoutCreditCardFormLoaded",function(){return k});r.d(t,"checkoutStatesAndCountriesDataLoaded",function(){return E});r.d(t,"checkoutCompanyAddressDataLoaded",function(){return j});r.d(t,"updateCompanyAddressField",function(){return C});r.d(t,"companyAddressValidated",function(){return S});r.d(t,"companyAddressFormFieldValidated",function(){return w});r.d(t,"clearCompanyAddressFormFieldValidationErrors",function(){return I});r.d(t,"handleCreditCardFormChange",function(){return T});r.d(t,"updateCreditCardTokenData",function(){return A});r.d(t,"updateIsCreatingCreditCardToken",function(){return N});r.d(t,"onUpgradeResponseReceived",function(){return P});r.d(t,"stripeCustomerDataLoaded",function(){return R});r.d(t,"updateStripeApiKey",function(){return M});r.d(t,"updateInvoiceDataField",function(){return x});r.d(t,"invoiceDataValidated",function(){return D});r.d(t,"invoiceDataFieldValidated",function(){return F});r.d(t,"updateCreditCardSelected",function(){return L});r.d(t,"updateCreditCardFormError",function(){return B});r.d(t,"clearCreditCardFormError",function(){return U});r.d(t,"clearPaymentStatus",function(){return q});r.d(t,"selfUserDataLoaded",function(){return G});r.d(t,"updateIsProcessingPayment",function(){return H});r.d(t,"updatePaymentMethodSelected",function(){return W});r.d(t,"updateIsAppDisconnectedDialogShown",function(){return V});r.d(t,"updateActiveCheckoutStep",function(){return K});r.d(t,"updateActiveCountry",function(){return z});r.d(t,"updateIsCheckoutFlowAPIError",function(){return Q});r.d(t,"loadCheckoutAddressFormData",function(){return Y});r.d(t,"validateCheckoutForm",function(){return J});r.d(t,"validateCompanyAddressFormField",function(){return X});r.d(t,"updateCompanyAddress",function(){return Z});r.d(t,"submitPaymentForUpgrade",function(){return $});r.d(t,"loadStripeCustomerData",function(){return ee});r.d(t,"validateInvoiceFormField",function(){return te});r.d(t,"validateInvoiceForm",function(){return re});r.d(t,"createInvoiceForUpgrade",function(){return ae});r.d(t,"loadSelfUserData",function(){return ne});var ge=t["default"]=be},,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return l});r.d(t,"b",function(){return u});r.d(t,"t",function(){return d});r.d(t,"s",function(){return p});r.d(t,"m",function(){return v});r.d(t,"o",function(){return m});r.d(t,"r",function(){return h});r.d(t,"q",function(){return f});r.d(t,"n",function(){return b});r.d(t,"p",function(){return g});r.d(t,"l",function(){return _});r.d(t,"g",function(){return y});r.d(t,"v",function(){return O});r.d(t,"x",function(){return k});r.d(t,"w",function(){return E});r.d(t,"J",function(){return j});r.d(t,"C",function(){return C});r.d(t,"E",function(){return S});r.d(t,"D",function(){return w});r.d(t,"u",function(){return T});r.d(t,"I",function(){return A});r.d(t,"k",function(){return N});r.d(t,"A",function(){return P});r.d(t,"Q",function(){return R});r.d(t,"K",function(){return M});r.d(t,"L",function(){return x});r.d(t,"y",function(){return D});r.d(t,"z",function(){return F});r.d(t,"M",function(){return L});r.d(t,"O",function(){return B});r.d(t,"N",function(){return U});r.d(t,"P",function(){return q});r.d(t,"f",function(){return G});r.d(t,"B",function(){return W});r.d(t,"F",function(){return V});r.d(t,"H",function(){return K});r.d(t,"G",function(){return z});r.d(t,"h",function(){return Q});r.d(t,"i",function(){return Y});r.d(t,"j",function(){return J});r.d(t,"c",function(){return X});r.d(t,"e",function(){return Z});r.d(t,"d",function(){return $});var a=r(14);var n=r(2);var i=r.n(n);var s=r(92);var o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.availablePlans,a=t.currency,n=t.planTerm,i=t.planLevel,o=t.paymentMethod;var l=o;o===s["c"].INVOICE&&n===s["e"].monthly&&(l=s["c"].CREDIT_CARD);o!==s["c"].INVOICE||"INR"!==a&&"BRL"!==a||(l=s["c"].CREDIT_CARD);if(!r[a]||!r[a][i]||!r[a][i][l]||!r[a][i][l][n])return null;return r[a][i][l][n]};var l=function e(t){if(!t||!t.availablePlans)return null;var r=t.availablePlans;var a=t.activeCurrency;var n=t.activeTerm;var i=t.activePlanLevel;var s=t.activePaymentMethod;return o({availablePlans:r,currency:a,planTerm:n,planLevel:i,paymentMethod:s})};var c=Object(a["b"])(function(e){if(!e||!e.pricingPlans)return null;return l(e.pricingPlans)});var u=function e(t){if(!t||!t.availablePlans)return[];return Object.keys(t.availablePlans)};var d=Object(a["b"])(function(e){if(!e||!e.pricingPlans)return[];return u(e.pricingPlans)});var p=Object(a["b"])(function(e){var t=c(e);if(!t||!t.id)return"";return t.id});var v=Object(a["b"])(function(e){var t=c(e);if(!t||!t.costPerTerm)return null;return t.costPerTerm});var m=Object(a["b"])(function(e){var t=c(e);if(!t||!t.level)return"";return t.level});var h=Object(a["b"])(function(e){var t=c(e);if(!t||!t.term)return"";return t.term});var f=Object(a["b"])(function(e){var t=c(e);if(!t)return null;return t.isInvoice?s["c"].INVOICE:s["c"].CREDIT_CARD});var b=Object(a["b"])(function(e){var t=c(e);if(!t||!t.term)return false;return t.term===s["e"].yearly});var g=Object(a["b"])(function(e){var t=c(e);if(!t||!t.lengthOfTermInMonths)return null;return t.lengthOfTermInMonths});var _=Object(a["b"])(function(e){var t=c(e);if(!t||!t.currency)return"";return t.currency});var y=function e(t,r){if(!t||!t.availablePlans)return null;var a=t.availablePlans;var n=t.activeCurrency;var i=t.activePlanLevel;var s=t.activePaymentMethod;if(!a[n]||!a[n][i]||!a[n][i][s])return null;return a[n][i][s][r]};var O=Object(a["b"])(function(e){if(!e||!e.pricingPlans)return null;var t=y(e.pricingPlans,s["e"].yearly);if(!t)return null;return t.costPerMonth});var k=Object(a["b"])(function(e){if(!e||!e.pricingPlans)return null;var t=y(e.pricingPlans,s["e"].yearly);if(!t)return null;return t.costPerTerm});var E=Object(a["b"])(function(e){if(!e||!e.pricingPlans)return null;var t=y(e.pricingPlans,s["e"].monthly);if(!t)return null;return t.costPerTerm});var j=Object(a["b"])(function(e){var t=_(e);if(!t)return null;if("JPY"===t)return 11;if("BRL"===t){var r=m(e);if(r===s["d"].plus.id)return 16}return 17});var C=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansAndCostDataLoaded};var S=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansDataLoading||t.pricingPlans.isCostDataLoading};var w=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansDataLoading};var I=function e(t){if(!t||!t.pricingPlans||!t.pricingPlans.activePlanCost)return null;return t.pricingPlans.activePlanCost};var T=Object(a["b"])(function(e){var t=I(e);if(!t||!t.billableUsers)return null;return t.billableUsers.billableActiveUsers});var A=Object(a["b"])(function(e){var t=I(e);if(!t||!t.paidSeats)return null;return t.paidSeats});var N=Object(a["b"])(function(e){var t=I(e);if(!t||!t.billableUsers)return null;return t.billableUsers.zeroActiveUsers});var P=Object(a["b"])(function(e){var t=I(e);if(!t||!t.billableUsers)return null;return t.billableUsers.inactiveUsers});var R=Object(a["b"])(function(e){var t=I(e);if(!t||!t.billableUsers)return null;var r=N(e)?0:T(e);return r+P(e)});var M=Object(a["b"])(function(e){var t=I(e);if(!t)return null;return t.subtotal});var x=Object(a["b"])(function(e){var t=I(e);if(!t||Object(n["isEmpty"])(t.tax))return null;return t.tax});var D=Object(a["b"])(function(e){var t=I(e);if(!t||!t.credits)return null;return t.credits.creditsApplied});var F=Object(a["b"])(function(e){var t=I(e);if(!t||!t.credits)return null;return t.credits.currentCredits});var L=Object(a["b"])(function(e){var t=I(e);if(!t||!t.credits)return null;return t.credits.creditsRemaining});var B=Object(a["b"])(function(e){var t=I(e);if(!t)return null;return t.totalRecurring});var U=Object(a["b"])(function(e){var t=I(e);if(!t)return null;return t.totalDueToday});var q=Object(a["b"])(function(e){var t=I(e);if(!t)return null;return t.totalRecurringTax});var G=Object(a["b"])(function(e){var t=I(e);if(!t)return null;return t.quotedTermEnd});var H=function e(t){if(!t||!t.cachedCost)return null;return t.cachedCost};var W=Object(a["b"])(function(e,t,r,a,n){if(!e||!e.pricingPlans)return null;var i=H(e.pricingPlans);var o=Object(s["h"])(t,r,a,n);if(!i||!i[o])return false;return true});var V=Object(a["b"])(function(e,t,r,a,n){if(!e||!e.pricingPlans)return null;var i=H(e.pricingPlans);var o=Object(s["h"])(t,r,a,n);if(!i||!i[o])return null;return i[o]});var K=Object(a["b"])(function(e){var t=c(e);if(!t||!t.isInvoice)return null;var r=T(e);if(r>t.minInvoiceSeats)return r;return t.minInvoiceSeats});var z=Object(a["b"])(function(e){var t=c(e);if(!t||!t.isInvoice)return null;return t.maxInvoiceSeats});var Q=Object(a["b"])(function(e){return e&&e.pricingPlans&&e.pricingPlans.apiError});var Y=Object(a["b"])(function(e){if(!e||!e.pricingPlans)return false;if(Q(e))return false;var t=p(e);var r=I(e);return t===r});var J=Object(a["b"])(function(e){var t=c(e);if(!t)return false;return t.isInvoice||false});var X=function e(t){if(!t||!t.pricingPlans||!t.pricingPlans.availablePlans)return[];var r=[];var a=Object.keys(t.pricingPlans.availablePlans);a.forEach(function(e){r.push(o({availablePlans:t.pricingPlans.availablePlans,currency:e,planTerm:t.pricingPlans.activeTerm,planLevel:t.pricingPlans.activePlanLevel,paymentMethod:t.pricingPlans.activePaymentMethod}))});return r};var Z=function e(t,r,a,n,i){if(!t||!t.pricingPlans||!t.pricingPlans.availablePlans)return null;var s=o({availablePlans:t.pricingPlans.availablePlans,currency:r,planTerm:a,planLevel:n,paymentMethod:i});return s&&s.id||null};var $=function e(t,r,a,n,i){if(!t||!t.pricingPlans||!t.pricingPlans.availablePlans)return null;var s=o({availablePlans:t.pricingPlans.availablePlans,currency:r,planTerm:a,planLevel:n,paymentMethod:i});return s&&s.costPerMonth||null}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(2);var c=r(18);var u=r(36);var d=r(14);var p=r(15);var v=r(4);var m=r(35);var h=r(24);var f=r(68);var b=r(34);var g=r(10);var _=r(12);var y=r(60);var O=/([a-zA-Z\s]+<)*(([a-zA-Z0-9_.+-]+)@([a-zA-Z0-9-.]+)(\.[a-zA-Z0-9]{2,4}))+>*\b,*$/i;function k(e){var t=[];var r=[];if(!e)return Promise.resolve({done:false,result:false});var a=e.split("\n").join(", ");a=e.split(",");for(var n=0;n<a.length;n++){var i=a[n];var s=i.trim();var o=s.match(O);o?r.push(o[2]):t.push(s)}var l=t.filter(function(e){return!!e}).length;if(l){var c=new Error;1===l&&1===a.length?c.name="one_invalid_email":c.name="multiple_invalid_emails";return Promise.reject(c)}return Promise.resolve({result:r,done:true})}function E(e){if(!e)return Promise.resolve();return k(e).then(function(e){if(!e.done)return Promise.resolve();return Promise.resolve({validatedEmails:e.result})})}var j=r(11);var C=r(31);var S=r(19);var w=r(230);var I=r(905);var T=r(585);var A=r(2272);var N=r(132);var P=r(805);var R=r(4407);var M=r(483);r.d(t,"setRealName",function(){return B});r.d(t,"setInEurope",function(){return U});r.d(t,"setGdprPref",function(){return q});r.d(t,"setWorkspaceName",function(){return G});r.d(t,"setWorkspaceDomain",function(){return H});r.d(t,"setDomainWhitelistingPref",function(){return W});r.d(t,"setCanWhitelistOwnerEmailDomain",function(){return V});r.d(t,"setSharedInviteLink",function(){return K});r.d(t,"setSignupDomain",function(){return z});r.d(t,"setInvites",function(){return Q});r.d(t,"setModalTitle",function(){return Y});r.d(t,"setStepNumber",function(){return J});r.d(t,"setStepCallback",function(){return X});r.d(t,"setCurrentStepValidity",function(){return Z});r.d(t,"setIsPromiseRunning",function(){return $});r.d(t,"setChannelName",function(){return ee});r.d(t,"setChannelId",function(){return te});r.d(t,"setWorkflow",function(){return re});r.d(t,"getRealName",function(){return se});r.d(t,"getInEurope",function(){return oe});r.d(t,"getGdprPref",function(){return le});r.d(t,"getWorkspaceName",function(){return ce});r.d(t,"getWorkspaceDomain",function(){return ue});r.d(t,"getInvites",function(){return de});r.d(t,"getDomainWhitelistingPref",function(){return pe});r.d(t,"getCanWhitelistOwnerEmailDomain",function(){return ve});r.d(t,"getSignupDomain",function(){return me});r.d(t,"getSharedInviteLink",function(){return he});r.d(t,"getModalTitle",function(){return fe});r.d(t,"getStepNumber",function(){return be});r.d(t,"getStepCallback",function(){return ge});r.d(t,"getCurrentStepValidity",function(){return _e});r.d(t,"getIsPromiseRunning",function(){return ye});r.d(t,"getChannelName",function(){return Oe});r.d(t,"getChannelId",function(){return ke});r.d(t,"getWorkflow",function(){return Ee});r.d(t,"getActiveWorkflowTask",function(){return je});r.d(t,"fetchAndSetChannelInfo",function(){return Ce});r.d(t,"fetchAndSetWorkspace",function(){return Se});r.d(t,"updateStep",function(){return we});r.d(t,"fetchAndSetSharedInviteLink",function(){return Ie});r.d(t,"validateInvites",function(){return Te});r.d(t,"sendInvites",function(){return Ae});r.d(t,"updateRealName",function(){return Ne});r.d(t,"updatePassword",function(){return Pe});r.d(t,"updateGdprPref",function(){return Re});r.d(t,"setInitialMarketingPref",function(){return Me});r.d(t,"updateWorkspaceName",function(){return xe});r.d(t,"updateWorkspaceDomain",function(){return De});r.d(t,"submitDomainWhitelistingPref",function(){return Fe});r.d(t,"fetchAndSetSignupDetails",function(){return Le});r.d(t,"fetchTeamCreationWorkflow",function(){return Be});r.d(t,"completeWorkflowTask",function(){return Ue});r.d(t,"showSecondAccountSetupBanner",function(){return qe});var x;var D=new g["b"]("team_creation");var F=Object(_["b"])();var L="TEAM_CREATOR_ONBOARDING";var B=Object(c["b"])("Set the primary owner's real name name");B.propTypes=o["b"].string;var U=Object(c["b"])("Set what region we're in, for initial GDPR pref setting");U.propTypes=o["b"].bool;var q=Object(c["b"])("Set the primary owner's GDPR pref");q.propTypes=o["b"].bool;var G=Object(c["b"])("Set workspace name");G.propTypes=o["b"].string;var H=Object(c["b"])("Set workspace domain");H.propTypes=o["b"].string;var W=Object(c["b"])("Set domain whitelisting pref");W.propTypes=o["b"].bool;var V=Object(c["b"])("Set whether or not we can set domain whitelist signups for primary owner's email domain");V.propTypes=o["b"].bool;var K=Object(c["b"])("Set shared invite link");K.propTypes=o["b"].string;var z=Object(c["b"])("Set signup domain for signup domain whitelisting");z.propTypes=o["b"].string;var Q=Object(c["b"])("Set which emails to send invites to");Q.propTypes=o["b"].array;var Y=Object(c["b"])("Set modal title");Y.propTypes=o["b"].string;var J=Object(c["b"])("Set step number");J.propTypes=o["b"].number;var X=Object(c["b"])("Set the callback that's fired when 'next' is clicked");X.propTypes=o["b"].func;var Z=Object(c["b"])("Set the validity of the current step.");Z.propTypes=o["b"].bool;var $=Object(c["b"])("Set the whether or not we have an active promise awaiting resolution");$.propTypes=o["b"].bool;var ee=Object(c["b"])("store the channel name corresponding to the onboarding-created channel");ee.propTypes=o["b"].string;var te=Object(c["b"])("store the channel ID corresponding to the onboarding-created channel");te.propTypes=o["b"].string;var re=Object(c["b"])("Set the active team creation workflow for this user");re.propTypes=o["b"].object;var ae={realName:"",inEU:true,gdprPref:false,workspaceName:"",workspaceDomain:"",invites:[],domainWhitelistingPref:false,canWhitelistOwnerEmailDomain:false,modalTitle:"",stepNumber:0,stepCallback:l["noop"],isCurrentStepValid:false,isPromiseRunning:false,channelName:"",channelId:null,workflow:null};var ne=Object(u["b"])((x={},n()(x,B,function(e,t){return s()({},e,{realName:t})}),n()(x,U,function(e,t){return s()({},e,{inEU:t})}),n()(x,q,function(e,t){return s()({},e,{gdprPref:t})}),n()(x,G,function(e,t){return s()({},e,{workspaceName:t})}),n()(x,H,function(e,t){return s()({},e,{workspaceDomain:t})}),n()(x,Q,function(e,t){return s()({},e,{invites:t})}),n()(x,z,function(e,t){return s()({},e,{signupDomain:t})}),n()(x,W,function(e,t){return s()({},e,{domainWhitelistingPref:t})}),n()(x,V,function(e,t){return s()({},e,{canWhitelistOwnerEmailDomain:t})}),n()(x,K,function(e,t){return s()({},e,{sharedInviteLink:t})}),n()(x,Y,function(e,t){return s()({},e,{modalTitle:t})}),n()(x,J,function(e,t){return s()({},e,{stepNumber:t})}),n()(x,X,function(e,t){return s()({},e,{stepCallback:t})}),n()(x,Z,function(e,t){return s()({},e,{isCurrentStepValid:t})}),n()(x,$,function(e,t){return s()({},e,{isPromiseRunning:t})}),n()(x,ee,function(e,t){return s()({},e,{channelName:t})}),n()(x,te,function(e,t){return s()({},e,{channelId:t})}),n()(x,re,function(e,t){return s()({},e,{workflow:t})}),x),ae,{persistenceEnabled:false});ne.propTypes={realName:o["b"].string,gdprPref:o["b"].bool,workspaceName:o["b"].string,workspaceDomain:o["b"].string,invites:o["b"].array,domainWhitelistingPref:o["b"].bool,modalTitle:o["b"].string,stepNumber:o["b"].number,stepCallback:o["b"].func,isCurrentStepValid:o["b"].bool,isPromiseRunning:o["b"].bool,channelName:o["b"].string,channelId:o["b"].string,workflow:o["b"].object};var ie=t["default"]=ne;var se=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.realName});var oe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.inEU});var le=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.gdprPref});var ce=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.workspaceName});var ue=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.workspaceDomain});var de=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.invites});var pe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.domainWhitelistingPref});var ve=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.canWhitelistOwnerEmailDomain});var me=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.signupDomain});var he=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.sharedInviteLink});var fe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.modalTitle});var be=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.stepNumber});var ge=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.stepCallback});var _e=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.isCurrentStepValid});var ye=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.isPromiseRunning});var Oe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.channelName});var ke=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.channelId});var Ee=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.workflow});var je=Object(d["b"])(function(e){if(!e||!e.teamCreation||!e.teamCreation.workflow||!e.teamCreation.workflow.tasks)return null;var t=e.teamCreation.workflow;if("completed"===t.state)return null;var r=Object(l["find"])(t.tasks,{state:"pending"});return r?r.subtype:null});var Ce=Object(p["b"])("Grab channel ID and channel name for the team creator onboarding dialog",function(e,t){var r=t();var a=Object(f["a"])(r,"default_channels");var n=a.map(function(e){var t=Object(S["d"])(r,e);return t});var i=n.filter(function(e){return"general"!==Object(j["getDisplayNameForChannel"])(r,e,{publicChannelIncludeHashSign:false})&&"random"!==Object(j["getDisplayNameForChannel"])(r,e,{publicChannelIncludeHashSign:false})&&!Object(j["isIm"])(e)});if(!Object(l["isArray"])(i)||void 0===i[0]||null===i[0]){var s={workflow:Ee(r),hasInvited:Object(b["g"])(r,"has_invited"),needsPasswordSet:Object(b["g"])(r,"needs_initial_password_set"),defaultChannels:a};Object(_["a"])({getState:t}).error(s,"TRACTOR_CHANNEL_MISSING");e(ee(""));return Promise.resolve()}var o=i[0],c=o.name,u=o.id;e(ee(c));e(te(u));return Promise.resolve({name:c,id:u})});var Se=Object(p["b"])("Grab workspace name and domain from boot data",function(e,t){var r=t();var a=Object(m["d"])(r);var n=Object(m["j"])(r,a.id);var i=Object(C["getTeamDisplayName"])(n);var s=Object(C["getTeamUrl"])(n);var o=Object(y["getTeamSubdomain"])(s);e(G(i));e(H(o))});var we=Object(p["b"])("Update the state of a step",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.number,n=r.validated,i=r.forceValidation;var s=t();var o=_e(s);var l=n||(i?n:o);if(l&&a){e(Z(null));e(J(a));return Promise.resolve({isValid:l})}if(l){e(Z(l));return Promise.resolve({isValid:l})}e(Z(l));return Promise.resolve({isValid:l})});we.propTypes={number:o["b"].number,validated:o["b"].bool};var Ie=Object(p["b"])("Create a shared invite link",function(e){var t={expiration:30,maxSignups:2e3,disableEmail:true};return e(Object(P["c"])(s()({},t))).then(function(t){var r=t.url;r&&e(K(r))}).catch(function(e){return Promise.reject(e)})});var Te=Object(p["b"])("validate emails to send invites to",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.invites;if(!a||!a.length){e(Q([]));return Promise.resolve()}return E(a).then(function(t){var r=t.validatedEmails;e(Q(r));return Promise.resolve(t)}).catch(function(e){F.info(L,e);var t={one_invalid_email:D.t("It looks like that email address isn\u2019t valid. Try again?"),multiple_invalid_emails:D.t("It looks like at least one of these addresses isn\u2019t valid. Try checking your list?")};var r=e.name||"generic_validate_invites_error";var a=Object(l["get"])(t,r)||null;var n=new Error(a);n.name=r;return Promise.reject(n)})});Te.propTypes={invites:o["b"].string};var Ae=Object(p["b"])("update the list of emails to send invites to",function(e,t){var r=t();var a=de(r);if(!a||!a.length)return Promise.resolve();e($(true));var n=a.map(function(e){return{email:e,type:"regular"}});return e(Object(P["l"])({invites:n,source:"team_creation_account_setup_dialog",mode:"manual"})).then(function(e){F.info(L,e)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_send_invites_error");var r=new Error(t);r.name="email_send_failure";return Promise.reject(r)}).finally(function(){return e($(false))})});var Ne=Object(p["b"])("update real name field in profile",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.realName;e($(true));return e(Object(w["k"])({profile:{real_name:a}})).then(function(t){t.ok&&e(B(a));return Promise.resolve(t)}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;var r={invalid_name_required:Object(M["a"])("name_invalid_name_required"),invalid_starts_with_at:Object(M["a"])("invalid_starts_with_at"),too_long:Object(M["a"])("too_long"),invalid_reserved_word:Object(M["a"])("invalid_reserved_word"),invalid_name_specials:Object(M["a"])("name_invalid_name_specials"),invalid_emoji_not_allowed:Object(M["a"])("invalid_emoji_not_allowed",{name:a}),ratelimited:D.t("Sorry, you\u2019ve hit the rate limit. You\u2019ll be able to try again soon.")};var n=t.error||"generic_real_name_error";var i=r[n]||D.t("For some reason, that didn\u2019t work. Please try again to continue.");var s=new Error(i);s.name=n;return Promise.reject(s)}).finally(function(){return e($(false))})});Ne.propTypes={realName:o["b"].string};var Pe=Object(p["b"])("update Primary Owner account password",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.password;e($(true));return e(Object(T["a"])({password:a})).then(function(e){return Promise.resolve(e)}).catch(function(e){return Promise.reject(e)}).finally(function(){return e($(false))})});Pe.propTypes={password:o["b"].string.isRequired};var Re=Object(p["b"])("update Primary Owners GDPR pref",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.gdprPref;return e(Object(N["c"])({email_weekly:a,email_tips:a,email_offers:a,email_research:a,email_developer:a,email_changelog:a})).then(function(t){t&&!t.ok||e(q(a));return Promise.resolve(t)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_gdpr_error");var r=new Error(t);r.name="generic_gdpr_error";return Promise.reject(r)})});Re.propTypes={gdprPref:o["b"].bool};var Me=Object(p["b"])("Set initial marketing email pref based on region",function(e,t){var r=t();var a=!!Object(v["getFromBootData"])(r,"is_europe");e(U(a));a||e(Re({gdprPref:true}))});var xe=Object(p["b"])("update workspace name",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.workspaceName;return e(Object(T["c"])({workspaceName:a})).then(function(t){t.ok&&a&&e(G(a));return Promise.resolve(t)}).catch(function(e){var t={denied:D.t("For some reason, that didn\u2019t work. Please try again to continue.")};var r=Object(l["get"])(e,"data.error","generic_workspace_name_error");var a=Object(l["get"])(t,r)||D.t("For some reason, that didn\u2019t work. Please try again to continue.");var n=new Error(a);n.name=r;return Promise.reject(n)})});xe.propTypes={workspaceName:o["b"].string};var De=Object(p["b"])("update workspace domain",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.workspaceDomain;return e(Object(T["b"])({workspaceDomain:a})).then(function(t){t.ok&&e(H(a));return Promise.resolve(t)}).catch(function(e){var t={denied:D.t("For some reason, that didn\u2019t work. Please try again to continue."),bad_url:D.t("Workspace URLs can only have letters, numbers, and dashes."),long_url:D.t("Please enter up to 21 characters for your Workspace URL."),taken_url:D.t("This URL is not available. Sorry!")};var r=Object(l["get"])(e,"data.error","generic_workspace_domain_error");var a=t[r]||D.t("For some reason, that didn\u2019t work. Please try again to continue.");var n=new Error(a);n.name=r;return Promise.reject(n)})});De.propTypes={workspaceDomain:o["b"].string};var Fe=Object(p["b"])("submit domain whitelisting pref",function(e,t){var r=t();var a=pe(r);var n={signup_mode:"invites"};if(a){var i=me(r);n.signup_mode="email";n.signup_domains=i}e(Object(I["a"])(n)).then(function(t){t.ok&&e(W(a));return Promise.resolve(t)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_domain_whitelisting_error");var r=new Error(t);r.name="generic_domainwhitelisting_error";return Promise.reject(r)})});var Le=Object(p["b"])("Grab primary owner email domain for domain whitelisting",function(e,t){var r=t();var a=Object(h["b"])(r);var n=Object(l["get"])(a,"profile.email");var i=n.split("@")[1];e(Object(T["e"])({domain:i})).then(function(t){if(!t.ok)return e(V(false));e(z(i));return e(V(true))}).catch(function(e){F.info(L,"Failed to check if email domain can be whitelisted for signups.");return Promise.reject(e)})});var Be=Object(p["b"])("Fetch the team creation workflow for this user",function(e){return e(Object(A["a"])({onlyActive:false})).then(function(t){var r=t.user_workflows;var a=Object(l["find"])(r,function(e){return"account_setup"===e.type&&"team_creation"===e.subtype});a&&e(re(a));return Promise.resolve(a)}).catch(function(e){F.info(L,"Failed to fetch workflows list.");return Promise.reject(e)})});Be.propTypes=o["b"].object;var Ue=Object(p["b"])("Complete team creation workflow for this user",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.taskSubtype;var n=Ee(t());if(!n||!n.tasks.length)return Promise.reject(new Error("No workflow or tasks found for this user."));var i=Object(l["find"])(n.tasks,function(e){return"account_setup"===e.type&&e.subtype===a});if(!i)return Promise.reject(new Error("Could not find task of subtype "+a+"."));e($(true));return e(Object(A["b"])({userTaskId:i.user_task_id})).then(function(t){if(t.ok&&"complete_team_creator_account_setup"===a){var r=s()({},n,{state:"completed"});e(re(r));e(Object(A["c"])(n.user_workflow_id));e(Object(R["a"])())}return Promise.resolve(t)}).catch(function(e){F.info(L,"Failed to complete workflow task.");return Promise.reject(e)}).finally(function(){return e($(false))})});Ue.propTypes={taskSubtype:o["b"].string.isRequired};var qe=Object(p["b"])("Display the second team creation account setup banner for this user",function(e,t){var r=Ee(t());if(!r)return Promise.resolve();var a=Object(l["find"])(r.tasks,function(e){return"account_setup"===e.type&&"start_team_creator_account_setup"===e.subtype});if(!a)return Promise.reject(new Error("Could not find initial account setup task."));var n=[s()({},a,{state:"completed"}),s()({},r.tasks[1])];var i=s()({},r,{tasks:n});return e(re(i))});Ue.propTypes=o["b"].object},,,,function(e,t,r){"use strict";r.r(t);r.d(t,"uploadStarting",function(){return p});r.d(t,"progressUpdate",function(){return v});r.d(t,"uploadProcessing",function(){return m});r.d(t,"uploadCanceled",function(){return h});r.d(t,"uploadComplete",function(){return f});r.d(t,"uploadQueueEmptied",function(){return b});r.d(t,"IDLE",function(){return g});r.d(t,"UPLOADING",function(){return _});r.d(t,"COMPLETE",function(){return y});r.d(t,"CANCELED",function(){return O});r.d(t,"PROCESSING",function(){return k});r.d(t,"getFileUploadState",function(){return C});r.d(t,"getFileUploadStatus",function(){return S});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d;var p=Object(l["b"])("Started uploading a file");p.propTypes={fileName:o["b"].string,fileCount:o["b"].number,isRetry:o["b"].bool.isRequired,cancelable:o["b"].bool.isRequired};var v=Object(l["b"])("Update to the file upload % complete");v.propTypes={percentComplete:o["b"].number.isRequired};var m=Object(l["b"])("File is being processed by the backend");m.propTypes=null;var h=Object(l["b"])("Canceled the file upload");h.propTypes=null;var f=Object(l["b"])("Finished the file upload");f.propTypes=null;var b=Object(l["b"])("Done all uploads");b.propTypes=null;var g=0;var _=1;var y=2;var O=3;var k=4;var E={status:g,fileName:null,fileCount:null,percentComplete:0,cancelable:false,isRetry:false};var j=Object(c["b"])((d={},n()(d,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fileName,a=t.fileCount,n=t.isRetry,i=t.cancelable;return{status:_,fileName:r,fileCount:a,isRetry:n,percentComplete:0,cancelable:i}}),n()(d,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.percentComplete;return s()({},e,{percentComplete:r})}),n()(d,m,function(e){return s()({},e,{status:k,percentComplete:100})}),n()(d,h,function(e){return s()({},e,{status:O})}),n()(d,f,function(e){return s()({},e,{status:y})}),n()(d,b,function(e){return s()({},e,{status:g})}),d),E,{persistenceEnabled:false});j.propTypes={status:o["b"].number.isRequired,fileName:o["b"].string,fileCount:o["b"].number,percentComplete:o["b"].number,cancelable:o["b"].bool,isRetry:o["b"].bool};t["default"]=j;var C=Object(u["b"])(function(e){return e&&e.fileUpload});var S=Object(u["b"])(function(e){return e&&e.fileUpload&&e.fileUpload.status})},,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"c",function(){return i});r.d(t,"d",function(){return s});r.d(t,"a",function(){return o});r.d(t,"b",function(){return l});r.d(t,"e",function(){return c});var a=r(0);var n=r(18);var i=Object(n["b"])("Marks topics as desynced");i.propTypes=a["b"].arrayOf(a["b"].string).isRequired;var s=Object(n["b"])("Marks topics as resynced");s.propTypes=a["b"].arrayOf(a["b"].string).isRequired;var o=Object(n["b"])("Clear all topics");o.propTypes=null;var l=Object(n["b"])("Notify resynced");l.propTypes=null;var c=Object(n["b"])("Notify Sonic resynced");c.propTypes=null},,,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});var a={NUMBER_OF_USERS_IS_REQUIRED:"number_of_users_is_required",PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS:"invalid_po_number",NUMBER_OF_USERS_INVALID_CHARACTERS:"invalid_number_of_users",NUMBER_OF_USERS_INVALID_MIN_ALLOWED:"invalid_min_number_of_users",NUMBER_OF_USERS_INVALID_MAX_ALLOWED:"invalid_max_number_of_users"};var n={NUMERIC_WITH_MIN_MAX_LENGTH_REGEX:/^\d{1,20}$/,NUMERIC_REGEX:/^\d+$/};var i={NUMBER_OF_USERS:"numberOfUsers",ADDITIONAL_BILLING_CONTACTS:"additionalBillingContacts",PURCHASE_ORDER_NUMBER:"purchaseOrderNumber"}},,,,function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"c",function(){return a});r.d(t,"a",function(){return n});var a={CARD_NUMBER:"cardNumber",CARD_EXPIRY:"cardExpiry",CARD_CVC:"cardCvc",POSTAL_CODE:"postalCode"};var n="new_credit_card_id";var i=9},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1369);t["a"]=a["a"]},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"r",function(){return p});r.d(t,"s",function(){return v});r.d(t,"c",function(){return m});r.d(t,"e",function(){return h});r.d(t,"o",function(){return f});r.d(t,"g",function(){return b});r.d(t,"n",function(){return x});r.d(t,"h",function(){return D});r.d(t,"a",function(){return L});r.d(t,"k",function(){return U});r.d(t,"d",function(){return q});r.d(t,"q",function(){return G});r.d(t,"p",function(){return W});r.d(t,"i",function(){return V});r.d(t,"j",function(){return K});r.d(t,"l",function(){return z});r.d(t,"m",function(){return Q});r.d(t,"f",function(){return Y});r.d(t,"b",function(){return X});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(10);var u=r(33);var d=new c["b"]("checkout_v2");function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=J();if(Object(o["isEmpty"])(a))return{};return s()({},_(e,a),y(e,a,t,r),O(e,a),k(e,a))}function v(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=null;var i=J();if(Object(o["isEmpty"])(i))return n;var s=e.companyName,l=e.street,c=e.city,d=e.country,p=e.postalCode,v=e.region,m=e.vatId,h=e.isBusinessPurchase,f=e.isVatIdAvailable,b=e.abnId,g=e.qstId;switch(t){case u["b"].COMPANY_NAME:n=w(s,i);break;case u["b"].STREET:n=I(l,i);break;case u["b"].CITY:n=T(c,i);break;case u["b"].COUNTRY:n=A(d,i);break;case u["b"].POSTAL_CODE:n=N(d,p,i);break;case u["b"].REGION:n=P(d,v,i);break;case u["b"].VAT_ID:n=M(d,m,h,f,r,i,a);break;case u["b"].ABN_ID:n=F(b,i);break;case u["b"].QST_ID:n=B(g,i);break;default:}return n}function m(e,t,r){var a=J();if(Object(o["isEmpty"])(a))return{};var n={};var i=u["f"].DEFAULT_ERROR;"102"===e?i=u["f"].ZIP_CODE_INVALID_API_ERROR:t===u["f"].VAT_ID_INPUT_ERROR?i=r?u["f"].VAT_ID_INVALID_API_ERROR:u["f"].VAT_ID_INVALID_FORMAT:Object(o["has"])(u["f"],t)&&(i=t);switch(i){case u["f"].ZIP_CODE_INVALID_API_ERROR:n.postalCode=j(u["f"].ZIP_CODE_INVALID_API_ERROR,"",a);break;case u["f"].VAT_ID_INVALID_API_ERROR:n.vatId=j(u["f"].VAT_ID_INVALID_API_ERROR,"",a);break;case u["f"].VAT_ID_INVALID_FORMAT:n.vatId=j(u["f"].VAT_ID_INVALID_FORMAT,"",a);break;case u["f"].API_ERROR:case u["f"].ADDRESS_INPUT_ERROR:case u["f"].ERROR_UPDATING_BILLING_ADDRESS:case u["f"].NO_PERMS:case u["f"].INVALID_AUTH:default:n.general=j(u["f"].DEFAULT_ERROR,"",a)}return n}function h(e){return f(e)?d.t("Zip code"):d.t("Postal code")}function f(e){return e===u["e"].UNITED_STATES}function b(e){return g(e)?d.t("State"):d.t("State / Province")}function g(e){return e===u["e"].UNITED_STATES}function _(e,t){var r={};var a=w(e.companyName,t);a&&(r.companyName=a);var n=I(e.street,t);n&&(r.street=n);var i=T(e.city,t);i&&(r.city=i);var s=A(e.country,t);s&&(r.country=s);var o=N(e.country,e.postalCode,t);o&&(r.postalCode=o);var l=P(e.country,e.region,t);l&&(r.region=l);return r}function y(e,t,r,a){var n={};if(W(e.country,r)){var i=R(e.isBusinessPurchase,t);i&&(n.isBusinessPurchase=i)}var s=M(e.country,e.vatId,e.isBusinessPurchase,e.isVatIdAvailable,r,t,a);s&&(n.vatId=s);return n}function O(e,t){var r={};var a=F(e.abnId,t);a&&(r.abnId=a);return r}function k(e,t){var r={};var a=B(e.qstId,t);a&&(r.qstId=a);return r}function E(e){return e===u["e"].UNITED_STATES||e===u["e"].CANADA}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:case u["f"].POSTAL_CODE_INVALID_CHARACTERS:case u["f"].POSTAL_CODE_INVALID_API_ERROR:a=C(e,t,r);break;case u["f"].REGION_IS_REQUIRED:case u["f"].REGION_INVALID_CHARACTERS:a=S(e,t,r);break;default:}return a}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:a=r[u["f"].ZIP_CODE_IS_REQUIRED];break;case u["f"].POSTAL_CODE_INVALID_CHARACTERS:a=r[u["f"].ZIP_CODE_INVALID_CHARACTERS];break;case u["f"].POSTAL_CODE_INVALID_API_ERROR:a=r[u["f"].ZIP_CODE_INVALID_API_ERROR];break;default:}return a}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].REGION_IS_REQUIRED:a=r[u["f"].STATE_IS_REQUIRED];break;case u["f"].REGION_INVALID_CHARACTERS:a=r[u["f"].STATE_INVALID_CHARACTERS];break;default:}return a}function w(e,t){var r=null;e||(r=j(u["f"].COMPANY_NAME_IS_REQUIRED,"",t));return r}function I(e,t){var r=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(r=j(u["f"].STREET_INVALID_CHARACTERS,"",t)):r=j(u["f"].STREET_IS_REQUIRED,"",t);return r}function T(e,t){var r=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(r=j(u["f"].CITY_INVALID_CHARACTERS,"",t)):r=j(u["f"].CITY_IS_REQUIRED,"",t);return r}function A(e,t){var r=null;e||(r=j(u["f"].COUNTRY_IS_REQUIRED,"",t));return r}function N(e,t,r){var a=null;E(e)?t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)?e!==u["e"].UNITED_STATES||u["a"].US_POSTAL_CODE_FORMAT_REGEX.test(t)?e!==u["e"].CANADA||u["a"].CANADA_POSTAL_CODE_FORMAT_REGEX.test(t)||(a=j(u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,e,r)):a=j(u["f"].US_ZIP_CODE_INVALID_FORMAT,e,r):a=j(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,r):a=j(u["f"].POSTAL_CODE_IS_REQUIRED,e,r):t&&!u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)&&(a=j(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,r));return a}function P(e,t,r){var a=null;E(e)&&!t?a=j(u["f"].REGION_IS_REQUIRED,e,r):t&&!u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(t)&&(a=j(u["f"].REGION_INVALID_CHARACTERS,e,r));return a}function R(e,t){var r=null;null===e&&(r=j(u["f"].IS_BUSINESS_PURCHASE_IS_REQUIRED,"",t));return r}function M(e,t,r,a,n,i,s){var o=null;if((!W(e,n)||r)&&(!G(e,n)||a)&&x(e,n))if(t)e!==u["e"].RUSSIAN_FEDERATION||u["a"].TIN_ID_REGEX.test(t)?e===u["e"].SOUTH_KOREA&&!u["a"].BRN_REGEX.test(t)&&s?o={errorText:d.t("Unfortunately, this BRN doesn\u2019t seem to be valid.",{fallbackHash:"445b80ce1d95ccff20dc06d5b1afd820a035adc2",fallbackHashNs:"billing"})}:e!==u["e"].SOUTH_AFRICA||u["a"].VAT_ID_SOUTH_AFRICA_REGEX.test(t)?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)||(o=j(u["f"].VAT_ID_INVALID_CHARACTERS,"",i)):o=j(u["f"].VAT_ID_INVALID_FORMAT,"",i):o=j(u["f"].TIN_ID_INVALID_LENGTH,"",i);else if(H(e,n)){var l=u["f"].VAT_ID_IS_REQUIRED;e===u["e"].RUSSIAN_FEDERATION?l=u["f"].TIN_ID_IS_REQUIRED:e===u["e"].SOUTH_KOREA&&(l=u["f"].BRN_IS_REQUIRED);o=j(l,"",i)}return o}function x(e,t){return!!e&&Object(o["has"])(t,e)}function D(e,t){var r={};if(x(e,t)){var a;var i=!!W(e,t)||null;r=(a={},n()(a,u["b"].IS_BUSINESS_PURCHASE,i),n()(a,u["b"].IS_VAT_AVAILABLE,true),n()(a,u["b"].VAT_ID,""),a)}else if(z(e)){var s;r=(s={},n()(s,u["b"].IS_BUSINESS_PURCHASE,null),n()(s,u["b"].IS_VAT_AVAILABLE,false),n()(s,u["b"].VAT_ID,""),s)}else{var o;r=(o={},n()(o,u["b"].IS_BUSINESS_PURCHASE,false),n()(o,u["b"].IS_VAT_AVAILABLE,false),n()(o,u["b"].VAT_ID,""),o)}return r}function F(e,t){var r=null;e&&(11!==e.replace(/\s/g,"").length?r=j(u["f"].ABN_ID_INVALID_LENGTH,"",t):u["a"].ABN_ID_REGEX.test(e)||(r=j(u["f"].ABN_ID_INVALID_CHARACTERS,"",t)));return r}function L(e,t){var r={};U(e,t)||(r=n()({},u["b"].ABN_ID,""));return r}function B(e,t){var r=null;e&&((9!==e.length||u["a"].QST_ID_NINE_NUM_REGEX.test(e))&&(10!==e.length||u["a"].QST_ID_NR_REGEX.test(e)||u["a"].QST_ID_TEN_NUM_REGEX.test(e))&&(9===e.length||10===e.length||u["a"].QST_ID_TQ_REGEX.test(e))||(r=j(u["f"].QST_ID_INVALID_FORMAT,"",t)));return r}function U(e,t){return!!e&&Object(o["has"])(t,e)}function q(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e===u["e"].RUSSIAN_FEDERATION)return d.t("Do you have a TIN ID on hand?");if(e===u["e"].SOUTH_KOREA&&t)return d.t("Do you have a BRN on hand?");return d.t("Do you have a VAT ID on hand?")}function G(e,t){return H(e,t)}function H(e,t){if(!x(e,t))return false;if(e===u["e"].SOUTH_KOREA||e===u["e"].SOUTH_AFRICA)return false;return true}function W(e,t){return z(e)||x(e,t)&&H(e,t)}function V(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e===u["e"].RUSSIAN_FEDERATION)return d.t("TIN ID");if(e===u["e"].SOUTH_KOREA&&t)return d.t("BRN");return d.t("VAT ID")}function K(e){if(e===u["e"].RUSSIAN_FEDERATION)return u["d"].TIN_ID;return u["d"].VAT_ID}function z(e){return!!e&&e===u["e"].JAPAN}function Q(e,t){return!!e&&t&&e===u["e"].CANADA&&"Quebec"===t}function Y(e,t){var r={};Q(e,t)||(r=n()({},u["b"].QST_ID,""));return r}function J(){var e;return e={},n()(e,u["f"].COMPANY_NAME_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a company name.")}),n()(e,u["f"].STREET_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a street address.")}),n()(e,u["f"].CITY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a city.")}),n()(e,u["f"].POSTAL_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a postal code.")}),n()(e,u["f"].ZIP_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a zip code.")}),n()(e,u["f"].REGION_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state / province.")}),n()(e,u["f"].STATE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state.")}),n()(e,u["f"].COUNTRY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your country.")}),n()(e,u["f"].VAT_ID_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a VAT ID.")}),n()(e,u["f"].STREET_INVALID_CHARACTERS,{errorText:d.t("Your street address can\u2019t contain special characters.")}),n()(e,u["f"].CITY_INVALID_CHARACTERS,{errorText:d.t("Your city name can\u2019t contain special characters.")}),n()(e,u["f"].REGION_INVALID_CHARACTERS,{errorText:d.t("Your state / province can\u2019t contain special characters.")}),n()(e,u["f"].STATE_INVALID_CHARACTERS,{errorText:d.t("Your state can\u2019t contain special characters.")}),n()(e,u["f"].POSTAL_CODE_INVALID_CHARACTERS,{errorText:d.t("Your postal code can\u2019t contain special characters.")}),n()(e,u["f"].ZIP_CODE_INVALID_CHARACTERS,{errorText:d.t("Your zip code can\u2019t contain special characters.")}),n()(e,u["f"].VAT_ID_INVALID_CHARACTERS,{errorText:d.t("Your VAT ID can\u2019t contain special characters.")}),n()(e,u["f"].ABN_ID_INVALID_CHARACTERS,{errorText:d.t("Your ABN ID can\u2019t contain special characters.")}),n()(e,u["f"].US_ZIP_CODE_INVALID_FORMAT,{errorText:d.t("Please use a 5- or 9-digit zip code.")}),n()(e,u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,{errorText:d.t("Please use a valid Canadian postal code.")}),n()(e,u["f"].POSTAL_CODE_INVALID_API_ERROR,{errorText:d.t("There\u2019s a problem with your postal code.")}),n()(e,u["f"].ZIP_CODE_INVALID_API_ERROR,{errorText:d.t("There\u2019s a problem with your zip code.")}),n()(e,u["f"].VAT_ID_INVALID_API_ERROR,{errorText:d.t("We could not verify your VAT ID.")}),n()(e,u["f"].VAT_ID_INPUT_ERROR,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),n()(e,u["f"].VAT_ID_INVALID_FORMAT,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),n()(e,u["f"].ABN_ID_INVALID_LENGTH,{errorText:d.t("Your ABN ID should have 11 digits.")}),n()(e,u["f"].DEFAULT_ERROR,{errorText:d.t("Unfortunately, something\u2019s gone wrong.")}),n()(e,u["f"].TIN_ID_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a TIN ID.")}),n()(e,u["f"].BRN_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a BRN.",{fallbackHash:"e328d2229f0142c5205badeda7bb405eb3b7e754"})}),n()(e,u["f"].TIN_ID_INVALID_LENGTH,{errorText:d.t("Your TIN ID should have 10 or 12 digits.")}),n()(e,u["f"].IS_BUSINESS_PURCHASE_IS_REQUIRED,{errorText:d.t("Please let us know whether this is a business purchase.")}),n()(e,u["f"].QST_ID_INVALID_FORMAT,{errorText:d.t("Your QST ID should have 16 characters: 10 numbers, the letters TQ, and then four more numbers.")}),e}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=[];e.street||a.push(u["b"].STREET);e.suite||a.push(u["b"].SUITE);e.region||a.push(u["b"].REGION);e.city||a.push(u["b"].CITY);e.postalCode||a.push(u["b"].POSTAL_CODE);x(t,r.vatCountries)||a.push(u["b"].VAT_ID);U(t,r.abnCountries)||a.push(u["b"].ABN_ID);return a}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return p});r.d(t,"l",function(){return v});r.d(t,"h",function(){return m});r.d(t,"c",function(){return h});r.d(t,"i",function(){return f});r.d(t,"g",function(){return b});r.d(t,"k",function(){return g});r.d(t,"j",function(){return _});r.d(t,"o",function(){return y});r.d(t,"n",function(){return O});r.d(t,"d",function(){return E});r.d(t,"e",function(){return j});r.d(t,"f",function(){return C});r.d(t,"b",function(){return w});r.d(t,"p",function(){return I});r.d(t,"m",function(){return T});var a=r(3);var n=r.n(a);var i=r(0);var s=r(18);var o=r(15);var l=r(4523);var c=r(212);var u=r(190);var d={EXPIRED_COST_REQUEST:"EXPIRED_COST_REQUEST"};var p=250;var v=Object(s["b"])("Switch currently active plan");v.propTypes=i["b"].object;var m=Object(s["b"])("Successfully fetched available plans");m.propTypes=i["b"].object;var h=Object(s["b"])("Successfully fetched cost for current plan");h.propTypes=i["b"].object;var f=Object(s["b"])("Received an API error");f.propTypes=null;var b=Object(s["b"])("Plans and cost data loaded");b.propTypes=null;var g=Object(s["b"])("Set Plan Level");g.propTypes=i["b"].string;var _=Object(s["b"])("Set Payment Method");_.propTypes=i["b"].string;var y=Object(s["b"])("Update Is Plans Data Loading");y.propTypes=i["b"].object;var O=Object(s["b"])("Update Is Cost Data Loading");O.propTypes=i["b"].object;var k=0;function E(e){return function(t,r){return new Promise(function(a,i){var s=r();var o=Object(u["s"])(s);var p=Object(c["b"])(s);var v=Object(u["j"])(s);t(O({isCostDataLoading:true}));var m=parseInt(Object(c["n"])(s).numberOfUsers,10)||0;var b=e.isFinalReview||false;var g=Object(u["B"])(s,o,p,v,m);var _=k+1;k=_;if(g&&!b)window.setTimeout(function(){if(k===_){var e=Object(u["F"])(s,o,p,v,m);t(h({activePlanCost:e,companyAddress:p,isInvoice:v,numInvoiceSeats:m}));t(O({isCostDataLoading:false}));a()}else i(new Error(d.EXPIRED_COST_REQUEST))},250);else{var y=p.country,E=p.region,j=p.street,C=p.postalCode,S=p.isBusinessPurchase;var w={productId:o,country:y,region:E,postalCode:C,street:j,isBusinessPurchase:S,isInvoice:v,numInvoiceSeats:m,isFinalReview:b};t(Object(l["b"])(w)).then(function(e){if(k===_){t(O({isCostDataLoading:false}));t(h(n()({},e,{companyAddress:p,isInvoice:v,numInvoiceSeats:m})));a()}else i(new Error(d.EXPIRED_COST_REQUEST))}).catch(function(e){"max_user_count_exceed_for_ss_invoice"!==e.data.error?t(f()):t(O({isCostDataLoading:false}))})}})}}function j(e){return function(t,r){return new Promise(function(a){t(y({isPlansDataLoading:true}));var n=r();var i=Object(c["c"])(n);var s=Object(c["t"])(n);t(Object(l["a"])({country:i,checkout_step:s})).then(function(r){Promise.all([t(m(r)),t(E(e)),t(y({isPlansDataLoading:false}))]).then(function(){t(b());a()}).catch(function(e){e.message!==d.EXPIRED_COST_REQUEST&&t(f())})}).catch(function(){return t(f())})})}}j.propTypes={country:i["b"].string};function C(){return function(e){return new Promise(function(t){e(Object(l["a"])()).then(function(r){e(m(r));t()})})}}var S=function e(t,r,a){if(r===a)return Promise.resolve();return t(E({isFinalReview:false}))};var w=Object(o["b"])("Async thunk to change active plan initiated",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=Object(u["s"])(t());e(v(r));var n=Object(u["s"])(t());return S(e,a,n)});w.propTypes={term:i["b"].string,currency:i["b"].string};function I(e){return function(t,r){var a=Object(u["s"])(r());t(g(e));var n=Object(u["s"])(r());return S(t,a,n)}}function T(e){return function(t,r){var a=Object(u["s"])(r());t(_(e));var n=Object(u["s"])(r());S(t,a,n)}}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(30);function n(e){var t=e.error,r=e.description,n=e.subtype,i=e.teamId,s=e.version;var o=a["isDev"]?"https://dev.slack.com/beacon/error":"https://slack.com/beacon/error";var l=t;l instanceof Error&&(l.subtype=n);"string"===typeof l&&(l={message:l,subtype:n});l||(l={subtype:n});var c={description:r,version:s,error_json:JSON.stringify(l,Object.getOwnPropertyNames(l)),team:i};var u=new XMLHttpRequest;u.open("POST",o,true);u.setRequestHeader("Content-type","application/x-www-form-urlencoded");u.send(encodeURI(Object.keys(c).map(function(e){return e+"="+c[e]}).join("&")))}r.d(t,"a",function(){return i});r.d(t,"b",function(){return s});var i=function e(t){var r=t.error,a=t.description,i=t.subtype,s=t.teamId;n({error:r,teamId:s,description:a,subtype:i+"_payment_api_error",version:"checkout_v2"})};var s=function e(t){var r=t.error,a=t.description,i=t.subtype,s=t.teamId;n({error:r,teamId:s,description:a,subtype:i+"_payment_critical_user_facing_error",version:"checkout_v2"})}},,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(10);var n=r(226);var i=Object(a["q"])();function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments[1];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.displayTrailingZeroes,s=void 0!==a&&a,o=r.currencyDisplay,l=void 0===o?"symbol":o;if(!t)return null;var c={coerce:true,style:"currency",currency:t,currencyDisplay:l};e%100!==0||s||(c.minimumFractionDigits=0);return Object(n["b"])(e,i,c)}var o={};Object.defineProperty(o,"locale",{get:function e(){return i},set:function e(t){i=t}});t["a"]=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"test",function(){return C});r.d(t,"updateTyping",function(){return S});r.d(t,"clearTyping",function(){return w});r.d(t,"clearTypingCleanupInterval",function(){return I});r.d(t,"bulkClearTyping",function(){return T});r.d(t,"getAllTyping",function(){return M});r.d(t,"getTypingByKey",function(){return x});r.d(t,"getNumberOfRecords",function(){return D});r.d(t,"getTyperIdsInChannel",function(){return F});r.d(t,"removeOldTypingRecords",function(){return L});r.d(t,"memberStartedTyping",function(){return B});r.d(t,"currentUserStartedTyping",function(){return U});r.d(t,"memberEndedTyping",function(){return q});r.d(t,"currentUserEndedTyping",function(){return G});r.d(t,"checkTypingMap",function(){return H});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(37);var l=r.n(o);var c=r(0);var u=r(2);var d=r.n(u);var p=r(18);var v=r(36);var m=r(14);var h=r(15);var f=r(269);var b=r(4);var g=r(52);var _=r(897);var y;var O=g["isConnected"];var k=f["send"];var E=_["c"];var j=_["b"];var C={};Object.defineProperty(C,"isConnected",{get:function e(){return O},set:function e(t){O=t}});Object.defineProperty(C,"send",{get:function e(){return k},set:function e(t){k=t}});Object.defineProperty(C,"legacyMemberTypingStarted",{get:function e(){return E},set:function e(t){E=t}});Object.defineProperty(C,"legacyMemberTypingEnded",{get:function e(){return j},set:function e(t){j=t}});var S=Object(p["b"])("Update typing timestamp for a given key");S.propTypes={key:c["b"].string.isRequired,started:c["b"].number.isRequired,model_ob_id:c["b"].string.isRequired,member_id:c["b"].string.isRequired,member_is_self:c["b"].bool};var w=Object(p["b"])("Remove typing activity for a given key");w.propTypes={key:c["b"].string.isRequired};var I=Object(p["b"])("Stop the typing cleanup interval because there are no users typing");I.propTypes=null;var T=Object(p["b"])("Remove typing activity for multiple keys");T.propTypes=c["b"].arrayOf(c["b"].string);var A=5e3;var N=6e3;var P={};var R=Object(v["b"])((y={},n()(y,S,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=t.key,a=l()(t,["key"]);if(!r)return e;if(e[r])return s()({},e,n()({},r,s()({},e[r],{started:a.started})));return s()({},e,n()({},r,s()({},a)))}),n()(y,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.key;if(!r||!e[r])return e;return d.a.omit(e,r)}),n()(y,T,function(e,t){if(!t||!t.length||!d.a.isArray(t))return e;var r=d.a.omit(e,t);if(Object.keys(r).length===Object.keys(e).length)return e;return r}),y),P,{persistenceEnabled:false});R.propTypes=c["b"].objectOf(c["b"].shape({started:c["b"].number,model_ob_id:c["b"].string,member_id:c["b"].string,member_is_self:c["b"].bool}));t["default"]=R;var M=Object(m["b"])(function(e){return e&&e.typing});var x=Object(m["b"])(function(e,t){return e&&e.typing&&e.typing[t]});var D=Object(m["b"])(function(e){return e&&e.typing&&Object.keys(e.typing).length});var F=Object(m["b"])(function(e,t){var r=d.a.filter(e&&e.typing,function(e){return e.model_ob_id===t&&!e.member_is_self});return d.a.map(r,"member_id")});var L=Object(h["b"])("remove old typing records",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.now;var n=M(t());var i=d.a.map(n,function(e,t){var r=e.member_is_self?A:N;var n=a-e.started;if(n>=r)return t;return null});i=d.a.compact(i);i.length&&e(T(i))});L.propTypes={now:c["b"].number.isRequired};var B=Object(h["b"])("member started typing (also dispatched by currentUserStartedTyping)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;var i=t();var s=a+"_"+n;var o=Date.now();var l=!x(i,s);e(S({key:s,started:o,model_ob_id:a,member_id:n,member_is_self:Object(b["getCurrentUserId"])(i)===n}));l&&E(a,n)});B.propTypes={channelId:c["b"].string.isRequired,memberId:c["b"].string.isRequired};var U=Object(h["b"])("logged in user has started typing",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=t();if(!O(n))return;if(!a)return;var i=Object(b["getCurrentUserId"])(n);var s=a+"_"+i;if(x(n,s))return;var o={type:"typing",channel:a};e(k(o));e(B({channelId:a,memberId:i}))});U.propTypes={channelId:c["b"].string.isRequired};var q=Object(h["b"])("member stopped typing (also dispatched by currentUserEndedTyping)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;var i=a+"_"+n;e(w({key:i}));j(a,n)});q.propTypes={channelId:c["b"].string.isRequired,memberId:c["b"].string.isRequired};var G=Object(h["b"])("logged in user has stopped typing",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;if(!a)return;var n=t();var i=Object(b["getCurrentUserId"])(n);e(q({channelId:a,memberId:i}))});G.propTypes={channelId:c["b"].string.isRequired};var H=Object(h["b"])("Periodically update the typing map to look for typing records that have expired, and update legacy of the changes",function(e,t){var r=Date.now();var a=0;var n=M(t());e(L({now:r}));var i=M(t());var s=d.a.difference(Object.keys(n),Object.keys(i));s.forEach(function(e){var t=n[e];j(t.model_ob_id,t.member_id)});a=D(t());a<1&&e(I())})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"d",function(){return f});r.d(t,"b",function(){return b});r.d(t,"h",function(){return g});r.d(t,"g",function(){return _});r.d(t,"a",function(){return y});r.d(t,"e",function(){return O});r.d(t,"c",function(){return k});r.d(t,"f",function(){return j});var a=r(2);var n=r.n(a);var i=r(0);var s=r(29);var o=r(25);var l=r(23);var c=r(33);var u=r(12);var d=r(367);var p=r(212);var v=r(313);var m="checkout_v2";var h=function e(t,r){var a=c["c"].COMPANY_NAME,n=c["c"].STREET,i=c["c"].SUITE,s=c["c"].CITY,o=c["c"].REGION,l=c["c"].POSTAL_CODE,u=c["c"].COUNTRY,d=c["c"].IS_BUSINESS_PURCHASE,p=c["c"].IS_VAT_AVAILABLE,m=c["c"].VAT_ID,h=c["c"].ABN_ID,f=c["c"].QST_ID;var b=t.country||u;var g=t.state||o;var _=false;var y=false;var O=m;if(b)if(Object(v["n"])(b,r)){_=null===t.is_business?d:t.is_business;y=null===t.waiting_for_vat?p:!t.waiting_for_vat;O=t.vat_id||m}else Object(v["l"])(b)&&(_=t.is_business);else{_=d;y=p}var k=f;Object(v["m"])(b,g)&&(k=t.tax_id||f);return{companyName:t.company_name||a,street:t.street1||n,suite:t.street2||i,city:t.city||s,postalCode:t.zip||l,region:g,country:b,isBusinessPurchase:_,isVatIdAvailable:y,vatId:O,abnId:t.abn_id||h,qstId:k}};var f=Object(o["a"])("Fetch States and Countries",function(e,t){var r=Object(p["t"])(t());return e(Object(s["a"])({reason:"checkout-flow-fetch-states-countries-data",method:"payments.billing.addresses.locations",args:{checkout_step:r}})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully fetched states and countries");if(Object(a["includes"])(Object(a["keys"])(e.vat_countries),c["e"].UNITED_KINGDOM)){e.vat_countries[c["e"].UNITED_KINGDOM_UK]=e.vat_countries[c["e"].UNITED_KINGDOM];delete e.vat_countries[c["e"].UNITED_KINGDOM]}return{countries:e.countries||[],usStates:e.us_states||{},canadaStates:e.canada_states||{},vatCountries:e.vat_countries||{},abnCountries:e.abn_countries||{},taxableZipcodes:e.taxable_zipcodes||[]}}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching states and countries",subtype:m,teamId:Object(l["b"])(t())});throw e})});var b=Object(o["a"])("Fetch Company Address",function(e,t){var r=t();var a=Object(p["B"])(r);return e(Object(s["a"])({reason:"checkout-flow-fetch-team-company-address-data",method:"payments.billing.addresses.get"})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully fetched company address");return h(e,a)}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching company address",subtype:m,teamId:Object(l["b"])(t())});throw e})});var g=Object(o["a"])("Validate and Persist Company Address",function(e,t,r){var a=Object(p["t"])(t());var n=r.qstId;var i={abn_id:r.abnId,city:r.city,company_name:r.companyName,country:r.country,is_business:r.isBusinessPurchase,state:r.region,street1:r.street,street2:r.suite,vat_id:r.vatId,waiting_for_vat:!r.isVatIdAvailable,zip:r.postalCode,is_checkout_v2:true,checkout_step:a,tax_id:n};return e(Object(s["a"])({reason:"checkout-flow-validate-persist-company-address",method:"payments.billing.addresses.validateAndSet",args:i})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully validated and persisted company address");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while validating and persisting company address",subtype:m,teamId:Object(l["b"])(t())});throw e})});g.propTypes=i["b"].object;var _=Object(o["a"])("Submit information from the payment form to the server to complete the purchase of a paid Slack plan",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.tokenId,n=r.productId,i=r.isNewCreditCard;var o=Object(p["t"])(t());return e(Object(s["a"])({reason:"checkout-flow-process-upgrade-charge",method:"payments.checkout.charge",args:{stripe_token:a,product_id:n,is_new_card:i,checkout_step:o}})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully processed upgrade charge successfully for product_id "+n+", is_new_card "+i);return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while processing upgrade charge for product_id "+n+", is_new_card "+i,subtype:m,teamId:Object(l["b"])(t())});throw e})});_.propTypes={tokenId:i["b"].string,productId:i["b"].string,isNewCreditCard:i["b"].bool};var y=Object(o["a"])("Submit information from the checkout invoice form to the server to complete the purchase of a paid Slack plan via invoice",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.numUsers,n=r.productId,i=r.billingContacts,o=r.purchaseOrderNumber;var c=Object(p["t"])(t());return e(Object(s["a"])({reason:"checkout-flow-create-invoice",method:"payments.checkout.createInvoice",args:{num_users:a,product_id:n,billing_contacts:i,po_number:o,checkout_step:c,is_checkout_v2:true}})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully created invoice for product_id "+n+", num_users "+a);return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while creating invoice for product_id "+n+", num_users "+a,subtype:m,teamId:Object(l["b"])(t())});throw e})});y.propTypes={numUsers:i["b"].string,productId:i["b"].string,billingContacts:i["b"].string,purchaseOrderNumber:i["b"].string};var O=Object(o["a"])("Fetch Stripe Customer",function(e,t,r){var a=Object(p["t"])(t());return e(Object(s["a"])({reason:"checkout-flow-fetch-stripe-customer-data",method:"payments.stripe.getCustomer",args:{country:r,checkout_step:a}})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully fetched Stripe customer");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching Stripe customer",subtype:m,teamId:Object(l["b"])(t())});throw e})});O.propTypes=i["b"].string;var k=Object(o["a"])("Fetch Self User Data",function(e,t){var r=Object(p["t"])(t());return e(Object(s["a"])({reason:"checkout-flow-fetch-current-user-data",method:"users.info",args:{self:true,checkout_step:r}})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully fetched self user data");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching self user data",subtype:m,teamId:Object(l["b"])(t())});throw e})});var E=Object(o["a"])("Checks If User Can Access Checkout",function(e,t){var r=Object(p["t"])(t());return e(Object(s["a"])({reason:"checkout-flow-check-user-can-access-checkout-v2",method:"payments.checkout.canShowCheckoutV2",args:{checkout_step:r}})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully checked if user can access checkout");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while checking if user can access checkout",subtype:m,teamId:Object(l["b"])(t())});throw e})});var j=Object(o["a"])("Notify an api endpoint about the steps of checkout",function(e,t,r){var a=r.activeCheckoutStep;return e(Object(s["a"])({reason:"checkout-flow-log-checkout-impression",method:"payments.checkout.logImpression",args:{checkout_step:a}})).then(function(e){Object(u["a"])({getState:t}).info(m,"Successfully logged backend step impression");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while logging backend step impression",subtype:m,teamId:Object(l["b"])(t())});throw e})});j.propTypes={activeCheckoutStep:i["b"].string};var C={sanitizeCompanyAddressAPIData:h}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"b",function(){return n});r.d(t,"d",function(){return i});r.d(t,"e",function(){return s});r.d(t,"a",function(){return o});var a=3;var n={profile:cdn_url+"/aba96/img/tractor/steps/step_01.png",workspace:cdn_url+"/aba96/img/tractor/steps/step_02.png",invites:cdn_url+"/aba96/img/tractor/steps/step_03.png",completion:cdn_url+"/aba96/img/tractor/steps/step_04.png"};var i={profile:0,workspace:1,invites:2,completion:3};var s={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"};var o={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"}},,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(1);var l=r.n(o);var c=r(0);var u=r(18);var d=r(36);var p=r(14);var v=r(15);var m=r(1031);var h=r(2);var f=r(4324);var b=r(25);var g=r(29);var _=Object(b["a"])("Fetch the active message pane banner for this team/user, if any",function(e,t,r){return e(Object(g["a"])({method:"promo.banner",reason:"fetch-active-message-pane-banner",args:r})).then(function(e){return e||{}})});_.propTypes={qa_banner_type:c["b"].string,qa_banner_data:c["b"].string};var y=r(48);var O=r(1485);var k=r(31);var E=r(35);var j=r(122);var C=r(42);var S=r(4);var w=r(4325);r.d(t,"setMessagePaneBanner",function(){return T});r.d(t,"closeMessagePaneBanner",function(){return A});r.d(t,"showPricingPlans",function(){return N});r.d(t,"getMessagePaneBannerName",function(){return x});r.d(t,"getMessagePaneBannerData",function(){return D});r.d(t,"throttledLoadBanner",function(){return B});r.d(t,"closeBanner",function(){return U});var I;var T=Object(u["b"])("Set message pane banner");T.propTypes={name:c["b"].string,data:c["b"].object};var A=Object(u["b"])("Close message pane banner");A.propTypes=null;var N=Object(v["b"])("Shows the pricing plans information",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.pricingPlansPageUrl,n=r.source;var i=t();var s=Object(E["d"])(i);var o=Object(k["isOnFreePlan"])(s)&&!Object(C["isAppStoreBuild"])()&&!Object(S["teamHasDiscount"])(i)&&("treatment"===Object(j["getGroupForUser"])(i,"lc_bring_plans_page_to_ssb_existing_teams")||"treatment"===Object(j["getGroupForUser"])(i,"lc_bring_plans_page_to_ssb_new_teams"));o?e(Object(y["openModal"])({element:l.a.createElement(O["a"],{source:n})})):Object(k["openAuthenticatedUrlInBrowser"])(s,a)});N.propTypes={pricingPlansPageUrl:c["b"].string.isRequired};var P={name:"",data:{}};var R=Object(d["b"])((I={},n()(I,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name,a=t.data;var n=s()({},e,{name:r,data:a});return n}),n()(I,A,function(){return P}),I),P,{persistenceEnabled:true});R.propTypes={name:c["b"].string,data:c["b"].object};var M=t["default"]=R;var x=Object(p["b"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.name});var D=Object(p["b"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.data});var F=108e5;var L=Object(v["b"])("Load message pane banner info",function(e,t,r){e(_(r)).then(function(t){if(!Object(h["isEmpty"])(t)){t.message_pane&&e(T({name:t.message_pane.name,data:t.message_pane.data||{}}));t.survey&&e(Object(w["a"])({type:t.survey.type}))}})});var B=Object(m["a"])(L,F);L.propTypes={qa_banner_type:c["b"].string,qa_banner_data:c["b"].string};var U=Object(v["b"])("Close the message pane banner",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.bannerPrefs,n=r.alwaysHideBanner;e(Object(f["a"])({prefsKey:"growth_all_banners_prefs",prefsData:a,alwaysHideBanner:n}));e(A())});U.propTypes={bannerPrefs:c["b"].object,alwaysHideBanner:c["b"].bool}},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setFullyBooted",function(){return p});r.d(t,"isFullyBooted",function(){return h});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=r(38);var p=Object(l["b"])("Set the app as fully booted");p.propTypes=o["b"].bool.isRequired;var v={isFullyBooted:false};var m=Object(c["b"])(n()({},p,function(e,t){return s()({},e,{isFullyBooted:t})}),v,{persistenceEnabled:false});m.propTypes={isFullyBooted:o["b"].bool.isRequired};t["default"]=m;var h=Object(u["b"])(function(e){return Object(d["a"])()||e&&e.incrementalBoot&&e.incrementalBoot.isFullyBooted})},,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a={calculator:"calculator",form:"form",review:"review",success:"success"};var n=200;t["b"]=a},,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r(0);var c=r(18);var u=r(36);var d=r(15);var p=r(14);var v=r(77);function m(e){var t=e.file,r=e.title;if(!Object(v["isPendingFile"])(t))return null;var a=new FormData;a.append("file",t,t.name);var n=a.get("file");n.id=t.id;n.title=r;return n}var h=r(391);r.d(t,"removePendingFile",function(){return g});r.d(t,"updateProgress",function(){return y});r.d(t,"clearPendingFiles",function(){return O});r.d(t,"getPendingFilesforInput",function(){return S});r.d(t,"getPendingFileById",function(){return w});r.d(t,"processAndAddPendingFiles",function(){return I});r.d(t,"renamePendingFile",function(){return T});r.d(t,"DIALOG_PENDING_FILES_ID",function(){return A});r.d(t,"processAndAddPendingFilesForDialog",function(){return N});r.d(t,"clearPendingFilesForDialog",function(){return P});r.d(t,"getPendingFilesforDialog",function(){return R});r.d(t,"test",function(){return M});var f;var b=Object(c["b"])("bulk add pending files");b.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,files:l["b"].arrayOf(l["b"].object)};var g=Object(c["b"])("remove pending file");g.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,fileId:l["b"].string};var _=Object(c["b"])("update pending file");_.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,updatedFile:l["b"].object.isRequired};var y=Object(c["b"])("update upload progress of pending file");y.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,fileId:l["b"].string,progress:l["b"].number};var O=Object(c["b"])("clear all pending files for a given input");O.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string};var k={};var E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channelId,a=t.threadTs;return a?r+"-"+a:r};var j=Object(u["b"])((f={},n()(f,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.threadTs,i=t.files;if(!r||!i)return e;var o=E({channelId:r,threadTs:a});var l=e[o]||[];var c=l.concat(i);return s()({},e,n()({},o,c))}),n()(f,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.threadTs,i=t.fileId;if(!r||!i)return e;var l=E({channelId:r,threadTs:a});var c=e[l];if(!Object(o["some"])(c,{id:i}))return e;var u=Object(o["reject"])(c,{id:i});return s()({},e,n()({},l,u))}),n()(f,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.threadTs,i=t.updatedFile;if(!r||!i)return e;var l=E({channelId:r,threadTs:a});var c=e[l];if(!Object(o["some"])(c,{id:i.id}))return e;var u=Object(o["map"])(c,function(e){if(e.id===i.id)return i;return e});return s()({},e,n()({},l,u))}),n()(f,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.threadTs,n=t.fileId;Object(o["noop"])(r,a,n)}),n()(f,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.threadTs;if(!r)return e;var n=E({channelId:r,threadTs:a});var i=e[n];if(!i)return e;var o=s()({},e);delete o[n];return o}),f),k,{persistenceEnabled:false});j.propTypes=l["b"].objectOf(l["b"].arrayOf(l["b"].shape({id:l["b"].string.isRequired,name:l["b"].string.isRequired,size:l["b"].number.isRequired,type:l["b"].string,progress:l["b"].number})));var C=t["default"]=j;var S=Object(p["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.threadTs;var n=E({channelId:r,threadTs:a});return e&&e.pendingFiles&&e.pendingFiles[n]});var w=Object(p["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fileId,a=t.channelId,n=t.threadTs;if(!r||!a)return null;var i=S(e,{channelId:a,threadTs:n});return Object(o["find"])(i,{id:r})});var I=Object(d["b"])("processes and adds pending files to store",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,i=r.files;if(!a||!i||!i.length)return;var s=i.filter(function(e){return Object(v["isPendingFile"])(e)}).map(function(e){e.id=Object(h["a"])();return e});e(b({channelId:a,threadTs:n,files:s}))});I.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,files:l["b"].arrayOf(l["b"].object)};var T=Object(d["b"])("renames a given pending file",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,i=r.fileId,s=r.title;if(!a||!i||!s)return;var l=S(t(),{channelId:a,threadTs:n});var c=Object(o["find"])(l,{id:i});if(!c)return;var u=m({file:c,title:s});e(_({channelId:a,threadTs:n,updatedFile:u}))});T.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,fileId:l["b"].object.isRequired,name:l["b"].string.isRequired};var A="file-upload-dialog";var N=Object(d["b"])("processes and adds pending files to store for upload dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.files;e(I({channelId:A,files:a}))});N.propTypes={files:l["b"].arrayOf(l["b"].object)};var P=Object(d["b"])("clears pending files for upload dialog",function(e){e(O({channelId:A}))});P.propTypes=null;var R=Object(p["b"])(function(e){return S(e,{channelId:A})});var M={};Object.defineProperty(M,"internalAddPendingFiles",{get:function e(){return b},set:function e(t){b=t}});Object.defineProperty(M,"updatePendingFile",{get:function e(){return _},set:function e(t){_=t}})},,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(43);var n=r(2);var i=r(0);var s=r(15);var o=r(4);var l=r(188);var c=r(326);var u=r(12);var d=r(1160);var p=r(268);var v=r(1335);var m=r(3);var h=r.n(m);var f=r(37);var b=r.n(f);var g=r(98);var _=r(19);var y=r(113);var O=r(103);var k=r(52);var E=r(11);var j=r(1297);var C=r(38);var S=r(309);var w=r(67);var I=r(24);var T=r(359);var A=r(71);var N=r(23);var P=r(41);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=e.channel,a=e.userIsAway,n=e.userPresenceLastChanged,i=e.currentUserId,s=e.highlightWords,l=e.messages,c=void 0===l?[]:l;var u=0;var d=0;c.forEach(function(e){if(!e)return;if(Object(P["isMessageUnread"])(e,Object(E["getLastReadTs"])(r),i)){u+=1;Object(P["shouldMessageBadgeChannel"])({state:t,msg:e,channel:r,currentUserId:i,userIsAway:a,userPresenceLastChanged:n,highlightWords:s,isAppMsg:Object(P["isAppMessage"])(t,e),featureWtaNotifications:Object(o["isFeatureEnabled"])(t,"feature_wta_notifications"),teamId:Object(N["b"])(t)})&&(d+=1)}});return{unreadCnt:u,unreadHighlightCnt:d}}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=e.start,a=e.reachedStart,n=e.reachedEnd,i=e.initialCounts,s=e.messages,o=e.channel,l=e.currentUser,c=e.userIsAway,u=e.userPresenceLastChanged,d=e.highlightWords;var p=0;var v=0;var m=true;if(n){var h=R({state:t,channel:o,messages:s,userIsAway:c,userPresenceLastChanged:u,currentUserId:l.id,highlightWords:d});p=h.unreadCnt;v=h.unreadHighlightCnt;if(r<=Object(E["getLastReadTs"])(o))m=false;else{i&&p<i.unreadCnt&&(p=i.unreadCnt);i&&v<i.unreadHighlightCnt&&(v=i.unreadHighlightCnt);m=s.length<42&&!a}}else if(i){p=i.unreadCnt;v=i.unreadHighlightCnt}return{unreadCnt:p,unreadHighlightCnt:v,needFetch:m}}function x(e){if(!e)return false;if(!e.was_archived_this_session){if(Object(E["isArchived"])(e))return false;if(Object(E["isPublicChannel"])(e)&&!Object(E["isMemberOfChannel"])(e))return false}return true}var D="COUNTS";var F=Object(s["b"])("Update unread counts",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var i=t();var s=Object(A["c"])({getState:t});Object(o["isFeatureEnabled"])(i,"feature_tinyspeck")&&s.mark("rmsgs_updateUnreadCounts");var c=false;var d=Object(_["d"])(i,a,c);if(!d)return true;if(!x(d))return true;var p=Object(O["getTimestampsByChannelId"])(i,a,null),v=p.timestamps,m=p.start,h=p.reachedStart,f=p.reachedEnd;var b=Object(l["getInitialUnreadCountsByChannelId"])(i,a);var y=Object(n["map"])(v||[],function(e){return Object(w["a"])(i,d.id,e)});var k=Object(I["b"])(i);var j="away"===Object(S["getPresenceByMemberId"])(i,k.id);var C=k._presence_last_changed||Object(o["getFromBootData"])(i,"start_ms");var N=M({state:i,start:m,reachedStart:h,reachedEnd:f,initialCounts:b,messages:y,channel:d,currentUser:k,userIsAway:j,userPresenceLastChanged:C,highlightWords:Object(T["a"])(i)}),P=N.unreadCnt,R=N.unreadHighlightCnt,F=N.needFetch;if(P!==Object(E["getUnreadCount"])(d)){Object(u["a"])({state:i}).info(D,"Updated unread_cnt for "+d.id+": "+P);e(Object(g["updateOneKeyForChannel"])({id:d.id,unread_cnt:P}))}if(R!==d.unread_highlight_cnt){Object(u["a"])({state:i}).info(D,"Updated unread_highlight_cnt for "+d.id+": "+R);e(Object(g["updateOneKeyForChannel"])({id:d.id,unread_highlight_cnt:R}))}Object(o["isFeatureEnabled"])(i,"feature_tinyspeck")&&s.measureAndClear("rmsgs_updateUnreadCounts","rmsgs_updateUnreadCounts");return!F});F.propTypes={channelId:i["b"].string.isRequired};var L=F;var B=void 0;var U="COUNTS";var q=function e(t,r){if(Object(E["isUnknownOrNonExistent"])(r)){var a=t.name,n=t.has_unreads,i=t.mention_count,s=t.mention_count_display,o=t.unread_count_display,l=t.dm_count,c=t.latest,u=t.user_id,d=b()(t,["name","has_unreads","mention_count","mention_count_display","unread_count_display","dm_count","latest","user_id"]);var p=h()({},d,{isNonExistent:true});p.is_im&&u&&(p.user=u);return p}var v={};var m=Object(E["getLastReadTs"])(t);void 0!==m&&Object(E["getLastReadTs"])(r)!==m&&(v.last_read=m);var f=Object(E["getPriority"])(t);void 0!==f&&Object(E["getPriority"])(r)!==f&&(v.priority=f);var g=Object(E["isStarred"])(t);void 0!==g&&Object(E["isStarred"])(r)!==g&&(v.is_starred=g);var _=Object(E["isOpen"])(t);(Object(E["isIm"])(t)||Object(E["isMpim"])(t))&&void 0!==_&&Object(E["isOpen"])(r)!==_&&(v.is_open=_);return v};var G=Object(s["b"])("Apply counts to channel objects and update stores",function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.counts,c=void 0===s?[]:s;var d,p,v,m,h,f,b;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:if(Object(C["a"])()){i.next=3;break}i.next=3;return Object(a["resolve"])(Object(j["a"])());case 3:d=[];p=r();v={};m=[];h=[];f=Object(o["isFeatureEnabled"])(p,"feature_degraded_send");b=Object(k["isConnected"])(p);Object(u["a"])({state:p}).info(U,"Applying counts to channels");c.forEach(function(e){var t=Object(_["d"])(p,e.id,f);if(!t||Object(E["isNonExistent"])(t)){Object(u["a"])({state:p}).error(U,{id:e.id,has_unreads:e.has_unreads||!!e.dm_count||!!e.unread_count_display,nonExistent:Object(E["isNonExistent"])(t)},"applyCountsToChannels_missing_channel");return}if(f&&Object(E["isUnknown"])(t)){Object(u["a"])({state:p}).warn(U,"Unknown channel "+t.id+" in applyCountsToChannels");h.push(t.id)}if(Object(E["isArchived"])(t))return;if(Object(E["isPublicChannel"])(t)&&!Object(E["isMemberOfChannel"])(t))return;var r=f?q(e,t):{};var a=e.latest;a&&a!==t.latest&&(r.latest=a);var i=Object(O["getTimestampsByChannelId"])(p,t.id),s=i.reachedEnd;var l=e.has_unreads;var c=l?1:0;var g=0;var y=0;var k=false;if(Object(o["isFeatureEnabled"])(p,"feature_vitess_sidebar"))if(Object(E["isIm"])(t)||Object(E["isIm"])(e)||Object(E["isMpim"])(t)||Object(E["isMpim"])(e)){g=e.mention_count||c;Object(o["isFeatureEnabled"])(p,"feature_silence_app_dms")&&(Object(E["isIm"])(t)||Object(E["isIm"])(e))&&(y=e.mention_count)}else{k=true;g=c;y=e.mention_count||0}else if(Object(E["isIm"])(t)||Object(E["isIm"])(e)){g=e.dm_count||c;Object(o["isFeatureEnabled"])(p,"feature_silence_app_dms")&&(y=e.dm_count)}else if(Object(E["isMpim"])(t)||Object(E["isMpim"])(e))g=e.unread_count_display||c;else{k=true;g=c;y=e.mention_count_display||0}if(!g&&y){Object(u["a"])({state:p}).error(U,"Ignoring positive mention_count_display because has_unreads == false for "+t.id,{subtype:"ignoring_positive_mention_count_display"});y=0}v[t.id]={unreadCnt:g,unreadHighlightCnt:y};if(s&&b)m.push(t.id);else{g!==Object(E["getUnreadCount"])(t)&&(r.unread_cnt=g);k&&y!==Object(E["getUnreadHighlightCount"])(t)&&(r.unread_highlight_cnt=y);Object(o["isFeatureEnabled"])(p,"feature_silence_app_dms")&&y!==Object(E["getUnreadHighlightCount"])(t)&&(r.unread_highlight_cnt=y)}if(!Object(n["isEmpty"])(r)){r.id=t.id;d.push(r)}});if(!h.length){i.next=15;break}i.next=15;return Object(a["resolve"])(t(Object(y["d"])({ids:h,reason:"apply-counts-to-channels/ensure-channels"})));case 15:Object(n["isEmpty"])(d)||t(Object(g["bulkUpdateChannels"])({channels:d}));t(Object(l["setInitialUnreadCounts"])(v));Object(o["isFeatureEnabled"])(p,"feature_incremental_unread_counts")&&t(Object(l["initializeUnreadCountsFromChannels"])(Object(n["map"])(v,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.unreadCnt,r=e.unreadHighlightCnt;var a=arguments[1];return{id:a,unread_cnt:t,unread_highlight_cnt:r}})));m.forEach(function(e){t(L({channelId:e}));var a=Object(_["d"])(r(),e,false);if(a){var n={unreadCnt:Object(E["getUnreadCount"])(a),unreadHighlightCnt:Object(E["getUnreadHighlightCount"])(a)};Object(u["a"])({state:p}).info(U,"Recounted "+e+"; initial: "+JSON.stringify(v[e])+"; after: "+JSON.stringify(n))}});case 19:case"end":return i.stop()}},e,B)}));return function(t,r,a){return e.apply(this,arguments)}}());G.propTypes={counts:i["b"].array.isRequired};var H={makeBasePayload:q};var W=G;var V=void 0;var K="COUNTS";var z=Object(s["b"])("Apply counts to channels and threads",function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.channels,m=i.groups,h=i.ims,f=i.mpims,b=i.threads;var g,_;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:g=r();if(!(!Object(o["shouldUseReactMessages"])(g)||!Object(o["isClientApp"])(g))){i.next=3;break}return i.abrupt("return");case 3:t(Object(l["setInitialUnreadCounts"])({}));_=Object(n["compact"])(Object(n["concat"])(s,m,h,f));i.next=7;return Object(a["resolve"])(t(W({counts:_})));case 7:if(b){Object(d["c"])(b.has_unreads,b.mention_count,b.mention_count_by_channel);if(Object(o["isFeatureEnabled"])(g,"feature_react_threads")){Object(u["a"])({state:g}).info(K,"Threads has_unreads:"+b.has_unreads+" mention_count:"+b.mention_count);Object(o["isFeatureEnabled"])(g,"feature_incremental_unread_counts")?t(Object(l["threadsUnreadCountChanged"])({threadsHasUnreads:b.has_unreads,threadsMentionCountByChannel:Object(n["isArray"])(b.mention_count_by_channel)?{}:b.mention_count_by_channel})):t(Object(c["updateUnreadThreads"])({hasUnreads:b.has_unreads,mentionCountByChannel:Object(n["isArray"])(b.mention_count_by_channel)?{}:b.mention_count_by_channel}))}}if(!Object(o["isFeatureEnabled"])(g,"feature_incremental_unread_counts")){Object(p["c"])();Object(v["a"])();Object(p["l"])()}Object(u["a"])({state:g}).info(K,"Completed counts processing");case 10:case"end":return i.stop()}},e,V)}));return function(t,r,a){return e.apply(this,arguments)}}());z.propTypes={channels:i["b"].array,groups:i["b"].array,ims:i["b"].array,mpims:i["b"].array,threads:i["b"].object};var Q=z;r.d(t,"a",function(){return Q});r.d(t,"b",function(){return L})},,,function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"e",function(){return o});r.d(t,"c",function(){return l});r.d(t,"b",function(){return c});r.d(t,"d",function(){return u});var a=r(0);var n=r(25);var i=r(29);var s=Object(n["a"])("set password for primary owner",function(e,t,r){var a=r.password;return e(Object(i["a"])({method:"users.changePassword",args:{password:a}}))});s.propTypes={password:a["b"].string};var o=Object(n["a"])("Check to see if Primary Owner's email domain is whitelist-able",function(e,t,r){var a=r.domain;return e(Object(i["a"])({method:"signup.checkSignupDomains",args:{signup_domains:a}}))});o.propTypes={domain:a["b"].string};var l=Object(n["a"])("set workspace name",function(e,t,r){var a=r.workspaceName;return e(Object(i["a"])({method:"team.changeInfo",args:{name:a}}))});l.propTypes={workspaceName:a["b"].string};var c=Object(n["a"])("set workspace domain",function(e,t,r){var a=r.workspaceDomain;return e(Object(i["a"])({method:"team.changeInfo",args:{url:a}}))});c.propTypes={workspaceDomain:a["b"].string};var u=Object(n["a"])("Checks the complexity of a password",function(e,t,r){var a=r.password;return e(Object(i["a"])({method:"signup.checkPasswordComplexity",args:{password:a}}))});u.propTypes={password:a["b"].string}},function(e,t,r){"use strict";r.d(t,"c",function(){return m});r.d(t,"b",function(){return h});r.d(t,"a",function(){return f});r.d(t,"f",function(){return b});r.d(t,"g",function(){return g});r.d(t,"i",function(){return _});r.d(t,"j",function(){return y});r.d(t,"h",function(){return O});r.d(t,"d",function(){return j});r.d(t,"e",function(){return S});var a=r(3);var n=r.n(a);var i=r(45);var s=r(38);var o=r(71);var l=r(27);var c=r(688);var u=r(65);var d=r(228);var p=r(21);var v=r(10);var m=0;var h=1;var f=2;function b(e,t,r,a,u,d,b,g){var _=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!S(u,d,p["l"].PRQ_CHANNEL_SWITCH_USABLE))return;var y=void 0;var O=void 0;switch(a){case m:default:y=p["v"].COMPLETED;O=false;break;case h:y=p["v"].ABANDONED;O=true;break;case f:y=p["v"].COMPLETED;O=true;break}var E=Object(c["b"])(1e3*e*1e3,0);var j=n()({elapsed_time:E,target_channel_id:r,required_sync:O,end_state:y},k(b,t,g,_));var C={userId:g,teamId:u,enterpriseId:d,locale:Object(v["q"])()};Object(i["a"])(C).track(p["l"].PRQ_CHANNEL_SWITCH_USABLE,j);var w=Object(l["d"])(u);var I=w&&w.getState();var T=Object(s["a"])()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(o["c"])({state:I}).store(T,Math.round(e))}function g(e,t,r,a,u,d,b,g){var _=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!S(u,d,p["l"].PRQ_CHANNEL_SWITCH_VISIBLE))return;var y=void 0;var O=void 0;switch(a){case m:default:y=p["v"].COMPLETED;O=false;break;case h:y=p["v"].ABANDONED;O=true;break;case f:y=p["v"].COMPLETED;O=false;break}var E=Object(c["b"])(1e3*e*1e3,0);var j=n()({elapsed_time:E,target_channel_id:r,required_sync:O,end_state:y},k(b,t,g,_));var C={userId:g,teamId:u,enterpriseId:d,locale:Object(v["q"])()};Object(i["a"])(C).track(p["l"].PRQ_CHANNEL_SWITCH_VISIBLE,j);var w=Object(l["d"])(u);var I=w&&w.getState();var T=Object(s["a"])()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(o["c"])({state:I}).store(T,Math.round(e))}function _(e,t,r,a,s,o,l,u){var d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!S(a,s,p["l"].PRQ_TIME_TO_USABLE))return;var m=Object(c["b"])(1e3*e*1e3,0);var h=E(d);var f=n()({elapsed_time:m+h,desktop_elapsed_time:h,required_sync:r,end_state:u,start_type:p["p"].COLD,target_type:p["q"].CHANNEL},k(o,t,l,d));var b={userId:l,teamId:a,enterpriseId:s,locale:Object(v["q"])()};Object(i["a"])(b).track(p["l"].PRQ_TIME_TO_USABLE,f)}function y(e,t,r,a,s,o,l){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!S(a,s,p["l"].PRQ_TIME_TO_VISIBLE))return;var d=Object(c["b"])(1e3*e*1e3,0);var m=E(u);var h=n()({elapsed_time:d+m,desktop_elapsed_time:m,required_sync:r,end_state:p["v"].COMPLETED,start_type:p["p"].COLD,target_type:p["q"].CHANNEL},k(o,t,l,u));var f={userId:l,teamId:a,enterpriseId:s,locale:Object(v["q"])()};Object(i["a"])(f).track(p["l"].PRQ_TIME_TO_VISIBLE,h)}function O(e,t,r,a,s,o,l){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!S(a,s,p["l"].PRQ_SESSION_FRAME_STATS))return;var u=n()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:r},k(o,void 0,l,c));var d={userId:l,teamId:a,enterpriseId:s,locale:Object(v["q"])()};Object(i["a"])(d).track(p["l"].PRQ_SESSION_FRAME_STATS,u)}function k(e,t,r,a){var i="string"===typeof r&&r.startsWith("W");var o="undefined"!==typeof a&&null!==a&&a.stats&&a.stats.Id&&a.stats.Id.sessionId;var l={device:{id:"",make:navigator.platform,model:navigator.platform,os:o?"electron":"webapp",os_version:o?a.stats.Id.sessionId:""}};var c=void 0;if(t){l.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t};switch(t.toUpperCase()){case"APP_ICON":c=p["r"].APP_ICON;break;case"MSG_PANE":c=p["r"].MSG_PANE;break;case"SIDE_BAR":c=p["r"].SIDE_BAR;break;case"QUICK_SWITCH":c=p["r"].QUICK_SWITCH;break;default:c=p["r"].UNKNOWN;break}}var u=n()({contexts:l,session_id:e,time:Date.now(),app_id:Object(s["a"])()?"web_sonic":"web",is_tablet:false,user_id:i?void 0:r,external_id:i?r:void 0},C(a));t&&(u.trigger=c);return u}function E(e){if("undefined"!==typeof e&&null!==e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0&&t.isInitialTeamBooted){var r=t["BOOT"];var a=t["PRELOAD_READY"];var n=e.stats.performance.calcHrTime(r,a);return n>0?1e6*n:0}}return 0}function j(e){if("undefined"!==typeof e&&null!==e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0){var r=t.PRELOAD_STARTED;var a=t.PRELOAD_READY;var n=e.stats.performance.calcHrTime(r,a);return Math.floor(n)}}return 0}function C(e){if("undefined"!==typeof e&&null!==e&&e.app&&e.app.version){var t=e.app.version();var r=t.prerelease?" ("+t.prerelease+")":"";var a="string"===typeof t.prerelease?t.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&t.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production";var n=void 0;switch(a){case"alpha":case"electron3":n=p["b"].ALPHA;break;case"beta":n=p["b"].BETA;break;default:n=p["b"].PRODUCTION;break}return{app_version:t.major+"."+t.minor+"."+t.patch+r,release_version:t.major+"."+t.minor+"."+t.patch,build_type:n}}return{app_version:"",release_version:"",build_type:p["b"].PRODUCTION}}function S(e,t,r){if(["E12KS1G65"].includes(t)||["T024BE7LD","T5J4Q04QG"].includes(e))return true;if(["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)&&Object(d["a"])(10))return true;if(["E27SFGS2W"].includes(t)&&[p["l"].PRQ_TIME_TO_USABLE,p["l"].PRQ_TIME_TO_VISIBLE].includes(r))return true;if([p["l"].PRQ_TIME_TO_USABLE,p["l"].PRQ_TIME_TO_VISIBLE].includes(r))return true;if(r===p["l"].PRQ_SESSION_FRAME_STATS)return Object(d["a"])(10);return Object(d["a"])(10)}Object(u["exportToGlobalDebugger"])("prq",{getDesktopElapsedTime:E,getDesktopPreloadTime:j,getElectronInfo:C})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"addUserGroupIds",function(){return C});r.d(t,"saveScrollmark",function(){return S});r.d(t,"setCursorMark",function(){return w});r.d(t,"setSearchQuery",function(){return I});r.d(t,"resetUserGroupsFlexpane",function(){return T});r.d(t,"getFlexpaneUserGroups",function(){return P});r.d(t,"getScrollmark",function(){return R});r.d(t,"getCursorMark",function(){return M});r.d(t,"getSearchQuery",function(){return x});r.d(t,"listAndUpsertUserGroups",function(){return D});r.d(t,"searchLocalUserGroups",function(){return F});r.d(t,"fetchUserGroupsPost",function(){return L});r.d(t,"fetchDeactivatedUserGroupsPost",function(){return B});var a=r(37);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(2);var u=r.n(c);var d=r(0);var p=r(18);var v=r(36);var m=r(14);var h=r(15);var f=r(290);var b=r(27);var g=r(192);var _=r(23);var y=r(231);var O=r(271);var k;var E="user_groups";var j=Object(c["memoize"])(function(){return new g["b"]({fetch:function e(t){Object(b["a"])(t,T());return Object(b["a"])(t,L())},isEnabled:function e(){return true},metricsName:"user_groups"})});var C=Object(p["b"])("Add user group IDs to the flexpane");C.propTypes=d["b"].arrayOf(d["b"].string).isRequired;var S=Object(p["b"])("Set the user groups flexpane scroll offset");S.propTypes=d["b"].object;var w=Object(p["b"])("Set the cursor mark");w.propTypes=d["b"].string;var I=Object(p["b"])("Set the search query");I.propTypes=d["b"].string;var T=Object(p["b"])("Resets user groups flexpane list to initial state");T.propTypes=null;var A={searchQuery:"",cursorMark:null,scrollmark:null,userGroupIds:[]};var N=Object(v["b"])((k={},s()(k,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;return l()({},e,{userGroupIds:Object(c["union"])(e.userGroupIds,t)})}),s()(k,S,function(e,t){return l()({},e,{scrollmark:t})}),s()(k,w,function(e,t){return l()({},e,{cursorMark:t})}),s()(k,I,function(e,t){if(t===e.searchQuery)return e;var r=A.userGroupIds,a=A.scrollmark,n=A.cursorMark;return l()({},e,{userGroupIds:r,scrollmark:a,cursorMark:n,searchQuery:t})}),s()(k,T,function(){return A}),k),A,{persistenceEnabled:true});N.propTypes={searchQuery:d["b"].string,cursorMark:d["b"].string,scrollmark:d["b"].shape({key:d["b"].string,offset:d["b"].number}),userGroupIds:d["b"].arrayOf(d["b"].string)};t["default"]=N;var P=Object(m["b"])(function(e){var t=Object(_["b"])(e);j().maybeRefetch(t,E);return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.userGroupIds});var R=Object(m["b"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.scrollmark});var M=Object(m["b"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.cursorMark});var x=Object(m["b"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.searchQuery});var D=Object(h["b"])("Fetch and upsert user groups",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.searchQuery,i=void 0===a?"":a,s=r.cursorMark,o=r.includeDeleted,c=n()(r,["searchQuery","cursorMark","includeDeleted"]);var u=l()({query:i,cursor_mark:s,include_deleted:o,reason:"user-groups-flexpane-store/listAndUpsertUserGroups"},c);return e(Object(O["g"])(u)).then(function(r){var a=r.items,n=void 0===a?[]:a,i=r.next_cursor_mark;var s=n.map(function(e){return e.id});e(C(s));e(Object(y["p"])({userGroups:n}));e(w(i));var o=Object(_["b"])(t());j().markObjectsAsFresh(o,[E]);return r})});D.propTypes={searchQuery:d["b"].string,cursorMark:d["b"].string,count:d["b"].number,reason:d["b"].string};var F=Object(h["b"])("Fetch local user groups",function(e,t){var r=t();var a=x(r);var n=Object(f["f"])(l()({},r),{query:a,options:{allowEmptyQuery:true,entities:{userGroups:true}}}).map(function(e){return e.id});e(C(n))});F.propTypes=null;var L=Object(h["b"])("Fetch user groups",function(e,t,r){var a=t();var n=M(a);var i=x(a);return e(D(l()({count:10},r,{cursorMark:n,searchQuery:i,reason:"fetchUserGroupsPost"})))});L.propTypes={searchQuery:d["b"].string,count:d["b"].number};var B=Object(h["b"])("Fetch deactivated user groups",function(e,t,r){var a=t();var n=M(a);var i=x(a);return e(D(l()({count:10,includeDeleted:2},r,{cursorMark:n,searchQuery:i,reason:"fetchUserGroupsPost"})))});B.propTypes={searchQuery:d["b"].string,count:d["b"].number}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(2);var s=r(10);var o={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"};var l={EMAIL:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,DOMAIN:/^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i};var c=new s["b"]("email_utility");function u(e,t){var r=d(e);return p(r,t)}function d(e){return e.replace(/\s|\n/g,"").replace(/,$/g,"").split(",")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r=0;var a=e.length;var n=void 0;var i=void 0;var s=void 0;if(!Array.isArray(e))return{isValid:false,emailArray:e,errorKey:o.INVALID,errorMessage:v(o.INVALID)};if(t&&a>t){i=o.TOO_MANY;s=t>1?m(t):v(o.INVALID);return{isValid:false,emailArray:e,errorKey:i,errorMessage:s}}for(r;r<a;r+=1){n=e[r];r||""!==n?l.EMAIL.test(n)||(i=o.INVALID):i=o.EMPTY;if(i)return{isValid:false,emailArray:e,errorKey:i,errorMessage:v(i)}}return{isValid:true,emailArray:e,errorKey:"",errorMessage:""}}function v(e){var t=void 0;switch(e){case o.EMPTY:t=c.t("Please fill in your email.");break;case o.INVALID:t=c.t("Sorry, but that email is invalid.");break;case o.INVALID_DOMAIN:t=c.t("Sorry, but that isn\u2019t a valid email domain.");break;default:break}return t}function m(e){return c.t("Please make your list shorter \u2014 we can check up to {max_addresses} addresses at a time.",{max_addresses:e})}var h=r(256);r.d(t,"a",function(){return b});r.d(t,"d",function(){return g});r.d(t,"e",function(){return _});r.d(t,"b",function(){return k});r.d(t,"c",function(){return E});var f=new s["b"]("checkout_v2");var b={MINIMUM_BAU_COUNT_ALLOWED:3};function g(e,t,r){var a=S(t,r);if(Object(i["isEmpty"])(a))return{};var n={};var s=e.numberOfUsers,o=e.additionalBillingContacts,l=e.purchaseOrderNumber;var c=y(l,a);c&&(n.purchaseOrderNumber=c);var u=O(s,t,r,a);u&&(n.numberOfUsers=u);var d=j(o,a);d&&(n.additionalBillingContacts=d);return n}function _(e,t,r,a){var n=null;var s=S(r,a);if(Object(i["isEmpty"])(s))return n;var o=e.numberOfUsers,l=e.additionalBillingContacts,c=e.purchaseOrderNumber;switch(t){case h["a"].PURCHASE_ORDER_NUMBER:n=y(c,s);break;case h["a"].NUMBER_OF_USERS:n=O(o,r,a,s);break;case h["a"].ADDITIONAL_BILLING_CONTACTS:n=j(l,s);break;default:}return n}function y(e,t){var r=null;!e||!Object(i["isObject"])(e)&&h["b"].NUMERIC_WITH_MIN_MAX_LENGTH_REGEX.test(e)||(r=C(h["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,t));return r}function O(e,t,r,a){var n=null;e?h["b"].NUMERIC_REGEX.test(e)?e<t?n=C(h["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,a):e>r&&(n=C(h["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,a)):n=C(h["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,a):n=C(h["c"].NUMBER_OF_USERS_IS_REQUIRED,a);return n}function k(e){var t=e.contacts,r=e.delimiter,a=void 0===r?",":r;if(!t)return"";return Object(i["trim"])(t).replace(/(?:,|\s|\n)+/g,a)}function E(e){var t=d(e);var r=t.map(function(e){return{email:e}});return JSON.stringify(r)}function j(e,t){var r=null;if(!e)return r;var a=k({contacts:e,delimiter:","});var n=u(a);var i=n.errorKey;if(i){r=C(i,t);r.errorText||(r.errorText=n.errorMessage)}return r}function C(e,t){return t[e]||{}}function S(e,t){var r;return r={},n()(r,h["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,{errorText:f.t("Please enter a valid number between 1 and 20 digits long.")}),n()(r,h["c"].NUMBER_OF_USERS_IS_REQUIRED,{errorText:f.t("You\u2019ll need to include the numbers of members.")}),n()(r,h["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,{errorText:f.t("Please enter a valid number.")}),n()(r,h["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,{errorText:f.t("To pay by invoice, you\u2019ll need at least {minInvoiceSeats} members.",{minInvoiceSeats:e})}),n()(r,h["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,{errorText:f.t("You can only pay by invoice for {maxInvoiceSeats} or fewer members.",{maxInvoiceSeats:t})}),r}var w={validatePurchaseOrderNumber:y,validateNumberOfUsers:O,validateAdditionalBillingContacts:j,getInvoiceDataErrorMetadata:C}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(15);var n=r(181);var i=r(1531);var s=r(88);var o=r.n(s);var l=function e(){return document.getElementById("search_popover_container")};var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l();o.a.unmountComponentAtNode(t)};var u=r(198);var d=r(273);var p=r(4);var v=r(196);var m=r(116);var h=r(407);var f=Object(a["b"])("Close search UI",function(e,t){if(Object(v["u"])(t())){var r=window.$&&window.$("#search_terms");r&&Object(h["c"])(r);e(Object(m["n"])({wasFocusedViaTabKey:false}))}if(!Object(n["b"])(t())&&!Object(p["isFeatureEnabled"])(t(),"feature_classic_nav")){var a=window.$&&window.$("#search_terms");var s=Object(d["getSearchInputBoxDisplayQuery"])(t());if(a&&s)try{Object(h["j"])(a,s)}catch(e){}c()}Object(u["isSearchAutocompleteOpen"])(t())&&e(Object(u["closeSearchAutocomplete"])());e(Object(i["a"])({visible:false}))});f.propTypes={};var b=t["a"]=f},function(e,t,r){"use strict";r.r(t);r.d(t,"bulkAddStarredItems",function(){return w});r.d(t,"addStarredItem",function(){return I});r.d(t,"removeStarredItem",function(){return T});r.d(t,"updatePageNumber",function(){return A});r.d(t,"setLoadingState",function(){return N});r.d(t,"resetStarredItems",function(){return P});r.d(t,"fetchStarsList",function(){return D});r.d(t,"initialState",function(){return F});r.d(t,"getAllStarredItems",function(){return B});r.d(t,"getCurrentPageNumber",function(){return U});r.d(t,"getTotalPages",function(){return q});r.d(t,"getLoadingState",function(){return G});r.d(t,"getCursorMark",function(){return H});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(0);var u=r(192);var d=r(27);var p=r(123);var v=r(254);var m=r(838);var h=r(18);var f=r(36);var b=r(15);var g=r(14);var _=r(12);var y=r(1528);var O=r(293);var k=r(23);var E=r(4);var j;var C="stars";var S=Object(o["memoize"])(function(){return new u["b"]({fetch:function e(t){Object(d["a"])(t,P());if(Object(E["isFeatureEnabled"])(Object(d["c"])(t),"feature_starred_items_cursor_pagination"))return Object(d["a"])(t,D({exclude:"Ch,Gh,Dh",limit:20}));return Object(d["a"])(t,D({exclude:"Ch,Gh,Dh",count:20,page:1}))},isEnabled:function e(){return true},metricsName:"stars"})});var w=Object(h["b"])("Adds multiple IDs of starred items to array and updates the cursor mark if provided one");w.propTypes=c["b"].object.isRequired;var I=Object(h["b"])("Adds ID of single starred items to array");I.propTypes=c["b"].object.isRequired;var T=Object(h["b"])("Removes ID single starred item from array");T.propTypes=c["b"].object.isRequired;var A=Object(h["b"])("Store current pagination");A.propTypes=c["b"].object.isRequired;var N=Object(h["b"])("Sets if stars are loading");N.propTypes=c["b"].bool.isRequired;var P=Object(h["b"])("Resets stars to initial state");P.propTypes=null;var R={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment",CHANNEL:"channel"};var M=function e(t,r){if(r.type===R.MESSAGE)return{type:r.type,channel:r.channel,ts:r.message.ts};if(r.type===R.FILE)return{type:r.type,id:r.file.id};if(r.type===R.FILE_COMMENT)return{type:r.type,id:r.comment.id,fileId:r.file.id};return{}};var x=function e(t,r){var a=t.ts||t.message&&t.message.ts;return Object(o["filter"])(r,function(e){if(t.type===R.MESSAGE&&e.channel===t.channel&&e.ts===a)return false;if(t.type===R.FILE&&e.id===t.file_id)return false;return true})};var D=Object(b["b"])("Fetch starred items list for user",function(e,t,r){e(N(true));return e(Object(y["a"])(s()({reason:"fetchStarsList"},r))).then(function(r){var a=Object(o["filter"])(r.items,function(e){return e.type===R.MESSAGE});Object(o["forEach"])(a,function(t){var r=e(Object(O["a"])({imsgs:[t.message],channelId:t.channel}));r.length&&e(Object(p["a"])(r))});var n=Object(o["filter"])(r.items,function(e){return e.type===R.FILE});n=Object(o["map"])(n,function(e){return e.file});n.length&&e(Object(v["a"])({files:n}));var i=Object(o["filter"])(r.items,function(e){return e.type===R.FILE_COMMENT});var s={};i.forEach(function(e){s[e.file.id]=e.file});i.forEach(function(e){var t=e.comment;var r=s[e.file.id];var a=Object(m["a"])(t,r);s[r.id]=a});e(Object(v["a"])({files:Object(o["values"])(s)}));var l=r.items,c=r.response_metadata,u=r.paging;e(w({items:l,responseMetadata:c}));var d=t();Object(E["isFeatureEnabled"])(d,"feature_starred_items_cursor_pagination")||e(A(u));var h=Object(k["b"])(d);S().markObjectsAsFresh(h,[C])}).catch(function(e){Object(_["a"])({getState:t}).error("Error in fetchStarsList: "+JSON.stringify(e));throw e}).finally(function(){e(N(false))})});D.propTypes={options:c["b"].shape({count:c["b"].number,page:c["b"].number,exclude:c["b"].bool,cursor:c["b"].string,limit:c["b"].number})};var F={starsList:[],currentPage:0,totalPages:0,isLoading:true,cursorMark:void 0};var L=Object(f["b"])((j={},n()(j,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.items,a=t.responseMetadata;if(!r||!r.length||!Object(o["isArray"])(r))return e;var n=Object(o["filter"])(r,function(e){return e.type!==R.CHANNEL});var i=Object(o["map"])(n,function(t){return M(e,t)});var l=e.starsList.concat(i);var c=Object(o["uniqWith"])(l,o["isEqual"]);var u=s()({},e,{starsList:c,cursorMark:a&&a.next_cursor});return u}),n()(j,I,function(e,t){if(!t)return e;if(t.type===R.CHANNEL)return e;var r=x(t,e.starsList);var a=M(e,t);r=Object(o["concat"])([a],r);var n=s()({},e,{starsList:r});return n}),n()(j,T,function(e,t){if(!t)return e;var r=x(t,e.starsList);var a=s()({},e,{starsList:r});return a}),n()(j,A,function(e,t){if(!t.page||!t.pages)return e;var r=s()({},e,{currentPage:t.page,totalPages:t.pages});return r}),n()(j,N,function(e,t){var r=s()({},e,{isLoading:t});return r}),n()(j,P,function(){return F}),j),F,{persistenceEnabled:true});L.propTypes={starsList:c["b"].arrayOf(c["b"].shape({type:c["b"].string.isRequired,channel:c["b"].string,ts:c["b"].string,id:c["b"].string})),currentPage:c["b"].number,totalPages:c["b"].number,isLoading:c["b"].bool,cursorMark:c["b"].string};t["default"]=L;var B=Object(g["b"])(function(e){var t=Object(k["b"])(e);S().maybeRefetch(t,C);return e&&e.stars&&e.stars.starsList});var U=Object(g["b"])(function(e){return e&&e.stars&&e.stars.currentPage});var q=Object(g["b"])(function(e){return e&&e.stars&&e.stars.totalPages});var G=Object(g["b"])(function(e){return e&&e.stars&&e.stars.isLoading});var H=Object(g["b"])(function(e){return e&&e.stars&&e.stars.cursorMark})},,,,,function(e,t,r){"use strict";r.d(t,"c",function(){return o});r.d(t,"i",function(){return l});r.d(t,"b",function(){return c});r.d(t,"d",function(){return u});r.d(t,"e",function(){return d});r.d(t,"f",function(){return p});r.d(t,"h",function(){return v});r.d(t,"a",function(){return m});r.d(t,"j",function(){return h});r.d(t,"g",function(){return f});r.d(t,"k",function(){return b});var a=r(0);var n=r(29);var i=r(25);var s=r(12);var o=Object(i["a"])("Get EKM Clear Cache timestamp",function(e,t,r){var a=r.reason;return e(Object(n["a"])({method:"enterprise.ekm.getClearCacheTs",reason:a})).catch(function(e){var r="failed to get clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",r);throw e})});o.propTypes={reason:a["b"].string};var l=Object(i["a"])("Set EKM Clear Cache timestamp",function(e,t,r){var a=r.timestamp,i=r.reason;return e(Object(n["a"])({method:"enterprise.ekm.setClearCacheTs",args:{timestamp:a},reason:i})).catch(function(e){var r="failed to set clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",r);throw e})});l.propTypes={timestamp:a["b"].number,reason:a["b"].string};var c=Object(i["a"])("Get EKM Backfill info",function(e,t,r){var a=r.reason;return e(Object(n["a"])({method:"ekm.backfill.info",reason:a})).catch(function(e){var r="failed to get EKM backfill information";Object(s["a"])({getState:t}).error("EKM",r);throw e})});c.propTypes={reason:a["b"].string};var u=Object(i["a"])("Get Misson Control EKM Backfill info",function(e,t,r){var a=r.reason,i=r.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.info",reason:a,args:{team_id:i}})).catch(function(e){var r="failed to get Mission Control EKM backfill information";Object(s["a"])({getState:t}).error("EKM",r);throw e})});u.propTypes={teamId:a["b"].string.isRequired,reason:a["b"].string};var d=Object(i["a"])("Get EKM Status information for Mission Control",function(e,t,r){var a=r.reason,i=r.teamId;return e(Object(n["a"])({method:"mc.ekm.status",reason:a,args:{team_id:i}})).catch(function(e){var r="failed to get Mission Control EKM Status";Object(s["a"])({getState:t}).error("EKM",r);throw e})});d.propTypes={teamId:a["b"].string.isRequired,reason:a["b"].string};var p=Object(i["a"])("Pause EKM Backfill for Mission Control",function(e,t,r){var a=r.reason,i=r.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.pause",reason:a,args:{team_id:i}})).catch(function(e){var r="failed to pause MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",r);throw e})});p.propTypes={teamId:a["b"].string.isRequired,reason:a["b"].string};var v=Object(i["a"])("Resume EKM Backfill for Mission Control",function(e,t,r){var a=r.reason,i=r.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.resume",reason:a,args:{team_id:i}})).catch(function(e){var r="failed to resume MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",r);throw e})});v.propTypes={teamId:a["b"].string.isRequired,reason:a["b"].string};var m=Object(i["a"])("Enroll Org in EKM for Mission Control",function(e,t,r){var a=r.reason,i=r.teamId,o=r.keyFamily,l=r.requester,c=r.role,u=r.loggingGroupName;return e(Object(n["a"])({method:"mc.ekm.enroll",reason:a,args:{team_id:i,key_family:o,requester:l,role:c,log_group_name:u}})).catch(function(e){var r="failed to enroll org in EKM in MC";Object(s["a"])({getState:t}).error("EKM",r);throw e})});m.propTypes={teamId:a["b"].string.isRequired,keyFamily:a["b"].string.isRequired,requester:a["b"].string.isRequired,role:a["b"].string,loggingGroupName:a["b"].string,reason:a["b"].string};var h=Object(i["a"])("Unenroll Org from EKM for Mission Control",function(e,t,r){var a=r.reason,i=r.teamId,o=r.requester;return e(Object(n["a"])({method:"mc.ekm.unenroll",reason:a,args:{team_id:i,requester:o}})).catch(function(e){var r="failed to unenroll org from EKM in MC";Object(s["a"])({getState:t}).error("EKM",r);throw e})});h.propTypes={teamId:a["b"].string.isRequired,requester:a["b"].string.isRequired,reason:a["b"].string};var f=Object(i["a"])("Re-key Org in EKM for Mission Control",function(e,t,r){var a=r.reason,i=r.teamId,o=r.keyFamily,l=r.requester;return e(Object(n["a"])({method:"mc.ekm.rekey",reason:a,args:{team_id:i,key_family:o,requester:l}})).catch(function(e){var r="failed to re-key org in MC";Object(s["a"])({getState:t}).error("EKM",r);throw e})});f.propTypes={teamId:a["b"].string.isRequired,keyFamily:a["b"].string.isRequired,requester:a["b"].string.isRequired,reason:a["b"].string};var b=Object(i["a"])("Update EKM Logging for Mission Control",function(e,t,r){var a=r.reason,i=r.teamId,o=r.requester,l=r.loggingGroupName,c=r.role;return e(Object(n["a"])({method:"mc.ekm.updateLogging",reason:a,args:{team_id:i,requester:o,log_group_name:l,role:c}})).catch(function(e){var r="failed to update EKM logging in MC";Object(s["a"])({getState:t}).error("EKM",r);throw e})});b.propTypes={teamId:a["b"].string.isRequired,requester:a["b"].string.isRequired,loggingGroupName:a["b"].string.isRequired,role:a["b"].string.isRequired,reason:a["b"].string}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"toggleFolderCollapse",function(){return E});r.d(t,"setFolderCollapse",function(){return j});r.d(t,"setIsRenaming",function(){return C});r.d(t,"renameFolder",function(){return S});r.d(t,"createFolder",function(){return w});r.d(t,"setFolderData",function(){return I});r.d(t,"dragFolderOrChannel",function(){return T});r.d(t,"initializeFolderData",function(){return A});r.d(t,"saveFolderData",function(){return N});r.d(t,"getFolders",function(){return M});r.d(t,"getFolderByName",function(){return x});var a=r(5);var n=r.n(a);var i=r(26);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(2);var u=r.n(c);var d=r(0);var p=r(18);var v=r(36);var m=r(14);var h=r(15);var f=r(34);var b=r(132);var g=r(12);var _;var y=false;var O="folder_data";var k={list:[],currentlyRenamingFolder:null};var E=Object(p["b"])("Toggle between collapse and showing channels");E.propTypes={name:d["b"].string.isRequired};var j=Object(p["b"])("Set collapsed state for all folders");j.propTypes={isCollapsed:d["b"].bool.isRequired};var C=Object(p["b"])("Set a folder's renaming state to true");C.propTypes={name:d["b"].string.isRequired};var S=Object(p["b"])("Rename a folder");S.propTypes={oldName:d["b"].string.isRequired,newName:d["b"].string.isRequired};var w=Object(p["b"])("Create a new folder");w.propTypes=null;var I=Object(p["b"])("Set all folder data (from storage)");I.propTypes=d["b"].array.isRequired;var T=Object(p["b"])("Drag a folder or channel onto a folder or channel");T.propTypes={src:d["b"].object.isRequired,dest:d["b"].object};var A=Object(h["b"])("Set Folder Data From LocalStorage",function(e,t){var r=Object(f["g"])(t(),O);if(!r){y=true;r=localStorage.getItem(O)}var a=void 0;try{a=JSON.parse(r)}catch(e){a=null}a&&0!==a.length||(a=k.list);e(I(a))});A.propTypes=null;var N=Object(h["b"])("Set Folder Data From LocalStorage",function(e,t){var r=t().channelSidebarFolders.list;var a=JSON.stringify(r);if(y)try{localStorage.setItem(O,a)}catch(e){Object(g["a"])({getState:t}).error("CHANNEL_SIDEBAR_FOLDERS","Unable to store channel sidebar folder data to localStorage because localStorage is full")}else e(Object(b["d"])({pref:O,value:a}))});N.propTypes=null;var P=function e(t,r){var a=true;var n=1;var i=void 0;var s=function e(t){return t.name===i};while(a){i=1===n?r:r+" ("+n+")";a=t.list.find(s);n+=1}return i};var R=Object(v["b"])((_={},n()(_,I,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l()({},e,{list:t})}),n()(_,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name;return l()({},e,{list:e.list.map(function(e){return e.name===r?l()({},e,{isCollapsed:!e.isCollapsed}):e}),currentlyRenamingFolder:null})}),n()(_,j,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isCollapsed;return l()({},e,{list:e.list.map(function(e){return l()({},e,{isCollapsed:r})}),currentlyRenamingFolder:null})}),n()(_,S,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.oldName,a=t.newName;return l()({},e,{list:a?e.list.map(function(t){return t.name===r&&r!==a?l()({},t,{name:P(e,a)}):t}):e.list.filter(function(e){return e.name!==r}),currentlyRenamingFolder:null})}),n()(_,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name;return l()({},e,{currentlyRenamingFolder:r})}),n()(_,w,function(e){return l()({},e,{currentlyRenamingFolder:P(e,"New Collection"),list:[{name:P(e,"New Collection"),isCollapsed:true,channelIds:[]}].concat(s()(e.list))})}),n()(_,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.src,a=t.dest;if("channel"===r.type){if(a&&"channel"===a.type&&r.id===a.id)return e;var n=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,r.id)});var i=-1===n?-1:e.list[n].channelIds.indexOf(r.id);var o=-1;var c=-1;if(a&&"folder"===a.type){o=u.a.findIndex(e.list,{name:a.id});c=0}else if(a&&"channel"===a.type){o=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});c=-1===o?-1:e.list[o].channelIds.indexOf(a.id)}if(n===o&&i===c)return e;var d=l()({},e,{list:e.list.map(function(e){return l()({},e,{channelIds:e.channelIds.filter(function(e){return e!==r.id})})})});if(-1===o)return d;return l()({},d,{list:d.list.map(function(e,t){return t!==o?e:l()({},e,{isCollapsed:0!==e.channelIds.length&&e.isCollapsed,channelIds:[].concat(s()(e.channelIds.slice(0,c)),[r.id],s()(e.channelIds.slice(c)))})})})}if("folder"===r.type&&a){var p=void 0;p="folder"===a.type?u.a.findIndex(e.list,{name:a.id}):u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});if(-1===p)return e;var v=u.a.findIndex(e.list,{name:r.id});if(v===p)return e;var m=l()({},e,{list:[].concat(s()(e.list.slice(0,v)),s()(e.list.slice(v+1)))});m.list=[].concat(s()(m.list.slice(0,p)),[e.list[v]],s()(m.list.slice(p)));return m}return e}),_),k,{persistenceEnabled:true});R.propTypes={list:d["b"].arrayOf(d["b"].shape({name:d["b"].string.isRequired,isCollapsed:d["b"].bool.isRequired,channelIds:d["b"].arrayOf(d["b"].string).isRequired})),currentlyRenamingFolder:d["b"].string};t["default"]=R;var M=Object(m["b"])(function(e){return e&&e.channelSidebarFolders&&e.channelSidebarFolders.list});var x=Object(m["b"])(function(e,t){return e&&e.channelSidebarFolders&&l()({},u.a.find(e.channelSidebarFolders.list,{name:t}),{isRenaming:e.channelSidebarFolders.currentlyRenamingFolder===t})})},,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"c",function(){return n});r.d(t,"b",function(){return i});r.d(t,"d",function(){return s});r.d(t,"a",function(){return l});var a=r(20);var n=Object(a["b"])("TS.permissions.members.canPostInModelOb",function(){return false});var i=Object(a["b"])("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return false});var s=Object(a["b"])("TS.permissions.members.canUserInviteToWorkspace",function(){return false});var o=Object(a["b"])("TS.permissions.members.canEditUserGroups",function(){return false});var l=Object(a["b"])("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return false})},,function(e,t,r){"use strict";r.r(t);r.d(t,"bulkAddActivityItems",function(){return I});r.d(t,"removeActivityByMessageTs",function(){return T});r.d(t,"removeActivityByType",function(){return A});r.d(t,"setActivityLoading",function(){return N});r.d(t,"resetActivity",function(){return P});r.d(t,"getActivityListItems",function(){return x});r.d(t,"isActivityLoading",function(){return D});r.d(t,"hasMoreActivity",function(){return F});r.d(t,"fetchActivityMentions",function(){return L});r.d(t,"fetchActivityByMessageTs",function(){return B});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(0);var u=r(192);var d=r(27);var p=r(18);var v=r(36);var m=r(15);var h=r(14);var f=r(12);var b=r(4413);var g=r(23);var _=r(34);var y=r(1299);var O=r(41);var k;var E="ACTIVITY_STORE";var j="activity";var C=Object(o["memoize"])(function(){return new u["b"]({fetch:function e(t){Object(d["a"])(t,P());var r=Object(d["c"])(t);var a=Object(_["g"])(r,"mentions_exclude_at_channels");var n=Object(_["g"])(r,"mentions_exclude_reactions");var i=Object(_["g"])(r,"mentions_exclude_at_user_groups");return Object(d["a"])(t,L({includeAtChannel:!a,includeReactions:!n,includeUserGroups:!i}))},isEnabled:function e(){return true},metricsName:"activity"})});var S=function e(t){switch(t.type){case"at":case"channel":case"everyone":case"user_group":case"word":return{channelId:t.channel,message:t.message,ts:t.message.ts,type:t.type};case"reaction":return{channelId:t.item.channel,message:t.item.message,ts:t.ts,type:t.type};default:Object(f["b"])().error("bulkAddActivityItems: unknown item type",t);return null}};var w=function e(t,r,a){return Object(o["some"])(t,function(e){if(!e)return false;if(e.message)return e.message.ts===a&&e.message.channel===r;return e.messageTs===a&&e.channelId===r})};var I=Object(p["b"])("Adds multiple activity items");I.propTypes={hasMore:c["b"].bool,items:c["b"].arrayOf(c["b"].object).isRequired};var T=Object(p["b"])("Remove an item by messageTs");T.propTypes={channelId:c["b"].string.isRequired,messageTs:c["b"].string.isRequired};var A=Object(p["b"])("Remove all items that match type");A.propTypes=c["b"].string.isRequired;var N=Object(p["b"])("Sets if activity is loading");N.propTypes=c["b"].bool.isRequired;var P=Object(p["b"])("Reset the activity store");P.propTypes=null;var R={hasMore:false,items:[],isLoading:false};var M=Object(v["b"])((k={},n()(k,I,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.hasMore,a=t.items;if(Object(o["isEmpty"])(a))return e;var n=a.filter(function(e){if(!e)return false;if(e.message&&Object(O["isTombstone"])(e.message))return false;return true});var i=n.map(function(e){var t=S(e),r=t.channelId,a=t.message,n=t.ts,i=t.type;return{channelId:r,messageTs:a.ts,threadTs:a.thread_ts,ts:n,type:i}});var l=Object(o["compact"])(e.items.concat(i));var c=Object(o["orderBy"])(l,"ts",["desc"]);var u=Object(o["uniqBy"])(c,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageTs,r=e.type;if("reaction"===r)return"reaction-"+t;return"mention-"+t});return s()({},e,{hasMore:r,items:u})}),n()(k,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.messageTs;var n=Object(o["reject"])(e.items,{channelId:r,messageTs:a});if(n.length===e.items.length)return e;return s()({},e,{items:n})}),n()(k,A,function(e,t){var r=e.items.filter(function(e){return e.type!==t});if(r.length===e.items.length)return e;return s()({},e,{items:r})}),n()(k,N,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isLoading===t)return e;return s()({},e,{isLoading:t})}),n()(k,P,function(){return R}),k),R,{persistenceEnabled:true});M.propTypes={items:c["b"].arrayOf(c["b"].shape({channelId:c["b"].string.isRequired,messageTs:c["b"].string.isRequired,threadTs:c["b"].string,ts:c["b"].string.isRequired,type:c["b"].string.isRequired})),isLoading:c["b"].bool};t["default"]=M;var x=Object(h["b"])(function(e){var t=Object(g["b"])(e);C().maybeRefetch(t,j);return e&&e.activity&&e.activity.items});var D=Object(h["b"])(function(e){return e&&e.activity&&!!e.activity.isLoading});var F=Object(h["b"])(function(e){return e&&e.activity&&!!e.activity.hasMore});var L=Object(m["b"])("Fetch user activity",function(e,t,r){e(N(true));return e(Object(b["a"])(s()({reason:"fetchActivityMentions"},r))).then(function(r){e(I({hasMore:r.has_more,items:r.mentions}));var a=Object(o["map"])(r.mentions,S);a.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channelId,a=t.message;e(Object(y["a"])({channelId:r,message:a}))});var n=t();var i=Object(g["b"])(n);C().markObjectsAsFresh(i,[j]);return a}).finally(function(){e(N(false))})});L.propTypes={afterTs:c["b"].string,includeAtChannel:c["b"].bool,includeReactions:c["b"].bool,includeUserGroups:c["b"].bool,limit:c["b"].number};var B=Object(m["b"])("Fetch a specific activity mention item by timestamp",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.messageTs,i=r.retryNum,s=void 0===i?0:i,o=r.maxRetries,l=void 0===o?5:o;var c=t();var u=Object(f["a"])({state:c,label:E});if(!n){u.info("no messageTs provided");return Promise.reject(new Error("no messageTs provided"))}if(w(x(c),a,n)){u.info("Fetch "+n+": already have item");return Promise.resolve()}if(s>=l){u.info("Fetch "+n+": aborted after max retries");return Promise.reject(new Error("aborted after max retries"))}var d=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return Promise.delay(1e3*(r||1)).then(function(){return e(B({channelId:a,maxRetries:l,messageTs:n,retryNum:r}))})};if(D(c))return d();u.info("Fetch "+n+": fetching activity (retry "+s+")");return e(L({limit:10})).then(function(e){if(w(e,a,n)){u.info("Fetch "+n+": found item");return Promise.resolve()}return d(s+1)})});B.propTypes={channelId:c["b"].string.isRequired,maxRetries:c["b"].number,messageTs:c["b"].string.isRequired,retryNum:c["b"].number}},,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(2);var h=r(0);var f=r(10);var b=r(1144);var g=r(17);var _=r(68);var y=r(4);var O=r(1290);var k=r(51);var E=r(317);var j=r(430);var C=r(128);var S=r(451);var w=r(50);var I=r(28);var T=r(3);var A=r.n(T);var N=r(31);function P(e,t){var r=Object(N["getTeamProfileFields"])(t);if(Object(m["isEmpty"])(r))return[];var a=Object(g["getMemberProfileFields"])(e);if(Object(m["isEmpty"])(a))return[];var n=[];r.forEach(function(e){if(e.is_hidden)return;var t=a[e.id];if(!t||!t.value)return;n.push(A()({},e,{alt:t.alt,value:t.value}))});return n}var R=r(4212);function M(e){return e&&"text"===e.type&&"skype"===e.label.toLowerCase()}var x=r(58);var D=r.n(x);var F=r(276);var L=r(532);function B(e,t){var r=Object(d["useRef"])(e);var a=Object(d["useState"])(e),n=D()(a,2),i=n[0],s=n[1];Object(d["useEffect"])(function(){if(i!==r.current&&Object(m["isNumber"])(t)&&t>0){var e=setTimeout(function(){s(r.current)},t);return function(){clearTimeout(e)}}return m["noop"]},[t,i]);return[i,s]}var U=r(16);var q=r.n(U);var G=r(1309);var H=r(2033);var W={children:h["b"].node,label:h["b"].string.isRequired,value:h["b"].node};var V={children:void 0,value:void 0};function K(e){var t=e.children,r=e.label,a=e.value;var n=Object(d["useContext"])(G["a"]);if(!r)return null;return p.a.createElement("div",{className:q()("p-member_profile_field",{"p-member_profile_field--keyboard":n})},p.a.createElement("div",{className:"p-member_profile_field__primary"},p.a.createElement("div",{className:"p-member_profile_field__label"},r),p.a.createElement("div",{className:"p-member_profile_field__value"},a)),t&&p.a.createElement("div",{className:"p-member_profile_field__secondary"},t))}K.displayName="MemberProfileField";K.defaultProps=V;var z=K;var Q=new f["b"]("member_profile");var Y={member:h["b"].object};var J={member:void 0};function X(e){var t=e.member;var r=B(false,2e3),a=D()(r,2),n=a[0],i=a[1];var s=Object(L["a"])(),o=s.featureModernProfileFlexpane;if(!o)return null;var l=void 0;var c=void 0;if(n){c="success";l=Q.t("Copied!")}else l=Q.t("Copy");var u=Object(g["getMemberEmail"])(t);return p.a.createElement(z,{label:Q.t("Email address"),value:p.a.createElement(k["a"],{href:"mailto:"+u},u)},Object(F["canWriteText"])()&&p.a.createElement(w["c"],{status:c,tip:l,zIndex:"above_fs"},p.a.createElement(I["d"],{"aria-label":Q.t("Copy Email Address"),onClick:function e(){Object(F["writeText"])(u);i(true)},icon:"all-files",type:"outline"})))}X.displayName="MemberEmailField";X.defaultProps=J;var Z=X;var $=r(702);var ee=r(34);var te=r(245);function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=Object(d["useRef"])();var a=Object(d["useRef"])();var n=Object(d["useRef"])();if(!Object(te["a"])(r.current,t)){r.current=t;a.current=e;a.current()}Object(d["useEffect"])(function(){function e(){var t=60-(new Date).getSeconds();t<5&&(t=5);n.current=setTimeout(function(){a.current();e()},1e3*t)}e();return function(){clearTimeout(n.current)}},[])}var ae=new f["b"]("member_profile");function ne(e,t){return Object($["a"])(Date.now(),{timeZone:Object(g["getMemberTimezone"])(e),timeZoneOffset:Object(g["getMemberTimezoneOffset"])(e),do24hrTime:t})}var ie={member:h["b"].object,time24:h["b"].bool};var se={member:void 0,time24:false};function oe(e){var t=e.member,r=e.time24;var a=Object(d["useState"])(),n=D()(a,2),i=n[0],s=n[1];re(function(){s(ne(t,r))});return p.a.createElement(z,{label:ae.t("Local time"),value:i})}oe.displayName="MemberLocalTimeField";oe.defaultProps=se;function le(e){return{time24:Object(ee["g"])(e,"time24")}}var ce=Object(v["connect"])(le)(oe);var ue=r(230);var de=r(96);var pe=r(61);var ve=r(398);var me=r(19);var he=r(139);var fe=new f["b"]("member_profile");var be={channels:h["b"].arrayOf(h["b"].object.isRequired)};var ge={channels:void 0};function _e(e){var t=e.channels;var r=Object(L["a"])(),a=r.featureModernProfileFlexpane;if(!a)return null;var n=Object(m["filter"])(t,pe["b"]);if(Object(m["isEmpty"])(n))return fe.t("None");return p.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return p.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},p.a.createElement(k["a"],{href:Object(ve["a"])({channelId:e.id})},p.a.createElement(he["a"],{channelId:e.id,className:"cursor_pointer",iconProps:{inherit:true}})))}))}_e.displayName="ChannelList";_e.defaultProps=ge;function ye(e,t){var r=t.channelIds;var a=Object(m["map"])(r,function(t){return Object(me["d"])(e,t)});return{channels:a}}var Oe=Object(v["connect"])(ye)(_e);function ke(e){var t=e.fetchMemberProfileExtras,r=e.member;var a=Object(d["useState"])(false),n=D()(a,2),i=n[0],s=n[1];var o=Object(d["useState"])([]),l=D()(o,2),c=l[0],u=l[1];Object(d["useEffect"])(function(){var e=void 0;Object(g["isRestricted"])(r)?e=["channels"]:Object(g["isExternal"])(r)&&(e=["shared_channels"]);if(!e)return;s(true);t({keys:e,userId:r.id,reason:"useProfileExtras"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(e.channels||e.shared_channels)}).finally(function(){s(false)})},[t,r]);return{extras:c,isLoading:i}}var Ee=new f["b"]("member_profile");var je={fetchMemberProfileExtras:h["b"].func,member:h["b"].object};var Ce={fetchMemberProfileExtras:m["noop"],member:void 0};function Se(e){var t=e.fetchMemberProfileExtras,r=e.member;var a=ke(t,r),n=a.extras,i=a.isLoading;var s=Object(L["a"])(),o=s.featureModernProfileFlexpane;if(!o)return null;return p.a.createElement(z,{label:Ee.t("Shared Channels"),value:i?p.a.createElement(de["a"],{size:"small",inline:true}):p.a.createElement(Oe,{channelIds:n})})}Se.displayName="MemberSharedChannelsField";Se.defaultProps=Ce;var we={fetchMemberProfileExtras:function e(){return ue["e"].apply(void 0,arguments)}};var Ie=Object(v["connect"])(null,we)(Se);var Te=r(1037);var Ae=r(24);var Ne=r(35);var Pe=new f["b"]("member_profile");var Re={teams:h["b"].arrayOf(h["b"].object.isRequired)};var Me={teams:void 0};function xe(e){var t=e.teams;var r=Object(L["a"])(),a=r.featureModernProfileFlexpane;if(!a)return null;var n=Object(m["filter"])(t,pe["b"]);if(Object(m["isEmpty"])(n))return Pe.t("None");return p.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return p.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},Object(N["getTeamDisplayName"])(e))}))}xe.displayName="TeamList";xe.defaultProps=Me;function De(e,t){var r=t.teamIds;var a=Object(m["map"])(r,function(t){return Object(Ne["j"])(e,t)});return{teams:a}}var Fe=Object(v["connect"])(De)(xe);var Le=new f["b"]("member_profile");function Be(e,t){var r=Object(d["useState"])(false),a=D()(r,2),n=a[0],i=a[1];Object(d["useEffect"])(function(){if(Object(m["isEmpty"])(t))return;i(true);e({ids:t,reason:"MemberSharedWorkspacesField"}).finally(function(){return i(false)})},[e,t]);return{isLoading:n}}var Ue={fetchAndUpsertTeamsFromAPI:h["b"].func,sharedTeamIds:h["b"].arrayOf(h["b"].string.isRequired)};var qe={fetchAndUpsertTeamsFromAPI:m["noop"],sharedTeamIds:void 0};function Ge(e){var t=e.fetchAndUpsertTeamsFromAPI,r=e.sharedTeamIds;var a=Be(t,r),n=a.isLoading;var i=Object(L["a"])(),s=i.featureModernProfileFlexpane;if(!s)return null;var o=n?p.a.createElement(de["a"],{size:"small",inline:true}):p.a.createElement(Fe,{teamIds:r});return p.a.createElement(z,{label:Le.t("Shared Workspaces"),value:o})}Ge.displayName="MemberSharedWorkspacesField";Ge.defaultProps=qe;var He=p.a.memo(Ge,function(e,t){return Object(te["a"])(t,e,2)});function We(e,t){var r=t.member;var a=Object(Ae["b"])(e);return{sharedTeamIds:Object(g["getMemberWorkspacesInCommon"])(r,a)}}var Ve={fetchAndUpsertTeamsFromAPI:function e(){return Te["b"].apply(void 0,arguments)}};var Ke=Object(v["connect"])(We,Ve)(He);var ze=new f["b"]("member_profile");var Qe={member:h["b"].object};var Ye={member:void 0};function Je(e){var t=e.member;var r=Object(L["a"])(),a=r.featureModernProfileFlexpane;if(!a)return null;var n=Object(g["getMemberGuestInvitedBy"])(t);if(!n)return null;return p.a.createElement(z,{key:"invited_by",label:ze.t("Invited By"),value:p.a.createElement(j["a"],{id:n})})}Je.displayName="MemberGuestInvitedByField";Je.defaultProps=Ye;var Xe=Je;var Ze=r(189);var $e=r(220);var et=new f["b"]("member_profile");var tt={member:h["b"].object};var rt={member:void 0};function at(e){var t=e.member;var r=Object(L["a"])(),a=r.featureModernProfileFlexpane;if(!a)return null;var n=Object(g["getMemberGuestExpirationTs"])(t);if(!n)return null;return p.a.createElement(z,{label:et.t("Member Until"),value:et.t("{date} at {time}",{date:Object(Ze["a"])(n),time:Object($e["a"])(n)})})}at.displayName="MemberGuestUntilField";at.defaultProps=rt;var nt=at;var it=new f["b"]("member_profile");var st={currentMember:h["b"].object,fetchMemberProfileExtras:h["b"].func,member:h["b"].object,team:h["b"].object};var ot={currentMember:void 0,fetchMemberProfileExtras:m["noop"],member:void 0,team:void 0};function lt(e){var t=e.currentMember,r=e.fetchMemberProfileExtras,a=e.member,n=e.team;var i=ke({fetchMemberProfileExtras:r,member:a}),s=i.extras,o=i.isLoading;var l=Object(L["a"])(),c=l.featureModernProfileFlexpane;if(!c)return null;var u=o?p.a.createElement(de["a"],{size:"small",inline:true}):p.a.createElement(Oe,{channelIds:s});return p.a.createElement(z,{key:"channels",label:it.t("Channels"),value:u},Object(g["isRestricted"])(a)&&Object(g["isAdmin"])(t)&&p.a.createElement(w["c"],{tip:it.t("Manage")},p.a.createElement(I["d"],{"aria-label":it.t("Manage Guest Channels"),href:Object(N["getTeamUrl"])(n)+"admin?#restricted",icon:"filters",type:"outline"})))}lt.displayName="MemberGuestChannelsField";lt.defaultProps=ot;function ct(e){return{currentMember:Object(Ae["b"])(e)}}var ut={fetchMemberProfileExtras:function e(){return ue["e"].apply(void 0,arguments)}};var dt=Object(v["connect"])(ct,ut)(lt);r.d(t,"a",function(){return pt});var pt={CUSTOM:"custom",EMAIL:"email",PHONE:"phone",STATUS:"status",TIME:"time",NAME:"name",CHANNELS:"channels",SHARED_WORKSPACES:"shared_workspaces",GUEST:"guest"};var vt=new f["b"]("member_profile");var mt={hasStatus:h["b"].bool,isEnterprise:h["b"].bool,member:h["b"].object,onClick:h["b"].func,openCustomStatusDialog:h["b"].func,prefDisplayEmailAddresses:h["b"].bool,team:h["b"].object,types:h["b"].arrayOf(h["b"].oneOf(Object.values(pt)).isRequired).isRequired,featureModernProfileFlexpane:h["b"].bool.isRequired};var ht={hasStatus:false,isEnterprise:false,member:void 0,onClick:m["noop"],openCustomStatusDialog:m["noop"],prefDisplayEmailAddresses:false,team:void 0};var ft=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getProfileLinkHTML",value:function e(t,r){return p.a.createElement(E["a"],{href:t,target:"_blank",title:t},r||t)}},{key:"getProfileUserFieldHTML",value:function e(t){var r=t.split(/\s*,\s*/);var a=r.map(function(e){return p.a.createElement(j["a"],{id:e})});return Object(f["g"])(a,{noConj:true,react:true})}},{key:"getVisibleTeamProfileFieldsForMember",value:function e(){var t=this;var r=this.props,a=r.member,n=r.team;var i=P(a,n).map(function(e){var r=void 0;var a=void 0;if("date"===e.type){r=Object(b["a"])(e.value);a=e.value}else if("user"===e.type)a=t.getProfileUserFieldHTML(e.value);else if("link"===e.type)a=t.getProfileLinkHTML(e.value,e.alt||e.label);else if(M(e)){var n="skype:"+e.value+"?call";a=t.getProfileLinkHTML(n,e.value)}else{r=e.alt;a=e.value}return{alt:r,id:e.id,label:e.label,value:a}});return i}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.featureModernProfileFlexpane,n=r.hasStatus,i=r.isEnterprise,s=r.member,o=r.onClick,l=r.prefDisplayEmailAddresses,c=r.team,u=r.types;if(!a)return null;var d=[];u.forEach(function(e){if(e===pt.EMAIL&&(l||Object(g["isSelf"])(s))){var r=Object(g["getMemberEmail"])(s);Object(R["a"])(r)&&d.push(p.a.createElement(Z,{key:"email",member:s}))}else if(e===pt.PHONE){var a=Object(g["getMemberPhone"])(s);Object(R["a"])(a)&&d.push(p.a.createElement(z,{key:"phone",label:vt.t("Phone number"),value:p.a.createElement(E["a"],{href:"tel:"+a},a)}))}else if(e===pt.STATUS){var u=void 0;if(n){var v=p.a.createElement(S["b"],{animated:true,className:"p-member_profile_field__status",memberId:s.id,tooltip:false});u=Object(g["isSelf"])(s)?p.a.createElement(w["c"],{tip:vt.t("Edit")},p.a.createElement(C["a"],{onClick:function e(){o();t.props.openCustomStatusDialog()}},v,p.a.createElement(S["a"],{className:"p-member_profile_field__status_expiration",memberId:s.id}))):v}else Object(g["isSelf"])(s)&&(u=p.a.createElement(k["a"],{onClick:function e(){o();t.props.openCustomStatusDialog()}},vt.t("Set a status")));u&&d.push(p.a.createElement(z,{key:"status",label:vt.t("Status"),value:u},Object(g["isSelf"])(s)&&p.a.createElement(w["c"],{tip:vt.t("Edit"),zIndex:"above_fs"},p.a.createElement(I["d"],{"aria-label":vt.t("Edit Custom Status"),onClick:function e(){o();t.props.openCustomStatusDialog()},icon:"pencil",type:"outline"}))))}else if(e!==pt.TIME||Object(g["isSlackbot"])(s))if(e===pt.NAME){var m=Object(g["getMemberProfileFieldDisplayName"])(s);Object(R["a"])(m)&&d.push(p.a.createElement(z,{key:"name",label:vt.t("Display name"),value:m}))}else if(e===pt.CUSTOM){var h=t.getVisibleTeamProfileFieldsForMember();h.forEach(function(e){if(!Object(R["a"])(e.value))return;d.push(p.a.createElement(z,{key:e.id,label:e.label,value:e.alt||e.value}))})}else e===pt.SHARED_CHANNELS?Object(g["isExternal"])(s)&&d.push(p.a.createElement(Ie,{key:pt.SHARED_CHANNELS,member:s})):e===pt.SHARED_WORKSPACES?i&&d.push(p.a.createElement(Ke,{key:pt.SHARED_WORKSPACES,member:s})):e===pt.GUEST&&Object(g["isRestricted"])(s)&&d.push(p.a.createElement(Xe,{key:"guest-invited",member:s}),p.a.createElement(nt,{key:"guest-until",member:s}),p.a.createElement(dt,{key:"guest-channels",member:s,team:c}));else d.push(p.a.createElement(ce,{key:"time",member:s}))});return p.a.createElement("div",null,d)}}]);return t}(d["Component"]);ft.displayName="MemberProfileFields";ft.defaultProps=ht;function bt(e,t){var r=t.member;return{hasStatus:Object(g["hasCustomStatusSet"])(r),isEnterprise:Object(y["pageNeedsEnterprise"])(e),prefDisplayEmailAddresses:Object(_["a"])(e,"display_email_addresses"),featureModernProfileFlexpane:Object(y["isFeatureEnabled"])(e,"feature_modern_profile_flexpane")}}var gt={openCustomStatusDialog:function e(){return O["a"].apply(void 0,arguments)}};var _t=t["b"]=Object(v["connect"])(bt,gt)(ft)},,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(26);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var v=r(8);var m=r.n(v);var h=r(9);var f=r.n(h);var b=r(1);var g=r.n(b);var _=r(0);var y=r(16);var O=r.n(y);var k=r(13);var E=r(2414);var j=r(2);var C=r(1757);var S=r(10);var w=r(231);var I=r(151);var T=r(24);var A=r(4);var N=r(23);var P=r(290);var R=r(17);var M=r(99);var x=r(135);var D=r(28);var F=r(54);var L=r(289);var B=r(392);var U=r(537);var q=r(96);var G=r(186);var H=r(1556);var W=r(4370);var V=r(2403);var K=new S["b"]("user_groups");var z={onSelectedItemsChange:_["b"].func,getMemberById:_["b"].func,userGroupMemberIds:_["b"].array};var Q={onSelectedItemsChange:j["noop"],getMemberById:j["noop"],userGroupMemberIds:[]};var Y=32;var J=148;var X=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(r,["getSelectedMembers","renderMemberOption"]);return r}p()(t,[{key:"getSelectedMembers",value:function e(t){var r=this;return t.map(function(e){return r.formatMemberOption(r.props.getMemberById(e))})}},{key:"formatMemberOption",value:function e(t){if(!t)return null;return{label:Object(R["getMemberProfileFieldDisplayName"])(t),value:t.id}}},{key:"renderMemberOption",value:function e(t){return g.a.createElement(W["a"],{id:t.value})}},{key:"render",value:function e(){var t=this.props.userGroupMemberIds;var r=this.getSelectedMembers(t);return g.a.createElement(H["b"],{isRequired:true,focusOnMount:true,key:"user_group_member_select",selectId:"user_group_member_select",renderOption:this.renderMemberOption,selectedOptions:r,onSelectedItemsChange:this.props.onSelectedItemsChange,placeholderText:K.t("Search by name"),width:"100%",maxHeight:J,optionsRowHeight:Y,searcherOptions:{entities:{members:{includeSelf:true,onlyLocalTeam:true,includeSlackbot:false,includeBots:false,includeDeleted:false,includeGuests:false}},allowEmptyQuery:true,sort:{frecency:false,selfFirst:false},limit:40}})}}]);return t}(b["PureComponent"]);X.displayName="UserGroupMemberSelector";X.defaultProps=Q;var Z=function e(t,r){var a=r.groupId;var n=Object(I["e"])(t,a);var i=Object(M["g"])(n);return{userGroupMemberIds:i,getMemberById:function e(r){return Object(T["d"])(t,r)}}};var $=Object(k["connect"])(Z)(X);var ee=new S["b"]("user_groups");var te={groupId:_["b"].string,onSelectedItemsChange:_["b"].func,featureSonicUserGroups:_["b"].bool,featureSonicUserGroupsA11yRefactor:_["b"].bool,userGroupMemberIds:_["b"].array,fetchAndUpsertUserGroupMembers:_["b"].func,teamId:_["b"].string,getMemberById:_["b"].func,search:_["b"].func};var re={groupId:void 0,onSelectedItemsChange:j["noop"],featureSonicUserGroups:false,featureSonicUserGroupsA11yRefactor:false,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:j["noop"],teamId:void 0,getMemberById:j["noop"],search:j["noop"]};var ae=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={updatedGroupMembers:e.userGroupMemberIds,searchResults:[],searchQuery:"",loading:false,resultFocusIndex:-1,lastKnownResultFocusIndex:-1,displayNoMemberError:false,haveUpsertedExistingMembers:false};Object(C["a"])(r,["onSearchInputChange","onClearSearch","setAddMember","setRemoveMember","setListRef","setAddedMembersTitleRef","setAllMembers","handleUpKey","handleDownKey","handleEnterKey","onSearchInputFocusIn","onSearchInputFocusOut","onSelectedItemsChange"]);r.list=null;r.addedMembersTitle=null;r.ADDED_MEMBERS_TITLE_HEIGHT=22;return r}p()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props.groupId;if(r){this.setLoading(true);this.props.fetchAndUpsertUserGroupMembers({groupId:r}).then(function(e){t.setState(function(){return{haveUpsertedExistingMembers:true}});Object(j["isEmpty"])(e)?t.getMembers(""):t.setState(function(){return{updatedGroupMembers:e,loading:false}})})}else this.getMembers("")}},{key:"componentDidUpdate",value:function e(t,r){!Object(j["isEqual"])(this.state.searchResults,r.searchResults||!Object(j["isEqual"])(this.state.searchQuery,r.searchQuery))&&this.list&&this.list.scrollToOffset(0);r.updatedGroupMembers.length!==this.state.updatedGroupMembers.length&&Object(j["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.addedMembersTitle&&(this.ADDED_MEMBERS_TITLE_HEIGHT=this.addedMembersTitle.clientHeight)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSearchInputChange",value:function e(t){this.state.displayNoMemberError&&this.setDisplayNoMemberError(false);var r=t&&t.target&&t.target.value;if(r){this.getMembers(r);this.setSearchQuery(r);this.setResultFocusIndex(0)}else this.onClearSearch()}},{key:"onClearSearch",value:function e(){Object(j["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.setSearchQuery("");this.setResultFocusIndex(0);this.setDisplayNoMemberError(false)}},{key:"onSearchInputFocusIn",value:function e(){this.bindKeyCommands();if(this.state.lastKnownResultFocusIndex<0){this.setLastKnownResultFocusIndex(0);this.setResultFocusIndex(0)}else this.setResultFocusIndex(this.state.lastKnownResultFocusIndex)}},{key:"onSearchInputFocusOut",value:function e(){this.keyCommands&&this.keyCommands.reset();this.setLastKnownResultFocusIndex(this.state.resultFocusIndex);this.setResultFocusIndex(-1)}},{key:"onSelectedItemsChange",value:function e(t){this.setDisplayNoMemberError(!t.length);this.setAllMembers(t.map(function(e){return e.value}));this.props.onSelectedItemsChange(t)}},{key:"getUpdatedUserGroupMembers",value:function e(){return this.state.updatedGroupMembers}},{key:"setSearchQuery",value:function e(t){this.setState(function(){return{searchQuery:t}})}},{key:"setSearchResults",value:function e(t){this.setState(function(){return{searchResults:t}})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"setDisplayNoMemberError",value:function e(t){this.setState(function(){return{displayNoMemberError:t}})}},{key:"setRemoveMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:Object(j["without"])(e.updatedGroupMembers,t)}})}},{key:"setAddMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:[t].concat(l()(e.updatedGroupMembers))}},this.onClearSearch)}},{key:"setAllMembers",value:function e(t){this.setState(function(){return{updatedGroupMembers:t}})}},{key:"setResultFocusIndex",value:function e(t){this.setState(function(){return{resultFocusIndex:t}})}},{key:"setLastKnownResultFocusIndex",value:function e(t){this.setState(function(){return{lastKnownResultFocusIndex:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setAddedMembersTitleRef",value:function e(t){this.addedMembersTitle=t}},{key:"getMembers",value:function e(t){var r=this;this.setLoading(true);return this.props.search({query:t,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true,includeSlackbot:false,includeBots:false,includeDeleted:true}},allowEmptyQuery:true,sort:{frecency:false,selfFirst:false},limit:40}}).then(function(e){var t=Object(j["filter"])(e,function(e){if(!e)return false;if(Object(R["isGuest"])(e))return false;if(e.enterprise_user){var t=e.enterprise_user.teams;if(!t)return false;if(!Object(j["includes"])(t,r.props.teamId))return false}return true});var a=Object(j["sortBy"])(t,["real_name"]);var n=a.map(function(e){return e.id});r.setSearchResults(n);r.setLoading(false)})}},{key:"getRowProps",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return{};var a=ee.t("Add");var n=ee.t("Remove");var i=this.state.updatedGroupMembers;if(Object(j["includes"])(i,t))return{onClick:function e(){return r.setRemoveMember(t)},text:n,buttonAria:this.formatRowAriaLabel(n,t)};return{onClick:function e(){return r.setAddMember(t)},text:a,buttonAria:this.formatRowAriaLabel(a,t)}}},{key:"getDisplayedListLength",value:function e(){var t=this.state,r=t.searchResults,a=t.searchQuery,n=t.updatedGroupMembers;if(a)return r.length;return n.length?n.length:r.length}},{key:"handleUpKey",value:function e(t){t.preventDefault();var r=this.state.resultFocusIndex;var a=this.getDisplayedListLength();a?this.setResultFocusIndex(0===r?a-1:r-1):this.setResultFocusIndex(0)}},{key:"handleDownKey",value:function e(t){t.preventDefault();var r=this.state.resultFocusIndex;var a=this.getDisplayedListLength();a?this.setResultFocusIndex((r+1)%a):this.setResultFocusIndex(0)}},{key:"handleEnterKey",value:function e(t){if(this.state.resultFocusIndex<0)return;t.preventDefault();var r=this.state,a=r.searchQuery,n=r.searchResults,i=r.updatedGroupMembers,s=r.resultFocusIndex;if(Object(j["isEmpty"])(i)){var o=n[s];this.setSearchQuery("");this.setAddMember(o)}else if(a){var l=n[s];this.setSearchQuery("");Object(j["includes"])(i,l)?this.setRemoveMember(l):this.setAddMember(l)}else{var c=i[s];this.setRemoveMember(c)}}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up"],handler:this.handleUpKey},{keys:["down"],handler:this.handleDownKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new G["a"]);this.keyCommands.bindAll(t)}},{key:"validateUpdatedGroupMemberCount",value:function e(){var t=this.state.updatedGroupMembers.length>0;t||this.setDisplayNoMemberError(true);return t}},{key:"doDisplayGroupMembersList",value:function e(){return!this.state.searchQuery&&!!this.state.updatedGroupMembers.length}},{key:"formatRowAriaLabel",value:function e(t,r){var a=Object(R["getMemberProfileFieldDisplayName"])(this.props.getMemberById(r));return t+" "+a+" "}},{key:"maybeRenderNoMembersAlert",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.state.displayNoMemberError)return null;return g.a.createElement(x["a"],{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":true},ee.t("User groups need to have at least one member."))}},{key:"renderLoadingSpinner",value:function e(){return g.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":true},g.a.createElement(q["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderRowButton",value:function e(t){var r=t.text,a=t.buttonAria,i=s()(t,["text","buttonAria"]);return g.a.createElement("div",{className:"p-user_group_member_management__row_button"},g.a.createElement(D["d"],n()({size:"small",type:"outline"},i,{tabIndex:"-1","aria-label":a}),r))}},{key:"renderMemberRow",value:function e(t){var r=t.id,a=t.index;var i=this.getRowProps(r),o=i.onClick,l=s()(i,["onClick"]);var c=O()({"p-user_group_member_management__row_container--active":a===this.state.resultFocusIndex});return g.a.createElement("div",{className:c},g.a.createElement("div",{className:"p-user_group_member_management__row","aria-hidden":true},g.a.createElement("div",{className:"p-user_group_member_management__row_member"},g.a.createElement(L["b"],{id:r,size:"medium",showTooltip:false}))),this.renderRowButton(n()({onClick:o},l)))}},{key:"renderMemberList",value:function e(){var t=this.state,r=t.searchResults,a=t.loading,n=t.updatedGroupMembers;if(a)return this.renderLoadingSpinner();if(this.doDisplayGroupMembersList())return this.renderList({items:n});if(Object(j["isEmpty"])(r))return this.renderEmptyList();return this.renderList({items:r})}},{key:"renderList",value:function e(t){var r=this;var a=t.items;var n=[].concat(a);var i=this.doDisplayGroupMembersList();var s=void 0;s=this.state.resultFocusIndex>-1?n[this.state.resultFocusIndex]:this.state.lastKnownResultFocusIndex>-1?n[this.state.lastKnownResultFocusIndex]:n[0];return g.a.createElement(E["a"],null,function(e){var t=e.width,o=e.height;return g.a.createElement(U["a"],{width:t,height:i?o-r.ADDED_MEMBERS_TITLE_HEIGHT:o,keys:n,ref:r.setListRef,rowRenderer:function e(t){return r.renderMemberRow({id:a[t],index:t})},itemToScroll:s,hideHiddenStopTabs:true})})}},{key:"renderEmptyList",value:function e(){if(!this.props.featureSonicUserGroups)return null;return g.a.createElement("div",{"data-qa-user-group-empty-list":true,className:"p-user_group_member_management__empty"},g.a.createElement("div",{className:"margin_top_100 margin_bottom_100"},ee.rt("No matches found for <strong>{searchQuery}</strong>",{searchQuery:this.state.searchQuery})),g.a.createElement(D["d"],{type:"outline",size:"small",onClick:this.onClearSearch},ee.t("Clear Search")))}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=O()("p-user_group_member_management__search",{"p-user_group_member_management__search--no_list_title":!this.doDisplayGroupMembersList()});return g.a.createElement("div",{className:t,"data-qa-user-group-member-management-search-container":true},g.a.createElement(F["a"],{className:"bold",text:ee.t("Add members"),"data-qa-user-group-member-management-search-label":true},g.a.createElement(B["a"],{placeholder:ee.t("Search by name"),icon:"search",autoFocus:true,"aria-controls":"user_group_member_management_list",onChange:this.onSearchInputChange,value:this.state.searchQuery,onFocus:this.onSearchInputFocusIn,onBlur:this.onSearchInputFocusOut,callOnFocusOnAutoFocus:true})))}},{key:"renderUserGroupMemberSelector",value:function e(){if(!this.props.featureSonicUserGroupsA11yRefactor)return null;var t=this.state.haveUpsertedExistingMembers;var r=this.props.groupId;return g.a.createElement("div",{className:"p-user_group_member_selector","data-qa-user-group-member-management-body":true},!r||t?g.a.createElement("div",null,this.maybeRenderNoMembersAlert(),g.a.createElement($,{groupId:this.props.groupId,onSelectedItemsChange:this.onSelectedItemsChange})):g.a.createElement("div",{className:"p-user_group_member_selector_loading_spinner_container"},this.renderLoadingSpinner()))}},{key:"render",value:function e(){if(this.props.featureSonicUserGroupsA11yRefactor)return this.renderUserGroupMemberSelector();return g.a.createElement("div",{className:"overflow_hidden","data-qa-user-group-member-management-body":true},this.maybeRenderNoMembersAlert(),this.renderSearch(),g.a.createElement("div",{className:"p-user_group_member_management__list",id:"user_group_member_management_list","aria-live":"polite"},this.renderMemberList()))}}]);return t}(b["PureComponent"]);ae.displayName="UserGroupMemberManagement";ae.defaultProps=re;var ne=function e(t,r){var a=r.groupId;var n=Object(I["e"])(t,a);var i=Object(M["g"])(n);return{featureSonicUserGroups:Object(A["isFeatureEnabled"])(t,"feature_sonic_user_groups"),featureSonicUserGroupsA11yRefactor:Object(A["isFeatureEnabled"])(t,"feature_sonic_user_groups_a11y_refactor"),userGroupMemberIds:i,teamId:Object(N["b"])(t),getMemberById:function e(r){return Object(T["d"])(t,r)}}};var ie={search:P["e"],fetchAndUpsertUserGroupMembers:w["i"]};var se=t["a"]=Object(k["connect"])(ne,ie,null,{withRef:true})(ae)},,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"a",function(){return l});var a=r(2);var n=r.n(a);var i=r(14);var s=Object(i["b"])(function(e,t){return!!(e&&e.topics&&e.topics[t]&&e.topics[t].desynced)});var o=Object(a["memoize"])(a["some"]);var l=Object(i["b"])(function(e){return o(e&&e.topics,function(e){return e.desynced})})},,,,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(530);var f=r(20);var b=Object(f["b"])("TS.generic_notification_banner.banner_to_show_sig.dispatch");var g=Object(f["b"])("TS.ui.banner.isDunningBanner",function(){return false});var _=Object(f["b"])("TS.ui.banner.show");var y=r(60);var O=r(3);var k=r.n(O);var E=r(1757);var j=r(35);var C=r(31);var S=r(10);var w=r(45);var I=r(21);var T=r(2);var A=r(16);var N=r.n(A);var P=r(1043);var R=r(28);var M=r(3207);var x=new S["b"]("notification_banner");var D={imgSrc:v["b"].string,imgAlt:v["b"].string,headerText:v["b"].node,bodyText:v["b"].node,bodyClass:v["b"].string,goButtonText:v["b"].string,goButtonClass:v["b"].string,onGo:v["b"].func,showGoButton:v["b"].bool,isLearnMoreButton:v["b"].bool,shouldCloseOnGo:v["b"].bool,cancelButtonText:v["b"].string,cancelButtonClass:v["b"].string,onCancel:v["b"].func,showCancelButton:v["b"].bool,alwaysHideBannerAfterCancel:v["b"].bool,showCloseIcon:v["b"].bool,onCloseIcon:v["b"].func,closeBanner:v["b"].func.isRequired,onCloseBanner:v["b"].func,bannerPrefs:v["b"].shape({countPref:v["b"].string.isRequired,tsPref:v["b"].string.isRequired,hidePref:v["b"].string})};var F={imgSrc:"",imgAlt:"",headerText:"",bodyText:"",bodyClass:"",goButtonText:"",goButtonClass:"",onGo:T["noop"],showGoButton:true,isLearnMoreButton:false,shouldCloseOnGo:true,cancelButtonText:void 0,cancelButtonClass:"",onCancel:T["noop"],showCancelButton:true,alwaysHideBannerAfterCancel:false,showCloseIcon:false,onCloseIcon:T["noop"],onCloseBanner:T["noop"],bannerPrefs:{}};var L=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["handleGoButton","handleCancelButton","handleCloseIcon"]);return r}s()(t,[{key:"closeBanner",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var r=this.props,a=r.onCloseBanner,n=r.bannerPrefs;this.props.closeBanner({bannerPrefs:n,alwaysHideBanner:t});a()}},{key:"handleGoButton",value:function e(){var t=this.props,r=t.onGo,a=t.shouldCloseOnGo;a&&this.closeBanner();r()}},{key:"handleCancelButton",value:function e(){var t=this.props,r=t.onCancel,a=t.alwaysHideBannerAfterCancel;this.closeBanner(a);r()}},{key:"handleCloseIcon",value:function e(){var t=this.props.onCloseIcon;this.closeBanner();t()}},{key:"renderHeader",value:function e(){var t=this.props,r=t.headerText,a=t.imgSrc,n=t.imgAlt;if(!r)return null;return p.a.createElement("h1",{className:"p-message_pane_banner__header"},a&&p.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},p.a.createElement("img",{src:a,alt:n,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),r)}},{key:"renderBody",value:function e(){var t=this.props,r=t.bodyText,a=t.bodyClass;if(!r)return null;var n=N()("p-message_pane_banner__body",a);return p.a.createElement("div",{className:n},r)}},{key:"renderGoButton",value:function e(){var t=this.props,r=t.goButtonText,a=t.goButtonClass,n=t.isLearnMoreButton;var i=n?x.t("Learn More"):x.t("Show Me");var s=N()("p-message_pane_banner__button ","p-message_pane_banner__button--go",a);return p.a.createElement(R["b"],{className:s,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},r||i)}},{key:"renderCancelButton",value:function e(){var t=this.props.cancelButtonClass;var r=N()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",t);var a=this.props.cancelButtonText||x.t("Skip for Now");return p.a.createElement(R["b"],{className:r,onClick:this.handleCancelButton,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},a)}},{key:"renderCloseIcon",value:function e(){return p.a.createElement(R["c"],{"aria-label":x.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},p.a.createElement(P["a"],{type:"times"}))}},{key:"render",value:function e(){var t=this.props,r=t.showGoButton,a=t.showCancelButton,n=t.showCloseIcon;return p.a.createElement("div",{className:"p-message_pane_banner"},this.renderHeader(),this.renderBody(),p.a.createElement("div",{className:"p-message_pane_banner__button_container"},a&&this.renderCancelButton(),r&&this.renderGoButton()),n&&this.renderCloseIcon())}}]);return t}(d["PureComponent"]);L.displayName="MessagePaneBanner";L.defaultProps=F;var B={closeBanner:h["closeBanner"]};var U=Object(m["connect"])(null,B)(L);var q=new S["b"]("client");var G="btn_show_me";var H="btn_close";var W={countPref:"activation_msg_limit_banner_cta_count",tsPref:"activation_msg_limit_banner_cta_last_ts"};var V=["keydown","mousedown","touchstart"];var K={team:v["b"].object.isRequired,clogger:v["b"].object.isRequired,totalUsers:v["b"].number.isRequired,totalChannels:v["b"].number.isRequired,messagesCount:v["b"].number.isRequired,teamName:v["b"].string.isRequired};var z=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.teamMenuEl=null;r.menuItemEls=null;r.limitMeterMenuItemEl=null;r.limitMeterInitialStyles=null;r.teamMenuInitialStyles=null;Object(E["a"])(r,["onGo","onClose","removeLimitMeterHighlight"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["w"].IMPRESSION})}},{key:"onGo",value:function e(){var t=this;this.clog({action:I["w"].CLICK,ui_properties:{element_type:I["k"].BUTTON,element_name:G}});var r=document.querySelector("#team-menu-trigger");if(!r){Object(C["openAuthenticatedUrlInBrowser"])(this.props.team,"/admin/stats");return}r.click();setTimeout(function(){t.addLimitMeterHighlight()},100)}},{key:"onClose",value:function e(){this.clog({action:I["w"].CLICK,ui_properties:{element_type:I["k"].BUTTON,element_name:H}})}},{key:"addLimitMeterHighlight",value:function e(){var t=this;this.teamMenuEl=document.querySelector(".p-classic_nav__team_menu");this.menuItemEls=document.getElementsByClassName("c-menu_item__li");var r=document.querySelector(".p-classic_nav__team_messages_limit_meter");this.limitMeterMenuItemEl=r&&r.closest(".c-menu_item__li");if(!this.teamMenuEl||!this.menuItemEls.length||!this.limitMeterMenuItemEl)return;this.limitMeterInitialStyles=this.limitMeterMenuItemEl.getAttribute("style");this.teamMenuInitialStyles=this.teamMenuEl.getAttribute("style");this.limitMeterMenuItemEl.style.boxShadow="0 0 0 99999px rgba(0, 0, 0, .4)";this.limitMeterMenuItemEl.style.position="relative";this.limitMeterMenuItemEl.style.zIndex=99999;this.teamMenuEl.style.overflow="visible";for(var a=0;a<this.menuItemEls.length;a++)this.menuItemEls.item(a).style.pointerEvents="none";this.limitMeterMenuItemEl.style.pointerEvents="auto";V.forEach(function(e){document.addEventListener(e,t.removeLimitMeterHighlight)})}},{key:"removeLimitMeterHighlight",value:function e(){var t=this;this.teamMenuEl.setAttribute("style",this.teamMenuInitialStyles);this.limitMeterMenuItemEl.setAttribute("style",this.limitMeterInitialStyles);for(var r=0;r<this.menuItemEls.length;r++)this.menuItemEls.item(r).style.pointerEvents="auto";V.forEach(function(e){document.removeEventListener(e,t.removeLimitMeterHighlight)})}},{key:"clog",value:function e(t){var r=this.props,a=r.clogger,n=r.messagesCount,i=r.totalUsers,s=r.totalChannels;var o=k()({step:I["A"].BANNER_ACTIVATION_MSG_LIMIT},t);a.track(I["l"].UPGRDEXP_MSG_LIM_ACTIVATION_BANNER,{limit_meter_messages_count:n,num_members_minus_bots:i,num_of_channels:s,contexts:{ui_context:o}})}},{key:"render",value:function e(){var t=this.props,r=t.totalUsers,a=t.totalChannels,n=t.messagesCount,i=t.teamName;var s=q.t("{name_of_workspace} is on a roll",{name_of_workspace:Object(S["o"])(i)});var o=q.rt("Your team\u2019s now <b>{num_of_members} members</b> strong, with <b>{num_of_messages} messages</b> sent across <b>{num_of_channels} channels</b>. You can track your team\u2019s progress via the main menu.",{num_of_members:r,num_of_messages:n,num_of_channels:a});var l=q.t("Show Me");return p.a.createElement(U,{headerText:s,bodyText:o,goButtonText:l,onGo:this.onGo,showCancelButton:false,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:W})}}]);return t}(d["PureComponent"]);z.displayName="ActivationMsgLimitBanner";var Q=function e(t){return{team:Object(j["d"])(t),clogger:Object(w["a"])({state:t})}};var Y=Object(m["connect"])(Q)(z);var J=r(34);var X=r(794);var Z=r(30);var $=r(51);var ee=new S["b"]("send_btn");var te={closeBanner:v["b"].func.isRequired,hasSendButton:v["b"].bool.isRequired,sendButtonAutoSet:v["b"].bool.isRequired,clogger:v["b"].object.isRequired,openPrefsModal:v["b"].func.isRequired};var re={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"};var ae=258;var ne="I18N_BANNER";var ie=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPrefLinkClick=r.onPrefLinkClick.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(ne,{contexts:{ui_context:{step:ae,action:"impression"}}})}},{key:"componentWillUpdate",value:function e(t){var r=this.props,a=r.hasSendButton,n=r.sendButtonAutoSet;n===t.sendButtonAutoSet&&a===t.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function e(){var t=this.props.clogger;t.track(ne,{contexts:{ui_context:{step:ae,action:"click",ui_element:"prefs_button"}}});this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"});this.props.closeBanner()}},{key:"renderBodyText",value:function e(){var t=this;return p.a.createElement("div",null,ee.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return p.a.createElement("div",{className:"inline_block"},p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(Z["isMac"])()?"\u2318":"Ctrl"),p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),p.a.createElement("br",null),ee.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(e){var r=e.text;return p.a.createElement($["a"],{onClick:t.onPrefLinkClick},r)}))}},{key:"render",value:function e(){var t=ee.t("Just for Japan: a button for sending");var r=ee.t("Got It");var a="p-message_pane_banner__body--taller-line-height";return p.a.createElement(U,{headerText:t,bodyText:this.renderBodyText(),bodyClass:a,goButtonText:r,showCancelButton:false,showCloseIcon:true,bannerPrefs:re})}}]);return t}(d["PureComponent"]);ie.displayName="I18nJapanBetaSendBtnBanner";var se=function e(t){return{hasSendButton:Object(J["g"])(t,"msg_input_send_btn"),sendButtonAutoSet:Object(J["g"])(t,"msg_input_send_btn_auto_set"),clogger:Object(w["a"])({state:t})}};function oe(e){return{closeBanner:h["closeBanner"],openPrefsModal:function t(){return e(X["a"].apply(void 0,arguments))}}}var le={CLOG_STEP:ae,CLOG_EVENT_ID:ne};var ce=Object(m["connect"])(se,oe)(ie);var ue=r(4597);var de=r(4);var pe=r(122);var ve=new S["b"]("notification_banner");var me={countPref:"local_discount_awareness_banner_cta_count",tsPref:"local_discount_awareness_banner_cta_last_ts",hidePref:"local_discount_awareness_banner_cta_hide"};var he=I["A"].BANNER_LOCAL_DISCOUNT_AWARENESS_BANNER;var fe="pricing?ui_element="+I["z"].PRICING_BUTTON+"&ui_step="+he;var be={discountPercent:v["b"].number.isRequired,showPricingPlans:v["b"].func.isRequired,country:v["b"].string.isRequired,clogger:v["b"].object.isRequired,featureLocalDiscountAwareness:v["b"].bool.isRequired,localDiscountAwarenessExperiment:v["b"].string.isRequired};var ge=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseIcon","onCancel"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["w"].IMPRESSION,ui_properties:{element_type:I["k"].BANNER,element_name:"local_discount_awareness_banner"}})}},{key:"onGo",value:function e(){this.clog({action:I["w"].CLICK,ui_element:I["z"].PRICING_BUTTON,is_primary_cta:true,ui_properties:{element_type:I["k"].BUTTON,element_name:"pricing_button"}},true);this.props.showPricingPlans({pricingPlansPageUrl:fe,source:"local_discount_awareness_banner"})}},{key:"onCancel",value:function e(){this.clog({action:I["w"].CLOSE,ui_element:I["z"].SKIP_FOR_NOW_BUTTON,ui_properties:{element_type:I["k"].BUTTON,element_name:"skip_for_now_button"}})}},{key:"onCloseIcon",value:function e(){this.clog({action:I["w"].CLOSE,ui_element:I["z"].BTN_CLOSE,ui_properties:{element_type:I["k"].X,element_name:"btn_close"}})}},{key:"getContent",value:function e(){var t=this.props,r=t.discountPercent,a=t.country,n=t.featureLocalDiscountAwareness,i=t.localDiscountAwarenessExperiment;var s=N()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--"+a.toLowerCase());if(n){var o=p.a.createElement("div",null,p.a.createElement("div",{className:s}),"treatment1"===i?ve.rt("Get a {discountPercent}% discount on a paid plan",{discountPercent:r}):ve.rt("Upgrade to access paid features \u2014 at {discountPercent}% off",{discountPercent:r}));return{headerText:o,bodyText:ve.rt("For a limited time, teams in {country} can get {discountPercent}% off when upgrading to a paid plan. Once you upgrade, your team will be able to see and search all past messages and files, add guests to your workspace, and more.",{country:ue["a"][a].name,discountPercent:r}),cancelButtonText:ve.t("Not Now"),goButtonText:ve.t("See Upgrade Options")}}return null}},{key:"clog",value:function e(t,r){var a=this.props.clogger;var n=Object(T["defaults"])(t,{step:he});a.track(I["l"].GROWTH_LOCAL_DISCOUNT,{contexts:{ui_context:n}});r&&a.track(I["l"].GROWTH_PRICING,{contexts:{ui_context:n}})}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{headerText:t.headerText,bodyClass:"p-message_pane_banner__body--widest-text",bodyText:t.bodyText,cancelButtonText:t.cancelButtonText,goButtonText:t.goButtonText,showCloseIcon:true,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:me})}}]);return t}(d["PureComponent"]);ge.displayName="LocalDiscountAwarenessBanner";var _e=function e(t){return{clogger:Object(w["a"])({state:t}),featureLocalDiscountAwareness:Object(de["isFeatureEnabled"])(t,"feature_local_discount_awareness"),localDiscountAwarenessExperiment:Object(pe["getGroupForUser"])(t,"local_discount_awareness")}};var ye={showPricingPlans:h["showPricingPlans"]};var Oe=Object(m["connect"])(_e,ye)(ge);var ke=r(73);var Ee=r(19);var je=r(11);var Ce=r(512);var Se={isSharedChannel:v["b"].bool,sharedTeamNames:v["b"].arrayOf(v["b"].node),bannerPrefs:v["b"].shape({countPref:v["b"].string,tsPref:v["b"].string}).isRequired,clogStep:v["b"].number.isRequired,clogEvent:v["b"].number.isRequired,onGoUrl:v["b"].string.isRequired,goButtonText:v["b"].string.isRequired,headerText:v["b"].node.isRequired,renderBodyText:v["b"].func.isRequired,clogger:v["b"].object.isRequired,team:v["b"].object.isRequired,bodyClass:v["b"].string};var we={isSharedChannel:false,sharedTeamNames:[],bodyClass:""};var Ie=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseIcon","renderBodyText"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["w"].IMPRESSION})}},{key:"onGo",value:function e(){var t=this.props,r=t.onGoUrl,a=t.team;this.clog({action:I["w"].CLICK,ui_properties:{element_type:I["k"].BUTTON,element_name:"upgrade"}});Object(C["openAuthenticatedUrlInBrowser"])(a,r)}},{key:"onCloseIcon",value:function e(){this.clog({action:I["w"].CLICK,ui_properties:{element_type:I["k"].BUTTON,element_name:"close"}})}},{key:"clog",value:function e(t){var r=this.props,a=r.clogStep,n=r.clogEvent,i=r.clogger;var s=[I["l"].GROWTH_PRICING,n];var o=k()({step:a},t);s.forEach(function(e){i.track(e,{contexts:{ui_context:o}})})}},{key:"renderBodyText",value:function e(){var t=this.props,e=t.renderBodyText,r=t.sharedTeamNames;return e(r)}},{key:"render",value:function e(){var t=this.props,r=t.isSharedChannel,a=t.headerText,n=t.goButtonText,i=t.bannerPrefs,s=t.bodyClass;if(!r)return null;return p.a.createElement(U,{headerText:a,bodyText:this.renderBodyText(),goButtonText:n,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:i,bodyClass:s})}}]);return t}(d["PureComponent"]);Ie.displayName="EscTrialBanner";Ie.defaultProps=we;var Te=function e(t){var r=Object(ke["a"])(t);var a=Object(Ee["d"])(t,r);var n=Object(je["isExternallySharedChannel"])(a);var i=[];if(n){var s=Object(je["getPendingAndConnectedTeamIds"])(t,a);Object(T["isEmpty"])(s)||(i=Object(T["map"])(s,function(e){var r=Object(j["j"])(t,e);return Object(C["isUnknown"])(r)?p.a.createElement(Ce["a"],{type:"unknown"}):Object(C["getTeamDisplayName"])(r)}))}return{isSharedChannel:n,sharedTeamNames:i,clogger:Object(w["a"])({state:t}),team:Object(j["d"])(t)}};var Ae=Object(m["connect"])(Te)(Ie);var Ne=new S["b"]("trial_expiration_banners");var Pe={numDaysLeft:v["b"].number.isRequired,expirationDate:v["b"].string.isRequired};var Re={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var Me="admin/billing";var xe=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["renderBodyText","renderHeaderText"]);return r}s()(t,[{key:"renderBodyText",value:function e(t){var r=this.props.expirationDate;var a=Object(S["g"])(t,{noEscape:true,react:true});return Ne.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:r,shared_team_name:a})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return Ne.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=Ne.t("Upgrade Now");return p.a.createElement(Ae,{bannerPrefs:Re,clogStep:I["A"].BANNER_SHARED_CHANNELS_TRIAL_TWO_WEEK_REMINDER,clogEvent:I["l"].UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:Me,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);xe.displayName="TwoWeeksLeftEscTrialBanner";var De={LEARN_MORE_URL:Me};var Fe=xe;var Le=new S["b"]("trial_expiration_banners");var Be={numDaysLeft:v["b"].number.isRequired,expirationDate:v["b"].string.isRequired};var Ue={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var qe="admin/billing";var Ge=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["renderBodyText","renderHeaderText"]);return r}s()(t,[{key:"renderBodyText",value:function e(t){var r=this.props.expirationDate;var a=Object(S["g"])(t,{noEscape:true,react:true});return Le.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before <span>{expiration_date}.</span>",{expiration_date:r,shared_team_name:a,fallbackHash:"decd823ab360b2e8c20d6fbcd615ae1c1c450d9e"},function(e){var t=e.text,r=e.tag;if("b"===r)return p.a.createElement("strong",{className:"sk_warning_red"},t);return p.a.createElement("span",{className:"nowrap"},t)})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return Le.t("Only {num_of_days} days left on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=Le.t("Upgrade Now");return p.a.createElement(Ae,{bannerPrefs:Ue,clogStep:I["A"].BANNER_SHARED_CHANNELS_TRIAL_ONE_WEEK_REMINDER,clogEvent:I["l"].UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:qe,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);Ge.displayName="OneWeekLeftEscTrialBanner";var He={LEARN_MORE_URL:qe};var We=Ge;var Ve=r(92);var Ke=new S["b"]("trial_expiration_banners");var ze={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"};var Qe={expirationDate:v["b"].string.isRequired,productId:v["b"].string.isRequired};var Ye=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["renderBodyText"]);return r}s()(t,[{key:"renderBodyText",value:function e(t){return Ke.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(S["g"])(t,{noEscape:true,react:true})})}},{key:"render",value:function e(){var t=this.props.productId;return p.a.createElement(Ae,{bannerPrefs:ze,clogStep:I["A"].BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:Ve["a"]+"?s=1&p="+t+"&entry_point=three_days_left_esc_trial_banner",clogEvent:I["l"].GROWTH_PLANS_PAGE_TRIALS,goButtonText:Ke.t("Upgrade Now"),headerText:Ke.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"})}}]);return t}(d["PureComponent"]);Ye.displayName="ThreeDaysLeftEscTrialBanner";var Je=Ye;var Xe=new S["b"]("trial_expiration_banners");var Ze="upgrade";var $e="close";var et={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"};var tt={clogger:v["b"].object.isRequired,team:v["b"].object.isRequired,expirationDate:v["b"].string.isRequired,productId:v["b"].string.isRequired};var rt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onClose"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["w"].IMPRESSION})}},{key:"onGo",value:function e(){var t=this.props,r=t.team,a=t.productId;this.clog({action:I["w"].CLICK,ui_properties:{element_type:I["k"].BUTTON,element_name:Ze}});Object(C["openAuthenticatedUrlInBrowser"])(r,Ve["a"]+"?s=1&p="+a+"&entry_point=three_days_left_trial_banner")}},{key:"onClose",value:function e(){this.clog({action:I["w"].CLICK,ui_properties:{element_type:I["k"].BUTTON,element_name:$e}})}},{key:"clog",value:function e(t){var r=this.props.clogger;var a=k()({step:I["A"].BANNER_TRIAL_THREE_DAY_REMINDER},t);r.track(I["l"].GROWTH_PLANS_PAGE_TRIALS,{contexts:{ui_context:a}})}},{key:"render",value:function e(){var t=this.props,r=t.team,a=t.expirationDate;var n=Object(C["isOnStandardPlan"])(r)?Xe.t("Standard"):Xe.t("Plus");var i=Xe.t("Your free trial ends soon");var s=Xe.rt("Your workspace\u2019s trial of our <b>{plan_level} plan</b> only lasts through <b>{expiration_date}</b>. Upgrade to a paid plan to keep your access to features like unlimited messages and files, guest accounts, and more when your trial ends.",{plan_level:n,expiration_date:a});var o=Xe.t("Upgrade Now");return p.a.createElement(U,{headerText:i,bodyText:s,goButtonText:o,onGo:this.onGo,showCancelButton:false,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:et})}}]);return t}(d["PureComponent"]);rt.displayName="ThreeDaysLeftTrialBanner";var at=function e(t){return{team:Object(j["d"])(t),clogger:Object(w["a"])({state:t})}};var nt=Object(m["connect"])(at)(rt);var it=new S["b"]("free_trial_banners");var st={clogger:v["b"].object.isRequired,team:v["b"].object.isRequired};var ot={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"};var lt=205;var ct="UPGRDEXP_FREE_TRIAL_IN_PROD";var ut="trial";var dt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseIcon"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(ct,{contexts:{ui_context:{step:lt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.clogger,a=t.team;r.track(ct,{contexts:{ui_context:{step:lt,action:"click",ui_element:"learn_more_btn"}}});Object(C["openAuthenticatedUrlInBrowser"])(a,ut)}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(ct,{contexts:{ui_context:{step:lt,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){return{headerText:it.t("Start your free trial of the Standard plan"),bodyText:it.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function e(){var t=this.getContent();if(Object(T["isEmpty"])(t))return null;return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:ot})}}]);return t}(d["PureComponent"]);dt.displayName="InProdTrialMessagePaneBanner";var pt=function e(t){return{clogger:Object(w["a"])({state:t}),team:Object(j["d"])(t)}};var vt=Object(m["connect"])(pt)(dt);var mt=new S["b"]("free_trial_banners");var ht={expirationDate:v["b"].string.isRequired,clogger:v["b"].object.isRequired,team:v["b"].object.isRequired};var ft={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"};var bt=207;var gt="UPGRDEXP_FREE_TRIAL_IN_PROD";var _t="trial";var yt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseIcon"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(gt,{contexts:{ui_context:{step:bt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.clogger,a=t.team;r.track(gt,{contexts:{ui_context:{step:bt,action:"click",ui_element:"learn_more_btn"}}});Object(C["openAuthenticatedUrlInBrowser"])(a,_t)}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(gt,{contexts:{ui_context:{step:bt,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){var t=this.props.expirationDate;return{headerText:mt.t("Your free trial offer is about to expire"),bodyText:mt.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:t})}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:ft})}}]);return t}(d["PureComponent"]);yt.displayName="InProdTrialReminderBanner";var Ot=function e(t){return{clogger:Object(w["a"])({state:t}),team:Object(j["d"])(t)}};var kt=Object(m["connect"])(Ot)(yt);var Et=r(100);var jt=new S["b"]("notification_banner");var Ct={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"};var St=200;var wt="UPGRDEXP_ENFORCE_FILE_LIMITS";var It="pricing?ui_element=11&ui_step="+St;var Tt={team:v["b"].object.isRequired,userId:v["b"].string.isRequired,closeBanner:v["b"].func.isRequired,showFileList:v["b"].func.isRequired,showPricingPlans:v["b"].func.isRequired,clogger:v["b"].object.isRequired};var At=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(wt,{contexts:{ui_context:{step:St,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(wt,{contexts:{ui_context:{step:St,action:"click",ui_element:"pricing_button"}}});t.track("GROWTH_PRICING",{contexts:{ui_context:{step:St,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:It,source:"approaching_file_limit_banner"})}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(wt,{contexts:{ui_context:{step:St,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function e(){var t=this.props,r=t.userId,a=t.clogger;this.props.closeBanner({bannerPrefs:Ct});this.props.showFileList({user:r});a.track(wt,{contexts:{ui_context:{step:St,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function e(){var t=this.props.team;return jt.rt("{name_of_workspace} is almost out of space",{name_of_workspace:t.name})}},{key:"getBodyText",value:function e(){return jt.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}},{key:"render",value:function e(){var t=jt.t("See Plans");return p.a.createElement(U,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:t,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ct})}}]);return t}(d["PureComponent"]);At.displayName="ApproachingFileLimitBanner";var Nt=function e(t){return{team:Object(j["d"])(t),userId:Object(de["getCurrentUserId"])(t),clogger:Object(w["a"])({state:t})}};var Pt={closeBanner:h["closeBanner"],showFileList:Et["g"],showPricingPlans:h["showPricingPlans"]};var Rt=Object(m["connect"])(Nt,Pt)(At);var Mt=new S["b"]("client");var xt={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"};var Dt=63;var Ft="GROWTH_PRICING";var Lt="pricing?ui_element=11&ui_step="+Dt;var Bt={messagesCount:v["b"].number.isRequired,clogger:v["b"].object.isRequired,showPricingPlans:v["b"].func.isRequired};var Ut=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(Ft,{limit_meter_messages_count:r,contexts:{ui_context:{step:Dt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(Ft,{limit_meter_messages_count:r,contexts:{ui_context:{step:Dt,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Lt,source:"approaching_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(Ft,{limit_meter_messages_count:r,contexts:{ui_context:{step:Dt,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:Mt.t("Unlock unlimited messages for your team"),bodyText:Mt.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:xt})}}]);return t}(d["PureComponent"]);Ut.displayName="ApproachingMsgLimitBanner";var qt=function e(t){return{clogger:Object(w["a"])({state:t})}};var Gt={showPricingPlans:h["showPricingPlans"]};var Ht=Object(m["connect"])(qt,Gt)(Ut);var Wt=new S["b"]("client");var Vt={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"};var Kt=64;var zt="GROWTH_PRICING";var Qt="pricing?ui_element=11&ui_step="+Kt;var Yt={messagesCount:v["b"].number.isRequired,clogger:v["b"].object.isRequired,showPricingPlans:v["b"].func.isRequired};var Jt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(zt,{limit_meter_messages_count:r,contexts:{ui_context:{step:Kt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(zt,{limit_meter_messages_count:r,contexts:{ui_context:{step:Kt,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Qt,source:"just_reached_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(zt,{limit_meter_messages_count:r,contexts:{ui_context:{step:Kt,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getCancelButtonText",value:function e(){return Wt.t("Not Now")}},{key:"getContent",value:function e(){return{headerText:Wt.t("You\u2019ve just reached the 10k message limit"),bodyText:Wt.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Vt,cancelButtonText:this.getCancelButtonText()})}}]);return t}(d["PureComponent"]);Jt.displayName="JustReachedMsgLimitBanner";var Xt=function e(t){return{clogger:Object(w["a"])({state:t})}};var Zt={showPricingPlans:h["showPricingPlans"]};var $t=Object(m["connect"])(Xt,Zt)(Jt);var er=r(688);var tr=new S["b"]("client");var rr={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"};var ar=65;var nr="GROWTH_PRICING";var ir="pricing?ui_element=11&ui_step="+ar;var sr={messagesCount:v["b"].number.isRequired,clogger:v["b"].object.isRequired,showPricingPlans:v["b"].func.isRequired};var or=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(nr,{limit_meter_messages_count:r,contexts:{ui_context:{step:ar,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(nr,{limit_meter_messages_count:r,contexts:{ui_context:{step:ar,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:ir,source:"thirty_days_after_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,r=t.messagesCount,a=t.clogger;a.track(nr,{limit_meter_messages_count:r,contexts:{ui_context:{step:ar,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){var t=this.props.messagesCount;var r=t-1e4;var a=this.roundNumOfMsgsBeyondLimit(r);if(!a||a<0)return null;return{headerText:tr.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:a}),bodyText:tr.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. Upgrade to a paid plan for access to your full history \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:a})}}},{key:"roundNumOfMsgsBeyondLimit",value:function e(t){if(t>9&&t<100)return 10*Math.floor(t/10);if(t>=100&&t<=999999){var r=100*Math.floor(t/100);return Object(S["l"])(r)}if(t>999999)return Object(er["a"])(t);return t}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:rr})}}]);return t}(d["PureComponent"]);or.displayName="ThirtyDaysAfterMsgLimitBanner";var lr=function e(t){return{clogger:Object(w["a"])({state:t})}};var cr={showPricingPlans:h["showPricingPlans"]};var ur=Object(m["connect"])(lr,cr)(or);var dr=r(12);var pr=r(38);var vr=r(23);var mr=r(48);var hr=r(232);var fr=r(24);var br=r(3952);var gr=r(1094);var _r=r(508);var yr=r(2276);var Or=r(4195);var kr=new S["b"]("team_creation");var Er={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"};var jr="team_creation_dialog_mount_point";var Cr={clogger:v["b"].object.isRequired,logger:v["b"].object.isRequired,teamId:v["b"].string.isRequired,hasInvited:v["b"].bool,workflow:v["b"].object,activeWorkflowTask:v["b"].string,completeWorkflowTask:v["b"].func,nonBotMembersCount:v["b"].number.isRequired,openTeamCreatorOnboardingDialog:v["b"].func,currentChannelId:v["b"].string,showSecondBanner:v["b"].func,openInviteDialog:v["b"].func};var Sr={hasInvited:false,workflow:null,activeWorkflowTask:"",completeWorkflowTask:T["noop"],openTeamCreatorOnboardingDialog:T["noop"],currentChannelId:"",showSecondBanner:T["noop"],openInviteDialog:T["noop"]};var wr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["openInviteDialog","openTeamCreatorDialog"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.activeWorkflowTask;this.loadFirstImageForDialog();"start_team_creator_account_setup"===t&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"});this.clogBannerChanges({action:"impression"})}},{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.activeWorkflowTask,n=r.currentChannelId,i=r.showSecondBanner;a!==t.activeWorkflowTask&&this.clogBannerChanges({action:"impression"});n!==t.currentChannelId&&i()}},{key:"openInviteDialog",value:function e(){var e=this.props.openInviteDialog;this.clogBannerChanges({action:"click",ui_element:I["z"].BANNER_TRACTOR_PRIMARY_CTA});if(Object(pr["a"])())return e();return Object(gr["a"])({source:"team_creation_account_setup_banner"})}},{key:"openTeamCreatorDialog",value:function e(){var t=this.props,r=t.teamId,a=t.openTeamCreatorOnboardingDialog;this.clogBannerChanges({action:"click",ui_element:I["z"].BANNER_TRACTOR_PRIMARY_CTA});if(Object(pr["a"])())return a();return Object(br["a"])(r,document.getElementById(jr))}},{key:"clogBannerChanges",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.props,a=r.activeWorkflowTask,n=r.clogger;var i=a;"start_team_creator_account_setup"!==a&&"complete_team_creator_account_setup"!==a&&(i="invite_team_creator_account_setup");n.track(I["l"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:k()({},t,{step:_r["a"][i]})}})}},{key:"loadFirstImageForDialog",value:function e(){var t=new Image;var r=new Image;t.src=_r["b"].profile;r.src=_r["b"].profile.replace(".png","@2x.png")}},{key:"render",value:function e(){var t=this.props,r=t.hasInvited,a=t.workflow,n=t.activeWorkflowTask;if(null===a||"completed"===a.state&&(r||this.props.nonBotMembersCount>1))return null;var i={bodyClass:"p-message_pane_banner__body--wider-text",showCancelButton:false,bannerPrefs:Er,shouldCloseOnGo:false};if("start_team_creator_account_setup"===n){var s=r?kr.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):kr.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return p.a.createElement(U,k()({},i,{headerText:kr.t("Here it is! The first channel in your team\u2019s Slack workspace"),bodyText:s,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/08b1d/img/tractor/banners/first_setup@2x.png",goButtonText:kr.t("Finish Signing Up")}))}if("complete_team_creator_account_setup"===n){var o=r?kr.t("To see what teamwork is like in Slack, take a moment to save your account."):kr.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return p.a.createElement(U,k()({},i,{headerText:kr.t("Save your account and start collaborating"),bodyText:o,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/08b1d/img/tractor/banners/second_setup@2x.png",goButtonText:kr.t("Finish Signing Up")}))}if(!r)return p.a.createElement(U,k()({},i,{headerText:kr.t("Bring your team into Slack"),bodyText:kr.t("Slack is better with teammates \u2013 invite them to start collaborating."),onGo:this.openInviteDialog,imgSrc:cdn_url+"/08b1d/img/tractor/banners/invite_others@2x.png",goButtonText:kr.t("Add People")}));return null}}]);return t}(d["PureComponent"]);wr.displayName="TeamCreationAccountSetupBanner";wr.defaultProps=Sr;var Ir=function e(t){var r=Object(ke["a"])(t);var a=false;var n=r&&Object(Ee["d"])(t,r,a);var i=Object(je["isChannel"])(n)?r:"";return{clogger:Object(w["a"])({state:t}),logger:Object(dr["a"])({state:t}),teamId:Object(vr["b"])(t),hasInvited:Object(J["g"])(t,"has_invited"),workflow:Object(hr["getWorkflow"])(t),activeWorkflowTask:Object(hr["getActiveWorkflowTask"])(t),nonBotMembersCount:Object(T["size"])(Object(T["filter"])(Object(fr["a"])(t),function(e){return!e.is_bot&&!e.is_slackbot})),currentChannelId:i}};var Tr=function e(t){return{completeWorkflowTask:function e(){return t(hr["completeWorkflowTask"].apply(void 0,arguments))},showSecondBanner:function e(){return t(hr["showSecondAccountSetupBanner"].apply(void 0,arguments))},openTeamCreatorOnboardingDialog:function e(){t(Object(mr["openModal"])({element:p.a.createElement(yr["a"]),name:"team-creator-onboarding-dialog"}))},openInviteDialog:function e(){return t(Or["a"].apply(void 0,arguments))}}};var Ar=Object(m["connect"])(Ir,Tr)(wr);var Nr=new S["b"]("paid_benefits_banners");var Pr={clogger:v["b"].object.isRequired,team:v["b"].object.isRequired};var Rr={};var Mr={countPref:"paid_benefits_banner_cta_count",tsPref:"paid_benefits_banner_cta_last_ts"};var xr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCancel","onCloseIcon"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.clogger.track(I["l"].GROWTH_PRICING,{contexts:{ui_context:{step:I["A"].BANNER_PAID_BENEFITS_AWARENESS,action:I["w"].IMPRESSION}}})}},{key:"onGo",value:function e(){this.clogClick("learn_more");Object(C["openAuthenticatedUrlInBrowser"])(this.props.team,"benefits/standard?entry_point=paid_benefits_awareness_banner")}},{key:"onCancel",value:function e(){this.clogClick("not_now")}},{key:"onCloseIcon",value:function e(){this.clogClick("close")}},{key:"getContent",value:function e(){return{headerText:Nr.t("See all that Slack has to offer"),bodyText:Nr.t("Discover what more your Slack team can do with a paid plan \u2014 including searching unlimited messages, installing unlimited apps, making group calls, and more."),cancelButtonText:Nr.t("Not Now")}}},{key:"clogClick",value:function e(t){this.props.clogger.track(I["l"].GROWTH_PRICING,{contexts:{ui_context:{step:I["A"].BANNER_PAID_BENEFITS_AWARENESS,action:I["w"].CLICK,ui_properties:{element_type:I["k"].BUTTON,element_name:t}}}})}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:t.headerText,bodyText:t.bodyText,cancelButtonText:t.cancelButtonText,showCloseIcon:true,isLearnMoreButton:true,shouldCloseOnGo:false,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:Mr})}}]);return t}(d["PureComponent"]);xr.displayName="PaidBenefitsAwarenessBanner";xr.defaultProps=Rr;var Dr=function e(t){return{clogger:Object(w["a"])({state:t}),team:Object(j["d"])(t)}};var Fr=Object(m["connect"])(Dr)(xr);var Lr={bannerName:v["b"].string,bannerData:v["b"].object,throttledLoadBanner:v["b"].func.isRequired};var Br={bannerName:"",bannerData:{}};var Ur=function e(t){var r=t.bannerData;return p.a.createElement(Y,{totalUsers:r.total_users,totalChannels:r.total_channels,messagesCount:r.messages_count,teamName:r.team_name})};Ur.displayName="renderActivationMsgLimitBanner";var qr=function e(){return p.a.createElement(ce,null)};qr.displayName="renderI18nJapanBetaSendBtnBanner";var Gr=function e(t){var r=t.bannerData;return p.a.createElement(Oe,{discountPercent:r.discount_pct,country:r.country})};Gr.displayName="renderLocalDiscountAwarenessBanner";var Hr=function e(t){var r=t.bannerData;return p.a.createElement(Fe,{numDaysLeft:r.no_of_days_left,expirationDate:r.pay_date_next})};Hr.displayName="renderTwoWeeksLeftEscTrialBanner";var Wr=function e(t){var r=t.bannerData;return p.a.createElement(We,{numDaysLeft:r.no_of_days_left,expirationDate:r.pay_date_next})};Wr.displayName="renderOneWeekLeftEscTrialBanner";var Vr=function e(t){var r=t.bannerData;return p.a.createElement(Je,{expirationDate:r.pay_date_next,productId:r.product_id})};Vr.displayName="renderThreeDaysLeftEscTrialBanner";var Kr=function e(t){var r=t.bannerData;return p.a.createElement(nt,{expirationDate:r.pay_date_next,productId:r.product_id})};Kr.displayName="renderThreeDaysLeftTrialBanner";var zr=function e(){return p.a.createElement(Rt,null)};zr.displayName="renderApproachingFileLimitBanner";var Qr=function e(t){var r=t.bannerData;return p.a.createElement(vt,{numMsgs:r.messages_count_abbrev})};Qr.displayName="renderInProdTrialBanner";var Yr=function e(t){var r=t.bannerData;return p.a.createElement(kt,{expirationDate:r.expiration_date})};Yr.displayName="renderInProdTrialReminderBanner";var Jr=function e(t){var r=t.bannerData;return p.a.createElement(Ht,{messagesCount:r.messages_count})};Jr.displayName="renderApproachingMsgLimitBanner";var Xr=function e(t){var r=t.bannerData;return p.a.createElement($t,{messagesCount:r.messages_count})};Xr.displayName="renderJustReachedMsgLimitBanner";var Zr=function e(t){var r=t.bannerData;return p.a.createElement(ur,{messagesCount:r.messages_count})};Zr.displayName="renderThirtyDaysAfterMsgLimitBanner";var $r=function e(){return p.a.createElement(Ar,null)};$r.displayName="renderTeamCreationAccountSetupBanner";var ea=function e(){return p.a.createElement(Fr,null)};ea.displayName="renderPaidBenefitsAwarenessBanner";var ta={activation_msg_limit_banner:Ur,i18n_japan_beta_send_btn_banner:qr,local_discount_awareness_banner:Gr,two_weeks_left_esc_trial_banner:Hr,one_week_left_esc_trial_banner:Wr,three_days_left_esc_trial_banner:Vr,three_days_left_trial_banner:Kr,in_prod_trial_banner:Qr,in_prod_trial_reminder_banner:Yr,approaching_file_limit_banner:zr,approaching_msg_limit_banner:Jr,just_reached_msg_limit_banner:Xr,thirty_days_after_msg_limit_banner:Zr,team_creation_account_setup_banner:$r,paid_benefits_awareness_banner:ea};var ra=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){var t=this.parseUrlDebugArgs();this.props.throttledLoadBanner(t)}},{key:"parseUrlDebugArgs",value:function e(){var t=Object(y["urlQueryStringParse"])(window.location);var r={};if(t.banner_type){r.qa_banner_type=t.banner_type;r.qa_banner_data={};Object.keys(t).forEach(function(e){var a=e.split("banner_data_")[1];if(a){var n=parseInt(t[e],10);isNaN(n)&&(n=t[e]);r.qa_banner_data[a]=n}});r.qa_banner_data=JSON.stringify(r.qa_banner_data)}return r}},{key:"render",value:function e(){var t=this.props,r=t.bannerName,a=t.bannerData;if(!r)return null;if(g(r)){_(r,a);return null}var n=ta[r];if(!n){b({name:r,data:a});return null}return n({bannerData:a})}}]);return t}(d["PureComponent"]);ra.displayName="MessagePaneBannerContainer";ra.defaultProps=Br;var aa=function e(t){return{bannerName:Object(h["getMessagePaneBannerName"])(t),bannerData:Object(h["getMessagePaneBannerData"])(t)}};var na={throttledLoadBanner:h["throttledLoadBanner"]};var ia=t["a"]=Object(m["connect"])(aa,na)(ra)},,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setPaidFeatures",function(){return v});r.d(t,"getPaidFeatures",function(){return f});r.d(t,"isFeaturePurchased",function(){return b});r.d(t,"isEKMPurchased",function(){return g});var a=r(5);var n=r.n(a);var i=r(26);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=r(2);var p=r.n(d);var v=Object(l["b"])("Store the paid features in redux.");v.propTypes=o["b"].arrayOf(o["b"].string);var m=[];var h=Object(c["b"])(n()({},v,function(e,t){if(!Array.isArray(t)||Object(d["isEqual"])([].concat(s()(t)).sort(),[].concat(s()(e)).sort()))return e;return[].concat(s()(t))}),m,{persistenceEnabled:true});h.propTypes=o["b"].arrayOf(o["b"].string);t["default"]=h;var f=Object(u["b"])(function(e){return e&&e.paidFeatures});var b=Object(u["b"])(function(e,t){return e&&e.paidFeatures&&-1!==e.paidFeatures.indexOf(t)});var g=Object(u["b"])(function(e){return b(e,"ekm")})},,,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(2);var l=r(47);var c=r(4);var u=r(302);var d=r(840);var p=r(3);var v=r.n(p);var m=r(0);var h=r(25);var f=r(29);var b=r(49);var g=["apps_uninstalled","channel_deleted","channel_rename","channel_history_changed","commands_changed","email_shared","emoji_changed","external_org_migration_started","external_org_migration_finished","file_deleted","group_history_changed","im_deleted","im_history_changed","message","mpim_history_changed","pin_added","pin_removed","star_added","star_removed","subteam_deleted","teams_left_shared_channel"];var _=[].concat(g,["channel_converted_to_shared","team_rename","team_domain_change"]);var y=2e3;var O=function e(){return Object(b["a"])()?g.join(","):_.join(",")};var k=Object(h["a"])("Immediately calls eventlog.history",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.start,n=r.count,i=void 0===n?y:n,s=r.noPayloadIfHasMore,o=void 0===s||s,l=r.batchDeletedFiles,u=void 0===l||l,d=r.include,p=void 0===d?O():d;if(!a)return Promise.reject(new Error("A start timestamp is required"));var v={start:a,count:i,no_payload_if_has_more:o,batch_deleted_files:u};Object(c["isFeatureEnabled"])(t(),"feature_message_history_cfm")&&(v.include_events=p);return e(Object(f["a"])({method:"ublockworkaround.history",reason:"fetchEventLogHistoryImmediately",args:v,EXPEDITED:true}))});k.propTypes=m["b"].object;var E=Object(h["a"])("Immediately calls eventlog.history for message type events",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=v()({},r,{include:"message"});return e(k(a))});E.propTypes=m["b"].object;var j=Object(h["a"])("Immediately calls eventlog.history for non-message type events",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=Object(o["without"])(Object(b["a"])()?g:_,"message").join(",");var n=v()({},r,{include:a});return e(k(n))});j.propTypes=m["b"].object;var C={EVENTS:g,LEGACY:_,getDefaultInclude:O};var S=r(12);var w=r(288);var I=r(23);var T=r(27);var A=r(228);var N=r(71);var P=r(4376);var R=r(41);function M(e){if(!e||!e.length)return[];var t=[];var r={};for(var a=e.length-1;a>=0;a--){var n=e[a];var i=void 0;switch(n&&"message"===n.type&&n.subtype){case"message_changed":case"message_deleted":case"message_replied":i=n.deleted_ts||Object(R["getMessageTs"])(n.message);if(!i){t.push(n);break}if(r[n.subtype+":"+n.channel+":"+i])break;r[n.subtype+":"+n.channel+":"+i]=true;t.push(n);break;case"channel_purpose":case"group_purpose":case"channel_topic":case"group_topic":if(r[n.subtype+":"+n.channel])break;r[n.subtype+":"+n.channel]=true;t.push(n);break;case"channel_history_changed":case"group_history_changed":case"im_history_changed":case"mpim_history_changed":default:t.push(n);break}}return t.reverse()}var x=r(65);r.d(t,"a",function(){return B});r.d(t,"b",function(){return U});r.d(t,"c",function(){return V});r.d(t,"d",function(){return K});r.d(t,"f",function(){return z});r.d(t,"e",function(){return Q});var D={};var F="EVENTLOG";var L=Object(A["a"])(100);function B(e){if(!D[e]){D[e]=new W(e);Object(x["exportToTeamDebugger"])(e,"eventlog",{instance:D[e],triggerGapDetection:function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(T["a"])(e,Object(u["eventlogGapDetected"])(r))}})}}function U(e){return D[e]}function q(e){switch(e.type){case"file_change":if(e.file&&e.file.id)return e.type+"_"+e.file.id;break;case"user_change":if(e.user&&e.user.id)return e.type+"_"+e.user.id;break;case"emoji_changed":if("add"===e.subtype&&Object(o["isString"])(e.name)&&Object(o["isString"])(e.value)){var t={name:e.name,value:e.value};return"emoji_changed_add_"+JSON.stringify(t)}if("remove"===e.subtype&&Object(o["isArray"])(e.names))return"emoji_changed_remove_"+JSON.stringify(e.names);return e.type;case"message.channel_history_changed":case"message.group_history_changed":case"message.mpim_history_changed":case"message.im_history_changed":if(Object(o["isString"])(e.channel))return e.type+"_"+e.channel;break;default:}return}function G(e,t){return Object(o["reduceRight"])(e,function(e,r){t(r)&&e.unshift(r);return e},[])}function H(e){var t={};var r=G(e,function(e){var r=q(e);if(!r)return true;if(t[r])return false;t[r]=true;return true});return r}var W=function(){function e(t){n()(this,e);if(!t)throw new Error("Eventlog requires a teamId");this._teamId=t;this._logger=Object(S["a"])({teamId:this._teamId});this._telemeter=Object(N["c"])({state:this._getState()});this._lastAttemptWasCancelled=false;this._eventlogHistoryP=void 0;this._shouldPersistLastEventTimestamp=true;Object(w["a"])(this)}s()(e,[{key:"_dispatchReduxAction",value:function e(t){return Object(T["a"])(this._teamId,t)}},{key:"_getState",value:function e(){return Object(T["c"])(this._teamId)}},{key:"_info",value:function e(t){this._logger.info(F,t)}},{key:"_warn",value:function e(t){this._logger.warn(F,t)}},{key:"_eventlogErrorHandler",value:function e(t){var r=t&&t.data?t.data.error:null;if("timestamp_too_old"===r){L&&this._telemeter.count("el_reload_too_old");this._dispatchReduxAction(Object(u["eventlogGapDetected"])(u["EVENTLOG_GAP_REASON_TIMESTAMP_TOO_OLD"]));return}this._warn("eventlog: encountered error");this._logger.error(t,"eventlog");L&&this._telemeter.count("el_error");this._dispatchReduxAction(Object(u["eventlogGapDetected"])(u["EVENTLOG_GAP_REASON_ERROR"]))}},{key:"_eventlogOKHandler",value:function e(t){if(t.has_more){var r=this._getState();Object(c["isFeatureEnabled"])(r,"feature_message_history_cfm")&&Object(c["isFeatureEnabled"])(r,"feature_tinyspeck")&&this._telemeter.count("overflow_ts");L&&this._telemeter.count("el_reload_has_more");this._dispatchReduxAction(Object(u["eventlogGapDetected"])(u["EVENTLOG_GAP_REASON_HAS_MORE"]));return}L&&this._telemeter.count("el_ok");if(!t.events){this._warn("eventlog: history call did not include events");return}if(!t.events.length){this._info("nothing to process");return}L&&this._telemeter.store("el_event_count",t.events.length);t.events.forEach(function(e){e._from_evt_log=true});var a=H(t.events);this._info("processing "+a.length+" events out of a total set of "+t.events.length);L&&this._telemeter.store("el_event_count_filtered",a.length);if(a.length>0){this._dispatchReduxAction(Object(l["f"])(a));var n=a[a.length-1].event_ts;if(n){var i=Object(u["getLastKnownEventTimestamp"])(this._getState())||0;n>i&&this.setLastEventTimestamp(n)}}}},{key:"onSocketConnected",value:function e(t){var r=this;var a=Object(u["getLastKnownEventTimestamp"])(this._getState());if(!a){this._dispatchReduxAction(Object(u["setLastKnownEventTimestamp"])(Object(P["b"])()));this._shouldPersistLastEventTimestamp=true;return}this._info("fr="+t+", lc="+this._lastAttemptWasCancelled+", lt="+a);if(t&&!this._lastAttemptWasCancelled){this._shouldPersistLastEventTimestamp=true;return}var n=Math.round(Math.ceil(Date.now()/1e3)-a);this._info("fetching events since "+a+" ("+n+" seconds ago)");var i=Object(P["b"])();var s=void 0;if(Object(c["isFeatureEnabled"])(this._getState(),"feature_message_history_cfm")){var o=this._dispatchReduxAction(E({start:a}));var l=this._dispatchReduxAction(j({start:a}));s=o.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.has_more,a=e.events;if(t)return r._eventlogOKHandler({has_more:t});return Promise.join(r._eventlogOKHandler({events:M(a)}),l,function(e,t){return r._eventlogOKHandler(t)})}).catch(function(e){return r._eventlogErrorHandler(e)})}else s=this._dispatchReduxAction(k({start:a})).then(function(e){return r._eventlogOKHandler(e)}).catch(function(e){return r._eventlogErrorHandler(e)});s.finally(function(){r._eventlogHistoryP=void 0;r._info("fetched finish (cancelled? "+s.isCancelled()+")");r._lastAttemptWasCancelled=!!s.isCancelled();if(!s.isCancelled()){r._info("dispatching signal and clearing timestamp");var e=Object(u["getLastKnownEventTimestamp"])(r._getState())||0;a===e&&r._dispatchReduxAction(Object(u["setLastKnownEventTimestamp"])(i));r._shouldPersistLastEventTimestamp=true}});this._eventlogHistoryP=s}},{key:"onSocketDisconnected",value:function e(){this._shouldPersistLastEventTimestamp=false;if(this._eventlogHistoryP){this._info("socket was closed while we were fetching history; cancelling our request");this._eventlogHistoryP.cancel();this._eventlogHistoryP=void 0}}},{key:"replayEventlog",value:function e(t){var r=this;var a=t.start,n=t.include;this._dispatchReduxAction(k({start:a,include:n})).then(function(e){return r._eventlogOKHandler(e)}).catch(function(e){return r._eventlogErrorHandler(e)})}},{key:"setLastEventTimestamp",value:function e(t){var r=this._getState();if(t&&this._shouldPersistLastEventTimestamp){if(Object(c["isFeatureEnabled"])(r,"feature_desync_resync")&&Object(d["a"])(r))return;this._dispatchReduxAction(Object(u["setLastKnownEventTimestamp"])(t))}}}]);return e}();function V(e,t){var r=e();var a=Object(I["b"])(r);var n=D[a];if(!n)return;n.onSocketConnected(t)}function K(e){var t=e();var r=Object(I["b"])(t);var a=D[r];if(!a)return;a.onSocketDisconnected()}function z(e,t){var r=t.start,a=t.include;var n=e();var i=Object(I["b"])(n);var s=D[i];if(!s)return;s.replayEventlog({start:r,include:a})}function Q(e,t){if(t._from_evt_log)return;var r=t.event_ts;if(!r)return;var a=e();var n=Object(I["b"])(a);var i=D[n];if(!i)return;i.setLastEventTimestamp(r)}var Y={LOG_PREFIX:F};Object.defineProperty(Y,"filterEvents",{get:function e(){return H},set:function e(t){H=t}});Object.defineProperty(Y,"instances",{get:function e(){return D},set:function e(t){D=t}});Object.defineProperty(Y,"onSocketConnected",{get:function e(){return V},set:function e(t){V=t}});Object.defineProperty(Y,"onSocketDisconnected",{get:function e(){return K},set:function e(t){K=t}});Object.defineProperty(Y,"onSocketMessage",{get:function e(){return Q},set:function e(t){Q=t}})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(2);var p=r(288);var v=r(27);var m=r(236);var h=r(48);var f=r(253);var b=r(1518);var g=r(1);var _=r.n(g);var y=r(15);var O=r(8);var k=r.n(O);var E=r(9);var j=r.n(E);var C=r(0);var S=r(13);var w=r(10);var I=r(276);var T=r(3753);var A=r(4168);var N=r(150);var P=r(84);var R=r(157);var M=new w["b"]("file-upload");var x={onGo:C["b"].func,onClose:C["b"].func,msgText:C["b"].string,errorTitle:C["b"].string,errorMessage:C["b"].string,allowTryAgain:C["b"].bool,enqueueToast:C["b"].func};var D={onGo:d["noop"],onClose:d["noop"],msgText:void 0,errorTitle:void 0,errorMessage:void 0,allowTryAgain:true,enqueueToast:d["noop"]};var F=function(e){j()(t,e);function t(e){l()(this,t);var r=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onCancel=r.onCancel.bind(r);return r}u()(t,[{key:"onCancel",value:function e(){var t=this.props,r=t.onClose,a=t.msgText;if(this.canCopyMessage()){Object(I["writeText"])(a);var n=M.t("Text copied.");this.props.enqueueToast({element:_.a.createElement(R["b"],{icon:"check-circle-o",iconClassName:"sk_seafoam_green"},n)})}r()}},{key:"getErrorMessage",value:function e(){var t=this.props.errorMessage;if(t)return t;if(this.canCopyMessage())return M.t("If you\u2019d like, you can copy your message to your clipboard in order to send it separately \u2014 or you can try uploading again.");return M.t("Hmm, it looks like your file failed to upload. Want to try again?")}},{key:"canCopyMessage",value:function e(){var t=this.props.msgText;return t&&Object(I["canWriteText"])()}},{key:"render",value:function e(){var t=this.props,r=t.onGo,a=t.onClose,n=t.errorTitle,i=t.allowTryAgain;var s=n||M.t("Your file couldn\u2019t be uploaded");var o=void 0;o=i&&this.canCopyMessage()?M.t("Try Again"):i?M.t("Yes, try again"):M.t("OK");var l=void 0;i&&this.canCopyMessage()?l=M.t("Copy Text & Close"):i&&(l=M.t("Cancel"));var c=this.getErrorMessage();return _.a.createElement(P["a"],{className:"p-file_upload_error_dialog",title:s,goButtonText:o,cancelText:l,showCancelButton:i,onGo:r,onCancel:this.onCancel,onClose:a,shouldCloseOnGo:false},c)}}]);return t}(g["PureComponent"]);F.displayName="FileUploadErrorDialog";F.defaultProps=D;var L=function e(t,r){var a=r.blocks;var n=Object(A["a"])(t);if(!n)return{};return{msgText:Object(T["a"])(t,a)}};var B=function e(t){return{enqueueToast:function e(){return t(N["enqueueToast"].apply(void 0,arguments))}}};var U=Object(S["connect"])(L,B)(F);var q=Object(y["b"])("Opens the File Upload Error Dialog",function(e,t,r){e(Object(h["openModal"])({element:_.a.createElement(U,r)}))});q.propTypes=null;var G=q;var H=r(77);var W=r(11);var V=r(19);var K=r(68);var z=r(513);var Q=r(12);var Y=r(352);var J=r(243);var X=r(21);var Z=r(45);var $=r(240);var ee=r(38);var te=r(52);var re=r(65);r.d(t,"a",function(){return he});r.d(t,"b",function(){return fe});var ae={};var ne=J["a"].OK,ie=J["a"].TIMEOUT,se=J["a"].ABORTED,oe=J["a"].UNKNOWN;var le="UPLOAD-QUEUE";var ce="upload-queue";var ue="File upload failed!";var de=6e4;var pe=new w["b"]("upload-queue");var ve=function(){function e(t){l()(this,e);if(!t)throw new Error("UploadQueue requires a teamId");this._teamId=t;this._store=Object(v["d"])(t);this._queue=[];this._activeJob=null;this._logger=Object(Q["a"])({teamId:t});this._log=this._log.bind(this);this._throttledLog=Object(d["throttle"])(this._log,5e3,{leading:false});this._uploadExternalFileFetcher=this._uploadExternalFileFetcher.bind(this);this._uploadExternalFileUsingChatPostMessageFetcher=this._uploadExternalFileUsingChatPostMessageFetcher.bind(this);this._uploadFilesFetcher=this._uploadFilesFetcher.bind(this);this._onMultiFileUploadProgress=this._onMultiFileUploadProgress.bind(this);Object(p["a"])(this)}u()(e,[{key:"uploadFiles",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.files,n=r.shareData,i=void 0===n?{}:n;if(!a||!a.length)return Promise.reject(new Error("no files passed to uploadFiles"));var s=Object(d["some"])(a,function(e){return!t._doesPendingFileExist(e)});if(s){this._displayFileNotFoundError({msgText:i.introMessage,blocks:i.blocks});var o=new Error("["+le+"]: file not found in uploadFiles");this._log(o,{level:"error"});return Promise.reject(o)}var l=i.isBox||i.isDropbox;var c=this._uploadFilesFetcher;var u=this._store.getState&&this._store.getState();if(l){var p=i.isDropbox&&Object(K["a"])(u,"dropbox_legacy_picker");c=p?this._uploadExternalFileUsingChatPostMessageFetcher:this._uploadExternalFileFetcher}return new Promise(function(e,r){var n={files:a,shareData:i,cancelable:!l,numRetries:0,fetcher:c,resolve:e,reject:r,processingTimeout:null};t._queue.push(n);t._go()})}},{key:"cancelCurrentUpload",value:function e(){if(!this._activeJob)return;var t=this._activeJob.uploads;if(!t)return;this._cancelActiveXhrRequests();this._log("Upload was cancelled by the user");this._store.dispatch(Object(m["uploadCanceled"])());this._uploadOver()}},{key:"maybeResolveCurrentUpload",value:function e(t){if(!t||!this._activeJob||!this._activeJob.shareData)return;if(t!==this._activeJob.shareData.clientMsgId)return;this._activeJob.hasCurrentUploadResolved=true;var r=this._store&&this._store.getState();var a=Object(m["getFileUploadStatus"])(r);if(a!==m["PROCESSING"]){this._logger.warn(le+": attempting to resolve upload before completeUpload resolved "+this._activeJob.shareData.clientMsgId);return}this._log("Resolving upload for client_msg_id: "+t);this._resolveCurrentUpload()}},{key:"onDisconnect",value:function e(){var t=this._store.getState();var r=Object(m["getFileUploadStatus"])(t);r===m["UPLOADING"]&&this._activeJob&&(this._activeJob.disconnectedDuringUpload=true);r===m["PROCESSING"]&&this._forceResolveCurrentUpload("client disconnected")}},{key:"onChannelLeave",value:function e(){if(!this._store||!this._activeJob||!this._activeJob.shareData)return;if(this._isMemberOfChannelBeingUploadedTo())return;var t=this._store.getState();var r=Object(m["getFileUploadStatus"])(t);if(r===m["PROCESSING"]){var a=this._activeJob.shareData.channelId;this._forceResolveCurrentUpload("user left channel being uploaded to: "+a)}}},{key:"_uploadExternalFileFetcher",value:function e(){var t=this;var r=this._activeJob||{},a=r.resolve;var n=this._activeJob.shareData,i=n.channelId,o=n.link,l=n.title,c=n.broadcast,u=n.threadTs,d=n.metadata,p=n.blocks;this._store.dispatch(Object(m["uploadProcessing"])());return this._store.dispatch(Object(f["s"])({title:l,link:o,broadcast:c,threadTs:u,channels:i||"",initialComment:this._getProcessedIntroMessage(),blocks:p,reason:ce})).then(function(){var e;t._clogUploadComplete(X["l"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},s()(e,X["d"].file_upload_action,d&&d.fileUploadAction),s()(e,X["d"].file_upload_src,d&&d.fileUploadSrc),e));t._store.dispatch(Object(m["uploadComplete"])());t._uploadOver();a&&a()})}},{key:"_uploadExternalFileUsingChatPostMessageFetcher",value:function e(){var t=this;var r=this._activeJob.shareData,a=r.channelId,n=r.link,i=r.broadcast,s=r.introMessage,o=r.blocks,l=r.threadTs;this._store.dispatch(Object(m["uploadProcessing"])());var c=this._store.getState();var u=Object(A["a"])(c);var d=void 0;var p=void 0;if(u){d=Object(z["a"])(c,o);o&&d.insert("\n");d.insert(n,{link:n})}else p=s+" \n "+n;return this._store.dispatch(Object(b["a"])({channelId:a,replyToTs:l,shouldBroadcast:i,text:p,delta:d})).then(function(){t._store.dispatch(Object(m["uploadComplete"])());t._uploadOver()})}},{key:"_uploadFilesFetcher",value:function e(){var t=this;var r=this._activeJob.files;this._activeJob.uploads=[];this._log("Preparing to upload "+r.length+" file(s)");var a=r.map(function(e,r){return t._store.dispatch(Object(f["h"])({fileName:Object(H["getFileName"])(e),fileSize:e.size,snippetType:e.snippetType,reason:ce})).then(function(a){var n=a.file,i=a.upload_url;t._log("Got upload URL and ID "+n);return new Promise(function(a){var s=new FormData;s.append("file",e);var o=new XMLHttpRequest;o.addEventListener("timeout",t._onTimeout.bind(t));o.addEventListener("abort",t._onAbort.bind(t));o.addEventListener("error",t._onError.bind(t));o.addEventListener("load",function(){t._log("Completed POSTing "+n+" to upload URL");a()});o.upload&&o.upload.addEventListener("progress",function(e){return t._onMultiFileUploadProgress(e,n)});t._activeJob.uploads[r]={xhr:o,fileId:n,title:Object(H["getFileDisplayName"])(e),size:e.size,loaded:0};o.open("POST",i);o.send(s)})})});return Promise.all(a).then(function(){t._onLoad()})}},{key:"_go",value:function e(){if(this._activeJob){this._log("Job in progress, queuing");return}if(!this._queue.length){this._log("Upload queue empty");this._store.dispatch(Object(m["uploadQueueEmptied"])());return}this._log("Starting an upload");this._activeJob=this._queue.shift();this._actuallyUpload(this._activeJob)}},{key:"_resolveCurrentUpload",value:function e(){var t=this._activeJob||{},r=t.uploads,a=t.resolve,n=t.processingTimeout;if(r){this._log("Successfuly resolved file uploads for: "+this._getUploadFileIds());a&&a()}clearTimeout(n);this._store.dispatch(Object(m["uploadComplete"])());this._uploadOver()}},{key:"_actuallyUpload",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.files,n=r.fetcher;var i=void 0;a&&1===a.length&&(i=Object(H["getFileDisplayName"])(a[0]));this._store.dispatch(Object(m["uploadStarting"])({fileName:i,fileCount:a&&a.length,isRetry:!!this._activeJob.numRetries,cancelable:this._activeJob.cancelable}));this._activeJob.startTime=Date.now();n().catch(function(e){t._onError(e)})}},{key:"_onUploadProgress",value:function e(t){var r="";if(t.lengthComputable){var a=Math.floor(100*t.loaded/t.total,10);this._store.dispatch(Object(m["progressUpdate"])({percentComplete:a}));r="Uploading "+this._activeJob.fileId+" - "+a+"% complete";this._activeJob.totalProgress=t.loaded}else r="Uploading "+this._activeJob.fileId+" - Upload percentage not computable";this._throttledLog(r)}},{key:"_onMultiFileUploadProgress",value:function e(t,r){if(!t.lengthComputable){this._throttledLog("Uploading "+this._getUploadFileIds()+" - Upload percentage not computable");return}var a=this._activeJob.uploads;var n=Object(d["find"])(a,{fileId:r});if(!n){this._throttledLog("Could not find upload progress data for "+r+" in _activeJob.uploads",{level:"warn"});return}n.loaded=t.loaded;this._updateMultiFileUploadProgress()}},{key:"_updateMultiFileUploadProgress",value:function e(){var t=this._activeJob.uploads;var r=t.reduce(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.loaded,a=t.size;e.totalLoaded+=r;e.totalSize+=a;return e},{totalLoaded:0,totalSize:0});var a=r.totalLoaded,n=r.totalSize;var i=Math.floor(100*a/n,10);this._store.dispatch(Object(m["progressUpdate"])({percentComplete:i}));var s="Uploading "+this._getUploadFileIds()+" - "+i+"% complete";this._throttledLog(s);this._activeJob.totalProgress=a}},{key:"_log",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.level,n=void 0===a?"info":a;this._logger[n](le,t)}},{key:"_uploadOver",value:function e(){this._activeJob=null;this._go()}},{key:"_getMultiFileUploadDataForApi",value:function e(){var t=this._activeJob.uploads;if(!t)return null;return t.map(function(e){return{id:e.fileId,title:e.title}})}},{key:"_getUploadFileIds",value:function e(){var t=this._activeJob||{},r=t.uploads;if(!r)return null;return r.map(function(e){return e.fileId})}},{key:"_getUploadSize",value:function e(){var t=this._activeJob||{},r=t.uploads;if(!r)return 0;return r.reduce(function(e,t){return e+t.size},0)}},{key:"_getUploadFileCount",value:function e(){var t=this._activeJob||{},r=t.files;if(!r)return 0;return r&&r.length}},{key:"_getProcessedIntroMessage",value:function e(){var t=this._store&&this._store.getState();var r=Object(A["a"])(t);if(r)return;var a=this._activeJob&&this._activeJob.shareData||{},n=a.introMessage;return Object(Y["b"])(t,n)}},{key:"_cancelActiveXhrRequests",value:function e(){var t=this._activeJob.uploads;if(!t)return;t.forEach(function(e){e.xhr&&e.xhr.abort()})}},{key:"_clogUploadComplete",value:function e(t,r){var a;var i=this._activeJob||{},o=i.shareData,l=void 0===o?{}:o,c=i.numRetries,u=i.retryReason,d=i.startTime,p=i.disconnectedDuringUpload;var v=l.isBox||l.isDropbox;var m=v?X["o"].EXTERNAL:X["o"].EDGE;var h=Date.now()-d;var f=!!l.introMessage||!!l.blocks;var b=this._getUploadFileCount();var g=Object(Z["a"])({state:this._store.getState()});g.track(t,n()((a={},s()(a,X["d"].type,m),s()(a,X["d"].duration,h),s()(a,X["d"].has_upload_message,f),s()(a,X["d"].file_count,b),s()(a,X["d"].retry_count,c),s()(a,X["d"].upload_size,this._getUploadSize()),s()(a,X["d"].retry_reason,u),s()(a,X["d"].did_disconnect_during_upload,p),a),r))}},{key:"_ensureRequestLoadedSuccessfully",value:function e(t){if(!t)return false;if(t.status!==ne){this._onError("Error with loaded request; status code: "+t.status+"; status text: "+t.statusText,{status:t.status,response:t.responseText});return false}return true}},{key:"_ensureAllRequestsLoadedSuccessfully",value:function e(){var t=this;var r=this._activeJob.uploads;return Object(d["every"])(r,function(e){return t._ensureRequestLoadedSuccessfully(e.xhr)})}},{key:"_forceResolveCurrentUpload",value:function e(t){if(!this._activeJob)return;this._log("["+le+"]: force resolving current upload because: "+t,{level:"error"});this._resolveCurrentUpload()}},{key:"_setProcessingTimeout",value:function e(){var t=this;if(!this._activeJob)return;this._activeJob.processingTimeout=setTimeout(function(){var e=t._store.getState();var r=Object(m["getFileUploadStatus"])(e);r===m["PROCESSING"]&&t._forceResolveCurrentUpload("processing step timed out")},de)}},{key:"_retryUpload",value:function e(t){var r=this;this._activeJob.numRetries+=1;this._activeJob.retryReason=t;var a=["fileId","xhrOpenTime","uploads","startTime","totalProgress","processingTimeout","hasCurrentUploadResolved"];a.forEach(function(e){delete r._activeJob[e]});this._actuallyUpload(this._activeJob)}},{key:"_onLoad",value:function e(){var t=this;var r=this._activeJob,a=r.shareData,i=r.fileId,o=r.uploads;var l=this._ensureAllRequestsLoadedSuccessfully();if(!l)return;var c=void 0;if(i){c={fileId:i};this._log(i+" Finished POST-ing data")}else{c={files:this._getMultiFileUploadDataForApi()};this._log("Finished POST-ing data for "+o.length+" file(s)")}this._store.dispatch(Object(m["progressUpdate"])({percentComplete:100}));this._throttledLog.flush();this._store.dispatch(Object(f["a"])(n()({},c,a,{introMessage:this._getProcessedIntroMessage(),reason:ce}))).then(function(){var e;t._activeJob||t._logger.error(le+": active job object missing after completeUpload resolves");t._store.dispatch(Object(m["uploadProcessing"])());t._setProcessingTimeout();var r=a&&a.metadata;t._clogUploadComplete(X["l"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},s()(e,X["d"].file_upload_action,r&&r.fileUploadAction),s()(e,X["d"].file_upload_src,r&&r.fileUploadSrc),e));var n=t._shouldImmediatelyResolveUpload()||{},i=n.shouldImmediatelyResolve,o=n.reason;if(i){t._log("immediately resolving upload beacause: "+o);t._resolveCurrentUpload()}else Object(ee["a"])()&&!Object(te["isConnected"])(t._store.getState())&&t._resolveCurrentUpload()}).catch(this._onError.bind(this))}},{key:"_onTimeout",value:function e(){this._onError("File upload timed out!",{status:ie})}},{key:"_onAbort",value:function e(){this._onError("File upload aborted!",{status:se})}},{key:"_onXhrError",value:function e(t){var r=this&&this._activeJob||{},a=r.xhrOpenTime;var i=void 0;a&&(i=Date.now()-a);if(Object(d["isObject"])(t)){var s=t.currentTarget;var o={};Object(d["isObject"])(s)&&(o={status:s.status,statusText:s.statusText,timeout:s.timeout,response:s.response,responseText:s.responseText,responseType:s.responseType,responseUrl:s.responseUrl,responseXML:s.responseXML,readyState:s.readyState});var l=n()({loaded:t.loaded,total:t.total,lengthComputable:t.lengthComputable,type:t.type,message:t.message,description:t.description,timeStamp:t.timeStamp,isTrusted:t.isTrusted},o,{duration:i,stack:Object($["a"])()});this._logger.error(le,t,"on XHR error "+JSON.stringify(l))}this._onError(t)}},{key:"_onError",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.status,i=void 0===n?oe:n,o=a.response,l=void 0===o?null:o;var c=this._activeJob||{},u=c.numRetries,p=c.reject,v=c.shareData,f=c.totalProgress;var b=Object(d["isString"])(r)?new Error(r):r;var g="(status: "+i+"; response: "+l+")";if(i===se)this._log(b.toString(),{level:"warn"});else{this._log(b.toString(),{level:"error"});this._cancelActiveXhrRequests();if(0===u){this._log("First attempt to upload failed, automatically retrying");this._retryUpload(b.toString())}else this._store.dispatch(G({onGo:function e(){t._log(u+"nd attempt to upload failed, user requested to retry");t._retryUpload(b.toString());t._store.dispatch(Object(h["closeModal"])())},onClose:function e(){var r;t._log("User canceled upload after error");p&&p(b);var a=v&&v.metadata;t._clogUploadComplete(X["l"].FILE_COMPLETE_UPLOAD_FAILURE,(r={},s()(r,X["d"].file_upload_error_message,b.toString()),s()(r,X["d"].file_upload_action,a&&a.fileUploadAction),s()(r,X["d"].file_upload_src,a&&a.fileUploadSrc),s()(r,X["d"].file_upload_progress,f),r));t._logger.error(b,"["+le+"]: error uploading file "+g);t._store.dispatch(Object(m["uploadCanceled"])());t._uploadOver()},msgText:v&&v.introMessage,blocks:v&&v.blocks}))}this._throttledLog.cancel()}},{key:"_doesPendingFileExist",value:function e(t){if(!t)return false;if(Object(H["isPendingFile"])(t))return t.size&&t.size>0;return true}},{key:"_displayFileNotFoundError",value:function e(t){var r=this;var a=t.msgText,n=t.blocks;var i=pe.t("Your file couldn\u2019t be uploaded");var s=pe.t("Something about your file changed before it could be uploaded. This might happen if your file has been moved, edited, or deleted from your device.");this._store.dispatch(G({errorTitle:i,errorMessage:s,msgText:a,blocks:n,allowTryAgain:false,onGo:function e(){return r._store.dispatch(Object(h["closeModal"])())}}))}},{key:"_shouldImmediatelyResolveUpload",value:function e(){var t=this._activeJob||{},r=t.shareData,a=t.hasCurrentUploadResolved;if(!this._activeJob||!r)return{shouldImmediatelyResolve:true,reason:"missing activeJob or shareData"};if(!r.clientMsgId)return{shouldImmediatelyResolve:true,reason:"file not shared into channel"};if(!this._isMemberOfChannelBeingUploadedTo())return{shouldImmediatelyResolve:true,reason:"not member of channel being uploaded to"};if(a)return{shouldImmediatelyResolve:true,reason:"message already received by client (race condition)"};return{shouldImmediatelyResolve:false}}},{key:"_isMemberOfChannelBeingUploadedTo",value:function e(){if(!this._store||!this._activeJob||!this._activeJob.shareData)return false;var t=this._activeJob.shareData.channelId;if(!t)return false;var r=this._store.getState&&this._store.getState();var a=Object(V["d"])(r,t);return Object(W["isMemberOfChannel"])(a)}}]);return e}();var me=ve;function he(e){if(ae[e])return ae[e];ae[e]=new ve(e);Object(re["exportToTeamDebugger"])(e,"uploadQueue",ae[e]);return ae[e]}function fe(e,t){var r=he(e);r.maybeResolveCurrentUpload(t)}var be={PROCESSING_TIMEOUT_DURATION:de,API_REASON:ce,resetUploadQueues:function e(){ae={}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r(13);var m=r(2);var h=r(23);var f=function e(t,r){return t+"-"+r};var b={add:function e(t,r,a){this.sections||(this.sections={});var n=f(t,r);if(this.sections[n])return;this.sections[n]=a},remove:function e(t,r){if(!this.sections)return;var a=f(t,r);if(!this.sections[a])return;this.sections[a]=null;delete this.sections[a]},get:function e(t,r){if(!this.sections)return;return this.sections[f(t,r)]}};var g=b;var _={teamId:d["b"].string.isRequired,order:d["b"].number.isRequired,component:d["b"].object.isRequired,children:d["b"].node};var y={children:null};var O=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.component,i=a.focus,s=a.blur;var o=Object(m["isFunction"])(i)&&Object(m["isFunction"])(s);if(o)return l()(r);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.teamId,a=t.order,n=t.component;g.add(r,a,n)}},{key:"componentWillUnmount",value:function e(){var t=this.props,r=t.teamId,a=t.order;g.remove(r,a)}},{key:"render",value:function e(){return this.props.children}}]);return t}(p["PureComponent"]);O.displayName="FocusableSection";O.defaultProps=y;var k=function e(t){return{teamId:Object(h["b"])(t)}};var E=Object(v["connect"])(k)(O);r.d(t,"a",function(){return E});r.d(t,"b",function(){return g})},,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"shiftToast",function(){return O});r.d(t,"clearQueue",function(){return E});r.d(t,"getCurrentToast",function(){return C});r.d(t,"getToastQueue",function(){return S});r.d(t,"queueToast",function(){return I});var a=r(3);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(26);var l=r.n(o);var c=r(0);var u=r(2);var d=r.n(u);var p=r(18);var v=r(36);var m=r(14);var h=r(15);var f;var b=c["b"].shape({key:c["b"].string.isRequired,emoji:c["b"].string.isRequired,userId:c["b"].string.isRequired,channelId:c["b"].string.isRequired,otherUsers:c["b"].objectOf(c["b"].bool)}).isRequired;var g=c["b"].arrayOf(b);var _=[];var y=Object(p["b"])("Push a toast object to the back of the queue");y.propTypes=b;var O=Object(p["b"])("Shift/pop a toast object off the front of the queue");O.propTypes=null;var k=Object(p["b"])("Replace the queue object");k.propTypes=g;var E=Object(p["b"])("Clear the queue");E.propTypes=null;var j=Object(v["b"])((f={},s()(f,y,function(e,t){return[].concat(l()(e),[t])}),s()(f,O,function(e){return e.slice(1)}),s()(f,k,function(e,t){return t}),s()(f,E,function(){return[]}),f),_,{persistenceEnabled:false});j.propTypes=g;t["default"]=j;var C=Object(m["b"])(function(e){return e.reactionsToast&&e.reactionsToast[0]});var S=Object(m["b"])(function(e){return e.reactionsToast});var w=function e(t,r){return t.key===r.key&&t.emoji===r.emoji};var I=Object(h["b"])("Push a reaction key to the back of the queue if it's not in the queue already",function(e,t,r){var a=S(t());var i=Object(u["find"])(a,function(e){return w(e,r)});if(i){var o=n()({},i,{otherUsers:n()({},i.otherUsers,s()({},r.userId,true))});var l=a.map(function(e){return e===i?o:e});e(k(l));return}e(y(r))});I.propTypes=b},,,,function(e,t,r){"use strict";r.r(t);r.d(t,"addPendingOpenChannel",function(){return m});r.d(t,"clearPendingOpenChannel",function(){return h});r.d(t,"getShouldBecomeActive",function(){return g});r.d(t,"getPendingMsgForChannel",function(){return _});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(2);var c=r.n(l);var u=r(18);var d=r(36);var p=r(14);var v;var m=Object(u["b"])("Store intent to make a channel active (display it) and/or send a message after opening it");m.propTypes={channelId:o["b"].string,memberId:o["b"].string,shouldBecomeActive:o["b"].bool,msgText:o["b"].string};var h=Object(u["b"])("Clear intent to make a channel active (display it) and send a message after opening it");h.propTypes={channelId:o["b"].string,memberId:o["b"].string};var f={};var b=Object(d["b"])((v={},n()(v,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.memberId,i=t.msgText,o=t.shouldBecomeActive,l=void 0===o||o;var c=r||a;if(!c)return e;if(e&&e[c]&&e[c].msgText===i)return e;return s()({},e,n()({},c,{msgText:i,shouldBecomeActive:l}))}),n()(v,h,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.memberId;if(!r&&!a)return e;if(!e[r]&&!e[a])return e;return c.a.omit(e,[r,a])}),v),f,{persistenceEnabled:true});b.propTypes=o["b"].objectOf(o["b"].shape({msgText:o["b"].string,shouldBecomeActive:o["b"].bool}));t["default"]=b;var g=Object(p["b"])(function(e,t){return e&&e.pendingOpenChannel&&e.pendingOpenChannel[t]&&e.pendingOpenChannel[t].shouldBecomeActive});var _=Object(p["b"])(function(e,t){return e&&e.pendingOpenChannel&&e.pendingOpenChannel[t]&&e.pendingOpenChannel[t].msgText})},,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(2);var h=r.n(m);var f=r(927);var b={headers:d["b"].array,rows:d["b"].array,headerItemOnClick:d["b"].func,rowHeaderItemClassName:d["b"].string,rowClassName:d["b"].string,listClassName:d["b"].string,onRequestNextPage:d["b"].func,sortBy:d["b"].string,sortDir:d["b"].string,searchQuery:d["b"].string,height:d["b"].string,onResetData:d["b"].func,isLoading:d["b"].bool,newQuery:d["b"].bool,useKeyboardNavigableTable:d["b"].bool,autoHeight:d["b"].bool};var g={headers:[],rows:[],rowHeaderItemClassName:null,rowClassName:null,listClassName:null,headerItemOnClick:m["noop"],onRequestNextPage:m["noop"],sortBy:null,sortDir:null,searchQuery:"",height:null,onResetData:m["noop"],isLoading:false,newQuery:false,useKeyboardNavigableTable:false,autoHeight:false};var _=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onResetData=r.onResetData.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.setContainerNodeRef=r.setContainerNodeRef.bind(r);r.getDOMNode=r.getDOMNode.bind(r);return r}s()(t,[{key:"onRequestNextPage",value:function e(t,r){var e=this.props.onRequestNextPage;e&&e(t,r)}},{key:"onResetData",value:function e(){var e=this.props.onResetData;e&&e()}},{key:"getDOMNode",value:function e(){return this.tableViewContainerNode}},{key:"setContainerNodeRef",value:function e(t){this.tableViewContainerNode=t}},{key:"headerItemOnClick",value:function e(t,r){var e=this.props.headerItemOnClick;e&&e(t,r)}},{key:"render",value:function e(){var t=this.props,r=t.autoHeight,a=t.headers,n=t.height,i=t.isLoading,s=t.newQuery,o=t.rows,l=t.rowHeaderItemClassName,c=t.rowClassName,u=t.listClassName,d=t.sortBy,p=t.sortDir,m=t.searchQuery,h=t.useKeyboardNavigableTable;var b={autoHeight:r,headerItemOnClick:this.headerItemOnClick,headers:a,height:n,isLoading:i,newQuery:s,onRequestNextPage:this.onRequestNextPage,onResetData:this.onResetData,listClassName:u,rowHeaderItemClassName:l,rowClassName:c,rows:o,sortBy:d,sortDir:p,searchQuery:m};var g=h?v.a.createElement(f["a"],b):v.a.createElement(f["b"],b);return v.a.createElement("div",{className:"c-table_view_container",ref:this.setContainerNodeRef},g)}}]);return t}(p["PureComponent"]);_.displayName="TableViewController";_.defaultProps=g;t["a"]=_},function(e,t,r){"use strict";var a=r(37);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(13);var g=r(16);var _=r.n(g);var y=r(2);var O=r.n(y);var k=r(1757);var E=r(0);var j=r(195);var C=r(384);var S=r(900);var w=r(96);var I=r(1349);var T=r(1350);var A=r(579);var N=r(178);var P=r(4358);var R=r(38);var M=r(3134);var x=r.n(M);var D={offsetX:24,offsetY:134};var F=function e(t){var r=t&&t.current||t;if(!r)return;var a=Object(y["isFunction"])(r.getWrappedInstance)?r.getWrappedInstance():r;if(!a)return;if(Object(y["isFunction"])(a.focus))return a};var L={className:E["b"].string,bodyClassName:E["b"].string,flexOrigin:E["b"].string,isEmpty:E["b"].bool,isOffline:E["b"].bool,isLoading:E["b"].bool,onBlur:E["b"].func,onFocus:E["b"].func,renderBody:E["b"].func.isRequired,renderEmpty:E["b"].func,onOptionsClick:E["b"].func,renderControls:E["b"].func,renderSubtitle:E["b"].func,title:E["b"].node.isRequired,viewId:E["b"].string.isRequired,kbNavOrder:E["b"].number,dataQa:E["b"].string,headerProps:E["b"].object,userAttentionIsOnChat:E["b"].bool,focus:E["b"].func,removeFromSectionNavigation:E["b"].func,addToSectionNavigation:E["b"].func,setInitialActiveSection:E["b"].func};var B={className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:false,isOffline:false,isLoading:false,onBlur:y["noop"],onFocus:y["noop"],renderEmpty:y["noop"],renderControls:y["noop"],renderSubtitle:y["noop"],onOptionsClick:void 0,kbNavOrder:void 0,dataQa:void 0,headerProps:{},userAttentionIsOnChat:false,focus:void 0,removeFromSectionNavigation:y["noop"],addToSectionNavigation:y["noop"],setInitialActiveSection:y["noop"]};var U=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["focus","blur","setInitialActiveSection"]);r.flexpaneBodyRef=f.a.createRef();r.flexpaneHeaderRef=f.a.createRef();return r}u()(t,[{key:"componentDidUpdate",value:function e(t){!t.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation();!this.props.userAttentionIsOnChat&&t.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"setInitialActiveSection",value:function e(){this.props.setInitialActiveSection()}},{key:"focusCloseButton",value:function e(){var t=F(this.flexpaneHeaderRef);t&&t.focus()}},{key:"focusItemInBody",value:function e(){var t=F(this.flexpaneBodyRef);if(!t)return;var r=Object(A["a"])(t)[0];r&&r.focus()}},{key:"focus",value:function e(){var t=this.props,r=t.isEmpty,e=t.focus,a=t.onFocus;if(r){this.focusCloseButton();return}e?e():this.focusItemInBody();Object(R["a"])()||a()}},{key:"blur",value:function e(){document.activeElement.blur();Object(R["a"])()||this.props.onBlur()}},{key:"isLoading",value:function e(){var t=this.props,e=t.isLoading,r=t.isOffline;return e&&!r}},{key:"renderBody",value:function e(){var t=this.props,r=t.isEmpty,a=t.isOffline,e=t.renderBody,n=t.renderEmpty;if(r){if(this.isLoading())return null;return n({isOffline:a})}return e()}},{key:"renderSubtitle",value:function e(){var e=this.props.renderSubtitle;var t=e();if(!t)return null;return f.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},t)}},{key:"render",value:function e(){var t=this.props,r=t.className,a=t.bodyClassName,n=t.flexOrigin,i=t.isEmpty,o=t.onOptionsClick,l=t.title,c=t.viewId,u=t.kbNavOrder,d=t.dataQa,p=t.renderControls,v=t.headerProps;var m=f.a.createElement(C["a"],{id:c},f.a.createElement("div",{"data-qa":d,className:_()("p-flexpane",r)},f.a.createElement(I["a"],s()({ref:this.flexpaneHeaderRef,onOptionsClick:o,renderSecondary:p},v),f.a.createElement(T["a"],{flexOrigin:n,size:"medium"}),f.a.createElement("div",{className:"p-flexpane__title_container"},l,this.renderSubtitle())),f.a.createElement("div",{ref:this.flexpaneBodyRef,className:_()("p-flexpane__body",a,{"p-flexpane__body--empty":i&&!this.isLoading(),"p-flexpane__body--empty_loading":i&&this.isLoading()})},this.isLoading()&&f.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},f.a.createElement(w["a"],{size:"medium",noMargin:true})),this.renderBody())));if(Object(R["a"])())return m;return f.a.createElement(S["a"],{component:this,order:u},m)}}]);return t}(f.a.Component);U.displayName="Flexpane";U.defaultProps=B;var q=function e(t){return{isOffline:!Object(j["c"])(t),userAttentionIsOnChat:Object(N["e"])(t)}};var G=Object(R["a"])()?Object(P["a"])(U,"Flexpane",{index:1}):U;var H=Object(b["connect"])(q,null,null,{pure:false})(function(e){var t=e.forwardedRef,r=n()(e,["forwardedRef"]);return f.a.createElement(G,s()({ref:t},r))});t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(H,s()({forwardedRef:t},e))})},function(e,t,r){"use strict";r.d(t,"b",function(){return U});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(13);var _=r(16);var y=r.n(_);var O=r(2);var k=r.n(O);var E=r(1797);var j=r(441);var C=r(329);var S=r(41);var w=r(706);var I=r(428);var T=r(1799);var A=r(3261);var N=r.n(A);var P=Object(h["createContext"])(O["noop"]);var R=3e3;var M=200;var x={msg:b["b"].object,className:b["b"].string,hover:b["b"].bool,onClick:b["b"].func,highlight:b["b"].bool,clearHighlight:b["b"].func,children:b["b"].node,isDeleting:b["b"].bool,removeMessageAndTimestamp:b["b"].func,logMessage:b["b"].func};var D={msg:void 0,className:void 0,hover:true,onClick:O["noop"],highlight:void 0,clearHighlight:O["noop"],children:void 0,isDeleting:void 0,removeMessageAndTimestamp:O["noop"],logMessage:b["b"].func};var F=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setBackground=r.setBackground.bind(r);r.onClick=r.onClick.bind(r);r.onDeleteAnimationEnd=r.onDeleteAnimationEnd.bind(r);r.onDeleteAnimationTick=r.onDeleteAnimationTick.bind(r);r.highlightTimer=null;r.state={};r.ref=f.a.createRef();return r}u()(t,[{key:"componentDidMount",value:function e(){this.props.highlight&&this.startHighlightTimer();this.props.isDeleting&&this.onDeleteAnimationEnd()}},{key:"componentDidUpdate",value:function e(t){!t.highlight&&this.props.highlight&&this.startHighlightTimer();!t.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.props.clearHighlight()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onClick",value:function e(t){var r=this.props.msg;if(t.shiftKey&&Object(I["a"])(t)&&!Object(T["a"])(t.target)){t.preventDefault();this.props.logMessage({channelId:r.channel,ts:r.ts})}this.props.onClick(t)}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props.msg;this.props.removeMessageAndTimestamp({channelId:t.channel,ts:t.ts});this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;this.setState(function(){return{height:r}},a)}},{key:"setBackground",value:function e(t){this.setState(function(e){return s()({},e,t)})}},{key:"startDeleteAnimation",value:function e(){var t=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(w["a"])({fromValue:t,toValue:0,duration:M,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startHighlightTimer",value:function e(){var t=this;this.highlightTimer&&clearTimeout(this.highlightTimer);this.highlightTimer=setTimeout(function(){t.highlightTimer=null;t.props.clearHighlight()},R)}},{key:"render",value:function e(){var t;var r=this.state.height;var a="number"===typeof r?{height:r}:null;var i=y()("c-message_kit__background",(t={"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels},n()(t,"c-message_kit__background--labels--"+this.state.labels,this.state.labels),n()(t,"c-message_kit__background--editing",this.state.editing),n()(t,"c-message_kit__background--highlight",this.props.highlight),n()(t,"c-message_kit__background--deleting",this.props.isDeleting),t),this.props.className);return f.a.createElement(P.Provider,{value:this.setBackground},f.a.createElement("div",{role:"document",className:i,ref:this.ref,style:a,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(S["isUnprocessedMsg"])(this.props.msg)},this.props.children))}}]);return t}(h["PureComponent"]);F.displayName="MessageBackground";F.defaultProps=D;function L(e,t){var r=t.msg;var a=false;if(r){var n=Object(C["getMessageMetaData"])(e,{channelId:r.channel,ts:r.ts});a=n.isDeleting}return{isDeleting:a}}var B=function e(t){return{removeMessageAndTimestamp:function e(r){return t(Object(j["a"])(r))},logMessage:function e(r){return t(Object(E["a"])(r))}}};t["a"]=Object(g["connect"])(L,B)(F);function U(e){return function t(r){return f.a.createElement(P.Consumer,null,function(t){return f.a.createElement(e,s()({},r,{setBackground:t}))})}}},,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"d",function(){return n});r.d(t,"e",function(){return i});r.d(t,"c",function(){return s});r.d(t,"a",function(){return o});r.d(t,"b",function(){return l});r.d(t,"g",function(){return c});r.d(t,"f",function(){return u});var a=r(20);var n=Object(a["b"])("TS.newxp.slackbot_response_sent_sig.dispatch");var i=Object(a["b"])("TS.newxp.slackbot_skip_or_stop_sig.dispatch");var s=Object(a["b"])("TS.newxp.slackbot_continue_sig.dispatch");var o=Object(a["b"])("TS.newxp.cancelOnboarding");var l=Object(a["b"])("TS.newxp.resumeOnboarding");var c=Object(a["b"])("TS.newxp.startOnboardingClick");var u=Object(a["b"])("TS.newxp.startOnboarding")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(15);var o=r(48);var l=r(1226);var c=r(34);var u=r(132);var d=Object(s["b"])("Opens the custom status input in a dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fromKeyboardShortcut,i=void 0!==a&&a;if(i){var s=t();Object(c["g"])(s,"used_custom_status_kb_shortcut")||e(Object(u["d"])({pref:"used_custom_status_kb_shortcut",value:true}))}e(Object(o["openModal"])({element:n.a.createElement(l["c"],{useDialog:true,focusOnMount:true,openedFromKeyboardShortcut:i})}))});d.propTypes={fromKeyboardShortcut:i["b"].bool};t["a"]=d},function(e,t,r){"use strict";var a=r(2);var n=r.n(a);var i=r(14);var s=r(98);var o=r(19);var l=r(11);var c=r(23);var u=r(27);var d=r(73);var p=r(12);var v=r(284);var m=function e(t,r){var a=Object(d["a"])(t);var n=Object(o["d"])(t,r,false);return r&&r!==a&&Object(o["v"])(t,r)&&Object(l["isMemberOfChannel"])(n)&&(!Object(l["isImOrMpim"])(n)||Object(l["isOpen"])(n))};var h=Object(i["b"])(function(e){if(!(n.a.isObject(e)&&e.messagePane))return"";var t=Object(v["k"])(e);if(m(e,t))return t;var r=Object(o["f"])(e);var a=r&&1===r.length&&r[0];if(a)return a.id;var i=Object(u["a"])(Object(c["b"])(e),Object(s["getGeneralChannel"])());if(i)return i.id;var l=Object(o["k"])(e,"USLACKBOT");if(l)return l;Object(p["a"])({state:e}).error("failed to find previous channel id or a suitable fallback");return});t["a"]=h},,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(0);var l=r(15);var c=r(2064);var u=r(38);var d=r(1462);var p=s.a.lazy(function(){return Promise.resolve().then(r.bind(null,2065))});var v=Object(l["b"])("Opens the snippet dialog",function(e,t,r){var a=r.initialText.replace(/\u2018|\u2019/g,"'").replace(/\u201c|\u201d/g,'"');Object(u["a"])()?e(Object(c["a"])({element:s.a.createElement(p,n()({},r,{initialSnippetText:a,initialText:"",resetSnippetText:a,resetChannelId:r.initialChannelId}))})):Object(d["a"])(a,r.fromPrompt)});v.propTypes={initialText:o["b"].string,initialChannelId:o["b"].string.isRequired,threadTs:o["b"].string,viewContext:o["b"].string};t["a"]=v},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return p});var a=r(3);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(0);var l=r(25);var c=r(29);var u=r(12);var d=r(4);var p=Object(l["a"])("Calls client.counts endpoint",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason,s=void 0===a?"client-counts-api/fetchClientCounts":a;return e(Object(c["a"])({method:"client.counts",args:{thread_counts_by_channel:true},reason:s})).then(function(e){if(!e||!e.ok)return{};try{var r=["U0620EL8G","WFKHTCZ29","WKLQEGRRB"];var a=Object(d["getCurrentUserId"])(t());if(r.indexOf(a)>-1){var s=Object(i["map"])(e.ims,function(e){return{id:e.id}});var o=Object(i["map"])(e.mpims,function(e){return{id:e.id}});Object(u["a"])({getState:t}).error("guest_to_guest_visibility",{type:"client_counts_api_results",im_list:s,mpim_list:o})}}catch(e){Object(u["a"])({getState:t}).error("guest_to_guest_visibility",{type:"client_counts_api_results",error:e})}var l=e.channels,c=void 0===l?[]:l,p=e.ims,v=void 0===p?[]:p,m=e.mpims,h=void 0===m?[]:m,f=e.threads,b=void 0===f?{}:f;return{channels:c,ims:v.map(function(e){return n()({},e,{is_im:true})}),mpims:h.map(function(e){return n()({},e,{is_mpim:true})}),threads:b}})});p.propTypes={reason:o["b"].string}},,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"a",function(){return s});var a=r(0);var n=r(18);var i=Object(n["b"])("Initialize enterprise preferences");i.propTypes={unlocked_prefs:a["b"].object,locked_prefs:a["b"].object,org_prefs:a["b"].object};var s=Object(n["b"])("Update on enterprise org pref");s.propTypes={pref:a["b"].string.isRequired,value:a["b"].any}},,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setActiveAppTab",function(){return f});r.d(t,"setNewUnreads",function(){return b});r.d(t,"setReactionToast",function(){return g});r.d(t,"getActiveAppTab",function(){return y});r.d(t,"getNewUnreads",function(){return O});r.d(t,"getReactionToast",function(){return k});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d;var p=o["b"].oneOf(["messages","about"]);var v=o["b"].shape({emoji:o["b"].string,memberName:o["b"].string,channelName:o["b"].string});var m=o["b"].shape({activeAppTab:p,newUnreads:o["b"].number,toaster:v});var h={activeAppTab:"messages",newUnreads:0};var f=Object(l["b"])("Notifies modern of the active tab for app/bot users");f.propTypes=p;var b=Object(l["b"])("Set the number of new unread messages that came in while in the All Unreads view");b.propTypes=o["b"].number;var g=Object(l["b"])("Sets the currently active reaction toast; null or undefined to clear");g.propTypes=v;var _=Object(c["b"])((d={},n()(d,f,function(e,t){if(!t)return e;return s()({},e,{activeAppTab:t})}),n()(d,b,function(e,t){return s()({},e,{newUnreads:t})}),n()(d,g,function(e,t){return s()({},e,{toaster:t})}),d),h,{persistenceEnabled:true});_.propTypes=m;t["default"]=_;var y=Object(u["b"])(function(e){return e&&e.globalNav&&e.globalNav.activeAppTab});var O=Object(u["b"])(function(e){return e&&e.globalNav&&e.globalNav.newUnreads});var k=Object(u["b"])(function(e){return e&&e.globalNav&&e.globalNav.toaster})},,,function(e,t,r){"use strict";r.r(t);r.d(t,"upsertAppsInChannel",function(){return k});r.d(t,"removeAppsInChannelUserId",function(){return E});r.d(t,"getAppsInChannelByChannelId",function(){return S});r.d(t,"fetchAppsInChannel",function(){return w});r.d(t,"markAppsInChannelAsStale",function(){return N});r.d(t,"getConditionalFetchManager",function(){return M});r.d(t,"markObjectsAsStale",function(){return x});r.d(t,"getFreshObjects",function(){return D});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(2);var c=r.n(l);var u=r(18);var d=r(36);var p=r(14);var v=r(15);var m=r(61);var h=r(192);var f=r(27);var b=r(23);var g=r(230);var _;var y=50;var O=o["b"].shape({id:o["b"].string.isRequired,userIds:o["b"].arrayOf(o["b"].string).isRequired}).isRequired;var k=Object(u["b"])("adds array of user IDs corresponding to apps in the channel to the store");k.propTypes={channelId:o["b"].string.isRequired,channelApps:O};var E=Object(u["b"])("removes user id from store");E.propTypes={channelId:o["b"].string.isRequired,userId:o["b"].string.isRequired};var j={};var C=Object(d["b"])((_={},n()(_,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.channelApps;if(!r||!a)return e;return s()({},e,n()({},r,a))}),n()(_,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.userId;if(!r||!a)return e;var i=e[r];if(!i)return e;return s()({},e,n()({},r,s()({},i,{userIds:Object(l["without"])(i.userIds,a)})))}),_),j,{persistenceEnabled:true});C.propTypes=o["b"].objectOf(O);t["default"]=C;var S=Object(p["b"])(function(e,t){var r=e&&e.appsInChannels&&e.appsInChannels[t];var a=Object(b["b"])(e);if(!r)return R().fetchObjectWithId(a,t);M().maybeRefetch(a,t);return r});var w=Object(v["b"])("Fetches apps in the channel",function(e,t,r){return e(Object(g["d"])({query:{count:y,channels:[r],filter:"apps",index:"users_by_realname"}})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{members:[]},t=e.members;return{id:r,userIds:t.map(function(e){return e.id})}})});w.propTypes=o["b"].string;var I=Object(v["b"])("Fetches channel apps for multiple channels given an array of channel IDs",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Promise.map(r,function(t){return e(w(t))})});I.propTypes=o["b"].arrayOf(o["b"].string).isRequired;var T=Object(v["b"])("Upserts channel apps for multiple channels given an array of channel Ids",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.forEach(function(t){return e(k({channelId:t.id,channelApps:t}))});var a=r.filter(m["b"]).map(function(e){return e.id});M().markObjectsAsFresh(Object(b["b"])(t()),a);return r});T.propTypes=o["b"].arrayOf(o["b"].object).isRequired;var A=Object(v["b"])("Fetchs and upserts channel apps for multiple channels given an array of channelIds",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e(I(r)).then(function(t){return e(T(t))})});A.propTypes=o["b"].arrayOf(o["b"].string).isRequired;var N=Object(v["b"])("Marks apps in channel as stale so they will be refetched when needed",function(e,t,r){var a=t();var n=Object(b["b"])(a);M().markObjectsAsStale(n,[r])});N.propTypes=o["b"].string.isRequired;var P=function e(t){return function(e,r){return Object(f["a"])(e,t(r))}};var R=Object(l["memoize"])(function(){return new m["a"]({fetch:P(I),upsertKnown:P(T),upsertNonExistent:P(T)})});var M=Object(l["memoize"])(function(){return new h["b"]({fetch:P(A),isEnabled:function e(){return true}})});var x=function e(t,r){return M().markObjectsAsStale(t,r)};var D=function e(t){return M().getFreshObjects(t)}},,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",function(){return S});var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(16);var b=r.n(f);var g=r(2);var _=r.n(g);var y=r(1521);var O=r(922);var k=Object(v["createContext"])({hover:false,setHover:g["noop"]});var E={className:h["b"].string,children:h["b"].node,hovered:h["b"].bool,setBackground:h["b"].func,"data-qa":h["b"].string,hasKeyboardFocus:h["b"].bool,hasKeyboardFocusWithin:h["b"].bool,onFocus:h["b"].func,onBlur:h["b"].func};var j={className:null,children:void 0,hovered:false,setBackground:g["noop"],"data-qa":void 0,hasKeyboardFocus:false,hasKeyboardFocusWithin:false,onFocus:g["noop"],onBlur:g["noop"]};var C=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMouseOver=r.onMouseOver.bind(r);r.onMouseOut=r.onMouseOut.bind(r);r.onMutation=r.onMutation.bind(r);r.setHover=r.setHover.bind(r);r.hoveredElement=null;r.mutationObserver=null;r.state={hoverCount:0,hover:false};return r}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"componentWillUnmount",value:function e(){if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}},{key:"onMouseOver",value:function e(t){var r=t.target,a=t.currentTarget,n=t.relatedTarget;if(!a.contains(r))return;if(!a.contains(n)){this.setHover(true);if(!this.mutationObserver){this.mutationObserver=new MutationObserver(this.onMutation);this.mutationObserver.observe(a,{childList:true,subtree:true})}}this.hoveredElement=r}},{key:"onMouseOut",value:function e(t){var r=t.target,a=t.currentTarget,n=t.relatedTarget;if(!a.contains(r))return;if(!this.hoveredElement)return;if(!a.contains(n)){this.setHover(false);this.hoveredElement=null;if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}}},{key:"onMutation",value:function e(t){var r=this;var a=t.some(function(e){return Array.from(e.removedNodes).some(function(e){return e.contains(r.hoveredElement)})});if(a){this.hoveredElement=null;this.setHover(false)}}},{key:"setHover",value:function e(t){this.setState(function(e){var r=Math.max(0,e.hoverCount+(t?1:-1));var a=r>0;return{hoverCount:r,hover:a}})}},{key:"setBackground",value:function e(){this.props.setBackground({hover:this.isHovered()})}},{key:"isHovered",value:function e(){var e=this.props.hovered||this.state.hover;var t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}},{key:"render",value:function e(){var t=this.isHovered();var r=b()("c-message_kit__hover",{"c-message_kit__hover--hovered":t},this.props.className);var a=this.props["data-qa"];return m.a.createElement(k.Provider,{value:{hover:t,setHover:this.setHover}},m.a.createElement("div",{role:"document",className:r,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":a},this.props.children))}}]);return t}(v["PureComponent"]);C.displayName="MessageHover";C.defaultProps=j;t["a"]=Object(O["b"])(Object(y["a"])(C));function S(e){return function t(r){return m.a.createElement(k.Consumer,null,function(t){var a=t.hover,i=t.setHover;return m.a.createElement(e,n()({},r,{hover:a,setHover:i}))})}}},,,,,function(e,t,r){"use strict";r.d(t,"d",function(){return o});r.d(t,"b",function(){return l});r.d(t,"a",function(){return c});r.d(t,"e",function(){return d});r.d(t,"c",function(){return p});var a=r(2);var n=r.n(a);var i=r(20);var s=Object(i["b"])("TS.ui.apps_browser.routeAppOpen",n.a.noop);var o=Object(i["b"])("TS.ui.apps_browser.showAppTutorial",n.a.noop);var l=Object(i["b"])("TS.ui.apps_browser.canAppBeAdded",n.a.noop);var c=Object(i["b"])("TS.ui.apps_browser.addAppToChannel",n.a.noop);var u=Object(i["b"])("TS.ui.apps_browser.buildAddAppsTitle",n.a.noop);var d=Object(i["b"])("TS.ui.apps_browser.startAddApps",n.a.noop);var p=Object(i["b"])("TS.ui.apps_browser.ensureAppMembershipIsKnown",n.a.noop)},,function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"d",function(){return d});r.d(t,"c",function(){return p});r.d(t,"b",function(){return v});var a=r(40);var n=r.n(a);var i=r(125);var s=r(770);var o=r(164);var l=r(10);var c=new l["b"]("do_not_disturb");var u=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.currentTime,o=void 0===a?n()().unix():a;var l=Object(i["a"])(o);var c=Object(i["a"])(t);var u=Math.ceil(Object(s["a"])(c,l));return u};var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.time,a=void 0===r?"09:00":r;var i=n()().add(1,"days").format("YYYY-MM-DD");var s=n()(i+" "+a).unix();return u(s)};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.time,a=void 0===r?"09:00":r;var i=n()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD");var s=n()(i+" "+a).unix();return u(s)};var v=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.do24hrTime,i=void 0!==a&&a,s=r.today,l=void 0===s?n()().format("YYYY-MM-DD"):s,u=r.tomorrow,d=void 0===u?n()().add(1,"day").format("YYYY-MM-DD"):u;if(!t)return"";var p=Object(o["p"])(t,{do24hrTime:i});var v=Object(o["m"])(t,{omitTime:true});if(v===l)return c.t("Notifications paused until {time}",{time:p});if(v===d)return c.t("Notifications paused until tomorrow at {time}",{time:p});return c.t("Notifications paused until {expires}",{expires:Object(o["d"])(t,"{status_expiration}",{do24hrTime:i})})}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(43);var s=r(0);var o=r(38);var l=r(15);var c=r(377);var u=r(4402);var d=r(3789);var p=r(132);var v=r(25);var m=r(29);var h=Object(v["a"])("Get Welcome Place data for this user",function(e,t,r){var a=r.locale;return e(Object(m["a"])({method:"onboarding.welcome",args:{locale:a},reason:"fetch-welcome-place-data"})).then(function(e){return{items:e.items}})});h.propTypes={locale:s["b"].string};var f=r(2272);var b=r(4327);var g=r(316);var _=r(45);var y=r(21);var O=r(98);var k=r(19);var E=r(57);var j=r(3312);var C=r(26);var S=r.n(C);var w=r(2);var I=r(40);var T=r.n(I);var A=14;var N=7;var P=function e(t){var r=t.find(function(e){return"workflow"===e.type});var a=Object(w["get"])(r,"content.workflow",null);if(!a)return false;if("in_progress"===a.state&&a.date_start){var n=T()().diff(1e3*a.date_start,"days");if(n>=A)return true}if("completed"===a.state){var i=Math.max.apply(Math,S()(a.tasks.map(function(e){return e.date_complete})));if(i){var s=T()().diff(1e3*i,"days");if(s>=N)return true}}return false};var R=r(1453);var M=r(4499);r.d(t,"b",function(){return F});r.d(t,"c",function(){return q});r.d(t,"d",function(){return G});r.d(t,"f",function(){return H});r.d(t,"e",function(){return W});r.d(t,"a",function(){return V});var x=void 0;var D=9e5;var F=Object(l["b"])("Dismiss Welcome Place page",function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a,n,s,o;return regeneratorRuntime.wrap(function e(l){while(1)switch(l.prev=l.next){case 0:a=r();t(Object(p["d"])({pref:"welcome_place_state",value:"disabled"}));if(!Object(M["a"])(a)){l.next=10;break}l.next=5;return Object(i["resolve"])(t(Object(O["getGeneralChannel"])()));case 5:n=l.sent;s=Object(k["k"])(a,"USLACKBOT");o=n&&n.id||s;if(!o){l.next=10;break}return l.abrupt("return",t(Object(g["a"])({id:o,fromHistory:false,replaceHistoryState:true})));case 10:return l.abrupt("return",Promise.resolve());case 11:case"end":return l.stop()}},e,x)}));return function(t,r){return e.apply(this,arguments)}}());var L=Object(l["b"])("Mark Welcome Place as decayed",function(e){return e(Object(p["d"])({pref:"welcome_place_state",value:"decayed"}))});var B=Object(l["b"])("Fetch messages for channel overview",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.messageTimestamps;if(!a||!n)return Promise.resolve();var i=n.map(function(t){return e(Object(c["b"])({channelId:a,oldest:t,latest:t,limit:1}))});return Promise.all(i).then(function(t){var r={};t.forEach(function(e){(e&&e.msgs||[]).forEach(function(e){r[e.ts]=e})});e(Object(j["d"])({channelId:a,messages:r}))})});B.propTypes={channelId:s["b"].string.isRequired,messageTimestamps:s["b"].arrayOf(s["b"].string).isRequired};var U=Object(l["b"])("Decay Welcome Place page if needed",function(){var e=Object(i["method"])(function(e,t){var r=t();if(Object(M["a"])(r))return Promise.resolve();var a=Object(R["c"])(r);var n=P(a);if(n)return e(L());return Promise.resolve()});return function(t,r){return e.apply(this,arguments)}}());U.propTypes={};var q=Object(l["b"])("Fetch and set welcome place data",function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:r=Object(E["f"])();s.next=3;return Object(i["resolve"])(t(h({locale:r})));case 3:a=s.sent;s.next=6;return Object(i["resolve"])(t(Object(j["f"])(n()({},a,{locale:r}))));case 6:s.next=8;return Object(i["resolve"])(t(U()));case 8:case"end":return s.stop()}},e,x)}));return function(t){return e.apply(this,arguments)}}());q.propTypes={};var G=Object(l["b"])("Fetch and set welcome place data",function(e,t){var r=t();var a=Object(R["a"])(r);if(a&&Date.now()-a>D||0===Object(R["c"])(r).length||Object(R["b"])(r)!==Object(E["f"])())return e(q());return Promise.resolve()});G.propTypes={};var H=Object(l["b"])("Update the state of a workflow task and reload the welcome place data",function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.userTaskId,s=a.state;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:if(!("in_progress"===s)){r.next=5;break}r.next=3;return Object(i["resolve"])(t(Object(f["d"])({userTaskId:n})));case 3:r.next=10;break;case 5:if(!("completed"===s)){r.next=10;break}r.next=8;return Object(i["resolve"])(t(Object(f["b"])({userTaskId:n})));case 8:r.next=10;break;case 10:r.next=12;return Object(i["resolve"])(t(q()));case 12:case"end":return r.stop()}},e,x)}));return function(t,r,a){return e.apply(this,arguments)}}());H.propTypes={userTaskId:s["b"].number,state:s["b"].string};var W=Object(l["b"])("Sends the user to #general and shows the workflow item coachmark if applicable",function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=t(Object(O["getGeneralChannel"])());n.next=3;return Object(i["resolve"])(r.promise||Promise.resolve(r));case 3:a=n.sent;n.next=6;return Object(i["resolve"])(t(Object(b["a"])({channelId:a.id})));case 6:Object(o["a"])()?t(Object(u["c"])(true)):Object(d["b"])();case 7:case"end":return n.stop()}},e,x)}));return function(t){return e.apply(this,arguments)}}());W.propTypes={};var V=Object(l["b"])("Clog a click on Welcome Place sidebar close button",function(){var e=Object(i["method"])(function(e,t){var r=t();var a=Object(_["a"])({state:r});a.track("WELCOME_PLACE",{contexts:{ui_context:{action:y["w"].CLICK,ui_element:y["z"].WELCOME_PLACE_SIDEBAR_DISMISS_BUTTON,ui_properties:{element_type:y["k"].BUTTON}},welcome_place:{welcome_session_id:Object(M["a"])(r)?Object(R["e"])(r):null}}})});return function(t,r){return e.apply(this,arguments)}}());W.propTypes={}},,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(2);var l=r(688);var c=r(71);var u=r(20);var d=Object(u["b"])("TS.debug_widget.isVisible");var p=Object(u["b"])("TS.debug_widget.setFrameRate");r.d(t,"f",function(){return O});r.d(t,"h",function(){return k});r.d(t,"j",function(){return E});r.d(t,"d",function(){return j});r.d(t,"b",function(){return C});r.d(t,"c",function(){return S});r.d(t,"g",function(){return w});r.d(t,"i",function(){return I});r.d(t,"e",function(){return T});r.d(t,"a",function(){return A});var v=100;var m=1e3;var h=300;var f=1e3;var b=500;var g=60;var _=function(){function e(){n()(this,e);this.enabledForPRQMetrics=false;this.enabledForClientStats=false;this.resetCountersForClientStats();this.resetCountersForPRQMetrics();this.beachballsTotal=0;this.stuttersTotal=0;this.rafHandler=this.rafHandler.bind(this)}s()(e,[{key:"isEnabled",value:function e(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function e(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats();this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics();this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function e(){this.beachballs=0;this.frameRates=[];this.stutters=0;this.lastRafHandlerTimeForClientStats=window.performance.now();this.fpsIndex=0;this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function e(){if(!this.isEnabledForClientStats())return;var t=window.performance.now();var r=t-this.lastRafHandlerTimeForClientStats;this.lastRafHandlerTimeForClientStats=t;if(r>m){this.beachballs+=1;this.beachballsTotal+=1}else if(r>v){this.stutters+=1;this.stuttersTotal+=1}0===this.fpsIndex&&(this.fpsStartTime=t);this.fpsIndex+=1;if(this.fpsIndex===h){var a=(t-this.fpsStartTime)/1e3;var n=Math.floor(this.fpsIndex/a);this.fpsIndex=0;d()&&p(n);this.frameRates.push(n)}}},{key:"startClientStats",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForClientStats=true;this.resetCountersForClientStats()}},{key:"stopClientStats",value:function e(){this.enabledForClientStats=false}},{key:"storeClientStats",value:function e(){var t=Object(c["a"])();t.count("stutters",this.stutters);t.count("beachballs",this.beachballs);if(!Object(o["isEmpty"])(this.frameRates)){var r=Object(o["min"])(this.frameRates);var a=void 0;var n=this.frameRates.sort();var i=Math.floor(n.length/2);a=n.length%2===1?n[i]:(n[i-1]+n[i])/2;t.store("fps_min",r);t.store("fps_median",a)}this.stutters=void 0;this.beachballs=void 0;this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function e(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function e(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function e(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function e(){this.histJankyWindows={};this.histFrameRenderTime={};this.durationMs=0;this.lastRafHandlerTimeForPRQMetrics=void 0;this.nextJankyWindowSampleIntervalNumber=1;this.framesInPreviousJankyWindowSample=0;this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(r<1)return;var a=Math.max(g-t,0);this.histJankyWindows[a]=(this.histJankyWindows[a]||0)+r}},{key:"sampleJankyWindows",value:function e(){var t=Object(l["d"])(this.durationMs,9)>b*this.nextJankyWindowSampleIntervalNumber;var r=Math.floor(this.durationMs/b);var a=r-this.nextJankyWindowSampleIntervalNumber;if(t){if(this.durationMs>=f){this.recordJankyWindows(0,a-1);this.recordJankyWindows(this.framesInCurrentJankyWindowSample,a>0?1:0);this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)}this.nextJankyWindowSampleIntervalNumber=r+1;this.framesInPreviousJankyWindowSample=a>0?0:this.framesInCurrentJankyWindowSample;this.framesInCurrentJankyWindowSample=0}this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function e(){if(!this.isEnabledForPRQMetrics())return;var t=window.performance.now();if("undefined"===typeof this.lastRafHandlerTimeForPRQMetrics){this.lastRafHandlerTimeForPRQMetrics=t;return}var r=t-this.lastRafHandlerTimeForPRQMetrics;var a=Object(l["d"])(Math.round(r,0),2);this.histFrameRenderTime[a]=(this.histFrameRenderTime[a]||0)+1;this.lastRafHandlerTimeForPRQMetrics=t;this.durationMs+=r;this.sampleJankyWindows()}},{key:"startPRQMetrics",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForPRQMetrics=true;this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function e(){this.enabledForPRQMetrics=false}},{key:"isEnabledForPRQMetrics",value:function e(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function e(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]);return e}();_.instance=null;function y(){null===_.instance&&(_.instance=new _);return _.instance}var O=y().startClientStats.bind(_.instance);var k=y().stopClientStats.bind(_.instance);var E=y().storeClientStats.bind(_.instance);var j=y().isEnabledForClientStats.bind(_.instance);var C=y().getTotalBeachballCount.bind(_.instance);var S=y().getTotalStutterCount.bind(_.instance);var w=y().startPRQMetrics.bind(_.instance);var I=y().stopPRQMetrics.bind(_.instance);var T=y().isEnabledForPRQMetrics.bind(_.instance);var A=y().getPRQMetrics.bind(_.instance)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(0);var n=r(18);var i=Object(n["b"])("sets persistence hashes in the persistence hashes store");i.propTypes=a["b"].object},,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"addInviter",function(){return m});r.d(t,"removeInviter",function(){return h});r.d(t,"getInviter",function(){return b});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(2);var c=r.n(l);var u=r(18);var d=r(36);var p=r(14);var v;var m=Object(u["b"])("Add an inviter for a channel");m.propTypes={channelId:o["b"].string.isRequired,inviter:o["b"].string.isRequired};var h=Object(u["b"])("Remove an inviter for a channel");h.propTypes=o["b"].string.isRequired;var f=Object(d["b"])((v={},n()(v,m,function(e,t){var r=t.channelId,a=t.inviter;if(!r||!a)return e;return s()({},e,n()({},r,a))}),n()(v,h,function(e,t){if(!t||!e[t])return e;return c.a.omit(e,t)}),v),{},{persistenceEnabled:true});f.propTypes=o["b"].objectOf(o["b"].string);t["default"]=f;var b=Object(p["b"])(function(e,t){return e&&e.channelsMeta&&e.channelsMeta.inviters&&e.channelsMeta.inviters[t]})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(13);var b=r(2);var g=r(1757);var _=r(17);var y=r(10);var O=r(186);var k=r(258);var E=r(202);var j=r(22);var C=r(37);var S=r.n(C);var w=r(26);var I=r.n(w);var T=r(16);var A=r.n(T);var N=r(1280);var P=r(442);var R=r(321);var M=r(28);var x=r(1294);var D=r(1510);var F={default:"default",short:"short"};var L=new y["b"]("form");var B={autoSelectFirstOption:h["b"].bool,className:h["b"].string,displayValue:h["b"].string,id:h["b"].string,isLoading:h["b"].bool,labelId:h["b"].string,membersOnly:h["b"].bool,name:h["b"].string,onChange:h["b"].func,onClearButtonClick:h["b"].func.isRequired,onClose:h["b"].func,onFilterInputChange:h["b"].func,onOptionHighlighted:h["b"].func,onOutsideClick:h["b"].func,onOpen:h["b"].func,onScroll:h["b"].func,optionClassName:h["b"].string,optionGroups:h["b"].array,options:h["b"].array,optionsListOffsetBottom:h["b"].number,optionsListOffsetTop:h["b"].number,optionsListWidth:h["b"].number,optionsRowHeight:h["b"].number,pillarClassName:h["b"].string,placeholder:h["b"].string,selectedOption:h["b"].object,selectedValueClassName:h["b"].string,type:h["b"].oneOf(Object(b["values"])(F)),useFullWidthOptions:h["b"].bool,usePlaceholderOption:h["b"].bool,wrapperClassName:h["b"].string,value:h["b"].string};var U={className:null,displayValue:void 0,id:"select-"+Object(R["d"])(),isLoading:false,labelId:null,membersOnly:true,name:null,onChange:b["noop"],onClose:b["noop"],onFilterInputChange:b["noop"],onOptionHighlighted:b["noop"],onOutsideClick:b["noop"],onOpen:b["noop"],optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:void 0,selectedOption:void 0,selectedValueClassName:void 0,type:F.default,usePlaceholderOption:true,wrapperClassName:null,value:""};var q=function(e){p()(t,e);function t(e){s()(this,t);if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.preventFocusAndBlur=false;r.state={filterQuery:"",isOpen:false,selectedOptionValue:""};Object(g["a"])(r,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]);return r}l()(t,[{key:"componentDidMount",value:function e(){this.initKeyCommands()}},{key:"componentWillReceiveProps",value:function e(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function e(t,r){var a=this.props,n=a.onClose,i=a.onOpen,s=a.selectedOption;var o=this.state,l=o.isOpen,c=o.selectedOptionValue;if(s){var u=Object(E["h"])(s)?Object(_["getMemberRealName"])(s):Object(b["get"])(s,"name");u!==c&&this.setSelectedOptionValue(u)}else c&&this.setSelectedOptionValue("");if(this.state.isOpen){document.addEventListener("click",this.onOutsideClicked);if(!r.isOpen){this.filterInput&&this.filterInput.focus();i(this.filterInput)}}else{document.removeEventListener("click",this.onOutsideClicked);r.isOpen&&n()}this.filterInput&&l&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.onOutsideClicked);this.resetKeyCommads()}},{key:"onBlurred",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(false)}},{key:"onClicked",value:function e(t){var r=t.target===this.filterInput;r?this.toggleOpenState(true):this.toggleOpenState()}},{key:"onClearInput",value:function e(){var t=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");this.toggleOpenState(false);t()}},{key:"onFilterInputChanged",value:function e(){if(this.filterInput){var t=this.filterInput.value;this.props.onFilterInputChange(t);this.setFilterQuery(t)}}},{key:"onFocused",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(true);var t=this.props.displayValue;t&&this.filterInput&&(this.filterInput.value=t)}},{key:"onKeyPressedEsc",value:function e(){if(this.state.isOpen){this.toggleOpenState(false);this.focus()}}},{key:"onKeyPressedUpOrDown",value:function e(t){if(!this.state.isOpen){this.toggleOpenState(true);t.stopPropagation()}}},{key:"onOptionSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value;if(!r)return;var a=this.getSelectedOptionDisplayValue({value:r});this.setSelectedOptionValue(a);this.props.onChange(r);this.toggleOpenState(false);this.filterInput&&this.filterInput.blur()}},{key:"onOutsideClicked",value:function e(t){if(this.wrapper&&!this.wrapper.contains(t.target)){this.toggleOpenState(false);this.props.onOutsideClick()}}},{key:"onWrapperMouseDownOrTouchStart",value:function e(){this.preventFocusAndBlur=true}},{key:"onWrapperMouseUpOrTouchEnd",value:function e(){this.preventFocusAndBlur=false}},{key:"onSearchAgainTriggered",value:function e(){var t=this.props.onClearButtonClick;this.preventFocusAndBlur=true;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");t();this.filterInput.focus();this.toggleOpenState();this.preventFocusAndBlur=false}},{key:"maybeShowOptions",value:function e(){var t=this.props,r=t.selectedOption,a=t.membersOnly;var n=this.getFilterQuery();var i=a?this.getFilteredOptions:this.getFilteredOptionGroups;if(n.length>0||r)return i();return[]}},{key:"getPlaceholder",value:function e(){return this.props.placeholder||L.t("Choose an option\u2026")}},{key:"getFilteredOptionGroups",value:function e(){var t=this.props,r=t.optionGroups,a=t.usePlaceholderOption;var n=this.getFilterQuery();if(!r)return null;if(!n&&a)return[this.getPlaceholderOptionGroup()].concat(I()(r));return r}},{key:"getFilteredOptions",value:function e(){var t=this.props,r=t.options,a=t.usePlaceholderOption;var n=this.getFilterQuery();if(!r)return null;if(!n&&a)return[this.getPlaceholderOption()].concat(I()(r));return r}},{key:"getFilterQuery",value:function e(){return Object(b["get"])(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();return t.length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function e(){var t=this.props,r=t.optionsListOffsetBottom,a=t.optionsListOffsetTop,n=t.optionsListWidth;var i=this.select.getBoundingClientRect();var s=this.select.offsetTop-Object(N["a"])(this.select,this.select.offsetParent);var o=this.select.offsetLeft;var l=this.select.offsetParent.clientHeight-s;var c=s+i.height;var u=i.bottom;var d=i.top;var p=n||i.width;return{bottom:u,offsetBottom:r,offsetTop:a,relativeBottom:c,relativeLeft:o,relativeTop:l,top:d,width:p}}},{key:"getPlaceholderOption",value:function e(){return{isPlaceholder:true,label:this.getPlaceholder(),value:""}}},{key:"getPlaceholderOptionGroup",value:function e(){return{isPlaceholder:true,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value;var a=this.props,n=a.optionGroups,i=a.options;var s=n?Object(b["flatMap"])(n,"options"):i;var o=Object(b["find"])(s,{value:r});return Object(b["get"])(o,"displayValue")}},{key:"setFilterQuery",value:function e(t){this.setState(function(){return{filterQuery:t}})}},{key:"setSelectedOptionValue",value:function e(t){this.setState(function(){return{selectedOptionValue:t}})}},{key:"setRef",value:function e(t){var r=this;return function(e){r[t]=e}}},{key:"focus",value:function e(){this.preventFocusAndBlur=true;this.select.focus();this.preventFocusAndBlur=false}},{key:"blur",value:function e(){this.select.blur();this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function e(t){var r=t.label.toLowerCase();var a=this.getFilterQuery().toLowerCase();return-1!==r.indexOf(a)}},{key:"initKeyCommands",value:function e(){this.keyCommands=new O["a"](this.select);this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function e(t){this.setState(function(e){var r={isOpen:Object(b["isUndefined"])(t)?!e.isOpen:t};r.isOpen||(r.filterQuery="");return r})}},{key:"renderFilterInput",value:function e(){var t=this.state,r=t.filterQuery,a=t.selectedOptionValue;var n=this.props.displayValue;var i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.getPlaceholder(),ref:this.setRef("filterInput"),type:"text"};i.value=a&&!r?a:a||!n||r?r:n;return m.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function e(){if(!this.state.isOpen)return null;var t=this.props,r=t.autoSelectFirstOption,a=t.isLoading,n=t.membersOnly,i=t.optionClassName,s=t.optionsRowHeight,o=t.pillarClassName,l=t.useFullWidthOptions,c=t.value,u=t.onScroll,d=t.onOptionHighlighted;var p=n?240:400;return m.a.createElement(x["a"],{autoSelectFirstOption:r,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:a,maxListHeight:p,onOptionSelected:this.onOptionSelected,optionClassName:i,onScroll:u,optionGroups:n?null:this.maybeShowOptions(),options:n?this.maybeShowOptions():null,optionsRowHeight:s,pillarClassName:o,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:l,value:c,onActiveOptionUpdated:d})}},{key:"renderOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();var r=L.rt('No workspaces found matching <span class="sk_black bold">{query}</span>.',{query:t});var a=L.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return m.a.createElement("div",{className:"p-workspace_search__no-results-message"},m.a.createElement("p",{className:"margin_0"},r),m.a.createElement("p",{className:"margin_0"},a))}},{key:"renderOptionsListHintText",value:function e(){var t=this.props.membersOnly;var r=t?L.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>.'):L.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>, or search for a <span class="sk_black bold">specific workspace</span>.');return m.a.createElement("div",{className:"p-workspace_search__no-results-message"},m.a.createElement("p",{className:"margin_0"},r))}},{key:"render",value:function e(){var t=this.props,r=t.autoSelectFirstOption,a=t.className,i=t.displayValue,s=t.isLoading,o=t.labelId,l=t.membersOnly,c=t.name,u=t.onChange,d=t.onClearButtonClick,p=t.onClose,v=t.onFilterInputChange,h=t.onOutsideClick,f=t.onOpen,b=t.onOptionHighlighted,g=t.onScroll,_=t.optionClassName,y=t.options,O=t.optionsListOffsetBottom,k=t.optionsListOffsetTop,E=t.optionsListWidth,j=t.optionsRowHeight,C=t.optionGroups,w=t.pillarClassName,I=t.placeholder,T=t.selectedOption,N=t.selectedValueClassName,P=t.type,R=t.useFullWidthOptions,x=t.usePlaceholderOption,D=t.wrapperClassName,F=S()(t,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]);var L=this.state.filterQuery;var B=A()("c-input_select__wrapper",D);var U=A()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===P},a);var q=A()("p-workspace_search__clear-button",{hidden:!L&&!i});return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:B,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},m.a.createElement("div",n()({},F,{"aria-labelledby":o,className:U,"data-name":c,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),m.a.createElement(M["c"],{className:q,onClick:this.onClearInput,ref:this.setRef("closeButton")}))}}]);return t}(P["a"]);q.displayName="WorkspaceSearchSelect";q.propTypes=B;q.defaultProps=U;var G=q;var H=r(444);var W=r(2130);var V={item:h["b"].object,type:h["b"].oneOf(["member","workspace"]),featureReactMessages:h["b"].bool.isRequired,featureReactMemberProfileCard:h["b"].bool.isRequired};var K={item:{},type:"member"};var z=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(r,["maybeRenderTitle","maybeRenderEmail"]);return r}l()(t,[{key:"maybeRenderTitle",value:function e(t){if(!t)return null;return m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"maybeRenderEmail",value:function e(t){if(!t)return null;return m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"renderEntityIcon",value:function e(t){var r=t.item,a=t.type;var n=this.props,i=n.featureReactMemberProfileCard,s=n.featureReactMessages;return m.a.createElement(H["a"],{entityType:a,dimension:36,entityData:r,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:s,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function e(t){var r=t.item,a=t.type;var n=Object(b["get"])(r,"profile");var i=n.real_name,s=n.email,o=n.title;return m.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:r,type:a}),m.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},m.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(o),this.maybeRenderEmail(s))))}},{key:"renderItemAsWorkspace",value:function e(t){var r=t.item,a=t.type;var n=r.name,i=r.description;return m.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:r,type:a}),m.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},m.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function e(){var t=this.props,r=t.item,a=t.type;return"member"===a?this.renderItemAsMember({item:r,type:a}):this.renderItemAsWorkspace({item:r,type:a})}}]);return t}(v["PureComponent"]);z.displayName="WorkspaceSearchOptionsListItem";var Q=z;z.defaultProps=K;var Y=r(2132);var J=new y["b"]("workspace_directory");var X={className:h["b"].string,containerIdSelector:h["b"].string,fetchDirectoryWorkspaces:h["b"].func.isRequired,fetchMembers:h["b"].func.isRequired,membersOnly:h["b"].bool,onClearInput:h["b"].func,onOptionsListOpened:h["b"].func,onOptionsListClosed:h["b"].func,prepopulatedOption:h["b"].object,triggerAction:h["b"].func};var Z={className:"",containerIdSelector:"",membersOnly:true,onClearInput:b["noop"],onOptionsListClosed:b["noop"],onOptionsListOpened:b["noop"],prepopulatedOption:void 0,triggerAction:b["noop"]};var $=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:true,isAnOptionHighlighted:false};Object(g["a"])(r,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]);r.select=null;r.debouncedOnFilterInputChange=Object(b["debounce"])(r.onFilterInputChange,100);return r}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.prepopulatedOption,a=t.membersOnly;Object(b["isEmpty"])(r)||this.setPrepopulatedOptionData(r);this.getOptionsFetcher();a||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function e(t){var r=this.props.prepopulatedOption;var a=t.prepopulatedOption;Object(b["isEmpty"])(r)||r===a||this.setPrepopulatedOptionData(r)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function e(t){var r=this.props.membersOnly;var a=this.state,n=a.currentOptionsData,i=a.currentSearchQuery;var s=void 0;var o=void 0;var l=void 0;if(t===E["b"]){s={id:E["b"],displayValue:i};l=n}else if(r){s=Object(b["find"])(n,{id:t});o=Object(_["getMemberRealName"])(s);l=[s]}else{s=Object(b["find"])(Object(b["flatten"])(Object(b["values"])(n)),{id:t});var c=Object(E["h"])(s);o=c?Object(_["getMemberRealName"])(s):Object(b["get"])(s,"name");l=c?{members:[s],workspaces:[]}:{members:[],workspaces:[s]}}this.setState(function(){var e={value:t,selectedOptionData:s,currentSearchQuery:t===E["b"]?i:o,nextCursorMark:"*",currentOptionsData:l};return e},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function e(){var t=this.props.onClearInput;this.clearInput();t()}},{key:"onFilterInputChange",value:function e(t){var r=this.props,a=r.triggerAction,n=r.membersOnly;this.setIsLoading(true);this.setSelectedOptionData(null);this.setPrepopulatedOptionData(null);this.setValue(null);n&&a({selectedOptionData:null});this.getOptionsFetcher(t)}},{key:"onOptionHighlighted",value:function e(t){var r=!Object(b["isEmpty"])(t);this.setIsAnOptionHighlighted(r)}},{key:"onScroll",value:function e(t){var r=200;var a=this.state,n=a.currentSearchQuery,i=a.currentOptionsData,s=void 0===i?[]:i,o=a.totalResultsCount;var l=t.clientHeight,c=t.scrollHeight,u=t.scrollTop;var d=c-(u+l)<r;d&&s.length<o&&this.getOptionsFetcher(n,{doFetchNextPage:true})}},{key:"onClose",value:function e(){var t=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(false);t()}},{key:"onOpen",value:function e(){var t=this.props.onOptionsListOpened;t()}},{key:"onSearchAgainTriggered",value:function e(){this.select.onSearchAgainTriggered()}},{key:"onKeyPressedEnter",value:function e(){if(this.props.membersOnly)return;var t=this.state,r=t.selectedOptionData,a=t.currentSearchQuery,n=t.isAnOptionHighlighted;if(!a||n)return;var i=Object(b["get"])(this.select,"filterInput.value",a);if(!r){this.select.blur();this.setState(function(){var e={selectedOptionData:{id:E["b"],displayValue:i},currentSearchQuery:i,nextCursorMark:"*"};return e},this.triggerActionWithValue)}}},{key:"setSelectRef",value:function e(t){this.select=t}},{key:"setCurrentOptionsData",value:function e(t){var r=t.optionData,a=t.isNewSearch,n=t.totalResultsCount;var i=this.state.currentOptionsData;var s=void 0;s=a?r:Object(b["unionBy"])(i,r,"id");this.setState(function(){return{currentOptionsData:s,totalResultsCount:n}});this.setIsLoading(false)}},{key:"setCurrentOptionGroupsData",value:function e(t){var r=t.memberOptionData,a=t.workspaceOptionData,n=t.isNewSearch,i=t.totalResultsCount,s=t.memberResultsCount,o=void 0===s?0:s,l=t.workspaceResultsCount,c=void 0===l?0:l;var u=this.state.currentOptionsData;var d=void 0;var p=!o&&!c||i?i:o+c;d=n?{members:r,workspaces:a}:{members:Object(b["unionBy"])(Object(b["get"])(u,"members"),r,"id"),workspaces:Object(b["unionBy"])(Object(b["get"])(u,"workspaces"),a,"id")};this.setState(function(){return{currentOptionsData:d,totalResultsCount:p,memberResultsCount:o,workspaceResultsCount:c}});this.setIsLoading(false)}},{key:"setCurrentSearchQuery",value:function e(t){this.setState(function(){return{currentSearchQuery:t}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{loadingResults:t}})}},{key:"setIsAnOptionHighlighted",value:function e(t){this.setState(function(){return{isAnOptionHighlighted:t}})}},{key:"setNextCursorMark",value:function e(t){this.setState(function(){return{nextCursorMark:t}})}},{key:"setPrepopulatedOptionData",value:function e(t){this.setState(function(){return{prepopulatedOptionData:t}})}},{key:"setSelectedOptionData",value:function e(t){this.setState(function(){return{selectedOptionData:t}})}},{key:"setValue",value:function e(t){this.setState(function(){return{value:t}})}},{key:"getBoundingRect",value:function e(t){this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(t));return this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getPlaceHolderText",value:function e(t){var r=J.t("Search for a teammate");var a=J.t("Search");return t?r:a}},{key:"getOptionsFetcher",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.forceNewSearch,n=void 0!==a&&a,i=r.doFetchNextPage,s=void 0!==i&&i;var o=this.state.currentSearchQuery;var l=this.props.membersOnly;var c=l?this.fetchMemberData:this.fetchMemberAndWorkspaceData;var u={searchTerm:t};if(!s&&t===o&&!n)return null;u.nextCursorMark=o===t?this.state.nextCursorMark:"";this.setCurrentSearchQuery(t);return c({args:u,forceNewSearch:n,newSearchQuery:t,stashedSearchQuery:o})}},{key:"initKeyCommands",value:function e(){var t=new O["a"];t.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]);return t}},{key:"fetchMemberData",value:function e(t){var r=this;var a=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;return o(a).then(function(e){var t=e.items,a=void 0===t?[]:t,o=e.next_cursor_mark,l=e.num_found;if(!a.length&&"*"!==o)return;r.setNextCursorMark(o);r.setCurrentOptionsData({optionData:a,isNewSearch:n||s!==i,totalResultsCount:l})})}},{key:"fetchMemberAndWorkspaceData",value:function e(t){var r=this;var a=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;var l=[o(a),this.props.fetchDirectoryWorkspaces(a)];return Promise.all(l).then(function(e){var t=e[0],a=t.items,o=void 0===a?[]:a,l=t.next_cursor_mark,c=t.num_found;var u=e[1],d=u.items,p=void 0===d?[]:d,v=u.next_cursor_mark,m=u.num_found;var h=void 0;if(!o.length&&"*"!==l&&!p.length&&"*"!==v)return;o.length&&!p.length?r.setNextCursorMark(l):p.length&&!o.length&&r.setNextCursorMark(v);o.length&&!p.length?h=c:p.length&&!o.length&&(h=m);r.setCurrentOptionGroupsData({memberOptionData:o,workspaceOptionData:p,isNewSearch:n||s!==i,totalResultsCount:h,memberResultsCount:c,workspaceResultsCount:m})})}},{key:"clearInput",value:function e(){var t=this.props.triggerAction;this.setSelectedOptionData(null);this.setCurrentSearchQuery(null);this.setPrepopulatedOptionData(null);this.setValue(null);this.getOptionsFetcher();t({selectedOptionData:null,type:null});this.select.toggleOpenState()}},{key:"focus",value:function e(){this.select.focus()}},{key:"blur",value:function e(){this.select.blur()}},{key:"triggerActionWithValue",value:function e(){var t=this.props.triggerAction;var r=this.state.selectedOptionData;var a=Object(E["h"])(r)?"member":"workspace";t({selectedOptionData:r,type:a})}},{key:"formatOptionsDataArrayOrObject",value:function e(t){var r=this;var a=this.props.membersOnly;var n=[];if(a)n=Object(b["map"])(t,function(e){return r.formatMemberOptionData(e)});else{var i=t.members,s=t.workspaces;var o=Object(b["get"])(i,"length",0);var l=Object(b["get"])(s,"length",0);if(o){var c={label:this.formatMemberOptionsGroupsHeader(),options:[]};var u=l>0?Object(b["slice"])(i,0,4):i;c.options=Object(b["map"])(u,function(e){return r.formatMemberOptionData(e)});n.push(c)}if(l){var d={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};d.options=Object(b["map"])(s,function(e){return r.formatWorkspaceOptionData(e)});n.push(d)}}return n}},{key:"formatMemberOptionData",value:function e(t){var r=Object(_["getMemberRealName"])(t);var a=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"member"}),value:a,displayValue:r}}},{key:"formatWorkspaceOptionData",value:function e(t){var r=Object(b["get"])(t,"name");var a=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"workspace"}),value:a,displayValue:r}}},{key:"formatMemberOptionsGroupsHeader",value:function e(){var t=this.state,r=t.memberResultsCount,a=t.selectedOptionData;var n=a?1:r;return J.t("Search by coworker ({num})",{num:n})}},{key:"formatWorkspaceOptionsGroupsHeader",value:function e(){var t=this.props.prepopulatedOption;var r=this.state,a=r.currentSearchQuery,n=r.workspaceResultsCount,i=r.selectedOptionData;var s=Object(b["get"])(t,"displayValue","")?Object(b["get"])(t,"displayValue",""):a;var o=i?1:n;var l=Object(E["c"])()?50:150;var c=Object(b["get"])(s,"length",0)>l?s.slice(0,l)+"...":s;return J.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(y["o"])(c),num:o})}},{key:"renderShowAllWorkspacesListItem",value:function e(){var t=this.state.currentSearchQuery;return m.a.createElement("div",{className:"p-workspace_search_options_list_item"},m.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},m.a.createElement(j["b"],{type:"search"})),m.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},m.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},J.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(y["o"])(t)}))))}},{key:"renderMemberItemTemplate",value:function e(t){var r=t.item,a=t.type;return m.a.createElement(Q,{item:r,type:a,featureReactMessages:true,featureReactMemberProfileCard:true})}},{key:"render",value:function e(){var t=this.props,r=t.containerIdSelector,a=t.membersOnly;var i=this.state,s=i.value,o=i.currentOptionsData,l=i.loadingResults,c=i.currentSearchQuery,u=i.prepopulatedOptionData,d=i.selectedOptionData;var p=this.getBoundingRect(r),v=p.bottom,h=void 0===v?0:v,f=p.top,g=void 0===f?0:f;var _={autoSelectFirstOption:true,className:"p-workspace_search",displayValue:c,isLoading:l,membersOnly:a,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-h,optionsListOffsetTop:g,optionsRowHeight:48,placeholder:this.getPlaceHolderText(a),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:false,useFullWidthOptions:true,value:s,wrapperClassName:"p-workspace_search__wrapper"};a?_.options=this.formatOptionsDataArrayOrObject(o):_.optionGroups=this.formatOptionsDataArrayOrObject(o);if(u&&!s)if(Object(b["get"])(u,"id")===E["b"]){_.selectedOption=u;_.displayValue=Object(b["get"])(u,"displayValue")}else{var y=Object(E["h"])(u)?this.formatMemberOptionData(u):this.formatWorkspaceOptionData(u);_.selectedOption=u;_.displayValue=Object(b["get"])(y,"displayValue")}return m.a.createElement("div",{className:"position_relative"},m.a.createElement(G,n()({},_,{ref:this.setSelectRef})))}}]);return t}(v["Component"]);$.displayName="WorkspaceSearch";$.defaultProps=Z;var ee={fetchMembers:k["r"],fetchDirectoryWorkspaces:k["j"]};var te=Object(f["connect"])(null,ee,null,{withRef:true})($);var re=t["a"]=te},,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(0);var n=r(1);var i=r.n(n);var s=r(95);var o=r(16);var l=r.n(o);var c=r(50);var u=r(10);var d=r(2297);var p=new u["b"]("app_token");var v={type:a["b"].oneOf(["unknown","non-existent"]),subtler:a["b"].bool,invert:a["b"].bool};var m={type:"unknown",subtler:false,invert:false};var h=function e(t){var r=l()("c-missing_app",{"c-missing_app--unknown":"unknown"===t.type,"c-missing_app--non_existent":"non-existent"===t.type,"c-missing_app--subtler":t.subtler,"c-missing_app--unknown_inverted":"unknown"===t.type&&t.invert,"c-missing_app--non_existent_inverted":"non-existent"===t.type&&t.invert});if("unknown"===t.type)return i.a.createElement(c["c"],{tip:p.t("Loading\u2026")},i.a.createElement("span",{className:r}));if("non-existent"===t.type)return i.a.createElement(c["c"],{tip:p.t("Private app info")},i.a.createElement("span",{className:r}));return null};h.defaultProps=m;var f=Object(s["pure"])(h);var b=t["a"]=f},,,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"updateLastNetworkSend",function(){return c});r.d(t,"getLastNetworkSend",function(){return p});var a=r(5);var n=r.n(a);var i=r(18);var s=r(36);var o=r(14);var l=r(0);var c=Object(i["b"])("Update the last time we sent something over the network");c.propTypes=null;var u=null;var d=Object(s["b"])(n()({},c,function(){return Date.now()}),u,{persistenceEnabled:false});d.propTypes=l["b"].number;t["default"]=d;var p=Object(o["b"])(function(e){return e&&e.lastNetworkSend})},function(e,t,r){"use strict";r.r(t);r.d(t,"setLastEKMChangeTimestamp",function(){return d});r.d(t,"getLastEKMChangeTimestamp",function(){return m});r.d(t,"test",function(){return b});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=Object(l["b"])("Sets the last-ekm-change timestamp");d.propTypes=o["b"].string;var p={ekmTs:h()};var v=Object(c["b"])(n()({},d,function(e,t){if(void 0===t||t===e.ekmTs)return e;return s()({},e,{ekmTs:t})}),p,{persistenceEnabled:true});v.propTypes={ekmTs:o["b"].string};t["default"]=v;var m=Object(u["b"])(function(e){return e&&e.ekmChanges&&e.ekmChanges.ekmTs});function h(){return f()}function f(){return Math.floor(Date.now()/1e3)+".000000"}var b={getDefaultLastEKMChangeTimestamp:h}},function(e,t,r){"use strict";r.r(t);r.d(t,"noopAction",function(){return c});var a=r(5);var n=r.n(a);var i=r(0);var s=r(65);var o=r(18);var l=r(36);var c=Object(o["b"])("NOOP");c.propTypes=null;var u=0;var d=Object(l["b"])(n()({},c,function(e){return e+1}),u,{persistenceEnabled:false});d.propTypes=i["b"].number;t["default"]=d;Object(s["exportToGlobalDebugger"])("dispatchNoop",function(){slackDebug.activeTeam.redux.dispatch(c())})},,,function(e,t,r){"use strict";r.d(t,"b",function(){return Z});r.d(t,"c",function(){return $});var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(0);var m=r(1);var h=r.n(m);var f=r(13);var b=r(2374);var g=r(2);var _=r.n(g);var y=r(1757);var O=r(16);var k=r.n(O);var E=r(12);var j=r(183);var C=r(150);var S=r(4);var w=r(35);var I=r(258);var T=r(17);var A=r(10);var N=r(294);var P=r(45);var R=r(22);var M=r(51);var x=r(28);var D=r(157);var F=r(444);var L=r(1171);var B=r(96);var U=r(1487);var q=r(778);var G=r(202);var H=r(1718);var W=r.n(H);var V=new A["b"]("grid_onboarding");var K={orgName:v["b"].string,selectedMember:v["b"].object.isRequired,featureZeroWorkspaceOnboarding:v["b"].bool.isRequired,fetchDirectoryWorkspaces:v["b"].func.isRequired,scrollElement:v["b"].any,enqueueToast:v["b"].func,onFooterClick:v["b"].func,clogger:v["b"].object.isRequired};var z={orgName:"",scrollElement:window,enqueueToast:g["noop"],onFooterClick:g["noop"]};var Q=24;var Y=1200;var J=Object(E["b"])();function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(g["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}function Z(e){var t=e.totalWorkspaces,r=e.onWorkspaces;return!t&&r}function $(e){var t=e.totalWorkspaces,r=e.onWorkspaces;return!t&&!r}function ee(e){if(!e)return"";return{oneJoinableWorkspace:V.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:V.t("Join the workspace that seems right for your role to get started."),noAccess:V.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:V.t("Try searching for someone else on your team."),onApiError:V.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,r=e.key,a=e.tag;if("a"===a)return h.a.createElement(M["a"],{onClick:function e(){return Object(N["b"])({reason:"Search failure, user initiated reload via link in error message",reasonKey:"search_results_failure",noCache:true})},target:"_self",key:r},t);return{text:t}})}}var te=function e(t){var r=t.workspaces,a=t.noAccessToWorkspaces,n=t.noWorkspaces,i=t.hasApiError,s=t.featureZeroWorkspaceOnboarding;if(!s)return"";var o=ee(s);if(i)return o.onApiError;var l=X(r).length;if(1===l)return o.oneJoinableWorkspace;if(l>1)return o.moreThanOneJoinableWorkspaces;if(a)return o.noAccess;if(n)return o.noWorkspaces;return""};var re=function e(t){var r=t.noAccessToWorkspaces,a=t.noWorkspaces,n=t.memberRealName,i=t.totalWorkspaces,s=t.hasApiError,o=t.featureZeroWorkspaceOnboarding;if(!o)return"";if(s)return V.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(A["o"])(n)});if(r)return V.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(A["o"])(n)});if(a)return V.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(A["o"])(n)});return V.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(A["o"])(n),numWorkspaces:i})};var ae=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isMobileView:false,loadingWorkspaces:false,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:false,hasApiError:false};r.resultsList=null;r.searchBar=null;r.userHasNoAccessToWorkspaces=false;r.memberHasNoWorkspaces=false;r.noWorkspacesToDisplay=false;r.doRenderSearchAgainButton=false;Object(y["a"])(r,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]);return r}l()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function e(t,r){this.maybeFetchNextPage(r);this.maybeTriggerNewSearch(r);this.maybeUpdateMemberRealName(r)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onFooterClick",value:function e(){this.props.onFooterClick()}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;var t=Object(G["c"])();var r=this.state.isMobileView!==t;(t||r)&&this.resultsList.invalidateRowHeights()}},{key:"onScroll",value:function e(t){var r=t.scrollTop,a=t.scrollHeight;this.doInfiniteScrollHandler({scrollTop:r,scrollHeight:a})}},{key:"onSearchAgainButtonClick",value:function e(t){t.preventDefault();t.stopPropagation();this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function e(t){var r=t.selectedOptionData;r&&this.setSelectedMember(r)}},{key:"onButtonActionReject",value:function e(t){var r=t.node;r&&this.setToastText(r)}},{key:"onButtonActionResolve",value:function e(t){var r=t.node,a=t.i,n=t.workspace;Object(g["isNumber"])(a)&&n&&this.setWorkspaceByIndex({index:a,workspace:n});r&&this.setToastText(r)}},{key:"setListRef",value:function e(t){this.resultsList=t}},{key:"setSearchBarRef",value:function e(t){this.searchBar=t}},{key:"getListKeys",value:function e(){if(!this.state.workspaces)return[];return this.state.workspaces.map(function(e){return String(e.id)})}},{key:"setHasApiError",value:function e(t){this.setState(function(){return{hasApiError:t}})}},{key:"setSelectedMember",value:function e(t){this.setState(function(){return{selectedMember:t}})}},{key:"setMemberRealName",value:function e(t){this.setState(function(){return{memberRealName:t}})}},{key:"setWorkspaceFetchOptions",value:function e(t){var r=t.workspaces,a=t.totalWorkspaces,n=t.onWorkspaces,i=t.nextCursorMark;this.setState(function(){return{workspaces:r,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:i}})}},{key:"setWorkspaceByIndex",value:function e(t){var r=t.index,a=t.workspace;this.setState(function(e){var t=[].concat(e.workspaces);if(r>=t.length){J.warn("SearchResultsScreen: Out of bounds index "+r+" passed into setWorkspaceByIndex");return e}t[r]=a;return{workspaces:t}})}},{key:"setLoadingWorkspaces",value:function e(t){this.setState(function(){return{loadingWorkspaces:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:h.a.createElement(D["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"maybeTriggerNewSearch",value:function e(t){if(t.selectedMember!==this.state.selectedMember){this.clearWorkspaceFetchOptions();this.setLoadingWorkspaces(true)}}},{key:"maybeUpdateMemberRealName",value:function e(t){if(t.selectedMember!==this.state.selectedMember){var r=Object(T["getMemberRealName"])(this.state.selectedMember);this.setMemberRealName(r)}}},{key:"doInfiniteScrollHandler",value:function e(t){var r=t.scrollTop,a=t.scrollHeight;var n=this.hasScrolledWithinScrollThreshold({scrollTop:r,scrollHeight:a});n&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(true):!n&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(false)}},{key:"fetchWorkspaces",value:function e(){var t=this;var r=this.state,a=r.nextCursorMark,n=r.selectedMember;this.setHasApiError(false);return this.props.fetchDirectoryWorkspaces({nextCursorMark:a,id:Object(g["get"])(n,"id"),type:"single_user"}).then(function(e){t.setLoadingWorkspaces(false);var r=e.num_found,n=e.on_workspaces,i=e.items;var s=i?[].concat(t.state.workspaces,i):[];t.setWorkspaceFetchOptions({workspaces:s,totalWorkspaces:r,onWorkspaces:n,nextCursorMark:e.next_cursor_mark});a||Object(G["e"])({anchorPage:"grid_onboarding",numSearchResults:Object(g["get"])(e,"num_found",0),clogger:t.props.clogger})}).catch(function(e){t.setHasApiError(true);t.setLoadingWorkspaces(false);J.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}},{key:"maybeFetchNextPage",value:function e(t){!t.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var r=t.scrollHeight,a=t.scrollTop;return r-(a+this.clientHeight)<Y}},{key:"hasFetchedAllWorkspaces",value:function e(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"clearWorkspaceFetchOptions",value:function e(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:false,nextCursorMark:null})}},{key:"renderSearchBar",value:function e(){return h.a.createElement("div",{className:"p-grid_onboarding_results__search"},h.a.createElement(L["a"],{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:true,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderHeading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var r=this.state,a=r.totalWorkspaces,n=r.selectedMember,i=r.hasApiError;var s=Object(T["getMemberRealName"])(n);var o=re({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:a,memberRealName:s,hasApiError:i,featureZeroWorkspaceOnboarding:t});var l=k()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return h.a.createElement("div",{className:l},h.a.createElement("span",{className:"p-grid_onboarding__results_heading"},h.a.createElement(F["a"],{entityType:"member",dimension:Q,entityData:n,featureReactMessages:true,customClasses:"p-grid_onboarding_results__icon"}),o))}},{key:"renderSubheading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var r=this.state,a=r.workspaces,n=r.hasApiError;var i=te({workspaces:a,featureZeroWorkspaceOnboarding:t,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:n});var s=k()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return h.a.createElement("div",{className:s},i)}},{key:"renderWorkspaceCard",value:function e(t){var r=this;var a=this.state,i=a.workspaces,s=a.totalWorkspaces;var o=k()("p-grid_onboarding_results__list_item",{margin_bottom_0:t===s-1});return h.a.createElement(U["a"],{team:i[t],size:"large",featureZeroWorkspaceOnboarding:true,className:o,onActionResolve:function e(a){return r.onButtonActionResolve(n()({},a,{i:t}))},onActionReject:function e(a){return r.onButtonActionReject(n()({},a,{i:t}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function e(){var t=this;var r=this.props.scrollElement;return h.a.createElement(b["a"],{scrollElement:r,onScroll:this.onScroll},function(e){var a=e.height,n=e.isScrolling,i=e.onChildScroll,s=e.scrollTop,o=e.registerChild;return h.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:o},h.a.createElement(q["a"],{keys:t.getListKeys(),rowRenderer:t.renderWorkspaceCard,ref:t.setListRef,scrollElement:r,onScroll:i,height:a,isScrolling:n,scrollTop:s}))})}},{key:"renderSearchAgainButton",value:function e(){return h.a.createElement(j["a"],{enabled:["feature_zero_workspace_onboarding"]},h.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},h.a.createElement(x["d"],{type:"outline",onClick:this.onSearchAgainButtonClick},V.t("Search Again"))))}},{key:"renderFooter",value:function e(){var t=this.props.orgName;var r=k()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return h.a.createElement(j["a"],{enabled:["feature_zero_workspace_onboarding"]},h.a.createElement(M["a"],{onClick:this.onFooterClick,className:r},V.t("View all {orgName} workspaces",{orgName:t}),h.a.createElement(R["a"],{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderInfiniteSpinner",value:function e(){return h.a.createElement("div",{className:"p-grid_onboarding__spinner"},h.a.createElement(B["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function e(){var t=this.state,r=t.loadingWorkspaces,a=t.selectedMember;var n=r&&this.memberHasNoWorkspaces;if(n||!a)return this.renderInfiniteSpinner();return h.a.createElement(h.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),r&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!r&&this.renderFooter())}},{key:"render",value:function e(){var t=this.state,r=t.totalWorkspaces,a=t.onWorkspaces,n=t.loadingWorkspaces,i=t.hasApiError;this.userHasNoAccessToWorkspaces=Z({totalWorkspaces:r,onWorkspaces:a});this.memberHasNoWorkspaces=$({totalWorkspaces:r,onWorkspaces:a});this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces;this.doRenderSearchAgainButton=!n&&this.noWorkspacesToDisplay&&!i;return h.a.createElement(j["a"],{enabled:["feature_zero_workspace_onboarding"]},h.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]);return t}(m["Component"]);ae.displayName="SearchResultsScreen";ae.defaultProps=z;var ne=function e(t,r){var a=r.selectedMember,n=r.workspaces;var i=Object(w["f"])(t);var s=Object(P["a"])({state:t});return{selectedMember:a,workspaces:n,orgName:i,clogger:s,featureZeroWorkspaceOnboarding:Object(S["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(S["isFeatureEnabled"])(t,"feature_single_user_workspace_pagination")}};var ie={enqueueToast:C["enqueueToast"],fetchDirectoryWorkspaces:I["j"]};t["a"]=Object(f["connect"])(ne,ie)(ae)},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(13);var b=r(2);var g=r(1757);var _=r(4);var y=r(231);var O=r(151);var k=r(48);var E=r(150);var j=r(692);var C=r(100);var S=r(99);var w=r(10);var I=r(12);var T=r(157);var A=r(84);var N=r(135);var P=r(54);var R=r(179);var M=r(687);var x=r(15);var D=r(271);var F=r(1153);var L=80;var B=new w["b"]("user_groups");var U=void 0;var q=void 0;function G(e,t){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;q={hasNameRequiredWarning:B.t("Please enter a name for this group."),hasReservedName:B.t('The name "{name}" is reserved and cannot be used.',{name:t,fallbackHash:"fc741acb2c5d6bf755a8dfceb173bf447313e359"}),hasMaxLengthWarning:B.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:L}),hasNameTakenWarning:B.t("This name is already in use by another group."),unknownError:B.t("Sorry, something went wrong. Please try a different name.")}}function H(e){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups_a11y_refactor"))return;U={admins:B.t("Team Admins"),owners:B.t("Team Owners")}}var W=Object(x["b"])("Validate user group name",function(e,t,r){var a=r.name,n=r.prevName,i=r.reason;var s=t();G(s,a);H(s);if(!a||!a.trim())return Promise.resolve(q.hasNameRequiredWarning);var o=a.toLowerCase().trim();if(n&&o===n.toLowerCase().trim())return Promise.resolve("");if(Object(_["isFeatureEnabled"])(s,"feature_sonic_user_groups_a11y_refactor")&&(o===U.admins.toLowerCase()||o===U.owners.toLowerCase()))return Promise.resolve(q.hasReservedName);if(Object(F["a"])(a)>L)return Promise.resolve(q.hasMaxLengthWarning);return e(Object(D["m"])({name:a,reason:i})).then(function(e){var t=e.error;if("name_already_exists"===t)return q.hasNameTakenWarning;if(t)return q.unknownError;return""})});W.propTypes={name:h["b"].string,prevName:h["b"].string};var V=W;var K={};Object.defineProperty(K,"handleErrorSnameErrorStringstrings",{get:function e(){return q},set:function e(t){q=t}});var z=new w["b"]("user_groups");var Q=80;var Y=void 0;var J=void 0;function X(e,t){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;Y={hasHandleRequiredWarning:z.t("Please enter a handle for this group."),hasMaxLengthWarning:z.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:Q}),hasReservedHandle:z.t("The group name @{handle} is reserved and cannot be used.",{handle:t,fallbackHash:"87ee177397df658b72975b506208aebb74090907"}),hasSpecialsWarning:z.t("Handles can only contain letters or numbers."),hasPunctuationWarning:z.t("Handles can only contain letters or numbers."),hasLowercaseWarning:z.t("Handles can only be in lowercase."),hasHandleTakenWarning:z.t("This handle is already in use by a member, channel, or another group."),unknownError:z.t("Sorry, something went wrong. Please try a different handle.")}}function Z(e){if(!Object(_["isFeatureEnabled"])(e,"feature_sonic_user_groups_a11y_refactor"))return;J={admins:z.t("admins"),owners:z.t("owners")}}var $=Object(x["b"])("Validate user group handle",function(e,t,r){var a=r.handle,n=r.prevHandle,i=r.reason;var s=t();X(s,a);Z(s);if(!a||!a.trim())return Promise.resolve(Y.hasHandleRequiredWarning);if(a===n)return Promise.resolve("");if(Object(_["isFeatureEnabled"])(s,"feature_sonic_user_groups_a11y_refactor")&&(a.toLowerCase()===J.admins.toLowerCase()||a.toLowerCase()===J.owners.toLowerCase()))return Promise.resolve(Y.hasReservedHandle);if(/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(a.trim()))return Promise.resolve(Y.hasSpecialsWarning);if(/^[-|_]+$/.test(a))return Promise.resolve(Y.hasPunctuationWarning);if(/[A-Z]/.test(a))return Promise.resolve(Y.hasLowercaseWarning);if(Object(F["a"])(a)>Q)return Promise.resolve(Y.hasMaxLengthWarning);return e(Object(D["l"])({handle:a,reason:i})).then(function(e){var t=e.error;if("handle_already_exists"===t)return Y.hasHandleTakenWarning;if(t)return Y.unknownError;return""})});$.propTypes={handle:h["b"].string,prevHandle:h["b"].string};var ee=$;var te={};Object.defineProperty(te,"handleErrorStrings",{get:function e(){return Y},set:function e(t){Y=t}});var re=r(1727);var ae=new w["b"]("user_groups");var ne={userGroup:h["b"].object.isRequired,detailsFormValues:h["b"].shape({name:h["b"].string,handle:h["b"].string,purpose:h["b"].string,channels:h["b"].array}),validateUserGroupHandle:h["b"].func.isRequired,validateUserGroupName:h["b"].func.isRequired,setFormErrors:h["b"].func.isRequired,featureSonicUserGroups:h["b"].bool.isRequired,onRef:h["b"].func.isRequired,onPurposeChange:h["b"].func.isRequired,errors:h["b"].shape({nameError:h["b"].string,handleError:h["b"].string,purposeError:h["b"].string}),submitError:h["b"].string,setRequiredFieldsEmpty:h["b"].func.isRequired,purposeMaxLength:h["b"].number.isRequired};var ie={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var se=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var a=!r.state.name||!r.state.handle;r.props.setRequiredFieldsEmpty(a);r.validateUserGroupName=Object(b["debounce"])(r.validateUserGroupName,300).bind(r);r.validateUserGroupHandle=Object(b["debounce"])(r.validateUserGroupHandle,300).bind(r);Object(g["a"])(r,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","getFormValues","setUserGroupFormRef","maybeRenderApiError","focusNameInput"]);r.postValidateHandle=null;r.postValidateName=null;r.nameInputRef=m.a.createRef();return r}l()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this);this.focusNameInput()}},{key:"componentDidUpdate",value:function e(t){if(t!==this.props){var r=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(r)}}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onNameChange",value:function e(t){if(this.postValidateName){this.postValidateName.cancel();this.postValidateName=null}this.setState(function(){return{name:t}});return this.validateUserGroupName(t)}},{key:"onHandleChange",value:function e(t){if(this.postValidateHandle){this.postValidateHandle.cancel();this.postValidateHandle=null}var r=t.replace(/ /g,"");this.setState(function(){return{handle:r}});if(" "!==t.charAt(0))return this.validateUserGroupHandle(r);return Promise.resolve()}},{key:"onPurposeChange",value:function e(t){this.props.onPurposeChange(t);this.setState(function(){return{purpose:t}})}},{key:"onChannelsUpdate",value:function e(t){var r=t.map(function(e){return e.value});this.setState(function(){return{channels:r}})}},{key:"getFormValues",value:function e(){return this.state}},{key:"setUserGroupFormRef",value:function e(t){this.defaultChannelsRef=t}},{key:"focusNameInput",value:function e(){this.nameInputRef.current.focus()}},{key:"validateUserGroupHandle",value:function e(t){var r=this;var a=this.props.userGroup;return this.props.validateUserGroupHandle({handle:t,prevHandle:Object(S["f"])(a,{includeAtSign:false}),reason:"user-group-edit-create-form"}).then(function(e){r.props.setFormErrors({handleError:e})}).finally(function(){r.postValidateHandle=null})}},{key:"validateUserGroupName",value:function e(t){var r=this;var a=this.props.userGroup;return this.props.validateUserGroupName({name:t,prevName:Object(S["h"])(a),reason:"user-group-edit-create-form"}).then(function(e){r.props.setFormErrors({nameError:e})}).finally(function(){r.postValidateName=null})}},{key:"hasValidationErrors",value:function e(t){return Object(b["find"])(t,function(e){return e})}},{key:"maybeRenderApiError",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var t=ae.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return m.a.createElement(N["a"],{level:"error",type:"inline",className:"margin_bottom_100"},t)}return false}},{key:"maybeRenderAutogeneratedUserGroupAlert",value:function e(){var t=this.props.userGroup;if(!Object(S["m"])(t))return null;var r=ae.t("This user group is automatically generated for Workspace Admins.",{fallbackHash:"0cf6a765aa60fc4bc7f34f9ec7e18139d7ab4c37"});var a=ae.t("This user group is automatically generated for Workspace Owners.",{fallbackHash:"18d8fa9ec13425420cc46bc2669fc1f2055284c6"});var n=void 0;Object(S["o"])(t)&&(n=a);Object(S["n"])(t)&&(n=r);return m.a.createElement(N["a"],{level:"info",type:"inline",className:"margin_bottom_100"},n)}},{key:"renderUserGroupNameField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=ae.t("Name");var a=ae.t("e.g. Accounts Team");return m.a.createElement("div",null,m.a.createElement(P["a"],{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:r},m.a.createElement(R["a"],{name:"user_group_name",ref:this.nameInputRef,id:"name_input",placeholder:a,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function e(r){return t.onNameChange(r)},errorText:this.props.errors.nameError,isRequired:true,useInlineAlert:true,isDisabled:Object(S["m"])(this.props.userGroup)})))}},{key:"renderUserGroupHandleField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=ae.t("e.g. accounts-team");var a=ae.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces.");var n=ae.t("Handle");return m.a.createElement("div",null,m.a.createElement(P["a"],{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:n},m.a.createElement(R["a"],{name:"user_group_handle",id:"handle_input",placeholder:r,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function e(r){return t.onHandleChange(r)},errorText:this.props.errors.handleError,hintText:a,isRequired:true,icon:"mentions",useInlineAlert:true,isDisabled:Object(S["m"])(this.props.userGroup)})))}},{key:"renderUserGroupPurposeField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=ae.t("Purpose");var a=ae.t("What is this group about?");return m.a.createElement("div",null,m.a.createElement(P["a"],{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:r,optional:true},m.a.createElement(M["a"],{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function e(r){return t.onPurposeChange(r)},errorText:this.props.errors.purposeError,hintText:a,maxCharacterLimit:this.props.purposeMaxLength,useInlineAlert:true})))}},{key:"renderDefaultChannelSelect",value:function e(){return m.a.createElement(re["a"],{selectedChannels:this.state.channels,onChange:this.onChannelsUpdate})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return m.a.createElement("div",null,this.maybeRenderApiError(),this.maybeRenderAutogeneratedUserGroupAlert(),m.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect()))}}]);return t}(v["PureComponent"]);se.displayName="UserGroupEditCreateForm";se.defaultProps=ie;var oe=function e(t){return{featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var le={validateUserGroupName:V,validateUserGroupHandle:ee};var ce=Object(f["connect"])(oe,le)(se);var ue=r(828);var de=r(58);var pe=r.n(de);var ve=Object(x["b"])("Validate the user group form",function(e,t,r){var a=r.name,n=r.handle,i=r.prevName,s=r.prevHandle;return Promise.all([e(V({name:a,prevName:i})),e(ee({handle:n,prevHandle:s}))]).then(function(e){var t=pe()(e,2),r=t[0],a=t[1];return{nameError:r,handleError:a}})});ve.propTypes={name:h["b"].string,handle:h["b"].string,prevName:h["b"].string,prevHandle:h["b"].string};var me=ve;var he=new w["b"]("user_groups");var fe={userGroup:h["b"].object.isRequired,userGroupId:h["b"].string,userGroupName:h["b"].string,userGroupHandle:h["b"].string,userGroupPurpose:h["b"].string,userGroupDefaultChannels:h["b"].array,createUserGroup:h["b"].func.isRequired,updateUserGroup:h["b"].func.isRequired,validate:h["b"].func.isRequired,featureSonicUserGroups:h["b"].bool.isRequired,closeModal:h["b"].func,enqueueToast:h["b"].func,showUserGroupDetails:h["b"].func,addUserGroupIds:h["b"].func.isRequired};var be={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:b["noop"],enqueueToast:b["noop"],showUserGroupDetails:b["noop"]};var ge=void 0;var _e=Object(I["b"])();var ye=140;var Oe=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={formSubmitPending:false,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:false,detailsFormValues:{name:r.props.userGroupName,handle:r.props.userGroupHandle,purpose:r.props.userGroupPurpose,channels:r.props.userGroupDefaultChannels},purposeTooLong:false};Object(g["a"])(r,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump","onSelectedItemsChange","onPurposeChange"]);r.onPurposeChange=Object(b["debounce"])(r.onPurposeChange,300).bind(r);r.formRef=null;return r}l()(t,[{key:"componentWillMount",value:function e(){this.createDialogViewInfo();this.props.userGroupId?this.setDialogStep(ge.edit.id):this.setDialogStep(ge.details.id)}},{key:"onDetailsStepComplete",value:function e(){var t=this;var r=this.formRef.getFormValues();this.setFormSubmitPending(true);return this.props.validate(n()({},r,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(e){t.setFormErrors(e);if(t.hasValidationErrors(e)){t.setFormSubmitPending(false);return}if(t.state.formStep===ge.edit.id)t.onEditDialogSubmit(r);else{t.setDetailsFormValues(r);t.setDialogStep(ge.members.id);t.setFormSubmitPending(false)}})}},{key:"onEditDialogSubmit",value:function e(t){var r=this;var a=t.name,n=t.handle,i=t.purpose,s=t.channels;if(!this.props.featureSonicUserGroups)return null;var o=this.props.userGroupId;return this.props.updateUserGroup({groupId:o,name:Object(b["trim"])(a),handle:n,description:i,channels:s,reason:"onEditDialogSubmit"}).then(function(){r.props.enqueueToast({element:m.a.createElement(T["b"],null,he.t("Group has been updated."))});r.onSubmitSuccess()}).catch(function(e){_e.error("Error editing user group: "+e);r.onSubmitFailure(e)})}},{key:"onCreateDialogSubmit",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=this.state.detailsFormValues;r=void 0===r?{}:r;var a=r.name,n=r.handle,i=r.purpose,s=r.channels;if(!this.userGroupMemberManagementRef)return false;var o=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!o){this.setRequiredFieldsEmpty(true);return false}var l=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object(b["trim"])(a),handle:n,description:i,channels:s,users:l,reason:"onCreateDialogSubmit"}).then(function(e){var r=e.id;t.props.showUserGroupDetails({groupId:r});t.props.addUserGroupIds([r])}).then(function(){t.props.enqueueToast({element:m.a.createElement(T["b"],null,he.t("User group created!"))});t.onSubmitSuccess()}).catch(function(e){_e.error("Error creating user group: "+e);t.onSubmitFailure(e)})}},{key:"onSubmitSuccess",value:function e(){this.setFormSubmitPending(false);this.props.closeModal();this.setApiError("")}},{key:"onSubmitFailure",value:function e(t){this.setFormSubmitPending(false);this.setApiError(t)}},{key:"onSelectedItemsChange",value:function e(t){this.setRequiredFieldsEmpty(!t.length)}},{key:"onPurposeChange",value:function e(t){var r=t.length>ye;this.setState(function(){return{purposeTooLong:r}})}},{key:"getMemberSelectorDialogProps",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;return{title:ge.members.title,contentLabel:ge.members.title,shouldCloseOnGo:true,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:ge.members.goButtonText,shouldCloseOnCancel:false,cancelText:he.t("Back"),onCancel:function e(){t.setDialogStep(ge.details.id)},footerText:ge.members.footerText}}},{key:"getDetailsFormDialogProps",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.state.formStep;var r=Object(b["find"])(ge,function(e){return e.id===t});return{title:r.title,contentLabel:r.title,goButtonText:r.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:true,cancelText:he.t("Cancel"),shouldCloseOnGo:false,footerText:r.footerText}}},{key:"setFormErrors",value:function e(t){this.setState(function(e){return{errors:n()({},e.errors,t)}})}},{key:"setDetailsFormValues",value:function e(t){this.setState(function(e){return{detailsFormValues:n()({},e.detailsFormValues,t)}})}},{key:"setFormSubmitPending",value:function e(t){this.setState(function(){return{formSubmitPending:t}})}},{key:"setDialogStep",value:function e(t){this.setState(function(){return{formStep:t}})}},{key:"setUserGroupFormRef",value:function e(t){this.formRef=t}},{key:"setApiError",value:function e(t){this.setState(function(){return{submitError:t}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setRequiredFieldsEmpty",value:function e(t){this.setState(function(){return{requiredFieldsEmpty:t}})}},{key:"shouldShowCloseDialogSpeedBump",value:function e(t){if("go"===t||this.state.formStep===ge.members.id)return false;var r=this.formRef.getFormValues();return!Object(b["isEqual"])(this.state.detailsFormValues,r)}},{key:"createDialogViewInfo",value:function e(){if(!this.props.featureSonicUserGroups)return;ge={details:{id:"details",footerText:he.t("Step 1 of 2"),title:he.t("Create User Group"),goButtonText:he.t("Next")},members:{id:"members",footerText:he.t("Step 2 of 2"),title:he.t("Add members"),goButtonText:he.t("Create Group")},edit:{id:"edit",footerText:null,title:he.t("Edit User Group"),goButtonText:he.t("Save")}}}},{key:"hasValidationErrors",value:function e(t){return!!Object(b["find"])(t,function(e){return e.length})}},{key:"renderDetailsForm",value:function e(){var t=this;return m.a.createElement("div",null,m.a.createElement(ce,n()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function e(r){return t.setUserGroupFormRef(r)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty,onPurposeChange:this.onPurposeChange,purposeMaxLength:ye,userGroup:this.props.userGroup})))}},{key:"renderMemberSelector",value:function e(){if(!this.props.featureSonicUserGroups)return null;return m.a.createElement(ue["a"],{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange})}},{key:"renderDialogStep",value:function e(){if(this.state.formStep===ge.details.id||this.state.formStep===ge.edit.id)return this.renderDetailsForm();if(this.state.formStep===ge.members.id)return this.renderMemberSelector();return""}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty||this.state.purposeTooLong;var r=this.state.formStep===ge.details.id||this.state.formStep===ge.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return m.a.createElement(A["a"],n()({showCancelButton:true,goButtonIsDisabled:t,goButtonIsPending:this.state.formSubmitPending},r,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:he.t("Keep Editing"),speedBumpContinueButtonText:he.t("Close"),speedBumpBodyText:he.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}]);return t}(v["PureComponent"]);Oe.displayName="UserGroupEditCreateDialog";Oe.defaultProps=be;var ke=function e(t,r){var a=Object(O["e"])(t,r.userGroupId);if(!a)return{userGroup:{},userGroupName:"",userGroupHandle:"",userGroupPurpose:"",userGroupDefaultChannels:[],featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")};return{userGroup:a,userGroupName:Object(S["h"])(a),userGroupHandle:Object(S["f"])(a,{includeAtSign:false}),userGroupPurpose:Object(S["e"])(a),userGroupDefaultChannels:Object(S["d"])(t,a),featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ee={createUserGroup:y["f"],updateUserGroup:y["n"],closeModal:k["closeModal"],enqueueToast:E["enqueueToast"],showUserGroupDetails:C["n"],validate:me,addUserGroupIds:j["addUserGroupIds"]};var je=t["a"]=Object(f["connect"])(ke,Ee)(Oe)},,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"d",function(){return x});r.d(t,"c",function(){return D});r.d(t,"a",function(){return B});var a=r(5);var n=r.n(a);var i=r(26);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var v=r(8);var m=r.n(v);var h=r(9);var f=r.n(h);var b=r(0);var g=r(1);var _=r.n(g);var y=r(2);var O=r.n(y);var k=r(16);var E=r.n(k);var j=r(126);var C=r(51);var S=r(574);var w=r(1143);var I=r(477);var T=r(854);var A=r(775);var N=r(1043);var P=r(10);var R=r(3041);var M=r.n(R);var x=b["b"].shape({selectionElementId:b["b"].string,previewText:b["b"].string,isSelected:b["b"].bool});var D=b["b"].shape({id:b["b"].string.isRequired,label:b["b"].node.isRequired,isPrimary:b["b"].bool,isDanger:b["b"].bool,disabled:b["b"].bool,appliesToCount:b["b"].number});var F={availableCount:b["b"].number.isRequired,selectedCount:b["b"].number.isRequired,items:b["b"].arrayOf(x).isRequired,actions:b["b"].arrayOf(D).isRequired,titleFormatter:b["b"].func,showingSelection:b["b"].bool,onToggleShowingSelection:b["b"].func,onToggleSelect:b["b"].func,onAction:b["b"].func,"data-qa":b["b"].string,position:b["b"].string};var L={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",position:void 0};var B=76;var U=3;var q=new P["b"]("selection_bar");var G=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onCheckboxChange=r.onCheckboxChange.bind(r);r.onShowClick=r.onShowClick.bind(r);r.renderActionMenu=r.renderActionMenu.bind(r);r.getDefaultTitle=r.getDefaultTitle.bind(r);return r}p()(t,[{key:"onCheckboxChange",value:function e(){var t=this.props,r=t.selectedCount,a=t.availableCount,n=t.onToggleSelect;n(a!==r)}},{key:"onShowClick",value:function e(){var t=this.props,r=t.showingSelection,a=t.onToggleShowingSelection;a(!r)}},{key:"getDataQAAttr",value:function e(t){return this.props["data-qa"]+"_"+t}},{key:"getDefaultTitle",value:function e(t){return q.t("{selectedCount, plural,=1 {# item selected} other {# items selected}}",{selectedCount:t})}},{key:"getPreviewText",value:function e(t,r){var a=null;(t.length>0||r>0)&&(a=r>0?q.rt("{previewSelectionItems}{ moreItemsCount, plural,=1 {, and # more} other {, and # more}}.",{previewSelectionItems:Object(P["g"])(t,{noConj:true,noEscape:true}).join(""),moreItemsCount:r}):q.rt("{previewSelectionItems}.",{previewSelectionItems:Object(P["g"])(t,{noEscape:true}).join("")}));return a}},{key:"getItemListProps",value:function e(t,r){return Object(y["reduce"])(t,function(e,t,r){var a=0===r?"":" ";e.ariaControls+=""+a+t.selectionElementId;if(t.isSelected&&e.previewItems.length<U){e.previewItems.push(t.previewText);e.moreItemsCount-=1}return e},{ariaControls:"",previewItems:[],moreItemsCount:r})}},{key:"getActionProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var r=void 0;var a=Object(y["findIndex"])(t,{isPrimary:true});a=-1!==a?a:0;var n=l()({},t[a],{isPrimary:true});var i=t.length>=3;if(t.length<=1)r={primaryAction:n,isMenu:i};else if(2===t.length){var o=0===a?t[1]:t[0];r={primaryAction:n,secondaryAction:o,isMenu:i}}else{var c=[].concat(s()(t.slice(0,a)),s()(t.slice(a+1)));r={primaryAction:n,menuActions:c,isMenu:i}}return r}},{key:"renderActionLabel",value:function e(t){var r=t.label,a=t.appliesToCount;return a&&a>0?q.t("{action} ({count})",{action:r,count:a}):r}},{key:"renderActionButton",value:function e(t){var r=this;var a=t.id,n=t.isPrimary,i=t.isDanger,s=t.disabled;var o=S["a"].outline;i?o=S["a"].danger:n&&(o=S["a"].primary);return _.a.createElement(S["b"],{key:a,type:o,className:n?void 0:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_"+a),disabled:s,onClick:function e(){return r.props.onAction(a)}},this.renderActionLabel(t))}},{key:"renderActionMenuButton",value:function e(){var t=q.rt("More {chevronDownIcon}",{chevronDownIcon:_.a.createElement(N["a"],{type:"chevron-down",inline:true})});return _.a.createElement(w["a"],{renderMenu:this.renderActionMenu,position:"top-right",offsetY:-8},_.a.createElement(S["b"],{className:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_menu"),type:S["a"].outline},t))}},{key:"renderActionMenu",value:function e(t){var r=this;var a=this.getActionProps(this.props.actions),n=a.menuActions;if(!n||0===n.length)return null;return _.a.createElement(A["a"],t,n.map(function(e){return _.a.createElement(I["a"],{key:e.id,label:r.renderActionLabel(e),disabled:e.disabled,"data-qa":r.getDataQAAttr("action_menu_item_"+e.id),onSelected:function t(){return r.props.onAction(e.id)},danger:true===e.isDanger})}))}},{key:"render",value:function e(){var t;var r=this.props,a=r.availableCount,i=r.selectedCount,s=r.items,o=r.titleFormatter,l=r.showingSelection,c=r.actions,u=r.position;var d=a===i;var p=!d&&i>0;var v=this.getItemListProps(s,i),m=v.ariaControls,h=v.previewItems,f=v.moreItemsCount;var b=this.getPreviewText(h,f);var g=o||this.getDefaultTitle;var y=this.getActionProps(c),O=y.primaryAction,k=y.secondaryAction,S=y.isMenu;var w="c-selection_bar--position_"+u;var I=(t={},n()(t,w,!!u),n()(t,"c-selection_bar--position_relative","relative"===u),n()(t,"c-selection_bar--slide_up",i>0),t);var A=p||0===i?q.t("Select all"):q.t("Deselect all");var N=l?q.t("Show all"):q.t("Show selection");return _.a.createElement("div",{className:E()("c-selection_bar",I)},_.a.createElement("div",{className:"c-selection_bar__checkbox"},_.a.createElement(T["c"],{tip:A},_.a.createElement("div",null,_.a.createElement(j["a"],{className:"c-selection_bar__checkbox_input","aria-label":b,"data-qa":this.getDataQAAttr("checkbox"),checked:d,indeterminate:p,"aria-controls":m,onChange:this.onCheckboxChange})))),_.a.createElement("div",{className:"c-selection_bar__body"},_.a.createElement("div",{className:"c-selection_bar__selected_count","data-qa":this.getDataQAAttr("title")},g(i)),_.a.createElement("div",null,_.a.createElement("span",{className:"c-selection_bar__selected_preview","data-qa":this.getDataQAAttr("preview")},b),_.a.createElement(C["a"],{className:"c-selection_bar__show_link",onClick:this.onShowClick,"data-qa":this.getDataQAAttr("show_link")},N))),_.a.createElement("div",{className:"c-selection_bar__actions"},S&&this.renderActionMenuButton(),k&&this.renderActionButton(k),O&&this.renderActionButton(O)))}}]);return t}(g["PureComponent"]);G.displayName="BaseSelectionBar";G.defaultProps=L;t["b"]=G},,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(0);var h=r(16);var f=r.n(h);var b=r(2);var g=r.n(b);var _=r(358);var y=r(360);var O=r(41);var k=r(39);var E=r(384);var j=r(1803);var C=r(1095);var S=r(3263);var w=r.n(S);var I={msg:m["b"].object.isRequired,className:m["b"].string,children:m["b"].node,position:m["b"].oneOf(["default","inside","above"]),show:m["b"].bool,showComment:m["b"].bool,showShare:m["b"].bool,showReact:m["b"].bool,showJump:m["b"].bool,showStar:m["b"].bool,showMoreActions:m["b"].bool,jumpOrigin:m["b"].string,messageContainerType:m["b"].oneOf(Object(b["values"])(k["MESSAGE_CONTAINERS"])),viewContext:m["b"].string,hover:m["b"].bool,setHover:m["b"].func,isEditing:m["b"].bool,maybeStartEditingMessage:m["b"].func,renderOffscreen:m["b"].bool,clogLinkClick:m["b"].func,clogThreadEvent:m["b"].func};var T={className:void 0,children:void 0,position:"default",show:void 0,showComment:true,showShare:true,showReact:true,showJump:false,showStar:true,showMoreActions:true,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:false,setHover:b["noop"],isEditing:false,maybeStartEditingMessage:b["noop"],renderOffscreen:false,clogLinkClick:b["noop"],clogThreadEvent:b["noop"]};var A=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMenuOpen=r.onMenuOpen.bind(r);r.onMenuClose=r.onMenuClose.bind(r);r.startEditing=r.startEditing.bind(r);r.renderActions=r.renderActions.bind(r);return r}s()(t,[{key:"onMenuOpen",value:function e(){this.props.setHover(true)}},{key:"onMenuClose",value:function e(){this.props.setHover(false)}},{key:"startEditing",value:function e(){var t=this.props,r=t.msg,a=t.viewContext;this.props.maybeStartEditingMessage({channelId:Object(O["getMessageChannelId"])(r),ts:Object(O["getMessageTs"])(r),viewContext:a,scroll:true})}},{key:"renderActions",value:function e(){var t=this.props,r=t.msg,a=t.hover,n=t.show,i=t.showComment,s=t.showShare,o=t.showReact,l=t.showJump,c=t.showStar,u=t.showMoreActions,d=t.jumpOrigin,v=t.messageContainerType,m=t.isEditing,h=t.renderOffscreen,f=t.clogLinkClick,b=t.clogThreadEvent;if(false===n)return null;if(void 0===n&&!a&&!h)return null;if(m)return null;if(Object(O["isEKMAccessDeniedMessage"])(r))return null;if(r.isEKMError)return null;var g=r.ts,_=r.thread_ts,k=r.channel,E=r.file,C=r.comment,S=r.subtype;return p.a.createElement(j["a"],{ts:g,threadTs:_,channelId:k,reactionKey:Object(y["b"])(r),isStarred:Object(O["isStarred"])(r,E,C),isReply:Object(O["isReply"])(r),isEphemeral:Object(O["isEphemeral"])(r),subtype:S,comment:r.comment&&r.comment.id,fileIds:r.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:i,showShare:s,showReact:o,showJump:l,showStar:c,showMoreActions:u,jumpOrigin:d,editHandler:this.startEditing,messageContainerType:v,renderOffscreen:h&&!a&&!n,clogLinkClick:f,clogThreadEvent:b})}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.position;var n=f()("c-message_kit__actions","c-message_kit__actions--"+a,this.props.className);return p.a.createElement("div",{className:n,style:{position:"relative"}},r,this.renderActions())}}]);return t}(d["PureComponent"]);A.displayName="MessageActions";A.defaultProps=T;var N=function e(t,r){var a=r.msg,n=r.viewContext;var i=Object(O["getMessageChannelId"])(a);var s=Object(O["getMessageTs"])(a);var o=!!Object(_["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n});return{isEditing:o}};var P={maybeStartEditingMessage:function e(){return _["maybeStartEditingMessage"].apply(void 0,arguments)}};t["a"]=Object(E["b"])(Object(C["b"])(Object(v["connect"])(N,P)(A)))},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(2);var o=r(15);var l=r(48);var c=r(68);var u=r(564);var d=r(77);var p=r(39);var v=r(365);var m=r(10);var h=new m["b"]("files");function f(e){var t=e.proceedToNextDialog,r=e.disableFileUploadsPref;var a=h.t("Uploads disabled");var i="";"disable_all"===r&&(i=h.t("At the request of your administrator, file uploads have been disabled on this workspace."));"disable_all_except_images"===r&&(i=h.t("At the request of your administrator, only images can be uploaded to this workspace."));var o=function e(){return Object(s["defer"])(function(){t()})};return n.a.createElement(v["a"],{title:a,onGo:o},n.a.createElement("p",null,i))}f.displayName="FileUploadsDisabledAlert";f.defaultProps={proceedToNextDialog:s["noop"],disableFileUploadsPref:""};var b=f;var g=new m["b"]("file_upload");function _(e){var t=e.proceedToNextDialog,r=e.excludedFiles,a=e.goodFiles;var i=void 0;var o=void 0;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p="";var m=r.length+a.length;if(r.length){i=[];c="";d="";i=r.map(function(e){return n.a.createElement("li",{key:e.name},n.a.createElement("strong",null,e.name))});if(r.length>1){o=r.length===m?g.t("All files unsupported"):g.t("Some files unsupported");u=g.t("Try uploading a .zip version of these files instead.");c=n.a.createElement("ul",null,i)}else if(1===r.length){o=g.t("File unsupported");u=g.t("Try uploading a .zip version of this file instead.")}a.length>1?d=g.t("(Don\u2019t worry, your other files are next.)"):1===a.length&&(d=g.t("(Don\u2019t worry, your other file is next.)"));l=1===r.length?g.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:n.a.createElement("strong",null,r[0].name)}):r.length===m?g.t("Sorry, none of those file types are supported by Slack."):g.t("Sorry, some of those file types are not supported by Slack.");p=n.a.createElement("div",null,n.a.createElement("p",null,l),c,n.a.createElement("p",null,u),n.a.createElement("p",null,d))}var h=function e(){Object(s["defer"])(function(){t()})};return n.a.createElement(v["a"],{title:o,onGo:h},p)}_.displayName="FileUploadUnsupportedAlert";_.defaultProps={proceedToNextDialog:s["noop"],goodFiles:[],excludedFiles:[]};var y=_;var O=r(869);var k=new m["b"]("file-upload");var E={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function j(e){var t=e.type,r=e.proceedToNextDialog;var a=k.t("File too large");var i="";i=t===E.ALL?k.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(O["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):t===E.SINGLE?k.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(O["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):k.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(O["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])});var o=t===E.MULTIPLE?function(){Object(s["defer"])(function(){r()})}:s["noop"];return n.a.createElement(v["a"],{title:a,onGo:o},n.a.createElement("p",null,i))}j.displayName="FileUploadSizeAlert";j.defaultProps={type:E.SINGLE,proceedToNextDialog:s["noop"]};var C=j;var S=r(150);var w=r(157);var I=new m["b"]("multi_file_upload");var T=Object(o["b"])("renders a toast with error message for uploading too many files",function(e){var t=I.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:p["MAX_FILE_UPLOAD_COUNT"]});var r=n.a.createElement(w["b"],{icon:"warning",iconClassName:"sk_colonel_mustard"},n.a.createElement("span",null,t));setTimeout(function(){return e(Object(S["enqueueToast"])({element:r}))},500)});var A=T;var N=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.dispatch,a=t.getState,i=t.files;if(!i)return Promise.resolve();var o=Object(s["every"])(i,function(e){return Object(d["isExternalPendingFile"])(e)});return new Promise(function(e){var t=Object(c["a"])(a(),"disable_file_uploads");if("disable_all"===t&&!o){r(Object(l["openModal"])({element:n.a.createElement(b,{disableFileUploadsPref:t,proceedToNextDialog:function t(){return e()}}),isStackable:true}));return}if("disable_all_except_images"===t&&!o){var u=Object(s["filter"])(i,function(e){return Object(d["isPendingImageFile"])(e)});if(u.length!==i.length){r(Object(l["openModal"])({element:n.a.createElement(b,{disableFileUploadsPref:t,proceedToNextDialog:function t(){return e(u)}}),isStackable:true}));return}}e(i)})};var P=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.dispatch,a=t.files;if(!a)return Promise.resolve();return new Promise(function(e){Object(d["validateFiles"])(a,function(t){if(t.excludedFiles.length){r(Object(l["openModal"])({element:n.a.createElement(y,{goodFiles:t.goodFiles,excludedFiles:t.excludedFiles,proceedToNextDialog:function r(){return e(t.goodFiles)}}),isStackable:true}));return}e(t.goodFiles)})})};var R=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.dispatch,a=t.files;if(!a)return Promise.resolve();return new Promise(function(e){var t=a.filter(function(e){return Object(s["isString"])(e)||"undefined"===typeof e.size||e.size<=p["UPLOAD_FILE_SIZE_LIMIT_BYTES"]});if(t.length<a.length){if(1===a.length){r(Object(l["openModal"])({element:n.a.createElement(C,{type:E.SINGLE}),isStackable:true}));e();return}if(!t.length){r(Object(l["openModal"])({element:n.a.createElement(C,{type:E.ALL}),isStackable:true}));e();return}r(Object(l["openModal"])({element:n.a.createElement(C,{type:E.MULTIPLE,proceedToNextDialog:function r(){return e(t)}}),isStackable:true}));return}e(t)})};var M=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.dispatch,a=t.getState,n=t.files,i=t.channelId,o=t.threadTs;if(!n)return Promise.resolve();var l=a();var c=Object(u["getPendingFilesforInput"])(l,{channelId:i,threadTs:o})||[];if(c.length+n.length>p["MAX_FILE_UPLOAD_COUNT"]){r(A());var d=p["MAX_FILE_UPLOAD_COUNT"]-c.length;var v=Object(s["take"])(n,d);return Promise.resolve(v)}return Promise.resolve(n)};var x=Object(o["b"])("filters invalid files before they can be uploaded",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.selectedFiles,n=r.channelId,i=r.threadTs;return N({dispatch:e,getState:t,files:a}).then(function(t){return P({dispatch:e,files:t})}).then(function(t){return R({dispatch:e,files:t})}).then(function(r){return M({dispatch:e,getState:t,files:r,channelId:n,threadTs:i})})});x.propTypes={selectedFiles:i["b"].array.isRequired,channelId:i["b"].string,threadTs:i["b"].string};var D=t["a"]=x},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(15);var o=r(48);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(13);var b=r(794);var g=r(10);var _=r(1044);var y=r(915);var O=r(28);var k=r(187);var E=r(1566);var j=r(16);var C=r.n(j);var S=r(2379);var w=r(11);var I=r(19);var T=r(4);var A=r(1739);var N=new g["b"]("prefs");var P={channel:i["b"].object.isRequired,channelId:i["b"].string.isRequired,closeModal:i["b"].func.isRequired,openPrefsModal:i["b"].func.isRequired,featureLongerChannelNames:i["b"].bool};var R={featureLongerChannelNames:false};var M=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);r.onOpenPreferences=r.onOpenPreferences.bind(r);return r}d()(t,[{key:"onGo",value:function e(){this.props.closeModal()}},{key:"onOpenPreferences",value:function e(){this.props.closeModal();this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderNotificationsHeader",value:function e(){var t=Object(w["isPublicChannel"])(this.props.channel)||Object(w["isPrivateChannel"])(this.props.channel);var r=null;if(this.props.featureLongerChannelNames){var a=C()({channel_options_header__channel_container:t});r=N.rt("Notification Preferences: {channelName}",{channelName:t?n.a.createElement("span",{className:"channel_options_header__title"},n.a.createElement(E["a"],{channelId:this.props.channelId,truncate:true})):n.a.createElement(_["a"],{channelId:this.props.channelId,inline:true})});return n.a.createElement("span",{className:a},r)}r=N.rt("Notification Preferences: {channelName}",{channelName:n.a.createElement(_["a"],{channelId:this.props.channelId,inline:true})});return n.a.createElement("span",{className:"channel_options_header__no_wrap"},r)}},{key:"render",value:function e(){var t=this;var r=this.props.channelId;return n.a.createElement(y["a"],{title:this.renderNotificationsHeader(),showCancelButton:false,showGoButton:false,withHeader:true},n.a.createElement(A["a"],{channelId:r,openPrefsModal:this.onOpenPreferences}),n.a.createElement("div",{className:"p-channel_notification_prefs_modal__footer"},n.a.createElement("span",{className:"p-channel_notification_prefs_modal__footer_hint"},N.rt("Set your default notifications settings in your <a>Account Preferences</a>",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.text;return n.a.createElement(k["a"],{onClick:t.onOpenPreferences},r)})),n.a.createElement(O["d"],{type:"primary",onClick:this.onGo},N.t("Done"))))}}]);return t}(a["Component"]);M.displayName="ChannelNotificationPrefsModal";M.defaultProps=R;function x(e){return{closeModal:function t(){return e(o["closeModal"].apply(void 0,arguments))},openPrefsModal:function t(){return e(b["a"].apply(void 0,arguments))}}}function D(e,t){return{channel:Object(I["d"])(e,t.channelId),featureLongerChannelNames:Object(T["isFeatureEnabled"])(e,"feature_longer_channel_names")}}var F=Object(f["connect"])(D,x)(M);var L=Object(s["b"])("Opens the channel notif prefs modal",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(o["openModal"])({element:n.a.createElement(F,r)}))});L.propTypes={channelId:i["b"].string.isRequired};var B=t["a"]=L},,,,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(13);var b=r(2);var g=r.n(b);var _=r(16);var y=r.n(_);var O=r(34);var k=r(511);var E=r(711);var j=r(928);var C=r(1220);var S=r(1802);var w=r(384);var I=r(55);var T=r(1772);var A=20;var N=10;var P={msg:h["b"].object.isRequired,className:h["b"].string,blocksContainerContext:h["b"].oneOf(Object(b["values"])(I["a"])),expandInlineImgsPref:h["b"].bool,expandNonMediaAttachmentsPref:h["b"].bool,viewContext:h["b"].string};var R={className:void 0,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,viewContext:void 0,blocksContainerContext:I["a"].message_attachment};var M=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderAttachmentsOverLimitMaybe",value:function e(t,r){if(!t.length)return null;var a=this.props.viewContext;var i={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(k["a"])("attachmentsOverLimit",this.props.msg.ts,{limit:r,viewContext:a})};return m.a.createElement("div",null,m.a.createElement(j["a"],i,t),m.a.createElement(C["a"],n()({},i,{render:function e(r,a){return m.a.createElement(S["a"],{isExpanded:r.isExpanded,onClick:a,attachmentsOverLimitCount:t.length})}})))}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.expandInlineImgsPref,n=t.expandNonMediaAttachmentsPref,i=t.blocksContainerContext;var s=Object(E["c"])(r,a,n);if(!r||!s||!s.length)return null;var o=A;var l=Object(b["map"])(s,function(e,t){var a=e.id||t+1;e.blocks&&(o=N);return m.a.createElement(T["a"],{msg:r,attachment:e,key:a,blocksContainerContext:i})});var c=l.splice(o);var u=y()("c-message_kit__attachments",this.props.className);return m.a.createElement("div",{className:u},l,this.renderAttachmentsOverLimitMaybe(c,o))}}]);return t}(v["PureComponent"]);M.displayName="MessageKitAttachments";M.defaultProps=R;var x=function e(t){return{expandInlineImgsPref:Object(O["g"])(t,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(O["g"])(t,"expand_non_media_attachments")}};t["a"]=Object(w["b"])(Object(f["connect"])(x)(M))},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(16);var f=r.n(h);var b=r(1834);var g=r(360);var _=r(3271);var y=r.n(_);var O={className:v["b"].string,reactionKey:v["b"].string};var k={className:void 0,reactionKey:null};var E=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.className,a=t.reactionKey;var n=f()("c-message_kit__reaction_bar",r);return p.a.createElement(b["a"],{className:n,reactionKey:a})}}]);return t}(d["PureComponent"]);E.displayName="MessageReactionBar";E.defaultProps=k;var j=function e(t,r){var a=r.msg;if(!a)return null;var n=Object(g["b"])(a);return{reactionKey:n}};t["a"]=Object(m["connect"])(j)(E)},,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(2);var h=r.n(m);var f=r(16);var b=r.n(f);var g=r(95);var _=r(28);var y=r(22);var O=r(50);var k=r(2393);var E=r.n(k);var j={className:d["b"].string,iconType:d["b"].string,label:d["b"].node.isRequired,tooltipPosition:d["b"].string,onClick:d["b"].func,ariaHasPopup:d["b"].bool,"data-qa":d["b"].string};var C={className:"",onClick:h.a.noop,iconType:null,tooltipPosition:"top",ariaHasPopup:true,"data-qa":void 0};var S=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=b()("c-message_actions__button",this.props.className);return v.a.createElement(O["c"],{tip:this.props.label,position:this.props.tooltipPosition,delay:O["b"]},v.a.createElement(_["c"],{className:t,onClick:this.props.onClick,"aria-label":this.props.label,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"]},v.a.createElement(y["b"],{type:this.props.iconType})))}}]);return t}(p["PureComponent"]);S.displayName="MessageActionButton";S.defaultProps=C;t["a"]=Object(g["pure"])(S)},,,,,,,,,function(e,t,r){var a=r(1405);var n=1/0;function i(e){if("string"==typeof e||a(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=i},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r(1757);var h=r(0);var f=r(1);var b=r.n(f);var g=r(16);var _=r.n(g);var y=r(13);var O=r(107);var k=r.n(O);var E=r(23);var j=r(19);var C=r(4);var S=r(3754);var w=r(195);var I=r(122);var T=r(884);var A=r(34);var N=r(4402);var P=r(150);var R=r(48);var M=r(84);var x=r(684);var D=r(1057);var F=r(4453);var L=r(109);var B=r(2268);var U=r(10);var q=new U["b"]("coachmarks");var G={anchorElement:h["b"].instanceOf(Element),setTractorFilesCoachmarkVisibility:h["b"].func};var H={anchorElement:null,setTractorFilesCoachmarkVisibility:v["noop"]};var W=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=this.props,r=t.setTractorFilesCoachmarkVisibility,a=t.anchorElement;return b.a.createElement("div",{className:"position_relative"},b.a.createElement(B["a"],{anchorElement:a,"data-qa":"coachmark",isOpen:true,arrowPosition:80,orientation:"right",offsetY:-40,closeCoachmark:function e(){return r(false)},coachmarkClassNames:"c-message-pane__c-coachmark"},b.a.createElement("h3",null,q.t("Share a file in the channel")),b.a.createElement("p",null,q.rt('Click the <i class="c-icon c-icon--paperclip"></i> paperclip icon next to the message input box to <strong>add a file from your computer</strong>.'))))}}]);return t}(B["a"]);W.displayName="TractorShareFilesCoachmark";var V=W;W.propTypes=G;W.defaultProps=H;var K=r(515);var z=r(136);var Q=r(1097);var Y=r(12);var J=r(4168);var X=r(799);var Z=r(892);var $=r(38);var ee=r(157);var te=r(2270);var re=r(45);var ae=r(30);var ne=r(1345);var ie=new U["b"]("offline_mode");var se=new U["b"]("msg_input");var oe=function e(t){if(!t)return"";var r=document.createElement("span");r.innerHTML=t;return r.textContent.trim()};var le={channelId:h["b"].string,teamId:h["b"].string,legacyChannel:h["b"].object,threadTs:h["b"].string,viewContext:h["b"].string,placeholder:h["b"].string,sendMessage:h["b"].func,className:h["b"].string,enableEmojiButton:h["b"].bool,enableMentionButton:h["b"].bool,enableBroadcastKeywords:h["b"].bool,enableJumbomoji:h["b"].bool,arrowHistory:h["b"].bool,forwardedRef:h["b"].object.isRequired,useSendButton:h["b"].bool,isDisabled:h["b"].bool,maxLines:h["b"].number,useLegacyCreate:h["b"].bool,useLegacyDrafts:h["b"].bool,focusOnMount:h["b"].bool,focusOnPaste:h["b"].bool,draft:h["b"].object,draftDelay:h["b"].number,setChannelDraft:h["b"].func,clearChannelDraft:h["b"].func,editLastMessage:h["b"].func,openSnippetDialog:h["b"].func,featureOfflineMode:h["b"].bool,featureSonicInputs:h["b"].bool,clientToolBar:h["b"].bool,featureWysiwygComposer:h["b"].bool,wasRecentlyOnline:h["b"].bool,isClientOnline:h["b"].bool,enqueueToast:h["b"].func,openModal:h["b"].func,logger:h["b"].object.isRequired,clogger:h["b"].object.isRequired,maxLength:h["b"].number,tabIndex:h["b"].number,fileButtonTabIndex:h["b"].number,showFocusOutline:h["b"].bool,additionalDraftContent:h["b"].object,onDraftRestore:h["b"].func,triggerNavigateForward:h["b"].func,triggerNavigateBack:h["b"].func,shouldShowTractorFilesCoachmark:h["b"].bool,setTractorFilesCoachmarkVisibility:h["b"].func,onTextChange:h["b"].func,onFocus:h["b"].func,onBlur:h["b"].func,ariaDescribedBy:h["b"].string};var ce={channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:function e(){return Promise.resolve()},className:void 0,enableEmojiButton:false,enableMentionButton:false,enableBroadcastKeywords:true,enableJumbomoji:false,arrowHistory:false,useSendButton:false,isDisabled:false,maxLines:void 0,useLegacyCreate:false,useLegacyDrafts:false,focusOnMount:false,focusOnPaste:false,draft:void 0,draftDelay:1e3,setChannelDraft:v["noop"],clearChannelDraft:v["noop"],editLastMessage:v["noop"],openSnippetDialog:v["noop"],featureOfflineMode:false,featureSonicInputs:false,clientToolBar:false,featureWysiwygComposer:false,wasRecentlyOnline:false,isClientOnline:false,onTextChange:v["noop"],onFocus:v["noop"],onBlur:v["noop"],enqueueToast:v["noop"],openModal:v["noop"],maxLength:void 0,tabIndex:void 0,fileButtonTabIndex:void 0,showFocusOutline:false,additionalDraftContent:void 0,onDraftRestore:v["noop"],triggerNavigateBack:v["noop"],triggerNavigateForward:v["noop"],shouldShowTractorFilesCoachmark:false,setTractorFilesCoachmarkVisibility:v["noop"],ariaDescribedBy:void 0};var ue=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["a"])(r,["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onCmdLeftWhenEmpty","onCmdRightWhenEmpty","onPasteLimit","onTextChange","onUpArrow","openSnippetDialog","renderInput"]);r.state={isPlusMenuOpen:false,forcePlusMenuOpen:false};r.getComputedModules=Object(X["a"])(function(e,t,r,a){if(!(r||a))return e;var i=Object(ne["a"])({featureWysiwygComposer:a});return n()({},e,{composer:n()({},i,{teamId:t}),slacklink:a&&{convertImages:false,disableLinksWithLabels:true},slackmarkdown:a&&{convertHeaders:false,convertHorizontalRule:false}})});return r}l()(t,[{key:"componentDidMount",value:function e(){this.handlePropChanges();this.maybeFocusInput()}},{key:"componentDidUpdate",value:function e(t){this.handlePropChanges(t);this.maybeFocusInput(t)}},{key:"componentWillUnmount",value:function e(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}},{key:"onEnter",value:function e(t){var r=t.metaKey,a=t.ctrlKey,n=t.shiftKey;var i=this.props,s=i.sendMessage,o=i.useLegacyDrafts,l=i.featureOfflineMode,c=i.featureSonicInputs,u=i.wasRecentlyOnline;var d=this.getInputRef();if(!d)return false;if(d.isEmpty()&&!n)return false;o||this.updateDraftThrottled.cancel();if(l&&!u){var p=ie;this.props.enqueueToast({element:b.a.createElement(ee["b"],{ariaAssertive:true,position:"top-right",icon:"cloud-offline-small"},b.a.createElement("span",null,b.a.createElement("strong",null,p.rt("No connection."))," ",p.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))});return false}if(c&&(Object(ae["isMac"])()&&r&&n||!Object(ae["isMac"])()&&a&&n)){this.openSnippetDialog();return false}s();return false}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props,a=r.arrowHistory,n=r.featureOfflineMode,i=r.isClientOnline;if(!Object($["a"])()&&a&&!t)return;var s=this.getInputRef();if(!s)return;if(!s.isEmpty())return;if(n&&!i)return;this.props.editLastMessage()}},{key:"onLeftWhenEmpty",value:function e(){this.setState(function(){return{isPlusMenuOpen:true,forcePlusMenuOpen:true}})}},{key:"onCmdLeftWhenEmpty",value:function e(){this.props.logger.info("MESSAGE-INPUT","onCmdLeftWhenEmpty");this.props.triggerNavigateBack({fromKeyboardShortcut:true})}},{key:"onCmdRightWhenEmpty",value:function e(){this.props.logger.info("MESSAGE-INPUT","onCmdRightWhenEmpty");this.props.triggerNavigateForward({fromKeyboardShortcut:true})}},{key:"onTextChange",value:function e(){var t=this.props,e=t.onTextChange,r=t.useLegacyDrafts,a=t.featureWysiwygComposer;var n=this.getInputRef();r||this.updateOrClearDraft({inputRef:n});e(n.value(),a?n.getContents().contents:[])}},{key:"onFileMenuOpen",value:function e(){this.setState(function(){return{isPlusMenuOpen:true}});var t=this.props.clogger;var r={contexts:{growth:{action:"click",trigger:"plus_menu_button"}}};t.track("PFP_ACTION",r)}},{key:"onFileMenuClose",value:function e(){this.setState(function(){return{isPlusMenuOpen:false,forcePlusMenuOpen:false}})}},{key:"onPasteLimit",value:function e(){this.props.openModal({element:this.renderPasteLimitDialog(),isStackable:true})}},{key:"getInputRef",value:function e(){var t=this.props.forwardedRef;return t.current.getWrappedInstance?t.current.getWrappedInstance():t.current}},{key:"handlePropChanges",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.props,a=r.channelId,n=r.threadTs,i=r.draft,s=r.draftDelay,o=r.logger,l=r.useLegacyDrafts,c=r.onDraftRestore,u=r.additionalDraftContent;if(l)return;t.draftDelay!==s&&(this.updateDraftThrottled=Object(v["debounce"])(this.updateDraft,s));if(!l&&t.additionalDraftContent!==u){var d=this.getInputRef();this.updateOrClearDraft({inputRef:d})}if(t.channelId!==a||t.threadTs!==n){this.updateDraftThrottled.flush();var p=this.getInputRef();p.clearHistory();if(a)if(i){o.debug("DRAFT","Restoring draft to "+a);i.ops&&p.value({contents:i.ops});i.range&&p.setCursor(i.range.index,i.range.length);c(i)}else{o.debug("DRAFT","No draft, clearing input for "+a);p.clear()}}}},{key:"maybeFocusInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.props,a=r.channelId,n=r.threadTs,i=r.focusOnMount,s=r.logger;if(!i)return;var o=i!==t.focusOnMount||a&&!n&&t.channelId!==a||n&&t.threadTs!==n;if(!o)return;var l=this.getInputRef();try{l.focus()}catch(e){s.error("MESSAGE-INPUT","maybeFocusInput caught error: "+(e&&e.message));e.stack&&s.error("MESSAGE-INPUT",e.stack)}}},{key:"openSnippetDialog",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.viewContext,i=t.featureWysiwygComposer;var s=this.getInputRef();this.props.openSnippetDialog({initialText:s?s.displayValue():"",initialContents:i&&s?s.getContents():void 0,initialChannelId:r,threadTs:a,viewContext:n});s.value("");return false}},{key:"updateOrClearDraft",value:function e(t){var r=t.inputRef;var a=this.props,n=a.channelId,i=a.threadTs,s=a.logger,o=a.useLegacyDrafts;if(!n||!r)return;if(o)return;var l=r.getContents();if(r.getLength()&&Object(v["trim"])(Object(z["o"])(l.contents,"a")).length){var c=new k.a(l.contents);s.debug("DRAFT","Updating draft in "+n);this.updateDraftThrottled({channelId:n,threadTs:i,delta:c})}else{s.debug("DRAFT","Clearing draft for "+n);this.updateDraftThrottled({channelId:n,threadTs:i})}}},{key:"updateDraft",value:function e(t){var r=t.channelId,a=t.threadTs,i=t.delta;var s=this.props.additionalDraftContent;if(i){var o=this.getInputRef();this.props.setChannelDraft(n()({channelId:r,threadTs:a,delta:i,range:o.getSelection()},s))}else this.props.clearChannelDraft({channelId:r,threadTs:a})}},{key:"renderPasteLimitDialog",value:function e(){var t=se;return b.a.createElement(M["a"],{title:t.t("That\u2019s a bit too long to paste"),cancelText:t.t("Create a snippet"),goButtonText:t.t("OK"),onCancel:this.openSnippetDialog,showCancelButton:true},t.rt("To keep things running smoothly, there\u2019s a limit on the number of characters you can paste into Slack. If you\u2019d like you could <b>create a snippet</b> instead."))}},{key:"renderInput",value:function e(t){var r=t.modules,a=t.isOpen,n=t.legacyTextyClassName;var i=this.props,s=i.placeholder,o=i.channelId,l=i.enableEmojiButton,c=i.enableMentionButton,u=i.enableBroadcastKeywords,d=i.useLegacyCreate,p=i.onFocus,v=i.onBlur,m=i.forwardedRef,h=i.enableJumbomoji,f=i.isDisabled,g=i.maxLines,_=i.threadTs,y=i.viewContext,O=i.maxLength,k=i.tabIndex,E=i.clientToolBar,j=i.featureWysiwygComposer,C=i.teamId,S=i.focusOnPaste,w=i.ariaDescribedBy;var I=oe(s);var T=this.getComputedModules(r,C,E,j);return b.a.createElement(K["default"],{legacyTextyClassName:n,channelId:o,className:"p-message_input_field",ariaLabel:I,ariaDescribedBy:w,focusOnPaste:S,placeholder:s,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onLeftWhenEmpty:this.onLeftWhenEmpty,onCmdLeftWhenEmpty:Object($["a"])()?this.onCmdLeftWhenEmpty:null,onCmdRightWhenEmpty:Object($["a"])()?this.onCmdRightWhenEmpty:null,"data-qa":"message_input","data-message-input":true,"data-channel-id":o,"data-thread-ts":_,"data-thread-key":_?Object(L["getThreadKey"])(o,_):null,"data-view-context":y,ref:m,useLegacyCreate:d,maxLines:g,modules:T,isAutocompleteOpen:a,isDisabled:f,enableEmojiButton:l,enableMentionButton:c,enableBroadcastKeywords:u,enableJumbomoji:h,onTextChange:this.onTextChange,onFocus:p,onBlur:v,onPasteLimit:this.onPasteLimit,maxLength:O,tabIndex:k,useFocusRing:false})}},{key:"renderLegacyAutocomplete",value:function e(){var t=this.props,r=t.legacyChannel,a=t.threadTs,n=t.forwardedRef;var i={tabcomplete:{searchOptions:{model_ob:r,in_thread:!!a},positionMenu:function e(t){var r=n.current.getWrappedInstance?n.current.getWrappedInstance():n.current;t.style.width=r.container.offsetWidth+"px";Object(Z["a"])(t,r.container)}}};return this.renderInput({modules:i,legacyTextyClassName:"c-texty_input"})}},{key:"renderModernAutocomplete",value:function e(){return b.a.createElement(Q["a"],{completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,completeOnEmoji:true,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:this.renderInput,shouldCompleteOnTab:!this.props.useSendButton})}},{key:"render",value:function e(){var t=this.props,r=t.className,a=t.useLegacyCreate,n=t.channelId,i=t.threadTs,s=t.viewContext,o=t.showFocusOutline,l=t.fileButtonTabIndex,c=t.shouldShowTractorFilesCoachmark,u=t.setTractorFilesCoachmarkVisibility;var d=_()(r,"p-message_input",{"p-message_input--focus-visible":o});var p=b.a.createElement(Ne,{channelId:n,threadTs:i,viewContext:s,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,fileButtonTabIndex:l,useLegacyCreate:a});var v=b.a.createElement("div",{className:d},a?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),c?b.a.createElement(te["b"],{orientation:"right",coachmarkElement:b.a.createElement(V,{setTractorFilesCoachmarkVisibility:u}),style:{position:"absolute",bottom:4,height:34,width:34}},p):p);return v}}]);return t}(f["Component"]);ue.displayName="MessageInput";ue.defaultProps=ce;function de(e,t){var r=t.channelId,a=t.threadTs;return{legacyChannel:Object($["a"])()?null:Object(j["d"])(e,r),enableJumbomoji:Object(T["a"])(e),arrowHistory:Object(A["g"])(e,"arrow_history"),draft:Object(x["getChannelDraft"])(e,{channelId:r,threadTs:a}),featureOfflineMode:Object(C["isFeatureEnabled"])(e,"feature_offline_mode"),featureSonicInputs:Object(C["isFeatureEnabled"])(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(I["getGroupForUser"])(e,"composer_toolbar"),featureWysiwygComposer:Object(J["a"])(e),wasRecentlyOnline:Object(w["h"])(e),isClientOnline:Object(w["c"])(e),logger:Object(Y["a"])({state:e}),clogger:Object(re["a"])({state:e}),teamId:Object(E["b"])(e),shouldShowTractorFilesCoachmark:Object(S["b"])(e)}}var pe={setChannelDraft:function e(){return x["setChannelDraft"].apply(void 0,arguments)},clearChannelDraft:function e(){return x["clearChannelDraft"].apply(void 0,arguments)},enqueueToast:function e(){return P["enqueueToast"].apply(void 0,arguments)},openModal:function e(){return R["openModal"].apply(void 0,arguments)},openSnippetDialog:function e(){return D["a"].apply(void 0,arguments)},triggerNavigateBack:function e(t){return Object(F["a"])(t)},triggerNavigateForward:function e(t){return Object(F["b"])(t)},setTractorFilesCoachmarkVisibility:function e(){return N["f"].apply(void 0,arguments)}};var ve=Object(y["connect"])(de,pe)(ue);var me=b.a.forwardRef(function(e,t){return b.a.createElement(ve,n()({},e,{forwardedRef:t||b.a.createRef()}))});var he=r(28);var fe=r(22);var be=r(66);var ge=r(4270);var _e=ge["a"];var ye=r(1551);var Oe=r(1360);var ke=r(1351);var Ee=r(3928);var je=r(50);var Ce=new U["b"]("message_input_plus_button");var Se={channelId:h["b"].string,threadTs:h["b"].string,viewContext:h["b"].string,featureOfflineMode:h["b"].bool,isOpen:h["b"].bool,onFileMenuOpen:h["b"].func,onFileMenuClose:h["b"].func,forceOpen:h["b"].bool,fileButtonTabIndex:h["b"].number,useLegacyCreate:h["b"].bool,logger:h["b"].object.isRequired};var we={channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:false,isOpen:false,onFileMenuOpen:v["noop"],onFileMenuClose:v["noop"],forceOpen:false,fileButtonTabIndex:void 0,useLegacyCreate:false};var Ie="MSG_INPUT_FILE_BTN";var Te=function(e){p()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderMenu=e.renderMenu.bind(e);e.hiddenFileInputRef=b.a.createRef();return e}l()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.channelId,n=r.threadTs,i=r.logger,s=r.viewContext;if(!a){i.error(Ie,"Missing channelId in "+s);return null}return b.a.createElement(Ee["a"],{subtype:Ie},b.a.createElement(_e,{menuProps:t,channelId:a,threadTs:n,viewContext:s,hiddenFileInputRef:this.hiddenFileInputRef}))}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.viewContext,i=t.featureOfflineMode,s=t.isOpen,o=t.onFileMenuOpen,l=t.onFileMenuClose,c=t.forceOpen,u=t.fileButtonTabIndex,d=t.useLegacyCreate;var p=_()("p-message_input_file_button",{"p-message_input_file_button--active":s});var v=b.a.createElement(he["c"],{className:p,"aria-label":Ce.t("File menu"),tabIndex:u||null,"data-qa":"msg_input_file_btn"},b.a.createElement(fe["b"],{className:"p-message_input_file_icon",type:d?"plus-thick":"paperclip"}));var m=b.a.createElement(be["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:l,forceOpen:c},v);if(i){var h=b.a.createElement(ke["a"],{tooltipLabel:Ce.t("File menu")});m=b.a.createElement(f["Fragment"],null,b.a.createElement(Oe["b"],null,m),b.a.createElement(Oe["a"],null,b.a.createElement(be["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:l},b.a.createElement(je["c"],{tip:h},v))))}return b.a.createElement(f["Fragment"],null,m,b.a.createElement(ye["a"],{ref:this.hiddenFileInputRef,channelId:r,threadTs:a,viewContext:n}))}}]);return t}(f["Component"]);Te.displayName="MessageInputFileButton";Te.defaultProps=we;function Ae(e){return{featureOfflineMode:Object(C["isFeatureEnabled"])(e,"feature_offline_mode"),logger:Object(Y["a"])({state:e})}}var Ne=Object(y["connect"])(Ae)(Te);var Pe=new U["b"]("msg_input");var Re={sendMessage:h["b"].func.isRequired,isDisabled:h["b"].bool,isOffline:h["b"].bool,className:h["b"].string,tabIndex:h["b"].number,featureOfflineMode:h["b"].bool,buttonSize:h["b"].string,showTooltip:h["b"].bool};var Me={isDisabled:false,isOffline:false,className:void 0,tabIndex:-1,featureOfflineMode:false,buttonSize:void 0,showTooltip:false};var xe=function e(t){var r=t.isDisabled,a=t.isOffline,n=t.className,i=t.sendMessage,s=t.featureOfflineMode,o=t.tabIndex,l=t.buttonSize,c=t.showTooltip;var u=Pe.t("Send");var d=void 0;c&&(d=Object(ae["isMac"])()?Pe.t("\u2318Enter"):Pe.t("Ctrl+Enter"));var p="top";var v=b.a.createElement(he["d"],{className:n,pillarClassName:"p-message_input__send",disabled:r||a,tabIndex:o,onClick:i,size:l},u);if(s&&a){v=b.a.createElement("div",{style:{marginLeft:"auto"}},v);p="top-right";d=b.a.createElement(ke["a"],{tooltipLabel:u})}if(r&&!s)return v;if(!d)return v;return b.a.createElement(je["c"],{tip:d,position:p},v)};xe.displayName="MessageInputSendButton";xe.defaultProps=Me;var De=function e(t){return{isOffline:!Object(w["c"])(t),featureOfflineMode:Object(C["isFeatureEnabled"])(t,"feature_offline_mode"),showTooltip:Object(A["g"])(t,"msg_input_send_btn")}};var Fe=Object(y["connect"])(De)(xe);r.d(t,"a",function(){return Ne});r.d(t,"b",function(){return Fe});var Le=t["c"]=me},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(160);var n=Object(a["a"])("(noop) Open the custom status dialog via side-effect");n.propTypes=null;t["a"]=n},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=r(20);var n=Object(a["b"])("TS.ensureFullyBooted",function(){throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var i=Object(a["b"])("TS.legacyResynced",function(){throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")})},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(10);var o=r(17);var l=r(373);var c=r(51);var u=r(4212);var d=r(2029);var p=r.n(d);var v=new s["b"]("member_profile");var m={className:i["b"].string,member:i["b"].object,canInteract:i["b"].bool,onClick:i["b"].func};var h={className:void 0,member:void 0,canInteract:true,onClick:void 0};function f(e){var t=e.className,r=e.member,a=e.canInteract,i=e.onClick;var s=a&&!Object(o["isDeleted"])(r);var d=n.a.createElement(n.a.Fragment,null,Object(o["getMemberRealName"])(r),s&&n.a.createElement(l["a"],{className:"p-member_profile_name__presence",memberId:r.id}));var p=Object(o["isSlackbot"])(r)?v.t("Friendly bot, part-time programmer, and Help Center assistant-in-training."):Object(o["getMemberTitle"])(r);return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-member_profile_name__title"},i?n.a.createElement(c["a"],{className:"p-member_profile_name__link",onClick:i},d):d),Object(u["a"])(p)&&n.a.createElement("span",{className:"p-member_profile_name__subtitle"},p))}f.displayName="MemberProfileName";f.defaultProps=h;t["a"]=f},,,,,function(e,t,r){"use strict";var a=r(1707);t["a"]=a["a"]},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(348);function n(e){return Object(a["a"])((e||"").trim().toLowerCase())}},,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return s});var a=r(20);var n=Object(a["b"])("TS.client.unread.bulk_unread_count_change_sig.dispatch");var i=Object(a["b"])("TS.client.unread.legacyUpdateSortOrder");var s=Object(a["b"])("TS.client.unread.reload")},,,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setWhatsNewUpdates",function(){return g});r.d(t,"setWhatsNewLoading",function(){return _});r.d(t,"setWhatsNewFailed",function(){return y});r.d(t,"getUpdates",function(){return j});r.d(t,"getIsLoading",function(){return C});r.d(t,"getLoadFailed",function(){return S});r.d(t,"getUnreadUpdateCount",function(){return w});r.d(t,"getLatestNewsTimestamp",function(){return I});r.d(t,"fetchAndUpsertWhatsNewUpdates",function(){return T});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(0);var u=r(18);var d=r(36);var p=r(14);var v=r(15);var m=r(34);var h=r(2244);var f=r(87);var b;var g=Object(u["b"])("Set a new list of What's New updates");g.propTypes=c["b"].arrayOf(f["a"].WhatsNewUpdate.isRequired).isRequired;var _=Object(u["b"])("Mark What's New fetch as in progress");_.propTypes=null;var y=Object(u["b"])("Mark What's New fetch as failed");y.propTypes=null;var O={updates:[],isLoading:true,fetchFailed:false};var k=Object(d["b"])((b={},n()(b,g,function(e,t){return{updates:t,isLoading:false,fetchFailed:false}}),n()(b,_,function(e){return s()({},e,{isLoading:true,fetchFailed:false})}),n()(b,y,function(e){return s()({},e,{isLoading:false,fetchFailed:true})}),b),O,{persistenceEnabled:true});k.propTypes={updates:c["b"].arrayOf(f["a"].WhatsNewUpdate.isRequired).isRequired,isLoading:c["b"].bool.isRequired,fetchFailed:c["b"].bool.isRequired};t["default"]=k;var E=Object(p["b"])(function(e){return e.whatsNew||O});E.propTypes=null;var j=Object(p["b"])(function(e){return E(e).updates});j.propTypes=null;var C=Object(p["b"])(function(e){return E(e).isLoading});C.propTypes=null;var S=Object(p["b"])(function(e){return E(e).fetchFailed});C.propTypes=null;var w=Object(p["b"])(function(e){var t=Object(m["g"])(e,"whats_new_read")||0;if(t<0)return 0;var r=j(e)||[];var a=Object(o["findIndex"])(r,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.timestamp;return r<=t});return a<0?r.length:a});w.propTypes=null;var I=Object(p["b"])(function(e){var t=j(e)||[];var r=t[0];return r&&r.timestamp});I.propTypes=null;var T=Object(v["b"])("Fetch and upsert What's New updates into store",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason;e(_());return e(Object(h["b"])({reason:a})).then(function(t){return e(g(t))}).catch(function(t){e(y());throw t})});T.propTypes={reason:c["b"].string.isRequired}},,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(2);var n=r.n(a);var i=r(10);var s=new i["b"]("channel_sidebar");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.displayName,a=e.isShared,i=e.isOrgShared,o=e.isYou,l=e.isMuted,c=e.isSuggested,u=e.hasUnreads,d=e.hasDraft,p=e.isArchived,v=e.unreadCount,m=e.badgeCount,h=e.isSelected,f=e.userActive,b=e.isTyping,g=e.isThread,_=e.canPost,y=void 0===_||_,O=e.featureAnnounceOnly,k=void 0!==O&&O;var E=[h?s.t("selected"):null];if("channel"===t)E.push(a||i?s.t("shared channel"):s.t("channel"));else if("private"===t)E.push(s.t("private channel"));else if("mpim"===t)E.push(s.t("group direct message"));else if("im"===t){E.push(s.t("direct message"));E.push(f?s.t("active"):s.t("away"))}p&&E.push(s.t("archived"));l&&E.push(s.t("muted"));!y&&k&&E.push(s.t("read-only"));c&&E.push(s.t("suggested"));u&&v&&!m&&E.push(s.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:v}));m&&E.push(s.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:m}));d&&E.push(s.t("has draft"));b&&E.push(s.t("typing"));var j=function(){if(o)return s.t("{name} (you)",{name:r});if(g&&("channel"===t||"private"===t))return s.t("Thread in {name}",{name:r});if(g&&("mpim"===t||"im"===t))return s.t("Thread with {name}",{name:r});return r}();var C=n.a.join(n.a.filter(E,n.a.identity),", ");return j+" ("+C+")"}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(13);var _=r(16);var y=r.n(_);var O=r(2);var k=r.n(O);var E=r(100);var j=r(693);var C=r(50);var S=r(10);var w=r(3132);var I=r.n(w);var T=new S["b"]("flexpane");var A=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.closeButtonRef=f.a.createRef();r.focus=r.focus.bind(r);return r}u()(t,[{key:"focus",value:function e(){var t=this.closeButtonRef.current;t&&t.focus()}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.className,n=t.onOptionsClick,i=t.optionsHref,s=t.optionsIconType,o=t.optionsTooltipText,l=t.renderSecondary;var c=n||i;var u=c?C["a"]:1e3;var d=l();var p=o||T.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"});return f.a.createElement("div",{className:y()("p-flexpane_header",a)},f.a.createElement("div",{className:"p-flexpane_header__primary"},f.a.createElement("div",{className:"p-flexpane_header__primary_content"},r),c&&f.a.createElement(C["c"],{delay:u,tip:p},f.a.createElement(j["a"],{"aria-label":T.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"}),className:"p-flexpane_header__control",icon:s,href:i,onClick:n})),f.a.createElement(C["c"],{delay:u,tip:T.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},f.a.createElement(j["a"],{"aria-label":T.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times",ref:this.closeButtonRef}))),d&&f.a.createElement("div",{className:"p-flexpane_header__secondary"},d))}}]);return t}(h["PureComponent"]);A.displayName="FlexpaneHeader";A.defaultProps={children:null,className:void 0,closeFlexpane:O["noop"],onOptionsClick:void 0,optionsHref:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:O["noop"]};var N=Object(g["connect"])(null,{closeFlexpane:E["a"]})(function(e){var t=e.forwardedRef,r=s()(e,["forwardedRef"]);return f.a.createElement(A,n()({ref:t},r))});t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(N,n()({forwardedRef:t},e))})},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(2);var f=r.n(h);var b=r(16);var g=r.n(b);var _=r(108);var y=r(100);var O=r(567);var k=r(504);var E=r(693);var j={flexName:v["b"].string,flexParams:v["b"].arrayOf(v["b"].string),flexOrigin:v["b"].string,flexOriginId:v["b"].string,previewFile:v["b"].func,showUserGroupList:v["b"].func,toggleActivityFlexpane:v["b"].func,showMemberDirectory:v["b"].func,showDetails:v["b"].func,showStarredItemsList:v["b"].func,showMemberProfile:v["b"].func,showFileList:v["b"].func,size:v["b"].oneOf(["large","medium"]),className:v["b"].string};var C={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:h["noop"],showUserGroupList:h["noop"],toggleActivityFlexpane:h["noop"],showMemberDirectory:h["noop"],showDetails:h["noop"],showStarredItemsList:h["noop"],showMemberProfile:h["noop"],showFileList:h["noop"],size:"large",className:void 0};var S=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.getOrigin=r.getOrigin.bind(r);r.openOrigin=r.openOrigin.bind(r);return r}s()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexName;if(r)return this.openOrigin();switch(a){case"files":return this.props.showFileList();case"team":return this.props.showMemberDirectory();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexName,n=t.flexParams;var i=n&&n[0];if(r)return r;switch(a){case"files":return Object(O["a"])(i)?"files":null;case"team":case"groups":return Object(k["a"])(i)?"groups":null;case"user_groups":return Object(k["a"])(i)?"user_groups":null;default:return null}}},{key:"openOrigin",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexOriginId;switch(r){case"member_preview":return this.props.showMemberProfile({memberId:a});case"directory":return this.props.showMemberDirectory();case"starred_items":return this.props.showStarredItemsList("stars");case"details":case"channel_page":case"group_page":case"im_page":return this.props.showDetails({sectionId:a});case"activity":case"mentions":return this.props.toggleActivityFlexpane();case"file_details":return Object(O["a"])(a)?this.props.previewFile({fileId:a}):this.props.showFileList();case"files":return this.props.showFileList();default:return null}}},{key:"render",value:function e(){var t=this.getOrigin();if(!t)return null;var r=this.props,a=r.size,n=r.className;var i="chevron-"+a+"-left";return p.a.createElement(E["a"],{className:g()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",n),icon:i,onClick:this.onClick})}}]);return t}(d["Component"]);S.displayName="FlexBack";S.defaultProps=C;var w=function e(t,r){var a=r.flexOrigin;return{flexName:Object(_["i"])(t),flexParams:Object(_["e"])(t),flexOrigin:a||Object(_["c"])(t),flexOriginId:Object(_["d"])(t)}};var I={previewFile:y["c"],showUserGroupList:y["o"],toggleActivityFlexpane:y["q"],showMemberDirectory:y["i"],showDetails:y["e"],showStarredItemsList:y["k"],showMemberProfile:y["j"],showFileList:y["g"]};t["a"]=Object(m["connect"])(w,I)(S)},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(15);var s=r(0);var o=r(87);var l=r(1759);var c=r(3929);var u=r(358);var d=r(4);var p=r(683);var v=r(3945);var m=Object(i["b"])("build message summary for aria labels",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,i=r.ts,s=r.isFirstUnreadMsg,o=r.isFirstMsgForDay,m=r.isLastMsgForDay,h=r.previousMessageTs,f=r.day,b=r.rollup,g=r.hasFocus,_=r.viewContext;var y=t();var O=Object(p["isScreenReaderEnabled"])(y);var k=!!Object(u["getMessageEditData"])(y,{channelId:a,ts:i});if(k)return;if(!(O||g))return;var E=Object(c["a"])(y,{channelId:a,ts:i,previousMessageTs:h,rollup:b,hasFocus:g});var j=f||{ts:parseInt(Object(v["a"])(i),10),isFirstDay:false,isLastDay:false};return Object(l["a"])(n()({},E,{featureA11yMessageSummary:Object(d["isFeatureEnabled"])(y,"feature_a11y_message_summary"),viewContext:_,isFirstUnreadMsg:s,isFirstMsgForDay:o,isLastMsgForDay:m,day:j}))});m.propTypes={channelId:s["b"].string.isRequired,ts:s["b"].string.isRequired,isFirstUnreadMsg:s["b"].bool,isFirstMsgForDay:s["b"].bool,isLastMsgForDay:s["b"].bool,previousMessageTs:s["b"].string,day:s["b"].object,rollup:o["a"].Rollup(),hasFocus:s["b"].bool,viewContext:s["b"].string};t["a"]=m},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(4);var h=r(0);var f=r(12);var b={msg:h["b"].object.isRequired,children:h["b"].node,featureTinyspeck:h["b"].bool,logger:h["b"].object.isRequired};var g={children:null,featureTinyspeck:false};var _=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={error:false};return r}s()(t,[{key:"componentDidCatch",value:function e(t,r){this.setState(function(){return{error:true}});var a=t?t.message:"";var n=t?t.stack:"";var i=this.props.msg,s=i.ts,o=i.channel,l=i.subtype;this.props.logger.error("Message Kit componentDidCatch: "+l+" "+s+" in "+o+", "+a);n&&this.props.logger.error(n);r&&r.componentStack&&this.props.logger.error(r.componentStack)}},{key:"render",value:function e(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var t=this.props.msg,r=t.ts,a=t.channel;return p.a.createElement("div",{className:"sk_warning_red_bg sk_white padding_100 padding_bottom_25"},p.a.createElement("p",null,p.a.createElement("strong",null,"Message ",r," in ",a," failed to render."," ")),p.a.createElement("p",null,"Please go to #escal-messages and,"," ",p.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),p.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}]);return t}(d["Component"]);_.displayName="MessageErrorBoundary";_.defaultProps=g;var y=_;var O=function e(t){return{featureTinyspeck:Object(m["isFeatureEnabled"])(t,"feature_tinyspeck"),logger:Object(f["a"])({state:t})}};t["a"]=Object(v["connect"])(O)(_)},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(13);var f=r(0);var b=r(16);var g=r.n(b);var _=r(2);var y=r.n(_);var O=r(19);var k=r(329);var E=r(4);var j=r(423);var C=r(73);var S=r(316);var w=r(101);var I=r(100);var T=r(41);var A=r(11);var N=r(1698);var P=r(1798);var R=r(1804);var M=r(22);var x=r(51);var D=r(1033);var F=r(1805);var L=r(922);var B=r(3273);var U=r.n(B);var q={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"};var G={msg:f["b"].object.isRequired,className:f["b"].string,children:f["b"].node,showPinned:f["b"].bool,showStarred:f["b"].bool,showBroadcast:f["b"].bool,theme:f["b"].oneOf(["light","dense"]),sliHighlight:f["b"].object,currentUserId:f["b"].string,primaryView:f["b"].string,isSelfIm:f["b"].bool,isSlackbotIm:f["b"].bool,dispatch:f["b"].func,setBackground:f["b"].func};var H={className:void 0,children:void 0,showPinned:true,showStarred:true,showBroadcast:false,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:false,isSlackbotIm:false,dispatch:_["noop"],setBackground:_["noop"]};var W=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBroadcastClick=r.onBroadcastClick.bind(r);r.renderHighlight=r.renderHighlight.bind(r);r.renderStarButton=r.renderStarButton.bind(r);r.renderBroadcast=r.renderBroadcast.bind(r);r.onStarClick=r.onStarClick.bind(r);r.labelText=null;r.primaryLabelType=null;return r}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"onStarClick",value:function e(){var t=this.props.dispatch;t(Object(I["k"])())}},{key:"onBroadcastClick",value:function e(t){var r=this.props,a=r.dispatch,n=r.msg,i=r.primaryView;t.preventDefault();if(i===n.channel){a(Object(w["c"])({ts:n.ts,highlight:true}));return}a(Object(S["a"])({id:n.channel,startTs:n.ts}))}},{key:"setBackground",value:function e(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"getLabelTypes",value:function e(){var t=this.props,r=t.msg,a=t.sliHighlight,n=t.showPinned,i=t.showStarred,s=t.showBroadcast;var o=Object(T["getMessagePinnedInfo"])(r);return Object(N["a"])({isPinned:n&&!!o,isEphemeral:Object(T["isEphemeral"])(r),isStarred:i&&Object(T["isStarred"])(r),isBroadcast:s&&Object(T["isThreadBroadcast"])(r),subtype:r.subtype,sliHighlight:!!a})}},{key:"renderPinnedBy",value:function e(t){return m.a.createElement(D["a"],{className:"c-message_kit__labels__link",id:t})}},{key:"renderStarButton",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.text;if(!r)return null;return m.a.createElement(x["a"],{onClick:this.onStarClick,className:"c-message_kit__labels__link"},r)}},{key:"renderBroadcast",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.text;if(!r)return null;return m.a.createElement(x["a"],{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},r)}},{key:"renderLabelText",value:function e(t){var r=this.props,a=r.msg,i=r.currentUserId,s=r.isSelfIm,o=r.isSlackbotIm;var l=Object(T["getMessagePinnedInfo"])(a);var c=l&&l.pinnedBy;var u=Object(R["a"])(n()({},t,{isSelfIm:s,isSlackbotIm:o,currentUserId:i,pinnedBy:c,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:true}));if(!u)return null;return m.a.createElement("span",{className:"c-message_kit__labels__text"},u)}},{key:"renderLabelIcon",value:function e(t){var r=q[t];if(!r)return null;return m.a.createElement("div",{className:"c-message_kit__labels__icon"},m.a.createElement(M["b"],{type:r,size:"inherit"}))}},{key:"renderHighlight",value:function e(){var t=this.props,r=t.msg,a=t.sliHighlight;var n=r.channel,i=r.ts;if(!Object(k["shouldShowHighlightsLabel"])(a))return null;return m.a.createElement(F["a"],{sliHighlight:a,channelId:n,ts:i})}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.theme;var n=this.getLabelTypes();var i=Object(P["a"])(n);var s=this.renderLabelIcon(i);var o=this.renderLabelText(n);this.labelText=o;this.primaryLabelType=i;if(!o)return r;var l=g()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+i,"c-message_kit__labels--"+a);return m.a.createElement("div",{className:l},m.a.createElement("div",{className:"c-message_kit__labels__label"},s,o),r)}}]);return t}(v["PureComponent"]);W.displayName="MessageLabels";W.defaultProps=H;var V=function e(t,r){var a=r.msg;if(!a)return null;var n=a.channel,i=a.ts;var s=Object(E["getCurrentUserId"])(t);var o=Object(O["d"])(t,n);var l=Object(C["a"])(t);var c=Object(k["getMessageMetaData"])(t,{channelId:n,ts:i}),u=c.sliHighlight;var d=Object(A["isSlackbot"])(o);var p=Object(A["isYou"])(s,o);return{theme:Object(j["a"])(t),currentUserId:s,primaryView:l,sliHighlight:u,isSlackbotIm:d,isSelfIm:p}};t["a"]=Object(L["b"])(Object(h["connect"])(V)(W))},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(0);var h=r(16);var f=r.n(h);var b=r(2);var g=r.n(b);var _=r(41);var y=r(358);var O=r(384);var k=r(1835);var E=r(922);var j=r(3275);var C=r.n(j);var S={msg:m["b"].object.isRequired,className:m["b"].string,children:m["b"].node,isEditing:m["b"].bool,setBackground:m["b"].func,viewContext:m["b"].string};var w={className:void 0,children:void 0,isEditing:false,setBackground:b["noop"],viewContext:void 0};var I=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"setBackground",value:function e(){var t=this.props,r=t.isEditing,e=t.setBackground;e({editing:r})}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.isEditing,n=t.children,i=t.viewContext;if(!a)return n;var s=r.channel,o=r.ts;var l=f()(this.props.className,"c-message_kit__edit");return p.a.createElement("div",{className:l},p.a.createElement(k["a"],{channelId:s,ts:o,messageContainerType:i}))}}]);return t}(d["PureComponent"]);I.displayName="MessageEdit";I.defaultProps=w;var T=function e(t,r){var a=r.msg,n=r.viewContext;var i=Object(_["getMessageChannelId"])(a);var s=Object(_["getMessageTs"])(a);var o=!!Object(y["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n});return{isEditing:o}};t["a"]=Object(E["b"])(Object(O["b"])(Object(v["connect"])(T)(I)))},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(0);var h=r(16);var f=r.n(h);var b=r(423);var g=r(3277);var _=r.n(g);var y={children:m["b"].node,className:m["b"].string,theme:m["b"].oneOf(["light","dense"])};var O={className:void 0,children:void 0,theme:"light"};var k=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.children,a=t.theme;if("light"===a)return r;var n=f()("c-message_kit__indent",this.props.className);return p.a.createElement("div",{className:n},r)}}]);return t}(d["Component"]);k.displayName="MessageIndent";k.defaultProps=O;t["a"]=Object(v["connect"])(function(e){return{theme:Object(b["a"])(e)}})(k)},,,,function(e,t,r){"use strict";var a=r(0);var n=r(13);var i=r(195);var s={children:a["b"].node,isOnline:a["b"].bool};var o={children:null,isOnline:null};var l=function e(t){var r=t.isOnline,a=t.children;return r?a:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isOnline:Object(i["c"])(t)}};var u=Object(n["connect"])(c)(l);var d={children:a["b"].node,isOnline:a["b"].bool};var p={children:null,isOnline:null};var v=function e(t){var r=t.isOnline,a=t.children;return r?null:a};v.propTypes=d;v.defaultProps=p;var m=function e(t){return{isOnline:Object(i["c"])(t)}};var h=Object(n["connect"])(m)(v);var f=r(1859);r.d(t,"b",function(){return u});r.d(t,"a",function(){return h})},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return o});var a=r(20);var n=Object(a["b"])("TS.ui.needToBlockAtChannelKeyword");var i=Object(a["b"])("TS.ui.needToShowAtChannelWarning");var s=Object(a["b"])("TS.ui.showVersionInfo");var o=Object(a["b"])("TS.ui.teamSelectionChanged")},function(e,t,r){"use strict";r.d(t,"b",function(){return p});r.d(t,"a",function(){return m});var a=r(1);var n=r.n(a);var i=r(13);var s=r(4);var o=r(23);var l=r(67);var c=r(41);var u=r(516);var d=function e(t,r){var a=r.ts,n=r.channelId;var i=Object(l["a"])(t,n,a);Object(s["isFeatureEnabled"])(t,"feature_message_history_cfm")&&a&&Object(u["d"])(Object(o["b"])(t),n,a);return{msg:i}};function p(e){return Object(i["connect"])(d)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}var v=function e(t,r){var a=r.ts,n=r.prevTs,i=r.channelId;var d=Object(l["a"])(t,i,a);var p=Object(l["a"])(t,i,n);if(Object(s["isFeatureEnabled"])(t,"feature_message_history_cfm")){var v=Object(o["b"])(t);a&&Object(u["d"])(v,i,a);n&&Object(u["d"])(v,i,n)}return{msg:d,adjacent:Object(c["isAdjacentMessage"])(t,d,p)}};function m(e){return Object(i["connect"])(v)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var a=r(1400),n=r(2158),i=r(2159);function s(e){var t=-1,r=null==e?0:e.length;this.__data__=new a;while(++t<r)this.add(e[t])}s.prototype.add=s.prototype.push=n;s.prototype.has=i;e.exports=s},,,function(e,t){function r(e,t){return e.has(t)}e.exports=r},function(e,t){function r(e){var t=-1,r=Array(e.size);e.forEach(function(e){r[++t]=e});return r}e.exports=r},function(e,t,r){var a=r(502),n=r(1405);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function o(e,t){if(a(e))return false;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||n(e))return true;return s.test(e)||!i.test(e)||null!=t&&e in Object(t)}e.exports=o},function(e,t,r){var a=r(755),n=r(682);var i="[object Symbol]";function s(e){return"symbol"==typeof e||n(e)&&a(e)==i}e.exports=s},,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1);var i=r.n(n);var s=r(13);var o=r(119);var l=r(27);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var v=r(8);var m=r.n(v);var h=r(9);var f=r.n(h);var b=r(0);var g=r(2);var _=r(16);var y=r.n(_);var O=r(4);var k=r(10);var E=r(35);var j=r(31);var C=r(42);var S=r(164);var w=r(528);var I=r(331);var T=r(17);var A=r(24);var N=r(187);var P=r(270);var R=r(1407);var M=new k["b"]("classic_nav");var x={team:b["b"].object.isRequired,member:b["b"].object.isRequired,name:b["b"].string.isRequired,orgName:b["b"].string,url:b["b"].string.isRequired,onMouseEnter:b["b"].func,featureTeamMenuTrialI18n:b["b"].bool,featureLocalDiscountAwareness:b["b"].bool,fetchPaymentsStatus:b["b"].func.isRequired,localDiscountOffer:b["b"].object};var D={orgName:void 0,onMouseEnter:g["noop"],featureTeamMenuTrialI18n:false,featureLocalDiscountAwareness:false,localDiscountOffer:null};var F=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={paymentsStatusIsLoaded:false};return r}p()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.fetchPaymentsStatus().then(function(){t.setState(function(){return{paymentsStatusIsLoaded:true}})})}},{key:"buildPlanInfoLink",value:function e(t){var r=t.path,a=t.tag,n=t.text;if("a"!==a)return null;var s=this.props.team;return i.a.createElement(N["a"],{target:"_blank",className:"bold",path:r,onClick:function e(){Object(j["openAuthenticatedUrlInBrowser"])(s,r)}},n)}},{key:"renderTeamPlanInfo",value:function e(){var t=this;var r=this.props,a=r.team,s=r.member,o=r.orgName,l=r.featureTeamMenuTrialI18n,c=r.localDiscountOffer,u=r.featureLocalDiscountAwareness;if(!this.state.paymentsStatusIsLoaded)return null;if(Object(T["isGuest"])(s))return null;var d=void 0;var p=void 0;var v="p-classic_nav__team_menu__blurb_plan";var m=Object(j["isOnStandardPlan"])(a);if(Object(j["isOnTrial"])(a)&&l){var h=Object(S["k"])(Object(j["getProductTermEndTs"])(a),{excludeYear:true});d="pricing?ui_step=61&ui_element=5";p=i.a.createElement(n["Fragment"],null,m?M.rt("Your trial of <strong>Standard</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:h}):M.rt("Your trial of <strong>Plus</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:h})," ",this.buildPlanInfoLink({path:d,tag:"a",text:M.t("See upgrade options")}))}else if((Object(j["isOnTrial"])(a)||Object(j["isOnFreePlan"])(a))&&u&&c){d="pricing?ui_step=61&ui_element=5";p=i.a.createElement(n["Fragment"],null,M.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:c.discountPercent})," ",this.buildPlanInfoLink({path:d,tag:"a",text:M.t("See upgrade options")}));v=y()(v,"p-classic_nav__team_menu__blurb_plan--has_local_discount","p-classic_nav__team_menu__blurb_plan--has_local_discount_"+c.country.toLowerCase())}else if(Object(j["isOnFreePlan"])(a)){d="pricing?ui_step=61&ui_element=5";p=M.rt("Your workspace is currently on Slack's <strong>Free</strong> plan. <a>See upgrade options</a>",{},function(e){var r=e.tag,a=e.text;return t.buildPlanInfoLink({path:d,tag:r,text:a})})}else if(m){d="pricing/standard?ui_step=61&ui_element=5";p=M.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},function(e){var r=e.tag,a=e.text;return t.buildPlanInfoLink({path:d,tag:r,text:a})})}else if(Object(j["isOnPlusPlan"])(a)){d="pricing/plus?ui_step=61&ui_element=5";p=M.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},function(e){var r=e.tag,a=e.text;return t.buildPlanInfoLink({path:d,tag:r,text:a})})}else if(Object(j["isEnterpriseTeam"])(a)){d="account/workspace-settings";p=M.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:o},function(e){var r=e.tag,a=e.text;return t.buildPlanInfoLink({path:d,tag:r,text:a})})}else Object(j["isOnCompliancePlan"])(a)&&l&&(p=M.t("Your workspace is currently on Slack\u2019s Enterprise Select plan."));return p?i.a.createElement("p",{className:v,"data-qa":"classic_nav__team_menu__blurb_plan"},p):null}},{key:"render",value:function e(){var t=this.props,r=t.team,a=t.name,n=t.url,s=t.onMouseEnter;var o=Object(j["isEnterpriseTeam"])(r);var l=Object(C["isAppStoreBuild"])();return i.a.createElement("div",{onMouseEnter:s},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--team"},i.a.createElement(P["b"],{id:r.id,size:36,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},a),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},n))),o||!l?this.renderTeamPlanInfo():null)}}]);return t}(n["Component"]);F.displayName="TeamBlurb";F.defaultProps=D;var L=function e(t){var r=Object(E["d"])(t);return{team:r,member:Object(A["b"])(t),name:Object(j["getTeamDisplayName"])(r),orgName:r.enterprise_name,url:r.domain+".slack.com",featureTeamMenuTrialI18n:Object(O["isFeatureEnabled"])(t,"feature_team_menu_trial_i18n"),featureLocalDiscountAwareness:Object(O["isFeatureEnabled"])(t,"feature_local_discount_awareness"),localDiscountOffer:Object(j["getTeamLocalDiscountOffer"])(r)}};var B={fetchPaymentsStatus:I["d"]};var U=Object(s["connect"])(L,B)(Object(w["b"])(F));var q=r(163);function G(e,t,r){if(!e)throw new Error("mountTeamBlurb must be called with a teamId parameter");var a=Object(l["d"])(e);Object(o["a"])(i.a.createElement(s["Provider"],{store:a},i.a.createElement(q["a"],null,i.a.createElement(U,r))),t)}Object(a["a"])("interop.mountTeamBlurb",G)},,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(0);var u=r(36);var d=r(717);var p;var v=Object(u["b"])((p={},n()(p,d["innerAddCustomEmoji"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId,a=t.cacheTs,i=t.emojis,l=t.aliases;if(!r||!a||!i&&!l)return e;var c={};Object(o["forEach"])(i,function(e,t){if(!e||!t)return;c[t]={url:e}});Object(o["forEach"])(l,function(e,t){if(!e||!t)return;c[t]={aliasOf:e}});var u=e[r]&&e[r].customEmoji||{};var d=e[r]&&e[r].cacheTs;if(Object(o["isEmpty"])(c)||d===a)return e;return s()({},e,n()({},r,{customEmoji:s()({},u,c),cacheTs:a}))}),n()(p,d["bulkRemoveCustomEmoji"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId,a=t.cacheTs,i=t.names;if(!e[r]||!a||Object(o["isEmpty"])(i))return e;var l=Object(o["omit"])(e[r].customEmoji,i);return s()({},e,n()({},r,{customEmoji:l,cacheTs:a}))}),n()(p,d["renameCustomEmoji"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId,a=t.cacheTs,i=t.prevName,l=t.nextName;if(!i||!l||!e[r]||!e[r].customEmoji||!e[r].customEmoji[i]||!a)return e;var c=s()({},e[r].customEmoji);c[l]=s()({},c[i]);delete c[i];Object(o["forEach"])(c,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.aliasOf;var r=arguments[1];t===i&&(c[r]=s()({},c[r],{aliasOf:l}))});return s()({},e,n()({},r,{customEmoji:c,cacheTs:a}))}),p),{},{persistenceEnabled:true});v.propTypes=c["b"].objectOf(c["b"].shape({cacheTs:c["b"].string,customEmoji:c["b"].objectOf(c["b"].shape({url:c["b"].string}))}));t["a"]=v},,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return v});var a=r(146);var n=r(23);var i=r(35);var s=r(24);var o=r(17);var l=r(31);var c=r(184);var u=r(33);var d=r(57);var p=function e(t,r,a){return"USD"===t&&r!==u["e"].UNITED_STATES&&"es-ES"!==a&&"fr-FR"!==a};var v=function e(t){var r=Object(n["b"])(t);var u=Object(i["j"])(t,r);var v=Object(l["getTeamDisplayName"])(u);var m=Object(o["isRestricted"])(Object(s["b"])(t));var h=Object(a["selectActiveCurrency"])(t);var f=Object(d["f"])();var b=p(h,Object(c["getCompanyAddressCountry"])(t),f);var g=Object(a["selectActiveProductId"])(t);var _={teamName:v,isUserRestricted:m,yearlyPlanCostPerTerm:Object(a["selectCostPerTermForYearlyPlan"])(t),monthlyPlanCostPerTerm:Object(a["selectCostPerTermForMonthlyPlan"])(t),availableCurrencies:Object(a["selectAvailableCurrencies"])(t),planCostPerTerm:Object(a["selectActivePlanCostPerTerm"])(t),planIsYearly:Object(a["selectActivePlanIsYearly"])(t),numMonthsPerPlan:Object(a["selectActivePlanMonthsCount"])(t),planCurrency:h,numBillableMembers:Object(a["selectBillableActiveUsers"])(t),numInactiveMembers:Object(a["selectInactiveUsers"])(t),isZeroActiveMembers:Object(a["isZeroRealActiveUsers"])(t),totalMembers:Object(a["selectTotalUsers"])(t),paidSeats:Object(a["selectPaidSeats"])(t),tax:Object(a["selectTax"])(t),teamCredits:Object(a["selectCurrentTeamCredits"])(t),currentTeamCredits:Object(a["selectCurrentTeamCredits"])(t),creditsApplied:Object(a["selectCreditsApplied"])(t),totalCost:Object(a["selectSubtotal"])(t),totalCostWithTax:Object(a["selectTotalRecurring"])(t),totalRecurringTax:Object(a["selectTotalRecurringTax"])(t),isCostValid:Object(a["isCostValid"])(t),didCostFetchFail:Object(a["isAPIError"])(t),isPlansAndCostDataLoaded:Object(a["selectIsPlansAndCostDataLoaded"])(t),showCurrencyLabel:b,activeProductId:g};return _}},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(0);var b=r(2);var g=r(1757);var _=r(4);var y=r(249);var O=r(30);var k=r(10);var E=r(34);var j=r(71);var C=r(38);var S=r(3);var w=r.n(S);var I=r(37);var T=r.n(I);var A=r(42);var N=r(12);var P={logger:f["b"].object.isRequired,WrappedComponent:f["b"].any.isRequired,keyboardPref:f["b"].string};var R={keyboardPref:void 0};var M=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.desktopKeyboardLayoutChanged=r.desktopKeyboardLayoutChanged.bind(r);r.state={desktopKeyboardLayout:r.getDesktopKeyboardLayout()};Object(A["canAutoGetKeyboard"])()&&(r.desktopKeyboardLayoutDisposable=Object(A["onDidChangeKeyboardLayout"])(r.desktopKeyboardLayoutChanged));return r}d()(t,[{key:"componentWillUnmount",value:function e(){this.desktopKeyboardLayoutDisposable&&(this.desktopKeyboardLayoutDisposable.dispose?this.desktopKeyboardLayoutDisposable.dispose():this.props.logger.warn("WITH-KB-LOCALE","Cannot unsubscribe from keyboard layout changes"))}},{key:"getDesktopKeyboardLayout",value:function e(){if(Object(A["canAutoGetKeyboard"])()){var t=Object(A["getLocaleInformation"])().currentKeyboardLayout;return Object(y["e"])(t)}return null}},{key:"desktopKeyboardLayoutChanged",value:function e(){var t=this;this.setState(function(){return{desktopKeyboardLayout:t.getDesktopKeyboardLayout()}})}},{key:"render",value:function e(){var t=this.props,r=t.WrappedComponent,a=t.keyboardPref,i=t.logger,s=T()(t,["WrappedComponent","keyboardPref","logger"]);var o=this.state.desktopKeyboardLayout;var l=o||a;"en-US"===l&&(l="us");return n.a.createElement(r,w()({keyboardLocale:l},s))}}]);return t}(a["Component"]);M.displayName="WithKeyboardLocale";M.defaultProps=R;function x(e){function t(t){return{logger:Object(N["a"])({state:t}),keyboardPref:Object(E["g"])(t,"keyboard"),WrappedComponent:e}}return Object(i["connect"])(t)(M)}var D=x;var F=r(49);var L=r(15);var B=r(2264);var U=r(1053);var q=r(1358);var G=r(550);var H=r(794);var W=r(316);var V=r(274);var K=Object(L["b"])("Switches to the All Threads view",function(e){e(Object(W["a"])({id:V["a"].allThreads}))});var z=K;var Q=r(73);var Y=r(1547);var J=Object(L["b"])("Switches to the All Unreads view",function(e,t){var r=Object(_["isFeatureEnabled"])(t(),"feature_pages")?"Punreads":V["a"].allUnreads;var a=Object(Q["a"])(t());e(a===r?Object(Y["b"])():Object(W["a"])({id:r}))});var X=J;var Z=r(20);var $=Object(Z["b"])("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null});var ee="browse_dms";var te="browse_channels";var re="open_all_unreads";var ae="quick_switcher";var ne="set_a_status";var ie="open_preferences";var se="open_all_threads";var oe=Object(L["b"])("Run a keyboard shortcut without the keyboard",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.id;var n=t();if(a===ee&&Object(_["isFeatureEnabled"])(n,"feature_sonic_dm_browser")){e(Object(q["a"])());return}if(a===ie){e(Object(H["a"])());return}if(a===se&&Object(_["isFeatureEnabled"])(n,"feature_react_all_threads")){e(z());return}if(a===re&&Object(_["isFeatureEnabled"])(n,"feature_react_all_unreads")){e(X());return}if(Object(F["a"])()){a===ne?e(Object(U["a"])()):a===ae?e(Object(B["a"])()):a===re?e(X()):a===te&&e(Object(G["a"])());return}$(a)});oe.propTypes={id:f["b"].oneOf([re,ne,ee,te,ae,ie,se]).isRequired};var le=oe;var ce=new k["b"]("shortcuts_flexpane");function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.featureReactAllUnreads;var a=[{title:ce.t("Basics"),id:"basics",shortcuts:[{title:ce.t("Quick Switcher"),keys:A["isDesktop"]?["key_Cmd","key_K","  or  ","key_T"]:["key_Cmd","key_K"],hasInfoButton:true,infoButtonMessage:ce.t("Jump to another conversation by just typing its name"),id:"quick_switcher"},{title:ce.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:ce.t("Browse channels",{ns:"channel_browser"}),keys:["key_Cmd","key_Shift","key_L"],id:"browse_channels"},{title:ce.t("Edit last message (in empty text input)"),keys:["key_\u2191"]},{title:ce.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","es","fr","ja"]},{title:ce.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","es","fr","ja"]},{title:ce.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:ce.t("Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:true},{title:ce.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:true},{title:ce.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:ce.t("Navigation"),id:"navigation",shortcuts:[{title:ce.t("Move focus to the next element"),keys:["key_Tab"]},{title:ce.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:ce.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:ce.t("Move focus to the next section"),keys:A["isDesktop"]?["key_F6"]:["key_Cmd","key_F6"]},{title:ce.t("Move focus to the previous section"),keys:A["isDesktop"]?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:ce.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:ce.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:ce.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:ce.t("Scroll up"),keys:["key_fn","key_\u2191","  or  ","key_Page Up"]},{title:ce.t("Scroll down"),keys:["key_fn","key_\u2193","  or  ","key_Page Down"]},{title:ce.t("Scroll to previous day"),keys:["key_Shift","key_Page Up"]},{title:ce.t("Scroll to next day"),keys:["key_Shift","key_Page Down"]},{title:ce.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:true,browserBlackList:["windows","linux"]},{title:ce.t("Close or re-open right pane",{fallbackHash:"1b790540b5c4590525e4706f1e3023888862a175"}),keys:["key_Cmd","key_"+Object(y["d"])(".",{kb:e})]},{title:ce.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:true},{title:ce.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome"]},{title:ce.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["firefox"]},{title:ce.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"]},{title:ce.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:ce.t("Messaging"),id:"messaging",shortcuts:[{title:ce.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:ce.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:ce.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:ce.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(y["d"])("\\",{kb:e})]},{title:ce.t("Autocomplete @username"),keys:["key_@"]},{title:ce.t("Autocomplete channel"),keys:["key_#"]},{title:ce.t("Autocomplete emoji"),keys:["key_:"]}]},{title:ce.t("Mark Messages Read and Unread"),shortcuts:[{title:ce.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:ce.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:ce.t("Mark a message as unread"),keys:["key_Option",ce.t("  and click message")],keysWin:["key_Alt",ce.t("  and click message")],keysLinux:["key_Alt",ce.t("  and click message")]}]},{title:ce.t("Channels & Direct Messages"),shortcuts:[{title:ce.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:ce.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:ce.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:ce.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:ce.t("All Unreads"),id:"all_unreads",shortcuts:[{title:r?ce.t("Expand channel"):ce.t("Next channel"),keys:["key_\u2192"]},{title:r?ce.t("Collapse channel"):ce.t("Previous channel"),keys:["key_\u2190"]},{title:ce.t("Mark channel as read"),keys:r?["key_Esc"]:["key_R"]}]},{title:ce.t("Files and Snippets"),shortcuts:[{title:ce.t("Upload a file"),keys:["key_Cmd","key_U"]},{title:ce.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:ce.t("Calls"),shortcuts:[{title:ce.t("Toggle mute"),keys:["key_M"]},{title:ce.t("Toggle video"),keys:["key_V"]},{title:ce.t("Invite list"),keys:["key_+",ce.t("  or  "),"key_A"]},{title:ce.t("Emoji reactions"),keys:["key_E",ce.t("  then 1-9")]}]},{title:ce.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:ce.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["],keysWin:["key_Ctrl","key_Tab"]},{title:ce.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"],keysWin:["key_Ctrl","key_Shift","key_Tab"]},{title:ce.t("A specific workspace"),keys:["key_Cmd",ce.t("  and 1-9")]}]}];var n=a[Object(b["findIndex"])(a,["id","basics"])].shortcuts;var i=a[Object(b["findIndex"])(a,["id","navigation"])].shortcuts;var s=a[Object(b["findIndex"])(a,["id","messaging"])].shortcuts;A["isDesktop"]&&i.push({title:ce.t("Jump to unread messages"),keys:["key_Cmd","key_J"]});s.push({title:ce.t("Bold text"),keys:["key_Cmd","key_B"]});s.push({title:ce.t("Italic text"),keys:["key_Cmd","key_I"]});s.push({title:ce.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]});s.push({title:ce.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]});if(!A["isDesktop"]||Object(O["isSSBAndAtLeastVersion"])("3.0.0")){s.push({title:ce.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]});s.push({title:ce.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})}s.push({title:ce.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]});n.push({title:ce.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});if(r){var o=Object(b["find"])(a,{id:"all_unreads"});if(o){o.shortcuts.push({title:ce.t("Previous channel"),keys:["key_Shift","key_Page Up"]});o.shortcuts.push({title:ce.t("Next channel"),keys:["key_Shift","key_Page Down"]})}}return a}var de=r(921);var pe=r(26);var ve=r.n(pe);var me=r(2414);var he=r(16);var fe=r.n(he);var be=r(1181);var ge=r(50);var _e=r(22);var ye=r(187);var Oe=r(3184);var ke=r(3186);var Ee={title:f["b"].oneOfType([f["b"].string,f["b"].object]),keys:f["b"].array,keysLinux:f["b"].array,keysWin:f["b"].array,hasInfoButton:f["b"].bool,infoButtonMessage:f["b"].string,id:f["b"].string,executeKeyboardShortcut:f["b"].func,telemeter:f["b"].object};var je={title:"Basic",keys:[],keysLinux:null,keysWin:null,hasInfoButton:false,infoButtonMessage:"",id:null,executeKeyboardShortcut:b["noop"],telemeter:{count:b["noop"]}};var Ce={"\u2191":"arrow_up_medium","\u2193":"arrow_down_medium","\u2190":"arrow_left_medium","\u2192":"arrow_right_medium"};var Se=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getKeys",value:function e(){var t=this.props,r=t.keys,a=t.keysWin,n=t.keysLinux;if(null!=a&&Object(O["isWindows"])())return a;if(null!=n&&Object(O["isLinux"])())return n;return r}},{key:"execShortcut",value:function e(t){this.props.executeKeyboardShortcut({id:t});this.props.telemeter.count("clicked_keyboard_shortcut")}},{key:"renderKeyLabel",value:function e(t){var r=Object(O["isWindows"])()||Object(O["isLinux"])();if(Ce[t])return n.a.createElement(_e["a"],{type:Ce[t]});if(("Cmd"===t||"Control"===t)&&r)return"Ctrl";if("Option"===t&&r)return"Alt";if("CtrlAlternative"===t)return"Ctrl";if("ShiftAlternative"===t)return"Shift";return t}},{key:"renderKeys",value:function e(){var t=this;return this.getKeys().map(function(e){var r=e.split("key_")[1];if(!r)return e;var a=!!Ce[r];var i=fe()({"p-shortcuts_flexpane__arrow_key":a,"c-keyboard_key":true});return n.a.createElement("div",{key:t.props.title+" "+e+" "+Object(b["uniqueId"])(),className:i},t.renderKeyLabel(r))})}},{key:"renderInfoButton",value:function e(){return n.a.createElement(ge["c"],{tip:this.props.infoButtonMessage,delay:ge["b"]},n.a.createElement(_e["a"],{align:"top",className:"p-shortcuts_flexpane__tip",type:"question_circle"}))}},{key:"renderTitle",value:function e(){var t=this;var r=this.props.hasInfoButton?this.renderInfoButton():null;var i=this.props.title;if(null==this.props.id)return n.a.createElement(a["Fragment"],null,i,r);return n.a.createElement(ye["a"],{type:"button",onClick:function e(){return t.execShortcut(t.props.id)}},i,r)}},{key:"render",value:function e(){var t=fe()("p-shortcuts_flexpane__shortcut",{"p-shortcuts_flexpane__shortcut_hoverable":null!==this.props.id});return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},this.renderTitle()),n.a.createElement("span",{className:"p-shortcuts_flexpane__shortcut_keys"},this.renderKeys()))}}]);return t}(n.a.PureComponent);Se.displayName="Shortcut";Se.defaultProps=je;var we=Se;var Ie=r(3190);var Te=new k["b"]("shortcuts_flexpane");var Ae={items:f["b"].arrayOf(f["b"].object.isRequired),keyboardLocale:f["b"].string,enableUnreadView:f["b"].bool,executeKeyboardShortcut:f["b"].func,telemeter:f["b"].object,onItemTabWithin:f["b"].func};var Ne={items:[],keyboardLocale:null,enableUnreadView:false,executeKeyboardShortcut:b["noop"],telemeter:{count:b["noop"]},onItemTabWithin:b["noop"]};var Pe=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(r,["renderItem","isFocusableItem","focus","includeShortcut"]);r.list=n.a.createRef();return r}d()(t,[{key:"getItemKeys",value:function e(){return this.rows.map(function(e){return e.key})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var r=t.index;var a=this.rows[r];return a&&"shortcut"===a.type}},{key:"includeShortcut",value:function e(t){var r=Object(O["getOperatingSystem"])();var a=Object(O["getBrowser"])();var n=this.props,i=n.keyboardLocale,s=n.enableUnreadView;if(t.isSsbOnly&&!A["isDesktop"])return false;var o=t.browserBlackList||[];var l=Object(b["includes"])(o,a)||Object(b["includes"])(o,r);if(l)return false;if(Object(b["includes"])(t.localeBlackList,i))return false;if("open_all_unreads"===t.id&&!s)return false;return true}},{key:"createRows",value:function e(){var t=this;return this.props.items.reduce(function(e,r,a){var n=r.shortcuts.filter(t.includeShortcut).map(function(e,t){return w()({type:"shortcut",key:"shortcut-"+a+"-"+t},e)});return[].concat(ve()(e),[{type:"header",key:"header-"+a,title:r.title,subtitle:r.subtitle}],ve()(n))},[])}},{key:"renderItem",value:function e(t){var r=this.rows[t];if(!r||!r.type)return null;var i=this.props,s=i.executeKeyboardShortcut,o=i.telemeter;if("shortcut"===r.type)return n.a.createElement(we,{title:r.title,keys:r.keys,keysLinux:r.keysLinux,keysWin:r.keysWin,hasInfoButton:r.hasInfoButton,infoButtonMessage:r.infoButtonMessage,id:r.id,executeKeyboardShortcut:s,telemeter:o});var l=fe()("p-shortcuts_flexpane__shortcut_heading",{"p-shortcuts_flexpane__shortcut_heading_first":0===t});if("header"===r.type)return n.a.createElement(a["Fragment"],null,n.a.createElement("h3",{className:l},r.title),r.subtitle&&n.a.createElement("h4",{className:"p-shortcuts_flexpane__shortcut_sub_heading"},r.subtitle));return null}},{key:"render",value:function e(){var t=this;this.rows=this.createRows();var r=this.getItemKeys();return n.a.createElement(me["a"],null,function(e){var a=e.width,i=e.height;return n.a.createElement(be["a"],{className:"p-shortcuts_flexpane__list",ref:t.list,width:a,height:i,keys:r,rowRenderer:t.renderItem,animateOnScroll:false,ariaLabel:Te.t("Keyboard Shortcuts"),isFocusableItem:t.isFocusableItem,onItemTabWithin:t.props.onItemTabWithin})})}}]);return t}(a["PureComponent"]);Pe.displayName="KeyboardShortcutsList";Pe.defaultProps=Ne;var Re=Pe;var Me=r(4405);var xe={keyboardLocale:f["b"].string,sections:f["b"].arrayOf(f["b"].shape({title:f["b"].string,shortcuts:f["b"].arrayOf(f["b"].shape({os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,title:f["b"].oneOfType([f["b"].string,f["b"].object]),keys:f["b"].array,keysLinux:f["b"].array,keysWin:f["b"].array,hasInfoButton:f["b"].bool,infoButtonMessage:f["b"].string,id:f["b"].string,isSsbOnly:f["b"].bool,browserBlackList:f["b"].array}))})),featureReactAllUnreads:f["b"].bool,enableUnreadView:f["b"].bool,executeKeyboardShortcut:f["b"].func,telemeter:f["b"].object};var De={sections:void 0,keyboardLocale:null,featureReactAllUnreads:false,enableUnreadView:false,executeKeyboardShortcut:b["noop"],telemeter:{count:b["noop"]}};var Fe=new k["b"]("shortcuts_flexpane");var Le=Object(O["getOperatingSystem"])();var Be=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(r,["renderBody","renderSubtitle","focus","onItemTabWithin"]);r.list=n.a.createRef();r.flexpane=n.a.createRef();return r}d()(t,[{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderSubtitle",value:function e(){var t="mac"===Le?Fe.t("Cmd"):Fe.t("Ctrl");var r=Object(y["d"])("/",{kb:this.props.keyboardLocale});return Fe.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:t,headerSlashButton:r})}},{key:"renderBody",value:function e(){var t=this.props,r=t.keyboardLocale,a=t.featureReactAllUnreads;var i=this.props.sections||ue(r,{featureReactAllUnreads:a});return n.a.createElement(Re,{ref:this.list,items:i,keyboardLocale:this.props.keyboardLocale,enableUnreadView:this.props.enableUnreadView,executeKeyboardShortcut:this.props.executeKeyboardShortcut,telemeter:this.props.telemeter,onItemTabWithin:this.onItemTabWithin})}},{key:"render",value:function e(){var t=Fe.t("Keyboard Shortcuts");return n.a.createElement(de["a"],{ref:this.flexpane,focus:this.focus,renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:t,kbNavOrder:Object(C["a"])()?void 0:4.6,viewId:"shortcuts"})}}]);return t}(n.a.PureComponent);Be.displayName="KeyboardShortcutsFlexpane";Be.defaultProps=De;function Ue(e){var t=Object(_["isFeatureEnabled"])(e,"feature_react_all_unreads");return{featureReactAllUnreads:t,enableUnreadView:Object(E["g"])(e,"enable_unread_view"),telemeter:Object(j["c"])({state:e})}}var qe={executeKeyboardShortcut:function e(){return le.apply(void 0,arguments)}};var Ge=Object(i["connect"])(Ue,qe)(Be);var He=D(Ge);var We=r(163);var Ve=function e(t,r,a){if(!t)throw new Error("mountKeyboardShortcuts must be called with a teamId parameter");var l=Object(o["d"])(t);var c=a;Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(We["a"],null,n.a.createElement(He,c))),r)};var Ke=Ve;var ze=r(44);Object(ze["a"])("interop.mountKeyboardShortcuts",Ke)},,,,function(e,t,r){"use strict";r.r(t);r.d(t,"updateEnablePopupsBannerVisibility",function(){return d});r.d(t,"getEnablePopupsBannerVisibility",function(){return m});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=Object(l["b"])("Update the visibility of the Enable Popups Banner");d.propTypes=o["b"].bool;var p={showBanner:false};var v=Object(c["b"])(n()({},d,function(e,t){return s()({},e,{showBanner:t})}),p,{persistenceEnabled:true});v.propTypes={showBanner:o["b"].bool};t["default"]=v;var m=Object(u["b"])(function(e){return e&&e.enablePopupsBanner&&e.enablePopupsBanner.showBanner})},,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(0);var l=r(1);var c=r.n(l);var u=r(15);var d=r(48);var p=r(23);var v=r(35);var m=r(30);var h=r(42);var f=r(31);var b=r(45);var g=r(21);var _=r(13);var y=r(354);var O=r(163);var k=r(4604);var E=r(63);var j=r.n(E);var C=r(26);var S=r.n(C);var w=r(6);var I=r.n(w);var T=r(7);var A=r.n(T);var N=r(8);var P=r.n(N);var R=r(9);var M=r.n(R);var x=r(16);var D=r.n(x);var F=r(2);var L=r.n(F);var B=r(292);var U=r(391);var q=r(34);var G=r(1841);var H=r(1100);var W=r(10);var V=r(73);var K=r(28);var z=r(392);var Q=r(537);var Y=r(899);var J=r(96);var X=r(51);var Z=r(139);var $=r(251);var ee=r(894);var te=r(4204);var re=r(4);var ae=r(4404);var ne=r(122);var ie=r(4312);var se=r(4602);var oe=r(3140);var le=50;var ce=new W["b"]("apps_browser");var ue={channelId:o["b"].string,hasSeenAppSpaceTutorial:o["b"].bool,isInternetExplorer:o["b"].bool,isFirefoxAndWindows:o["b"].bool,isFirefoxAndMac:o["b"].bool,isMacSsbBuild:o["b"].bool,addAppsVariant:o["b"].bool,isUnpaid:o["b"].bool,fetchAppsIndexList:o["b"].func,submitAppsIndexSearch:o["b"].func,clogger:o["b"].object.isRequired,openAboutApp:o["b"].func,featureM11nAppsBrowser:o["b"].bool,featureAppsBrowserA11y:o["b"].bool,getChannelMembershipInfoForUsers:o["b"].func,addAppToChannelByMemberId:o["b"].func,closeModal:o["b"].func,openAppsTutorialModal:o["b"].func,team:o["b"].object,isAppBrowserBetterHeaderTreatment:o["b"].bool,featureAppBrowserBetterHeaderTranslations:o["b"].bool};var de={channelId:void 0,hasSeenAppSpaceTutorial:false,isInternetExplorer:false,isFirefoxAndWindows:false,isFirefoxAndMac:false,isMacSsbBuild:false,addAppsVariant:false,isUnpaid:false,fetchAppsIndexList:L.a.noop,submitAppsIndexSearch:L.a.noop,openAboutApp:L.a.noop,featureM11nAppsBrowser:false,featureAppsBrowserA11y:false,getChannelMembershipInfoForUsers:L.a.noop,addAppToChannelByMemberId:L.a.noop,closeModal:L.a.noop,openAppsTutorialModal:L.a.noop,team:void 0,isAppBrowserBetterHeaderTreatment:false,featureAppBrowserBetterHeaderTranslations:false};var pe={listEnpoint:"apps.index.list",searchEndpoint:"apps.index.search"};var ve=function e(){return{name:ce.t("What are apps?"),short_description:ce.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/436da/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}};var me=function(e){M()(t,e);function t(e){I()(this,t);var r=P()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.lastFetchId="";r.pendingFetch=null;r.lastRequestId=0;r.currentDisplayedId=0;r.isMouseMoveEnabled=true;r.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;r.runningAppIndex=0;r.showLimitMeter=false;r.appsForLimitMeter=null;r.cloggedLimitMeterImpression=false;r.LimitMeterClogId=null;r.appLimitMeterClogPayload={};r.defaultAppCategories=[];r.isPaginating=false;r.state={isShowingDefaultAppCategories:true,isSearching:false,searchTerm:"",appCategories:[],showLoadingIndicator:false,appMap:{},categoryNamesMap:{}};r.handleAppDirectoryButtonClick=r.handleAppDirectoryButtonClick.bind(r);r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.handleAppClick=r.handleAppClick.bind(r);r.handleAppLimitMeterClickClog=r.handleAppLimitMeterClickClog.bind(r);r.hideLoadingIndicator=r.hideLoadingIndicator.bind(r);r.searchApps=r.searchApps.bind(r);r.completeRequest=r.completeRequest.bind(r);r.renderRow=r.renderRow.bind(r);r.isFocusableItem=r.isFocusableItem.bind(r);r.paginate=r.paginate.bind(r);r.handleItemClick=r.handleItemClick.bind(r);r.throttledSearchApps=L.a.throttle(r.searchApps,500,{leading:false});return r}A()(t,[{key:"componentDidMount",value:function e(){var t=this;this.loadingTimeout=setTimeout(function(){t.setState(function(){return{showLoadingIndicator:true}})},300);var r=this.props.fetchAppsIndexList({limit:le}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.defaultAppCategories=[].concat(S()(e.categories));return{categories:t.defaultAppCategories}});this.completeRequest(r,pe.listEnpoint,false,this.hideLoadingIndicator)}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.loadingTimeout);clearTimeout(this.searchingTimeout);this.pendingFetch&&this.pendingFetch.cancel()}},{key:"getTotalAppsCount",value:function e(){var t=0;for(var r=0;r<this.state.appCategories.length;r++)t+=L.a.get(this.state.appCategories[r],"apps",[]).length;return t}},{key:"getListKeys",value:function e(){var t=this;var r=this.state.appCategories.find(function(e){return"Ai01"===e.id});var a=10;var n=L.a.get(r,"apps",[]).length;var i=this.props.isUnpaid&&r&&n&&n<=a&&this.state.isShowingDefaultAppCategories;var s=r&&!this.props.hasSeenAppSpaceTutorial&&this.state.isShowingDefaultAppCategories&&!i;var o=(i?["app-limit-meter"]:[]).concat(s?["app-tutorial"]:[]).concat(L.a.flatMap(this.state.appCategories,function(e){return["category-"+e.id].concat(e.apps.map(function(e){return t.deriveAppKey(e)}))}));var l=L.a.uniq(o);if(this.shouldPaginate())return[].concat(S()(l),["loading"]);return l}},{key:"deriveAppKey",value:function e(t){return"app-"+t.app_id+"-"+t.bot_id}},{key:"openAboutApp",value:function e(t){this.props.openAboutApp({appId:t.app_id,serviceId:t.bot_id,memberId:t.bot_user_id})}},{key:"handleAppClick",value:function e(t){this.selectApp(t.currentTarget.dataset)}},{key:"handleItemClick",value:function e(t){var r=t.currentTarget.children[0].dataset;r.app_id&&this.selectApp(r)}},{key:"selectApp",value:function e(t){var r=this.props,a=r.clogger,i=r.channelId;var s={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.state.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===t.app_id){var o=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/pricing?ui_step=280&ui_element=5");a.track("GROWTH_PRICING",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps");a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added)if(this.props.featureM11nAppsBrowser){this.props.closeModal();this.props.addAppToChannelByMemberId({memberId:t.bot_user_id,channelId:i})}else Object(H["a"])(t);else if("true"===t.is_installed){this.openAboutApp(t);a.track("APP_INDEX_VIEW_CLICK",s)}else{Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps/"+t.app_id+"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click");a.track("APP_INDEX_INSTALL_CLICK",s);a.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",n()({},s,{contexts:n()({},s.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})}))}}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK");t.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}},{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"handleSearchInputChange",value:function e(t){var r=t.target.value;if(r!==this.state.searchTerm){this.setState(function(){return{searchTerm:r}});this.throttledSearchApps(r)}}},{key:"hideLoadingIndicator",value:function e(){this.setState(function(){return{showLoadingIndicator:false}});clearTimeout(this.loadingTimeout)}},{key:"paginate",value:function e(){this.shouldPaginate()&&this.loadMoreApps(this.state.appCategories[0],pe.listEnpoint)}},{key:"shouldPaginate",value:function e(){var t=this.state.appCategories[0];return this.state.isShowingDefaultAppCategories&&t&&t.next_cursor}},{key:"loadMoreApps",value:function e(t,r){var a=this;if(this.isPaginating)return;if(!t.next_cursor)return;var i={category:t.id,cursor:t.next_cursor,limit:le};r===pe.searchEndpoint&&(i.query=this.state.searchTerm);this.isPaginating=true;this.lastRequestId+=1;var s=this.lastRequestId;var o=r===pe.searchEndpoint?this.props.submitAppsIndexSearch:this.props.fetchAppsIndexList;this.pendingFetch&&this.pendingFetch.cancel();var l=Object(U["a"])();this.lastFetchId=l;this.pendingFetch=o(i).then(function(e){if(s<a.lastRequestId)return;var i=e.categories[0];if(!i)return;a.setState(function(e){if(s<a.lastRequestId)return{};for(var o=0;o<e.appCategories.length;o++)if(e.appCategories[o].id===t.id){var l=function(){var t=[].concat(S()(e.appCategories[o].apps),S()(i.apps));var s=n()({},e.appMap);i.apps.forEach(function(e){var t=a.deriveAppKey(e);s[t]=e});var l=n()({},e.appCategories[o]);l.apps=t;l.next_cursor=i.next_cursor;var c=[].concat(S()(e.appCategories));c[o]=l;r===pe.listEnpoint&&(a.defaultAppCategories=c);return{v:{appCategories:c,appMap:s}}}();if("object"===("undefined"===typeof l?"undefined":j()(l)))return l.v}return{}},function(){a.isPaginating=false})}).finally(function(){a.lastFetchId===l&&(a.pendingFetch=null)})}},{key:"searchApps",value:function e(t){var r=this;var a=this.props.clogger;if(t){this.pendingFetch&&this.pendingFetch.cancel();this.searchingTimeout=setTimeout(function(){r.setState(function(){return{isSearching:true}})},300);var n=Object(U["a"])();this.lastFetchId=n;this.pendingFetch=this.props.submitAppsIndexSearch({query:t}).then(function(e){clearTimeout(r.searchingTimeout);r.setState(function(){return{isShowingDefaultAppCategories:false,isSearching:false}});return e}).finally(function(){r.lastFetchId===n&&(r.pendingFetch=null)});var i=this.pendingFetch;this.completeRequest(i,pe.searchEndpoint,true);a.track("APP_INDEX_SEARCH")}else this.setState(function(){return{showLoadingIndicator:false,appCategories:r.defaultAppCategories,isShowingDefaultAppCategories:true}})}},{key:"completeRequest",value:function e(t,r,a,i){var s=this;this.lastRequestId+=1;var o=this.lastRequestId;t.then(function(e){if(o>s.currentDisplayedId){s.currentDisplayedId=o;var t=n()({},s.state.categoryNamesMap);var r=n()({},s.state.appMap);e.categories.forEach(function(e){t["category-"+e.id]=e.display_name;e.apps.forEach(function(e){var t=s.deriveAppKey(e);r[t]=e})});var l={appCategories:e.categories,categoryNamesMap:t,appMap:r};a&&(l.showLoadingIndicator=false);if(s.props.addAppsVariant){var c=L.a.map(L.a.filter(L.a.flatMap(e.categories,"apps"),"bot_user_id"),"bot_user_id");s.props.featureM11nAppsBrowser?s.props.getChannelMembershipInfoForUsers({channelId:s.props.channelId,userIds:c}).then(function(){s.updateAfterRequest(l,i)}):Object(H["c"])(c).then(function(){s.updateAfterRequest(l,i)})}else s.updateAfterRequest(l,i)}}).catch(L.a.noop)}},{key:"updateAfterRequest",value:function e(t,r){this.setState(function(){return t},function(){r&&"function"===typeof r&&r()})}},{key:"createAppLimitMeterMarkup",value:function e(){var t=this;return this.state.appCategories.map(function(e){var r=10;var a=L.a.get(e,"apps",[]).length;var n=t.props,i=n.isUnpaid,s=n.isFirefoxAndWindows,o=n.isFirefoxAndMac,l=n.isInternetExplorer,u=n.clogger,d=n.featureM11nAppsBrowser;if(!a||a>r||"Ai01"!==e.id||!t.state.isShowingDefaultAppCategories)return null;var p="num_of_apps="+a;var v=!!a;var m="limit-meter-"+e.id;t.showLimitMeter=v&&i;if(!t.showLimitMeter)return null;t.firstSelectableAppIndex=0;var h=void 0;var f=void 0;var b=void 0;var g=void 0;var _=void 0;var y=void 0;var O=D()("p-apps_browser__app_limit_meter",{is_ff_and_mac:o});if(t.props.isAppBrowserBetterHeaderTreatment){if(!t.props.featureAppBrowserBetterHeaderTranslations)return null;if(a<6){h=ce.t("Add apps to get things done");g="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";_="link_app_directory";f=ce.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,function(e){var r=e.tag,a=e.text;if("a"!==r)return null;return c.a.createElement(X["a"],{href:g,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":_,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},a)})}else if(a<10){h=ce.t("Upgrade for unlimited apps");g="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";_="pricing_link";y=D()({hidden:t.props.isMacSsbBuild});f=ce.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:a},function(e){var r=e.tag,a=e.text;if("a"!==r)return null;return c.a.createElement(X["a"],{className:y,href:g,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":_,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},a)})}else{h=ce.t("Upgrade to add more apps");g="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";_="pricing_link";y=D()({hidden:t.props.isMacSsbBuild});f=ce.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,function(e){var r=e.tag,a=e.text;if("a"!==r)return null;return c.a.createElement(X["a"],{className:y,href:g,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":_,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},a)})}}else if(a<6){h=ce.t("Add apps to get things done");f=ce.t("Schedule meetings, share docs, and more \u2014\xa0straight from Slack. ");b=ce.t("See app suggestions");g="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";_="link_app_directory"}else if(a>5){h=ce.t("Upgrade for unlimited apps");f=ce.t("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. ",{numOfApps:a});b=ce.t("Learn more");g="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";_="pricing_link"}t.appLimitMeterClogPayload={num_of_apps:a,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:_}}};if(!t.cloggedLimitMeterImpression){if("GROWTH_PRICING"===t.LimitMeterClogId){u.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);u.track("UPGRDEXP_LIMIT_APPSPACE",t.appLimitMeterClogPayload)}else{u.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);u.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})}t.cloggedLimitMeterImpression=true}var k=D()({hidden:t.props.isMacSsbBuild&&"pricing_link"===_});return c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:m},c.a.createElement("div",{className:O,"data-qa":"apps_browser_app_limit_meter"},c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},c.a.createElement("b",null,h)),c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},f,!t.props.isAppBrowserBetterHeaderTreatment&&c.a.createElement(X["a"],{className:k,href:g,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":_,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},b)),c.a.createElement(se["a"],{apps:e.apps,isFirefoxAndWindows:s,isFirefoxAndMac:o,isInternetExplorer:l,featureM11nAppsBrowser:d})))})}},{key:"isFocusableItem",value:function e(t){var r=t.key;if(r.startsWith("category"))return false;if("loading"===r)return false;return true}},{key:"renderRow",value:function e(t,r){var a=r.key;if("loading"===a)return c.a.createElement("div",{style:{height:62}},c.a.createElement(J["a"],{size:"jumbo"}));if("app-limit-meter"===a)return this.createAppLimitMeterMarkup();var n=0===t;if(a.startsWith("category")){var i=this.state.categoryNamesMap[a];return c.a.createElement("div",{className:D()("p-apps_browser__category_header",{margin_top_150:!n}),"data-category_header":"true"},i)}var s=this.state.appMap[a]||{};var o="app-tutorial"===a;o&&(s=ve());var l=D()("p-apps_browser__app",{"p-apps_browser__app--tutorial":o});return c.a.createElement(ie["a"],{key:a,addAppsVariant:this.props.addAppsVariant,app:s,channelId:this.props.channelId,className:l,"data-app_index":t})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.addAppsVariant,n=r.channelId,i=r.featureAppsBrowserA11y,s=r.featureM11nAppsBrowser;if(!i||!s)return null;var o=void 0;o=a&&n?c.a.createElement("h2",{className:"overflow_hidden"},ce.rt("Add apps to {channelName}",{channelName:c.a.createElement(Z["a"],{channelId:n,inline:true,className:"overflow_ellipsis"})})):c.a.createElement("h2",null,ce.t("Browse Apps"));var l=void 0;!this.getTotalAppsCount()&&this.state.searchTerm&&(l=c.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results"},ce.t("There are no apps matching"),"\xa0",c.a.createElement("strong",null,this.state.searchTerm)));return c.a.createElement("div",{className:"p-apps_browser"},c.a.createElement("div",{className:"p-apps_browser__filter_container"},c.a.createElement("div",{className:"p-apps_browser__filter_header"},o,c.a.createElement(K["d"],{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},ce.t("View App Directory"))),c.a.createElement("div",null,c.a.createElement(z["a"],{placeholder:ce.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,value:this.state.searchTerm}))),l||c.a.createElement(Y["a"],null,function(e){var r=e.width,a=e.height,n=e.measureRef;return c.a.createElement("div",{className:D()("p-apps_browser__list_container",{"p-apps_browser__list_container--loading":t.state.showLoadingIndicator}),ref:n},c.a.createElement(Q["a"],{width:r,height:Math.floor(a),keys:t.getListKeys(),rowRenderer:t.renderRow,onItemClick:t.handleItemClick,loadPost:t.paginate,loadAround:t.paginate,isFocusableItem:t.isFocusableItem,hideHiddenStopTabs:true}))}))}}]);return t}(l["Component"]);me.displayName="AppsBrowser";me.defaultProps=de;var he=function e(t){var r=Object(q["g"])(t,"seen_app_space_tutorial");var a=Object(V["a"])(t);var n=Object(v["d"])(t);return{channelId:a,hasSeenAppSpaceTutorial:r,clogger:Object(b["a"])({state:t}),featureM11nAppsBrowser:Object(re["isFeatureEnabled"])(t,"feature_m11n_apps_browser"),featureAppsBrowserA11y:Object(re["isFeatureEnabled"])(t,"feature_apps_browser_a11y"),team:n,isAppBrowserBetterHeaderTreatment:"treatment"===Object(ne["getGroupForUser"])(t,"lc_app_browser_better_header"),featureAppBrowserBetterHeaderTranslations:Object(re["isFeatureEnabled"])(t,"feature_app_browser_better_header_translations")}};var fe=function e(t){return Object(B["bindActionCreators"])({fetchAppsIndexList:G["a"],submitAppsIndexSearch:G["b"],openAboutApp:ee["b"],openAppsTutorialModal:ae["a"],getChannelMembershipInfoForUsers:$["getChannelMembershipInfoForUsers"],addAppToChannelByMemberId:te["a"],closeModal:d["closeModal"]},t)};var be=Object(_["connect"])(he,fe)(me);var ge=r(19);var _e=r(11);var ye=r(128);var Oe=r(22);var ke=new W["b"]("apps_browser");function Ee(e){var t=e.tutorialSeen,r=e.openAppsTutorial,a=e.clogger;var n=Object(l["useCallback"])(function(){a.track("APP_INDEX_MANAGE_CLICK",null);a.track("APP_CLICK_LINK_MANAGE_APPS_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_manage_apps"}}})},[a]);return c.a.createElement("div",{className:"p-apps_browser_links"},c.a.createElement(ye["a"],{className:"p-apps_browser_links__link",href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:n,"data-qa":"apps_browser_manage_apps"},c.a.createElement(Oe["b"],{type:"cog-o",inline:true,className:"p-apps_browser_links__link_icon"}),ke.t("Manage apps...")),t&&c.a.createElement(ye["a"],{className:"p-apps_browser_links__link","data-qa":"apps_browser_view_tutorial",onClick:r},c.a.createElement(Oe["b"],{type:"lightbulb-o",inline:true,className:"p-apps_browser_links__link_icon"}),ke.t("What are apps?")))}Ee.displayName="AppsBrowserHeaderLinks";var je="seen_app_space_tutorial";var Ce=function e(t){return{tutorialSeen:Object(q["g"])(t,je),clogger:Object(b["a"])({state:t})}};var Se=function e(t){return Object(B["bindActionCreators"])({openAppsTutorial:ae["a"]},t)};var we=Object(_["connect"])(Ce,Se)(Ee);var Ie=new W["b"]("apps_browser");function Te(e){var t=e.addAppsVariant,r=e.channelName,a=e.featureAppsBrowserA11y;var n=t&&r?Ie.t("Add apps to {channelName}",{channelName:r}):Ie.t("Browse Apps");return c.a.createElement(y["a"],{showGoButton:false,showCancelButton:false,contentLabel:n,"data-qa":"apps_browser_modal",modalClasses:"p-apps_browser_modal"},c.a.createElement(we,null),c.a.createElement(O["a"],null,c.a.createElement("div",{className:"p-apps_browser_container"},a?c.a.createElement(be,e):c.a.createElement(k["a"],e))))}Te.displayName="AppsBrowserModal";Te.defaultProps={addAppsVariant:false,channelName:"",featureAppsBrowserA11y:false};var Ae=function e(t){var r=Object(V["a"])(t);if(!r)return{};var a=Object(ge["d"])(t,r);return{channelName:Object(_e["getDisplayNameForChannel"])(t,a,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),featureAppsBrowserA11y:Object(re["isFeatureEnabled"])(t,"feature_apps_browser_a11y")}};var Ne=Object(_["connect"])(Ae)(Te);var Pe=Object(u["b"])("Opens the apps browser modal",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.referringEventId,i=r.referringUiContext,o=r.channelId,l=s()(r,["referringEventId","referringUiContext","channelId"]);var u=Object(b["a"])({getState:t});u.track(g["l"].APP_INDEX_OPEN,null);l.addAppsVariant&&a&&u.track(g["l"].APPS_BROWSER_ADD_TO_CHANNEL,{contexts:{ui_context:{action:g["w"].IMPRESSION},referring_ui_context:i,core:{channel_id:o}},referring_event_id:a});var _=Object(p["b"])(t());var y=Object(v["j"])(t(),_);var O=Object(f["isEnterpriseTeam"])(y);var k=Object(f["isPaidTeam"])(y);var E=Object(m["getBrowser"])();var j={isUnpaid:!k&&!O,isInternetExplorer:"ie"===E,isFirefoxAndWindows:"firefox"===E&&Object(m["isWindows"])(),isFirefoxAndMac:"firefox"===E&&Object(m["isMac"])(),isMacSsbBuild:Object(h["isAppStoreBuild"])()};e(Object(d["openModal"])({element:c.a.createElement(Ne,n()({},l,j))}))});Pe.propTypes={addAppsVariant:o["b"].bool,eventId:o["b"].number,uiContext:o["b"].object,channelId:o["b"].string};var Re=t["a"]=Pe},,,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(95);var o=r(10);var l=r(1043);var c=new o["b"]("pricing_calculator");var u={planIsYearly:i["b"].bool,formattedPlanCost:i["b"].string,billedMembers:i["b"].number,numInactiveMembers:i["b"].number,isInvoice:i["b"].bool};var d={planIsYearly:true,formattedPlanCost:"",billedMembers:0,numInactiveMembers:0,isInvoice:false};function p(e){var t=e.planIsYearly,r=e.billedMembers,a=e.numInactiveMembers,i=e.formattedPlanCost,s=e.isInvoice;var o=n.a.createElement(l["a"],{type:"times-small",className:"sk_light_gray"});var u=a&&!s?c.rt("{billedMembers, plural, =1 {# active member} other {# active members}}",{billedMembers:r}):c.rt("{billedMembers, plural, =1 {# member} other {# members}}",{billedMembers:r});var d=t?c.t("1 year"):c.t("1 month");return n.a.createElement("div",{className:"display_flex flex_wrap align_items_center"},n.a.createElement("div",{className:"no_wrap"},i),o,n.a.createElement("div",{className:"no_wrap"},u),o,n.a.createElement("div",{className:"no_wrap"},d))}p.displayName="SubtotalCalculation";p.defaultProps=d;t["a"]=Object(s["pure"])(p)},,,,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(16);var s=r.n(i);var o=r(95);var l=r(0);var c=r(2022);var u=r.n(c);var d={className:l["b"].string,member:l["b"].object.isRequired};var p={className:void 0};function v(e){var t=e.className,r=e.member;var a=r.profile.image_512;var i=r.profile.image_48;var o="url('"+a+"'), url('"+i+"')";return n.a.createElement("div",{className:s()(t,"p-member_profile_picture"),style:{backgroundImage:o}})}v.displayName="MemberProfilePicture";v.defaultProps=p;t["a"]=Object(o["pure"])(v)},,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(16);var s=r.n(i);var o=r(95);var l=r(0);var c=r(10);var u=r(31);var d=r(17);var p=r(270);var v=r(22);var m=r(50);var h=r(532);var f=r(2026);var b=r.n(f);var g=new c["b"]("team");function _(e){return n.a.createElement(m["c"],{position:"bottom-right",tip:e,zIndex:"above_fs"},n.a.createElement(v["b"],{type:"question-circle"}))}_.displayName="renderTooltip";var y={className:l["b"].string,member:l["b"].object.isRequired,team:l["b"].object.isRequired};var O={className:void 0};function k(e){var t=e.className,r=e.member,a=e.team;var i=Object(h["a"])(),o=i.featureGoldenGateUi,l=i.featureModernProfileFlexpane;if(!l)return null;var m=s()(t,"p-member_profile_restriction");var f=o&&Object(d["isInvitedUser"])(r)&&g.t("This person hasn\u2019t finished signing up. They may receive messages via email.");if(Object(d["isExternal"])(r))return n.a.createElement("div",{className:m},n.a.createElement(p["b"],{className:"p-member_profile_restriction__team_icon",id:a.id,size:16}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(u["getTeamDisplayName"])(a)));if(Object(d["isDeleted"])(r))return n.a.createElement("div",{className:m},n.a.createElement(v["b"],{className:"p-member_profile_restriction__icon",type:"archived-channel"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Deactivated Member")));if(Object(d["isUltraRestricted"])(r))return n.a.createElement("div",{className:m},n.a.createElement(v["b"],{className:"p-member_profile_restriction__icon",type:"single-channel-guest"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},o&&Object(d["isInvitedUser"])(r)?g.t("Invited Guest"):g.t("Single-Channel Guest")),_(f||g.t("Single-Channel Guests see a partial directory and can only access messages and files from selected channels.")));if(Object(d["isRestricted"])(r))return n.a.createElement("div",{className:m},n.a.createElement(v["b"],{className:"p-member_profile_restriction__icon",type:"restricted-user"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},o&&Object(d["isInvitedUser"])(r)?g.t("Invited Guest"):g.t("Multi-Channel Guest")),_(f||g.t("Multi-Channel Guests see a partial directory and can only access messages and files from selected channels.")));if(Object(d["isOwner"])(r))return n.a.createElement("div",{className:m},n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Owner of {teamName}",{teamName:Object(c["o"])(Object(u["getTeamDisplayName"])(a))})));if(Object(d["isAdmin"])(r))return n.a.createElement("div",{className:m},n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Workspace Admin")));if(o&&Object(d["isInvitedUser"])(r))return n.a.createElement("div",{className:m},n.a.createElement(v["b"],{className:"p-member_profile_restriction__icon",type:"envelope-o"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Invited Member")),_(f));return null}k.defaultProps=O;t["a"]=Object(o["pure"])(k)},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(10);var o=r(31);var l=r(532);var c=r(1711);var u=r.n(c);var d=new s["b"]("unavailable_channel");var p={memberTeam:i["b"].object};var v={memberTeam:void 0};function m(e){var t=e.memberTeam;var r=Object(l["a"])(),a=r.featureEscGridMigrationsClient;if(!a)return null;return n.a.createElement("div",{className:"p-member_profile_card__special_text"},d.rt("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:n.a.createElement("strong",null,Object(o["getTeamDisplayName"])(t))}))}m.displayName="MemberProfileUnavailable";m.defaultProps=v;t["a"]=m},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(10);var o=r(383);var l=r(532);var c=new s["b"]("team");var u={member:i["b"].object};var d={member:void 0};function p(e){var t=e.member;var r=Object(l["a"])(),a=r.featureModernProfileFlexpane;if(!a)return null;var i=c.t("To interact with a person from another organization, you need to be in at least one channel together.");return n.a.createElement("div",{className:"p-member_profile_card__special_text"},n.a.createElement("strong",null,c.rt("You don\u2019t share any channels with {memberName}.",{memberName:n.a.createElement(o["a"],{id:t.id})}))," ",i)}p.displayName="MemberProfileStranger";p.defaultProps=d;t["a"]=p},,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(0);var n=r(25);var i=r(29);var s=r(38);var o=Object(n["a"])("Calls users.counts endpoint",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason,n=void 0===a?"users-counts-api/fetchUsersCounts":a;return e(Object(i["a"])({method:"users.counts",args:{mpim_aware:true,only_relevant_ims:true,simple_unreads:true,include_threads:true,mpdm_dm_users:Object(s["a"])()},reason:n})).then(function(e){if(!e||!e.ok)return{};var t=e.channels,r=e.groups,a=e.ims,n=e.mpims,i=e.threads;return{channels:t,groups:r,ims:a,mpims:n,threads:i}})});o.propTypes={reason:a["b"].string}},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var a=r(0);var n=r(15);var i=r(24);var s=r(11);var o=r(12);var l=r(917);var c=r(308);var u=r(98);var d=r(19);var p=r(472);var v=r(505);var m=r(1645);var h=Object(n["b"])("Open a conversation by channel and member ID",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channel,n=r.user;var h=t();var f=Object(d["v"])(h,a)&&Object(d["d"])(h,a);if(!f){Object(o["a"])({getState:t}).error("Unknown channel "+a);return}e(Object(u["updateOneKeyForChannel"])({id:a,is_open:true}));if(Object(s["isIm"])(f)){var b=Object(i["m"])(h,n)&&Object(i["d"])(h,n);if(!b){Object(o["a"])({getState:t}).error("Unknown member "+n);return}}if(Object(l["getShouldBecomeActive"])(t(),n||a)){var g=Object(l["getPendingMsgForChannel"])(t(),n||a);g&&e(Object(v["a"])({channelId:a,text:g}));e(Object(c["a"])({id:a}));e(Object(l["clearPendingOpenChannel"])({memberId:n,channelId:a}))}e(Object(u["updateOneKeyForChannel"])({id:a,opened_this_session:true}));e(Object(m["c"])({channelId:a,openedThisSession:true}));Object(s["isIm"])(f)&&Object(p["b"])(Object(d["d"])(t(),a))});h.propTypes={channelId:a["b"].string,memberId:a["b"].string}},function(e,t,r){"use strict";var a=r(0);var n=r(13);var i=r(40);var s=r.n(i);var o=r(10);var l=r(357);var c=r(834);var u=new o["b"]("enterprise_dashboard");var d={getRelativeTimestamp:a["b"].func.isRequired};function p(e){var t=e.timestamp,r=e.getRelativeTimestamp;if(0===t)return u.t("Never");var a=s()();var n=s.a.unix(t);var i=a.diff(n,"h");if(i>23)return Object(l["a"])(n,"{date} at {time}");var o=a.diff(n,"m");var c=void 0;c=0===o?u.t("a few seconds ago"):o>59?u.t("{hours, plural, =1 {1 hour} other {# hours}} ago",{hours:i}):u.t("{minutes, plural, =1 {1 minute} other {# minutes}} ago",{minutes:o});return r(t)+" ("+c+")"}p.propTypes=d;var v=function e(t){return{getRelativeTimestamp:function e(r){return 0===r?"":Object(c["a"])(t,r,{uncapitalized:false})}}};t["a"]=Object(n["connect"])(v)(p)},function(e,t,r){"use strict";var a=r(0);var n=r(2);var i=r.n(n);var s=r(15);var o=r(259);var l=r(331);var c=r(35);var u=r(23);var d=r(87);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.existingFields,r=void 0===t?[]:t,a=e.fields,i=void 0===a?[]:a;var s=Object(n["keyBy"])(r,"id");return Object(n["filter"])(i,function(e){return e.possible_values&&void 0!==s[e.id]&&"options_list"===s[e.id].type&&Object(n["some"])(s[e.id].possible_values,function(t){return-1===e.possible_values.indexOf(t)})})}var v=Object(s["b"])("Update profile fields in a team and its members if necessary",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.fields,i=void 0===n?[]:n;var s=t();var d=a||Object(u["b"])(s);var v=false;var m=Object(c["j"])(s,d,v);if(m&&m.profile&&m.profile.fields){e(Object(l["l"])({teamId:d,fields:i}));var h=p({existingFields:m.profile.fields,fields:i});h.length>0&&e(Object(o["e"])({fields:h}))}});v.propTypes=a["b"].shape({teamId:a["b"].string,fields:a["b"].arrayOf(d["a"].TeamProfileField).isRequired});t["a"]=v},function(e,t,r){"use strict";var a=r(0);var n=r(15);var i=r(259);var s=r(331);var o=r(23);var l=Object(n["b"])("delete profile fields from a team and its members",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.fieldsToDelete,l=void 0===n?[]:n;var c=t();var u=a||Object(o["b"])(c);e(Object(s["a"])({teamId:u,fieldsToDelete:l}));e(Object(i["f"])({fieldsToDelete:l}))});l.propTypes=a["b"].shape({teamId:a["b"].string,fieldsToDelete:a["b"].arrayOf(a["b"].string).isRequired});t["a"]=l},,,function(e,t,r){"use strict";r.r(t);var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(0);var u=r(36);var d=r(120);var p=r(11);var v;function m(e){if(!e||!e.id)return false;if(Object(p["isIm"])(e)&&!e.name&&!Object(p["getMemberIdFromIm"])(e))return false;if(Object(p["isMpim"])(e)&&!e.name&&!e._internal_name)return false;if(!e.name)return false;return true}function h(e,t){if(!t||!t.id||Object(p["isFromAnotherTeam"])(t))return e;if(Object(p["isIm"])(t)&&Object(p["getMemberIdFromIm"])(t)){var r=Object(p["getMemberIdFromIm"])(t);var a=e.ims[r];var n=t.id;if(a&&a>n)return e}e=f(e,t.id);var i=t.id;var s=l.a.toLower(t.name);var o={};if(Object(p["isIm"])(t)&&Object(p["getMemberIdFromIm"])(t)){var c=Object(p["getMemberIdFromIm"])(t);e.ims[c]=i;e.ims[s]=i;o.ims=[c,s]}else if(Object(p["isMpim"])(t)&&t._internal_name){var u=t._internal_name;e.mpims[u]=i;e.mpims[s]=i;o.mpims=[u,s]}else{e.channelsAndGroups[s]=i;o.channelsAndGroups=[s]}e.reverseMap[i]=o;return e}function f(e,t){if(!t)return e;if(!e.reverseMap||!e.reverseMap[t]||l.a.isEmpty(e.reverseMap[t]))return e;var r=s()({},e);var a=e.reverseMap[t];Object.keys(a).forEach(function(e){var t=a[e];if(!t||!t.length)return;t.forEach(function(t){delete r[e][t]})});r.reverseMap[t]={};return r}function b(e,t){if(!t||!t.length||!l.a.isArray(t))return e;var r=l.a.filter(t,m);if(!r.length)return e;var a={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};r.forEach(function(e){h(a,e)});return a}var g={channelsAndGroups:{},ims:{},mpims:{},reverseMap:{}};var _=Object(u["b"])((v={},n()(v,d["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels,a=t.reason;if(!a)return e;return b(e,r)}),n()(v,d["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ids;if(!r||!r.length)return e;var a={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};r.forEach(function(e){f(a,e)});return a}),v),g,{persistenceEnabled:true});_.propTypes={channelsAndGroups:c["b"].objectOf(c["b"].string),ims:c["b"].objectOf(c["b"].string),mpims:c["b"].objectOf(c["b"].string),reverseMap:c["b"].objectOf(c["b"].shape({channelsAndGroups:c["b"].arrayOf(c["b"].string),ims:c["b"].arrayOf(c["b"].string),mpims:c["b"].arrayOf(c["b"].string)}))};t["default"]=_},function(e,t,r){"use strict";r.r(t);r.d(t,"setMarkingState",function(){return h});r.d(t,"clearAllMarkingFlags",function(){return f});r.d(t,"clearMarkingFlagsForIds",function(){return b});r.d(t,"getAllIdsNeedingMarking",function(){return y});r.d(t,"getAllUnmutedIdsNeedingMarking",function(){return O});r.d(t,"getAllMutedIdsNeedingMarking",function(){return k});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(2);var l=r.n(o);var c=r(0);var u=r(18);var d=r(36);var p=r(14);var v=r(217);var m;var h=Object(u["b"])("Update the apiNeedsMarking flag for a channel");h.propTypes={id:c["b"].string.isRequired,needsApiMarking:c["b"].bool.isRequired};var f=Object(u["b"])("Wipe out all API needs marking flags when they are all completed");f.propTypes=null;var b=Object(u["b"])("Remove API needs marking flags for specified IDs");b.propTypes=c["b"].arrayOf(c["b"].string).isRequired;var g={};var _=Object(d["b"])((m={},n()(m,h,function(e,t){if(t.needsApiMarking)return s()({},e,n()({},t.id,t.needsApiMarking));return l.a.omit(e,t.id)}),n()(m,f,function(e){if(l.a.isEqual(e,g))return e;return g}),n()(m,b,function(e,t){if(l.a.isEqual(e,g))return e;return l.a.omit(e,t)}),m),g,{persistenceEnabled:true});_.propTypes=c["b"].objectOf(c["b"].bool);t["default"]=_;var y=Object(p["b"])(function(e){var t=e&&e.channelsMeta&&e.channelsMeta.needsApiMarking;if(!t)return[];return l.a.keys(t)});var O=Object(p["b"])(function(e){var t=y(e);return l.a.filter(t,function(t){return!Object(v["isChannelMutedById"])(e,t)})});var k=Object(p["b"])(function(e){var t=y(e);return l.a.filter(t,function(t){return Object(v["isChannelMutedById"])(e,t)})})},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(0);var s=r(36);var o=r(1155);var l={};var c=Object(s["b"])(n()({},o["a"],function(e,t){return t}),l,{persistenceEnabled:true});c.propTypes=i["b"].object;t["a"]=c},,,function(e,t,r){"use strict";var a=r(250);var n=r(23);var i=r(27);var s=r(538);var o=r(26);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var v=r(288);var m=r(1260);var h=r(243);var f=r(71);var b=r(294);var g=r(228);var _=h["a"].INTERNAL_SERVER_ERROR,y=h["a"].TOO_MANY_REQUESTS,O=h["a"].UNAVAILABLE_FOR_LEGAL_REASONS,k=h["a"].TIMEOUT,E=h["a"].UNKNOWN;var j=1e3;var C=10;var S=5;var w=10;var I=function e(){return Promise.delay(5e3)};var T="api_q_pause_unpause";var A="api_q_pause_service_offline";var N="api_q_pause_client_offline";var P="api_q_pause_service_offline_total_time";var R=6e4;var M={API_Q_STATS_INTERVAL:R};var x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.maxMsBetweenTicks,a=void 0===r?j:r,n=t.maxActiveRequests,i=void 0===n?C:n,o=t.maxActiveRequestsPerMethod,l=void 0===o?S:o,c=t.errorThreshold,d=void 0===c?w:c,p=t.isOnline,m=void 0===p?function(){return true}:p,h=t.isClientOnline,f=void 0===h?function(){return Object(s["b"])()}:h,b=t.reconnectService,_=void 0===b?I:b,y=t.reconnectClient,O=void 0===y?I:y;u()(this,e);this._maxMsBetweenTicks=a;this._maxActiveRequests=i;this._maxActiveRequestsPerMethod=l;this._errorThreshold=d;this._shouldMeasure=Object(g["a"])(1);this._isOnline=m;this._isClientOnline=f;this._requestsActive=[];this._requestsEnqueued=[];this._emptyPromise=void 0;this._resolveEmptyPromise=Promise.resolve;this._consecutiveServiceErrors=0;this._consecutiveClientErrors=0;this._requestAccepts=0;this._requestRejects=0;this._queueDepths=[0];this._isPaused=false;this._nextScheduledTick=void 0;this._reconnectService=_;this._reconnectClient=O;this._measureStatsInterval=null;this._tick=this._tick.bind(this);this._resetEmptyPromise=this._resetEmptyPromise.bind(this);this._awaitServiceReconnection=this._awaitServiceReconnection.bind(this);this._awaitClientReconnection=this._awaitClientReconnection.bind(this);this._maybeMeasureStatsOnInterval();Object(v["a"])(this)}p()(e,[{key:"_resetEmptyPromise",value:function e(){this._emptyPromise=void 0;this._resolveEmptyPromise=Promise.resolve}},{key:"_resetErrorCounts",value:function e(){this._consecutiveServiceErrors=0;this._consecutiveClientErrors=0}},{key:"_countSuccess",value:function e(){this._resetErrorCounts();this._requestAccepts+=1}},{key:"_countError",value:function e(t){this._consecutiveServiceErrors=t>=_?this._consecutiveServiceErrors+1:0;this._consecutiveClientErrors=t===E?this._consecutiveClientErrors+1:0;(t>=_||t===y||t===k)&&(this._requestRejects+=1)}},{key:"_passedErrorThreshold",value:function e(){if(this._consecutiveServiceErrors>=this._errorThreshold){this._pauseToReconnect(this._awaitServiceReconnection);return true}if(this._consecutiveClientErrors>=this._errorThreshold||!this._isClientOnline()){this._pauseToReconnect(this._awaitClientReconnection);return true}return false}},{key:"_pauseToReconnect",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;this._pause();r().then(function(){t._unpause()}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Error("Could not reconnect and resume ApiQ.");throw e})}},{key:"_awaitServiceReconnection",value:function e(){var t=Object(f["a"])();t.count(A);t.mark(P);return this._reconnectService().tap(function(){Object(f["a"])().count(T);t.measureAndClear(P)})}},{key:"_awaitClientReconnection",value:function e(){var t=Object(f["a"])();t.count(N);return this._reconnectClient().tap(function(){Object(f["a"])().count(T)})}},{key:"_pause",value:function e(){this._isPaused=true}},{key:"_unpause",value:function e(){this._isPaused=false;this._resetErrorCounts();this._tick()}},{key:"_enqueue",value:function e(t){var r=t.request,a=t.resolve,n=t.reject,i=t.expedited;if(!r.enqueue())return false;var s={request:r,resolve:a,reject:n};i?this._requestsEnqueued.unshift(s):this._requestsEnqueued.push(s);this._tick();return true}},{key:"_tick",value:function e(){if(this.isPaused())return;window.clearTimeout(this._nextScheduledTick);this._nextScheduledTick=window.setTimeout(this._tick,this._maxMsBetweenTicks);if(this._passedErrorThreshold()||!this._isOnline()||this._requestsActiveFull())return;var t=this._getNext();t&&this._activate(t);this._emptyPromise&&this._isEmpty()&&this._resolveEmptyPromise()}},{key:"_activate",value:function e(t){var r=this;var a=t.request,n=t.resolve,i=t.reject;this._shouldMeasure&&this._queueDepths.push(this._requestsEnqueued.length);this._requestsActive.push(a);a.send().finally(function(){r._maybeDequeueAndTick(a)}).then(function(e){n(e);r._countSuccess()}).catch(function(e){var n=e.status,s=e.retryAfter;n===O&&Object(b["a"])({reason:"451-service-unavailable-for-legal-reasons",reasonKey:"451_service_unavailable_for_legal_reasons"});var o=a.shouldRetry()&&r._enqueue(t);if(o)window.setTimeout(r._tick,s);else{a.reject();i(e)}r._countError(n)})}},{key:"_maybeDequeueAndTick",value:function e(t){var r=this._requestsActive.indexOf(t);r>=0&&this._requestsActive.splice(r,1);var a=this._requestsEnqueued.indexOf(t);a>=0&&this._requestsEnqueued.splice(a,1);(r>=0||a>=0)&&this._tick()}},{key:"_getNext",value:function e(){var t=this;if(!this._requestsEnqueued.length)return null;var r=this._requestsEnqueued.findIndex(function(e){var r=e.request;return t._isFair(r)&&r.canRetryNow()});return r>=0&&this._requestsEnqueued.splice(r,1)[0]}},{key:"_getUnfairMethods",value:function e(){var t=this;var r=[];var a={};this._requestsActive.forEach(function(e){var n=e.method;a[n]=a[n]?a[n]+1:1;a[n]===t._maxActiveRequestsPerMethod&&r.push(n)});return r}},{key:"_getOrCreateEmptyPromise",value:function e(){var t=this;this._emptyPromise||(this._emptyPromise=new Promise(function(e){t._resolveEmptyPromise=e}));return this._emptyPromise}},{key:"_isValid",value:function e(t){return t instanceof m["a"]}},{key:"_isFair",value:function e(t){var r=t.method;return!this._getUnfairMethods().includes(r)}},{key:"_isEmpty",value:function e(){return 0===this._requestsEnqueued.length&&0===this._requestsActive.length}},{key:"_requestsActiveFull",value:function e(){return this._requestsActive.length>=this._maxActiveRequests}},{key:"_maybeMeasureStatsOnInterval",value:function e(){var t=this;if(!this._shouldMeasure)return;if(this._measureStatsInterval)return;var r=Object(f["a"])();this._measureStatsInterval=setInterval(function(){var e=t.getStats(),a=e.requestAccepts,n=e.requestRejects,i=e.totalRequests,s=e.maxQueueDepth;r.count("api_q_successful_requests",a);r.count("api_q_rejected_requests",n);r.count("api_q_total_requests",i);r.count("api_q_max_queue_depth",s);r.count("api_q_successful_request_percentage",Math.floor(a/i*100));t.clearStats()},R)}},{key:"debugServiceDisconnect",value:function e(){this._consecutiveServiceErrors=this._errorThreshold+1}},{key:"getStats",value:function e(){return{requestAccepts:this._requestAccepts,requestRejects:this._requestRejects,totalRequests:this._requestAccepts+this._requestRejects,maxQueueDepth:Math.max.apply(Math,l()(this._queueDepths))}}},{key:"clearStats",value:function e(){this._requestAccepts=0;this._requestRejects=0;this._queueDepths=[0]}},{key:"clearStatsInterval",value:function e(){if(!this._shouldMeasure)return;if(!this._measureStatsInterval)return;window.clearInterval(this._measureStatsInterval);this._measureStatsInterval=null}},{key:"isPaused",value:function e(){return this._isPaused}},{key:"assignApiCallThreshold",value:function e(t){this._maxActiveRequests=t}},{key:"awaitEmptyQ",value:function e(){return this._isEmpty()?Promise.resolve():this._getOrCreateEmptyPromise().finally(this._resetEmptyPromise)}},{key:"getMaxActiveRequests",value:function e(){return this._maxActiveRequests}},{key:"stop",value:function e(){window.clearTimeout(this._nextScheduledTick);this._nextScheduledTick=void 0;this._pause()}},{key:"restart",value:function e(){this.isPaused()&&this._unpause()}},{key:"q",value:function e(t){var r=this;var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._isValid(t))return Promise.reject(new Error("Tried to enqueue an invalid request object. This is a programming error."));return new Promise(function(e,n,i){if(!r._enqueue({request:t,resolve:e,reject:n,expedited:a})){n(new Error("Tried and failed to enqueue a request object."));return}i(function(){t.cancel();r._maybeDequeueAndTick(t)})})}}]);return e}();var D=x;var F=r(424);var L=r(12);var B="SAME-ORIGIN-CHECK";var U="/api/api.test?_x_check_same_origin_request=1";function q(){var e=Object(L["b"])({label:B});e.info("Testing a request on the same origin");return fetch(U).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.status;e.info("Success! It is likely that CORS or another IT policy is blocking some Slack domains.");r===h["a"].UNAVAILABLE_FOR_LEGAL_REASONS&&Object(b["a"])({reason:"451-service-unavailable-for-legal-reasons",reasonKey:"451_service_unavailable_for_legal_reasons"})}).catch(function(t){e.info("Request failed with error:",t)})}var G=r(38);var H=r(65);var W=r(29);var V=r(1172);function K(e){var t=e.teamId,r=e.q,a=e.dispatch;Object(H["exportToTeamDebugger"])(t,"api",{q:r,call:function e(t){return a(Object(W["a"])(t))},callExpedited:function e(t){return a(Object(W["b"])(t))}})}function z(e){var t=e.teamId,r=e.q,a=e.dispatch;Object(H["exportToTeamDebugger"])(t,"flannel",{q:r,call:function e(t){return a(Object(V["a"])(t))}})}var Q=r(1196);var Y=r(320);var J=r(195);var X=r(4);var Z=r(15);var $=5e3;var ee=Object(g["a"])(1);var te=null;var re=null;var ae=Object(Z["b"])("Resolves only when we have established and upserted client online status",function(e){return e(Object(Y["d"])()).catch(function(){var t=new Promise(function(t){te=window.setTimeout(function(){t(e(ae()))},$)});return t})});ae.propTypes=null;var ne=Object(Z["b"])("Resolves only when we have established and upserted client online status",function(e){if(!re){ee&&Object(f["a"])().mark("api_connectivity_lost");re=e(ae()).tap(function(){ee&&Object(f["a"])().measureAndClear("api_connectivity_lost","api_connectivity_lost")}).finally(function(){clearTimeout(te);re=null;te=null})}return re});ne.propTypes=null;var ie=ne;var se={};Object.defineProperties(se,{awaitServiceReconnectionTimeout:{get:function e(){return te},set:function e(t){te=t}},awaitServiceReconnectionPromise:{get:function e(){return re},set:function e(t){re=t}},retryServiceConnection:{get:function e(){return ae}},DEFAULT_RECONNECTION_RETRY_AFTER_MS:{get:function e(){return $}},shouldRecordTimingData:{get:function e(){return ee},set:function e(t){ee=t}}});var oe=r(1265);r.d(t,"b",function(){return ge});var le={},ce=le.getFocusedWorkspace;var ue="API-Q";var de=10;var pe=1;var ve={};var me=function e(t){if(Object(G["a"])()){var r=Object(i["b"])();return ce(r.getState())===t}return true};var he=function e(t){var r=ve[t];if(!r)return;Object.keys(ve).forEach(function(e){var r=ve[e];t===e?r.assignApiCallThreshold(de):r.assignApiCallThreshold(pe)})};var fe=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.dispatch,n=r.getState;if(!ve[t]){var o=Object(L["a"])({teamId:t});var l=me(t);var c=new D({isOnline:function e(){return Object(J["d"])(n())},isClientOnline:function e(){if(Object(X["isFeatureEnabled"])(n(),"feature_connectivity_manager"))return Object(J["c"])(n());return Object(s["b"])()},maxActiveRequests:l?de:pe,reconnectService:function e(){var t=Object(X["isFeatureEnabled"])(n(),"feature_connectivity_manager")&&Object(G["a"])()?Object(i["b"])().dispatch:a;t(Object(Y["b"])(false));o.info(ue,"Pausing queue because service is offline");if(Object(X["isFeatureEnabled"])(n(),"feature_connectivity_manager"))return t(ie()).finally(function(){o.info(ue,"Unpausing queue, back online")});return Object(s["c"])().then(function(){a(Object(Y["b"])(true));a(Object(Y["a"])(true));o.info(ue,"Unpausing queue, back online")})},reconnectClient:function e(){Object(s["b"])()&&q();var t=Object(X["isFeatureEnabled"])(n(),"feature_connectivity_manager")&&Object(G["a"])()?Object(i["b"])().dispatch:a;t(Object(Y["a"])(false));o.info(ue,"Pausing queue because client is offline");if(Object(X["isFeatureEnabled"])(n(),"feature_connectivity_manager"))return t(Object(oe["a"])()).finally(function(){o.info(ue,"Unpausing queue, back online")});return Object(s["c"])().then(function(){a(Object(Y["b"])(true));a(Object(Y["a"])(true));o.info(ue,"Unpausing queue, back online")})}});ve[t]=c;K({teamId:t,q:c,dispatch:a});z({teamId:t,q:c,dispatch:a})}return ve[t]};var be=Object(a["b"])("Dispatches requests to the API Queue",function(e,t,r){var a=e.dispatch;var i=e.getState();var s=Object(n["b"])(i);switch(r.type){case F["e"].getType():Object(L["a"])({state:i}).info("Halting the API queue");var o=fe(s,e);o.stop();return;case F["d"].getType():Object(L["a"])({state:i}).info("Restarting the API queue");var l=fe(s,e);l.restart();return;case F["b"].getType():var c=r.payload,u=c.request,d=c.expedited,p=void 0!==d&&d;a(Object(Q["updateLastNetworkSend"])());var v=Object(H["getFromGlobalDebugger"])("networkDelay.api")||0;var m=fe(s,e);return Promise.delay(v,m.q(u,p));case F["a"].getType():var h=fe(s,e);return h.awaitEmptyQ();case F["c"].getType():he(s);return t(r);default:return t(r)}});function ge(e){var t=Object(n["b"])(e);return ve[t]}var _e={maybeReassignMaxApiCallThresholdForAllTeams:he,FOCUSED_TEAM_MAX_ACTIVE_REQUESTS:de,BACKGROUND_TEAM_MAX_ACTIVE_REQUESTS:pe};Object.defineProperties(_e,{instances:{get:function e(){return ve},set:function e(t){ve=t}},getOrCreateInstance:{get:function e(){return fe},set:function e(t){fe=t}}});var ye=t["a"]=be},function(e,t,r){"use strict";var a=r(58);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(13);var g=r(2);var _=r(1757);var y=r(0);var O=r(138);var k=r(31);var E=r(35);var j=r(10);var C=r(84);var S=r(51);var w=r(707);var I=r(92);var T=r(16);var A=r.n(T);var N=r(96);var P=r(22);var R=r(2299);var M=new j["b"]("pricing_plans");var x={planTopFeatures:y["b"].array.isRequired,featureBringPlansPageToSsbTranslations:y["b"].bool};var D={featureBringPlansPageToSsbTranslations:false};var F=function(e){m()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"render",value:function e(){var t=this.props,r=t.planTopFeatures,a=t.featureBringPlansPageToSsbTranslations;if(!a)return null;return f.a.createElement("div",{className:"p-pricing_plan_top_features"},f.a.createElement("div",{className:"p-pricing_plan_top_features__title"},M.t("Top features:")),f.a.createElement("ul",{className:"p-pricing_plan_top_features__list"},r.map(function(e){return f.a.createElement("li",{key:e.id,className:"p-pricing_plan_top_features__item"},f.a.createElement(P["b"],{type:"check-small",className:"p-pricing_plan_top_features__item_icon",inline:true}),f.a.createElement("span",null,e.description))})))}}]);return t}(h["Component"]);F.displayName="PricingPlanTopFeatures";F.defaultProps=D;var L=Object(O["a"])("feature_bring_plans_page_to_ssb_translations")(F);var B=r(381);var U=r(2301);var q=new j["b"]("pricing_plans");var G={planCostPerMemberBilledAnnually:y["b"].number.isRequired,planCostPerMemberBilledMonthly:y["b"].number.isRequired,planCurrency:y["b"].string.isRequired,featureBringPlansPageToSsbTranslations:y["b"].bool};var H={featureBringPlansPageToSsbTranslations:false};var W=function(e){m()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"render",value:function e(){var t=this.props,r=t.planCostPerMemberBilledAnnually,a=t.planCostPerMemberBilledMonthly,n=t.planCurrency,i=t.featureBringPlansPageToSsbTranslations;if(!i)return null;return f.a.createElement("div",{className:"p-pricing_plan_cost_details"},f.a.createElement("div",{className:"p-pricing_plan_cost_details__title"},q.t("Pricing")),f.a.createElement("div",null,q.t("{formattedCost} per member per month if billed annually",{formattedCost:Object(B["a"])(r,n)})),f.a.createElement("div",null,q.t("{formattedCost} per member per month if billed monthly",{formattedCost:Object(B["a"])(a,n)})))}}]);return t}(h["PureComponent"]);W.displayName="PricingPlanCostDetails";W.defaultProps=H;var V=Object(O["a"])("feature_bring_plans_page_to_ssb_translations")(W);var K=r(2303);var z={planDescription:y["b"].object.isRequired,planCurrency:y["b"].string,planCostPerMemberBilledAnnually:y["b"].number,planCostPerMemberBilledMonthly:y["b"].number,showPlanCostDetails:y["b"].bool,isPlansDataLoaded:y["b"].bool,planTopFeatures:y["b"].array.isRequired,featureBringPlansPageToSsbTranslations:y["b"].bool};var Q={planCurrency:null,planCostPerMemberBilledAnnually:0,planCostPerMemberBilledMonthly:0,showPlanCostDetails:true,isPlansDataLoaded:false,featureBringPlansPageToSsbTranslations:false};var Y=function(e){m()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"renderPricingPlanCostDetails",value:function e(){var t=this.props,r=t.planCurrency,a=t.planCostPerMemberBilledAnnually,n=t.planCostPerMemberBilledMonthly;if(!r||!a||!n)return null;return f.a.createElement(V,{planCurrency:r,planCostPerMemberBilledAnnually:a,planCostPerMemberBilledMonthly:n})}},{key:"render",value:function e(){var t=this.props,r=t.planDescription,a=t.showPlanCostDetails,n=t.planTopFeatures,i=t.isPlansDataLoaded,s=t.featureBringPlansPageToSsbTranslations;if(!s)return null;var o=A()("p-pricing_plan_summary",{"p-pricing_plan_summary--loading":!i});return f.a.createElement("div",{className:o},!i&&f.a.createElement(N["a"],{size:"jumbo","data-qa":"pricing_plan_summary_loader"}),i&&f.a.createElement(h["Fragment"],null,f.a.createElement("div",{className:"p-pricing_plan_summary__description"},r),a&&this.renderPricingPlanCostDetails(),f.a.createElement(L,{planTopFeatures:n})))}}]);return t}(h["Component"]);Y.displayName="PricingPlanSummary";Y.defaultProps=Q;var J=Object(O["a"])("feature_bring_plans_page_to_ssb_translations")(Y);var X=r(341);var Z=r(190);var $=r(45);var ee=r(21);var te=r(2305);var re=new j["b"]("pricing_plans");var ae={onClose:y["b"].func,standardPlanProductId:y["b"].string.isRequired,plusPlanProductId:y["b"].string.isRequired,standardPlanCostPerMemberBilledMonthly:y["b"].number.isRequired,standardPlanCostPerMemberBilledAnnually:y["b"].number.isRequired,plusPlanCostPerMemberBilledMonthly:y["b"].number.isRequired,plusPlanCostPerMemberBilledAnnually:y["b"].number.isRequired,planCurrency:y["b"].string.isRequired,team:y["b"].object.isRequired,loadPlansData:y["b"].func.isRequired,source:y["b"].string,clogger:y["b"].object.isRequired,featureBringPlansPageToSsbTranslations:y["b"].bool};var ne={onClose:g["noop"],source:null,featureBringPlansPageToSsbTranslations:false};var ie=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={selectedPricingPlan:I["d"].standard.id,isPlansDataLoaded:false};Object(_["a"])(r,["onPricingPlanChange","onGoButtonClick","onClickContactSales","onClickFooterLink","onClosePricingPlansModal"]);return r}u()(t,[{key:"componentDidMount",value:function e(){var t=this;this.state.isPlansDataLoaded||this.props.loadPlansData().then(function(){return t.setIsPlansDataLoaded(true)});this.clogPricingPlanModalEvent({step:ee["A"].PRICING_PLANS_DIALOG_STANDARD_PLAN,action:ee["w"].IMPRESSION,source:this.props.source})}},{key:"onPricingPlanChange",value:function e(t){if(this.state.selectedPricingPlan===t)return;this.setState(function(e){return s()({},e,{selectedPricingPlan:t})});this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:ee["w"].CLICK,elementType:ee["k"].TAB,elementName:"pricing_plans_"+t+"_tab"})}},{key:"onGoButtonClick",value:function e(){switch(this.state.selectedPricingPlan){case I["d"].plus.id:this.redirectToCheckoutPage(this.props.plusPlanProductId);break;case I["d"].enterprise.id:this.redirectToContactSalesPage();break;case I["d"].standard.id:default:this.redirectToCheckoutPage(this.props.standardPlanProductId);break}this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:ee["w"].CLICK,elementType:ee["k"].BUTTON,elementName:"pricing_plans_"+this.state.selectedPricingPlan+"_main_cta"})}},{key:"onClickContactSales",value:function e(){Object(k["openAuthenticatedUrlInBrowser"])(this.props.team,I["b"]);this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:ee["w"].CLICK,elementType:ee["k"].LINK,elementName:"pricing_plans_enterprise_contact_sales_link"})}},{key:"onClickFooterLink",value:function e(t){t.preventDefault();Object(k["openAuthenticatedUrlInBrowser"])(this.props.team,I["f"]);this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:ee["w"].CLICK,elementType:ee["k"].LINK,elementName:"pricing_plans_info_footer_link"})}},{key:"onClosePricingPlansModal",value:function e(){this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:ee["w"].CLOSE});this.props.onClose()}},{key:"getStandardPlanDescription",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return null;return re.rt("<strong>Standard</strong> is the plan for small- and medium-sized businesses that want to maximize their productivity with Slack.")}},{key:"getStandardPlanTopFeatures",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:1,description:re.t("Smarter, unlimited search")},{id:2,description:re.t("Unlimited apps")},{id:3,description:re.t("Group calls with screen sharing")},{id:4,description:re.t("Guest accounts & shared channels")}]}},{key:"getPlusPlanDescription",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return re.rt("<strong>Plus</strong> is the plan for larger or regulated businesses with additional administrative and compliance needs.")}},{key:"getPlusPlanTopFeatures",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:1,description:re.t("99% guaranteed uptime SLA")},{id:2,description:re.t("User provisioning and deprovisioning")},{id:3,description:re.t("SAML-based single sign-on (SSO)")},{id:4,description:re.t("Corporate exports for all messages")}]}},{key:"getEnterprisePlanDescription",value:function e(){var t=this;if(!this.props.featureBringPlansPageToSsbTranslations)return[];return re.rt("<strong>Enterprise Grid</strong> is the plan that lets businesses connect multiple Slack workspaces across their company. <Link>Contact Sales</Link> for pricing.",null,function(e){var r=e.tag,a=e.text;if("Link"===r)return f.a.createElement(S["a"],{onClick:t.onClickContactSales,"data-qa":"pricing_plans_modal_contact_sales_link"},a);return null})}},{key:"getEnterprisePlanTopFeatures",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:1,description:re.t("Unlimited workspaces")},{id:2,description:re.t("Support data loss prevention (DLP), e-Discovery and offline backup providers")},{id:3,description:re.t("Designated customer success teams")},{id:4,description:re.t("Shared channels between workspaces")}]}},{key:"getPricingPlansTabConfig",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:I["d"].standard.id,title:re.t("Standard"),content:f.a.createElement(h["Fragment"],null),"data-qa":"standard_pricing_plan_tab"},{id:I["d"].plus.id,title:re.t("Plus"),content:f.a.createElement(h["Fragment"],null),"data-qa":"plus_pricing_plan_tab"},{id:I["d"].enterprise.id,title:re.t("Enterprise Grid"),content:f.a.createElement(h["Fragment"],null),"data-qa":"enterprise_grid_pricing_plan_tab"}]}},{key:"getGoButtonText",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return null;if(this.state.selectedPricingPlan===I["d"].enterprise.id)return re.t("Contact Us");return re.t("Upgrade Now")}},{key:"setIsPlansDataLoaded",value:function e(t){this.setState(function(e){return s()({},e,{isPlansDataLoaded:t})})}},{key:"getPricingPlanClogStep",value:function e(t){var r=ee["A"].PRICING_PLANS_DIALOG_STANDARD_PLAN;t===I["d"].plus.id?r=ee["A"].PRICING_PLANS_DIALOG_PLUS_PLAN:t===I["d"].enterprise.id&&(r=ee["A"].PRICING_PLANS_DIALOG_ENTERPRISE_PLAN);return r}},{key:"clogPricingPlanModalEvent",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.step,a=t.action,n=t.elementType,i=t.elementName,s=t.source;var o={step:r,action:a};n&&i&&(o.ui_properties={element_type:n,element_name:i});s&&(o.entry_point=s);this.props.clogger.track(ee["l"].PRICING_PLANS_DIALOG,{contexts:{ui_context:o}})}},{key:"redirectToContactSalesPage",value:function e(){Object(k["openAuthenticatedUrlInBrowser"])(this.props.team,I["b"])}},{key:"redirectToCheckoutPage",value:function e(t){Object(k["openAuthenticatedUrlInBrowser"])(this.props.team,I["a"]+"?s=1&p="+t+"&entry_point=pricing_plans_modal")}},{key:"renderPricingPlanContent",value:function e(){var t=f.a.createElement(h["Fragment"],null);switch(this.state.selectedPricingPlan){case I["d"].standard.id:t=f.a.createElement(J,{planDescription:this.getStandardPlanDescription(),planCurrency:this.props.planCurrency,planCostPerMemberBilledAnnually:this.props.standardPlanCostPerMemberBilledAnnually,planCostPerMemberBilledMonthly:this.props.standardPlanCostPerMemberBilledMonthly,planTopFeatures:this.getStandardPlanTopFeatures(),isPlansDataLoaded:this.state.isPlansDataLoaded});break;case I["d"].plus.id:t=f.a.createElement(J,{planDescription:this.getPlusPlanDescription(),planCurrency:this.props.planCurrency,planCostPerMemberBilledAnnually:this.props.plusPlanCostPerMemberBilledAnnually,planCostPerMemberBilledMonthly:this.props.plusPlanCostPerMemberBilledMonthly,planTopFeatures:this.getPlusPlanTopFeatures(),isPlansDataLoaded:this.state.isPlansDataLoaded});break;case I["d"].enterprise.id:t=f.a.createElement(J,{planDescription:this.getEnterprisePlanDescription(),planTopFeatures:this.getEnterprisePlanTopFeatures(),showPlanCostDetails:false,isPlansDataLoaded:this.state.isPlansDataLoaded});break;default:}return t}},{key:"render",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return null;return f.a.createElement(C["a"],{className:"p-pricing_plans_modal",title:re.t("Level up with a premium plan"),cancelText:re.t("Close"),goButtonText:this.getGoButtonText(),onGo:this.onGoButtonClick,onClose:this.onClosePricingPlansModal,footerIcon:"question-circle",footerLink:"/"+I["f"],footerText:re.t("Compare plans and prices"),onFooterLinkClick:this.onClickFooterLink,shouldCloseOnGo:false,truncateTitle:false,"data-qa":"pricing_plans_modal"},f.a.createElement("div",{className:"p-pricing_plans_modal__content"},f.a.createElement(w["a"],{tabs:this.getPricingPlansTabConfig(),defaultTabId:this.state.selectedPricingPlan,onTabChange:this.onPricingPlanChange,fullWidthMenu:true}),this.renderPricingPlanContent()))}}]);return t}(h["Component"]);ie.displayName="PricingPlansModal";ie.defaultProps=ne;var se=function e(t){var r=Object(Z["t"])(t);var a=n()(r,1),i=a[0];return{team:Object(E["d"])(t),standardPlanProductId:Object(Z["e"])(t,i,I["e"].monthly,I["d"].standard.id,I["c"].CREDIT_CARD)||"",plusPlanProductId:Object(Z["e"])(t,i,I["e"].monthly,I["d"].plus.id,I["c"].CREDIT_CARD)||"",standardPlanCostPerMemberBilledMonthly:Object(Z["d"])(t,i,I["e"].monthly,I["d"].standard.id,I["c"].CREDIT_CARD)||0,standardPlanCostPerMemberBilledAnnually:Object(Z["d"])(t,i,I["e"].yearly,I["d"].standard.id,I["c"].CREDIT_CARD)||0,plusPlanCostPerMemberBilledMonthly:Object(Z["d"])(t,i,I["e"].monthly,I["d"].plus.id,I["c"].CREDIT_CARD)||0,plusPlanCostPerMemberBilledAnnually:Object(Z["d"])(t,i,I["e"].yearly,I["d"].plus.id,I["c"].CREDIT_CARD)||0,planCurrency:i||"",clogger:Object($["a"])({state:t})}};var oe=function e(t){return{loadPlansData:function e(){return t(Object(X["f"])())}}};var le=t["a"]=Object(b["connect"])(se,oe)(Object(O["a"])("feature_bring_plans_page_to_ssb_translations")(ie))},,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(13);var h=r(16);var f=r.n(h);var b=r(2);var g=r(4);var _=r(1489);var y=r(10);var O=r(444);var k=r(202);var E=r(2134);var j=new y["b"]("workspace_directory");var C={large:"large",small:"small"};var S={large:64,small:48};var w={team:d["b"].shape({id:d["b"].string,description:d["b"].string,discoverable:d["b"].string,name:d["b"].string,domain:d["b"].string,is_member:d["b"].bool,date_requested_join:d["b"].oneOfType([d["b"].string,d["b"].number]),icon:d["b"].object,is_inactive:d["b"].bool,user_counts:d["b"].object}).isRequired,size:d["b"].oneOf(Object(b["values"])(C)),featureZeroWorkspaceOnboarding:d["b"].bool.isRequired,className:d["b"].string,onActionReject:d["b"].func,onActionResolve:d["b"].func,anchorPage:d["b"].string,openDialog:d["b"].func,doLaunchInNewTab:d["b"].bool};var I={size:C.large,className:"",onActionResolve:b["noop"],onActionReject:b["noop"],anchorPage:"",openDialog:b["noop"],doLaunchInNewTab:false};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onCardClick=r.onCardClick.bind(r);r.onKeyPress=r.onKeyPress.bind(r);r.onResize=r.onResize.bind(r);r.openDialog=r.openDialog.bind(r);r.state={isMobileView:false};return r}s()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(k["c"])());window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.setIsMobileView(Object(k["c"])())}},{key:"onCardClick",value:function e(t){t.stopPropagation();t.preventDefault();this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function e(t,r){t.preventDefault();if("Enter"===t.key)switch(r){case"openDialog":if(this.isSmallVariationCard())return this.openDialog();break;default:}return null}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"isSmallVariationCard",value:function e(){return this.props.size===C.small}},{key:"isLargeVariationCard",value:function e(){return this.props.size===C.large}},{key:"openDialog",value:function e(){var t=this.props,r=t.team,e=t.openDialog;e({team:r})}},{key:"renderAvatar",value:function e(){var t=this.props.team;var r=this.isLargeVariationCard()&&!this.state.isMobileView?S[C.large]:S[C.small];return v.a.createElement("div",{className:"display_flex"},v.a.createElement(O["a"],{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:r,entityData:t,featureReactMessages:true,featureReactMemberProfileCard:true}))}},{key:"renderWorkspaceName",value:function e(){var t=this.props.team.name;return v.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":true,title:t},t)}},{key:"renderWorkspaceSubtitle",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team;if(!r)return null;var n=this.state.isMobileView;var i=a.date_requested_join,s=a.discoverable,o=a.domain,l=a.user_counts;l=void 0===l?{}:l;var c=l.active_members,u=void 0===c?0:c;var d=j.t("{activeMembers} active members",{activeMembers:u?Object(y["l"])(u):0});var p=void 0;p=this.isLargeVariationCard()&&!n?v.a.createElement("div",null,v.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),v.a.createElement("span",{className:"overflow_ellipsis"},o+".slack.com")):this.isSmallVariationCard()&&"closed"===s&&i?v.a.createElement("span",null,j.t("Awaiting admin approval")):v.a.createElement("span",{className:"overflow_ellipsis"},d);return v.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":true},p)}},{key:"renderWorkspaceStatus",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team;if(!r||this.isSmallVariationCard())return null;var n=Object(k["f"])(a,{context:"largeCard",featureZeroWorkspaceOnboarding:r});if(!n)return null;return v.a.createElement("div",{className:"p-workspace_directory_card__status"},n)}},{key:"renderWorkspaceDescription",value:function e(){var t=this.props.team.description;return v.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":true},t)}},{key:"renderButton",value:function e(){var t=this.props,r=t.team,a=t.size,n=t.onActionReject,i=t.onActionResolve,s=t.anchorPage,o=t.doLaunchInNewTab;var l=this.isLargeVariationCard()?"large":"medium";return v.a.createElement(_["a"],{team:r,buttonContext:a+"Card",featureZeroWorkspaceOnboarding:true,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:n,onActionResolve:i,anchorPage:s,doLaunchInNewTab:o,size:l})}},{key:"render",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.size,n=t.className;if(!r)return null;var i=this.props.team.id;var s=f()("p-workspace_directory_card",n,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return v.a.createElement("div",{className:s,onClick:this.onCardClick,"data-workspace-id":i,"data-qa-ws-directory-card":true,"data-qa-ws-directory-card-size":a,role:"presentation"},v.a.createElement("div",{className:"display_flex flex_direction_column"},v.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),v.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]);return t}(p["Component"]);T.displayName="WorkspaceDirectoryCard";T.defaultProps=I;var A=function e(t){return{featureZeroWorkspaceOnboarding:Object(g["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding")}};var N={};var P=Object(m["connect"])(A)(T);var R=t["a"]=P},,function(e,t,r){"use strict";var a=r(37);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(0);var f=r(1);var b=r.n(f);var g=r(13);var _=r(2);var y=r(258);var O=r(872);var k=r(435);var E=r(4);var j=r(24);var C=r(28);var S=r(22);var w=r(10);var I=r(38);var T=r(202);var A=new w["b"]("workspace_directory");var N={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"};var P={team:h["b"].shape({id:h["b"].string,description:h["b"].string,discoverable:h["b"].string,name:h["b"].string,domain:h["b"].string,is_member:h["b"].bool,date_requested_join:h["b"].oneOfType([h["b"].string,h["b"].number]),icon:h["b"].object,is_inactive:h["b"].bool,user_counts:h["b"].object}).isRequired,buttonContext:h["b"].oneOf(Object(_["values"])(T["a"])),featureZeroWorkspaceOnboarding:h["b"].bool.isRequired,customClasses:h["b"].string,onWorkspaceLaunch:h["b"].func,onDefaultButtonClick:h["b"].func,doLaunchInNewTab:h["b"].bool,displayDirectoryInModal:h["b"].bool,onActionReject:h["b"].func,onActionResolve:h["b"].func,anchorPage:h["b"].string,doUpsertJoin:h["b"].bool,callJoinWorkspace:h["b"].func,callRequestToJoinWorkspace:h["b"].func,size:h["b"].oneOf(["medium","large"])};var R={buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:_["noop"],onDefaultButtonClick:_["noop"],doLaunchInNewTab:false,displayDirectoryInModal:false,callJoinWorkspace:_["noop"],callRequestToJoinWorkspace:_["noop"],size:"large",onActionReject:_["noop"],onActionResolve:_["noop"],anchorPage:void 0,doUpsertJoin:false};var M=function e(t){var r=t.displayDirectoryInModal;var a="primary";var n="join";var i=r?A.t("Join and Open"):A.t("Join and Launch Slack");return{text:i,type:a,"data-qa-ws-directory-button-type":a,"data-qa-ws-directory-button-text":n,"data-qa":n}};var x=function e(){var t="primary";var r="request_to_join";return{text:A.t("Request to Join"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r}};var D=function e(){var t="primary";var r="request_sent";return{text:A.t("Request Sent"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r,disabled:true}};var F=function e(t){var r=t.displayDirectoryInModal;var a="primary";var n="launch";var i=r?A.t("Open"):A.t("Launch in Slack");return{text:i,type:a,"data-qa-ws-directory-button-type":a,"data-qa-ws-directory-button-text":n,"data-qa":n}};var L=function e(){var t="outline";var r="default";return{type:t,text:A.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r}};var B=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={loading:false};r.buttonType=null;r.onClick=r.onClick.bind(r);r.onKeyPress=r.onKeyPress.bind(r);return r}u()(t,[{key:"onKeyPress",value:function e(t){t.stopPropagation();t.preventDefault();13===t.which&&this.handleButtonAction()}},{key:"onClick",value:function e(t){t.stopPropagation();t.preventDefault();this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.windowOpener;var n=this.props,i=n.team,o=n.onActionReject,l=n.onActionResolve,c=n.anchorPage,u=n.doUpsertJoin;Object(I["a"])()&&Object(O["d"])(false);return this.props.callJoinWorkspace({teamId:i.id,anchorPage:c,doUpsertJoin:u}).then(function(){var e={};u&&(e.workspace=s()({},i,{is_member:true}));l(e);Object(I["a"])()&&!Object(k["b"])()&&Object(O["d"])(true)}).then(function(){return t.props.onWorkspaceLaunch(a)}).catch(function(e){Object(I["a"])()&&Object(O["d"])(true);if(a){t.setLoading(false);a.close()}o({node:b.a.createElement("span",null,A.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:e})})}},{key:"onWorkspaceRequestToJoin",value:function e(){var t=this;var r=this.props,a=r.team,n=r.onActionReject,i=r.onActionResolve,o=r.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:a.id,anchorPage:o}).then(function(){i({node:b.a.createElement("div",{className:"display_flex"},b.a.createElement(S["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),b.a.createElement("span",null,A.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:s()({},a,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){t.setLoading(false)}).catch(function(e){n({node:b.a.createElement("span",null,A.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getButtonProps",value:function e(t){var r=this.props.displayDirectoryInModal;switch(t){case N.launch:return F({displayDirectoryInModal:r});case N.request:return x();case N.join:return M({displayDirectoryInModal:r});case N.request_sent:return D();case N.default:return L();default:return null}}},{key:"handleButtonAction",value:function e(){var t=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();this.setLoading(true);if("join"===this.buttonType){if(t){var r=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:r})}return this.onWorkspaceJoin()}if("request"===this.buttonType)return this.onWorkspaceRequestToJoin();if("launch"===this.buttonType){this.props.onWorkspaceLaunch();t&&this.setLoading(false)}return null}},{key:"render",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team,i=t.buttonContext,o=t.customClasses,l=t.size;var c=this.state.loading;var u=H(a,{context:i,featureZeroWorkspaceOnboarding:r});this.buttonType=u;var d=this.getButtonProps(u);if(!u||Object(_["isEmpty"])(d))return null;var p=a.id;var v=d.text,m=n()(d,["text"]);var h=m.disabled||c;return b.a.createElement(C["b"],s()({},m,{className:o,onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":p,"data-qa-ws-directory-button":true,loading:c,disabled:h,size:l}),v)}}]);return t}(f["Component"]);B.displayName="WorkspaceDirectoryButton";B.defaultProps=R;var U=function e(t,r){var a=r.team,n=r.onActionResolve,i=r.anchorPage,s=r.doLaunchInNewTab,o=r.channelRedirect,l=r.postLaunchAction,c=r.userIdFromURL;var u=Object(j["b"])(t);return{featureZeroWorkspaceOnboarding:Object(E["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(E["isClientApp"])(t),onWorkspaceLaunch:function e(r){return Object(T["i"])(t,{team:a,user:u,onActionResolve:n,anchorPage:i,doLaunchInNewTab:s,windowOpener:r,channelRedirect:o,postLaunchAction:l,userIdFromURL:c})}}};var q={callJoinWorkspace:y["c"],callRequestToJoinWorkspace:y["e"]};var G=Object(g["connect"])(U,q)(B);function H(e,t){var r=t.context,a=void 0===r?T["a"].smallCard:r,n=t.featureZeroWorkspaceOnboarding,i=void 0===n||n;if(!i)return null;var s=e.is_member,o=e.date_requested_join,l=e.is_assigned,c=e.discoverable;if(s)return N.launch;if(a!==T["a"].smallCard){if(l)return N.join;switch(c){case"open":return N.join;case"closed":if(!o)return N.request;if(a===T["a"].largeCard)return N.request_sent;break;case"unlisted":break;default:}return null}return N.default}var W=t["a"]=G},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(13);var s=r(2);var o=r(16);var l=r.n(o);var c=r(0);var u=r(10);var d=r(17);var p=r(98);var v=r(3957);var m=r(710);var h=r(100);var f=r(28);var b=r(50);var g=r(1351);var _=r(532);var y=r(195);var O=r(1499);var k=r(43);var E=r(15);var j=r(49);var C=r(379);var S=r(19);var w=r(113);var I=r(1047);var T=void 0;var A=Object(E["b"])("Open a conversation with a member and then start a call",function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.memberId;var i,s;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:if(n){a.next=2;break}return a.abrupt("return",Promise.reject(new Error("invalid params")));case 2:if(Object(j["a"])()){a.next=5;break}Object(I["c"])({id:n});return a.abrupt("return",Promise.resolve());case 5:i=r();s=Object(S["k"])(i,n);if(s){a.next=12;break}a.next=10;return Object(k["resolve"])(t(Object(w["t"])({memberIds:[n],reason:"startCallByMemberId"})).then(function(e){var r=e&&e.channel;if(!r)return;t(Object(p["addChannel"])({channel:r}));s=r.id}));case 10:if(s){a.next=12;break}return a.abrupt("return",Promise.reject(new Error("could not open conversation")));case 12:return a.abrupt("return",t(Object(C["d"])({channelId:s})));case 13:case"end":return a.stop()}},e,T)}));return function(t,r,a){return e.apply(this,arguments)}}());A.propTypes={memberId:c["b"].string.isRequired};var N=A;var P=r(2024);var R=new u["b"]("member_profile");var M={autoFillSlashCommand:c["b"].func,children:c["b"].node,className:c["b"].string,member:c["b"].object,onClick:c["b"].func,openEditProfileModal:c["b"].func,showCallButton:c["b"].bool,showFileList:c["b"].func,showMemberProfile:c["b"].func,startCallByMemberId:c["b"].func,startImByMemberId:c["b"].func,isOffline:c["b"].bool.isRequired,isCallsAllowedByAdmin:c["b"].bool.isRequired};var x={autoFillSlashCommand:s["noop"],children:void 0,className:void 0,member:void 0,onClick:s["noop"],openEditProfileModal:s["noop"],showCallButton:false,showFileList:s["noop"],showMemberProfile:s["noop"],startCallByMemberId:s["noop"],startImByMemberId:s["noop"]};function D(e){var t=e.autoFillSlashCommand,r=e.children,a=e.className,i=e.member,s=e.onClick,o=e.openEditProfileModal,c=e.showCallButton,u=e.showFileList,p=e.showMemberProfile,v=e.startCallByMemberId,m=e.startImByMemberId,h=e.isOffline,y=e.isCallsAllowedByAdmin;var O=Object(_["a"])(),k=O.featureModernProfileFlexpane,E=O.featureOfflineMode;if(!k)return null;var j=void 0;if(Object(d["isSelf"])(i))j=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){o();s()},type:"outline","data-qa":"member_profile_edit_btn"},R.t("Edit Profile"));else if(Object(d["isSlackbot"])(i))j=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){var r=R.t("remind",{ns:"chat_commands"});t({commandName:"/"+r});s()},type:"outline","data-qa":"member_profile_remind_btn"},R.t("Remind Me"));else if(!Object(d["isInvitedUser"])(i))if(c)if(Object(d["isActiveMember"])(i)&&y){var C=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){v({memberId:i.id});s()},type:"outline","data-qa":"member_profile_call_btn",disabled:E&&h,"aria-label":E&&h?R.t("Go online to start a call"):""},R.t("Call"));var S=E?n.a.createElement(g["a"],{tooltipLabel:R.t("Go online to start a call")}):null;j=E&&h?n.a.createElement(b["c"],{tip:S},n.a.createElement("span",{className:"p-member_profile_buttons__button_disabled_container"},C)):C}else j=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){u({user:i.id});s()},type:"outline","data-qa":"member_profile_files_btn"},R.t("View Files"));else j=n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){p({memberId:i.id});s()},type:"outline","data-qa":"member_profile_profile_btn"},R.t("View Profile"));return n.a.createElement("div",{className:l()(a,"p-member_profile_buttons")},n.a.createElement(f["d"],{className:"p-member_profile_buttons__button",onClick:function e(){m({memberId:i.id});s()},type:"outline","data-qa":"member_profile_message_btn"},R.t("Message")),j,r)}D.displayName="MemberProfileButtons";D.defaultProps=x;var F=function e(t){return{isOffline:!Object(y["c"])(t),isCallsAllowedByAdmin:Object(O["d"])(t)}};var L={autoFillSlashCommand:function e(){return m["a"].apply(void 0,arguments)},openEditProfileModal:function e(){return v["a"].apply(void 0,arguments)},showFileList:function e(){return h["g"].apply(void 0,arguments)},showMemberProfile:function e(){return h["j"].apply(void 0,arguments)},startCallByMemberId:function e(){return N.apply(void 0,arguments)},startImByMemberId:function e(){return p["startImByMemberId"].apply(void 0,arguments)}};var B=t["a"]=Object(i["connect"])(F,L)(D)},,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(2);var n=r.n(a);var i=/\.spec\.jsx?$/;function s(e){return!i.test(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r={};if(!e||!Object(a["isFunction"])(e.keys))throw new Error("Cannot call importAll without a valid require.context.\n\t\t\tSee https://webpack.js.org/guides/dependency-management/#require-context.");var n=t?e.keys():e.keys().filter(s);n.forEach(function(t){r[t]=e(t)});return r}},,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(30);var n=r(12);function i(e,t,r){var i="noversion";var s=Date.now()/1e3;var o="/api/"+e+"?_x_id="+i+"-"+s;var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){l.onreadystatechange=null;var e={};if(200===l.status||429===l.status)try{e=JSON.parse(l.responseText)}catch(e){Object(n["b"])().warn("API","Unable to do anything with api response")}e=e||{ok:false};if(r)r(e.ok,e,t);else if(a["isDev"]){Object(n["b"])().warn("API","No callback provided. Printing response");Object(n["b"])().warn("API",e.ok,e,t)}}};var c=true;l.open("POST",o,c);var u=new FormData;var d=false;t?Object.keys(t).forEach(function(e){if("_"===e[0])return;u.append(e,t[e]);d=true}):a["isDev"]&&Object(n["b"])().warn("API","No args provided. Bold, very bold.");d?l.send(u):l.send()}window.callSlackAPIUnauthed=function(e,t,r){Object(n["b"])().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.js");i(e,t,r)}},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(2);var h=r(1757);var f=r(16);var b=r.n(f);var g=r(139);var _=r(11);var y=r(13);var O=r(17);var k={unreadCount:d["b"].number};var E={unreadCount:void 0};var j=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.unreadCount;if(!t)return null;var r=t<10?t:"9+";return v.a.createElement("span",{className:"c-search_autocomplete__unread_count"},r)}}]);return t}(p["PureComponent"]);j.displayName="UnreadCount";function C(e,t){var r=t.model;var a=void 0;a=Object(O["isMember"])(r)?Object(O["getImUnreadCountByMember"])(e,r):Object(_["getBadgeCountWithMuted"])(r);return{unreadCount:a}}j.defaultProps=E;var S=Object(y["connect"])(C)(j);var w=r(10);var I=r(1183);var T=r(4326);var A=r(3);var N=r.n(A);var P=r(61);var R=r(19);var M=r(790);var x=r(4200);var D=r(3745);var F=r(2381);var L=T["a"].small;var B={className:d["b"].string,id:d["b"].string,invert:d["b"].bool,isDeactivated:d["b"].bool,mpim:d["b"].object};var U={className:void 0,id:void 0,invert:false,isDeactivated:false,mpim:void 0};function q(e){var t=e.className,r=e.id,a=e.invert,n=e.isDeactivated,i=e.mpim;var s=Object(P["c"])(i);var o=Object(P["d"])(i);var l=Object(_["getMpimMemberCount"])(i);var c=a&&!n;var u=void 0;u=s||o?function e(t){return v.a.createElement(x["a"],N()({},t,{isNonExistent:s,size:L,invert:c}))}:function e(t){return v.a.createElement("span",{className:b()(t.className,"c-small_mpim_entity__count",{"c-small_mpim_entity__count--inverted":a}),style:{height:L,width:L}},l)};var d=n?T["c"].dim:null;c&&(d=T["c"].highlightDark);return v.a.createElement(M["d"],{avatar:u,className:t,size:"small",style:d,text:v.a.createElement(D["a"],{"data-qa":"name",id:r,invert:c})})}q.displayName="SmallMpimEntity";q.defaultProps=U;function G(e,t){var r=t.id;return{mpim:Object(R["d"])(e,r)}}var H=Object(y["connect"])(G)(q);var W={className:d["b"].string,id:d["b"].string.isRequired,isActive:d["b"].bool,isDeactivated:d["b"].bool,isDisabled:d["b"].bool,secondaryContent:d["b"].node};var V={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0};function K(e){var t=e.className,r=e.id,a=e.isActive,n=e.isDeactivated,i=e.isDisabled,s=e.secondaryContent;var o=void 0;a?o=i||n?T["c"].highlightDim:T["c"].highlightDark:(i||n)&&(o=T["c"].dim);return v.a.createElement(I["a"],{className:t,style:o,primaryContent:v.a.createElement(H,{id:r,invert:o===T["c"].highlightDark,isDeactivated:n}),secondaryContent:s,size:"small"})}K.displayName="SmallMpimListEntity";K.defaultProps=V;var z=K;var Q={id:d["b"].string.isRequired,index:d["b"].number.isRequired,suggestion:d["b"].object.isRequired,isSelected:d["b"].bool.isRequired,onDelete:d["b"].func,onMouseUp:d["b"].func.isRequired,onMouseMove:d["b"].func.isRequired};var Y={onDelete:m["noop"]};var J=new w["b"]("jumper");var X=v.a.forwardRef(function(e,t){var r=e.id,a=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove,l=e.hasChannelNameCollision;var c=i.suggestion_replacement,u=i.exact_string,d=i.featureVector;var p=i.channel||i.mpim;var m=e.suggestion.channel&&e.suggestion.channel._jumper_previous_name_match;var h=Object(_["isMemberOfChannel"])(i.channel);var f=i.channel&&!h&&!Object(_["isArchived"])(p);var y=Object(_["isMpim"])(p);var O=y&&Object(_["isArchived"])(p);return v.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":c,"data-exact-string":u,"data-feature-vector":d,"data-is-navigational":true,"data-id":p.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},y?v.a.createElement(z,{id:p.id,isActive:n,isDeactivated:O}):v.a.createElement(g["a"],{className:"c-search_autocomplete__channel",channel:p,channelId:p.id,showDraftIcon:h,inline:true,showTeamIconForXwsChannels:true,showTeamIconForLocalChannels:l,showArchived:true,previousName:m}),f&&v.a.createElement("span",{className:"c-search_autocomplete__channel-membership"},J.t("Not a member",{fallbackHash:"28de8887932845dddf7c04d15831c5780b353820"})),v.a.createElement(S,{model:p}))});X.defaultProps=Y;var Z=X;var $=r(795);var ee=r(22);var te=v.a.forwardRef(function(e,t){var r=e.id,a=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.file;return v.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-id":d.id,"data-is-navigational":true,key:d.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},v.a.createElement(ee["b"],{file:"tiny",type:e.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),v.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},v.a.createElement($["a"],{text:d.title,noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true})),v.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},e.suggestion.fileTypeDescription))});te.defaultProps=Y;var re=te;var ae=r(352);var ne=r(31);var ie=r(35);var se=r(28);var oe=r(1336);var le=r(312);var ce=r(434);var ue=new w["b"]("search");var de={exactQueryString:d["b"].string.isRequired,onDelete:d["b"].func,searchSessionId:d["b"].string.isRequired,querySessionId:d["b"].string.isRequired,searchDelete:d["b"].func.isRequired};var pe={onDelete:m["noop"]};var ve=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["a"])(r,["onClick"]);return r}s()(t,[{key:"onClick",value:function e(t){var r=this;t.stopPropagation();var a=Object(oe["a"])(this.props.exactQueryString,{shouldRenderEmojiAsText:true});this.props.searchDelete({terms:a,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(function(){r.props.onDelete()})}},{key:"render",value:function e(){return v.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},v.a.createElement(se["c"],{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:ue.t("delete history result")},v.a.createElement(ee["b"],{type:"times_small",inline:true})))}}]);return t}(p["PureComponent"]);ve.displayName="Delete";ve.defaultProps=pe;var me=function e(t){return{searchDelete:function e(){return t(le["m"].apply(void 0,arguments))},querySessionId:t(Object(ce["getQuerySessionId"])()),searchSessionId:t(Object(ce["getSearchSessionId"])())}};var he=Object(y["connect"])(null,me)(ve);var fe=r(30);var be=new w["b"]("search");var ge=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.user,a=t.fullNameOrDisplayName,n=t.filter;var i=Object(O["isRestricted"])(r);var s=Object(O["isExternal"])(r);var o=Object(O["isDeleted"])(r);var l=Object(O["isBotUser"])(r);var c=Object(fe["isHighResolutionScreen"])();var u=void 0;u="from"===n?be.t("from")+":":"to"===n?be.t("to")+":":null;var d={backgroundImage:"url("+(c?r.profile.image_48:r.profile.image_24)+")"};return v.a.createElement("span",{className:b()("token","member_token",{ra:i,external_member:s,deleted:o}),"data-member-id":r.id},v.a.createElement("span",{className:b()({bot:l,member_preview_link:!l},"member_image","thumb_24"),"data-member-id":r.id,"data-thumb-size":"24",style:d,"aria-hidden":"true"})," ",v.a.createElement("span",{className:"token_label"},u,v.a.createElement("b",null,"@",a)))}}]);return t}(p["PureComponent"]);ge.displayName="SuggestionQueryUserFilterBase";ge.defaultProps={filter:void 0};var _e=function e(t,r){var a=r.user;return{fullNameOrDisplayName:Object(O["getPrefCompliantMemberName"])(t,a)}};var ye=Object(y["connect"])(_e)(ge);var Oe=ye;var ke=new w["b"]("search");var Ee=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.isPrivate,a=t.displayName,n=t.unknownFallback;var i=ke.t("in:");return v.a.createElement("span",{className:"token channel_token"},v.a.createElement("span",{className:"token_label"},a?v.a.createElement(v.a.Fragment,null,i,r&&v.a.createElement("i",{className:"ts_icon ts_icon_lock"}),v.a.createElement("b",null,a)):n))}}]);return t}(p["PureComponent"]);Ee.displayName="SuggestionQueryInFilterBase";Ee.defaultProps={displayName:void 0,isPrivate:void 0};var je=function e(t,r){var a=r.user,n=r.channel,i=r.fallbackChannelName,s=r.unknownFallback;var o="";var l=n&&Object(_["isPrivateChannel"])(n);a&&!Object(O["isUnknownOrNonExistent"])(a)?o="@"+Object(O["getPrefCompliantMemberName"])(t,a):n&&!Object(_["isUnknownOrNonExistent"])(n)?o=Object(_["getDisplayNameForChannel"])(t,n):Object(_["isUnknownOrNonExistent"])(n)&&(o=i);return{unknownFallback:s,displayName:o,isPrivate:l}};var Ce=Object(y["connect"])(je)(Ee);Ce.propTypes={user:d["b"].object,channel:d["b"].object,fallbackChannelName:d["b"].string,unknownFallback:d["b"].string.isRequired};Ce.defaultProps={user:void 0,channel:void 0,fallbackChannelName:void 0};var Se=Ce;var we=r(478);var Ie=new w["b"]("search");var Te=function e(t){var r=t.theAttribute;return v.a.createElement("span",{className:"token has_token"},v.a.createElement("span",{className:"token_label"},Ie.t("has"),":",v.a.createElement("b",null,v.a.createElement($["a"],{text:Object(we["a"])(r),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true}))))};Te.displayName="SuggestionQueryHasFilter";var Ae=Te;var Ne=new w["b"]("search");var Pe=function e(t){var r=t.fileType;return v.a.createElement("span",{className:"token type_token"},v.a.createElement("span",{className:"token_label"},Ne.t("type"),":",v.a.createElement("b",null,r)))};Pe.displayName="SuggestionQueryTypeFilter";var Re=Pe;var Me=r(94);var xe=function e(t){var r=t.modifierName,a=t.dateString;return v.a.createElement("span",{className:"token date_token"},v.a.createElement("span",{className:"token_label"},Object(Me["f"])()[r],": ",a))};xe.displayName="SuggestionQueryDateFilter";var De=xe;var Fe=new w["b"]("search");function Le(e,t){return Object(m["flatten"])(e.map(function(e){return[t,e]})).slice(1)}var Be=N()({},Q,{getClnMessage:d["b"].func.isRequired,orgName:d["b"].string,teamName:d["b"].string});var Ue=N()({},Y,{orgName:"",teamName:""});var qe=v.a.forwardRef(function(e,t){var r=e.id,a=e.index,n=e.isSelected,i=e.suggestion,s=e.onDelete,o=e.onMouseUp,l=e.onMouseMove,c=e.teamName,u=e.orgName;var d=i.suggestion_replacement,p=i.exact_string,m=i.token_list,h=i.featureVector,f=i.isCustomDateFilter,g=i.deletable;return v.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":d,"data-exact-string":p,"data-feature-vector":h,"data-is-custom-date-filter":f,"data-is-replacement-full":true,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:l,onClick:o,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},v.a.createElement(ee["b"],{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),v.a.createElement("div",{className:"c-search_autocomplete__query_wrapper"},v.a.createElement("span",{className:"c-search_autocomplete__query_parts"},Le(m.map(function(t,r){switch(true){case t.is_type_string:return v.a.createElement($["a"],{key:r,text:e.getClnMessage(t.string),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true});case t.is_type_phrase:return"\u201c"+t.phrase+"\u201d";case t.is_type_member_filter&&t.is_type_from_filter:return v.a.createElement(Oe,{key:r,filter:"from",user:t.user});case t.is_type_member_filter&&t.is_type_to_filter:return v.a.createElement(Oe,{key:r,filter:"to",user:t.user});case t.is_type_member:return v.a.createElement(Oe,{key:r,user:t.user});case t.is_type_in_filter:return v.a.createElement(Se,{key:r,user:t.user,channel:t.channel,fallbackChannelName:t.fallbackChannelName,unknownFallback:t.string});case t.is_type_has_filter:return v.a.createElement(Ae,{key:r,theAttribute:t.thing});case t.is_type_type_filter:return v.a.createElement(Re,{key:r,fileType:t.file_type});case t.is_type_date_filter:return v.a.createElement(De,{key:r,modifierName:t.modifier,dateString:t.date_string_normalized});default:return null}})," "))),v.a.createElement("span",{className:"c-search_autocomplete__omniswitcher_hint"},"\u2014"," ",Fe.rt("Search {teamName}",{teamName:u||c||""})," "),g&&v.a.createElement(he,{exactQueryString:p,onDelete:s}))});qe.defaultProps=Ue;var Ge=function e(t){return{getClnMessage:function e(r){return Object(ae["b"])(t,r,{isInternalMessage:false})},orgName:Object(ie["f"])(t)||"",teamName:Object(ne["getTeamDisplayName"])(Object(ie["d"])(t))}};var He=Object(y["connect"])(Ge,null,null,{withRef:true})(qe);var We=r(289);var Ve=v.a.forwardRef(function(e,t){var r=e.id,a=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.user;var p=d&&d.profile&&d.profile.bot_id;var m=Object(O["isDeleted"])(d);return v.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-bot-id":p,"data-id":d.id,"data-is-navigational":true,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},v.a.createElement("span",{className:b()("c-search_autocomplete__member",{"c-search_autocomplete__member--deleted":m})},v.a.createElement(We["b"],{id:d.id,size:"small",showPresence:!m,newPresence:true,showAvatar:true,isDraftContext:true,showDeactivatedAnnotation:m})),v.a.createElement(S,{model:d}))});Ve.defaultProps=Y;var Ke=Ve;var ze=r(270);var Qe=r(2849);var Ye={className:d["b"].string,displayName:d["b"].string.isRequired,id:d["b"].string.isRequired,inline:d["b"].bool};var Je={className:void 0,inline:false};var Xe=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.displayName,a=t.id,n=t.inline,i=t.className;return v.a.createElement("span",{className:b()("c-team_name",i)},v.a.createElement(ze["b"],{id:a,className:"c-team_name__icon"}),v.a.createElement("span",{className:b()("c-team_name__text",{"c-team_name__text--inline":!n})},r))}}]);return t}(p["PureComponent"]);Xe.displayName="TeamName";var Ze=Xe;Xe.defaultProps=Je;Xe.displayName="TeamName";var $e=Ze;var et=v.a.forwardRef(function(e,t){var r=e.id,a=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.team;return v.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":true,"data-id":d.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},v.a.createElement($e,{className:"c-search_autocomplete__team",id:d.id,displayName:d.name,inline:true}))});et.defaultProps=Y;var tt=et;var rt=r(2851);var at={className:d["b"].string,displayName:d["b"].string.isRequired,id:d["b"].string.isRequired,inline:d["b"].bool};var nt={className:void 0,inline:false};var it=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.displayName,a=t.id,n=t.className,i=t.inline;var s="list";"Vall_threads"===a?s="small-reply":"Vall_unreads"===this.props.id&&(s="list");return v.a.createElement("span",{className:b()("c-view_name",n)},v.a.createElement(ee["b"],{className:"c-view_name__icon",type:s}),v.a.createElement("span",{className:b()("c-view_name__text",{"c-view_name__text--inline":!i})},r))}}]);return t}(p["PureComponent"]);it.displayName="ViewName";var st=it;it.defaultProps=nt;it.displayName="ViewName";var ot=st;var lt=v.a.forwardRef(function(e,t){var r=e.id,a=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.view;return v.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":true,"data-id":d.id,id:r,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:b()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},v.a.createElement(ot,{displayName:d.name,id:d.id,className:"c-search_autocomplete__view",inline:true}))});lt.defaultProps=Y;var ct=lt;r.d(t,"b",function(){return pt});var ut={index:d["b"].number.isRequired,suggestion:d["b"].object.isRequired,isSelected:d["b"].bool.isRequired,onSelected:d["b"].func,onAccept:d["b"].func,onDelete:d["b"].func,hasChannelNameCollision:d["b"].bool,listItemRef:d["b"].any};var dt={onAccept:m["noop"],onSelected:m["noop"],onDelete:m["noop"],hasChannelNameCollision:false,listItemRef:void 0};var pt=function e(t){return"c-search_autcomplete__suggestion_"+t};var vt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["a"])(r,["onMouseUp","onMouseMove","onDelete"]);return r}s()(t,[{key:"onMouseUp",value:function e(t){if(0!==t.button||t.ctrlKey)return;this.props.onAccept()}},{key:"onMouseMove",value:function e(){if(this.props.isSelected)return;this.props.onSelected(this.props.index,true)}},{key:"onDelete",value:function e(){this.props.onDelete(this.props.suggestion)}},{key:"componentClassForSuggestion",value:function e(t){if(t.is_type_query_completion)return He;if(t.is_type_user)return Ke;if(t.is_type_channel||t.is_type_mpim)return Z;if(t.is_type_file)return re;if(t.is_type_view)return ct;if(t.is_type_team)return tt;return null}},{key:"render",value:function e(){var t=pt(this.props.index);var r=this.componentClassForSuggestion(this.props.suggestion);return v.a.createElement(r,{ref:this.props.listItemRef,id:t,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,hasChannelNameCollision:this.props.hasChannelNameCollision})}}]);return t}(p["PureComponent"]);vt.displayName="Suggestion";vt.defaultProps=dt;var mt=t["a"]=vt},,,,function(e,t,r){"use strict";r.r(t);r.d(t,"toggleExpandEmailMeta",function(){return p});r.d(t,"toggleQuotedText",function(){return v});r.d(t,"isEmailQuoteTextExpanded",function(){return m});r.d(t,"isEmailMetaInfoExpanded",function(){return h});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d;var p=Object(l["b"])("Expand name and label of a email");p.propTypes={fileId:o["b"].string.isRequired};var v=Object(l["b"])("Toggle show/hide quoted text for the email");v.propTypes={fileId:o["b"].string.isRequired};var m=Object(u["b"])(function(e,t){return!!e.emailRender.expandedQuotedText[t]});var h=Object(u["b"])(function(e,t){return!!e.emailRender.expandedEmailMeta[t]});var f=Object(c["b"])((d={},n()(d,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fileId;return s()({},e,{expandedEmailMeta:s()({},e.expandedEmailMeta,n()({},r,!e.expandedEmailMeta[r]))})}),n()(d,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fileId;return s()({},e,{expandedQuotedText:s()({},e.expandedQuotedText,n()({},r,!e.expandedQuotedText[r]))})}),d),{expandedEmailMeta:{},expandedQuotedText:{}},{persistenceEnabled:true});f.propTypes={expandedEmailMeta:o["b"].objectOf(o["b"].bool),expandedQuotedText:o["b"].objectOf(o["b"].bool)};t["default"]=f},,function(e,t,r){"use strict";r.r(t);r.d(t,"setChannels",function(){return d});r.d(t,"getChannels",function(){return m});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=Object(l["b"])("Example action to store channels for channel discovery");d.propTypes={channels:o["b"].arrayOf(o["b"].object)};var p={channels:[]};var v=Object(c["b"])(n()({},d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels;return s()({},e,{channels:r})}),p,{persistenceEnabled:true});v.propTypes={channels:o["b"].arrayOf(o["b"].object)};t["default"]=v;var m=Object(u["b"])(function(e){return e&&e.searchChannelsUsers&&e.searchChannelsUsers.channels})},function(e,t,r){"use strict";r.r(t);r.d(t,"setUsersCounts",function(){return d});r.d(t,"getUsersCounts",function(){return v});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=Object(l["b"])("Initialize the raw users counts");d.propTypes=o["b"].shape({channels:o["b"].array,groups:o["b"].array,ims:o["b"].array,mpims:o["b"].array,threads:o["b"].object});var p=Object(c["b"])(n()({},d,function(e,t){return s()({},e,{counts:t})}),{},{persistenceEnabled:true});p.propTypes={counts:o["b"].shape({channels:o["b"].array,groups:o["b"].array,ims:o["b"].array,mpims:o["b"].array,threads:o["b"].object})};t["default"]=p;var v=Object(u["b"])(function(e){return e&&e.usersCounts&&e.usersCounts.counts})},function(e,t,r){"use strict";r.r(t);r.d(t,"getConditionalFetchManager",function(){return k});r.d(t,"upsertFetchedChannelOrderedMemberList",function(){return E});r.d(t,"initialState",function(){return j});r.d(t,"getMemberListForChannel",function(){return S});r.d(t,"getMarker",function(){return w});r.d(t,"markObjectsAsStale",function(){return I});r.d(t,"throttledMarkObjectsAsStale",function(){return A});r.d(t,"verifyActiveChannelAndMarkObjectsAsStale",function(){return N});r.d(t,"fetchAndUpsertFirstNMembersForChannel",function(){return P});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=r(15);var p=r(2);var v=r.n(p);var m=r(1031);var h=r(192);var f=r(27);var b=r(4);var g=r(23);var _=r(1281);var y=r(73);var O=r(39);var k=Object(p["memoize"])(function(){return new h["b"]({fetch:function e(t,r){return Promise.all(r.map(function(e){return Object(f["a"])(t,P({channelId:e,count:O["MEMBERS_ABOVE_THE_FOLD"]}))}))},isEnabled:function e(t){return Object(b["isFeatureEnabled"])(Object(f["c"])(t),"feature_channel_details_membership_list")},metricsName:"member-list"})});var E=Object(l["b"])("Upsert fetched ordered membership list for channel");E.propTypes={channelId:o["b"].string.isRequired,memberList:o["b"].array.isRequired};var j={};var C=Object(c["b"])(n()({},E,function(e,t){if(!Object(p["isObject"])(t)||!Object(p["isString"])(t.channelId)||!Object(p["isObject"])(t.memberList)||Object(p["isEmpty"])(t.memberList))return e;var r=t.memberList.map(function(e){return e.id});return s()({},e,n()({},t.channelId,r))}),j,{persistenceEnabled:true});C.propTypes=o["b"].objectOf(o["b"].arrayOf(o["b"].string));t["default"]=C;var S=Object(u["b"])(function(e,t){var r=Object(g["b"])(e);k().maybeRefetch(r,t);return e&&e.membershipOrdered&&e.membershipOrdered[t]?e.membershipOrdered[t]:[]});var w=Object(u["b"])(function(e){return e&&e.membershipOrdered&&e.membershipOrdered.marker});var I=Object(d["b"])("marks objects as stale via CFM for Membership List",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.channelId;k().markObjectsAsStale(a,[n])});I.propTypes={teamId:o["b"].string.isRequired,channelId:o["b"].string.isRequired};var T=1e4;var A=Object(m["a"])(I,T);var N=Object(d["b"])("verify channel is active and call thunk to mark objects as stale",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.ids;var i=Object(y["a"])(t());n.forEach(function(t){if(t!==i)return null;return e(A({teamId:a,channelId:t}))})});N.propTypes={teamId:o["b"].string.isRequired,ids:o["b"].array.isRequired};var P=Object(d["b"])("Fetches top members for the channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.count;return Object(_["a"])(e,t,a,n).then(function(r){var n=Object(g["b"])(t());k().markObjectsAsFresh(n,[a]);return e(E({channelId:a,memberList:r}))})});P.propTypes={channelId:o["b"].string.isRequired,count:o["b"].number.isRequired}},function(e,t,r){(function(t){e.exports=t["EXIF"]=r(2307)}).call(this,r(70))},,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(15);var n=r(1087);var i=r(196);var s=r(116);var o=r(1065);var l=r(716);var c=r(198);var u=r(173);var d=r(1758);var p=r(434);var v=r(1076);var m=Object(a["b"])("Clear the search input, resetting the editable query and ending the search and query sessions",function(e,t){var r=t();e(Object(n["a"])({textyString:"",fetchAutocompleteSuggestions:true}));e(Object(o["a"])({interfaceMode:l["a"].EDIT}));e(Object(u["resetEditableRequest"])());e(Object(s["k"])());e(Object(d["a"])());e(Object(s["c"])());e(Object(c["resetSearchAutocomplete"])());Object(v["a"])(r)&&e(Object(s["d"])());if(!Object(i["t"])(r)){e(Object(p["endSearchSession"])());var a=Object(i["r"])(r);if(a){clearTimeout(a);e(Object(s["H"])({sessionTimeoutId:null}))}}});m.propTypes=null;t["a"]=m},function(e,t,r){"use strict";var a=r(0);var n=r(15);var i=r(116);var s=r(436);var o=r(12);var l="IMPROVED_SEARCH";var c=Object(n["b"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.tab;e(Object(i["J"])({tab:a}));Object(o["a"])({getState:t}).info(l,'Switching to tab "'+a+'"');e(Object(s["i"])({method:"search_tab"}))});c.propTypes={method:a["b"].string};t["a"]=c},,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(44);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(0);var b=r(2);var g=r(10);var _=r(22);var y=r(28);var O=r(50);var k=new g["b"]("enterprise_dashboard");var E={teams:f["b"].object,org:f["b"].object};var j={teams:{},org:{}};var C=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getWorkspaceVisibilityLabel",value:function e(t){switch(t){case"open":return k.t("Open");case"unlisted":return k.t("Hidden");case"closed":return k.t("By Request");case"invite_only":return k.t("Invite Only");default:return t}}},{key:"renderOpenSlackBtn",value:function e(){var t=this.props,r=t.teams,a=t.org;var i=Object(b["get"])(r,"teams[0]");var s=Object(b["get"])(i,"domain");var o=Object(b["get"])(i,"id");var l=Object(b["get"])(a,"user.enterprise_user.teams",[]).indexOf(o)>-1;if(l&&s)return n.a.createElement(y["d"],{type:"primary",size:"medium",href:""},n.a.createElement("div",{className:"p-ent_overview__header_btn"},k.t("Open in Slack")),n.a.createElement(_["b"],{type:"external-link",size:"inherit",inline:true}));if(!l&&s)return n.a.createElement(O["c"],{tip:k.t("You are not a member of this workspace."),position:"bottom"},n.a.createElement("div",null,n.a.createElement(y["d"],{type:"primary",size:"medium",href:"",disabled:true},n.a.createElement("div",{className:"p-ent_overview__header_btn"},k.t("Open in Slack")),n.a.createElement(_["b"],{type:"external-link",size:"inherit",inline:true}))));return null}},{key:"render",value:function e(){var t=this.props.teams;var r=Object(b["get"])(t,"teams[0]");var a=Object(b["get"])(r,"name");var i=this.getWorkspaceVisibilityLabel(Object(b["get"])(r,"discoverable"));var s=Object(b["get"])(r,"domain");return n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("div",{className:"p-ent_team_overview__header"},n.a.createElement("h2",{className:"p-ent_overview__header_title"},a),n.a.createElement("div",{className:"p-ent_overview__header_domain"},n.a.createElement("span",null,s+".slack.com")),this.renderOpenSlackBtn()),n.a.createElement("div",{className:"p-ent_overview__header_subtitle"},i))}}]);return t}(a["PureComponent"]);C.displayName="TeamOverviewHeader";C.defaultProps=j;var S=C;var w=r(927);var I=r(216);var T={};var A={};var N=[{id:"W0P0MNBDE",team_id:"T0LJB9J56",name:"scott",real_name:"Scott Schiller",profile:{real_name:"Scott Schiller",real_name_normalized:"Scott Schiller",display_name:"Schill",display_name_normalized:"Schill",first_name:"Scott",last_name:"Schiller",image_72:"https://secure.gravatar.com/avatar/cd9fdc16ab0ac01a1c3dcb6431445008.jpg?s=72&d=https%3A%2F%2Fdev.slack.com%2Fimg%2Favatars%2Fava_0013-72.v1465239934.png",team:"T0LJB9J56"},is_admin:true,is_owner:true,is_primary_owner:true,is_restricted:false,is_ultra_restricted:false,is_bot:false,is_app_user:false},{id:"W0PFU50GG",team_id:"T0LJB9J56",name:"scott-2",real_name:"scott-2",profile:{real_name:"scott-2",real_name_normalized:"scott-2",display_name:"",display_name_normalized:"",image_72:"https://secure.gravatar.com/avatar/cd9fdc16ab0ac01a1c3dcb6431445008.jpg?s=72&d=https%3A%2F%2Fdev.slack.com%2Fimg%2Favatars%2Fava_0013-72.v1465239934.png",team:"T0LJB9J56"},is_admin:true,is_owner:true,is_primary_owner:false,is_restricted:false,is_ultra_restricted:false,is_bot:false,is_app_user:false}];var P={display:"inline-block",verticalAlign:"middle",paddingRight:"0.5rem"};var R={items:[{value:function e(t){var r=t.profile.image_72;if(r)return n.a.createElement("div",null,n.a.createElement("span",{style:P},n.a.createElement(I["a"],{size:36,imageUrl:r})),n.a.createElement("b",null,t.name));return n.a.createElement("b",null,t.name)},className:"p-team_overview_table__user_profile"},{value:function e(t){if(!t)return"";if(t.is_primary_owner)return"Primary Owner";if(t.is_owner)return"Workspace Owner";if(t.is_admin)return"Workspace Admin";return"Member"},className:"p-team_overview_table__user_type"}]};var M=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=[N[0],N[1]];var r=0;var a=t.map(function(e){r+=1;var t="member"+r;var a=0;return{id:"row_"+t,items:R.items.map(function(r){a+=1;return{id:"row_"+t+"_col_"+a,value:r.value(e),className:r.className}})}});return n.a.createElement(w["b"],{autoHeight:true,headers:[{id:"header_0",value:"Admin Name"},{id:"header_1",value:"Admin Type"}],rows:a,rowClassName:"p-team_overview_table__row",rowHeaderItemClassName:"p-team_overview_table__row_header",listClassName:"p-team_overview_table__list",useKeyboardNavigableTable:true})}}]);return t}(n.a.PureComponent);M.displayName="TeamOverviewTable";M.defaultProps=A;var x=M;var D=r(4506);var F=r(4605);var L={label:f["b"].string,value:f["b"].number};var B={label:"[Enter label here]",value:0};var U=function e(t){var r=t.label,a=t.value;return n.a.createElement("div",{className:"p-team_overview__details_pane"},n.a.createElement("h1",{className:"p-team_overview__details_pane__value"},a),n.a.createElement("p",{className:"p-team_overview__details_pane__label"},r))};U.displayName="DetailsPane";U.displayName="DetailsPane";U.defaultProps=B;var q=U;var G=r(4612);var H={membersCount:f["b"].number};var W={membersCount:1};var V="Members";var K=function e(t){var r=t.membersCount;return n.a.createElement("div",{className:"p-team_overview__members_count"},n.a.createElement(q,{label:V,value:r}))};K.displayName="MembersCount";K.displayName="MembersCount";K.defaultProps=W;var z=K;var Q={idpGroupsCount:f["b"].number};var Y={idpGroupsCount:2};var J="IDP Groups";var X=function e(t){var r=t.idpGroupsCount;return n.a.createElement(q,{label:J,value:r})};X.displayName="IdpGroupsCount";X.displayName="IdpGroupsCount";X.defaultProps=Y;var Z=X;var $=function e(){return n.a.createElement("div",{className:"p-team_overview__details_wrapper"},n.a.createElement(z,null),n.a.createElement(Z,null))};$.displayName="DetailsWrapper";$.displayName="DetailsWrapper";var ee=$;var te=r(4617);var re={teams:f["b"].object};var ae={teams:{}};var ne=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){return n.a.createElement("div",{"data-qa":"team_overview"},n.a.createElement(S,this.props),n.a.createElement(ee,null),n.a.createElement("div",{"data-qa":"team_overview_table"},n.a.createElement(x,null)))}}]);return t}(n.a.PureComponent);ne.displayName="TeamOverview";ne.defaultProps=ae;var ie=ne;Object(o["a"])("interop.teamOverview",{render:function e(t,r,a){if(!t)throw new Error("team overview render must be called with a teamId parameter");s.a.render(n.a.createElement(ie,a),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(13);var l=r(16);var c=r.n(l);var u=r(0);var d=r(38);var p=r(4);var v=r(10);var m=r(50);var h=new v["b"]("sonic_pilot");function f(e){var t=e.children,r=e.featureSonicPlaceholderLabels,a=e.unstyled,i=e.tooltipPosition;if(!r)return t;if(Object(d["a"])()){var o=s.a.cloneElement(t,n()({},t.props,{className:c()(t.props.className,{"c-button--sonic-placeholder":!a,"c-button-unstyled--sonic-placeholder":a})}),t.props.children);return s.a.createElement(m["c"],{tip:s.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},h.t("Coming soon")),position:i||"top",zIndex:"above_fs"},o)}return t}f.defaultProps={unstyled:false,tooltipPosition:void 0};var b=function e(t){return{featureSonicPlaceholderLabels:Object(p["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};t["a"]=Object(o["connect"])(b)(f)},,,,function(e,t,r){"use strict";r.d(t,"d",function(){return i});r.d(t,"a",function(){return s});r.d(t,"b",function(){return s});r.d(t,"c",function(){return o});var a=r(0);var n=r(18);var i=Object(n["b"])("set new message count for unreads view");i.propTypes=a["b"].number.isRequired;var s=Object(n["b"])("increments refreshId for Unreads View");s.propTypes=null;var o=Object(n["b"])("set the thread key (channel ID-timestamp) to focus");o.propTypes=a["b"].string},function(e,t,r){"use strict";r.d(t,"a",function(){return c});var a=r(3);var n=r.n(a);var i=r(0);var s=r(29);var o=r(25);var l=r(332);var c=Object(o["a"])("Adds a reminder for a message via API call",function(e,t,r){var a=l["a"].generateAndEnqueue();var i=n()({},r,{client_token:a});return e(Object(s["a"])({method:"reminders.addFromMessage",args:i}))});c.propTypes={time:i["b"].oneOf(["In 20 minutes","In 1 hour","In 3 hours","Tomorrow","Next week","Custom"]).isRequired,message_channel:i["b"].string.isRequired,message_ts:i["b"].string.isRequired,respond_in_channel:i["b"].bool}},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(2);var f=r.n(h);var b=r(87);var g=r(384);var _=r(39);var y=r(67);var O=r(41);var k=r(4);var E=r(85);var j=r(10);var C=r(1838);var S=r(84);var w=r(4537);var I=r(55);var T=r(48);var A=new j["b"]("msg_edit");var N={ts:v["b"].string.isRequired,channelId:v["b"].string.isRequired,messageExists:v["b"].bool,subtype:v["b"].string,removeMessage:v["b"].func,hasFile:v["b"].bool,fileMode:v["b"].string,rollup:b["a"].Rollup(),useBulkDelete:v["b"].bool,closeModal:v["b"].func};var P={messageExists:true,removeMessage:h["noop"],subtype:void 0,hasFile:false,fileMode:void 0,rollup:void 0,useBulkDelete:false,closeModal:h["noop"]};var R=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"componentDidMount",value:function e(){this.maybeCloseModal()}},{key:"componentDidUpdate",value:function e(){this.maybeCloseModal()}},{key:"onGo",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.removeMessage,i=t.useBulkDelete,s=t.rollup;var o=i?Object(h["reduce"])(s,function(e,t){return e.concat(t.timestamps)},[]):[];o.sort();n({channelId:a,ts:r,rollupTimestamps:i&&o?o:[]}).catch(h["noop"])}},{key:"getBodyText",value:function e(){var t=this.props.subtype;if(!t)return null;var r=this.getFileLabel();if("file_upload"===t){if("file"===r)return A.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===r)return A.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===r)return A.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===t){if("file"===r)return A.t("Note that deleting this message will not unshare the file.");if("snippet"===r)return A.t("Note that deleting this message will not unshare the snippet.");if("post"===r)return A.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===t)return A.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function e(){var t=this.props,r=t.hasFile,a=t.fileMode;if(!r)return null;if("snippet"===a)return"snippet";if("post"===a)return"post";return"file"}},{key:"maybeCloseModal",value:function e(){this.props.messageExists||this.props.closeModal()}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.rollup,i=t.useBulkDelete,s=t.messageExists;if(!s)return null;var o=this.getBodyText();return p.a.createElement(g["a"],{id:_["MESSAGE_CONTAINERS"].DELETE_MSG_DIALOG},p.a.createElement(S["a"],{title:A.t("Delete message"),goButtonText:A.t("Delete"),goButtonType:"danger",onGo:this.onGo},A.t("Are you sure you want to delete this message? This cannot be undone."),o&&p.a.createElement("div",{className:"margin_top_50"},o),p.a.createElement("div",{className:"margin_top_100"},p.a.createElement(w["a"],{ts:r,channelId:a,rollup:i&&n?n:null,blocksContainerContext:I["a"].delete_dialog,isStandalone:true}))))}}]);return t}(d["PureComponent"]);R.displayName="BaseDeleteMessageDialog";R.defaultProps=P;var M=function e(t,r){var a=r.channelId,n=r.ts,i=r.rollup;var s=Object(k["isFeatureEnabled"])(t,"feature_allow_bulk_delete_join_leave_messages");var o=Object(y["a"])(t,a,n);if(!o)return{messageExists:false};var l=o.files;var c=Object(E["getFileById"])(t,Object(h["first"])(l));var u=false;var d=void 0;if(c){u=true;d=c.mode}var p=!!(s&&i);return{messageExists:true,hasFile:u,fileMode:d,subtype:Object(O["getMessageSubtype"])(o),rollup:i,useBulkDelete:p}};var x={removeMessage:function e(){return C["a"].apply(void 0,arguments)},closeModal:function e(){return T["closeModal"].apply(void 0,arguments)}};var D=Object(m["connect"])(M,x)(R);D.propTypes={channelId:v["b"].string.isRequired,ts:v["b"].string.isRequired};t["a"]=D},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(2);var f=r.n(h);var b=r(11);var g=r(10);var _=r(19);var y=r(1838);var O=r(84);var k=r(4537);var E=new g["b"]("msg_edit");var j={ts:v["b"].string.isRequired,channelId:v["b"].string.isRequired,channelType:v["b"].string,removeMessage:v["b"].func};var C={channelType:void 0,removeMessage:h["noop"]};var S=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.removeMessage;n({channelId:a,ts:r,broadcastDelete:true}).catch(h["noop"])}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.channelType;var i=void 0;var s=void 0;if("channel"===n){i=E.t("Remove from channel");s=E.t("Are you sure you want to remove this message from the channel?")}else{i=E.t("Remove from conversation");s=E.t("Are you sure you want to remove this message from the conversation?")}return p.a.createElement(O["a"],{title:i,goButtonText:E.t("Remove message"),onGo:this.onGo},p.a.createElement("div",{className:"margin_bottom_100"},s,E.t("The original reply will still be visible in its thread.")),p.a.createElement(k["a"],{ts:r,channelId:a,isStandalone:true}))}}]);return t}(d["PureComponent"]);S.displayName="BaseRemoveBroadcastDialog";S.defaultProps=C;var w=function e(t,r){var a=r.channelId;var n=Object(_["d"])(t,a);var i=Object(b["getChannelType"])(n);return{channelType:i}};var I={removeMessage:y["a"]};var T=Object(m["connect"])(w,I)(S);T.propTypes={channelId:v["b"].string.isRequired};t["a"]=T},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(13);var _=r(1700);var y=r(68);var O=r(208);var k=r(21);var E=r(3215);var j=r.n(E);var C={channelId:b["b"].string,threadTs:b["b"].string,viewContext:b["b"].string,disableFileUploadsPref:b["b"].string,forwardedRef:b["b"].object,openFileUploadDialog:b["b"].func,onFilesSelectedHandler:b["b"].func,multiple:b["b"].bool};var S={channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:v["noop"],onFilesSelectedHandler:null,multiple:true};var w=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onFilesSelected=r.onFilesSelected.bind(r);return r}l()(t,[{key:"onFilesSelected",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.viewContext,i=t.forwardedRef,s=t.onFilesSelectedHandler;var o={fileUploadAction:k["m"].PLUS_MENU,fileUploadSrc:k["n"].LOCAL};var l=i.current.files;var c=Object(v["map"])(l);if(s)s(c);else{var u=Object(O["a"])({viewContext:n,channelId:r,threadTs:a});this.props.openFileUploadDialog({files:c,initialChannelId:r,threadTs:a,inputProxy:u,metadata:o})}i.current.value=""}},{key:"render",value:function e(){var t=this.props,r=t.disableFileUploadsPref,a=t.forwardedRef,i=t.multiple;var s="disable_all_except_images"===r;var o={};s&&(o.accept="image/*");return f.a.createElement("input",n()({type:"file",className:"p-hidden_file_input",multiple:i,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},o,{ref:a,onClick:this.onClick,onChange:this.onFilesSelected}))}}]);return t}(h["Component"]);w.displayName="HiddenFileInput";w.defaultProps=S;function I(e){return{disableFileUploadsPref:Object(y["a"])(e,"disable_file_uploads")}}function T(e){return{openFileUploadDialog:function t(){return e(_["a"].apply(void 0,arguments))}}}var A=Object(g["connect"])(I,T)(w);t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(A,n()({},e,{forwardedRef:t}))})},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(2);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(13);var b=r(4);var g=r(10);var _=r(16);var y=r.n(_);var O=r(19);var k=r(11);var E=r(109);var j=r(22);var C=r(3267);var S=r.n(C);var w=new g["b"]("threads");var I=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={spriteLoaded:false};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=new Image;this.spritePromise=new Promise(function(e){r.onload=function(){e()};r.src=cdn_url+"/a7c8f/img/dragdrop_threads_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,r=t.featureAnnounceOnly,a=t.userCanThread,n=t.useNightIllustration;var i=this.state.spriteLoaded;var s=false;if(Object(d["isBoolean"])(n))s=n;else{var o=new Date;var l=o.getHours();s=l>=20||l<8}var c=y()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!s});var u="";r&&!a?u=m.a.createElement("div",{className:"p-thread_drag_overlay__anim--readonly"},m.a.createElement("div",{className:"p-thread_drag_overlay__anim_circle"}),m.a.createElement(j["b"],{type:"emoji-objects",className:"p-thread_drag_overlay__anim_readonly",inline:true})):i&&(u=m.a.createElement("div",{className:"p-thread_drag_overlay__anim"},m.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),m.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),m.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var p=r&&!a?w.t("Read-only"):w.t("Upload to thread");var v=w.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately');var h=r&&!a?w.t("Only selected team members can post in this thread."):v;return m.a.createElement("div",{className:c},m.a.createElement("div",{className:"p-thread_drag_overlay__info"},u,m.a.createElement("div",{className:"p-thread_drag_overlay__title"},p),m.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},h)))}}]);return t}(v["PureComponent"]);I.displayName="DragOverlay";I.defaultProps={featureAnnounceOnly:false,useNightIllustration:void 0};function T(e){var t=Object(E["getCurrentThreadKey"])(e);var r=Object(E["decodeThreadKey"])(t),a=r.channelId;var n=Object(O["d"])(e,a);return{featureAnnounceOnly:Object(b["isFeatureEnabled"])(e,"feature_announce_only"),userCanThread:Object(k["canThread"])(e,n)}}t["a"]=Object(f["connect"])(T)(I)},,,,,function(e,t,r){"use strict";var a=r(10);var n=new a["b"]("files_types");t["a"]={applescript:{mimeType:"text/applescript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("AppleScript"):""}},c:{mimeType:"text/x-csrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("C"):""},loader:function e(){return Promise.all([r.e(411),r.e(413)]).then(r.t.bind(null,4218,7))}},cfm:{mimeType:"text/plain",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("ColdFusion"):""}},clojure:{mimeType:"text/x-clojure",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Clojure"):""},loader:function e(){return Promise.all([r.e(411),r.e(415)]).then(r.t.bind(null,4222,7))}},coffeescript:{mimeType:"text/x-coffeescript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("CoffeeScript"):""},loader:function e(){return Promise.all([r.e(411),r.e(416)]).then(r.t.bind(null,4223,7))}},cpp:{mimeType:"text/x-c++src",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("C++"):""},loader:function e(){return Promise.all([r.e(411),r.e(413)]).then(r.t.bind(null,4218,7))}},crystal:{mimeType:"text/x-crystal",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Crystal"):""},loader:function e(){return Promise.all([r.e(411),r.e(418)]).then(r.t.bind(null,4224,7))}},csharp:{mimeType:"text/x-csharp",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("C#"):""},loader:function e(){return Promise.all([r.e(411),r.e(413)]).then(r.t.bind(null,4218,7))}},css:{mimeType:"text/css",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("CSS"):""},loader:function e(){return Promise.all([r.e(411),r.e(412)]).then(r.t.bind(null,4217,7))}},cypher:{mimeType:"application/x-cypher-query",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Cypher"):""},loader:function e(){return Promise.all([r.e(411),r.e(419)]).then(r.t.bind(null,4225,7))}},csv:{mimeType:"text/csv",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("CSV"):""}},d:{mimeType:"text/x-d",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("D"):""},loader:function e(){return Promise.all([r.e(411),r.e(420)]).then(r.t.bind(null,4226,7))}},dart:{mimeType:"text/x-dart",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Dart"):""},loader:function e(){return Promise.all([r.e(411),r.e(413),r.e(421)]).then(r.t.bind(null,4227,7))}},diff:{mimeType:"text/x-diff",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Diff"):""},loader:function e(){return Promise.all([r.e(411),r.e(422)]).then(r.t.bind(null,4228,7))}},dockerfile:{mimeType:"text/x-dockerfile",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Docker"):""},loader:function e(){return Promise.all([r.e(411),r.e(423)]).then(r.t.bind(null,4229,7))}},erlang:{mimeType:"text/x-erlang",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Erlang"):""},loader:function e(){return Promise.all([r.e(411),r.e(424)]).then(r.t.bind(null,4230,7))}},fortran:{mimeType:"text/x-fortran",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Fortran"):""},loader:function e(){return Promise.all([r.e(411),r.e(425)]).then(r.t.bind(null,4231,7))}},fsharp:{mimeType:"text/x-fsharp",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("F#"):""},loader:function e(){return Promise.all([r.e(411),r.e(436)]).then(r.t.bind(null,4232,7))}},gherkin:{mimeType:"text/x-feature",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Gherkin"):""},loader:function e(){return Promise.all([r.e(411),r.e(426)]).then(r.t.bind(null,4233,7))}},go:{mimeType:"text/x-go",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Go"):""},loader:function e(){return Promise.all([r.e(411),r.e(427)]).then(r.t.bind(null,4234,7))}},groovy:{mimeType:"text/x-groovy",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Groovy"):""},loader:function e(){return Promise.all([r.e(411),r.e(428)]).then(r.t.bind(null,4235,7))}},handlebars:{mimeType:"text/x-handlebars-template",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Handlebars"):""},loader:function e(){return Promise.all([r.e(411),r.e(429)]).then(r.t.bind(null,4236,7))}},haskell:{mimeType:"text/x-haskell",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Haskell"):""},loader:function e(){return Promise.all([r.e(411),r.e(430)]).then(r.t.bind(null,4237,7))}},haxe:{mimeType:"text/x-haxe",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Haxe"):""},loader:function e(){return Promise.all([r.e(411),r.e(431)]).then(r.t.bind(null,4238,7))}},html:{mimeType:"text/html",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("HTML"):""},loader:function e(){return Promise.all([r.e(411),r.e(412),r.e(414),r.e(432)]).then(r.t.bind(null,4219,7))}},java:{mimeType:"text/x-java",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Java"):""},loader:function e(){return Promise.all([r.e(411),r.e(413)]).then(r.t.bind(null,4218,7))}},javascript:{mimeType:"text/javascript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("JavaScript/JSON"):""},loader:function e(){return Promise.all([r.e(411),r.e(414),r.e(387)]).then(r.t.bind(null,3375,7))}},jsx:{mimeType:"text/jsx",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("JSX"):""},loader:function e(){return Promise.all([r.e(411),r.e(414),r.e(387)]).then(r.t.bind(null,4621,7))}},julia:{mimeType:"text/x-julia",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Julia"):""},loader:function e(){return Promise.all([r.e(411),r.e(433)]).then(r.t.bind(null,4239,7))}},kotlin:{mimeType:"text/x-kotlin",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Kotlin"):""},loader:function e(){return Promise.all([r.e(411),r.e(413)]).then(r.t.bind(null,4218,7))}},latex:{mimeType:"text/x-stex",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("LaTeX/sTeX"):""},loader:function e(){return Promise.all([r.e(411),r.e(451)]).then(r.t.bind(null,4240,7))}},lisp:{mimeType:"text/x-lisp",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Lisp"):""},loader:function e(){return Promise.all([r.e(411),r.e(417)]).then(r.t.bind(null,4241,7))}},lua:{mimeType:"text/x-lua",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Lua"):""},loader:function e(){return Promise.all([r.e(411),r.e(434)]).then(r.t.bind(null,4242,7))}},markdown:{mimeType:"text/x-markdown",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Markdown (raw)"):""},loader:function e(){return Promise.all([r.e(411),r.e(459)]).then(r.t.bind(null,4243,7))}},mathematica:{mimeType:"text/x-mathematica",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Mathematica"):""},loader:function e(){return Promise.all([r.e(411),r.e(435)]).then(r.t.bind(null,4244,7))}},matlab:{mimeType:"text/x-octave",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("MATLAB"):""},loader:function e(){return Promise.all([r.e(411),r.e(438)]).then(r.t.bind(null,4245,7))}},mumps:{mimeType:"text/x-mumps",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("MUMPS"):""},loader:function e(){return Promise.all([r.e(411),r.e(437)]).then(r.t.bind(null,4246,7))}},objc:{mimeType:"text/x-objectivec",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Objective-C"):""},loader:function e(){return Promise.all([r.e(411),r.e(413)]).then(r.t.bind(null,4218,7))}},ocaml:{mimeType:"text/x-ocaml",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("OCaml"):""},loader:function e(){return Promise.all([r.e(411),r.e(436)]).then(r.t.bind(null,4232,7))}},pascal:{mimeType:"text/x-pascal",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Pascal"):""},loader:function e(){return Promise.all([r.e(411),r.e(439)]).then(r.t.bind(null,4247,7))}},perl:{mimeType:"text/x-perl",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Perl"):""},loader:function e(){return Promise.all([r.e(411),r.e(460)]).then(r.t.bind(null,4248,7))}},php:{mimeType:"application/x-httpd-php",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("PHP"):""},loader:function e(){return Promise.all([r.e(411),r.e(412),r.e(414),r.e(413),r.e(463)]).then(r.t.bind(null,4249,7))}},pig:{mimeType:"text/x-pig",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Pig"):""},loader:function e(){return Promise.all([r.e(411),r.e(440)]).then(r.t.bind(null,4250,7))}},powershell:{mimeType:"text/x-powershell",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("PowerShell"):""},loader:function e(){return Promise.all([r.e(411),r.e(441)]).then(r.t.bind(null,4251,7))}},puppet:{mimeType:"text/x-puppet",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Puppet"):""},loader:function e(){return Promise.all([r.e(411),r.e(442)]).then(r.t.bind(null,4252,7))}},python:{mimeType:"text/x-python",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Python"):""},loader:function e(){return Promise.all([r.e(411),r.e(443)]).then(r.t.bind(null,4253,7))}},r:{mimeType:"text/x-rsrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("R"):""},loader:function e(){return Promise.all([r.e(411),r.e(444)]).then(r.t.bind(null,4254,7))}},ruby:{mimeType:"text/x-ruby",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Ruby"):""},loader:function e(){return Promise.all([r.e(411),r.e(445)]).then(r.t.bind(null,4255,7))}},rust:{mimeType:"text/x-rustsrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Rust"):""},loader:function e(){return Promise.all([r.e(411),r.e(446)]).then(r.t.bind(null,4256,7))}},sass:{mimeType:"text/x-sass",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Sass"):""},loader:function e(){return Promise.all([r.e(411),r.e(412),r.e(447)]).then(r.t.bind(null,4257,7))}},scala:{mimeType:"text/x-scala",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Scala"):""},loader:function e(){return Promise.all([r.e(411),r.e(413)]).then(r.t.bind(null,4218,7))}},scheme:{mimeType:"text/x-scheme",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Scheme"):""},loader:function e(){return Promise.all([r.e(411),r.e(448)]).then(r.t.bind(null,4258,7))}},shell:{mimeType:"text/x-sh",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Shell"):""},loader:function e(){return Promise.all([r.e(411),r.e(449)]).then(r.t.bind(null,4259,7))}},smalltalk:{mimeType:"text/x-stsrc",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Smalltalk"):""},loader:function e(){return Promise.all([r.e(411),r.e(450)]).then(r.t.bind(null,4260,7))}},sql:{mimeType:"text/x-sql",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("SQL"):""},loader:function e(){return Promise.all([r.e(411),r.e(462)]).then(r.t.bind(null,4261,7))}},swift:{mimeType:"text/x-swift",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Swift"):""},loader:function e(){return Promise.all([r.e(411),r.e(452)]).then(r.t.bind(null,4262,7))}},tsv:{mimeType:"text/tab-separated-values",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("TSV"):""}},typescript:{mimeType:"text/typescript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("TypeScript"):""},loader:function e(){return Promise.all([r.e(411),r.e(414),r.e(387)]).then(r.t.bind(null,3375,7))}},tsx:{mimeType:"text/typescript-jsx",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("TSX"):""},loader:function e(){return Promise.all([r.e(411),r.e(414),r.e(387)]).then(r.t.bind(null,4621,7))}},vb:{mimeType:"text/x-vb",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("VB.NET"):""},loader:function e(){return Promise.all([r.e(411),r.e(453)]).then(r.t.bind(null,4263,7))}},vbscript:{mimeType:"text/vbscript",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("VBScript"):""},loader:function e(){return Promise.all([r.e(411),r.e(454)]).then(r.t.bind(null,4264,7))}},velocity:{mimeType:"text/x-velocity",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Velocity"):""},loader:function e(){return Promise.all([r.e(411),r.e(455)]).then(r.t.bind(null,4265,7))}},verilog:{mimeType:"text/x-verilog",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("Verilog"):""},loader:function e(){return Promise.all([r.e(411),r.e(456)]).then(r.t.bind(null,4266,7))}},xml:{mimeType:"text/xml",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("XML"):""},loader:function e(){return Promise.all([r.e(411),r.e(457)]).then(r.t.bind(null,4214,7))}},yaml:{mimeType:"text/x-yaml",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureSonicSnippets;return r?n.t("YAML"):""},loader:function e(){return Promise.all([r.e(411),r.e(458)]).then(r.t.bind(null,4267,7))}}}},,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(34);var f=r(4);var b=r(10);var g=r(773);var _=r(220);var y=r(923);var O=r(795);var k=r(2);var E=r(865);var j=r(20);var C=Object(j["b"])("TS.ui.comments.startDelete");var S=r(22);var w=r(66);var I=r(128);var T=new b["b"]("comments");var A={isStarred:v["b"].bool,updateStar:v["b"].func,commentId:v["b"].string,fileId:v["b"].string,featureReactThreads:v["b"].bool};var N={isStarred:false,updateStar:k["noop"],commentId:void 0,fileId:void 0,featureReactThreads:false};var P=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);r.toggleStar=r.toggleStar.bind(r);r.deleteComment=r.deleteComment.bind(r);return r}s()(t,[{key:"toggleStar",value:function e(){var t=this.props,r=t.commentId,a=t.fileId,n=t.isStarred;if(!r||!a)return;this.props.updateStar(!n,{file_comment:r,file_comment_file:a})}},{key:"deleteComment",value:function e(){var t=this.props,r=t.commentId,a=t.fileId;if(!r||!a)return;C(a,r)}},{key:"renderMenu",value:function e(t){if(!this.props.featureReactThreads)return null;var r=this.props.isStarred;return p.a.createElement(w["f"],t,p.a.createElement(w["b"],{label:r?T.t("Unstar this file comment"):T.t("Star this file comment"),onSelected:this.toggleStar}),p.a.createElement(w["d"],null),p.a.createElement(w["b"],{label:T.t("Delete comment"),danger:true,onSelected:this.deleteComment}))}},{key:"render",value:function e(){if(!this.props.featureReactThreads)return null;return p.a.createElement(w["e"],{renderMenu:this.renderMenu,position:"left-bottom"},p.a.createElement(I["a"],{className:"p-comment__actions","aria-label":T.t("Show more actions")},p.a.createElement(S["b"],{type:"cog",size:"inherit"})))}}]);return t}(d["PureComponent"]);P.displayName="CommentActions";P.defaultProps=N;var R=Object(m["connect"])(function(e){return{featureReactThreads:Object(f["isFeatureEnabled"])(e,"feature_react_threads")}},{updateStar:E["a"]})(P);var M=r(3172);var x=new b["b"]("comments");var D={featureReactThreads:v["b"].bool,time24:v["b"].bool,comment:v["b"].shape({id:v["b"].string,user:v["b"].string,timestamp:v["b"].number,comment:v["b"].string}).isRequired,fileId:v["b"].string};var F={featureReactThreads:false,time24:false,fileId:void 0};var L=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.comment,a=t.time24,n=t.featureReactThreads,i=t.fileId;var s=r.user,o=r.timestamp,l=r.comment,c=r.is_starred,u=r.id;return p.a.createElement("div",{className:"p-comment"},p.a.createElement("div",{className:"p-comment__header"},s?p.a.createElement(y["a"],{userId:s}):null,p.a.createElement("span",{className:"p-comment__timestamp"},x.t("{date} at {time}",{date:Object(g["a"])(o,{shortenMonth:true}),time:Object(_["a"])(o,{do24hrTime:a})})),n&&p.a.createElement(R,{isStarred:c,commentId:u,fileId:i})),p.a.createElement("div",{className:"p-comment__body"},p.a.createElement(O["a"],{text:l,memberId:s})))}}]);return t}(d["PureComponent"]);L.displayName="Comment";L.defaultProps=F;function B(e){return{featureReactThreads:Object(f["isFeatureEnabled"])(e,"feature_react_threads"),time24:Object(h["g"])(e,"time24")}}var U=t["a"]=Object(m["connect"])(B)(L)},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r(1);var h=r.n(m);var f=r(13);var b=r(16);var g=r.n(b);var _=r(0);var y=r(35);var O=r(236);var k=r(10);var E=r(28);var j=r(282);var C=r(863);var S=r(3170);var w=new k["b"]("files");var I={status:_["b"].oneOf([O["IDLE"],O["UPLOADING"],O["PROCESSING"],O["COMPLETE"],O["CANCELED"]]),fileName:_["b"].string,fileCount:_["b"].number,percentComplete:_["b"].number,cancelable:_["b"].bool,cancelUpload:_["b"].func,isRetry:_["b"].bool,teamId:_["b"].string};var T={fileName:"",fileCount:0,percentComplete:0,status:O["UPLOADING"],cancelable:false,cancelUpload:v["noop"],isRetry:false,teamId:void 0};var A=function(e){p()(t,e);u()(t,null,[{key:"renderComplete",value:function e(){var t=w.t("Processing uploaded file\u2026 complete!");return h.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},h.a.createElement("div",{className:"p-file_upload_banner__text"},t))}}]);function t(e){s()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.cancel=r.cancel.bind(r);r.clearOverrides=r.clearOverrides.bind(r);r.doneProlongingStatus=r.doneProlongingStatus.bind(r);r.state={statusOverride:null,fileNameOverride:null,timer:null,fading:false};return r}u()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=[O["COMPLETE"],O["CANCELED"]];this.props.status!==t.status&&Object(v["includes"])(a,t.status)&&this.setState(function(){return{statusOverride:t.status,fileNameOverride:t.fileName,timer:setTimeout(r.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function e(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getStatus",value:function e(){var t=this.props.status;var r=this.state.statusOverride;return r||t}},{key:"getFileName",value:function e(){var t=this.props.fileName;var r=this.state.fileNameOverride;return r||t}},{key:"cancel",value:function e(){var t=this.props.teamId;var r=this.props.cancelUpload;var a=Object(C["a"])(t);r=a.cancelCurrentUpload.bind(a);setTimeout(function(){r()},1)}},{key:"clearOverrides",value:function e(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:false}})}},{key:"doneProlongingStatus",value:function e(){var t=this;this.props.status===O["IDLE"]?this.setState(function(){return{fading:true,timer:setTimeout(t.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderMultiFileUploadComplete",value:function e(){var t=this.props.fileCount;var r=w.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:t});return h.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},h.a.createElement("div",{className:"p-file_upload_banner__text"},r))}},{key:"renderCanceled",value:function e(){var t=this.props.fileCount;var r=this.getFileName();var a=w.t("Canceling {fileName}\u2026",{fileName:Object(k["o"])(r)});t>1&&(a=w.t("Canceling upload\u2026"));return h.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},h.a.createElement("div",{className:"p-file_upload_banner__text"},a))}},{key:"renderUploading",value:function e(){var t=this.props,r=t.fileName,a=t.fileCount,n=t.percentComplete,i=t.cancelable,s=t.isRetry;var o=this.getStatus();var l=o===O["PROCESSING"]||n>=99;var c=void 0;if(l)c=w.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:a});else{if(s){c=w.t("Re-uploading {fileName}",{fileName:Object(k["o"])(r)});a>1&&(c=w.t("Re-uploading {fileCount} files",{fileCount:a}))}else{c=w.t("Uploading {fileName}",{fileName:Object(k["o"])(r)});a>1&&(c=w.t("Uploading {fileCount} files",{fileCount:a}))}c+="\u2026"+n+"%"}var u=g()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":l});var d={width:n+"%"};var p=null;i&&!l&&(p=h.a.createElement(E["c"],{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},w.t("cancel")));return[h.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},h.a.createElement("span",{className:u,style:d})),h.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},c),p]}},{key:"render",value:function e(){var t=this.getStatus();var r=this.state.fading;if(t===O["IDLE"])return null;var a=void 0;a=t===O["UPLOADING"]||t===O["PROCESSING"]?this.renderUploading():t===O["COMPLETE"]?this.renderMultiFileUploadComplete():this.renderCanceled();var n=g()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":r});return h.a.createElement("div",{className:n},a)}}]);return t}(m["PureComponent"]);A.displayName="FileUploadBanner";A.defaultProps=T;function N(e){var t=Object(O["getFileUploadState"])(e);var r=Object(y["d"])(e);return n()({},t,{teamId:r.id,cancelUpload:j["a"]})}var P=Object(f["connect"])(N)(A);var R=t["a"]=P},,,,function(e,t,r){"use strict";var a=r(0);var n=r(1);var i=r.n(n);var s=r(13);var o=r(95);var l=r(2);var c=r(16);var u=r.n(c);var d=r(4);var p=r(50);var v=r(10);var m=r(1732);var h=r(17);var f=new v["b"]("threads");var b={className:a["b"].string,participantNames:a["b"].arrayOf(a["b"].string).isRequired,replyUsersCount:a["b"].number.isRequired,replyCount:a["b"].number,prefixWithReplyCount:a["b"].bool,includesSelf:a["b"].bool,broadcastPreabmle:a["b"].bool};var g={className:void 0,replyCount:0,prefixWithReplyCount:false,includesSelf:false,broadcastPreabmle:false};function _(e){var t=e.participantNames,r=e.includesSelf,a=e.replyCount,n=e.replyUsersCount,i=e.prefixWithReplyCount,s=e.broadcastPreabmle;if(s&&1===a)return f.rt("1 reply");if(r)switch(n){case 1:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:a});return f.t("Just you");case 2:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:a,userName:t[0]});return f.rt("{userName} and you",{userName:t[0]});default:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:a,userName1:t[0],userName2:t[1]});return f.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(v["g"])(t,{noEscape:true}).join("");if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:a,names:o});return o}function y(e){var t=e.participantNames,r=e.replyUsersCount,a=e.replyCount,n=e.prefixWithReplyCount;var s=r-2;var o=Object(l["drop"])(t,2);o.length<s&&o.push(f.rt("others"));var c=Object(v["g"])(o,{noEscape:true}).join("");if(n)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:a,userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(p["c"],{tip:c},i.a.createElement("span",null,t))});return f.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(p["c"],{tip:c},i.a.createElement("span",null,t))})}function O(e){var t=e.className,r=e.participantNames,a=e.replyUsersCount,n=e.replyCount,s=e.prefixWithReplyCount,o=e.includesSelf,l=e.broadcastPreabmle;if(0===a)return null;var c=u()("p-thread_participant_list",t);return i.a.createElement("span",{className:c,"data-qa":"thread_participant_list"},a<=3?_({participantNames:r,replyCount:n,replyUsersCount:a,prefixWithReplyCount:s,includesSelf:o,broadcastPreabmle:l}):y({participantNames:r,replyCount:n,replyUsersCount:a,prefixWithReplyCount:s}))}O.displayName="ThreadParticipantList";O.defaultProps=g;var k=Object(o["pure"])(O);function E(e,t){var r=t.replyUsers;var a=t.replyUsersCount;var n=Object(d["getCurrentUserId"])(e);var i=Object(l["includes"])(r,n);var s=Object(l["includes"])(r,h["REVOKED_ID"]);var o=Object(m["a"])(e,r);a||(a=r.length);return{participantNames:s?Object(l["reject"])(o,function(e){return e===h["REVOKED_USER_NAME"]}):o,replyUsersCount:s?a-1:a,includesSelf:i}}var j=Object(s["connect"])(E)(O);var C=t["a"]=j},,function(e,t,r){"use strict";var a=r(15);var n=r(198);var i=r(200);var s=r(434);var o=r(0);var l=r(2);var c=r(45);var u=r(273);var d=r(196);var p=r(1571);var v=Object(a["b"])("Clog clicks on a message or file using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.suggestion;var i=t();var o=e(Object(s["getSearchSessionId"])());var v=e(Object(s["getQuerySessionId"])());var m=Object(n["getSearchAutocompleteSuggestions"])(i);var h=Object(n["getSearchAutocompleteSelectedIndex"])(i);var f=Object(l["tail"])(m).map(function(e){return e.featureVector});f=m.map(function(e){return e.featureVector});var b=Object(c["a"])({state:i});var g=Object(u["getSearchInputBoxUserQuery"])(i);var _=g?g.length:0;var y=Object(d["h"])(i);-1===h?b.track("SEARCH_AUTOCOMPLETE_REJECT",{feature_vector_list:f,request_id:Object(p["a"])(i),search_session_id:o,client_request_id:v,query_length:_,open_method:y}):b.track("SEARCH_AUTOCOMPLETE_ACCEPT",{accept_module_name:"results_unified",accept_module_length:m.length,accept_item_offset:h,feature_vector_list:f,suggestion_type:a.type,is_navigational:a.is_type_navigational,navigation_model_id:a.id,request_id:Object(p["a"])(i),search_session_id:o,client_request_id:v,query_length:_,open_method:y})});v.propTypes={suggestion:o["b"].object.isRequired};var m=v;var h=r(173);var f=r(1087);var b=r(1065);var g=r(716);var _=r(100);var y=r(308);var O=r(758);var k=r(12);var E=r(145);var j=r(202);var C=r(531);var S=r(168);var w=r(316);var I=r(1694);var T=r(11);var A=r(17);var N=r(38);var P=r(704);var R=r(443);var M=r(570);var x=r(930);var D=r(1446);var F=r(1319);var L=r(1163);var B=r(23);var U=r(886);var q=r(278);var G=r(31);var H=r(568);var W=r(4);var V=r(156);var K=r(19);var z=r(27);var Q=r(872);var Y=r(258);var J=r(433);var X=r(24);var Z=r(435);r.d(t,"a",function(){return ie});var $={},ee=$.fetchAuthAndReturnToUrl;var te={},re=te.getWorkspacesMeta,ae=te.isWorkspaceExpired;var ne="IMPROVED_SEARCH";var ie=Object(a["b"])("Accept the selected (or 0th) search autocomplete suggestion",function(e,t){Object(k["a"])({getState:t}).info(ne,"Accepted search query");var r=t();var a=Object(n["getSearchAutocompleteSelectedIndex"])(r)||0;var o=Object(n["getSearchAutocompleteSuggestions"])(r)[a];if(!o)return;e(m({suggestion:o}));if(o.is_type_query_completion){var l=Object(i["g"])(o.suggestion_replacement);var c=Object(i["g"])(o.suggestion_replacement_for_request);Object(k["a"])({getState:t}).info(ne,"Accepting query suggestion");e(Object(h["setEditableRequestQueryThenRequest"])({query:c}));e(Object(s["setSearchSessionLastQuery"])({query:c}));e(Object(u["setSearchInputBoxDisplayQuery"])({displayQuery:l}));if(Object(C["a"])(r)){e(Object(n["closeSearchAutocomplete"])());Object(S["n"])("Vsearch")}else e(Object(b["a"])({interfaceMode:g["a"].SEARCH_RESULTS}))}else if(o.is_type_navigational){if(o.is_type_file){Object(k["a"])({getState:t}).info(ne,"Navigating to file. file: "+o.file.id);e(Object(_["c"])({fileId:o.file.id}))}else{Object(k["a"])({getState:t}).info(ne,"Navigating to model: id: "+o.id);if(Object(E["a"])(o.id))if(Object(N["a"])()){var d=Object(X["b"])(r);se(o.id)?Object(q["c"])(U["a"],{teamId:o.id},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"}):Object(Z["b"])()?oe(e,t,d,o.id):le(e,t,d,o.id)}else if(Object(P["a"])())Object(j["o"])(o.id);else{var p=o.team.url||Object(G["getTeamUrl"])(o.team);Object(H["a"])(p)}else if(o.channel&&Object(T["isFromAnotherTeam"])(o.channel)){var v=o.channel.id;var A=Object(L["a"])({state:r,channel:o.channel,currentTeamId:Object(B["b"])(r)})||Object(T["teamIdForChannelFromAnotherTeam"])(r,o.channel);if(Object(N["a"])()){var z=Object(X["b"])(r);se(A)?e(Object(w["a"])({id:v,teamId:A})):Object(Z["b"])()?oe(e,t,z,A,v):le(e,t,z,A,v)}else e(Object(I["a"])({teamId:A,channelId:v}))}else if(o.channel&&Object(T["legacyIsFromAnotherTeam"])(r,o.channel)){var Q=o.channel.team_id;var Y=o.channel.id;Object(N["a"])()?e(Object(w["a"])({id:Y,teamId:Q})):e(Object(I["a"])({teamId:Q,channelId:Y}))}else if("Vapp_space"===o.id){var J=Object(W["isFeatureEnabled"])(t(),"feature_m11n_apps_browser");J?e(Object(D["a"])()):Object(x["a"])()}else{var $=void 0;Object(V["a"])(o.id)&&($=Object(K["k"])(r,o.id));e(Object(y["a"])({id:$||o.id}))}var ee=o.channel||o.member||{id:o.id};var te=Object(u["getSearchInputBoxUserQuery"])(r);Object(F["a"])(r)?e(Object(R["c"])({id:ee.id,text:te})):Object(M["c"])(ee,te)}e(Object(f["a"])({textyString:""}));e(Object(O["a"])());e(Object(n["closeSearchAutocomplete"])())}});ie.propTypes={};function se(e){var t=Object(z["b"])().getState();var r=re(t);return!!(r[e]&&!ae(t,e))}function oe(e,t,r,a,n){if(Object(A["isMemberOnTeam"])(r,a))return ee("/"+Object(J["b"])()+"/"+a+"/"+(n||""));Object(Q["d"])(false);return e(Object(Y["c"])({teamId:a})).catch(function(e){if(e.data&&"user_already_team_member"===e.data.error)return;throw e}).then(function(){ee("/"+Object(J["b"])()+"/"+a+"/"+(n||""))}).catch(function(e){Object(k["a"])({getState:t}).error("Unable to join team "+a+": "+e);Object(Q["d"])(true)})}function le(e,t,r,a,n){if(Object(A["isMemberOnTeam"])(r,a))return Promise.resolve(ce(e,a,n));Object(Q["d"])(false);return e(Object(Y["c"])({teamId:a})).catch(function(e){if(e.data&&"user_already_team_member"===e.data.error)return;throw e}).then(function(){ce(e,a,n)}).catch(function(e){Object(k["a"])({getState:t}).error("Unable to join team "+a+": "+e)}).finally(function(){return Object(Q["d"])(true)})}function ce(e,t,r){r?e(Object(w["a"])({id:r,teamId:t})):Object(q["c"])(U["a"],{teamId:t},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"})}},,,,,,,function(e,t,r){"use strict";r.r(t);r.d(t,"setShouldLogAppBootMetrics",function(){return p});r.d(t,"setShouldLogTeamSwitchMetrics",function(){return v});r.d(t,"setShouldLogTTVMetrics",function(){return m});r.d(t,"setShouldLogTTUMetrics",function(){return h});r.d(t,"shouldLogAppBootMetrics",function(){return g});r.d(t,"shouldLogTeamSwitchMetrics",function(){return _});r.d(t,"shouldLogTTUMetrics",function(){return y});r.d(t,"shouldLogTTVMetrics",function(){return O});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d;var p=Object(l["b"])("Have we already sent boot metrics");p.propTypes=o["b"].bool.isRequired;var v=Object(l["b"])("Should we log team switch metrics");v.propTypes=o["b"].bool.isRequired;var m=Object(l["b"])("Set whether we should continue logging time to visible metrics");m.propTypes=o["b"].bool.isRequired;var h=Object(l["b"])("Set whether we should continue logging time to usable metrics");h.propTypes=o["b"].bool.isRequired;var f={shouldLogAppBootMetrics:true,shouldLogTeamSwitchMetrics:false,shouldLogTTVMetrics:true,shouldLogTTUMetrics:true};var b=Object(c["b"])((d={},n()(d,p,function(e,t){return s()({},e,{shouldLogAppBootMetrics:t})}),n()(d,v,function(e,t){return s()({},e,{shouldLogTeamSwitchMetrics:t})}),n()(d,m,function(e,t){return s()({},e,{shouldLogTTVMetrics:t})}),n()(d,h,function(e,t){return s()({},e,{shouldLogTTUMetrics:t})}),d),f,{persistenceEnabled:true});b.propTypes={shouldLogAppBootMetrics:o["b"].bool,shouldLogTeamSwitchMetrics:o["b"].bool,shouldLogTTVMetrics:o["b"].bool,shouldLogTTUMetrics:o["b"].bool};t["default"]=b;var g=Object(u["b"])(function(e){return e&&e.telemetry&&e.telemetry.shouldLogAppBootMetrics});var _=Object(u["b"])(function(e){return e&&e.telemetry&&e.telemetry.shouldLogTeamSwitchMetrics});var y=Object(u["b"])(function(e){return e&&e.telemetry&&e.telemetry.shouldLogTTUMetrics});var O=Object(u["b"])(function(e){return e&&e.telemetry&&e.telemetry.shouldLogTTVMetrics})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var a=r(2160);function n(e,t){var r=null==e?0:e.length;return!!r&&a(e,t,0)>-1}e.exports=n},function(e,t,r){},function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length,n=Array(a);while(++r<a)n[r]=t(e[r],r,e);return n}e.exports=r},function(e,t,r){"use strict";r.d(t,"c",function(){return d});r.d(t,"b",function(){return m});var a=r(5);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(0);var l=r(18);var c=r(36);var u=r(14);var d=Object(l["b"])("Set the opened_this_session prop for a channel");d.propTypes={channelId:o["b"].string.isRequired,openedThisSession:o["b"].bool.isRequired};var p={};var v=Object(c["b"])(n()({},d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.openedThisSession;if(e.channelId===a)return e;return s()({},e,n()({},r,a))}),p,{persistenceEnabled:false});v.propTypes=o["b"].objectOf(o["b"].bool);t["a"]=v;var m=Object(u["b"])(function(e,t){return e&&e.channelsMeta&&e.channelsMeta.openedThisSession&&e.channelsMeta.openedThisSession[t]})},function(e,t,r){"use strict";var a=r(58);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(13);var l=r(42);var c=r(0);var u=r(4271);var d=r(781);var p=r(4);var v=r(73);var m=r(269);var h=r(109);var f=r(51);var b=r(164);var g=r(30);var _=r(10);var y=r(38);var O=r(134);var k=r(906);var E=r(1656);var j=r.n(E);var C=new _["b"]("ms");var S=6e4;var w=1e4;var I={currentThreadKey:c["b"].string,featureSonicDegradedBanner:c["b"].bool.isRequired,primaryView:c["b"].string.isRequired,reconnectImmediately:c["b"].func.isRequired,requestOfflineCounts:c["b"].func.isRequired,requestOfflineHistory:c["b"].func.isRequired};var T={currentThreadKey:void 0};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.currentThreadKey,r=e.featureSonicDegradedBanner,a=e.primaryView,o=e.reconnectImmediately,c=e.requestOfflineCounts,u=e.requestOfflineHistory;var d=Object(i["useRef"])();var p=Object(i["useRef"])();var v=Object(i["useState"])(),m=n()(v,2),_=m[0],E=m[1];var j=Object(i["useState"])(false),I=n()(j,2),T=I[0],A=I[1];Object(i["useEffect"])(function(){N();var e=setInterval(P,S);return function(){clearInterval(e);clearTimeout(p.current)}},[]);function N(){d.current=Date.now()}function P(){E(Object(b["q"])(d.current/1e3))}function R(){if(!r)return null;if(l["isDesktop"]){if(_)return C.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:_});return C.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages")}if(Object(g["isMac"])()){if(_)return C.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:_});return C.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages")}if(_)return C.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:_});return C.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages")}function M(){A(true);p.current=setTimeout(function(){A(false)},w)}function x(){var e=[];(Object(O["a"])(a)||a===k["a"].allThreads)&&e.push(u({channelId:a}));if(t){var r=Object(h["decodeThreadKey"])(t),n=r.channelId,i=r.threadTs;e.push(u({channelId:n,threadTs:i}))}e.push(c());o();return Promise.all(e)}function D(e){e&&e.preventDefault&&e.preventDefault();M();x().then(function(){N();E()})}function F(e){var t=e.tag,r=e.text;if("a"===t)return s.a.createElement(f["a"],{className:"p-message_pane__degraded_banner__reload_cta",onClick:D,"data-qa":"connecting_banner_cta"},r);return s.a.createElement("div",{className:"p-message_pane__degraded_banner__banner_text"},r)}if(!r||!Object(y["a"])()||T)return null;var L=void 0;L=_?C.rt("<div>Last updated {timeAgo}\u2026</div><a>Load new messages</a>",{timeAgo:_},F):C.rt("<div>Last updated less than a minute ago\u2026</div><a>Load new messages</a>",null,F);return s.a.createElement("div",{className:"p-message_pane__degraded_banner p-message_pane__banner"},L,s.a.createElement("div",{"aria-live":"assertive",className:"offscreen"},R()))}A.displayName="DegradedBanner";A.defaultProps=T;var N=function e(t){return{currentThreadKey:Object(h["getCurrentThreadKey"])(t),featureSonicDegradedBanner:Object(p["isFeatureEnabled"])(t,"feature_sonic_degraded_banner"),primaryView:Object(v["a"])(t)}};var P=function e(t){return{reconnectImmediately:function e(){return t(m["reconnectImmediately"].apply(void 0,arguments))},requestOfflineCounts:function e(){return t(u["a"].apply(void 0,arguments))},requestOfflineHistory:function e(){return t(d["a"].apply(void 0,arguments))}}};t["a"]=Object(o["connect"])(N,P)(A);var R={TIME_AGO_MESSAGE_INTERVAL_MS:S,HIDE_ON_RECONNECT_DURATION_MS:w}},function(e,t,r){var a=r(1030),n=r(524);var i=a(n,"Set");e.exports=i},function(e,t,r){var a=r(1235),n=r(2181),i=r(2182),s=r(2183),o=r(2184),l=r(2185);function c(e){var t=this.__data__=new a(e);this.size=t.size}c.prototype.clear=n;c.prototype["delete"]=i;c.prototype.get=s;c.prototype.has=o;c.prototype.set=l;e.exports=c},function(e,t,r){var a=r(2186),n=r(682);function i(e,t,r,s,o){if(e===t)return true;if(null==e||null==t||!n(e)&&!n(t))return e!==e&&t!==t;return a(e,t,r,s,i,o)}e.exports=i},function(e,t,r){var a=r(1399),n=r(2187),i=r(1402);var s=1,o=2;function l(e,t,r,l,c,u){var d=r&s,p=e.length,v=t.length;if(p!=v&&!(d&&v>p))return false;var m=u.get(e);if(m&&u.get(t))return m==t;var h=-1,f=true,b=r&o?new a:void 0;u.set(e,t);u.set(t,e);while(++h<p){var g=e[h],_=t[h];if(l)var y=d?l(_,g,h,t,e,u):l(g,_,h,e,t,u);if(void 0!==y){if(y)continue;f=false;break}if(b){if(!n(t,function(e,t){if(!i(b,t)&&(g===e||c(g,e,r,l,u)))return b.push(t)})){f=false;break}}else if(!(g===_||c(g,_,r,l,u))){f=false;break}}u["delete"](e);u["delete"](t);return f}e.exports=l},function(e,t,r){var a=r(1716);function n(e){return e===e&&!a(e)}e.exports=n},function(e,t){function r(e,t){return function(r){if(null==r)return false;return r[e]===t&&(void 0!==t||e in Object(r))}}e.exports=r},function(e,t,r){var a=r(1654),n=r(1238);function i(e,t){t=a(t,e);var r=0,i=t.length;while(null!=e&&r<i)e=e[n(t[r++])];return r&&r==i?e:void 0}e.exports=i},function(e,t,r){var a=r(502),n=r(1404),i=r(2204),s=r(2207);function o(e,t){if(a(e))return e;return n(e,t)?[e]:i(s(e))}e.exports=o},,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(10);var f=r(4);var b=r(764);var g=r(135);var _=r(22);var y=r(51);var O=r(96);var k=r(1474);var E=r(2126);var j=r.n(E);var C=new h["b"]("enterprise_dashboard");var S={orgName:v["b"].string,featureEKMPhase2:v["b"].bool,getBackfillInfo:v["b"].func.isRequired};var w={orgName:"",featureEKMPhase2:false};var I=6e4;var T={MESSAGES:0,FILES:1,SEARCH:2};var A={ENROLL:"enroll",UNENROLL:"unenroll",REKEY:"rekey",MIGRATION:"migration"};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={ekmBackfillInfo:{}};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=function e(){t.props.getBackfillInfo().then(function(e){t.setState(function(){return{ekmBackfillInfo:e}})})};r();this.updateInterval=setInterval(r,I)}},{key:"componentWillUnmount",value:function e(){this.updateInterval&&clearInterval(this.updateInterval)}},{key:"getStatusLine1",value:function e(t,r){if(!this.props.featureEKMPhase2)return null;var a=this.state.ekmBackfillInfo,n=a.backfill_in_progress,i=a.backfill_reason,s=a.ekm_access_denied;var o=void 0;var l=void 0;if(100===t)if(n&&i===A.UNENROLL){o=p.a.createElement(_["b"],{type:"circle-minus-filled",className:"sk_dark_gray margin_right_25",size:"inherit"});l=[C.t("Unenrolled"),C.t("Unenrolled"),C.t("Unenrolled")][r]}else{o=p.a.createElement(_["b"],{type:"circle-checkbox-checked",className:"sk_seafoam_green margin_right_25",size:"inherit"});l=[C.t("Encrypted"),C.t("Encrypted"),C.t("Encrypted")][r]}else if(n&&!s){o=p.a.createElement(O["a"],{inline:true,className:"p_ekm_status__spinner"});var c=void 0;switch(i){case A.MIGRATION:c=[C.t("Encrypting messages from migrating workspace..."),C.t("Encrypting files from migrating workspace..."),C.t("Encrypting search history from migrating workspace...")];break;case A.REKEY:c=[C.t("Re-encrypting existing messages..."),C.t("Re-encrypting existing files..."),C.t("Re-encrypting existing search history...")];break;case A.UNENROLL:c=[C.t("In progress"),C.t("In progress"),C.t("In progress")];break;default:c=[C.t("Encrypting existing messages..."),C.t("Encrypting existing files..."),C.t("Encrypting existing search history...")]}l=c[r]}else{o=p.a.createElement(_["b"],{type:"circle-minus-filled",className:"sk_dark_gray margin_right_25",size:"inherit"});l=0===t?C.t("Not started"):C.t("Paused")}return p.a.createElement("div",{className:"bold"},o,l)}},{key:"getStatusLine2",value:function e(t,r){var a=this.props.featureEKMPhase2;if(!a)return null;var n=this.state.ekmBackfillInfo,i=n.backfill_in_progress,s=n.backfill_reason;var o=void 0;o=100!==t||i&&s===A.UNENROLL?C.t("{status}% complete",{status:t}):[C.t("Current and future messages"),C.t("Current and future files"),C.t("Current and future search history")][r];return p.a.createElement("div",{className:"sk_dark_gray"},o)}},{key:"getStatus",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var r=arguments[1];return p.a.createElement("div",{className:"p-ekm_status__status_description"},this.getStatusLine1(t,r),this.getStatusLine2(t,r))}},{key:"renderEncryptionStatusTable",value:function e(){var t=this.props.featureEKMPhase2;if(!t)return null;var r=this.state.ekmBackfillInfo,a=r.messages,n=r.files,i=r.search;return p.a.createElement("div",{className:"p-ekm_status__progress_container"},p.a.createElement("div",{className:"bold"},C.t("Messages")),this.getStatus(a,T.MESSAGES),p.a.createElement("div",{className:"bold"},C.t("Files")),this.getStatus(n,T.FILES),p.a.createElement("div",{className:"bold"},C.t("Search history")),this.getStatus(i,T.SEARCH))}},{key:"renderStatusMessage",value:function e(){var t=this.props,r=t.featureEKMPhase2,a=t.orgName;var n=this.state.ekmBackfillInfo,i=n.backfill_in_progress,s=n.backfill_reason,o=n.ekm_access_denied;if(!r||!(i||o))return null;var l="info";var c="info-circle";var u=void 0;var d=void 0;if(o){l="error";c="warning";u=C.rt("Encryption of <b>{orgName}</b> has been paused because Slack couldn\u2019t access your key family. To continue encrypting data, please review your key policy in AWS and ensure Slack has access to your key family.",{orgName:a})}else if(i)switch(s){case A.MIGRATION:u=C.t("A workspace has been migrated into your organization, so all data in that workspace will be encrypted.");d=p.a.createElement("div",null,p.a.createElement(y["a"],{href:"/manage/organization/migrations"},C.t("View scheduled migrations")));break;case A.REKEY:l="warning";c="warning";u=C.rt("<b>{orgName}</b>\u2019s key family was recently rotated, so all existing data is being encrypted with the new key. Ensure Slack has access to your previous keys until this is done.",{orgName:a});break;case A.UNENROLL:l="warning";c="warning";u=C.rt("Unenrollment from EKM for <b>{orgName}</b> is in progress. If your organization has a large amount of data, the process may take some time to complete. Ensure Slack has access to your keys until then.",{orgName:a});break;default:u=C.rt("EKM was recently enabled for <b>{orgName}</b> and all existing data is now being encrypted. If your organization has a large amount of data, the process may take some time to complete.",{orgName:a})}return p.a.createElement(g["a"],{type:"boxed",level:l,icon:c,align:"left",className:"margin_bottom_100"},u,d)}},{key:"render",value:function e(){var t=this.props.featureEKMPhase2;if(!t)return null;var r=this.state.ekmBackfillInfo.last_updated;return p.a.createElement("div",null,p.a.createElement("h2",{className:"p-ekm_status__subtitle"},"Encryption status"),p.a.createElement("div",{className:"sk_dark_gray margin_bottom_100"},p.a.createElement("span",{className:"bold"},C.t("Last updated: ")),p.a.createElement("span",null,p.a.createElement(k["a"],{timestamp:r}))),this.renderStatusMessage(),this.renderEncryptionStatusTable())}}]);return t}(d["PureComponent"]);N.displayName="EKMStatus";N.defaultProps=w;var P=function e(t){return{featureEKMPhase2:Object(f["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var R=function e(t,r){var a=r.isMissionControl,n=r.teamId;var i=a?b["d"]:b["b"];return{getBackfillInfo:function e(){return t(i({reason:"EKMStatus_getBackfillInfo",teamId:n}))}}};var M=Object(m["connect"])(P,R)(N);M.propTypes={isMissionControl:v["b"].bool,teamId:v["b"].string};M.defaultProps={isMissionControl:false,teamId:null};t["a"]=M},,function(e,t,r){"use strict";t.__esModule=true;function a(e){return function(t){var r=t.dispatch,a=t.getState;return function(t){return function(n){if("function"===typeof n)return n(r,a,e);return t(n)}}}}var n=a();n.withExtraArgument=a;t["default"]=n},function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.batchedSubscribe=n;function n(e){if("function"!==typeof e)throw new Error("Expected batch to be a function.");var t=[];var r=t;function n(){r===t&&(r=t.slice())}function i(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=true;n();r.push(e);return function a(){if(!t)return;t=false;n();var i=r.indexOf(e);r.splice(i,1)}}function s(){var e=t=r;for(var a=0;a<e.length;a++)e[a]()}function o(){e(s)}return function(e){return function(){var t=e.apply(void 0,arguments);var r=t.subscribe;function n(){var e=t.dispatch.apply(t,arguments);o();return e}return a({},t,{dispatch:n,subscribe:i,subscribeImmediate:r})}}}},function(e,t,r){"use strict";r.r(t);r.d(t,"getAppToEdit",function(){return s});r.d(t,"getAppName",function(){return o});r.d(t,"getAppIcons",function(){return l});var a=r(0);var n=r(14);var i=r(4);var s=Object(n["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.appId;var a=Object(i["getFromBootData"])(e,"app_to_edit");if(a&&a.encoded_id===r)return a;return null});s.propTypes={appId:a["b"].string.isRequired};var o=Object(n["b"])(function(e,t){var r=s(e,t);return r&&r.name});o.propTypes={appId:a["b"].string.isRequired};var l=Object(n["b"])(function(e,t){var r=s(e,t);return r&&r.payload&&r.payload.icons||{}});l.propTypes={appId:a["b"].string.isRequired}},,function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(2);var n=r.n(a);var i=r(34);var s=r(35);var o=r(31);function l(e){var t=Object(i["g"])(e,"all_unreads_sort_order");var r=["alphabetical","priority","oldest","newest"];if(t&&Object(a["includes"])(r,t))return t;return Object(o["isPaidTeam"])(Object(s["d"])(e))?"priority":"alphabetical"}},,function(e,t,r){"use strict";var a=r(13);var n=r(146);var i=r(1438);var s=r(3);var o=r.n(s);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(1);var b=r.n(f);var g=r(16);var _=r.n(g);var y=r(0);var O=r(2);var k=r(1757);var E=r(10);var j=r(381);var C=r(152);var S=r(28);var w=r(92);var I=r(51);var T=r(204);var A=r(57);var N=r(1450);var P=new E["b"]("pricing_calculator");var R={planIsYearly:y["b"].bool.isRequired,planCostPerTerm:y["b"].number.isRequired,planCurrency:y["b"].string.isRequired,teamName:y["b"].string,numInactiveMembers:y["b"].number.isRequired,isZeroActiveMembers:y["b"].bool.isRequired,totalMembers:y["b"].number.isRequired,paidSeats:y["b"].number.isRequired,totalCost:y["b"].number.isRequired,totalCostWithTax:y["b"].number.isRequired,totalRecurringTax:y["b"].number.isRequired,tax:y["b"].shape({value:y["b"].number,type:y["b"].string}),showCurrencyLabel:y["b"].bool,clogger:y["b"].object,clogMetadata:y["b"].object};var M={tax:null,teamName:"",showCurrencyLabel:false,clogger:{sendDataAndEmptyQueue:O["noop"],track:O["noop"]},clogMetadata:{params:{},paramsString:""}};var x=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["onFairBillingLinkClick","onLearnMoreLinkClick"]);return r}d()(t,[{key:"onFairBillingLinkClick",value:function e(){var t=this.props,r=t.clogger,a=t.clogMetadata;r.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"link_calculator_fair_billing_policy",ui_component:"pricing_calculator"}}},a.params));r.sendDataAndEmptyQueue()}},{key:"onLearnMoreLinkClick",value:function e(){var t=this.props,r=t.clogger,a=t.clogMetadata;r.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"link_calculator_billing_help",ui_component:"pricing_calculator"}}},a.params));r.sendDataAndEmptyQueue()}},{key:"getTaxFormattedData",value:function e(t,r,a){var n=void 0;var i=void 0;if(t){switch(t.type){case w["g"].vat:n=P.t("Estimated VAT");break;case w["g"].jct:n=P.t("Estimated JCT");break;case w["g"].sales_tax:n=P.t("Estimated sales tax");break;default:n=P.t("Estimated tax");break}i=Object(j["a"])(r,a)}else{n=P.t("Tax");i=P.t("Applied at checkout")}return{taxKey:n,taxValue:i}}},{key:"renderRow",value:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=_()("p-pricing_calculator__table_row","p-pricing_calculator__table_row--"+a.type);return b.a.createElement("div",{className:n},b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--key","data-qa":"pricing_calculator_table_item_"+a.type+"_key"},t),b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--value","data-qa":"pricing_calculator_table_item_"+a.type+"_value"},r))}},{key:"renderSubtotalRow",value:function e(){var t=this;var r=this.props,a=r.planIsYearly,n=r.planCostPerTerm,i=r.paidSeats,s=r.numInactiveMembers,o=r.isZeroActiveMembers,l=r.totalMembers,c=r.totalCost,u=r.teamName,d=r.planCurrency;var p=void 0;o?p=P.rt("Your team hasn\u2019t been especially active on Slack lately. We\u2019ll only charge you for one member today, but as your team becomes active that could change. <a>Learn about billing</a>",null,function(e){var r=e.text,a=e.key;return b.a.createElement(I["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onFairBillingLinkClick},r)}):s&&(p=P.rt("{teamName} has {totalMembers, plural, =1 {# member} other {# members}}, but {numInactiveMembers, plural, =1 {# isn\u2019t} other {# aren\u2019t}} actively using Slack. We won\u2019t charge you for {numInactiveMembers, plural, =1 {them} other {them}}, as part of our <a>Fair Billing policy</a>.",{teamName:u,totalMembers:l,numInactiveMembers:s,fallbackHash:"dbc00b53e0783bd19d07fb7811c83b75647ee285"},function(e){var r=e.text,a=e.key;return b.a.createElement(I["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onFairBillingLinkClick},r)}));var v=b.a.createElement("div",null,b.a.createElement(N["a"],{planIsYearly:a,billedMembers:i,numInactiveMembers:s,formattedPlanCost:Object(j["a"])(n,d)}),p&&b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},p));var m=Object(j["a"])(c,d);return this.renderRow(v,m,{type:"subtotal"})}},{key:"renderTaxRow",value:function e(){var t=this.props,r=t.tax,a=t.totalRecurringTax,n=t.planCurrency;var i=this.getTaxFormattedData(r,a,n),s=i.taxKey,o=i.taxValue;return this.renderRow(s,o,{type:"tax"})}},{key:"renderTotalRow",value:function e(){var t=this;var r=this.props,a=r.planCurrency,n=r.totalCostWithTax,i=r.planIsYearly,s=r.showCurrencyLabel;var o=void 0;var l=void 0;if(i){o=P.t("Yearly payment");l=P.rt("Your yearly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var r=e.text,a=e.key;return b.a.createElement(I["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onLearnMoreLinkClick},r)})}else{o=P.t("Monthly payment");l=P.rt("Your monthly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var r=e.text,a=e.key;return b.a.createElement(I["a"],{href:Object(T["b"])({articleId:"218915077",zdLocale:Object(A["a"])()}),key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onLearnMoreLinkClick},r)})}var c=b.a.createElement("div",null,o,b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},l));var u=""+Object(j["a"])(n,a);s&&(u=u+" "+a);return this.renderRow(c,u,{type:"total"})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"p-pricing_calculator__table"},this.renderSubtotalRow(),this.renderTaxRow(),this.renderTotalRow())}}]);return t}(f["PureComponent"]);x.displayName="PricingCalculatorTable";x.defaultProps=M;var D=x;var F=r(1973);var L=new E["b"]("pricing_calculator");var B={isUserRestricted:y["b"].bool,title:y["b"].string,showHeader:y["b"].bool,headerBackgroundColor:y["b"].string,yearlyPlanCostPerTerm:y["b"].number,monthlyPlanCostPerTerm:y["b"].number,planLevel:y["b"].string.isRequired,planIsYearly:y["b"].bool,numMonthsPerPlan:y["b"].number,planCostPerTerm:y["b"].number,planCurrency:y["b"].string,numInactiveMembers:y["b"].number,isZeroActiveMembers:y["b"].bool,totalMembers:y["b"].number,paidSeats:y["b"].number,totalCost:y["b"].number,totalCostWithTax:y["b"].number,totalRecurringTax:y["b"].number,teamName:y["b"].string,tax:y["b"].object,teamCredits:y["b"].number,showSubmitButton:y["b"].bool,submitButtonText:y["b"].string,onSubmit:y["b"].func,display:y["b"].oneOf(["boxed","inline"]),loadPlansAndCostData:y["b"].func,switchTerms:y["b"].func,updatePlanLevel:y["b"].func,isPlansAndCostDataLoaded:y["b"].bool,showCurrencyLabel:y["b"].bool,clogger:y["b"].object,clogMetadata:y["b"].object};var U={isUserRestricted:false,title:"",showHeader:true,headerBackgroundColor:"sk_fill_blue",yearlyPlanCostPerTerm:0,monthlyPlanCostPerTerm:0,planIsYearly:false,numMonthsPerPlan:1,planCostPerTerm:0,planCurrency:"USD",numInactiveMembers:0,isZeroActiveMembers:true,totalMembers:0,paidSeats:0,totalCost:0,totalCostWithTax:0,totalRecurringTax:0,teamName:"",tax:null,teamCredits:0,showSubmitButton:true,submitButtonText:null,onSubmit:O["noop"],display:"inline",loadPlansAndCostData:O["noop"],switchTerms:O["noop"],updatePlanLevel:O["noop"],isPlansAndCostDataLoaded:false,showCurrencyLabel:false,clogger:{sendDataAndEmptyQueue:O["noop"],track:O["noop"]},clogMetadata:{params:{},paramsString:""}};var q=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={submitButtonIsPending:false};Object(k["a"])(r,["handleSubmit","switchtoYearly","switchToMonthly"]);return r}d()(t,[{key:"componentDidMount",value:function e(){if(!this.props.isPlansAndCostDataLoaded){this.props.updatePlanLevel(this.props.planLevel);this.props.loadPlansAndCostData({isFinalReview:false})}}},{key:"switchtoYearly",value:function e(){this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"product_term_switch",ui_element:"btn_calculator_term_switch",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params,{product_term:"yearly"}));this.props.clogger.sendDataAndEmptyQueue();return this.props.switchTerms("yearly")}},{key:"switchToMonthly",value:function e(){this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"product_term_switch",ui_element:"btn_calculator_term_switch",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params,{product_term:"monthly"}));this.props.clogger.sendDataAndEmptyQueue();return this.props.switchTerms("monthly")}},{key:"handleSubmit",value:function e(){var t=this;this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"btn_calculator_check_out",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params));this.props.clogger.sendDataAndEmptyQueue();this.setState(function(e){return o()({},e,{submitButtonIsPending:true})},function(){try{t.props.onSubmit()}catch(e){t.setState(function(e){return o()({},e,{submitButtonIsPending:false})})}})}},{key:"renderHeader",value:function e(){var t=this.props,r=t.title,a=t.headerBackgroundColor;if(!r)return null;var n=_()("p-pricing_calculator__header","p-pricing_calculator__header--"+a);return b.a.createElement("h3",{className:n,"data-qa":"pricing_calculator_header"},r)}},{key:"renderTermsToggle",value:function e(){var t=this.props,r=t.yearlyPlanCostPerTerm,a=t.monthlyPlanCostPerTerm,n=t.planIsYearly,i=t.planCurrency;var s=Object(j["a"])(r,i);var o=Object(j["a"])(a,i);var l=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":n});var c=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":!n});return b.a.createElement("div",{className:"p-pricing_calculator__terms_toggle_container","data-qa":"pricing_calculator_terms_toggle_container"},b.a.createElement(S["c"],{onClick:this.switchtoYearly,className:l,"data-qa":"pricing_calculator_terms_toggle_yearly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,L.t("Pay each year")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},L.t("{yearlyPlanCostPerTermFormatted} per member, per year",{yearlyPlanCostPerTermFormatted:s}))),b.a.createElement(S["c"],{onClick:this.switchToMonthly,className:c,"data-qa":"pricing_calculator_terms_toggle_monthly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,L.t("Pay each month")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},L.t("{monthlyPlanCostPerTermFormatted} per member, per month",{monthlyPlanCostPerTermFormatted:o}))))}},{key:"renderSwitchCurrencyInfo",value:function e(){return b.a.createElement("div",{className:"p-pricing_calculator__currency_info"},b.a.createElement("span",{className:"p-pricing_calculator__currency_info--title"},L.t("Looking for a different currency?")),b.a.createElement("span",{className:"p-pricing_calculator__currency_info--description"},L.t("Depending on your company\u2019s location, you may be able to select GBP, EUR, or JPY on the next page.")))}},{key:"renderCreditToast",value:function e(){var t=this.props,r=t.teamName,a=t.teamCredits,n=t.planCurrency;if(!a)return null;var i=Object(j["a"])(Math.abs(a),n);var s=a>0?L.rt("{teamName} has <strong>{creditsAppliedFormatted} in credit</strong>, which will be applied at checkout.",{teamName:r,creditsAppliedFormatted:i}):L.rt("{teamName}\u2018s account has an outstanding balance of <strong>{creditsAppliedFormatted}</strong>, which will be added to the final price during checkout",{teamName:r,creditsAppliedFormatted:i});return b.a.createElement(C["d"],{type:"inline",className:"p-pricing_calculator__credit_alert","data-qa":"pricing_calculator_credit_alert"},s)}},{key:"renderSubmitBtn",value:function e(){var t=this.props,r=t.submitButtonText,a=t.showSubmitButton;var n=this.state.submitButtonIsPending;if(!a)return null;return b.a.createElement(S["b"],{id:"pricing_calculator_submit_btn",size:"large",className:"p-pricing_calculator__submit_btn",onClick:this.handleSubmit,loading:n,"data-qa":"pricing_calculator_submit_btn"},r||L.t("Upgrade"))}},{key:"render",value:function e(){var t=this.props,r=t.isUserRestricted,a=t.showHeader,n=t.showSubmitButton,i=t.display,s=t.teamCredits,o=t.isPlansAndCostDataLoaded;if(!o||r)return null;var l=_()("p-pricing_calculator","p-pricing_calculator--"+i,{"p-pricing_calculator--has-header":this.props.showHeader});return b.a.createElement("div",{className:l,"data-qa":"pricing_calculator_container"},a&&this.renderHeader(),b.a.createElement("div",{className:"p-pricing_calculator__body"},this.renderTermsToggle(),b.a.createElement(D,this.props),this.renderSwitchCurrencyInfo(),!!s&&this.renderCreditToast(),n&&this.renderSubmitBtn()))}}]);return t}(f["PureComponent"]);q.displayName="PricingCalculator";q.displayName="PricingCalculator";q.defaultProps=U;var G=q;var H=function e(t){return Object(i["a"])(t)};var W=function e(t){return{loadPlansAndCostData:function e(r){return t(Object(n["fetchPlansAndCostData"])(r))},switchTerms:function e(r){return t(Object(n["changeActivePlan"])({term:r}))},updatePlanLevel:function e(r){return t(Object(n["updatePlanLevel"])(r))}}};var V=Object(a["connect"])(H,W)(G);var K=t["a"]=V},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(0);var m=r(1);var h=r.n(m);var f=r(13);var b=r(2);var g=r(16);var _=r.n(g);var y=r(4);var O=r(233);var k=r(536);var E=r(1363);var j=r(689);var C=r(10);var S=r(189);var w=r(28);var I=r(51);var T=r(317);var A=r(31);var N=r(2128);var P=new C["b"]("custom_tos");var R={hasCustomTOS:v["b"].bool,customTOSTimestamp:v["b"].number,disablePrivacyAndCookiePolicy:v["b"].bool,enterprise:v["b"].shape({name:v["b"].string,domain:v["b"].string}),orgUrl:v["b"].string,customTOSViewLink:v["b"].string,team:v["b"].shape({name:v["b"].string}),safeAbsRootURL:v["b"].string,featureZeroWorkspaceOnboarding:v["b"].bool.isRequired,onSubmit:v["b"].func,onlyDisplayCard:v["b"].bool};var M={hasCustomTOS:false,disablePrivacyAndCookiePolicy:false,enterprise:null,orgUrl:"",customTOSTimestamp:0,customTOSViewLink:"",team:null,safeAbsRootURL:"https://slack.com/",onSubmit:b["noop"],onlyDisplayCard:false};var x=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={buttonIsPending:false};r.onClick=r.onClick.bind(r);return r}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.setButtonPending(true);this.props.onSubmit()}},{key:"setButtonPending",value:function e(t){this.setState(function(){return{buttonIsPending:t}})}},{key:"maybeRenderSlackUserTOS",value:function e(){var t=this.props.hasCustomTOS;if(t)return null;return h.a.createElement("li",null,this.renderSlackUserTOS())}},{key:"maybeRenderEnterpriseTOS",value:function e(){var t=this.props.hasCustomTOS;if(!t)return null;return h.a.createElement("li",null,this.renderEnterpriseTOS())}},{key:"maybeRenderCookiePolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return h.a.createElement("li",null,this.renderCookiePolicy())}},{key:"maybeRenderPrivacyPolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return h.a.createElement("li",null,this.renderPrivacyPolicy())}},{key:"renderCookiePolicy",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return h.a.createElement(I["a"],{href:r+"cookie-policy",target:"_blank",rel:"noopener noreferrer"},P.t("Slack\u2019s Cookie Policy"))}},{key:"renderPrivacyPolicy",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return h.a.createElement(I["a"],{href:r+"privacy-policy",target:"_blank",rel:"noopener noreferrer"},P.t("Slack\u2019s Privacy Policy"))}},{key:"renderEnterpriseTOS",value:function e(){var t=this.props,r=t.customTOSViewLink,a=t.enterprise,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return h.a.createElement(T["a"],{href:""+r,target:"_blank",rel:"noopener noreferrer"},P.rt("{enterpriseName}\u2019s Terms of Service",{enterpriseName:a.name}))}},{key:"renderSlackUserTOS",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return h.a.createElement(I["a"],{href:r+"terms-of-service/user",target:"_blank",rel:"noopener noreferrer"},P.t("Slack\u2019s User Terms of Service"))}},{key:"renderTOSHeading",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.customTOSTimestamp;if(!r)return null;var n=void 0;n=a?P.t("Review and accept the updated terms of service"):P.t("Review the terms of service");return h.a.createElement("div",{className:"p-tos__heading"},n)}},{key:"renderTOSSubheading",value:function e(){var t=this.props,r=t.customTOSTimestamp,a=t.enterprise,n=t.customTOSViewLink,i=t.team,s=t.featureZeroWorkspaceOnboarding;if(!s)return null;if(Object(b["isNull"])(Object(j["c"])(n))){if(!Object(b["isEmpty"])(i))return h.a.createElement("div",null,h.a.createElement("p",{className:"p-tos__subheading"},P.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(A["getTeamDisplayName"])(i),enterpriseName:a.name})),h.a.createElement("p",{className:"p-tos__subheading"},n));return h.a.createElement("div",null,h.a.createElement("p",{className:"p-tos__subheading"},P.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:')),h.a.createElement("p",{className:"p-tos__subheading"},n))}if(r)return h.a.createElement("p",{className:"p-tos__subheading"},P.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to <a>{enterpriseName}\u2019s Terms of Service</a>, updated on {TOSUpdatedOn}.',{enterpriseName:a.name,customTOSViewLink:n,TOSUpdatedOn:Object(S["a"])(r)},function(e){var t=e.text,r=e.key,a=e.tag;if("a"===a)return h.a.createElement(T["a"],{href:n,target:"_blank",key:r,rel:"noopener noreferrer"},t);return null}));if(!Object(b["isEmpty"])(i))return h.a.createElement("p",{className:"p-tos__subheading"},P.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(A["getTeamDisplayName"])(i),enterpriseName:a.name}));return h.a.createElement("p",{className:"p-tos__subheading"},P.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:'))}},{key:"renderTOSLinks",value:function e(){var t=this.props.customTOSTimestamp;if(t)return null;return h.a.createElement("div",{className:"p-tos__body"},h.a.createElement("ul",{className:"no_bullets margin_left_0"},this.maybeRenderSlackUserTOS(),this.maybeRenderPrivacyPolicy(),this.maybeRenderCookiePolicy(),this.maybeRenderEnterpriseTOS()))}},{key:"renderTOSBody",value:function e(){return h.a.createElement("div",{className:"p-tos__body"},this.renderTOSLinks(),this.renderSubmitButton())}},{key:"renderSubmitButton",value:function e(){if(!this.props.featureZeroWorkspaceOnboarding)return null;var t=this.state.buttonIsPending;return h.a.createElement(w["b"],{id:"submit_btn",type:"primary",className:"p-tos__button",onClick:this.onClick,loading:t,disabled:t,"data-qa":"submit_button"},P.t("I Agree"))}},{key:"renderCard",value:function e(){var t=_()("p-tos__card",{margin_top_0:this.props.onlyDisplayCard});return h.a.createElement("div",{className:t},h.a.createElement("div",{className:"p-tos__content"},this.renderTOSHeading(),this.renderTOSSubheading(),this.renderTOSBody()))}},{key:"render",value:function e(){var t=this.props,r=t.enterprise,a=t.onlyDisplayCard,n=t.orgUrl;return h.a.createElement("div",{className:"p-tos"},!a&&h.a.createElement(E["a"],{team:r,title:n,logoAriaLabel:"Slack"}),this.renderCard())}}]);return t}(m["PureComponent"]);x.displayName="TermsOfService";x.defaultProps=M;var D=function e(t){var r=Object(y["getFromBootData"])(t,"custom_tos");var a=r.enterprise;var i=Object(y["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding");var s=Object(O["b"])(t);Object(b["isEmpty"])(s)||(a=s);var o=Object(k["c"])(t,a.domain);return n()({},r,{enterprise:a,orgUrl:o,featureZeroWorkspaceOnboarding:i})};var F=Object(f["connect"])(D)(x);r.d(t,"a",function(){return x});var L=t["b"]=F},,,,function(e,t,r){"use strict";var a=r(0);var n=r(15);var i=r(536);var s=r(2);var o=r.n(s);var l=r(42);var c=r(35);var u=r(30);var d=r(117);var p=r(281);var v=r(298);var m=Object(n["b"])("Open channel from another workspace",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.teamId;var o=t();if(Object(u["isSSB"])()){var m=Object(s["includes"])(Object(l["getSignedInTeamIds"])(o),n);var h=m?Promise.resolve():Object(v["i"])(n);return h.then(function(){return new Promise(function(e){return window.requestAnimationFrame(e)})}).then(function(){if(Object(u["isSSBAndAtLeastVersion"])("3.2"))Object(l["displayTeamAndChannel"])(n,a);else{var e=document.createElement("iframe");var t=Object(d["c"])({team:n,id:a});e.src="slack://channel"+t;document.body.appendChild(e);setTimeout(function(){return e.remove()},1e3)}})}var f=Object(c["j"])(o,n);var b=Object(s["get"])(f,"domain");var g=Object(i["b"])(o,b)+"/messages/"+a;Object(p["f"])(g,n);return Promise.resolve()});m.propTypes={channelId:a["b"].string.isRequired,teamId:a["b"].string.isRequired};t["a"]=m},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(13);var b=r(16);var g=r.n(b);var _=r(2);var y=r.n(_);var O=r(87);var k=r(85);var E=r(1088);var j=r(1090);var C=r(1564);var S={file:O["a"].File().isRequired,fileFromRedux:O["a"].File().isRequired,index:h["b"].number,clogLinkClick:h["b"].func,className:h["b"].string,fullWidth:h["b"].bool,onClick:h["b"].func};var w={index:null,clogLinkClick:_["noop"],className:null,fullWidth:false,onClick:_["noop"]};var I=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();t.stopPropagation();t.nativeEvent.stopImmediatePropagation();this.props.onClick(t,{file:this.props.file,index:this.props.index})}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.fileFromRedux,i=t.clogLinkClick,s=t.fullWidth;var o=g()("p-search_file",this.props.className);var l=a&&a.title;var c=a&&a.name;var u=n()({},a,{title:r.search_title||r.title||l,name:r.search_name||r.name||c});return m.a.createElement(E["a"],{file:u,className:o,fullWidth:s,clogLinkClick:i,"data-qa":"search_result_file"},m.a.createElement(j["a"],{file:u,onClick:this.onClick},m.a.createElement(C["a"],{file:u,excludeTime:true})))}}]);return t}(v["PureComponent"]);I.displayName="SearchFile";I.defaultProps=w;var T=function e(t,r){var a=r.file;return{fileFromRedux:a?Object(k["getFileById"])(t,a.id):null}};t["a"]=Object(f["connect"])(T)(I)},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(13);var o=r(2);var l=r(16);var c=r.n(l);var u=r(22);var d=r(28);var p=r(4);var v=r(20);var m=Object(v["b"])("TS.ui.jumper.start",function(){return null});var h=Object(v["b"])("TS.ui.jumper.getSessionId",function(){return null});var f={start:m};var b=r(2264);var g=r(38);var _=r(10);var y=new _["b"]("global_nav");var O={featureGlobalNav:i["b"].bool,featureGlobalNavLayout:i["b"].bool,maybeShowQuickSwitcher:i["b"].func};var k={featureGlobalNav:false,featureGlobalNavLayout:false,maybeShowQuickSwitcher:o["noop"]};var E=function e(t){var r=t.featureGlobalNav,a=t.featureGlobalNavLayout;if(!r)return null;var i=Object(g["a"])()?t.maybeShowQuickSwitcher:m;var s=n.a.createElement(d["c"],{className:"p-global_nav__sidebar_jumper",onClick:i},n.a.createElement(u["b"],{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),y.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."}));var o=c()("p-global_nav__sidebar",{"p-global_nav__sidebar--relayout":a});return n.a.createElement("div",{className:o},s)};E.displayName="SidebarHeader";E.defaultProps=k;var j=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(p["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var C=function e(t){return{maybeShowQuickSwitcher:function e(){return t(b["a"].apply(void 0,arguments))}}};var S=t["a"]=Object(s["connect"])(j,C)(E)},function(e,t,r){"use strict";var a=r(0);var n=r(1);var i=r.n(n);var s=r(13);var o=r(34);var l=r(181);var c=r(311);var u=r(580);var d=r(12);var p=r(4);var v=r(1406);var m={theme:a["b"].oneOf(["custom_theme","default","default_theme","aubergine_classic_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","nocturne_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme","neue_theme","cloud_theme","kaiyo_theme","midnight_theme","stark_theme"]),custom:a["b"].object,useGlobalNav:a["b"].bool,featureClassicNav:a["b"].bool,historyNavigationEnabled:a["b"].bool};var h={theme:"default_theme",custom:void 0,useGlobalNav:false,featureClassicNav:false,historyNavigationEnabled:false};var f=function e(t){var r=Object(u["e"])(t.theme,t.custom,{useGlobalNav:t.useGlobalNav});if(!r){Object(d["b"])().warn('Theme: could not identify theme "'+t.theme+'" ('+t.custom+")");return null}var a=Object(c["d"])(r,{useGlobalNav:t.useGlobalNav,featureClassicNav:t.featureClassicNav});var n=r.text_color;var s=Object(c["c"])(r.column_bg,25);var o=Object(c["c"])(r.column_bg,35);var p=t.historyNavigationEnabled?Object(c["k"])(n,.15):s;var v=t.historyNavigationEnabled?Object(c["k"])(n,.2):o;var m=Object(l["a"])(r);var h=Object(c["b"])(n,Object(c["k"])(n,.3));var f="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close,\n\t\t.p-channel_sidebar__link--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+r.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+a+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+s+";\n\t\t\tcolor: "+a+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__channel--im .c-presence--active,\n\t\t.p-channel_sidebar__channel--im-slackbot:before {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im.p-channel_sidebar__channel--selected .c-presence,\n\t\t.p-channel_sidebar__channel--im-slackbot.p-channel_sidebar__channel--selected:before {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im .c-presence--away {\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+r.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected:before,\n\t\t.p-channel_sidebar__channel--selected:hover:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+r.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(c["k"])(n,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: "+h+";\n\t\t}\n\t\t\t\t\n\t\t.client_channels_list_container a:not(.c-link--focus-visible).focus-ring,\n\t\t.client_channels_list_container button:not(.c-button--focus-visible).focus-ring,\t\t\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__history_button.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+h+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/** Navigation Bar **/\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+p+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+v+";\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: "+p+";\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: "+v+";\n\t\t}\n\t\t.p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: "+p+";\n\t\t}\n\n\t\t/** Global Nav (DEPRECATED BUT KEEP FOR SONIC) **/\n\t\t.p-global_nav__top {\n\t\t\tbackground: "+m.nav_bar_bg+";\n\t\t\tcolor: "+m.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__top:after {\n\t\t\tbackground: "+m.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__sidebar {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-global_nav__top_user_presence {\n\t\t\tbackground: "+m.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--active {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--away {\n\t\t\tcolor: "+m.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__sidebar_jumper:hover,\n\t\t.p-global_nav__sidebar_button:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/** Classic Nav (WIP) **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: "+r.menu_bg+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+h+";\n\t\t}\n\t";return i.a.createElement("style",{className:"p-channel_sidebar__theme--"+t.theme},f)};f.displayName="Theme";f.defaultProps=h;var b=function e(t){var r=Object(o["g"])(t,"sidebar_theme");var a=Object(o["c"])(t);return{theme:r,custom:a,useGlobalNav:Object(l["b"])(t),featureClassicNav:Object(p["isFeatureEnabled"])(t,"feature_classic_nav"),historyNavigationEnabled:Object(v["a"])(t)}};t["a"]=Object(s["connect"])(b)(f)},function(e,t,r){"use strict";var a=r(329);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=void 0!==t&&t,n=e.isEphemeral,i=void 0!==n&&n,s=e.isStarred,o=void 0!==s&&s,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;var p="slackbot_response"===u;var v=Object(a["shouldShowHighlightsLabel"])(d);return{isPinned:r,isStarred:o,isEphemeral:i,isBroadcast:c,isCustomResponse:p,isSliHighlight:v}}},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(0);var h=r(16);var f=r.n(h);var b=r(1796);var g=r(441);var _=r(41);var y=r(10);var O=r(187);var k=r(3281);var E=r.n(k);var j=new y["b"]("message");var C={msg:m["b"].object.isRequired,className:m["b"].string,children:m["b"].node,resendMessage:m["b"].func.isRequired,removeMessageAndTimestamp:m["b"].func.isRequired};var S={className:void 0,children:void 0};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.resend=r.resend.bind(r);r.cancel=r.cancel.bind(r);return r}s()(t,[{key:"getText",value:function e(){var t=this.props.msg.isEKMError;if(t)return j.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return j.t("Slack couldn\u2019t send this message")}},{key:"resend",value:function e(){var t=this.props.msg;var r=t.ts,a=t.channel;this.props.resendMessage(a,r)}},{key:"cancel",value:function e(){var t=this.props.msg;var r=t.ts,a=t.channel;this.props.removeMessageAndTimestamp({channelId:a,ts:r})}},{key:"renderFooter",value:function e(){var t=this.props.msg,r=t.showResend,a=t.showCancel,n=t.isEKMError;if(!r&&!a)return null;var i=r&&p.a.createElement(O["a"],{className:"c-message_kit__resend__resend",onClick:this.resend},j.t("Try again"));var s=a&&p.a.createElement(O["a"],{className:"c-message_kit__resend__cancel",onClick:this.cancel},n?j.t("Clear"):j.t("Cancel"));var o=i&&s&&p.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return p.a.createElement("div",{className:"c-message_kit__resend__footer"},p.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),p.a.createElement("div",null,this.getText(),"\u2002",i,o,s))}},{key:"render",value:function e(){var t=this.props.msg,r=t.showResend,a=t.showCancel;var n=Object(_["isUnprocessedMsg"])(this.props.msg);if(!r&&!a&&!n)return this.props.children;var i=f()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":r||a,"c-message_kit__resend--unprocessed":n});return p.a.createElement("div",{className:i},this.props.children,this.renderFooter())}}]);return t}(d["PureComponent"]);w.displayName="MessageResend";w.defaultProps=S;var I={resendMessage:function e(){return b["a"].apply(void 0,arguments)},removeMessageAndTimestamp:function e(){return g["a"].apply(void 0,arguments)}};t["a"]=Object(v["connect"])(null,I)(w)},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(0);var l=r(15);var c=r(12);var u=r(48);var d=r(564);var p=r(1216);var v=r(73);var m=r(6);var h=r.n(m);var f=r(7);var b=r.n(f);var g=r(8);var _=r.n(g);var y=r(9);var O=r.n(y);var k=r(2);var E=r(1757);var j=r(13);var C=r(16);var S=r.n(C);var w=r(87);var I=r(4);var T=r(195);var A=r(122);var N=r(10);var P=r(772);var R=r(45);var M=r(21);var x=r(308);var D=r(1344);var F=r(849);var L=r(39);var B=r(376);var U=r(714);var q=r(68);var G=r(1253);var H=r(1517);function W(e){return new Promise(function(t,r){var a=Object(c["b"])();try{var n=new FileReader;n.onload=function(e){var r=Object(H["readFromBinaryFile"])(e.target.result);r&&"number"===typeof r.Orientation?t(r.Orientation):t(null)};n.readAsArrayBuffer(e)}catch(e){a.warn("Error reading exif data");a.warn(e);r(e)}})}var V=r(35);var K=r(31);var z=r(391);var Q=r(208);var Y=r(863);var J=r(152);var X=r(84);var Z=r(28);var $=r(179);var ee=r(54);var te=r(317);var re=r(126);var ae=r(51);var ne=r(2414);var ie=r(1768);var se={fileId:o["b"].string.isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string,initialFileTitle:o["b"].string,renamePendingFile:o["b"].func.isRequired};var oe={threadTs:void 0,initialFileTitle:void 0};var le=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleRename=r.handleRename.bind(r);return r}b()(t,[{key:"handleRename",value:function e(t){var r=this.props,a=r.fileId,n=r.channelId,i=r.threadTs;this.props.renamePendingFile({channelId:n,threadTs:i,fileId:a,title:Object(k["trim"])(t)})}},{key:"render",value:function e(){var t=this.props.initialFileTitle;return s.a.createElement(ie["a"],{initialFileTitle:t,handleRename:this.handleRename})}}]);return t}(i["PureComponent"]);le.displayName="RenamePendingFileDialog";le.defaultProps=oe;var ce={renamePendingFile:function e(){return d["renamePendingFile"].apply(void 0,arguments)}};var ue=Object(j["connect"])(null,ce)(le);var de=Object(l["b"])("Opens the rename file dialog",function(e,t,r){e(Object(u["openModal"])({element:s.a.createElement(ue,r),isStackable:true}))});de.propTypes={file:w["a"].File().isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string};var pe=de;var ve=r(77);var me=r(30);var he=r(706);var fe=r(22);var be={arrowDirection:o["b"].oneOf(["left","right"]).isRequired,isShowing:o["b"].bool,onClick:o["b"].func};var ge={isShowing:true,onClick:k["noop"]};var _e=function e(t){var r=t.arrowDirection,a=t.onClick,n=t.isShowing;var i=S()("p-gallery_scroller__arrow","p-gallery_scroller__"+r+"_arrow",{"p-gallery_scroller__arrow_hidden":!n});return s.a.createElement("div",{className:i},s.a.createElement(fe["b"],{type:"circle-fill",className:"p-gallery_scroller__arrow_fill",size:"inherit"}),s.a.createElement(fe["b"],{type:"arrow-large-"+r,className:"p-gallery_scroller__arrow_icon",onClick:function e(t){return a(t,r)}}))};_e.displayName="GalleryScrollerArrow";_e.defaultProps=ge;var ye=_e;var Oe=r(3213);var ke={children:o["b"].node.isRequired,width:o["b"].number.isRequired,pageSize:o["b"].number};var Ee={pageSize:100};var je={right:"right",left:"left"};var Ce=160;var Se=50;var we=50;var Ie=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onArrowClick=r.onArrowClick.bind(r);r.onScroll=Object(k["throttle"])(r.onScroll,Se).bind(r);r.onContentMutation=r.onContentMutation.bind(r);r.setWrapperRef=r.setWrapperRef.bind(r);r.setContentRef=r.setContentRef.bind(r);r.wrapper=void 0;r.content=void 0;r.mutationObserver=new MutationObserver(r.onContentMutation);r.state={scrollLeft:0,scrollWidth:void 0};return r}b()(t,[{key:"componentDidMount",value:function e(){this.content&&this.mutationObserver.observe(this.content,{childList:true,subtree:true})}},{key:"componentWillUnmount",value:function e(){this.mutationObserver.disconnect()}},{key:"onArrowClick",value:function e(t,r){t.preventDefault();var a=this.props.pageSize;var n=this.state.scrollLeft;var i=r===je.right;var s=i?a:-a;var o=n+s;var l=this.getMinScroll();var c=this.getMaxScroll();var u=Object(k["clamp"])(o,l,c);c-u<we?u=c:u-l<we&&(u=l);this.scrollWithAnimation(u)}},{key:"onScroll",value:function e(t){if(!t)return;var r=t.scrollLeft;this.setState(function(){return{scrollLeft:r}})}},{key:"onContentMutation",value:function e(){var t=this.state.scrollWidth;var r=this.content&&this.content.scrollWidth;t!==r&&this.setState(function(e){return n()({},e,{scrollWidth:r})})}},{key:"getMinScroll",value:function e(){return 0}},{key:"getMaxScroll",value:function e(){if(!this.content)return 0;var t=this.props.width;var r=this.state.scrollWidth;return r-t}},{key:"setWrapperRef",value:function e(t){if(!t)return;this.wrapper=t;var r=this.wrapper.scrollLeft;this.setState(function(e){return n()({},e,{scrollLeft:r})})}},{key:"setContentRef",value:function e(t){if(!t)return;this.content=t;var r=this.content.scrollWidth;this.setState(function(e){return n()({},e,{scrollWidth:r})})}},{key:"shouldShowArrow",value:function e(t){var r=t.arrowDirection;var a=this.props.width;var n=this.state,i=n.scrollLeft,s=n.scrollWidth;var o=this.getMinScroll();var l=this.getMaxScroll();if(r===je.right){var c=i<l;var u=s>a;return c&&u}return i>o}},{key:"scrollWithAnimation",value:function e(t){var r=this;var a=0;var n=function e(t){var n=t.value,i=t.nextTick;var s=r.wrapper.scrollLeft+n+a;var o=Math.round(s);a=s-o;r.wrapper.scrollLeft=o;i()};this.trackAnimation&&this.trackAnimation.cancel();this.trackAnimation=Object(he["a"])({fromValue:this.wrapper.scrollLeft,toValue:t,duration:Ce,delta:true,onTick:n})}},{key:"renderArrow",value:function e(t){var r=t.arrowDirection;var a=this.shouldShowArrow({arrowDirection:r});return s.a.createElement(ye,{arrowDirection:r,onClick:this.onArrowClick,isShowing:a})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.width,n=r.children;var i=S()("p-galler_scroller__wrapper",{"p-galler_scroller__wrapper--can_scroll":Object(me["isChrome"])()});return s.a.createElement("div",{className:"p-gallery_scroller",style:{width:a}},s.a.createElement("div",{className:i,ref:this.setWrapperRef,onScroll:function e(r){return t.onScroll(r&&r.target)}},s.a.createElement("div",{className:"p-gallery_scroller__content",ref:this.setContentRef},n)),this.renderArrow({arrowDirection:je.left}),this.renderArrow({arrowDirection:je.right}))}}]);return t}(i["Component"]);Ie.displayName="GalleryScroller";Ie.defaultProps=Ee;var Te=Ie;var Ae=Te;var Ne=r(1551);var Pe=r(1088);var Re=r(1090);var Me=r(1572);var xe=r(3217);var De=new N["b"]("multi_file_upload");var Fe={file:o["b"].object.isRequired,isCompact:o["b"].bool,className:o["b"].string,onEditFile:o["b"].func};var Le={isCompact:false,className:null,onEditFile:null};var Be=function(e){O()(t,e);function t(){h()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"renderEditFileButton",value:function e(){var t=this.props.onEditFile;if(!t)return null;return s.a.createElement(Z["c"],{className:"p-pending_file__edit_btn","aria-label":De.t("Edit file title"),onClick:t},De.t("Edit"))}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.className,n=t.isCompact;var i=S()("p-pending_file",a,{"p-pending_file--compact":n});var o=n?s.a.createElement(Me["a"],{file:r,isCompact:true}):s.a.createElement(Re["a"],{file:r,showThumbnail:false},this.renderEditFileButton());return s.a.createElement(Pe["a"],{file:r,className:i,showActions:false},o)}}]);return t}(i["PureComponent"]);Be.displayName="PendingFile";Be.defaultProps=Le;var Ue=Be;var qe=r(1763);var Ge=r(693);var He=r(2385);var We=new N["b"]("multi_file_upload");var Ve={fileId:o["b"].string,channelId:o["b"].string,threadTs:o["b"].string,title:o["b"].string,closeModal:o["b"].func,openRenamePendingFileDialog:o["b"].func};var Ke={fileId:void 0,channelId:void 0,threadTs:void 0,title:void 0,closeModal:k["noop"],openRenamePendingFileDialog:k["noop"]};var ze=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.closeModal=r.closeModal.bind(r);r.renameFile=r.renameFile.bind(r);return r}b()(t,[{key:"closeModal",value:function e(){this.props.closeModal()}},{key:"renameFile",value:function e(){var t=this.props,r=t.fileId,a=t.channelId,n=t.threadTs,i=t.title;this.props.openRenamePendingFileDialog({fileId:r,channelId:a,threadTs:n,initialFileTitle:i})}},{key:"render",value:function e(){var t=this.props.title;return s.a.createElement("div",{className:"p-file_viewer__header"},s.a.createElement("div",{className:"p-file_viewer__header__meta"},s.a.createElement("div",{className:"p-file_viewer__header__meta__stack"},s.a.createElement("div",{className:"bold"},t),s.a.createElement(Z["c"],{className:"p-file_viewer__header__meta__minor p-file_viewer__header__edit_btn","aria-label":We.t("Edit file title"),onClick:this.renameFile},We.t("Edit")))),s.a.createElement("div",{className:"p-file_viewer__header__actions"},s.a.createElement(Ge["a"],{className:"p-file_viewer__header__button",icon:"times",backgroundStyle:null,onClick:this.closeModal})))}}]);return t}(i["PureComponent"]);ze.displayName="Header";ze.defaultProps=Ke;var Qe=function e(t){return{closeModal:function e(){return t(Object(u["closeModal"])())},openRenamePendingFileDialog:function e(r){return t(pe(r))}}};var Ye=Object(j["connect"])(null,Qe)(ze);var Je=r(1836);var Xe={fileId:o["b"].string.isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string,title:o["b"].string,image:o["b"].shape({src:o["b"].string,width:o["b"].number,height:o["b"].number,orientation:o["b"].number})};var Ze={threadTs:void 0,title:void 0,image:void 0};var $e=function(e){O()(t,e);function t(){h()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props,r=t.image,a=t.title,n=t.fileId,i=t.channelId,o=t.threadTs;return s.a.createElement(qe["a"],{contentLabel:a},s.a.createElement(Ye,{title:a,fileId:n,channelId:i,threadTs:o}),s.a.createElement(Je["a"],{title:a,image:r}))}}]);return t}(i["Component"]);$e.displayName="FileViewer";$e.defaultProps=Ze;var et=function e(t,r){var a=r.fileId,n=r.channelId,i=r.threadTs,s=r.image;if(!a||!n||!s)return null;var o=Object(d["getPendingFileById"])(t,{fileId:a,channelId:n,threadTs:i});var l=o.title||o.name;return{fileId:a,channelId:n,threadTs:i,title:l,image:s}};var tt=Object(j["connect"])(et)($e);var rt=Object(l["b"])("Opens the PendingFileViewer",function(e,t,r){e(Object(u["openModal"])({element:s.a.createElement(tt,r),isStackable:true}))});rt.propTypes=n()({},tt.propTypes);var at=rt;function nt(e){var t=e.replace(/^data:([^;]+);base64,/gim,"");var r=atob(t);var a=r.length;var n=new Uint8Array(a);for(var i=0;i<a;i++)n[i]=r.charCodeAt(i);return n.buffer}var it=function(e){return new Promise(function(t,r){if(!e||!(e instanceof File)){r(new Error("Invalid file argument provided to getPendingFileData"));return}if(!window.FileReader){r(new Error("Cannot read file data, browser does not support FileReader"));return}if(e.dataUrl){t({dataUrl:e.dataUrl,orientation:e.orientation,width:e.width,height:e.height});return}var a=new FileReader;a.onload=function(r){var a=r.target.result;var n=nt(a);var i=Object(H["readFromBinaryFile"])(n);var s=i&&"number"===typeof i.Orientation;var o=s?i.Orientation:null;var l=new Image;l.onload=function(){var r=l.width;var n=l.height;e.dataUrl=a;e.orientation=o;e.width=r;e.height=n;t({dataUrl:a,orientation:o,width:r,height:n})};l.src=a};a.onloadstart=function(e){Object(k["noop"])(e)};a.onerror=function(e){a.abort();r(e)};a.readAsDataURL(e)})};var st=r(96);var ot=r(3219);var lt=new N["b"]("multi_file_upload");var ct={file:o["b"].object.isRequired,channelId:o["b"].string,threadTs:o["b"].string,useThumbnail:o["b"].bool,className:o["b"].string,openPendingFileViewer:o["b"].func};var ut={channelId:void 0,threadTs:void 0,useThumbnail:false,className:null,openPendingFileViewer:k["noop"]};var dt=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.state={dataUrl:void 0,orientation:void 0,height:void 0,width:void 0,isLoading:true};return r}b()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props.file;it(r).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.dataUrl,a=e.orientation,n=e.height,i=e.width;t.setState(function(){return{dataUrl:r,orientation:a,height:n,width:i}});requestAnimationFrame(function(){t.setState(function(){return{isLoading:false}})})}).catch(function(e){Object(k["noop"])(e)})}},{key:"onClick",value:function e(t){t.stopPropagation();var r=this.props,a=r.file,n=r.channelId,i=r.threadTs;var s=this.state,o=s.dataUrl,l=s.width,c=s.height,u=s.orientation;this.props.openPendingFileViewer({fileId:a.id,channelId:n,threadTs:i,title:a.title||a.name,image:{src:o,width:l,height:c,orientation:u}})}},{key:"renderImage",value:function e(){var t=this.props.file;var r=this.state.dataUrl;return s.a.createElement("img",{className:"p-pending_image_file__img",src:r,alt:Object(ve["getFileDisplayName"])(t)})}},{key:"renderImageThumbnail",value:function e(){var t=this.props.file;var r=this.state||{},a=r.dataUrl;var n=a?{backgroundImage:"url('"+a+"')"}:null;return s.a.createElement("span",{className:"p-pending_image_file__thumbnail",style:n,ariaLabel:Object(ve["getFileDisplayName"])(t)})}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.useThumbnail,n=t.className;var i=this.state,o=i.isLoading,l=i.orientation,c=i.height,u=i.width;var d=a?1:c/u;if(!Object(ve["isPendingImageFile"])(r))return null;var p=S()("p-pending_image_file",n,{"p-pending_image_file__thumbnail_container":a,"p-pending_image_file__loading":o});return s.a.createElement(Z["c"],{className:"p-pending_image_file__btn",onClick:this.onClick,"aria-label":lt.t("Preview image"),style:Object(ve["getOrientationTransformStyles"])({orientation:l,imageDimensionRatio:d})},s.a.createElement("div",{className:p},a?this.renderImageThumbnail():this.renderImage(),s.a.createElement(st["a"],{size:"large",className:"p-pending_image_file__loading_spinner"})))}}]);return t}(i["PureComponent"]);dt.displayName="PendingImageFile";dt.defaultProps=ut;var pt=function e(t){return{openPendingFileViewer:function e(){return t(at.apply(void 0,arguments))}}};var vt=Object(j["connect"])(null,pt)(dt);var mt=new N["b"]("multi_file_upload");var ht={fileId:o["b"].string.isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string,removePendingFile:o["b"].func,featureMultiFileUpload:o["b"].bool};var ft={threadTs:null,removePendingFile:k["noop"],featureMultiFileUpload:true};var bt=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onRemoveFileClick=r.onRemoveFileClick.bind(r);return r}b()(t,[{key:"onRemoveFileClick",value:function e(t){t.stopPropagation();var r=this.props,a=r.fileId,n=r.channelId,i=r.threadTs;if(!a||!n)return;this.props.removePendingFile({channelId:n,threadTs:i,fileId:a})}},{key:"render",value:function e(){var t=this.props.featureMultiFileUpload;if(!t)return null;return s.a.createElement(Z["c"],{className:"p-multi_file_upload__remove_btn",onClick:this.onRemoveFileClick,"aria-label":mt.t("Remove file")},s.a.createElement(fe["b"],{type:"circle-fill",className:"p-multi_file_upload__remove_btn_circle"}),s.a.createElement(fe["b"],{type:"times-circle",className:"p-multi_file_upload__remove_btn_times"}))}}]);return t}(i["PureComponent"]);bt.displayName="RemoveFileButton";bt.defaultProps=ft;var gt=Object(j["connect"])(null,{removePendingFile:d["removePendingFile"]})(bt);var _t=r(3221);var yt=new N["b"]("multi_file_upload");var Ot={files:o["b"].arrayOf(o["b"].object),channelId:o["b"].string.isRequired,threadTs:o["b"].string,isCompact:o["b"].bool,processAndAddPendingFiles:o["b"].func,openRenamePendingFileDialog:o["b"].func,filterFilesForUpload:o["b"].func};var kt={files:[],threadTs:null,isCompact:false,processAndAddPendingFiles:k["noop"],openRenamePendingFileDialog:k["noop"],filterFilesForUpload:k["noop"]};var Et=184;var jt=26214400;var Ct=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.hiddenFileInputRef=s.a.createRef();r.onAddFileClick=r.onAddFileClick.bind(r);r.onPendingFileClick=r.onPendingFileClick.bind(r);r.onFilesSelectedHandler=r.onFilesSelectedHandler.bind(r);return r}b()(t,[{key:"onAddFileClick",value:function e(){this.hiddenFileInputRef&&this.hiddenFileInputRef.current&&this.hiddenFileInputRef.current.click()}},{key:"onPendingFileClick",value:function e(t,r){t.stopPropagation();var a=this.props,n=a.channelId,i=a.threadTs;var s=r.title||r.name;this.props.openRenamePendingFileDialog({fileId:r.id,channelId:n,threadTs:i,initialFileTitle:s})}},{key:"onFilesSelectedHandler",value:function e(t){var r=this;if(!t||!t.length)return Promise.resolve();var a=this.props,n=a.channelId,i=a.threadTs;return this.props.filterFilesForUpload({selectedFiles:t,channelId:n,threadTs:i}).then(function(e){if(!e||!e.length)return;r.props.processAndAddPendingFiles({channelId:n,threadTs:i,files:e})})}},{key:"getComponentSize",value:function e(){var t=this.props,r=t.files,a=t.isCompact;if(a)return"small";var n=r&&1===r.length&&this.shouldRenderPendingImage(r[0]);if(n)return"large";return"medium"}},{key:"shouldRenderPendingImage",value:function e(t){return Object(ve["isPendingImageFile"])(t)&&t.size<jt}},{key:"renderRemoveFileButton",value:function e(t){var r=this.props,a=r.files,n=r.channelId,i=r.threadTs;if(a&&a.length<2)return null;return s.a.createElement(gt,{fileId:t,channelId:n,threadTs:i})}},{key:"renderPendingImageFile",value:function e(t){var r=this.props,a=r.files,n=r.channelId,i=r.threadTs,o=r.isCompact;var l=a&&a.length>1||o;return s.a.createElement(vt,{file:t,channelId:n,threadTs:i,useThumbnail:l})}},{key:"renderPendingFile",value:function e(t){var r=this;var a=this.props.isCompact;return s.a.createElement(Ue,{file:t,isCompact:a,onEditFile:function e(a){return r.onPendingFileClick(a,t)}})}},{key:"renderAddFileButton",value:function e(){var t=this.props.files;var r=t&&t.length||0;var a=r<L["MAX_FILE_UPLOAD_COUNT"];var n=r>1;var i=yt.t("Add file");var o=yt.t("({selectedFileCount} of {maxFileUploadCount} selected)",{selectedFileCount:r,maxFileUploadCount:L["MAX_FILE_UPLOAD_COUNT"]});return s.a.createElement("div",{className:"p-multi_file_upload__add_file_btn_container"},a?s.a.createElement(Z["c"],{className:"p-multi_file_upload__add_file_btn","aria-label":i,onClick:this.onAddFileClick},i,s.a.createElement(Ne["a"],{ref:this.hiddenFileInputRef,onFilesSelectedHandler:this.onFilesSelectedHandler})):null,n?s.a.createElement("span",{className:"p-multi_file_upload__file_count"},o):null)}},{key:"renderFileGallery",value:function e(){var t=this;var r=this.props.files;return s.a.createElement("div",{className:"p-multi_file_upload__file_gallery"},r.map(function(e){return s.a.createElement("div",{className:"p-multi_file_upload__file_container",key:e.id},t.shouldRenderPendingImage(e)?t.renderPendingImageFile(e):t.renderPendingFile(e),t.renderRemoveFileButton(e.id))}))}},{key:"renderFileGalleryScroller",value:function e(){var t=this;var r=1.25*Et;return s.a.createElement(ne["a"],{disableHeight:true},function(e){var a=e.width;return s.a.createElement(Ae,{width:a,pageSize:r},t.renderFileGallery())})}},{key:"render",value:function e(){var t=this.props.files;if(!t)return null;var r=this.getComponentSize();var a=S()("p-multi_file_upload__container","p-multi_file_upload__container--"+r);return s.a.createElement("div",{className:a},this.renderFileGalleryScroller(),this.renderAddFileButton())}}]);return t}(i["Component"]);Ct.displayName="MultiFileUpload";Ct.defaultProps=kt;function St(e,t){var r=t.channelId,a=t.threadTs;return{files:Object(d["getPendingFilesforInput"])(e,{channelId:r,threadTs:a})}}var wt=Object(j["connect"])(St,{processAndAddPendingFiles:d["processAndAddPendingFiles"],openRenamePendingFileDialog:pe,filterFilesForUpload:p["a"]})(Ct);var It=wt;var Tt=r(1537);var At=r(1538);var Nt=r(1328);var Pt=r(1539);var Rt=r(4382);var Mt=r(4401);var xt=r(3223);var Dt=new N["b"]("file-upload");var Ft="file-upload-name";var Lt="file-upload-share-with";var Bt={files:o["b"].array.isRequired,selectedChannelId:o["b"].string,setSelectedChannel:o["b"].func,canPostInSelectedChannel:o["b"].bool,canThread:o["b"].bool,closeModal:o["b"].func,switchToChannel:o["b"].func,getShareableChannelId:o["b"].func,msgText:o["b"].string,setMsgText:o["b"].func,msgOps:o["b"].array,setMsgOps:o["b"].func,initialContents:o["b"].object,converMsgOpsToRichTextMessage:o["b"].func,disallowedKeywordInMsgText:o["b"].string,initialText:o["b"].string,initialBroadcast:o["b"].bool,retentionDuration:o["b"].number,threadTs:o["b"].string,overStorageLimit:o["b"].bool.isRequired,isStdPlan:o["b"].bool,isPlusPlan:o["b"].bool,isEnterprisePlan:o["b"].bool,channelType:o["b"].string,selectedChannelName:o["b"].string,fromPaste:o["b"].bool,teamId:o["b"].string,inputProxy:o["b"].object,isOffline:o["b"].bool,featureOfflineMode:o["b"].bool,featureSonicInputs:o["b"].bool,featureWysiwygComposer:o["b"].bool,clientToolBar:o["b"].bool,currentChannelId:o["b"].string,metadata:o["b"].object,clogger:o["b"].object.isRequired,pendingFiles:o["b"].arrayOf(w["a"].File()),clearPendingFilesForDialog:o["b"].func,isLegacyDropboxPicker:o["b"].bool};var Ut={selectedChannelId:null,setSelectedChannel:k["noop"],canPostInSelectedChannel:false,canThread:false,closeModal:k["noop"],switchToChannel:k["noop"],getShareableChannelId:k["noop"],msgText:"",setMsgText:k["noop"],msgOps:void 0,setMsgOps:k["noop"],initialContents:void 0,converMsgOpsToRichTextMessage:k["noop"],disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:false,retentionDuration:null,threadTs:null,isStdPlan:false,isPlusPlan:false,isEnterprisePlan:false,channelType:"channel",selectedChannelName:"",fromPaste:false,teamId:void 0,inputProxy:void 0,isOffline:false,featureOfflineMode:false,featureSonicInputs:false,featureWysiwygComposer:false,clientToolBar:false,currentChannelId:void 0,pendingFiles:null,clearPendingFilesForDialog:k["noop"],metadata:void 0,isLegacyDropboxPicker:false};var qt=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(E["a"])(r,["onGo","onCancel","onCancelAll","onCancelDiscard","closeDialog","onTextChange","onFileNameChange","onShareWithChange","onBroadcastChange","onEditCollapsedFileNameClick","setFileNameInputRef","clogPricingLinkClick"]);r.fileNameInput=null;r.initialText=r.props.initialText;r.initialContents=r.props.initialContents;r.logger=Object(c["b"])();r.state=n()({confirmClose:false,confirmCancelAll:false,submitting:false},r.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast});return r}b()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.files,a=t.clogger;var n=this.state||0,i=n.fileIndex;this.shouldShowStorageWarning()&&a.track(M["l"].GROWTH_PRICING,{contexts:{ui_context:{action:M["w"].IMPRESSION,step:M["A"].FILE_UPLOAD,ui_component:M["x"].FILE_STORAGE_LIMIT_BANNER}}});if(this.isMultiFileUpload())return;r&&this.maybeLoadImagePreview(r[i])}},{key:"onCancel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props,a=r.initialText,n=r.msgText;var i=this.state,s=i.confirmClose,o=i.confirmCancelAll;if(!s&&n&&n.length>L["CONFIRM_DISCARD_TEXT_LENGTH"]&&n!==a){this.setState(function(){return{confirmClose:true,confirmCancelAll:t}});return false}t||!this.hasMoreFiles()||o?this.closeDialog():this.goToNextFile();return false}},{key:"onCancelAll",value:function e(){return this.onCancel(true)}},{key:"onCancelDiscard",value:function e(){this.setState(function(){return{confirmClose:false,confirmCancelAll:false}});return false}},{key:"onGo",value:function e(){var t=this;var r=this.state,a=r.shareWith,n=r.fileName,i=r.fileIndex,s=r.confirmClose,o=r.broadcast;var l=this.props,c=l.selectedChannelId,u=l.msgText,d=l.msgOps,p=l.threadTs,v=l.teamId,m=l.pendingFiles,h=l.featureWysiwygComposer;if(this.isGoDisabled())return false;if(s)return this.onCancel();this.initialText=null;this.initialContents=null;var f=this.props,b=f.switchToChannel,g=f.files,_=f.getShareableChannelId,y=f.metadata;var O=a?Object(z["a"])():void 0;var k=a?_({channelOrMemberId:c}):Promise.resolve(null);k.then(function(e){var r=void 0;h&&(r=t.props.converMsgOpsToRichTextMessage({msgOps:d,channelId:e,inThread:!!p}));if(t.isMultiFileUpload()){t.closeDialog();var s=Object(Y["a"])(v);s.uploadFiles({files:m,shareData:{channelId:e,clientMsgId:O,introMessage:a?u:null,blocks:h&&a?r:null,threadTs:e?p:null,broadcast:e&&p?o:null,metadata:y}}).then(function(){t.logger.info("UPLOAD-DIALOG","Multi-file upload complete for: "+O)}).catch(function(e){t.logger.warn("Multi-file upload failed for: "+O+"; with error "+e)});t.logger.info("UPLOAD-DIALOG","Beginning multi-file upload for: "+O)}else{t.hasMoreFiles()||t.closeDialog();var l=g[i];var c=Object(Y["a"])(v);c.uploadFiles({files:[l],shareData:{channelId:e,clientMsgId:O,title:n||t.initialFileName(l),link:l.link,introMessage:a?u:null,blocks:h&&a?r:null,threadTs:e?p:null,broadcast:e&&p?o:null,isBox:l.is_box,isDropbox:l.is_dropbox,metadata:y}})}t.hasMoreFiles()?t.goToNextFile():e&&!p&&b({id:e});t.setState(function(){return{submitting:false}})});this.setState(function(){return{submitting:true}});return false}},{key:"onTextChange",value:function e(t){var r=t.text,a=t.msgOps,n=t.overLimit;var i=this.props.featureWysiwygComposer;i?this.props.setMsgOps(a):this.props.setMsgText(r);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>L["MAX_FILENAME_LENGTH"]}})}},{key:"onShareWithChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{shareWith:!!r}})}},{key:"onBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"onEditCollapsedFileNameClick",value:function e(){this.setState(function(){return{collapseFileNameInput:false}});this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function e(t){this.fileNameInput=t}},{key:"getStateForFileAtIndex",value:function e(t){var r=this.props.files;var a=r[t];var n=a&&Object(k["includes"])(a.type,"image");return{fileIndex:t,defaultFileName:this.initialFileName(a),fileName:"",shareWith:true,previewDataUrl:null,overMsgLengthLimit:false,overFileNameLimit:false,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:false}}},{key:"getStorageWarning",value:function e(){var t=this;var r=this.props,a=r.isStdPlan,n=r.isPlusPlan,i=r.isEnterprisePlan;if(!this.shouldShowStorageWarning())return null;var o=function e(r){var a=r.text;return s.a.createElement(ae["a"],{href:"/pricing?ui_step="+M["A"].FILE_UPLOAD+"&ui_element="+M["z"].PRICING_LINK,target:"_blank",rel:"noopener noreferrer",onClick:t.clogPricingLinkClick,"data-qa":"file-upload-dialog_pricing-link"},a)};if(a)return Dt.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,o);if(n)return Dt.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,o);if(i)return Dt.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return s.a.createElement(te["a"],{href:"/help/requests/new",target:"_blank"},t)});return Dt.rt("Your free workspace is limited to 5 GB of files. If you upload more files, you\u2019ll lose access to some older ones. To view them again and get more space, <a>upgrade to a paid plan</a>.",null,o)}},{key:"shouldShowStorageWarning",value:function e(){var t=this.props,r=t.overStorageLimit,a=t.files;var n=this.state.fileIndex;var i=a[n];return r&&!i.is_dropbox&&!i.is_box&&!i.is_external}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(M["l"].GROWTH_PRICING,{contexts:{ui_context:{action:M["w"].CLICK,step:M["A"].FILE_UPLOAD,ui_element:M["z"].PRICING_LINK,ui_component:M["x"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isMultiFileUpload",value:function e(){var t=this.props.files;return!Object(k["some"])(t,function(e){return e.is_box||e.is_dropbox})}},{key:"isMultipleFiles",value:function e(){if(this.isMultiFileUpload())return false;return this.props.files.length>1}},{key:"hasMoreFiles",value:function e(){if(!this.isMultipleFiles())return false;var t=this.props.files;var r=this.state.fileIndex;return t.length>r+1}},{key:"goToNextFile",value:function e(){var t=this;var r=this.props,a=r.files,i=r.setMsgText;var s=this.state.fileIndex;this.setState(function(){return n()({confirmClose:false},t.getStateForFileAtIndex(s+1))},function(){t.maybeLoadImagePreview(a[s+1])});i("")}},{key:"closeDialog",value:function e(){var t=this.props,r=t.initialBroadcast,a=t.threadTs,n=t.featureSonicInputs,i=t.currentChannelId,s=t.featureWysiwygComposer;var o=this.props.inputProxy;this.props.closeModal();this.isMultiFileUpload()&&this.props.clearPendingFilesForDialog();if(s&&this.initialContents){o||(o=Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:i}));if(!o)return;o.setContents(this.initialContents);o.focus();return}if(this.initialText){var l=this.initialText;setTimeout(function(){if(o){o.setText(l);o.setBroadcast(r);o.focus()}else if(a)Object(U["g"])(l,r);else if(n){var e=Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:i});e&&e.setText(l)}else Object(B["e"])(l)},10)}}},{key:"initialFileName",value:function e(t){if(!t.name||this.props.fromPaste)return Dt.t("Pasted image at {date}",{date:Object(P["a"])(Date.now()/1e3)});return t.name}},{key:"isUsingNewDropboxApp",value:function e(){var t=this.props,r=t.isLegacyDropboxPicker,a=t.files;return Object(k["some"])(a,function(e){return e.is_dropbox})&&r}},{key:"isGoDisabled",value:function e(){var t=this.state,r=t.submitting,a=t.shareWith,n=t.overMsgLengthLimit,i=t.overFileNameLimit;var s=this.props,o=s.canPostInSelectedChannel,l=s.threadTs,c=s.canThread,u=s.disallowedKeywordInMsgText,d=s.isOffline,p=s.featureOfflineMode;return r||a&&!o&&!l||a&&l&&!c||a&&!!u||n||i||p&&d}},{key:"maybeLoadImagePreview",value:function e(t){var r=this;if(!window.FileReader)return;if(t.is_box||t.is_dropbox)return;if("string"===typeof t){this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+t,collapseFileNameInput:true}});return}try{var a=new FileReader;a.onload=function(e){var a=e.target.result;if(!Object(k["startsWith"])(a,"data:image/"))return;r.loadImagePreviewWithOrientation(t,a)};a.onloadstart=function(e){if(e.total>33554432){r.logger.info("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total);a.abort()}};a.readAsDataURL(t)}catch(e){this.logger.warn("Error loading upload preview");this.logger.warn(e)}}},{key:"loadImagePreviewWithOrientation",value:function e(t,r){var a=this;W(t).then(function(e){if(!e||1===e){a.setState(function(){return{previewDataUrl:r,collapseFileNameInput:true}});return}var t=new Image;t.onload=function(){var n=t.width;var i=t.height;var s=i/n;a.setState(function(){return{previewDataUrl:r,previewImageDimensionsRatio:s,exifOrientation:e,collapseFileNameInput:true}})};t.src=r})}},{key:"renderBroadcastCheckbox",value:function e(){var t=this.props,r=t.threadTs,a=t.canPostInSelectedChannel,n=t.channelType,i=t.selectedChannelName;var o=this.state.broadcast;if(!r||!a)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},s.a.createElement(Mt["a"],{channelType:n,selectedChannelName:i,value:o,onChange:this.onBroadcastChange}))}},{key:"renderImagePreview",value:function e(){var t=this.state,r=t.previewDataUrl,a=t.previewImageDimensionsRatio,n=t.exifOrientation,i=t.fileName;if(!this.state.previewDataUrl)return null;var o=Dt.t("Preview of {fileName}",{fileName:i});var l=void 0;2===n?l="scaleX(-1)":3===n?l="rotate(180deg)":4===n?l="rotate(180deg) scaleX(-1)":5===n?l="rotate(90deg) scale("+a+", -"+a+")":6===n?l="rotate(90deg) scale("+a+")":7===n?l="rotate(90deg) scale(-"+a+", "+a+")":8===n&&(l="rotate(-90deg) scale("+a+", "+a+")");var c={};l&&(c.transform=l);return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement("div",{className:"p-file_upload_dialog__preview"},s.a.createElement("div",{style:c},s.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:r,alt:o}))))}},{key:"renderShareWith",value:function e(){var t=this.props,r=t.threadTs,a=t.selectedChannelId;var n=this.state.shareWith;if(r)return s.a.createElement(Rt["a"],{channelId:a,threadTs:r});return s.a.createElement(ee["a"],{text:Dt.t("Share with:"),htmlFor:Lt,type:"inline"},s.a.createElement(re["a"],{id:Lt,defaultChecked:n,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.setSelectedChannel,n=t.threadTs;var i=this.state.shareWith;if(n)return null;return s.a.createElement(At["a"],{initialChannelId:r,onChange:a,isDisabled:!i,optionsListOffsetBottom:window.innerHeight})}},{key:"renderCancelAllButton",value:function e(){return s.a.createElement(Z["d"],{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},Dt.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function e(){if(!this.isMultipleFiles())return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderFooterExtra",value:function e(){if(this.isMultipleFiles())return this.renderCancelAllButton();return s.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function e(){var t=this.getStorageWarning();var r=Object(Pt["a"])(this.props);if(!r&&!t)return null;var a=this.props.overStorageLimit?"info":"warning";return s.a.createElement("div",{className:"p-file_upload_dialog__section","data-qa":"share-dialog_warning"},s.a.createElement(J["d"],{type:"inline",level:a},t?s.a.createElement("span",{className:"p-share_dialog__warning_message"},t):null,r))}},{key:"renderCollapsedFileName",value:function e(){var t=this.state,r=t.defaultFileName,a=t.collapseFileNameInput;var n=S()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!a});var i=Dt.rt("edit");var o=Dt.rt("Edit file name: {fileName}",{fileName:r});return s.a.createElement("div",{className:n},s.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},r),s.a.createElement(ae["a"],{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:a?null:"-1","aria-label":o},i))}},{key:"renderExpandedFileNameInput",value:function e(){if(this.isUsingNewDropboxApp())return null;var t=this.state,r=t.fileName,a=t.defaultFileName,n=t.collapseFileNameInput;var i=S()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":n});return s.a.createElement(ee["a"],{text:Dt.t("File name"),htmlFor:Ft,className:i},s.a.createElement($["a"],{id:Ft,name:Ft,value:r,maxCharacterLimit:L["MAX_FILENAME_LENGTH"],counterMinimumCharacters:L["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onFileNameChange,placeholder:a,tabIndex:n?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function e(){return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderMultiFileUpload",value:function e(){return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(It,{channelId:d["DIALOG_PENDING_FILES_ID"]}))}},{key:"renderRetentionWarning",value:function e(){var t=this.props.retentionDuration;if(!t)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},s.a.createElement("span",null,Dt.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(G["a"])(t)})))}},{key:"render",value:function e(){var t=this.props,r=t.files,a=t.msgText,n=t.selectedChannelId,i=t.threadTs,o=t.featureOfflineMode,l=t.isOffline,c=t.clientToolBar,u=t.featureWysiwygComposer;var d=this.state,p=d.fileIndex,v=d.shareWith,m=d.confirmClose;var h=Dt.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"});var f=Dt.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(f=Dt.t("Upload a file ({number} of {total})",{number:p+1,total:r.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var b=S()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!m,"p-file_upload_dialog--client_toolbar":c||u});var g=o&&l?s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(J["d"],{icon:"cloud-offline",level:"info"},Dt.rt("<strong>No connection.</strong> You'll be able to upload files as soon as you're back online."))):null;return s.a.createElement(X["a"],{className:b,title:f,onClose:this.onCancel,onCancel:m?this.onCancelDiscard:this.onCancel,onGo:m?this.onCancel:this.onGo,useSlackScrollbarWithPadding:true,shouldCloseOnOverlayClick:!m,cancelText:m?Dt.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:m?Dt.t("Yes, discard the message"):Dt.t("Upload"),footerText:m?Dt.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:m?"danger":"primary",showCancelButton:m},this.renderWarning(),g,s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(Tt["a"],{channelId:n,threadTs:i,text:a,initialContents:this.initialContents,onTextChange:this.onTextChange,ariaLabel:h,placeholder:h,enabled:v,focusOnMount:true,onEnter:this.onGo,enableBroadcastKeywords:!i,maxLines:6})),this.renderBroadcastCheckbox(),this.isMultiFileUpload()?this.renderMultiFileUpload():s.a.createElement(s.a.Fragment,null,this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs()),this.renderRetentionWarning())}}]);return t}(i["PureComponent"]);qt.displayName="FileUploadDialog";qt.defaultProps=Ut;function Gt(e,t){var r=Object(V["d"])(e);var a={overStorageLimit:Object(K["isOverStorageLimit"])(r),isStdPlan:Object(K["isOnStandardPlan"])(r),isPlusPlan:Object(K["isOnPlusPlan"])(r),isEnterprisePlan:Object(K["isEnterpriseTeam"])(r)};return n()({},Object(Nt["b"])(e,t),a,{retentionDuration:parseInt(Object(q["a"])(e,"file_retention_type"),10)?Object(q["a"])(e,"file_retention_duration"):null,teamId:r.id,isOffline:!Object(T["c"])(e),featureOfflineMode:Object(I["isFeatureEnabled"])(e,"feature_offline_mode"),featureSonicInputs:Object(I["isFeatureEnabled"])(e,"feature_sonic_inputs"),currentChannelId:Object(v["a"])(e),pendingFiles:Object(d["getPendingFilesforDialog"])(e),clogger:Object(R["a"])({state:e}),clientToolBar:"composer_toolbar"===Object(A["getGroupForUser"])(e,"composer_toolbar"),isLegacyDropboxPicker:Object(q["a"])(e,"dropbox_legacy_picker")})}function Ht(e){return{closeModal:function t(){return e(u["closeModal"].apply(void 0,arguments))},switchToChannel:function t(){return e(x["a"].apply(void 0,arguments))},getShareableChannelId:function t(){return e(D["a"].apply(void 0,arguments))},clearPendingFilesForDialog:function t(){return e(d["clearPendingFilesForDialog"].apply(void 0,arguments))},converMsgOpsToRichTextMessage:function t(){return e(F["a"].apply(void 0,arguments))}}}var Wt=Object(j["connect"])(Gt,Ht)(qt);var Vt=Object(Nt["a"])(Wt);var Kt=r(4168);var zt=Object(l["b"])("Takes N files and opens the file upload dialog",function(e,t,r){var a=r.files,i=r.threadTs,o=r.inputProxy;if(!a||!a.length){Object(c["a"])({getState:t}).error("No files passed to openFileUploadDialog");return null}var l=t();var m=function t(c){if(!c||!c.length)return null;var p=Object(I["isFeatureEnabled"])(l,"feature_sonic_inputs");var m=Object(Kt["a"])(l);var h=Object(v["a"])(l);var f=Jt(i,o);var b=m?null:Qt(i,{inputProxy:o,featureSonicInputs:p,currentChannelId:h});var g=m?Yt({featureWysiwygComposer:m,currentChannelId:h,inputProxyProp:o}):null;e(Object(d["processAndAddPendingFilesForDialog"])({files:c}));return e(Object(u["openModal"])({element:s.a.createElement(Vt,n()({},r,{files:c,initialText:b,initialContents:g,initialBroadcast:f,fileSizeExceeded:c.length<a.length}))}))};return e(Object(p["a"])({selectedFiles:a})).then(function(e){return m(e)})});function Qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.inputProxy,a=t.featureSonicInputs,n=t.currentChannelId;if(r){var i=r.getText();i&&r.clear();return i}if(e&&Object(U["b"])()===e){var s=Object(U["h"])();s&&Object(U["c"])();return s}if(a){var o=Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:n});var l=o.getText();l&&o.clear();return l}var c=Object(B["d"])();c&&Object(B["e"])("");return c}function Yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureWysiwygComposer,r=e.currentChannelId,a=e.inputProxyProp;if(!t)return null;var n=a||Object(Q["a"])({viewContext:L["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:r});if(!n)return null;var i=n.getContents();i&&n.clear();return i}function Jt(e,t){if(t){var r=t.getBroadcast();r&&t.setBroadcast(false);return r}if(!e||Object(U["b"])()!==e)return false;return Object(U["e"])()}var Xt=t["a"]=zt},,function(e,t,r){"use strict";r.d(t,"a",function(){return w});var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(22);var _=r(157);var y=r(51);var O=r(10);var k=new O["b"]("app_actions");var E={onRetry:b["b"].func.isRequired};var j={};var C=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onRetry=r.onRetry.bind(r);r.toastRef=f.a.createRef();return r}u()(t,[{key:"onRetry",value:function e(){this.props.onRetry();var t=this.toastRef.current&&this.toastRef.current.getWrappedInstance&&this.toastRef.current.getWrappedInstance();t&&t.hideToast()}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.onRetry,i=s()(r,["onRetry"]);var o=k.rt("Sorry, that didn\u2019t work. <a>Try again?</a>",null,function(e){var r=e.text;return f.a.createElement(y["a"],{"data-qa":"app_action_toast_retry",onClick:t.onRetry},r)});return f.a.createElement(_["b"],n()({ref:this.toastRef},i),f.a.createElement(g["a"],{type:"warning",danger:true}),f.a.createElement("span",null,o))}}]);return t}(h["PureComponent"]);C.displayName="AppActionFailToast";C.defaultProps=j;var S=C;var w=function e(t){return f.a.createElement(C,t)};w.displayName="appActionFailToastFactory"},,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(0);var m=r(1);var h=r.n(m);var f=r(2);var b=r(1049);var g=r(2395);var _={action:v["b"].node};var y={action:null};var O=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){return h.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(m["PureComponent"]);O.displayName="ActionBarItem";O.defaultProps=y;var k=O;var E={title:v["b"].node.isRequired,actions:v["b"].array,"data-qa":v["b"].string};var j={actions:[],"data-qa":void 0};var C=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderActionItems",value:function e(){var t=this.props.actions;var r=Object(f["map"])(t,function(e,t){return h.a.createElement(k,{key:t,action:e})});return r}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-action_bar display_flex align_items_center justify_content_between sk_off_white_bg"},h.a.createElement("span",n()({},Object(b["a"])(this.props),{className:"p-action_bar_title black"}),this.props.title),h.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(m["PureComponent"]);C.displayName="ActionBar";C.defaultProps=j;var S=t["a"]=C},,,,function(e,t,r){},,,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(2);var f=r.n(h);var b=r(4);var g=r(10);var _=r(19);var y=r(1556);var O=r(2217);var k=r(54);var E=r(888);var j=r(290);var C=new g["b"]("user_groups");var S={selectedChannels:v["b"].array,onChange:v["b"].func,featureSonicUserGroups:v["b"].bool.isRequired};var w={selectedChannels:[],onChange:h["noop"]};var I=100;var T=32;var A={entities:{channels:{includePublic:true,includePrivate:true,includeFromAnotherTeam:false,includeMpims:false,includeArchived:false,searchPreviousNames:false,onlyVisibleMpims:false,includeRequired:true}},limit:I,tiered:true,sort:{frecency:true}};var N=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getSelectedOptions",value:function e(){return(this.props.selectedChannels||[]).map(function(e){return{value:e}})}},{key:"renderChannelOption",value:function e(t){return p.a.createElement(O["a"],{channel:t.entity,channelId:t.value})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.onChange;var r=C.t("Default channels");var a=C.t("Group members are added to these channels automatically.");return p.a.createElement(k["a"],{htmlFor:"user_group_default_channel_select",id:"user_group_default_channel",key:"user_group_default_channel",text:r,optional:true},p.a.createElement(y["b"],{selectedOptions:this.getSelectedOptions(),renderOption:this.renderChannelOption,width:"100%",optionsRowHeight:T,onSelectedItemsChange:t,selectId:"user_group_default_channel_select",searcherOptions:A}),p.a.createElement(E["a"],null,a))}}]);return t}(d["PureComponent"]);N.displayName="UserGroupDefaultChannelPicker";N.defaultProps=w;var P=function e(t){return{getChannelById:function e(r){return Object(_["d"])(t,r)},featureSonicUserGroups:Object(b["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var R={search:j["e"]};t["a"]=Object(m["connect"])(P,R)(N)},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(2);var h=r.n(m);var f=r(0);var b=r(10);var g=r(66);var _=r(335);var y=r(139);var O=r(128);var k=r(22);var E=r(50);var j=r(4);var C=r(34);var S=r(195);var w=r(132);var I=r(11);var T=r(553);var A=r(794);var N=r(1217);var P=r(1846);var R=r(1102);var M=r(21);var x=r(45);var D=new b["b"]("do_not_disturb");var F={snoozeNotifications:f["b"].func.isRequired,currentChannel:f["b"].object,menuProps:f["b"].object,openDndDialog:f["b"].func,openChannelNotificationPrefsModal:f["b"].func,openPrefsModal:f["b"].func,clogger:f["b"].object,setUserPrefByApi:f["b"].func,showNotificationScheduleNewBadge:f["b"].bool,featureGranularDnd:f["b"].bool,featureOfflineMode:f["b"].bool.isRequired,isOffline:f["b"].bool.isRequired};var L={currentChannel:{},menuProps:{},openDndDialog:m["noop"],openChannelNotificationPrefsModal:m["noop"],openPrefsModal:m["noop"],clogger:{track:m["noop"]},setUserPrefByApi:m["noop"],showNotificationScheduleNewBadge:false,featureGranularDnd:false};var B=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickDoNotDisturbSchedule=r.onClickDoNotDisturbSchedule.bind(r);r.onClickNotificationPreferences=r.onClickNotificationPreferences.bind(r);return r}s()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,r=t.featureGranularDnd,a=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});r&&a&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var r=this.props.currentChannel;if(!r.id||Object(I["isIm"])(r))return null;var a=p.a.createElement(y["a"],{channelId:r.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=D.rt("Settings for {name}\u2026",{name:p.a.createElement("strong",null,a),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return p.a.createElement(g["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:r.id})}})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.menuProps,n=r.clogger,i=r.featureGranularDnd,s=r.showNotificationScheduleNewBadge,o=r.featureOfflineMode,l=r.isOffline;var c=void 0;var u=void 0;var d=void 0;if(i){c=D.t("Do Not Disturb allows you to pause your Slack notifications");u=p.a.createElement("span",{className:"p-dnd_menu__new_pill"},D.t("NEW"));d=s?p.a.createElement("span",null,D.t("Notification schedule\u2026")," ",u):D.t("Notification schedule\u2026")}return p.a.createElement(g["f"],a,p.a.createElement(g["c"],{label:i?D.t("Do Not Disturb"):D.t("Pause notifications")}),i&&p.a.createElement(E["c"],{tip:c,position:"right",zIndex:"above_fs"},p.a.createElement(O["a"],{className:"p-dnd_menu_question_button"},p.a.createElement(k["b"],{type:"question-circle"}))),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("30 minutes"),onSelected:function e(){var r=30;t.props.snoozeNotifications({duration:r,reason:"DndDisabledMenu:30m"});n.track(M["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:M["i"].DURATION_30_MINUTES,dnd_snooze_type:M["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_30",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("1 hour"),onSelected:function e(){var r=60;t.props.snoozeNotifications({duration:r,reason:"DndDisabledMenu:1hr"});n.track(M["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:M["i"].DURATION_1_HOUR,dnd_snooze_type:M["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_60",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("2 hours"),onSelected:function e(){var r=120;t.props.snoozeNotifications({duration:r,reason:"DndDisabledMenu:2hr"});n.track(M["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:M["i"].DURATION_2_HOURS,dnd_snooze_type:M["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_120",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("4 hours"),onSelected:function e(){var r=240;t.props.snoozeNotifications({duration:r,reason:"DndDisabledMenu:4hr"});n.track(M["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:M["i"].DURATION_4_HOURS,dnd_snooze_type:M["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_240",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Until tomorrow"),onSelected:function e(){var r=Object(R["d"])();t.props.snoozeNotifications({duration:r,reason:"DndDisabledMenu:tomorrow"});n.track(M["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:M["i"].DURATION_TOMORROW,dnd_snooze_type:M["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Until next week"),onSelected:function e(){var r=Object(R["c"])();t.props.snoozeNotifications({duration:r,reason:"DndDisabledMenu:week"});n.track(M["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:M["i"].DURATION_NEXT_WEEK,dnd_snooze_type:M["j"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Custom\u2026"),onSelected:function e(){t.props.openDndDialog();n.track(M["l"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom",disabled:o&&l,showOfflineIcon:o&&l}),p.a.createElement(g["d"],null),p.a.createElement(g["b"],{label:i?d:D.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&p.a.createElement(g["d"],null),!i&&this.renderSettingsMenuItem(),!i&&p.a.createElement(g["b"],{label:D.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}))}}]);return t}(d["PureComponent"]);B.displayName="DndDisabledMenu";B.defaultProps=L;var U=function e(t){return{clogger:Object(x["a"])({state:t}),featureGranularDnd:Object(j["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(C["g"])(t,"dnd_notification_schedule_new_badge_seen"),featureOfflineMode:Object(j["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(S["c"])(t)}};var q=function e(t){return{snoozeNotifications:function e(r){return t(Object(T["e"])(r))},openDndDialog:function e(){return t(Object(P["a"])())},openChannelNotificationPrefsModal:function e(r){return t(Object(N["a"])(r))},setUserPrefByApi:function e(r){return t(Object(w["d"])(r))},openPrefsModal:function e(r){return t(Object(A["a"])(r))}}};t["a"]=Object(v["connect"])(U,q)(B)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return p});var a=r(2);var n=r.n(a);var i=r(10);var s=r(357);var o=r(89);var l=r(125);var c=r(337);var u=r(39);var d=new i["b"]("aria_msg_summary");function p(e){if(!e)return null;var t=[];var r=e.featureA11yMessageSummary,n=e.viewContext;var i=e.day,p=i.isFirstDay,v=i.isLastDay;var m=e.day.ts/1e3;var h=Object(o["a"])();var f=Object(o["a"])(h).subtract(1,"days");var b=Object(l["a"])(m,{returnMoment:true});var g=Object(c["a"])(h,b);var _=Object(c["a"])(f,b);var y=m&&Object(s["a"])(m,"{day_divider_pretty}");var O=!n||[u["MESSAGE_CONTAINERS"].MESSAGE_PANE,u["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,u["MESSAGE_CONTAINERS"].THREADS_VIEW,u["MESSAGE_CONTAINERS"].UNREAD_VIEW].includes(n);e.isFirstMsgForDay&&!e.isLastMsgForDay&&!p&&O&&(g?t.push(d.t("First message from today.",{day:y})):_?t.push(d.t("First message from yesterday.",{day:y})):t.push(d.t("First message from {day}.",{day:y})));e.isLastMsgForDay&&!e.isFirstMsgForDay&&!v&&O&&(g?t.push(d.t("Last message from today.",{day:y})):_?t.push(d.t("Last message from yesterday.",{day:y})):t.push(d.t("Last message from {day}.",{day:y})));(e.isLastMsgForDay&&e.isFirstMsgForDay&&!v&&!p||!O)&&(g?t.push(d.t("Message from today.",{day:y})):_?t.push(d.t("Message from yesterday.",{day:y})):t.push(d.t("Message from {day}.",{day:y})));e.isFirstUnreadMsg&&O&&t.push(d.t("First unread message."));e.isTombstone||t.push(d.t("{name} at {time}.",{name:e.name,time:e.time}));e.channelName&&!O&&t.push(r?d.t("In {channel}.",{channel:e.channelName}):e.channelName);t.push(e.text);e.reactionCount>0&&!e.isTombstone&&t.push(d.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount}));e.replyCount>0&&t.push(d.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount}));e.isStarred&&n!==u["MESSAGE_CONTAINERS"].STARS_FLEXPANE&&t.push(d.t("Message is starred."));e.isPinned&&n!==u["MESSAGE_CONTAINERS"].PINS_FLEXPANE&&t.push(d.t("Message is pinned."));e.attachmentCount>0&&t.push(d.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount}));e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts));return Object(a["unescape"])(t.join(" "))}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r.n(v);var h=r(1757);var f=r(1);var b=r.n(f);var g=r(0);var _=r(16);var y=r.n(_);var O=r(13);var k=r(548);var E=r(918);var j=r(4);var C=r(87);var S=r(339);var w=r(438);var I=r(1534);var T=r(10);var A=r(276);var N=r(41);var P=r(795);var R=r(216);var M=r(431);var x=r(919);var D=r(853);var F=r(1211);var L=r(1212);var B=r(1340);var U=r(81);var q=r(1695);var G=r(923);var H=r(1780);var W=r(1229);var V=r(3921);var K=r(55);var z=r(22);var Q=r(50);var Y=r(128);var J=r(51);var X=r(2986);var Z=r.n(X);var $=new T["b"]("search");var ee="IMPROVED_SEARCH";var te={iid:g["b"].string.isRequired,ts:g["b"].string.isRequired,logger:g["b"].object.isRequired,hasText:g["b"].bool.isRequired,permalink:g["b"].string.isRequired,user:g["b"].string.isRequired,username:g["b"].string,text:g["b"].string.isRequired,botId:g["b"].string,teamDomain:g["b"].string,permalinkToMessageThread:g["b"].string.isRequired,isCrossWorkspace:g["b"].bool.isRequired,botProfile:g["b"].shape({app_id:g["b"].string.isRequired,deleted:g["b"].bool,icons:g["b"].obj,id:g["b"].string,name:g["b"].string,updated:g["b"].number}),channel:g["b"].shape({id:g["b"].string.isRequired,name:g["b"].string.isRequired}).isRequired,channelName:g["b"].string.isRequired,extracts:g["b"].arrayOf(g["b"].shape({text:g["b"].string,truncated_head:g["b"].bool,truncated_tail:g["b"].bool})),files:g["b"].arrayOf(C["a"].File()),subtype:g["b"].string,theme:g["b"].string,hasAdHocSender:g["b"].bool.isRequired,expanded:g["b"].bool,onClick:g["b"].func,onFileClick:g["b"].func,onRepliesClick:g["b"].func,onExpand:g["b"].func.isRequired,canBeTruncated:g["b"].bool.isRequired,attachments:g["b"].array,reactions:g["b"].array,onExpandHoverStart:g["b"].func,onExpandHoverEnd:g["b"].func,reply_count:g["b"].number,onLinkClick:g["b"].func,icons:g["b"].shape({image_36:g["b"].string,image_48:g["b"].string,image_64:g["b"].string,image_72:g["b"].string,emoji:g["b"].string}),blocks:C["a"].BlockKitBlocks,featureAttachmentsV2:g["b"].bool,clogMessageClick:g["b"].func,clogFileClick:g["b"].func};var re={teamDomain:"",username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:false,onClick:m.a.noop,onFileClick:m.a.noop,onRepliesClick:m.a.noop,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:m.a.noop,onExpandHoverEnd:m.a.noop,reply_count:0,onLinkClick:m.a.noop,icons:null,blocks:null,featureAttachmentsV2:false,clogMessageClick:m.a.noop,clogFileClick:m.a.noop};var ae=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={hasKeyboardFocus:false};Object(h["a"])(r,["expand","onClick","onFocusEnter","onFocusLeave","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onTimestampClick"]);r.dragging=false;r.dragStartX=null;r.dragStartY=null;return r}l()(t,[{key:"onClick",value:function e(t){if(t.target.dataset.memberId)return;if("BUTTON"===t.target.tagName||"BUTTON"===t.target.parentNode.tagName)return;if(t.target.dataset.channelId||t.target.dataset.messageSender||("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented){this.onLinkClick(t);return}var r=false;if(this.dragging){var a=Math.pow(t.clientX-this.dragStartX,2)+Math.pow(t.clientY-this.dragStartY,2);r=a>16;this.dragging=false}r||t.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onFileClick",value:function e(t,r){var a=r.file;t.preventDefault();this.props.onFileClick(t,{file:a,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onRepliesClick",value:function e(t){t.preventDefault();this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onCopyLink",value:function e(t){t.preventDefault();t.stopPropagation();var r=this.props,a=r.channel,n=r.ts,i=r.user,s=r.botId,o=r.teamDomain,l=r.isCrossWorkspace;var c=this.props.permalink;c||(l?this.props.logger.error(ee,"Missing permalink for cross workspace message result. channel: "+a+" ts: "+n):c=Object(N["constructAbsoluteMsgPermalink"])({teamDomain:o,channelId:a.id,ts:n}));c&&Object(A["writeText"])(c);this.props.clogMessageClick({msg:{channel:a.id,bot_id:s,user:i,ts:n},payload:{subtype:"copy_link"}})}},{key:"onExpandHoverStart",value:function e(){this.props.onExpandHoverStart()}},{key:"onExpandHoverEnd",value:function e(){this.props.onExpandHoverEnd()}},{key:"onMouseMove",value:function e(t){if((1===t.button||1===t.buttons)&&!this.dragging){this.dragging=true;this.dragStartX=t.clientX;this.dragStartY=t.clientY}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onLinkClick",value:function e(t){var r={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};t.target.dataset.channelId?r.type="channel":t.target.dataset.messageSender?r.type="sender":("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented&&(r.type="link");r.type&&this.props.onLinkClick(r)}},{key:"onTimestampClick",value:function e(t){t.preventDefault()}},{key:"expand",value:function e(t){t.preventDefault();t.stopPropagation();this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"renderEllipsisButton",value:function e(t){var r={leading:"expand-head",trailing:"expand-tail"}[t];var a=$.t("Show more");return b.a.createElement(Q["c"],{tip:a},b.a.createElement(Y["a"],{"aria-label":a,"data-qa":r,onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},b.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}},{key:"renderExpandButton",value:function e(){return b.a.createElement(Y["a"],{"data-qa":"expand-end",onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},b.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",$.t("Show more")))}},{key:"renderText",value:function e(){var t=this;var r=this.props,a=r.text,n=r.blocks,i=r.extracts,s=r.expanded,o=r.canBeTruncated;if(!(a.length||i.length)&&!n)return null;if(s||!o)return b.a.createElement("div",{className:"c-search_message__body","data-qa":"search_message_body"},b.a.createElement(P["a"],{text:a}));if(i.length)return b.a.createElement("div",{className:"c-search_message__body"},b.a.createElement(f["Fragment"],null,i.map(function(e,r){var a=0===r&&e.truncated_head;var n=e.truncated_tail;var s=r===i.length-1;return b.a.createElement(f["Fragment"],{key:r},a?t.renderEllipsisButton("leading"):null,b.a.createElement(P["a"],{text:e.text}),!n||o&&s?null:t.renderEllipsisButton("trailing"),o&&s?t.renderExpandButton():null)})));return b.a.createElement("div",{className:"c-search_message__body"},b.a.createElement(P["a"],{text:a}))}},{key:"renderBlocks",value:function e(){var t=this.props,r=t.ts,a=t.featureAttachmentsV2,n=t.blocks;if(a)return b.a.createElement("div",{className:"c-search_message__body"},b.a.createElement(V["a"],{blocks:n,containerId:r,blocksContainerContext:K["a"].search}));return null}},{key:"renderAvatar",value:function e(){var t=this.props,r=t.user,a=t.hasAdHocSender,i=t.botId,s=t.botProfile,o=t.icons;var l={};i&&(l=n()({},l,{botId:i}));var c=o||s&&s.icons;if(c){var u=c.image_36||c.image_48;var d=c.image_64||c.image_72;var p=c.emoji;u&&(l=n()({},l,{imageUrl:u}));d&&(l=n()({},l,{imageUrl2x:d}));p&&(l=n()({},l,{emoji:p}))}r&&(l=n()({},l,{userId:r}));return b.a.createElement(R["b"],n()({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:a,size:36,isInteractive:true,showCard:true,showTooltip:true,tabIndex:"-1"},l))}},{key:"renderTimestamp",value:function e(){var t=this.props,r=t.ts,a=t.permalink;return b.a.createElement(x["b"],{onClick:this.onTimestampClick,timestamp:r,relative:false,full:false,link:a})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return b.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar());return b.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.user,a=t.botId,n=t.botProfile,i=t.username,s=t.theme,o=t.channelName;return b.a.createElement("div",{className:"c-search_message__content_header","data-qa":"search_message_header"},b.a.createElement(G["a"],{userId:r,botId:a,botProfile:n,username:i,channelName:o,isInteractive:true})," ","light"===s&&this.renderTimestamp())}},{key:"renderAttachments",value:function e(){var t=this;var r=this.props,a=r.attachments,n=r.expanded,i=r.canBeTruncated,s=r.featureAttachmentsV2;if(!a.length)return null;if(n||!i)return m.a.map(a,function(e,r){return t.renderFullAttachment(e,r)});var o=m.a.map(a,function(e,r){var a=Object(S["b"])(e);if(a.blocks&&s)return t.renderFullAttachment(a,r);return t.renderTruncatedLegacyAttachment(a,r)});return b.a.createElement("div",{className:"c-search_message__attachments"},o)}},{key:"renderFullAttachment",value:function e(t,r){var a=this.props,i=a.ts,s=a.channel,o=a.hasText,l=a.blocks;return b.a.createElement(D["a"],n()({key:t.id||r+1},Object(S["b"])(t),{isOnlyMessageContent:!!(o||l),messageTs:i,activeChannelId:s.id,showDelete:false,blocksContainerContext:K["a"].search}))}},{key:"renderTruncatedLegacyAttachment",value:function e(t,r){var a=this;var n=this.props.ts;var i=null;if(Object(w["e"])(t)){var s=t.serviceIcon||t.authorIcon;var o=t.serviceName||t.authorName;var l=o===t.authorName?t.authorSubname:t.authorName;i=b.a.createElement("div",null,b.a.createElement(L["a"],{icon:s,name:o,link:t.serviceUrl||t.authorLink,subname:l,subnameLink:t.authorLink}))}var c=t.extracts;var u=null;c&&c.title&&(u=b.a.createElement("div",{"data-qa":"search-attachment-title",className:"c-search_message__attachment_title"},m.a.map(c.title,function(e,t){var r=0===t&&e.truncated_head;var a=e.truncated_tail;return b.a.createElement(f["Fragment"],{key:t}," ",r?"\u2026":null,ne(e.text),a?"\u2026":null)})));var d=null;c&&c.pretext&&(d=m.a.map(c.pretext,function(e,t){var r=0===t&&e.truncated_head;var n=e.truncated_tail;return b.a.createElement("span",{className:"c-message_attachment__pretext",key:t}," ",b.a.createElement(f["Fragment"],null,r?a.renderEllipsisButton("leading"):null,b.a.createElement(P["a"],{text:e.text}),n?a.renderEllipsisButton("trailing"):null))}));var p=null;c&&c.text&&(p=m.a.map(c.text,function(e,t){var r=0===t&&e.truncated_head;var n=e.truncated_tail;return b.a.createElement(f["Fragment"],{key:t}," ",r?a.renderEllipsisButton("leading"):null,b.a.createElement(P["a"],{text:e.text}),n?a.renderEllipsisButton("trailing"):null)}));var v=null;Object(w["h"])(t)&&(v=b.a.createElement("div",null,b.a.createElement(B["a"],{botId:t.botId,icon:t.footerIcon,isAppUnfurl:t.isAppUnfurl,text:t.footer,ts:n})));if(!i&&!u&&!d&&!p&&!v)return null;return b.a.createElement("div",{"data-qa":"search-message-attachment",className:"c-search_message__attachment",key:this.props.iid+"-attachment-"+r},b.a.createElement(F["a"],{color:t.color}),b.a.createElement("div",{className:"c-search_message__attachment_body"},i,u,d,p,v))}},{key:"renderReactionsAndReplies",value:function e(){var t=this.props,r=t.reactions,a=t.isCrossWorkspace,n=t.permalinkToMessageThread;var i=this.props.reply_count;if(!r.length&&!i)return null;var s=m.a.take(m.a.sortBy(r,function(e){return-e.count}),2);var o=m.a.sumBy(r,"count");var l=null;var c=null;o>0&&(l=b.a.createElement("span",{"data-qa":"search-reaction-count",className:"c-search_message__reactions_count"},$.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:o})));if(i>0){var u=$.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:i});c=a?b.a.createElement(J["a"],{"data-qa":"search-replies",className:"c-search_message__replies_count",href:n},b.a.createElement(z["a"],{type:"comment-alt"}),u):b.a.createElement(Y["a"],{"data-qa":"search-replies",className:"c-search_message__replies_count",onClick:this.onRepliesClick},b.a.createElement(z["a"],{type:"comment-alt"}),u)}return b.a.createElement("div",{"data-qa":"search-reactions",className:"c-search_message__reactions"},m.a.map(s,function(e){return b.a.createElement(U["b"],{text:":"+e.name+":",key:e.name,emojiSize:U["a"].SMALL})}),l,c)}},{key:"renderFiles",value:function e(){var t=this;var r=this.props.files;if(!r||!r.length)return null;return r.map(function(e){return e&&b.a.createElement(q["a"],{key:e.id,file:e,onClick:t.onFileClick,clogLinkClick:function r(a){t.props.clogFileClick({file:e,payload:a})}})})}},{key:"renderActions",value:function e(){var t=y()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return b.a.createElement(H["a"],{className:t,ariaLabel:$.t("Message actions")},b.a.createElement(W["a"],{"data-qa":"copy-link",iconType:"link",ariaHasPopup:false,label:$.t("Copy link"),onClick:this.onCopyLink}))}},{key:"render",value:function e(){var t=this.props,r=t.theme,a=t.canBeTruncated,n=t.expanded,i=t.blocks;var s=y()("c-search_message","c-search_message--"+r,{"c-search_message--collapsed":!n&&a,"c-search_message--focus":this.state.hasKeyboardFocus});return b.a.createElement(M["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},b.a.createElement("div",{className:s,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),b.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),i?this.renderBlocks():this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFiles(),this.renderActions())))}}]);return t}(f["PureComponent"]);ae.displayName="SearchResult";function ne(e){return Object(I["a"])(e,function(e,t){return b.a.createElement("span",{className:"c-search__match",key:t},e)})}ae.defaultProps=re;var ie=function e(t){return{featureAttachmentsV2:Object(j["isFeatureEnabled"])(t,"feature_attachments_v2")}};var se={clogMessageClick:function e(){return k["a"].apply(void 0,arguments)},clogFileClick:function e(){return E["a"].apply(void 0,arguments)}};t["a"]=Object(O["connect"])(ie,se)(ae)},function(e,t,r){"use strict";var a=r(0);var n=r(1);var i=r.n(n);var s=r(95);var o=r(16);var l=r.n(o);var c=r(10);var u=new c["b"]("messages");var d={ghost:a["b"].bool};var p={ghost:false};function v(e){var t=e.ghost;return i.a.createElement("div",{className:l()({"c-message_list__unread_divider":true,"c-message_list__unread_divider--ghost":t})},i.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),i.a.createElement("span",{className:"c-message_list__unread_divider__label"},u.t("new messages")))}v.displayName="UnreadDivider";v.defaultProps=p;t["a"]=Object(s["pure"])(v)},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(0);var n=r(1);var i=r.n(n);var s=r(95);var o=r(16);var l=r.n(o);var c=r(2393);var u=r.n(c);var d={children:a["b"].node,className:a["b"].string,ariaLabel:a["b"].string};var p={children:null,className:null,ariaLabel:null};var v=function e(t){var r=t.className,a=t.children,n=t.ariaLabel;return i.a.createElement("div",{className:l()("c-message_actions__container",r),role:"group","aria-label":n},a)};v.displayName="MessageActionContainer";v.defaultProps=p;t["a"]=Object(s["pure"])(v)},function(e,t,r){"use strict";var a=r(26);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(13);var _=r(35);var y=r(4);var O=r(68);var k=r(321);var E=r(10);var j=r(406);var C=r(22);var S=r(2990);var w=r.n(S);var I=new E["b"]("files");var T=new E["b"]("search");var A={filetype:b["b"].string,onChange:b["b"].func,featureRemoteFilesApi:b["b"].bool,featureDocs:b["b"].bool,showEmail:b["b"].bool};var N={filetype:"",onChange:v["noop"],featureRemoteFilesApi:false,featureDocs:false,showEmail:false};var P=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.labelId="file_type_select_"+Object(k["d"])();r.state={label:null};return r}l()(t,[{key:"onChange",value:function e(t,r,a){this.setState(function(){return{label:r}});this.props.onChange(t,r,a)}},{key:"render",value:function e(){var t=f.a.createElement(h["Fragment"],null,I.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"}));return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"offscreen",id:this.labelId},T.t("File type")," ",f.a.createElement("span",null,"- ",this.state.label?this.state.label:t)),f.a.createElement(j["d"],{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:t,onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:Infinity,useFilteredInput:false,useFullWidthOptions:true,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"create-post"}),I.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),labelText:I.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:this.props.featureDocs?"docs":"posts"},{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"create-snippet"}),I.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),labelText:I.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"}].concat(n()(this.props.showEmail?[{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"envelope-o"}),I.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),labelText:I.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[]),[{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"image"}),I.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),labelText:I.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"play"}),I.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),labelText:I.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"book"}),I.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),labelText:I.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"file"}),I.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),labelText:I.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"}],n()(this.props.featureRemoteFilesApi?[{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"file"}),I.t("Presentations")),labelText:I.t("Presentations"),value:"presentations"},{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"file"}),I.t("Documents")),labelText:I.t("Documents"),value:"documents"}]:[]),[{label:f.a.createElement(h["Fragment"],null,f.a.createElement(C["b"],{type:"google-drive"}),I.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),labelText:I.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}])}))}}]);return t}(h["PureComponent"]);P.displayName="FileTypeSelect";P.defaultProps=N;t["a"]=Object(g["connect"])(function(e){return{featureDocs:Object(y["isFeatureEnabled"])(e,"feature_docs"),featureRemoteFilesApi:Object(y["isFeatureEnabled"])(e,"feature_remote_files_api"),showEmail:!!Object(_["d"])(e).plan&&!Object(O["a"])(e,"disable_email_ingestion")}})(P)},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(10);var n=new a["b"]("a11y");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName,r=e.previousChannelName,a=e.workspaceName,i=e.orgName,s=e.isOrgGlobalSharedPublicOrPrivateChannel,o=e.isOrgSharedPublicOrPrivateChannel,l=e.isExternallySharedChannel,c=e.isArchived,u=e.isCurrent,d=e.hasUnreads,p=e.hasNotifications,v=e.isPrivate,m=e.isNotMember,h=e.isMuted,f=e.isStarred,b=e.hasDraft;var g=function(){if(l&&a)return n.t("shared with {workspaceName}",{workspaceName:a});if(s&&i)return n.t("shared across all {orgName} workspaces",{orgName:i});if(o)return n.t("shared channel");return""}();var _=function(){if(c)return n.t("archived channel");if(u&&d&&p&&v&&m&&h&&f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(!u&&d&&p&&v&&m&&h&&f&&b)return n.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(u&&!d&&p&&v&&m&&h&&f&&b)return n.t("current channel, has notifications, private, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&v&&m&&h&&f&&b)return n.t("has notifications, private, not a member, muted, starred, has a draft message");if(u&&d&&!p&&v&&m&&h&&f&&b)return n.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&v&&m&&h&&f&&b)return n.t("has unread messages, private, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&v&&m&&h&&f&&b)return n.t("current channel, private, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&v&&m&&h&&f&&b)return n.t("private, not a member, muted, starred, has a draft message");if(u&&d&&p&&!v&&m&&h&&f&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message");if(!u&&d&&p&&!v&&m&&h&&f&&b)return n.t("has unread messages and notifications, not a member, muted, starred, has a draft message");if(u&&!d&&p&&!v&&m&&h&&f&&b)return n.t("current channel, has notifications, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&!v&&m&&h&&f&&b)return n.t("has notifications, not a member, muted, starred, has a draft message");if(u&&d&&!p&&!v&&m&&h&&f&&b)return n.t("current channel, has unread messages, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&!v&&m&&h&&f&&b)return n.t("has unread messages, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&!v&&m&&h&&f&&b)return n.t("current channel, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&!v&&m&&h&&f&&b)return n.t("not a member, muted, starred, has a draft message");if(u&&d&&p&&v&&!m&&h&&f&&b)return n.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message");if(!u&&d&&p&&v&&!m&&h&&f&&b)return n.t("has unread messages and notifications, private, muted, starred, has a draft message");if(u&&!d&&p&&v&&!m&&h&&f&&b)return n.t("current channel, has notifications, private, muted, starred, has a draft message");if(!u&&!d&&p&&v&&!m&&h&&f&&b)return n.t("has notifications, private, muted, starred, has a draft message");if(u&&d&&!p&&v&&!m&&h&&f&&b)return n.t("current channel, has unread messages, private, muted, starred, has a draft message");if(!u&&d&&!p&&v&&!m&&h&&f&&b)return n.t("has unread messages, private, muted, starred, has a draft message");if(u&&!d&&!p&&v&&!m&&h&&f&&b)return n.t("current channel, private, muted, starred, has a draft message");if(!u&&!d&&!p&&v&&!m&&h&&f&&b)return n.t("private, muted, starred, has a draft message");if(u&&d&&p&&!v&&!m&&h&&f&&b)return n.t("current channel, has unread messages and notifications, muted, starred, has a draft message");if(!u&&d&&p&&!v&&!m&&h&&f&&b)return n.t("has unread messages and notifications, muted, starred, has a draft message");if(u&&!d&&p&&!v&&!m&&h&&f&&b)return n.t("current channel, has notifications, muted, starred, has a draft message");if(!u&&!d&&p&&!v&&!m&&h&&f&&b)return n.t("has notifications, muted, starred, has a draft message");if(u&&d&&!p&&!v&&!m&&h&&f&&b)return n.t("current channel, has unread messages, muted, starred, has a draft message");if(!u&&d&&!p&&!v&&!m&&h&&f&&b)return n.t("has unread messages, muted, starred, has a draft message");if(u&&!d&&!p&&!v&&!m&&h&&f&&b)return n.t("current channel, muted, starred, has a draft message");if(!u&&!d&&!p&&!v&&!m&&h&&f&&b)return n.t("muted, starred, has a draft message");if(u&&d&&p&&v&&m&&!h&&f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message");if(!u&&d&&p&&v&&m&&!h&&f&&b)return n.t("has unread messages and notifications, private, not a member, starred, has a draft message");if(u&&!d&&p&&v&&m&&!h&&f&&b)return n.t("current channel, has notifications, private, not a member, starred, has a draft message");if(!u&&!d&&p&&v&&m&&!h&&f&&b)return n.t("has notifications, private, not a member, starred, has a draft message");if(u&&d&&!p&&v&&m&&!h&&f&&b)return n.t("current channel, has unread messages, private, not a member, starred, has a draft message");if(!u&&d&&!p&&v&&m&&!h&&f&&b)return n.t("has unread messages, private, not a member, starred, has a draft message");if(u&&!d&&!p&&v&&m&&!h&&f&&b)return n.t("current channel, private, not a member, starred, has a draft message");if(!u&&!d&&!p&&v&&m&&!h&&f&&b)return n.t("private, not a member, starred, has a draft message");if(u&&d&&p&&!v&&m&&!h&&f&&b)return n.t("current channel, has unread messages and notifications, not a member, starred, has a draft message");if(!u&&d&&p&&!v&&m&&!h&&f&&b)return n.t("has unread messages and notifications, not a member, starred, has a draft message");if(u&&!d&&p&&!v&&m&&!h&&f&&b)return n.t("current channel, has notifications, not a member, starred, has a draft message");if(!u&&!d&&p&&!v&&m&&!h&&f&&b)return n.t("has notifications, not a member, starred, has a draft message");if(u&&d&&!p&&!v&&m&&!h&&f&&b)return n.t("current channel, has unread messages, not a member, starred, has a draft message");if(!u&&d&&!p&&!v&&m&&!h&&f&&b)return n.t("has unread messages, not a member, starred, has a draft message");if(u&&!d&&!p&&!v&&m&&!h&&f&&b)return n.t("current channel, not a member, starred, has a draft message");if(!u&&!d&&!p&&!v&&m&&!h&&f&&b)return n.t("not a member, starred, has a draft message");if(u&&d&&p&&v&&!m&&!h&&f&&b)return n.t("current channel, has unread messages and notifications, private, starred, has a draft message");if(!u&&d&&p&&v&&!m&&!h&&f&&b)return n.t("has unread messages and notifications, private, starred, has a draft message");if(u&&!d&&p&&v&&!m&&!h&&f&&b)return n.t("current channel, has notifications, private, starred, has a draft message");if(!u&&!d&&p&&v&&!m&&!h&&f&&b)return n.t("has notifications, private, starred, has a draft message");if(u&&d&&!p&&v&&!m&&!h&&f&&b)return n.t("current channel, has unread messages, private, starred, has a draft message");if(!u&&d&&!p&&v&&!m&&!h&&f&&b)return n.t("has unread messages, private, starred, has a draft message");if(u&&!d&&!p&&v&&!m&&!h&&f&&b)return n.t("current channel, private, starred, has a draft message");if(!u&&!d&&!p&&v&&!m&&!h&&f&&b)return n.t("private, starred, has a draft message");if(u&&d&&p&&!v&&!m&&!h&&f&&b)return n.t("current channel, has unread messages and notifications, starred, has a draft message");if(!u&&d&&p&&!v&&!m&&!h&&f&&b)return n.t("has unread messages and notifications, starred, has a draft message");if(u&&!d&&p&&!v&&!m&&!h&&f&&b)return n.t("current channel, has notifications, starred, has a draft message");if(!u&&!d&&p&&!v&&!m&&!h&&f&&b)return n.t("has notifications, starred, has a draft message");if(u&&d&&!p&&!v&&!m&&!h&&f&&b)return n.t("current channel, has unread messages, starred, has a draft message");if(!u&&d&&!p&&!v&&!m&&!h&&f&&b)return n.t("has unread messages, starred, has a draft message");if(u&&!d&&!p&&!v&&!m&&!h&&f&&b)return n.t("current channel, starred, has a draft message");if(!u&&!d&&!p&&!v&&!m&&!h&&f&&b)return n.t("starred, has a draft message");if(u&&d&&p&&v&&m&&h&&!f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message");if(!u&&d&&p&&v&&m&&h&&!f&&b)return n.t("has unread messages and notifications, private, not a member, muted, has a draft message");if(u&&!d&&p&&v&&m&&h&&!f&&b)return n.t("current channel, has notifications, private, not a member, muted, has a draft message");if(!u&&!d&&p&&v&&m&&h&&!f&&b)return n.t("has notifications, private, not a member, muted, has a draft message");if(u&&d&&!p&&v&&m&&h&&!f&&b)return n.t("current channel, has unread messages, private, not a member, muted, has a draft message");if(!u&&d&&!p&&v&&m&&h&&!f&&b)return n.t("has unread messages, private, not a member, muted, has a draft message");if(u&&!d&&!p&&v&&m&&h&&!f&&b)return n.t("current channel, private, not a member, muted, has a draft message");if(!u&&!d&&!p&&v&&m&&h&&!f&&b)return n.t("private, not a member, muted, has a draft message");if(u&&d&&p&&!v&&m&&h&&!f&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, has a draft message");if(!u&&d&&p&&!v&&m&&h&&!f&&b)return n.t("has unread messages and notifications, not a member, muted, has a draft message");if(u&&!d&&p&&!v&&m&&h&&!f&&b)return n.t("current channel, has notifications, not a member, muted, has a draft message");if(!u&&!d&&p&&!v&&m&&h&&!f&&b)return n.t("has notifications, not a member, muted, has a draft message");if(u&&d&&!p&&!v&&m&&h&&!f&&b)return n.t("current channel, has unread messages, not a member, muted, has a draft message");if(!u&&d&&!p&&!v&&m&&h&&!f&&b)return n.t("has unread messages, not a member, muted, has a draft message");if(u&&!d&&!p&&!v&&m&&h&&!f&&b)return n.t("current channel, not a member, muted, has a draft message");if(!u&&!d&&!p&&!v&&m&&h&&!f&&b)return n.t("not a member, muted, has a draft message");if(u&&d&&p&&v&&!m&&h&&!f&&b)return n.t("current channel, has unread messages and notifications, private, muted, has a draft message");if(!u&&d&&p&&v&&!m&&h&&!f&&b)return n.t("has unread messages and notifications, private, muted, has a draft message");if(u&&!d&&p&&v&&!m&&h&&!f&&b)return n.t("current channel, has notifications, private, muted, has a draft message");if(!u&&!d&&p&&v&&!m&&h&&!f&&b)return n.t("has notifications, private, muted, has a draft message");if(u&&d&&!p&&v&&!m&&h&&!f&&b)return n.t("current channel, has unread messages, private, muted, has a draft message");if(!u&&d&&!p&&v&&!m&&h&&!f&&b)return n.t("has unread messages, private, muted, has a draft message");if(u&&!d&&!p&&v&&!m&&h&&!f&&b)return n.t("current channel, private, muted, has a draft message");if(!u&&!d&&!p&&v&&!m&&h&&!f&&b)return n.t("private, muted, has a draft message");if(u&&d&&p&&!v&&!m&&h&&!f&&b)return n.t("current channel, has unread messages and notifications, muted, has a draft message");if(!u&&d&&p&&!v&&!m&&h&&!f&&b)return n.t("has unread messages and notifications, muted, has a draft message");if(u&&!d&&p&&!v&&!m&&h&&!f&&b)return n.t("current channel, has notifications, muted, has a draft message");if(!u&&!d&&p&&!v&&!m&&h&&!f&&b)return n.t("has notifications, muted, has a draft message");if(u&&d&&!p&&!v&&!m&&h&&!f&&b)return n.t("current channel, has unread messages, muted, has a draft message");if(!u&&d&&!p&&!v&&!m&&h&&!f&&b)return n.t("has unread messages, muted, has a draft message");if(u&&!d&&!p&&!v&&!m&&h&&!f&&b)return n.t("current channel, muted, has a draft message");if(!u&&!d&&!p&&!v&&!m&&h&&!f&&b)return n.t("muted, has a draft message");if(u&&d&&p&&v&&m&&!h&&!f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, has a draft message");if(!u&&d&&p&&v&&m&&!h&&!f&&b)return n.t("has unread messages and notifications, private, not a member, has a draft message");if(u&&!d&&p&&v&&m&&!h&&!f&&b)return n.t("current channel, has notifications, private, not a member, has a draft message");if(!u&&!d&&p&&v&&m&&!h&&!f&&b)return n.t("has notifications, private, not a member, has a draft message");if(u&&d&&!p&&v&&m&&!h&&!f&&b)return n.t("current channel, has unread messages, private, not a member, has a draft message");if(!u&&d&&!p&&v&&m&&!h&&!f&&b)return n.t("has unread messages, private, not a member, has a draft message");if(u&&!d&&!p&&v&&m&&!h&&!f&&b)return n.t("current channel, private, not a member, has a draft message");if(!u&&!d&&!p&&v&&m&&!h&&!f&&b)return n.t("private, not a member, has a draft message");if(u&&d&&p&&!v&&m&&!h&&!f&&b)return n.t("current channel, has unread messages and notifications, not a member, has a draft message");if(!u&&d&&p&&!v&&m&&!h&&!f&&b)return n.t("has unread messages and notifications, not a member, has a draft message");if(u&&!d&&p&&!v&&m&&!h&&!f&&b)return n.t("current channel, has notifications, not a member, has a draft message");if(!u&&!d&&p&&!v&&m&&!h&&!f&&b)return n.t("has notifications, not a member, has a draft message");if(u&&d&&!p&&!v&&m&&!h&&!f&&b)return n.t("current channel, has unread messages, not a member, has a draft message");if(!u&&d&&!p&&!v&&m&&!h&&!f&&b)return n.t("has unread messages, not a member, has a draft message");if(u&&!d&&!p&&!v&&m&&!h&&!f&&b)return n.t("current channel, not a member, has a draft message");if(!u&&!d&&!p&&!v&&m&&!h&&!f&&b)return n.t("not a member, has a draft message");if(u&&d&&p&&v&&!m&&!h&&!f&&b)return n.t("current channel, has unread messages and notifications, private, has a draft message");if(!u&&d&&p&&v&&!m&&!h&&!f&&b)return n.t("has unread messages and notifications, private, has a draft message");if(u&&!d&&p&&v&&!m&&!h&&!f&&b)return n.t("current channel, has notifications, private, has a draft message");if(!u&&!d&&p&&v&&!m&&!h&&!f&&b)return n.t("has notifications, private, has a draft message");if(u&&d&&!p&&v&&!m&&!h&&!f&&b)return n.t("current channel, has unread messages, private, has a draft message");if(!u&&d&&!p&&v&&!m&&!h&&!f&&b)return n.t("has unread messages, private, has a draft message");if(u&&!d&&!p&&v&&!m&&!h&&!f&&b)return n.t("current channel, private, has a draft message");if(!u&&!d&&!p&&v&&!m&&!h&&!f&&b)return n.t("private, has a draft message");if(u&&d&&p&&!v&&!m&&!h&&!f&&b)return n.t("current channel, has unread messages and notifications, has a draft message");if(!u&&d&&p&&!v&&!m&&!h&&!f&&b)return n.t("has unread messages and notifications, has a draft message");if(u&&!d&&p&&!v&&!m&&!h&&!f&&b)return n.t("current channel, has notifications, has a draft message");if(!u&&!d&&p&&!v&&!m&&!h&&!f&&b)return n.t("has notifications, has a draft message");if(u&&d&&!p&&!v&&!m&&!h&&!f&&b)return n.t("current channel, has unread messages, has a draft message");if(!u&&d&&!p&&!v&&!m&&!h&&!f&&b)return n.t("has unread messages, has a draft message");if(u&&!d&&!p&&!v&&!m&&!h&&!f&&b)return n.t("current channel, has a draft message");if(!u&&!d&&!p&&!v&&!m&&!h&&!f&&b)return n.t("has a draft message");if(u&&d&&p&&v&&m&&h&&f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred");if(!u&&d&&p&&v&&m&&h&&f&&!b)return n.t("has unread messages and notifications, private, not a member, muted, starred");if(u&&!d&&p&&v&&m&&h&&f&&!b)return n.t("current channel, has notifications, private, not a member, muted, starred");if(!u&&!d&&p&&v&&m&&h&&f&&!b)return n.t("has notifications, private, not a member, muted, starred");if(u&&d&&!p&&v&&m&&h&&f&&!b)return n.t("current channel, has unread messages, private, not a member, muted, starred");if(!u&&d&&!p&&v&&m&&h&&f&&!b)return n.t("has unread messages, private, not a member, muted, starred");if(u&&!d&&!p&&v&&m&&h&&f&&!b)return n.t("current channel, private, not a member, muted, starred");if(!u&&!d&&!p&&v&&m&&h&&f&&!b)return n.t("private, not a member, muted, starred");if(u&&d&&p&&!v&&m&&h&&f&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred");if(!u&&d&&p&&!v&&m&&h&&f&&!b)return n.t("has unread messages and notifications, not a member, muted, starred");if(u&&!d&&p&&!v&&m&&h&&f&&!b)return n.t("current channel, has notifications, not a member, muted, starred");if(!u&&!d&&p&&!v&&m&&h&&f&&!b)return n.t("has notifications, not a member, muted, starred");if(u&&d&&!p&&!v&&m&&h&&f&&!b)return n.t("current channel, has unread messages, not a member, muted, starred");if(!u&&d&&!p&&!v&&m&&h&&f&&!b)return n.t("has unread messages, not a member, muted, starred");if(u&&!d&&!p&&!v&&m&&h&&f&&!b)return n.t("current channel, not a member, muted, starred");if(!u&&!d&&!p&&!v&&m&&h&&f&&!b)return n.t("not a member, muted, starred");if(u&&d&&p&&v&&!m&&h&&f&&!b)return n.t("current channel, has unread messages and notifications, private, muted, starred");if(!u&&d&&p&&v&&!m&&h&&f&&!b)return n.t("has unread messages and notifications, private, muted, starred");if(u&&!d&&p&&v&&!m&&h&&f&&!b)return n.t("current channel, has notifications, private, muted, starred");if(!u&&!d&&p&&v&&!m&&h&&f&&!b)return n.t("has notifications, private, muted, starred");if(u&&d&&!p&&v&&!m&&h&&f&&!b)return n.t("current channel, has unread messages, private, muted, starred");if(!u&&d&&!p&&v&&!m&&h&&f&&!b)return n.t("has unread messages, private, muted, starred");if(u&&!d&&!p&&v&&!m&&h&&f&&!b)return n.t("current channel, private, muted, starred");if(!u&&!d&&!p&&v&&!m&&h&&f&&!b)return n.t("private, muted, starred");if(u&&d&&p&&!v&&!m&&h&&f&&!b)return n.t("current channel, has unread messages and notifications, muted, starred");if(!u&&d&&p&&!v&&!m&&h&&f&&!b)return n.t("has unread messages and notifications, muted, starred");if(u&&!d&&p&&!v&&!m&&h&&f&&!b)return n.t("current channel, has notifications, muted, starred");if(!u&&!d&&p&&!v&&!m&&h&&f&&!b)return n.t("has notifications, muted, starred");if(u&&d&&!p&&!v&&!m&&h&&f&&!b)return n.t("current channel, has unread messages, muted, starred");if(!u&&d&&!p&&!v&&!m&&h&&f&&!b)return n.t("has unread messages, muted, starred");if(u&&!d&&!p&&!v&&!m&&h&&f&&!b)return n.t("current channel, muted, starred");if(!u&&!d&&!p&&!v&&!m&&h&&f&&!b)return n.t("muted, starred");if(u&&d&&p&&v&&m&&!h&&f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, starred");if(!u&&d&&p&&v&&m&&!h&&f&&!b)return n.t("has unread messages and notifications, private, not a member, starred");if(u&&!d&&p&&v&&m&&!h&&f&&!b)return n.t("current channel, has notifications, private, not a member, starred");if(!u&&!d&&p&&v&&m&&!h&&f&&!b)return n.t("has notifications, private, not a member, starred");if(u&&d&&!p&&v&&m&&!h&&f&&!b)return n.t("current channel, has unread messages, private, not a member, starred");if(!u&&d&&!p&&v&&m&&!h&&f&&!b)return n.t("has unread messages, private, not a member, starred");if(u&&!d&&!p&&v&&m&&!h&&f&&!b)return n.t("current channel, private, not a member, starred");if(!u&&!d&&!p&&v&&m&&!h&&f&&!b)return n.t("private, not a member, starred");if(u&&d&&p&&!v&&m&&!h&&f&&!b)return n.t("current channel, has unread messages and notifications, not a member, starred");if(!u&&d&&p&&!v&&m&&!h&&f&&!b)return n.t("has unread messages and notifications, not a member, starred");if(u&&!d&&p&&!v&&m&&!h&&f&&!b)return n.t("current channel, has notifications, not a member, starred");if(!u&&!d&&p&&!v&&m&&!h&&f&&!b)return n.t("has notifications, not a member, starred");if(u&&d&&!p&&!v&&m&&!h&&f&&!b)return n.t("current channel, has unread messages, not a member, starred");if(!u&&d&&!p&&!v&&m&&!h&&f&&!b)return n.t("has unread messages, not a member, starred");if(u&&!d&&!p&&!v&&m&&!h&&f&&!b)return n.t("current channel, not a member, starred");if(!u&&!d&&!p&&!v&&m&&!h&&f&&!b)return n.t("not a member, starred");if(u&&d&&p&&v&&!m&&!h&&f&&!b)return n.t("current channel, has unread messages and notifications, private, starred");if(!u&&d&&p&&v&&!m&&!h&&f&&!b)return n.t("has unread messages and notifications, private, starred");if(u&&!d&&p&&v&&!m&&!h&&f&&!b)return n.t("current channel, has notifications, private, starred");if(!u&&!d&&p&&v&&!m&&!h&&f&&!b)return n.t("has notifications, private, starred");if(u&&d&&!p&&v&&!m&&!h&&f&&!b)return n.t("current channel, has unread messages, private, starred");if(!u&&d&&!p&&v&&!m&&!h&&f&&!b)return n.t("has unread messages, private, starred");if(u&&!d&&!p&&v&&!m&&!h&&f&&!b)return n.t("current channel, private, starred");if(!u&&!d&&!p&&v&&!m&&!h&&f&&!b)return n.t("private, starred");if(u&&d&&p&&!v&&!m&&!h&&f&&!b)return n.t("current channel, has unread messages and notifications, starred");if(!u&&d&&p&&!v&&!m&&!h&&f&&!b)return n.t("has unread messages and notifications, starred");if(u&&!d&&p&&!v&&!m&&!h&&f&&!b)return n.t("current channel, has notifications, starred");if(!u&&!d&&p&&!v&&!m&&!h&&f&&!b)return n.t("has notifications, starred");if(u&&d&&!p&&!v&&!m&&!h&&f&&!b)return n.t("current channel, has unread messages, starred");if(!u&&d&&!p&&!v&&!m&&!h&&f&&!b)return n.t("has unread messages, starred");if(u&&!d&&!p&&!v&&!m&&!h&&f&&!b)return n.t("current channel, starred");if(!u&&!d&&!p&&!v&&!m&&!h&&f&&!b)return n.t("starred");if(u&&d&&p&&v&&m&&h&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted");if(!u&&d&&p&&v&&m&&h&&!f&&!b)return n.t("has unread messages and notifications, private, not a member, muted");if(u&&!d&&p&&v&&m&&h&&!f&&!b)return n.t("current channel, has notifications, private, not a member, muted");if(!u&&!d&&p&&v&&m&&h&&!f&&!b)return n.t("has notifications, private, not a member, muted");if(u&&d&&!p&&v&&m&&h&&!f&&!b)return n.t("current channel, has unread messages, private, not a member, muted");if(!u&&d&&!p&&v&&m&&h&&!f&&!b)return n.t("has unread messages, private, not a member, muted");if(u&&!d&&!p&&v&&m&&h&&!f&&!b)return n.t("current channel, private, not a member, muted");if(!u&&!d&&!p&&v&&m&&h&&!f&&!b)return n.t("private, not a member, muted");if(u&&d&&p&&!v&&m&&h&&!f&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted");if(!u&&d&&p&&!v&&m&&h&&!f&&!b)return n.t("has unread messages and notifications, not a member, muted");if(u&&!d&&p&&!v&&m&&h&&!f&&!b)return n.t("current channel, has notifications, not a member, muted");if(!u&&!d&&p&&!v&&m&&h&&!f&&!b)return n.t("has notifications, not a member, muted");if(u&&d&&!p&&!v&&m&&h&&!f&&!b)return n.t("current channel, has unread messages, not a member, muted");if(!u&&d&&!p&&!v&&m&&h&&!f&&!b)return n.t("has unread messages, not a member, muted");if(u&&!d&&!p&&!v&&m&&h&&!f&&!b)return n.t("current channel, not a member, muted");if(!u&&!d&&!p&&!v&&m&&h&&!f&&!b)return n.t("not a member, muted");if(u&&d&&p&&v&&!m&&h&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, muted");if(!u&&d&&p&&v&&!m&&h&&!f&&!b)return n.t("has unread messages and notifications, private, muted");if(u&&!d&&p&&v&&!m&&h&&!f&&!b)return n.t("current channel, has notifications, private, muted");if(!u&&!d&&p&&v&&!m&&h&&!f&&!b)return n.t("has notifications, private, muted");if(u&&d&&!p&&v&&!m&&h&&!f&&!b)return n.t("current channel, has unread messages, private, muted");if(!u&&d&&!p&&v&&!m&&h&&!f&&!b)return n.t("has unread messages, private, muted");if(u&&!d&&!p&&v&&!m&&h&&!f&&!b)return n.t("current channel, private, muted");if(!u&&!d&&!p&&v&&!m&&h&&!f&&!b)return n.t("private, muted");if(u&&d&&p&&!v&&!m&&h&&!f&&!b)return n.t("current channel, has unread messages and notifications, muted");if(!u&&d&&p&&!v&&!m&&h&&!f&&!b)return n.t("has unread messages and notifications, muted");if(u&&!d&&p&&!v&&!m&&h&&!f&&!b)return n.t("current channel, has notifications, muted");if(!u&&!d&&p&&!v&&!m&&h&&!f&&!b)return n.t("has notifications, muted");if(u&&d&&!p&&!v&&!m&&h&&!f&&!b)return n.t("current channel, has unread messages, muted");if(!u&&d&&!p&&!v&&!m&&h&&!f&&!b)return n.t("has unread messages, muted");if(u&&!d&&!p&&!v&&!m&&h&&!f&&!b)return n.t("current channel, muted");if(!u&&!d&&!p&&!v&&!m&&h&&!f&&!b)return n.t("muted");if(u&&d&&p&&v&&m&&!h&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member");if(!u&&d&&p&&v&&m&&!h&&!f&&!b)return n.t("has unread messages and notifications, private, not a member");if(u&&!d&&p&&v&&m&&!h&&!f&&!b)return n.t("current channel, has notifications, private, not a member");if(!u&&!d&&p&&v&&m&&!h&&!f&&!b)return n.t("has notifications, private, not a member");if(u&&d&&!p&&v&&m&&!h&&!f&&!b)return n.t("current channel, has unread messages, private, not a member");if(!u&&d&&!p&&v&&m&&!h&&!f&&!b)return n.t("has unread messages, private, not a member");if(u&&!d&&!p&&v&&m&&!h&&!f&&!b)return n.t("current channel, private, not a member");if(!u&&!d&&!p&&v&&m&&!h&&!f&&!b)return n.t("private, not a member");if(u&&d&&p&&!v&&m&&!h&&!f&&!b)return n.t("current channel, has unread messages and notifications, not a member");if(!u&&d&&p&&!v&&m&&!h&&!f&&!b)return n.t("has unread messages and notifications, not a member");if(u&&!d&&p&&!v&&m&&!h&&!f&&!b)return n.t("current channel, has notifications, not a member");if(!u&&!d&&p&&!v&&m&&!h&&!f&&!b)return n.t("has notifications, not a member");if(u&&d&&!p&&!v&&m&&!h&&!f&&!b)return n.t("current channel, has unread messages, not a member");if(!u&&d&&!p&&!v&&m&&!h&&!f&&!b)return n.t("has unread messages, not a member");if(u&&!d&&!p&&!v&&m&&!h&&!f&&!b)return n.t("current channel, not a member");if(!u&&!d&&!p&&!v&&m&&!h&&!f&&!b)return n.t("not a member");if(u&&d&&p&&v&&!m&&!h&&!f&&!b)return n.t("current channel, has unread messages and notifications, private");if(!u&&d&&p&&v&&!m&&!h&&!f&&!b)return n.t("has unread messages and notifications, private");if(u&&!d&&p&&v&&!m&&!h&&!f&&!b)return n.t("current channel, has notifications, private");if(!u&&!d&&p&&v&&!m&&!h&&!f&&!b)return n.t("has notifications, private");if(u&&d&&!p&&v&&!m&&!h&&!f&&!b)return n.t("current channel, has unread messages, private");if(!u&&d&&!p&&v&&!m&&!h&&!f&&!b)return n.t("has unread messages, private");if(u&&!d&&!p&&v&&!m&&!h&&!f&&!b)return n.t("current channel, private");if(!u&&!d&&!p&&v&&!m&&!h&&!f&&!b)return n.t("private");if(u&&d&&p&&!v&&!m&&!h&&!f&&!b)return n.t("current channel, has unread messages and notifications");if(!u&&d&&p&&!v&&!m&&!h&&!f&&!b)return n.t("has unread messages and notifications");if(u&&!d&&p&&!v&&!m&&!h&&!f&&!b)return n.t("current channel, has notifications");if(!u&&!d&&p&&!v&&!m&&!h&&!f&&!b)return n.t("has notifications");if(u&&d&&!p&&!v&&!m&&!h&&!f&&!b)return n.t("current channel, has unread messages");if(!u&&d&&!p&&!v&&!m&&!h&&!f&&!b)return n.t("has unread messages");if(u&&!d&&!p&&!v&&!m&&!h&&!f&&!b)return n.t("current channel");return""}();if(r&&!g&&!_)return n.t("{channelName}, previously {previousChannelName}",{channelName:t,previousChannelName:r});if(!r&&!g&&_)return n.t("{channelName} ({context})",{channelName:t,context:_});if(r&&!g&&_)return n.t("{channelName}, previously {previousChannelName} ({context})",{channelName:t,previousChannelName:r,context:_});if(!r&&g&&!_)return n.t("{channelName}, {workspaceDescription}",{channelName:t,workspaceDescription:g});if(r&&g&&!_)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:t,workspaceDescription:g,previousChannelName:r});if(!r&&g&&_)return n.t("{channelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:g,context:_});if(r&&g&&_)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:g,previousChannelName:r,context:_});if(t)return t;return""}},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(13);var h=r(16);var f=r.n(h);var b=r(1076);var g=r(531);var _=r(196);var y=r(1533);var O=r(38);var k=r(34);var E=r(3925);var j=r(128);var C=r(10);var S=r(2394);var w=r.n(S);var I=new C["b"]("search");var T={tab:d["b"].string.isRequired,setTab:d["b"].func.isRequired,usePrimarySearch:d["b"].bool,featurePeopleSearch:d["b"].bool,showNewChannelSearch:d["b"].bool,showNewPeopleSearch:d["b"].bool};var A={usePrimarySearch:false,featurePeopleSearch:false,showNewChannelSearch:false,showNewPeopleSearch:false};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSwitchItem=r.renderSwitchItem.bind(r);return r}s()(t,[{key:"renderSwitchItem",value:function e(t){var r=this;var a=t.name,n=t.id;return v.a.createElement(j["a"],{key:n,className:f()("c-search__tab c-tabs__tab",{"c-tabs__tab--active":this.props.tab===n}),onClick:function e(){return r.props.setTab({tab:n})},"aria-selected":this.props.tab===n,role:"tab","data-qa":"search_tab","data-qa-tab":n},a)}},{key:"render",value:function e(){var t=this;var r=[{id:"messages",name:I.t("Messages")},{id:"files",name:I.t("Files")},{id:"channels",name:v.a.createElement(p["Fragment"],null,I.t("Channels"),this.props.showNewChannelSearch&&v.a.createElement(p["Fragment"],null," ",v.a.createElement(E["a"],null,I.t("NEW"))))}];this.props.featurePeopleSearch&&r.push({id:"people",name:v.a.createElement(p["Fragment"],null,I.t("People"),this.props.showNewPeopleSearch&&v.a.createElement(p["Fragment"],null," ",v.a.createElement(E["a"],null,I.t("NEW"))))});return v.a.createElement("div",{role:"tablist",className:f()("c-search__tabs","c-tabs__tab_menu",{"c-search__tabs--primary_search_legacy":this.props.usePrimarySearch&&!Object(O["a"])(),"c-search__tabs--primary_search_sonic":this.props.usePrimarySearch&&Object(O["a"])()})},r.map(function(e){return t.renderSwitchItem(e)}))}}]);return t}(p["PureComponent"]);N.displayName="SearchTypeSwitch";N.defaultProps=A;var P=function e(t){return{tab:Object(_["s"])(t),featurePeopleSearch:Object(b["a"])(t),usePrimarySearch:Object(g["a"])(t),showNewChannelSearch:!Object(k["g"])(t,"seen_channel_search"),showNewPeopleSearch:!Object(k["g"])(t,"seen_people_search")}};var R={setTab:y["a"]};t["a"]=Object(m["connect"])(P,R)(N)},,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(16);var s=r.n(i);var o=r(0);var l=r(444);var c=r(3076);var u=r.n(c);var d={inactive:o["b"].bool,dimension:o["b"].number,team:o["b"].shape({name:o["b"].string,domain:o["b"].string,icon:o["b"].object}).isRequired};var p={inactive:false,dimension:34};var v=function e(t){var r=t.team,a=t.inactive,i=t.dimension;return n.a.createElement("div",{className:"p-ent_workspace_row_item"},n.a.createElement(l["a"],{entityType:"workspace",dimension:i,entityData:r,customClasses:s()("p-ent_workspace_row_item__icon",{"p-ent_workspace_row_item__icon--inactive":a})}),n.a.createElement("div",{className:"p-ent_workspace_row_item__text"},n.a.createElement("div",{className:"p-ent_workspace_row_item__name"},r.name),n.a.createElement("div",{className:"p-ent_workspace_row_item__domain"},r.domain+".slack.com")))};v.displayName="WorkspaceRowItem";v.defaultProps=p;t["a"]=v},function(e,t,r){"use strict";var a=r(195);var n=r(309);var i=r(52);var s=r(15);var o=r(269);var l=r(24);var c=r(17);var u=r(12);var d=r(713);var p=2e4;var v="TICKLE-MS";var m=Object(s["b"])("Ping the message server if necessary",function(e,t){var r=t();var s=Object(l["b"])(r);var m=Object(u["a"])({state:r});if(!s){m.info(v,"Skipping tickle because no user exists");return}if(!Object(i["isConnected"])(r))return;if(Object(c["getMemberManualPresence"])(s)===n["PRESENCE_AWAY"])return;var h=Date.now()-Object(a["g"])(r);if(h<p)return;e(Object(o["send"])({type:"tickle"})).catch(function(r){var a=r&&r.message===d["c"];if(!a){m.warn(v,"Send tickle event failed with error = "+r);return}m.warn(v,"Sending tickle event failed; will try again the next time we get reconnected");Object(i["promiseToHaveOpenWebSocket"])(t()).then(function(){m.info(v,"Retrying tickle event that failed earlier");e(Object(o["send"])({type:"tickle"})).then(function(){m.info(v,"Tickle sent successfully after retry")}).catch(function(e){m.warn(v,"Tickle retry failed with error: "+e)})})})});t["a"]=m},,,function(e,t,r){"use strict";var a=r(0);var n=r(1);var i=r.n(n);var s=r(13);var o=r(1168);var l=r(23);var c=r(568);var u={formattedDescription:a["b"].string};var d={formattedDescription:""};var p=function e(t){var r=t.formattedDescription;var a=Object(n["useCallback"])(function(e){var t=e&&e.target&&e.target.href;if(t&&"A"===e.target.tagName){e.preventDefault();Object(c["a"])(e.target.href)}},[]);if(!r)return null;return i.a.createElement("div",{onClick:a,dangerouslySetInnerHTML:{__html:r}})};p.displayName="BaseFormattedAppDescription";p.defaultProps=d;var v=function e(t,r){var a=r.formattedDescription;return{formattedDescription:Object(o["a"])(t,{messageText:a,teamId:Object(l["b"])(t)})}};t["a"]=Object(s["connect"])(v)(p)},function(e,t,r){"use strict";var a=r(11);var n=r(182);var i=function e(t,r){return Object(n["isAppSpaceEnabled"])(t)&&Object(a["isImWithApp"])(t,r)};t["a"]=i},function(e,t,r){},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(15);var n=r(0);var i=r(198);var s=r(850);var o=r(758);var l=Object(a["b"])("toggle the omniswitcher using command+k",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.key;Object(i["isSearchAutocompleteOpen"])(t())?e(Object(o["a"])()):e(Object(s["h"])({key:a}))});l.propTypes={key:n["b"].string.isRequired}},function(e,t,r){"use strict";r.d(t,"a",function(){return f});var a=r(1);var n=r.n(a);var i=r(0);var s=r(2);var o=r.n(s);var l=r(10);var c=r(187);var u=r(22);var d=r(2400);var p=r.n(d);var v=new l["b"]("comments");var m={toggleList:i["b"].func,commentCount:i["b"].number,expanded:i["b"].bool};var h={toggleList:s["noop"],commentCount:0,expanded:false};function f(e){var t=e.toggleList,r=e.commentCount,a=e.expanded;var i=a?v.t("Hide older comments",{fallbackHash:"f560b67c78f367354057065ac81410a1c310432b"}):v.t("See older comments");var s=a?"caret-down":"caret-right";return n.a.createElement("div",{className:"p-comment_list__toggle_container"},n.a.createElement(c["a"],{onClick:t,"aria-expanded":a},i),n.a.createElement("span",{className:"p-comment_list__toggle_count_button",role:"presentation",onClick:t},n.a.createElement(u["b"],{type:"comment-alt"}),n.a.createElement("span",{className:"p-comment_list__toggle_count"},r),n.a.createElement(u["b"],{type:s,className:"p-comment_list__toggle_caret"})))}f.displayName="CommentListToggle";f.defaultProps=h},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(16);var h=r.n(m);var f=r(2);var b=r.n(f);var g=r(87);var _=r(1088);var y=r(1090);var O=r(1564);var k={file:g["a"].File().isRequired,clogLinkClick:v["b"].func,className:v["b"].string,fullWidth:v["b"].bool,onClick:v["b"].func,showActions:v["b"].bool,useRowAction:v["b"].bool,includeRootDownloadAction:v["b"].bool,includeRootStarAction:v["b"].bool,"data-qa":v["b"].string};var E={clogLinkClick:f["noop"],className:null,fullWidth:false,onClick:f["noop"],showActions:true,useRowAction:false,includeRootDownloadAction:true,includeRootStarAction:false,"data-qa":void 0};var j=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file)}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.clogLinkClick,n=t.fullWidth,i=t.showActions,s=t.includeRootDownloadAction,o=t.includeRootStarAction,l=t.useRowAction,c=t["data-qa"];var u=h()("p-contextual_file",this.props.className);return p.a.createElement(_["a"],{file:r,className:u,fullWidth:n,clogLinkClick:a,showActions:i,useRowAction:l,includeRootDownloadAction:s,includeRootStarAction:o,"data-qa":c},p.a.createElement(y["a"],{file:r,onClick:this.onClick},p.a.createElement(O["a"],{file:r})))}}]);return t}(d["PureComponent"]);j.displayName="ContextualFile";j.defaultProps=E;t["a"]=j},,function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(441);var n=r(505);var i=r(67);var s=r(1444);function o(e,t){return function(r,o){var l=Object(i["a"])(o(),e,t);if(!l)return;r(Object(a["a"])({channelId:e,ts:t}));r(Object(n["d"])(l,t));var c=true;r(Object(s["a"])({channelId:e,msg:l,resent:c}))}}},function(e,t,r){"use strict";var a=r(15);var n=r(67);var i=r(19);var s=r(0);var o=r(12);var l=r(901);var c=Object(a["b"])("log message to console (for debugging)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,s=r.ts;var c=t();var u=Object(n["a"])(c,a,s);var d=Object(i["d"])(c,a);if(u){Object(o["a"])({getState:t}).warn(u);e(Object(l["e"])({message:u,modelObject:d}))}});c.propTypes={channelId:s["b"].string.isRequired,ts:s["b"].string.isRequired};t["a"]=c},function(e,t,r){"use strict";r.d(t,"a",function(){return a});function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=e.isStarred,a=e.isEphemeral,n=e.isBroadcast,i=e.isCustomResponse,s=e.isSliHighlight;if(n)return"broadcast";if(t)return"pinned";if(r)return"starred";if(a)return"ephemeral";if(i)return"custom_response";if(s)return"sli_highlight";return}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(1800);function n(e){return Object(a["a"])(e,function(e){return"A"===e.nodeName})}},,function(e,t,r){"use strict";r.d(t,"a",function(){return b});var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(112);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r.n(v);var h=r(71);var f=r(228);function b(e){return function(t){p()(r,t);function r(t){n()(this,r);var a=l()(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));a.uniqueId=Object(v["uniqueId"])();a.name=Object(v["snakeCase"])(e.name);a.telemeter=Object(h["a"])();a.logMetrics=a.telemeter&&Object(f["a"])(1);return a}s()(r,[{key:"componentWillMount",value:function e(){var t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this)).call.apply(t,[this].concat(n))}},{key:"componentDidMount",value:function e(){var t;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_mount_mark_"+this.uniqueId,"react_"+this.name+"_mount")}},{key:"componentWillUpdate",value:function e(){var t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_update_mark_"+this.uniqueId);for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUpdate",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUpdate",this)).call.apply(t,[this].concat(n))}},{key:"componentDidUpdate",value:function e(){var t;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidUpdate",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidUpdate",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_update_mark_"+this.uniqueId,"react_"+this.name+"_update")}}]);return r}(e)}},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(95);var o=r(2);var l=r.n(o);var c=r(10);var u=r(183);var d=r(28);var p=r(1211);var v=new c["b"]("attachments");var m={isExpanded:i["b"].bool,onClick:i["b"].func,attachmentsOverLimitCount:i["b"].number};var h={isExpanded:false,onClick:o["noop"],attachmentsOverLimitCount:0};var f=function e(t){var r=t.isExpanded,a=t.onClick,i=t.attachmentsOverLimitCount;var s=function e(){return n.a.createElement("b",null,r?v.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):v.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:i,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"}))};return n.a.createElement(u["a"],{enabled:["feature_react_messages"]},n.a.createElement("div",{className:"c-message_attachment"},n.a.createElement(p["a"],null),n.a.createElement("div",{className:"c-message_attachment__body"},n.a.createElement(d["c"],{className:"c-message_attachment__over_limit_button",onClick:a},n.a.createElement("p",{className:"c-message_attachment__over_limit"},s())))))};f.displayName="MessageAttachmentOverLimitButton";f.defaultProps=h;t["a"]=Object(s["pure"])(f)},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(2);var f=r.n(h);var b=r(1757);var g=r(16);var _=r.n(g);var y=r(87);var O=r(21);var k=r(45);var E=r(234);var j=r(865);var C=r(4);var S=r(85);var w=r(19);var I=r(67);var T=r(100);var A=r(385);var N=r(23);var P=r(4599);var R=r(195);var M=r(708);var x=r(841);var D=r(1548);var F=r(41);var L=r(577);var B=r(276);var U=r(10);var q=r(398);var G=r(38);var H=r(777);var W=r(843);var V=r(268);var K=r(1166);var z=r(1550);var Q=r(1549);var Y=r(1351);var J=r(39);var X=r(48);var Z=r(66);var $=r(3053);var ee=r(1780);var te=r(1229);var re=new U["b"]("message");var ae={reactionKey:v["b"].string,fileId:v["b"].string,fileIds:v["b"].arrayOf(v["b"].string),comment:v["b"].string,replies:v["b"].arrayOf(v["b"].shape({ts:v["b"].string,user:v["b"].string})),teamId:v["b"].string.isRequired,replyCount:v["b"].number,ts:v["b"].string,rollup:y["a"].Rollup(),threadTs:v["b"].string,channel:v["b"].object,file:v["b"].object,subtype:v["b"].string,channelId:v["b"].string,theme:v["b"].oneOf(["dense","light"]),isStarred:v["b"].bool,isPinned:v["b"].bool,isEphemeral:v["b"].bool,isFileAuthorExternal:v["b"].bool,isReply:v["b"].bool,canUserReplyToMessage:v["b"].bool,messageContainerType:v["b"].string,editHandler:v["b"].func,unreadHandler:v["b"].func,onMenuOpen:v["b"].func,onMenuClose:v["b"].func,onEmojiPickerOpen:v["b"].func,onEmojiPickerClose:v["b"].func,showComment:v["b"].bool,showShare:v["b"].bool,showReact:v["b"].bool,showJump:v["b"].bool,showStar:v["b"].bool,showMoreActions:v["b"].bool,jumpOrigin:v["b"].string,changeReactionFromUserAction:v["b"].func,pinMessage:v["b"].func,unpinMessage:v["b"].func,updateStar:v["b"].func,renderMenuBelowTrigger:v["b"].bool,renderOffscreen:v["b"].bool.isRequired,openModal:v["b"].func,showThread:v["b"].func,showThreadOrRefresh:v["b"].func,addReminderForMessage:v["b"].func,openShareDialog:v["b"].func,jumpToMessage:v["b"].func,featureOfflineMode:v["b"].bool,wasRecentlyOnline:v["b"].bool,featureSonicEmoji:v["b"].bool,featureReactAllThreads:v["b"].bool,featureJumpToMessage:v["b"].bool,clogger:v["b"].object.isRequired,clogLinkClick:v["b"].func,clogThreadEvent:v["b"].func};var ne={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:false,isPinned:false,isEphemeral:false,isFileAuthorExternal:false,isReply:false,canUserReplyToMessage:false,messageContainerType:void 0,editHandler:f.a.noop,unreadHandler:f.a.noop,onMenuOpen:f.a.noop,onMenuClose:f.a.noop,onEmojiPickerOpen:f.a.noop,onEmojiPickerClose:f.a.noop,showComment:true,showShare:true,showReact:true,showJump:false,showStar:true,showMoreActions:true,jumpOrigin:null,changeReactionFromUserAction:f.a.noop,pinMessage:f.a.noop,unpinMessage:f.a.noop,updateStar:f.a.noop,renderMenuBelowTrigger:true,openModal:f.a.noop,showThread:f.a.noop,showThreadOrRefresh:f.a.noop,addReminderForMessage:f.a.noop,openShareDialog:f.a.noop,jumpToMessage:f.a.noop,featureOfflineMode:false,wasRecentlyOnline:false,featureSonicEmoji:false,featureReactAllThreads:false,featureJumpToMessage:false,clogLinkClick:f.a.noop,clogThreadEvent:f.a.noop};var ie={x:0,y:-8};var se={x:4,y:-16};var oe={x:50,y:0};var le=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={moreActionsMenuOpen:false,subscribed:"loading"};Object(b["a"])(r,["onAddReaction","onEmojiSelected","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu"]);return r}s()(t,[{key:"onStar",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.fileId,i=t.fileIds,s=t.comment,o=t.subtype,l=t.isStarred;var c={channel:r,timestamp:a};n&&(c={file:n});if(s&&"file_comment"===o){var u=i&&i[0]||n;c={file_comment:s,file_comment_file:u}}this.props.updateStar(!l,c);var d=l?O["z"].UNSTAR_MESSAGE_BUTTON:O["z"].STAR_MESSAGE_BUTTON;this.trackAction(d);a&&Object(G["a"])()&&this.clogMsgStarClick()}},{key:"onAddReaction",value:function e(t){if(!this.props.reactionKey)return;Object(H["a"])({e:t,rxn_key:this.props.reactionKey});this.trackAction(O["z"].ADD_REACTION_BUTTON)}},{key:"onEmojiSelected",value:function e(t,r){var a=this.props.reactionKey;this.props.changeReactionFromUserAction({key:a,name:r})}},{key:"onComment",value:function e(){var t=this.props.threadTs||this.props.ts;this.props.showThreadOrRefresh({channelId:this.props.channel.id,threadTs:t});var r=this.state.subscribed?O["z"].REPLY_TO_THREAD_BUTTON:O["z"].START_A_THREAD_BUTTON;this.trackAction(r)}},{key:"onShare",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.fileId;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:n,initialChannelId:a}):this.props.openShareDialog({ts:r,channelId:a});this.trackAction(O["z"].SHARE_MESSAGE_BUTTON)}},{key:"onEdit",value:function e(t){this.props.onMenuClose();this.props.editHandler();t.stopPropagation();this.trackAction(O["z"].EDIT_MESSAGE_BUTTON,true)}},{key:"onDelete",value:function e(){var t=this.props,r=t.channelId,a=t.ts;this.props.openModal({element:p.a.createElement(Q["a"],{channelId:r,ts:a})});this.trackAction(O["z"].DELETE_MESSAGE_BUTTON,true)}},{key:"onMarkUnread",value:function e(){this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts});this.trackAction(O["z"].MARK_UNREAD_BUTTON,true)}},{key:"onRemind",value:function e(t){var r=this;var a=this.props,n=a.channel,i=a.ts,s=a.subtype;this.trackAction(O["z"].REMIND_ME_BUTTON,true);return function(){r.props.addReminderForMessage({time:t,message_channel:n.id,message_ts:i,respond_in_channel:"thread_broadcast"===s})}}},{key:"onSubscribe",value:function e(){var t=this.props,r=t.replies,a=t.ts,n=t.channel;var i=this.state.subscribed;var s=r.length&&r[r.length-1].ts;Object(W["d"])(n.id,a,!i,s);var o=i?O["z"].UNFOLLOW_MESSAGE_BUTTON:O["z"].FOLLOW_MESSAGE_BUTTON;this.trackAction(o,true)}},{key:"onPin",value:function e(){var t=this.props,r=t.ts,a=t.channel,n=t.isPinned,i=t.pinMessage,s=t.unpinMessage;if(n){s({ts:r,channelId:a.id});this.trackAction(O["z"].UNPIN_FROM_THIS_CONVERSATION_BUTTON,true)}else{i({ts:r,channelId:a.id});this.trackAction(O["z"].PIN_TO_THIS_CONVERSATION_BUTTON,true)}}},{key:"onCopyLink",value:function e(){var t=this.props,r=t.channel,a=t.ts,n=t.threadTs,i=t.file,s=t.subtype;var o=Object(V["a"])(r.id,a,n);i&&"file_comment"!==s&&(o=i.permalink);Object(B["writeText"])(o);this.trackAction(O["z"].COPY_LINK_BUTTON,true)}},{key:"onJump",value:function e(){var t=this.props,r=t.channel,a=t.ts,n=t.teamId,i=t.isReply,s=t.jumpOrigin,o=t.clogLinkClick,l=t.featureJumpToMessage;var c=this.props.threadTs||this.props.ts;if(l)this.props.jumpToMessage({channelId:r&&r.id,ts:a,threadTs:i&&c});else if(i)this.props.showThread({channelId:r.id,threadTs:c,highlightTs:a,origin:s});else{var u=Object(q["a"])({channelId:r.id,ts:a,threadTs:c});Object(q["d"])(n,u)}this.props.messageContainerType===J["MESSAGE_CONTAINERS"].THREADS_VIEW&&this.props.featureReactAllThreads&&o("OPEN_IN_CHANNEL")}},{key:"onRemoveBroadcast",value:function e(){var t=this.props,r=t.channelId,a=t.ts;this.props.openModal({element:p.a.createElement(z["a"],{channelId:r,ts:a})});this.trackAction(O["z"].REMOVE_FROM_CONVERSATION_BUTTON,true)}},{key:"onMoreActionsMenuOpen",value:function e(){this.setState(function(){return{moreActionsMenuOpen:true}});this.props.onMenuOpen();this.trackAction(O["z"].MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function e(){this.setState(function(){return{moreActionsMenuOpen:false}});this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function e(t,r){if(r.id===J["SLACK_ACTION_IDS"].editMessage){this.onEdit(t);return true}return false}},{key:"isAutomated",value:function e(){return Object(L["a"])(this.props.subtype)}},{key:"isTemp",value:function e(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a={action:O["w"].CLICK,ui_element:t};r&&(a.step=O["A"].MORE_ACTIONS_MENU);var n=this.props.clogger;n.track(O["l"].MSG_ACTION,{contexts:{ui_context:a}})}},{key:"clogMsgStarClick",value:function e(){var t=this.props,r=t.channelId,a=t.isStarred,n=t.messageContainerType,i=t.threadTs,s=t.clogger,o=t.clogThreadEvent;var l=a?O["l"].STAR_REMOVE_CLICKED:O["l"].STAR_ADD_CLICKED;var c={channel_id:r,parent_message_id:i};n===J["MESSAGE_CONTAINERS"].THREADS_VIEW?o({event:l,metadata:c}):s.track(l,c)}},{key:"renderStar",value:function e(){var t=this.props,r=t.fileId,a=t.subtype,n=t.isStarred,i=t.isEphemeral,s=t.channel,o=t.showStar;if(!o)return null;if(i||"tombstone"===a&&!n)return null;var l="message";r&&(l="file_comment"===a?"file comment":"file");var c=void 0;c=n?"file"===l?re.t("Unstar file"):"file comment"===l?re.t("Unstar file comment"):re.t("Unstar message"):"file"===l?re.t("Star file"):"file comment"===l?re.t("Star file comment"):re.t("Star message");return p.a.createElement(te["a"],{iconType:n?"small-star-filled":"small-star",label:c,onClick:this.onStar,"data-qa":"star_message",tooltipPosition:s?"top":"top-right"})}},{key:"renderShare",value:function e(){if(!this.props.showShare)return null;var t=this.props,r=t.ts,a=t.subtype,n=t.isEphemeral,i=t.featureOfflineMode,s=t.wasRecentlyOnline;if(n||"tombstone"===a||Object(F["isTempTs"])(r))return null;if("file_comment"===a)return null;var o="file_share"===a||"file_mention"===a?re.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):re.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});i&&!s&&(o=p.a.createElement(Y["a"],{tooltipLabel:o}));return p.a.createElement(te["a"],{iconType:"share-action",label:o,onClick:this.onShare,"data-qa":"share_message"})}},{key:"renderReaction",value:function e(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype)return null;if(this.props.featureSonicEmoji)return p.a.createElement(K["a"],{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.props.onEmojiPickerClose,showHandyReactions:true},p.a.createElement(te["a"],{iconType:"small-reaction",label:re.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),"data-qa":"add_reaction_action"}));return p.a.createElement(te["a"],{iconType:"small-reaction",label:re.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderJump",value:function e(){if(!this.props.showJump)return null;if(!this.props.channel)return null;var t=re.t("Jump");(this.props.messageContainerType===J["MESSAGE_CONTAINERS"].THREADS_VIEW&&this.props.featureReactAllThreads||this.props.messageContainerType===J["MESSAGE_CONTAINERS"].THREADS_FLEXPANE)&&(t=re.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"}));return p.a.createElement(te["a"],{iconType:"jump",label:t,onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderComment",value:function e(){var t=this.props,r=t.showComment,a=t.isEphemeral,n=t.canUserReplyToMessage,i=t.replyCount,s=t.subtype,o=t.messageContainerType,l=t.featureOfflineMode,c=t.wasRecentlyOnline;var u=i||"thread_broadcast"===s;if(!r)return null;if(this.props.isFileAuthorExternal)return null;if(this.isAutomated()||this.isTemp()||a)return null;if(!n&&!u)return null;var d=void 0;if(o===J["MESSAGE_CONTAINERS"].THREADS_VIEW)d=re.t("View thread in sidebar");else if(!n&&u)d=re.t("View thread");else if(u){d=re.t("Reply to thread");l&&!c&&(d=p.a.createElement(Y["a"],{tooltipLabel:d}))}else{d=re.t("Start a thread");l&&!c&&(d=p.a.createElement(Y["a"],{tooltipLabel:d}))}return p.a.createElement(te["a"],{iconType:"small-reply",label:d,onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread"})}},{key:"renderEllipsis",value:function e(){var t=this.props,r=t.renderMenuBelowTrigger,a=t.channel,n=t.featureOfflineMode,i=t.wasRecentlyOnline,s=t.showMoreActions;if(!a||!s)return null;var o=re.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});n&&!i&&(o=p.a.createElement(Y["a"],{tooltipLabel:re.t("More actions")}));return p.a.createElement(Z["e"],{renderMenu:this.renderMoreActionsMenu,position:r?"right-bottom":"top-right",allowanceX:r?oe.x:0,offsetX:r?se.x:ie.x,offsetY:r?se.y:ie.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},p.a.createElement(te["a"],{iconType:"small-ellipsis",label:o,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function e(t){var r=this.props,a=r.channel,n=r.ts,i=r.messageContainerType,s=r.rollup;var o=t.onTriggerClose,l=t.onMenuItemSelected;return p.a.createElement($["a"],{rollup:s,ts:n,channelId:a.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:o,onMenuItemSelected:l,messageContainerType:i})}},{key:"render",value:function e(){var t=_()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen});var r=re.t("Message actions");return p.a.createElement(ee["a"],{className:t,ariaLabel:r},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]);return t}(d["PureComponent"]);le.displayName="MessageActions";le.defaultProps=ne;var ce=function e(t,r){var a=r.fileId,n=r.channelId,i=r.ts;var s=Object(w["d"])(t,n);var o=Object(I["a"])(t,n,i);return{channel:s,file:Object(S["getFileById"])(t,a),isFileAuthorExternal:Object(S["isFileAuthorExternal"])(t,a),featureSonicEmoji:Object(C["isFeatureEnabled"])(t,"feature_sonic_emoji"),teamId:Object(N["b"])(t),clogger:Object(k["a"])({state:t}),featureOfflineMode:Object(C["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(R["h"])(t),canUserReplyToMessage:Object(F["canReplyOrComment"])(t,{message:o,channel:s}),featureReactAllThreads:Object(C["isFeatureEnabled"])(t,"feature_react_all_threads"),featureJumpToMessage:Object(C["isFeatureEnabled"])(t,"feature_jump_to_message")}};var ue={changeReactionFromUserAction:P["a"],pinMessage:E["pinMessage"],unpinMessage:E["unpinMessage"],updateStar:j["a"],openModal:X["openModal"],showThread:T["l"],showThreadOrRefresh:function e(){return A["showThreadOrRefresh"].apply(void 0,arguments)},addReminderForMessage:D["a"],openShareDialog:M["a"],jumpToMessage:function e(){return x["a"].apply(void 0,arguments)}};t["a"]=Object(m["connect"])(ce,ue)(le)},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(10);var n=new a["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,r=e.pinnedBy,a=e.renderPinnedBy;if(r){if(r===t)return n.t("Pinned by you");return n.rt("Pinned by {member}",{member:a(r)})}return n.t("Pinned")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,r=void 0!==t&&t,a=e.renderStarButton,i=e.featureMessageLabelsCopy;if(r)return n.rt("<star>Added to your starred items</star>",null,a);if(i)return n.rt("<star>Starred</star>",null,a);return n.rt("<star>starred</star>",null,a)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=e.isStarred,a=e.isEphemeral,o=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,v=e.pinnedBy,m=e.renderPinnedBy,h=e.renderStarButton,f=e.renderHighlight,b=e.renderBroadcast,g=e.featureMessageLabelsCopy;if(a){if(!u&&!d)return n.t("Only visible to you");return null}if(g&&o){if(t&&r)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:v,renderPinnedBy:m}),starred:s({renderStarButton:h,featureMessageLabelsCopy:g}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},b);if(r)return n.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:s({renderStarButton:h,featureMessageLabelsCopy:g}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},b);if(t)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:i({currentUserId:p,pinnedBy:v,renderPinnedBy:m}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},b);return n.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},b)}if(l){if(t&&r)return n.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:v,renderPinnedBy:m}),starred:s({renderStarButton:h,featureMessageLabelsCopy:g})});if(r)return n.rt("{starred} \u2219 Custom response",{starred:s({long:true,renderStarButton:h,featureMessageLabelsCopy:g})});if(t)return n.rt("{pinned} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:v,renderPinnedBy:m})});return n.t("Custom response")}if(c){if(t&&r)return n.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:v,renderPinnedBy:m}),starred:s({renderStarButton:h,featureMessageLabelsCopy:g})});if(r)return n.rt("{starred} \u2219 {highlight}",{highlight:f(),starred:s({long:true,renderStarButton:h,featureMessageLabelsCopy:g})});if(t)return n.rt("{pinned} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:v,renderPinnedBy:m})});return n.rt("{highlight}",{highlight:f()})}if(t&&r)return n.rt("{pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:v,renderPinnedBy:m}),starred:s({renderStarButton:h,featureMessageLabelsCopy:g})});if(t)return i({currentUserId:p,pinnedBy:v,renderPinnedBy:m});if(r)return s({long:true,renderStarButton:h,featureMessageLabelsCopy:g});return null}},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(13);var h=r(16);var f=r.n(h);var b=r(2);var g=r.n(b);var _=r(329);var y=r(50);var O=r(10);var k=r(22);var E=r(28);var j=r(795);var C=r(66);var S=new O["b"]("message");var w={channelId:d["b"].string.isRequired,ts:d["b"].string.isRequired,isHovered:d["b"].bool,sliHighlight:d["b"].shape({loading:d["b"].bool,isHighlight:d["b"].bool,feedbackOptions:d["b"].object,justification:d["b"].string,feedback:d["b"].string}),onSliHighlightsDefaultFeedback:d["b"].func,onSliHighlightsSecondaryFeedbackOption:d["b"].func};var I={isHovered:false,sliHighlight:null,onSliHighlightsDefaultFeedback:g.a.noop,onSliHighlightsSecondaryFeedbackOption:g.a.noop};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSliHighlightsFeedbackDefaultPositive=r.onSliHighlightsFeedbackDefaultPositive.bind(r);r.onSliHighlightsFeedbackDefaultNegative=r.onSliHighlightsFeedbackDefaultNegative.bind(r);r.renderNegativeFeedbackMenu=r.renderNegativeFeedbackMenu.bind(r);return r}s()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(true)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(false)}},{key:"renderPositiveHighlightLabel",value:function e(){return v.a.createElement("span",null,v.a.createElement("span",{className:"c-message__label__highlight_title"},S.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function e(){var t=this.props,r=t.isHovered,a=t.sliHighlight;var n="default_positive"===a.feedback;if(r){var i=f()({"c-message__label__highlight_positive":true,"c-message__label__highlight_positive--active":n});var s=f()({"c-message__label__highlight_negative":true,"c-message__label__highlight_negative--inactive":n});return v.a.createElement("span",null,S.t("Is this helpful?"),v.a.createElement(y["c"],{tip:n?S.t("Thank you!"):S.t("This was helpful")},v.a.createElement(E["c"],{className:i,onClick:this.onSliHighlightsFeedbackDefaultPositive},v.a.createElement(k["b"],{type:"thumbs-up",size:"inherit",inline:true}))),v.a.createElement(y["c"],{tip:S.t("This wasn\u2019t helpful")},v.a.createElement(E["c"],{className:s,onClick:this.onSliHighlightsFeedbackDefaultNegative},v.a.createElement(k["b"],{type:"thumbs-down",size:"inherit",inline:true}))))}return v.a.createElement(j["a"],{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function e(){return v.a.createElement("span",null,v.a.createElement("strong",null,S.t("What\u2019s not working about this highlight?"))," ",S.t("Let us know, and we\u2019ll adjust."),"\xa0",v.a.createElement(C["e"],{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},v.a.createElement(E["c"],{className:"c-message__label__feedback_dropdown btn_unstyle sk_fill_blue"},S.t("Give Feedback")," ",v.a.createElement(k["b"],{type:"chevron-down",inline:true}))))}},{key:"renderNegativeFeedbackMenu",value:function e(t){var r=this;var a=this.props.sliHighlight.feedbackOptions;if(g.a.isEmpty(a))return null;return v.a.createElement(C["f"],t,g.a.map(a.negative,function(e){return v.a.createElement(C["b"],{key:e.args.ts,label:v.a.createElement(j["a"],{text:e.text,noLinking:true,showTooltips:false}),onSelected:function t(){return r.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function e(){var t=this.props.sliHighlight;if(!t.feedback||"default_positive"===t.feedback)return this.renderPositiveHighlightLabel();return this.renderNegativeHighlightLabel()}}]);return t}(p["PureComponent"]);T.displayName="SliHighlightsMessageLabel";T.defaultProps=I;function A(e,t){var r=t.channelId,a=t.ts,n=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:r,ts:a,feedback:i?"default_positive":"default_negative",leftFeedback:i,args:n.feedbackOptions[i?"default_positive":"default_negative"].args,requestId:n.requestId}))},onSliHighlightsSecondaryFeedbackOption:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:r,ts:a,feedback:"negative",leftFeedback:true,args:i,requestId:n.requestId}))}}}t["a"]=Object(m["connect"])(null,A)(T)},function(e,t,r){"use strict";var a=r(0);var n=r(15);var i=r(358);var s=Object(n["b"])("Start editing the last message in a given channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,s=r.viewContext;var o=t();var l=Object(i["getLastEditableMessageInChannel"])(o,{channelId:a,threadTs:n});if(!l)return false;e(Object(i["maybeStartEditingMessage"])({channelId:a,ts:l.ts,viewContext:s,scroll:true}));return true});s.propTypes={channelId:a["b"].string.isRequired,threadTs:a["b"].string,viewContext:a["b"].string};t["a"]=s},function(e,t,r){"use strict";var a=r(107);var n=r.n(a);var i=r(39);var s=r(136);var o=r(1048);var l=r(393);t["a"]=function(e,t){var r=t.featureWysiwygComposer;if(!e)return false;var a=Object(s["o"])(e.contents,"a");if(!a.trim())return false;if(r){if(Object(o["a"])(new n.a(e.contents))>i["MAX_MESSAGE_INPUT_LENGTH"])return false}else if(Object(l["a"])(e).length>i["MAX_MESSAGE_INPUT_LENGTH"])return false;return true}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(1068);var n=r(1810);var i=r(79);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.e,r=e.isMenuVisible,s=void 0!==r&&r;if(!t)return false;if(s)return false;if(Object(a["a"])(t.target))return false;if(!Object(n["a"])(t))return false;if(t&&t.keyCode===i["j"])return false;return true}},,function(e,t,r){"use strict";t["a"]=function(e){if(!e)return false;if(e.metaKey||e.ctrlKey)return false;return e.key&&1===e.key.length}},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(16);var o=r.n(s);var l=r(10);var c=r(50);var u=r(22);var d=r(3227);var p=r.n(d);var v=new l["b"]("msg_input");var m={tooltip:i["b"].string,padding:i["b"].string,border:i["b"].bool,featureAnnounceOnly:i["b"].bool};var h={tooltip:null,border:false,padding:void 0,featureAnnounceOnly:false};var f=function e(t){var r=t.tooltip,a=t.border,i=t.padding,s=t.featureAnnounceOnly;if(!s)return null;var l=o()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":a,"p-message_input_announce_only_roadblock--large_padding":"large"===i});return n.a.createElement("div",{className:l},n.a.createElement(u["b"],{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:true}),v.t("Read-only"),r&&n.a.createElement(c["c"],{position:"top-right",tip:r},n.a.createElement(u["b"],{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:true})))};f.displayName="MessageInputAnnounceOnlyRoadblock";f.defaultProps=h;t["a"]=f},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(112);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(3);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(2);var _=r.n(g);var y=r(537);var O=r(1046);function k(e){var t={};for(var r=0;r<e.length;r++)t[e[r].key]={index:e[r].index,next:_.a.get(e[r+1],"key")};return t}var E=m()({},y["a"].propTypes,{stickyItems:b["b"].arrayOf(b["b"].shape({key:b["b"].string,index:b["b"].number})),stickyOffsetTop:b["b"].number,stickyZIndex:b["b"].number});var j=m()({},y["a"].defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});var C=function(e){p()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.stickyItems=k(e.stickyItems);return r}s()(t,[{key:"componentWillReceiveProps",value:function e(r){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,r);this.stickyItems=k(r.stickyItems)}},{key:"renderItem",value:function e(r,a){if(!(r in this.stickyItems))return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,r,a);var n=0===a?-100:this.getTop(r);var i=this.layout.getHeight(r);var s=this.layout.getHeightValidity(r);var o=this.getContentHeight();var l=this.stickyItems[r].next;var c=l?this.getTop(l):o;var d=Math.max(0,o-c);var p=this.state.activeItem===r;var v=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===r;var m=this.state.mouseDownTargetItem===r;var h=this.state.hoveredItem===r;var b=this.props,g=b.getAriaLabelForRow,_=b.isItemAriaExpanded;var y=g&&g(a,{hasFocus:p});var k=_&&_(r,a);var E=true===k?this.props.itemAriaControls:void 0;return f.a.createElement("div",{key:""+r+n+d+this.props.width+this.props.height,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:n,bottom:d}},f.a.createElement(O["a"],{id:r,height:i,validity:s,className:"c-virtual_list__item--sticky",style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},role:this.props.itemRole,ariaLabel:y,ariaExpanded:k,ariaControls:E,hasFocus:p,hasFocusWithin:v,isMouseDownOnItem:m,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onTabWithin:this.onItemTabWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup,onClick:this.props.onItemClick,tabIndex:this.getListItemTabIndex()},this.props.rowRenderer(a,{hasFocus:p,isHovered:h,isExpanded:k})))}},{key:"renderItems",value:function e(){var r=u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var a=this.state.start;var n=_.a.sortedIndexBy(this.props.stickyItems,{index:a},function(e){return e.index})-1;var i=this.props.stickyItems[n];i&&r.unshift(this.renderItem(i.key,i.index));return r}}]);return t}(y["a"]);t["a"]=C;C.propTypes=E;C.defaultProps=j},function(e,t,r){"use strict";var a=r(26);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(112);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(3);var f=r.n(h);var b=r(1);var g=r.n(b);var _=r(16);var y=r.n(_);var O=r(0);var k=r(22);var E=r(10);var j=r(1812);var C=r(3231);var S=r.n(C);var w=new E["b"]("messages");var I=20;var T=f()({},j["a"].propTypes,{reachedStart:O["b"].bool,reachedEnd:O["b"].bool});var A=f()({},j["a"].defaultProps,{reachedStart:false,reachedEnd:false});var N=function(e){m()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.pendingUpdate=null;r.recomputeOffsets(e);r.overscan=Math.max(200,e.height/2);return r}l()(t,[{key:"componentDidUpdate",value:function e(){var r;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];(r=p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(r,[this].concat(n));0===this.props.keys.length&&this.loadMore();this.layout.setBottomMargin(this.getLoadingOffsetBottom());this.pendingUpdate=false}},{key:"onKeyDownPageDown",value:function e(r){if(this.state.hasKeyboardFocus&&this.isScrolledToBottom()&&this.props.reachedEnd){this.focusLastItemInView();return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeyDownPageDown",this).call(this,r)}},{key:"onKeyUpPageDown",value:function e(r){if(this.state.hasKeyboardFocus&&this.isScrolledToTop()&&this.props.reachedStart){this.focusFirstItemInView();return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeyUpPageDown",this).call(this,r)}},{key:"getOffset",value:function e(){var t=this.getLoadingOffsetTop();return this.startTop-t}},{key:"getLoadingOffsetTop",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedStart&&0===this.state.start)return 0;if(this.layout.getTotalHeight()<=this.props.height)return 0;if(0!==this.state.start)return 96;return 56}},{key:"getLoadingOffsetBottom",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedEnd&&this.state.end===this.props.keys.length)return 0;return 96}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;return p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function e(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function e(t){return this.layout.getTop(t)-this.getOffset()}},{key:"getBottom",value:function e(t){return this.layout.getBottom(t)-this.getOffset()}},{key:"setScrollTop",value:function e(r){var a=r<this.getOffset();var n=r+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(a&&0!==this.state.start||n&&this.state.end!==this.props.keys.length){this.scrollTop=r;this.relayout();return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,r-this.getOffset())}},{key:"scrollToOffset",value:function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.animate,i=a.absolute;if(!this.node)return;if(this.pendingUpdate)return;var s=i?r:r-this.getOffset();!i&&s>0&&s<this.getLoadingOffsetTop()&&(s=0);var o=this.bracketScrollTop(s);if(!i&&o!==s){this.setScrollTop(r);return}if(n){this.scrollAnimation=this.node.scrollWithAnimation(o);return}p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,o)}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,t))}},{key:"resetRendered",value:function e(){this.overscan=this.props.height/2}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop();var i=this.layout.getTotalHeight();var s=0===t&&n<1;var o=r===a.keys.length&&n+a.height>i-1;var l=!a.keys.length||i<=a.height||s;var c=!a.keys.length||i<=a.height||o;if(l&&c)return a.loadAround();if(l)return a.loadPre();if(c)return a.loadPost();return false}},{key:"relayout",value:function e(){var t=this;this.setState(function(e,r){if(r.isLoading)return null;var a=e.start,n=e.end;var i=t.startKey;var s=t.endKey;t.recomputeOffsets(r,a,n);var o=t.node?t.node.scrollTop():0;var l=t.getScrollTop();var c=o-1<=0||l-1<=t.getOffset();var u=o+1>=t.getContentHeight()-r.height||l+1>=t.endBottom-r.height;var d={start:a,end:n};if(t.startKey!==i||t.endKey!==s||c&&0!==a||u&&n!==r.keys.length){e.scrolling&&(t.overscan=8e3);d=t.computeBounds(r,l);var p=d,v=p.start,m=p.end;t.recomputeOffsets(r,v,m);c=l-1<=t.getOffset();u=l+r.height+1>=t.endBottom+t.getLoadingOffsetBottom()}(c&&0===d.start||u&&d.end===r.keys.length||t.layout.getTotalHeight()<r.height&&0===d.start)&&t.loadMore(a,n,r);var h=t.layout.getTops();if(d.start===a&&d.end===n&&h===e.tops)return null;t.scrollAnimation&&t.scrollAnimation.cancel();t.pendingUpdate=true;t.scrollTop=l;return f()({},d,{tops:h})})}},{key:"recomputeOffsets",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end;var n=this.layout.getTotalHeight()<=t.height;this.startKey=t.keys[r];this.endKey=t.keys[a-1];this.startTop=n?0:this.layout.getTop(this.startKey)||0;this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments[1];var n=a-this.overscan;var i=a+r.height+this.overscan;var s=p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,n,i);return this.snapBounds(r,s)}},{key:"snapBounds",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments[1];var a=r.start,n=r.end;return{start:a<I?0:a,end:t.keys.length-n<I?t.keys.length:n}}},{key:"renderLoading",value:function e(t,r){var a=t?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15};var n=t?"degradedLoadingTop":"degradedLoadingBottom";var i=this.props.featureOfflineMode&&this.props.isOffline&&!r;var s=w.t("Loading history...");this.props.featureOfflineMode&&i&&(s=g.a.createElement("span",null,g.a.createElement(k["b"],{type:"cloud-offline-small",size:"inherit"})," ",g.a.createElement("strong",null,w.t("No connection."))," ",w.t("Go online to load more messages.")));var o=y()("p-degraded_list__loading",{"p-degraded_list__loading--offline":i});return g.a.createElement("div",{key:n,className:o,style:a},s)}},{key:"renderItems",value:function e(){var r=p()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var a=this.state.start>0;var i=this.state.end<this.props.keys.length;var s=this.props.keys.length>1&&(!this.props.reachedStart||a);var o=this.props.keys.length>1&&(!this.props.reachedEnd||i);return[s&&this.renderLoading(true,a)].concat(n()(r),[o&&this.renderLoading(false,i)])}}]);return t}(j["a"]);t["a"]=N;N.propTypes=T;N.defaultProps=A},function(e,t,r){"use strict";r.d(t,"a",function(){return a});function a(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return true;if(e.indexOf("force_infinite_list=1")>0)return false;var t=window.navigator.userAgent;if(-1!==t.indexOf("Firefox"))return true;if(-1!==t.indexOf("Windows"))return true;if(-1!==t.indexOf("Linux"))return true;return false}},function(e,t,r){"use strict";var a=r(846);t["a"]=a["a"]},,function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(2);var n=r.n(a);var i=r(41);var s=r(67);function o(e,t,r){var a=Object(s["a"])(e,t,r);return a&&!Object(i["isTempMsg"])(a)&&!Object(i["isEphemeral"])(a)}function l(e,t,r){return Object(a["max"])(Object(a["filter"])(r,function(r){return o(e,t,r)}))}},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(13);var b=r(16);var g=r.n(b);var _=r(2);var y=r.n(_);var O=r(1757);var k=r(10);var E=r(151);var j=r(4);var C=r(99);var S=r(100);var w=r(4512);var I=r(3306);var T=r.n(I);var A={id:h["b"].string.isRequired,name:h["b"].string.isRequired,description:h["b"].string,isActive:h["b"].bool,handle:h["b"].string,userCount:h["b"].number.isRequired,canEditUserGroups:h["b"].func.isRequired,canCreateAndDeleteUserGroups:h["b"].func.isRequired,featureSonicUserGroups:h["b"].bool,onClick:h["b"].func,showUserGroupDetails:h["b"].func.isRequired};var N={description:null,isActive:false,handle:void 0,featureSonicUserGroups:false,onClick:_["noop"]};var P=new k["b"]("user_groups");var R=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(r,["onMenuClick","renderContextMenu"]);return r}l()(t,[{key:"onMenuClick",value:function e(t){var r=this.props.id;this.props.onClick(t,r)}},{key:"renderName",value:function e(){var t=this.props,r=t.name,a=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("black",{sk_dark_gray:!a});var s=a?r:P.t("{name} (Deactivated)",{name:r});return m.a.createElement("div",{className:i},s)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.description,a=t.isActive;if(!r)return null;var n=g()("overflow_ellipsis",{sk_dark_gray:!a});return m.a.createElement("div",{className:n},r)}},{key:"renderHandle",value:function e(){var t=this.props.handle;if(!t)return null;return m.a.createElement("span",{className:"p-user_group_row__handle"},t)}},{key:"renderContextMenu",value:function e(t){return m.a.createElement(w["c"],{menuProps:t,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"render",value:function e(){var t=this.props,r=t.userCount,a=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("p-user_group_row",{"p-user_group_row--inactive":!a});var s={renderMenu:this.renderContextMenu,className:i,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups(),id:this.props.id,isActive:a};return m.a.createElement(w["a"],s,this.renderName(),this.renderDescription(),this.renderHandle(),m.a.createElement("span",{className:"p-user_group_row__count"},P.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:r})))}}]);return t}(v["PureComponent"]);R.displayName="UserGroupRow";R.defaultProps=N;var M=function e(t,r){var a=r.id;var i=Object(E["e"])(t,a);var s={canEditUserGroups:function e(){return Object(C["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(C["b"])(t)},featureSonicUserGroups:Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups")};if(!i)return s;return n()({name:Object(C["h"])(i),description:Object(C["e"])(i),handle:Object(C["f"])(i),userCount:Object(C["l"])(i),isActive:Object(C["t"])(i)},s)};var x={showUserGroupDetails:S["n"]};t["a"]=Object(f["connect"])(M,x)(R)},,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=r(20);var n=Object(a["b"])("TS.client.channel_header.calculateNoDragRegions");var i=Object(a["b"])("TS.client.channel_header.legacySetupDragRegions")},,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(16);var h=r.n(m);var f=r(0);var b=r(35);var g=r(19);var _=r(4);var y=r(31);var O=r(11);var k=r(45);var E=r(21);var j=r(3235);var C=r(10);var S=r(2265);var w=new C["b"]("unavailable_channel");var I={isImOrMpim:f["b"].bool.isRequired,unavailableTeamId:f["b"].string.isRequired,featureEscGridMigrationsClient:f["b"].bool.isRequired,isThread:f["b"].bool};var T={isThread:false};var A=function e(t){var r=t.isThread,a=t.isImOrMpim,n=t.unavailableTeamId,i=t.featureEscGridMigrationsClient;if(!i)return null;var s=void 0;var o=p.a.createElement(S["a"],{id:n});s=r?w.t("This thread is currently unavailable"):w.rt("{teamName} is making changes to their workspace",{teamName:o});var l=void 0;l=r?w.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:o}):a?w.t("This conversation will be unavailable until this process is complete."):w.t("This channel will be unavailable until this process is complete.");var c=cdn_url+"/1295a/img/enterprise/unavailable_channel.png";return p.a.createElement(d["Fragment"],null,p.a.createElement("img",{className:"p-unavailable_channel_image",src:c,srcSet:c+", "+c.replace(".png","@2x.png")+" 2x",alt:""}),p.a.createElement("h2",{className:"p-unavailable_channel_title"},s),p.a.createElement("div",{className:"p-unavailable_channel_content"},l))};A.displayName="UnavailableChannelBlocker";A.defaultProps=T;var N=A;var P=r(832);var R=r(49);var M=r(294);var x=new C["b"]("unavailable_channel");var D={isImOrMpim:f["b"].bool.isRequired,unavailableTeamId:f["b"].string.isRequired,featureEscGridMigrationsClient:f["b"].bool.isRequired,isThread:f["b"].bool,clogger:f["b"].object.isRequired,channelId:f["b"].string.isRequired,channelPrivacyType:f["b"].oneOf(Object.values(O["CHANNEL_PRIVACY_TYPE"])).isRequired};var F={isThread:false};var L=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={loading:false};r.handleReload=r.handleReload.bind(r);return r}s()(t,[{key:"handleReload",value:function e(){var t=this.props,r=t.channelId,a=t.channelPrivacyType,n=t.unavailableTeamId,i=t.clogger,s=t.isThread;this.setState(function(){return{loading:true}});var o="UnavailableChannelReload: Remote team "+n+" has migrated their data, user triggered client reload";var l="unavailable_channel_reload";Object(R["a"])()?Object(M["a"])({reason:o,reasonKey:l}):Object(M["b"])({reason:o,reasonKey:l,noCache:true});i.track(E["l"].CHANNEL_UNAVAILABLE,{channel_id:r,channel_type:r?r.charAt(0):null,channel_privacy_type:a,unavailable_team_id:n,contexts:{ui_context:{action:E["w"].CLICK,step:s?E["A"].THREAD:E["A"].MESSAGE_PANE,ui_element:E["z"].BTN_RELOAD}}});i.sendDataAndEmptyQueue()}},{key:"render",value:function e(){var t=this.props,r=t.isThread,a=t.isImOrMpim,n=t.unavailableTeamId,i=t.featureEscGridMigrationsClient;if(!i)return null;var s=void 0;s=r?x.t("Reload Slack to view this thread"):a?x.t("Reload Slack to view this conversation"):x.t("Reload Slack to view this channel");var o=p.a.createElement(S["a"],{id:n});var l=void 0;l=r?x.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:o}):a?x.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:o}):x.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:o});var c=cdn_url+"/e9645/img/enterprise/unavailable_channel_reload.png";return p.a.createElement(d["Fragment"],null,p.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:c,srcSet:c+", "+c.replace(".png","@2x.png")+" 2x",alt:""}),p.a.createElement("h2",{className:"p-unavailable_channel_title"},s),p.a.createElement("div",{className:"p-unavailable_channel_content"},p.a.createElement("p",null,l),p.a.createElement("div",{className:"align_center"},p.a.createElement(P["a"],{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},x.t("Reload Slack")))))}}]);return t}(d["PureComponent"]);L.displayName="UnavailableChannelReload";L.defaultProps=F;var B=L;var U={isReloadRequired:f["b"].bool.isRequired,isImOrMpim:f["b"].bool.isRequired,unavailableTeamId:f["b"].string.isRequired,featureEscGridMigrationsClient:f["b"].bool.isRequired,isThread:f["b"].bool,clogger:f["b"].object.isRequired,channelId:f["b"].string.isRequired,channelPrivacyType:f["b"].oneOf(Object.values(O["CHANNEL_PRIVACY_TYPE"])).isRequired};var q={isThread:false};var G="reload";var H="blocker";var W=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.clogImpression()}},{key:"componentDidUpdate",value:function e(t){t.isReloadRequired===this.props.isReloadRequired&&t.channelId===this.props.channelId||this.clogImpression()}},{key:"clogImpression",value:function e(){if(!this.props.featureEscGridMigrationsClient)return;var t=this.props,r=t.channelId,a=t.channelPrivacyType,n=t.unavailableTeamId,i=t.clogger,s=t.isThread,o=t.isReloadRequired;i.track(E["l"].CHANNEL_UNAVAILABLE,{channel_id:r,channel_type:r?r.charAt(0):null,channel_privacy_type:a,unavailable_team_id:n,contexts:{ui_context:{action:E["w"].IMPRESSION,step:s?E["A"].THREAD:E["A"].MESSAGE_PANE,ui_properties:{element_name:o?G:H}}}})}},{key:"render",value:function e(){if(!this.props.featureEscGridMigrationsClient)return null;var t=this.props,r=t.isReloadRequired,a=t.isThread;var n=h()("p-unavailable_channel",{"p-unavailable_channel_thread":a});return p.a.createElement("div",{className:n},r?p.a.createElement(B,this.props):p.a.createElement(N,this.props))}}]);return t}(d["PureComponent"]);W.displayName="UnavailableChannel";W.defaultProps=q;var V=function e(t,r){var a=r.unavailableTeamId,n=r.channelId;var i=Object(b["j"])(t,a);var s=Object(g["d"])(t,n);return{isReloadRequired:Object(y["externalOrgMigrated"])(i),isImOrMpim:Object(O["isIm"])(s)||Object(O["isMpim"])(s),clogger:Object(k["a"])({state:t}),channelId:s.id,channelPrivacyType:Object(O["getChannelPrivacyType"])(s),featureEscGridMigrationsClient:Object(_["isFeatureEnabled"])(t,"feature_esc_grid_migrations_client")}};var K=Object(v["connect"])(V)(W);var z=t["a"]=K},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(10);var n=r(785);var i=new a["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.isGuest,a=e.isSelf,s=e.isAppOrBot,o=e.isDeleted,l=e.isPrescenceAway,c=e.isPrescenceDND,u=e.statusEmojiCode,d=e.statusText,p=e.isCurrent,v=e.hasNotifications,m=e.isStarred,h=e.isMuted,f=e.hasDraft;var b=function(){if(o)return i.t("deactivated");if(s)return i.t("APP");if(r&&!l&&c)return i.t("guest, do not disturb");if(r&&l&&!c)return i.t("guest, away");if(r&&!l&&!c)return i.t("guest");if(a&&!l&&c)return i.t("you, do not disturb");if(a&&!l&&!c)return i.t("you");if(!r&&!l&&c)return i.t("do not disturb");if(!r&&l&&!c)return i.t("away");return""}();var g=u&&Object(n["a"])(u);var _=function(){if(g&&!d)return g;if(g&&d)return i.t("{statusEmoji} {statusText}",{statusEmoji:g,statusText:d,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"});if(!g&&d)return d;return""}();var y=function(){if(p&&v&&h&&m&&f)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!p&&v&&h&&m&&f)return i.t("has notifications, muted, starred, has a draft message");if(p&&!v&&h&&m&&f)return i.t("current conversation, muted, starred, has a draft message");if(!p&&!v&&h&&m&&f)return i.t("muted, starred, has a draft message");if(p&&v&&!h&&m&&f)return i.t("current conversation, has notifications, starred, has a draft message");if(!p&&v&&!h&&m&&f)return i.t("has notifications, starred, has a draft message");if(p&&!v&&!h&&m&&f)return i.t("current conversation, starred, has a draft message");if(!p&&!v&&!h&&m&&f)return i.t("starred, has a draft message");if(p&&v&&h&&!m&&f)return i.t("current conversation, has notifications, muted, has a draft message");if(!p&&v&&h&&!m&&f)return i.t("has notifications, muted, has a draft message");if(p&&!v&&h&&!m&&f)return i.t("current conversation, muted, has a draft message");if(!p&&!v&&h&&!m&&f)return i.t("muted, has a draft message");if(p&&v&&!h&&!m&&f)return i.t("current conversation, has notifications, has a draft message");if(!p&&v&&!h&&!m&&f)return i.t("has notifications, has a draft message");if(p&&!v&&!h&&!m&&f)return i.t("current conversation, has a draft message");if(!p&&!v&&!h&&!m&&f)return i.t("has a draft message");if(p&&v&&h&&m&&!f)return i.t("current conversation, has notifications, muted, starred");if(!p&&v&&h&&m&&!f)return i.t("has notifications, muted, starred");if(p&&!v&&h&&m&&!f)return i.t("current conversation, muted, starred");if(!p&&!v&&h&&m&&!f)return i.t("muted, starred");if(p&&v&&!h&&m&&!f)return i.t("current conversation, has notifications, starred");if(!p&&v&&!h&&m&&!f)return i.t("has notifications, starred");if(p&&!v&&!h&&m&&!f)return i.t("current conversation, starred");if(!p&&!v&&!h&&m&&!f)return i.t("starred");if(p&&v&&h&&!m&&!f)return i.t("current conversation, has notifications, muted");if(!p&&v&&h&&!m&&!f)return i.t("has notifications, muted");if(p&&!v&&h&&!m&&!f)return i.t("current conversation, muted");if(!p&&!v&&h&&!m&&!f)return i.t("muted");if(p&&v&&!h&&!m&&!f)return i.t("current conversation, has notifications");if(!p&&v&&!h&&!m&&!f)return i.t("has notifications");if(p&&!v&&!h&&!m&&!f)return i.t("current conversation");return""}();if(t&&b&&_&&y)return i.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:b,status:_,context:y});if(t&&!b&&_&&y)return i.t("{name}, status: {status} ({context})",{name:t,status:_,context:y});if(t&&b&&!_&&y)return i.t("{name} ({userInfo}) ({context})",{name:t,userInfo:b,context:y});if(t&&!b&&!_&&y)return i.t("{name} ({context})",{name:t,context:y});if(t&&b&&_&&!y)return i.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:b,status:_});if(t&&!b&&_&&!y)return i.t("{name}, status: {status}",{name:t,status:_});if(t&&b&&!_&&!y)return i.t("{name} ({userInfo})",{name:t,userInfo:b});if(t)return t;return""}},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(15);var o=r(48);var l=r(3);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(13);var _=r(2);var y=r.n(_);var O=r(1757);var k=r(16);var E=r.n(k);var j=r(19);var C=r(478);var S=r(1344);var w=r(849);var I=r(10);var T=r(39);var A=r(152);var N=r(84);var P=r(54);var R=r(126);var M=r(179);var x=r(316);var D=r(455);var F=r(253);var L=r(1443);var B=new I["b"]("menu_file");var U={success:i["b"].bool,response:i["b"].object,wasShared:i["b"].bool,channel:i["b"].string,threadTs:i["b"].string};var q=Object(s["b"])("On Gdrive Creation Complete",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.success,n=r.response,i=r.wasShared,s=r.channel,o=r.threadTs;var l=t();var c=Object(L["getEnablePopupsBannerVisibility"])(l);a&&n&&n.data&&n.data.url&&!i&&c&&e(Object(D["addOrFlashEphemeralBotMsg"])({ephemeralType:"created_google_drive_document",message:{channel:s,thread_ts:o,slackbot_feels:"sad_surprise",text:B.t("It looks like your browser is blocking popups so here\u2019s a link to your <{url}|document>",{url:n.data.url})}}))});q.propTypes=U;var G=q;var H=r(864);var W=r(73);var V=r(352);var K=r(12);var z=new I["b"]("files");var Q={type:i["b"].string.isRequired,title:i["b"].string,comment:i["b"].string,blocks:i["b"].array,broadcast:i["b"].bool,shareFile:i["b"].bool,channel:i["b"].string,threadTs:i["b"].string,reason:i["b"].string};var Y=Object(s["b"])("Create a Gdrive File",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.type,n=r.title,i=r.comment,s=r.blocks,o=r.broadcast,l=r.shareFile,c=r.channel,u=r.threadTs,d=r.reason;var p="application/vnd.google-apps";var v=t();var m=Object(K["a"])({state:v});var h="CREATE_GOOGLE_DRIVE_FILE";l&&c&&e(Object(x["a"])({id:c}));var f=Object(W["a"])(t());return e(Object(F["b"])({serviceStub:"gdrive",mimeType:p+"."+a,filename:n||"",reason:d||"create-gdrive-file"})).then(function(t){var r=Object(H["c"])(t.url);r&&!r.closed||e(Object(L["updateEnablePopupsBannerVisibility"])(true));l?e(Object(F["s"])({channels:c,threadTs:u,title:n||"",initialComment:Object(V["b"])(v,i),blocks:s,broadcast:o,link:t.url,reason:d||"create-gdrive-file"})).then(function(){return e(G({success:true,response:t,wasShared:l,channel:f,threadTs:u}))}).catch(function(t){m.error(h,t);e(Object(D["addOrFlashEphemeralBotMsg"])({ephemeralType:D["EphemeralTypes"].gdriveShareFileError,message:{channel:f,thread_ts:u,slackbot_feels:"sad_surprise",text:z.t("Oh no! I couldn\u2019t import your newly created file")}}))}):e(G({success:true,response:t,wasShared:l,channel:f,threadTs:u}))}).catch(function(t){e(G({success:false}));var r=z.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.");t&&t.data&&"filename_too_long"===t.data.error&&(r=z.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."));m.error(h,t);e(Object(D["addOrFlashEphemeralBotMsg"])({ephemeralType:D["EphemeralTypes"].unhandledGdriveCreate,message:{channel:f,thread_ts:u,slackbot_feels:"sad_surprise",text:r}}))})});Y.propTypes=Q;var J=Y;var X=r(1537);var Z=r(1538);var $=r(1328);var ee=r(1539);var te=r(4382);var re=r(4401);var ae=r(2387);var ne=new I["b"]("create-gdoc-dialog");var ie={type:i["b"].string,closeModal:i["b"].func,getShareableChannelId:i["b"].func,converMsgOpsToRichTextMessage:i["b"].func,createGdriveFile:i["b"].func,onGDriveCreateComplete:i["b"].func,threadTs:i["b"].string,msgText:i["b"].string,setMsgText:i["b"].func,msgOps:i["b"].array,setMsgOps:i["b"].func,featureWysiwygComposer:i["b"].bool,selectedChannelId:i["b"].string,setSelectedChannel:i["b"].func,disallowedKeywordInMsgText:i["b"].string,canPostInSelectedChannel:i["b"].bool,canThread:i["b"].bool,channelType:i["b"].oneOf(["mpim","im","channel","private"]),selectedChannelName:i["b"].node.isRequired};var se={type:void 0,closeModal:y.a.noop,getShareableChannelId:y.a.noop,createGdriveFile:y.a.noop,onGDriveCreateComplete:y.a.noop,threadTs:void 0,msgText:"",setMsgText:y.a.noop,msgOps:void 0,setMsgOps:y.a.noop,converMsgOpsToRichTextMessage:y.a.noop,featureWysiwygComposer:false,selectedChannelId:void 0,setSelectedChannel:y.a.noop,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:false,canThread:false,channelType:null};var oe=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(r,["onTextChange","onShareChannelChange","onGo","onCancel","onBroadcastChange","onTitleInputChange","onShareWithChange","setTitleInputRef"]);r.titleInput=null;r._isMounted=false;r.state={overMsgLengthLimit:false,titleInputValue:"",submitting:false,shareWith:true,broadcast:false};return r}v()(t,[{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"onTextChange",value:function e(t){var r=t.text,a=t.msgOps,n=t.overLimit;var i=this.props.featureWysiwygComposer;i?this.props.setMsgOps(a):this.props.setMsgText(r);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onShareChannelChange",value:function e(t){this.props.setSelectedChannel(t)}},{key:"onGo",value:function e(){if(this.isGoButtonDisabled())return;this.createGDocOnGo()}},{key:"onCancel",value:function e(){this.props.onGDriveCreateComplete(false)}},{key:"onTitleInputChange",value:function e(t){this.setState(function(){return{titleInputValue:t}})}},{key:"onShareWithChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{shareWith:!!r}})}},{key:"onBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"getCleanMsgText",value:function e(){var t=this.props.featureWysiwygComposer;if(t)return null;var r=Object(C["a"])(this.props.msgText);return y.a.trim(r)}},{key:"getDialogTitle",value:function e(){var t=this.props.type;switch(t){case"document":return ne.t("Create a Google Document");case"presentation":return ne.t("Create a Google Presentation");case"spreadsheet":return ne.t("Create a Google Spreadsheet");default:return ne.t("Create a Google file")}}},{key:"setTitleInputRef",value:function e(t){if(!t)return;this.titleInput=t;this.focusTitleInput()}},{key:"focusTitleInput",value:function e(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,r=t.disallowedKeywordInMsgText,a=t.canPostInSelectedChannel,n=t.threadTs,i=t.canThread;var s=this.state,o=s.overMsgLengthLimit,l=s.shareWith,c=s.titleInputValue,u=s.submitting;var d=c&&c.length>T["MAX_FILENAME_LENGTH"];return l&&!a&&!n||l&&n&&!i||!!r||o||d||u}},{key:"createGDocOnGo",value:function e(){var t=this;var r=this.props,a=r.selectedChannelId,n=r.getShareableChannelId,i=r.type,s=r.threadTs,o=r.msgOps,l=r.featureWysiwygComposer;var c=this.state,u=c.titleInputValue,d=c.shareWith,p=c.broadcast;if(!a)return;n({channelOrMemberId:a}).then(function(e){var r=t.getCleanMsgText();var a=u||ne.t("Untitled",{fallbackHash:"621521f9a8788695ec292cbec54d2792cfdf0a7d",fallbackHashNs:"space"});var n=void 0;l&&(n=t.props.converMsgOpsToRichTextMessage({msgOps:o,channelId:e,inThread:!!s}));t.props.createGdriveFile({type:i,title:a,comment:r,blocks:n,broadcast:p,shareFile:d,channel:e,threadTs:s,reason:"create-gdrive-file"}).then(function(){t._isMounted&&t.setState(function(){return{submitting:false}});t.props.closeModal()})});this.setState(function(){return{submitting:true}})}},{key:"maybeRenderBroadcast",value:function e(){var t=this.props,r=t.threadTs,a=t.canPostInSelectedChannel,i=t.channelType,s=t.selectedChannelName;var o=this.state.broadcast;if(!r||!a)return null;return n.a.createElement("div",{className:"p-create_gdoc_dialog__broadcast_section"},n.a.createElement(re["a"],{channelType:i,selectedChannelName:s,value:o,onChange:this.onBroadcastChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props.selectedChannelId;var r=this.state.shareWith;return n.a.createElement(Z["a"],{onChange:this.onShareChannelChange,initialChannelId:t,isDisabled:!r})}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var r=Object(ee["a"])(c()({},this.props));if(!r)return null;return n.a.createElement("div",{className:"p-share_dialog__section"},n.a.createElement(A["d"],{type:"inline",level:"warning",className:"margin_bottom_100"},r))}},{key:"renderShareWith",value:function e(){var t=this.state.shareWith;var r="create-gdoc-share-with";return n.a.createElement(P["a"],{text:ne.t("Share with:"),htmlFor:r,type:"inline"},n.a.createElement(R["a"],{id:r,defaultChecked:t,onChange:this.onShareWithChange,"data-qa":"share_with"}))}},{key:"renderTitleInput",value:function e(){var t=this.state.titleInputValue;var r="p-create_gdoc_dialog__title";return n.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},n.a.createElement(P["a"],{htmlFor:r,text:ne.t("Title"),optional:true},n.a.createElement(M["a"],{id:r,name:r,maxCharacterLimit:T["MAX_FILENAME_LENGTH"],counterMinimumCharacters:T["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onTitleInputChange,value:t,ref:this.setTitleInputRef,"data-qa":"create_gdoc_title"})))}},{key:"renderShareWithPicker",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.threadTs;if(a)return n.a.createElement(te["a"],{channelId:r,threadTs:a});return n.a.createElement("div",{className:"p-create_gdoc_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function e(){var t=this.props.msgText;var r=this.state.shareWith;if(!r)return null;var a=ne.t("Add a message, if you\u2019d like.");var i=E()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input");return n.a.createElement("div",{className:i},n.a.createElement(X["a"],{text:t,onTextChange:this.onTextChange,placeholder:a,ariaLabel:a,onEnter:this.onGo}),this.maybeRenderBroadcast())}},{key:"render",value:function e(){return n.a.createElement(N["a"],{className:"p-create_gdoc_dialog",title:this.getDialogTitle(),useSlackScrollbarWithPadding:true,goButtonText:ne.t("Create"),onGo:this.onGo,onClose:this.onCancel,showCancelButton:false,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(a["Component"]);oe.displayName="CreateGDocDialog";oe.defaultProps=se;function le(e,t){var r=t.selectedChannelId;var a=Object($["b"])(e,t);var n=Object(j["d"])(e,r)||Object(j["j"])(e,r);return c()({},a,{selectedChannel:n})}var ce=function e(t){return{closeModal:function e(){return t(o["closeModal"].apply(void 0,arguments))},getShareableChannelId:function e(){return t(S["a"].apply(void 0,arguments))},createGdriveFile:function e(){return t(J.apply(void 0,arguments))},onGDriveCreateComplete:function e(){return t(G.apply(void 0,arguments))},converMsgOpsToRichTextMessage:function e(){return t(w["a"].apply(void 0,arguments))}}};var ue=Object(g["connect"])(le,ce)(oe);var de=Object($["a"])(ue);var pe=Object(s["b"])("Opens the create gdoc file dialog",function(e,t,r){e(Object(o["openModal"])({element:n.a.createElement(de,r)}))});pe.propTypes={type:i["b"].string,displayType:i["b"].string,initialChannelId:i["b"].string};var ve=t["a"]=pe},,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(22);var h=r(50);var f=r(28);var b=r(2);var g=r(1757);var _=r(16);var y=r.n(_);var O=r(135);var k=r(3044);var E={title:v["b"].string,titleClass:v["b"].string,description:v["b"].node,className:v["b"].string,descriptionAlertParagraphOne:v["b"].node,descriptionAlertParagraphTwo:v["b"].node};var j={title:"",titleClass:"",description:null,className:"",descriptionAlertParagraphOne:null,descriptionAlertParagraphTwo:null};var C=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;var t=this.props,r=t.titleClass,a=t.className;var n=y()(a,r);return p.a.createElement("h4",{className:n},this.props.title)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return p.a.createElement("span",{className:"sk_dark_grey"},this.props.description)}},{key:"renderAlert",value:function e(){if(!this.props.descriptionAlertParagraphOne||!this.props.descriptionAlertParagraphTwo)return null;return p.a.createElement(O["a"],{className:"modal-alert",type:"inline",level:"default",align:"left"},p.a.createElement("p",null,this.props.descriptionAlertParagraphOne),p.a.createElement("p",{className:"modal-alert-paragraph-two"},this.props.descriptionAlertParagraphTwo))}},{key:"render",value:function e(){return p.a.createElement("div",{className:"p-ent_settings_item_header"},this.renderTitle(),this.renderDescription(),this.renderAlert())}}]);return t}(d["PureComponent"]);C.displayName="SettingsItemHeader";C.defaultProps=j;var S=C;var w=r(10);var I=r(3046);var T=new w["b"]("enterprise_settings");var A={editOnly:v["b"].bool,enabled:v["b"].bool,onEnable:v["b"].func,onDisable:v["b"].func,onEdit:v["b"].func.isRequired,editButtonText:v["b"].string};var N={editOnly:false,enabled:false,onEnable:b["noop"],onDisable:b["noop"],editButtonText:""};var P=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onEnable=r.onEnable.bind(r);r.onDisable=r.onDisable.bind(r);r.onEdit=r.onEdit.bind(r);return r}s()(t,[{key:"onEnable",value:function e(t){t.stopPropagation();this.props.onEnable(t)}},{key:"onDisable",value:function e(t){t.stopPropagation();this.props.onDisable(t)}},{key:"onEdit",value:function e(t){t.stopPropagation();this.props.onEdit(t)}},{key:"renderEnable",value:function e(){var t=T.t("Enable");return p.a.createElement("div",{className:"p-ent_settings_item_button_control"},p.a.createElement(f["d"],{type:"outline",size:"small",onClick:this.onEnable},t))}},{key:"renderDisable",value:function e(){var t=T.t("Disable");var r=T.t("Edit");return p.a.createElement("div",{className:"p-ent_settings_item_button_control"},p.a.createElement(f["d"],{type:"danger",size:"small",onClick:this.onDisable},t),p.a.createElement(f["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},r))}},{key:"renderEdit",value:function e(){var t=this.props.editButtonText||T.t("Edit");return p.a.createElement("div",{className:"p-ent_settings_item_button_control"},p.a.createElement(f["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},t))}},{key:"renderButtonControls",value:function e(){var t=this.props,r=t.editOnly,a=t.enabled;if(r)return this.renderEdit();return a?this.renderDisable():this.renderEnable()}},{key:"render",value:function e(){return this.renderButtonControls()}}]);return t}(d["PureComponent"]);P.displayName="SettingsItemButtonControl";P.defaultProps=N;var R=P;var M=r(3048);var x={label:v["b"].string.isRequired,state:v["b"].string.isRequired,type:v["b"].string.isRequired,description:v["b"].node,onClick:v["b"].func,control:v["b"].object.isRequired,readonly:v["b"].bool,noButton:v["b"].bool,readonlyTooltip:v["b"].string,descriptionAlertParagraphOne:v["b"].node,descriptionAlertParagraphTwo:v["b"].node};var D={description:null,onClick:b["noop"],readonly:false,readonlyTooltip:"",noButton:false,descriptionAlertParagraphOne:null,descriptionAlertParagraphTwo:null};var F=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["a"])(r,["onReadonlyButtonClick","onReadonlyButtonFocus","onReadonlyButtonBlur"]);r.readonlyTooltipRef=p.a.createRef();return r}s()(t,[{key:"onReadonlyButtonClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onReadonlyButtonFocus",value:function e(){Object(b["has"])(this,"readonlyTooltipRef.current")&&this.readonlyTooltipRef.current.showTip()}},{key:"onReadonlyButtonBlur",value:function e(){Object(b["has"])(this,"readonlyTooltipRef.current")&&this.readonlyTooltipRef.current.hideTip()}},{key:"chooseOnClickHandler",value:function e(){return this.props.readonly?function(e){e.preventDefault();e.stopPropagation()}:this.props.onClick}},{key:"renderLabel",value:function e(){return p.a.createElement(S,{title:this.props.label,className:"p_ent_settings_item__label"})}},{key:"renderState",value:function e(){var t=this.props,r=t.state,a=t.description,n=t.descriptionAlertParagraphOne,i=t.descriptionAlertParagraphTwo;return p.a.createElement(S,{title:r,description:a,className:"bold",descriptionAlertParagraphOne:n,descriptionAlertParagraphTwo:i})}},{key:"renderButtonControl",value:function e(){if(this.props.noButton)return p.a.createElement(f["c"],{"aria-disabled":"true"});if(this.props.readonly){var t=p.a.createElement(f["c"],{"aria-disabled":"true","aria-label":this.props.readonlyTooltip,className:"c-button--focus-visible p-ent_settings_item__readonly_control",onClick:this.onReadonlyButtonClick,onFocus:this.onReadonlyButtonFocus,onBlur:this.onReadonlyButtonBlur},p.a.createElement(m["b"],{type:"eye-filled",size:"inherit",inline:true})," Read only");if(this.props.readonlyTooltip)return p.a.createElement(h["c"],{tip:this.props.readonlyTooltip,position:"top",ref:this.readonlyTooltipRef},t);return t}var r=this.props.control,a=r.editOnly,n=r.editButtonText,i=r.enabled,s=r.onEnable,o=r.onDisable,l=r.onEdit;return p.a.createElement(R,{editOnly:a,enabled:i,onEnable:s,onDisable:o,onEdit:l,editButtonText:n})}},{key:"renderControl",value:function e(){return"button"===this.props.control.type?this.renderButtonControl():null}},{key:"render",value:function e(){return p.a.createElement("div",{className:y()("p-ent_settings_item",{"p-ent_settings_item--readonly":this.props.readonly}),onClick:this.chooseOnClickHandler(),role:"presentation"},this.renderLabel(),this.renderState(),this.renderControl())}}]);return t}(d["PureComponent"]);F.displayName="SettingsItem";F.defaultProps=D;var L=t["a"]=F},,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(13);var h=r(16);var f=r.n(h);var b=r(318);var g=r(4599);var _=r(4);var y=r(124);var O=r(10);var k=r(777);var E=r(431);var j=r(1495);var C=r(2);var S=r(28);var w=r(22);var I=r(50);var T=r(1166);var A=new O["b"]("emoji");var N={onClick:d["b"].func.isRequired,onEmojiSelected:d["b"].func,featureSonicEmoji:d["b"].bool};var P={onEmojiSelected:C["noop"],featureSonicEmoji:false};function R(e){var t=e.onClick,r=e.onEmojiSelected,a=e.featureSonicEmoji;var n=v.a.createElement(I["c"],{tip:A.t("Add reaction..."),delay:I["a"]},v.a.createElement(S["c"],{className:"c-reaction_add",onClick:t,"aria-label":A.t("Add reaction..."),"data-qa":"add_reaction_button"},v.a.createElement("div",{className:"c-reaction_add__container"},v.a.createElement(w["b"],{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":true}),v.a.createElement(w["b"],{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":true}))));if(a)return v.a.createElement(T["a"],{onEmojiSelected:r,showHandyReactions:true},n);return n}R.defaultProps=P;var M=r(2392);var x=new O["b"]("reactions");var D={reactions:d["b"].arrayOf(d["b"].shape(j["b"])),reactionKey:d["b"].string,currentUser:d["b"].string,className:d["b"].string,emojiMode:d["b"].string,changeReactionFromUserAction:d["b"].func.isRequired,featureSonicEmoji:d["b"].bool};var F={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null,featureSonicEmoji:false};var L=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onAddReaction=e.onAddReaction.bind(e);e.onReactionClick=e.onReactionClick.bind(e);e.onReactionEmojiPickerSelected=e.onReactionEmojiPickerSelected.bind(e);e.onFocusEnter=e.onFocusEnter.bind(e);e.onFocusLeave=e.onFocusLeave.bind(e);e.state={hasKeyboardFocus:false};return e}s()(t,[{key:"onAddReaction",value:function e(t){Object(k["a"])({e:t,rxn_key:this.props.reactionKey})}},{key:"onReactionClick",value:function e(t,r){var a=this.props.reactionKey;this.props.changeReactionFromUserAction({key:a,name:t,adding:!r})}},{key:"onReactionEmojiPickerSelected",value:function e(t,r){this.onReactionClick(r)}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.reactions,n=r.reactionKey,i=r.currentUser,s=r.emojiMode,o=r.featureSonicEmoji;if(!a||0===a.length)return null;var l=a.map(function(e){var r=e.count,a=e.name,o=e.users,l=e.url;return v.a.createElement(j["a"],{name:a,count:r,users:o,url:l,currentUser:i,key:a,reactionKey:n,onClick:t.onReactionClick,emojiMode:s})}).concat(v.a.createElement(R,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:o}));var c=f()(this.props.className,"c-reaction_bar",{"c-reaction_bar--focus":this.state.hasKeyboardFocus});var u=x.t("Reactions",{note:"Screenreader: Label for blind users"});return v.a.createElement(E["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},v.a.createElement("div",{className:c,role:"group","aria-label":u},l))}}]);return t}(v.a.PureComponent);L.displayName="ReactionBar";L.defaultProps=F;var B=function e(t,r){return{reactions:Object(b["getReactionsForKey"])(t,r.reactionKey),currentUser:Object(_["getCurrentUserId"])(t),emojiMode:Object(y["h"])(t),featureSonicEmoji:Object(_["isFeatureEnabled"])(t,"feature_sonic_emoji")}};var U={changeReactionFromUserAction:g["a"]};var q=Object(m["connect"])(B,U)(L);var G=t["a"]=q},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r.n(v);var h=r(0);var f=r(1);var b=r.n(f);var g=r(13);var _=r(107);var y=r.n(_);var O=r(4);var k=r(23);var E=r(48);var j=r(122);var C=r(67);var S=r(19);var w=r(68);var I=r(884);var T=r(24);var A=r(358);var N=r(1550);var P=r(1549);var R=r(1563);var M=r(39);var x=r(1048);var D=r(15);var F=r(505);var L=Object(D["b"])("Count the number of characters over the message length limit",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.text,i=r.delta,s=r.featureWysiwygComposer;var o=Object(F["b"])(t(),{channelId:a,text:n,delta:i,featureWysiwygComposer:s}),l=o.rawText,c=o.processedDelta;if(s)return Math.max(0,Object(x["a"])(c)-M["MAX_MESSAGE_INPUT_LENGTH"]);return Math.max(0,l.length-M["MAX_MESSAGE_INPUT_LENGTH"])});L.propTypes={channelId:h["b"].string,text:h["b"].string};var B=L;var U=r(11);var q=r(41);var G=r(28);var H=r(317);var W=r(22);var V=r(515);var K=r(1097);var z=r(10);var Q=r(892);var Y=r(164);var J=r(860);var X=r(1752);function Z(e,t){return Object(X["a"])(new y.a(e),new y.a(t))}var $=r(1304);var ee=r(4168);var te=r(799);var re=r(777);var ae=r(365);var ne=r(384);var ie=r(1345);var se=60;var oe=1e3;var le=new z["b"]("message");var ce={ts:h["b"].string.isRequired,originalMessageTextUsedForDeletionOnly:h["b"].string.isRequired,originalMessageContents:h["b"].object.isRequired,messageHasText:h["b"].bool.isRequired,saveMessageEdit:h["b"].func,channelId:h["b"].string,teamId:h["b"].string,viewContext:h["b"].string,isSelfIm:h["b"].bool,setDidRequestToStopEditing:h["b"].func,updateEditState:h["b"].func,stopEditingMessage:h["b"].func,updateHasUnsavedChanges:h["b"].func,canDelete:h["b"].bool,canUnbroadcast:h["b"].bool,initialEditOps:h["b"].arrayOf(h["b"].object),initialContents:h["b"].object,didRequestToStopEditing:h["b"].bool,editWindowMin:h["b"].number,isAdminUser:h["b"].bool,useJumbomoji:h["b"].bool,messageContainerType:h["b"].string,openModal:h["b"].func,countCharsOverMessageLimit:h["b"].func,featureSonicInputs:h["b"].bool,clientToolBar:h["b"].bool,featureWysiwygComposer:h["b"].bool};var ue={saveMessageEdit:m.a.noop,channelId:null,teamId:void 0,viewContext:void 0,isSelfIm:false,setDidRequestToStopEditing:m.a.noop,updateEditState:m.a.noop,stopEditingMessage:m.a.noop,updateHasUnsavedChanges:m.a.noop,canDelete:true,canUnbroadcast:false,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:false,editWindowMin:-1,isAdminUser:false,useJumbomoji:false,messageContainerType:void 0,openModal:m.a.noop,countCharsOverMessageLimit:m.a.identity,featureSonicInputs:false,clientToolBar:false,featureWysiwygComposer:false};var de="message_pane_edit_input";function pe(e){Object(re["a"])({e:e,input_to_fill:"#"+de,offset_y:-8})}var ve=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setTextyRef=r.setTextyRef.bind(r);r.maybeSave=r.maybeSave.bind(r);r.onTimerInterval=r.onTimerInterval.bind(r);r.renderTimeoutErrorDialog=r.renderTimeoutErrorDialog.bind(r);r.renderLengthErrorDialog=r.renderLengthErrorDialog.bind(r);r.renderUnknownErrorDialog=r.renderUnknownErrorDialog.bind(r);r.stopEditingMessage=r.stopEditingMessage.bind(r);r.handleSaveEditError=r.handleSaveEditError.bind(r);r.onEnter=r.onEnter.bind(r);r.onTextChange=r.onTextChange.bind(r);r.renderInput=r.renderInput.bind(r);r.texty=null;r.syncEditStateOnUnmount=true;r.editWindowTimeout=null;r.componentDidUnmount=false;r.enableBroadcastKeywords=!(r.props.messageContainerType===M["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||r.props.messageContainerType===M["MESSAGE_CONTAINERS"].THREADS_VIEW);r.textyModules={tabcomplete:{searchOptions:{},positionMenu:function e(t){t.style.width=r.texty.container.offsetWidth+"px";Object(Q["a"])(t,r.texty.container)},completers:["channels","emoji","members"]}};r.state={editSecondsRemaining:r.countRemainingSeconds(),numCharsOverLimit:r.props.countCharsOverMessageLimit({channelId:r.props.channelId,text:r.getEditContentsAsString(),delta:r.props.featureWysiwygComposer?new y.a(r.props.originalMessageContents.contents):null,featureWysiwygComposer:r.props.featureWysiwygComposer})};r.getComputedModules=Object(te["a"])(function(e,t,r,a,i){if(!(r||a))return e;var s=Object(ie["a"])({featureWysiwygComposer:a});return n()({},e,{composer:n()({},s,{teamId:t,zIndexOverride:i?null:200}),slacklink:a&&{convertImages:false,disableLinksWithLabels:true},slackmarkdown:a&&{convertHeaders:false,convertHorizontalRule:false}})});return r}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.isSelfIm,a=t.editWindowMin;a>=0&&!r&&(this.editWindowTimeout=setInterval(this.onTimerInterval,oe))}},{key:"componentWillReceiveProps",value:function e(t){t.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"componentWillUpdate",value:function e(t,r){var a=r.editSecondsRemaining;a<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function e(){if(this.syncEditStateOnUnmount){var t=this.texty.getContents();var r=this.hasUnsavedChanges();this.props.updateEditState({editOps:t.contents,hasUnsavedChanges:r})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout);this.componentDidUnmount=true}},{key:"onEnter",value:function e(){this.maybeSave();return false}},{key:"onTextChange",value:function e(){var t=this.props,r=t.didRequestToStopEditing,a=t.channelId;var n=this.state.numCharsOverLimit;var i=this.props.countCharsOverMessageLimit({channelId:a,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new y.a(this.getEditContents().contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer});(i>0||n>0)&&this.setState(function(){return{numCharsOverLimit:i}});this.props.updateHasUnsavedChanges(this.hasUnsavedChanges());r&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(false)}},{key:"onTimerInterval",value:function e(){var t=this;this.setState(function(){return{editSecondsRemaining:t.countRemainingSeconds()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditContentsAsString",value:function e(){var t=this.props.featureWysiwygComposer;if(t)return"";return Object(J["a"])(this.getEditContents())}},{key:"getEditContents",value:function e(){var t=this.props.initialEditOps;if(this.texty)return this.texty.getContents();if(t)return{contents:t};return{contents:[]}}},{key:"countRemainingSeconds",value:function e(){var t=this.props,r=t.isSelfIm,a=t.editWindowMin,n=t.ts;if(a<0||r)return null;var i=Object(Y["n"])(n);var s=60*a*1e3;var o=i.getTime()+s;return Math.round((o-Date.now())/1e3)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,r=t.initialEditOps,a=t.originalMessageContents;if(this.texty)return!Z(this.texty.getContents.contents,a.contents);return!r||!(r&&Z(r,a.contents))}},{key:"startDelete",value:function e(){var t=this.props,r=t.channelId,a=t.originalMessageTextUsedForDeletionOnly,n=t.originalMessageContents,i=t.canDelete,s=t.canUnbroadcast,o=t.ts,l=t.viewContext,c=t.featureWysiwygComposer;if(i){this.props.openModal({element:b.a.createElement(P["a"],{channelId:r,ts:o})});return}if(s){this.props.openModal({element:b.a.createElement(N["a"],{channelId:r,ts:o})});return}if(c){var u=new y.a(n.contents);var d=u.compose((new y.a).retain(u.length(),{strike:true}));this.props.saveMessageEdit({channelId:r,delta:d,viewContext:l,ts:o}).catch(this.handleSaveEditError)}else{var p=a.replace(/~/g,"");var v="~"+p+"~";this.props.saveMessageEdit({channelId:r,text:v,viewContext:l,ts:o}).catch(this.handleSaveEditError)}}},{key:"maybeSave",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.viewContext,i=t.featureWysiwygComposer;var s=this.state,o=s.editSecondsRemaining,l=s.numCharsOverLimit;if(l>0)return false;if(m.a.isNumber(o)&&o<=0)return false;if(this.texty.isEmpty({doIgnoreWhitespace:true})){this.startDelete();return false}this.props.saveMessageEdit({channelId:r,text:this.getEditContentsAsString(),delta:i?new y.a(this.getEditContents().contents):null,viewContext:n,ts:a}).catch(this.handleSaveEditError);return true}},{key:"handleSaveEditError",value:function e(t){var r=t.message;switch(r){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"stopEditingMessage",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.viewContext;this.syncEditStateOnUnmount=false;this.props.stopEditingMessage({viewContext:n,channelId:r,ts:a})}},{key:"shouldShowLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;return t>0}},{key:"shouldShowTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;return m.a.isNumber(t)&&t<se}},{key:"shouldShowUnsavedWarning",value:function e(){var t=this.props.didRequestToStopEditing;return t&&this.hasUnsavedChanges()}},{key:"isSavingDisabled",value:function e(){var t=this.state.editSecondsRemaining;var r=m.a.isNumber(t)&&t<=0;return r||this.shouldShowLengthWarning()}},{key:"renderTimeoutErrorDialog",value:function e(){var t=this.props,r=t.editWindowMin,a=t.isAdminUser;var n=Object(Y["s"])(r,{units:"minutes"});var i=le.t("Message editing failed");var s=le.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:b.a.createElement("b",null,n)});var o=void 0;a&&(o=le.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return b.a.createElement(H["a"],{href:"/admin/settings#message_editing",target:"_new"},t)}));this.props.openModal({element:b.a.createElement(ae["a"],{title:i},b.a.createElement("p",null,s),o)})}},{key:"renderUnknownErrorDialog",value:function e(){var t=le.t("Message editing failed");var r=le.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:b.a.createElement(ae["a"],{title:t},r)})}},{key:"renderLengthErrorDialog",value:function e(){var t=le.t("Message editing failed");var r=le.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:b.a.createElement(ae["a"],{title:t},r)})}},{key:"renderLengthWarning",value:function e(){var t=le.t("text is too long!");return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},t)}},{key:"renderTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;var r=void 0;t<=0?r=le.t("(your time to edit ran out)"):t<=se&&(r=le.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t}));return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},r)}},{key:"renderUnsavedWarning",value:function e(){var t=le.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return b.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},t)}},{key:"renderWarningMessages",value:function e(){var t=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning();var r=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning();var a=this.shouldShowLengthWarning()&&this.renderLengthWarning();if(!t&&!r&&!a)return null;return b.a.createElement("div",{className:"c-message__editor__messages"},t,r,a)}},{key:"renderInput",value:function e(){var t=this;var r=this.props,a=r.initialContents,n=r.messageHasText,i=r.useJumbomoji,s=r.channelId,o=r.featureSonicInputs,l=r.clientToolBar,c=r.featureWysiwygComposer,u=r.teamId;var d=n?le.t("Edit message"):le.t("Add message");var p=l&&!o?"c-message__editor__input--legacy c-message__editor__input--client_toolbar":"c-message__editor__input--legacy";if(!o){var v=this.getComputedModules(this.textyModules,u,l,c,o);return b.a.createElement(b.a.Fragment,null,b.a.createElement(V["default"],{id:de,ref:this.setTextyRef,className:p,modules:v,ariaLabel:d,placeholder:d,initialText:a,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:i,focusOnMount:true,useLegacyCreate:true,channelId:s,enableBroadcastKeywords:this.enableBroadcastKeywords,useFocusRing:false}),b.a.createElement(G["c"],{onClick:pe,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},b.a.createElement(W["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),b.a.createElement(W["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),b.a.createElement(W["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})))}return b.a.createElement(K["a"],{completeOnChannels:true,completeOnEmoji:true,completeOnMembers:true,shouldCompleteOnTab:true,channelId:this.props.channelId,renderInput:function e(r){var n=r.isOpen,p=r.modules;var v=t.getComputedModules(p,u,l,c,o);return b.a.createElement(V["default"],{ref:t.setTextyRef,className:"c-message__editor__input",modules:v,ariaLabel:d,placeholder:d,initialText:a,onEnter:t.onEnter,onEscape:t.stopEditingMessage,onTextChange:t.onTextChange,enableJumbomoji:i,isAutocompleteOpen:n,focusOnMount:true,channelId:s,enableBroadcastKeywords:t.enableBroadcastKeywords,enableEmojiButton:true,useFocusRing:false})}})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},b.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),b.a.createElement("div",{className:"c-message__editor__footer"},b.a.createElement(G["d"],{type:"outline",size:"small",onClick:this.stopEditingMessage},le.t("Cancel")),b.a.createElement(G["d"],{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},b.a.createElement(W["a"],{type:"enter",className:"margin_right_50"}),le.t("Save Changes")),this.renderWarningMessages()))}}]);return t}(f["PureComponent"]);ve.displayName="BaseEditMessage";ve.defaultProps=ue;function me(e,t){var r=t.ts,a=t.channelId,n=t.viewContext,i=t.messageContainerType;var s=Object(C["a"])(e,a,r);if(!s)return{};var o=Object(ee["a"])(e);var l=Object(S["d"])(e,a);var c=Object(w["a"])(e,"msg_edit_window_mins");var u=Object(T["b"])(e);var d=Object(I["a"])(e);var p=Object(q["canDeleteMessage"])(e,{message:s,channel:l,messageContainerType:i});var v=Object(q["canRemoveBroadcast"])(e,{message:s,channel:l,messageContainerType:i});var h=Object(A["getMessageEditData"])(e,{viewContext:n,channelId:a,ts:r})||{},f=h.editOps,b=h.didRequestToStopEditing;var g={contents:Object($["a"])(e,s,{featureWysiwygComposer:o}).ops};var _=void 0;_=f?{contents:f}:g;return{channelId:l.id,teamId:Object(k["b"])(e),isSelfIm:Object(U["isYou"])(u.id,l),canDelete:p,canUnbroadcast:v,originalMessageContents:g,initialEditOps:f,initialContents:_,ts:r,originalMessageTextUsedForDeletionOnly:s.text||"",messageHasText:o?!!(s.text||!m.a.isEmpty(s.blocks)):!!s.text,editWindowMin:c,isAdminUser:u.is_admin,didRequestToStopEditing:b,useJumbomoji:d,featureSonicInputs:Object(O["isFeatureEnabled"])(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(j["getGroupForUser"])(e,"composer_toolbar"),featureWysiwygComposer:o}}var he={saveMessageEdit:R["a"],setDidRequestToStopEditing:A["setDidRequestToStopEditing"],updateEditState:A["updateEditState"],stopEditingMessage:A["stopEditingMessage"],updateHasUnsavedChanges:A["updateHasUnsavedChanges"],openModal:E["openModal"],countCharsOverMessageLimit:B};var fe=Object(ne["b"])(Object(g["connect"])(me,he)(ve));fe.propTypes={ts:h["b"].string.isRequired,channelId:h["b"].string.isRequired};var be=t["a"]=fe},,,function(e,t,r){"use strict";var a=r(0);var n=r(3);var i=r.n(n);var s=r(29);var o=r(25);var l=r(41);var c=1.75;var u=100;var d=10;var p=Object(o["a"])("Deletes a message",function(e,t,r){var a=r.channelId,n=r.ts,o=r.broadcastDelete,v=r.attempts,m=void 0===v?0:v,h=r.reason;if(Object(l["isTempTs"])(n))return Promise.reject(new Error("message_not_found"));var f={channel:a,ts:n};o&&(f.broadcast_delete=true);return e(Object(s["a"])({method:"chat.delete",args:f,reason:h})).catch(function(t){var a=t.data,n=void 0===a?{}:a;if("message_not_found"===n.error&&m<d){var s=u*c;return Promise.delay(s).then(function(){return e(p(i()({},r,{attempts:m+1})))})}return Promise.reject(new Error(n.error||"unknown_error"))})});p.propTypes={channelId:a["b"].string,ts:a["b"].string,broadcastDelete:a["b"].bool,attempts:a["b"].number,reason:a["b"].string.isRequired};var v=p;var m=Object(o["a"])("Deletes a join/leave message rollup",function(e,t,r){var a=r.channelId,n=r.firstMessageTs,i=r.lastMessageTs;var o={channel_id:a,first_message_ts:n,last_message_ts:i};return e(Object(s["a"])({method:"chat.deleteBulkJoinLeave",args:o}))});m.propTypes={channelId:a["b"].string,firstMessageTs:a["b"].string,lastMessageTs:a["b"].string};var h=m;var f=r(15);var b=r(19);var g=r(103);var _=r(123);var y=r(67);var O=r(329);var k=r(4);var E=r(283);var j=Object(f["b"])("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts,i=r.broadcastDelete,s=void 0!==i&&i,o=r.rollupTimestamps;var c=t();var u=Object(y["a"])(c,a,n);var d=o&&o.length>1;if(!u)return Promise.resolve();d||Object(l["getReplyCount"])(u)||s||e(Object(O["animateDeleteMessage"])({channelId:a,ts:n}));if(Object(l["isTempTs"])(n)||Object(l["isEphemeral"])(u)){var p=Object(k["isFeatureEnabled"])(c,"feature_react_threads");if(Object(l["isReply"])(u)&&!p){var m=Object(b["d"])(c,a);Object(E["i"])(m,u)}return Promise.resolve()}if(d){var f=o[0];var j=o.pop();return e(h({channelId:a,firstMessageTs:f,lastMessageTs:j}))}return e(v({channelId:a,ts:n,broadcastDelete:s,reason:"animateAndDeleteMessageApi"})).then(function(){if(Object(k["isFeatureEnabled"])(c,"feature_degraded_send")&&Object(l["isReply"])(u)&&!s){var e=Object(b["d"])(c,a);Object(E["i"])(e,u)}}).catch(function(t){if("message_not_found"!==t.message){e(Object(O["animateDeleteMessage"])({channelId:a,ts:n,isDeleting:false}));if(s)e(Object(_["l"])({channelId:a,ts:n}));else{e(Object(g["addTimestamps"])({channelId:a,timestamps:[n]}));e(Object(_["a"])([u]))}}throw t})});j.propTypes={channelId:a["b"].string.isRequired,ts:a["b"].string.isRequired,broadcastDelete:a["b"].bool,rollupTimestamps:a["b"].array};var C=t["a"]=j;var S={animateAndDeleteMessageApi:j}},function(e,t,r){"use strict";r.d(t,"b",function(){return b});r.d(t,"a",function(){return _});var a=r(3);var n=r.n(a);var i=r(0);var s=r(1702);var o=r(898);var l=r(15);var c=r(4);var u=r(150);var d=r(23);var p=r(517);var v=r(1062);var m=r(448);var h=r(685);var f=Object(l["b"])("Runs a message action (deprecated)",function(e,t,r){var a=t();var i=Object(m["f"])(a);if(Object(m["c"])(i,r))return Promise.resolve();e(Object(m["e"])(r));return e(Object(o["c"])(n()({},r,{type:"message_action"}))).then(function(){return e(Object(m["j"])(r))}).catch(function(){e(Object(m["i"])(r));var t=function t(){return e(f(r))};var a=Object(s["a"])({onRetry:t});e(Object(u["enqueueToast"])({element:a}))})});f.propTypes={actionId:i["b"].string,appId:i["b"].string,channelId:i["b"].string,messageTs:i["b"].string};var b=Object(l["b"])("Runs a message action",function(e,t,r){if(!Object(c["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor"))return e(f(r));e(Object(h["c"])());var a=n()({},r,{type:p["a"].messageAction});return e(Object(o["c"])(a)).catch(function(){var t=function t(){return e(b(a))};var r=Object(s["a"])({onRetry:t});e(Object(u["enqueueToast"])({element:r}))})});b.propTypes={actionId:i["b"].string.isRequired,appId:i["b"].string.isRequired,channelId:i["b"].string.isRequired,messageTs:i["b"].string.isRequired};var g=Object(l["b"])("Runs a global action",function(e,t,r){e(Object(h["c"])());var a=n()({},r,{type:p["a"].globalAction});return e(Object(o["c"])(a)).catch(function(){var t=function t(){return e(g(a))};var r=Object(s["a"])({onRetry:t});e(Object(u["enqueueToast"])({element:r}))})});g.propTypes={actionId:i["b"].string.isRequired,appId:i["b"].string.isRequired};var _=Object(l["b"])("Explicitly load app actions",function(e,t){var r=t();var a=Object(d["b"])(r);return Object(v["a"])(a)})},,function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return o});var a=r(0);var n=r(25);var i=r(29);var s=Object(n["a"])("Fetches apps from the `apps.index.list` endpoint",function(e,t,r){return e(Object(i["a"])({method:"apps.index.list",args:r,reason:"fetch-apps-index-list"}))});s.propTypes={limit:a["b"].number};var o=Object(n["a"])("Submits a search query and fetches results from `apps.index.search`",function(e,t,r){return e(Object(i["a"])({method:"apps.index.search",args:r,reason:"submit-apps-index-search"}))});o.propTypes={query:a["b"].string}},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(2);var p=r(0);var v=r(16);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(13);var g=r(51);var _=r(50);var y=r(10);var O=r(22);var k=r(57);var E=r(352);var j=r(39);var C=r(4168);var S=r(195);var w=r(3225);var I=new y["b"]("notification_bar");var T={wasRecentlyOnline:p["b"].bool,typingNames:p["b"].array,snippetCallback:p["b"].func,tooLongCount:p["b"].number,inputHasText:p["b"].bool,showFormattingHint:p["b"].bool,isLegacy:p["b"].bool};var A={wasRecentlyOnline:false,typingNames:null,snippetCallback:d["noop"],tooLongCount:0,inputHasText:false,showFormattingHint:false,isLegacy:false};var N=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderLeft",value:function e(){var t=this.props,r=t.wasRecentlyOnline,a=t.typingNames,n=t.inputHasText;if(!r){var i=n?I.t("Slack is trying to connect, so messages can\u2019t be sent yet."):I.t("Slack is trying to connect.");return f.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},i," ",f.a.createElement(O["a"],{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(a&&a.length>0){var s=I.t("several people are typing");1===a.length?s=I.rt("<b>{name}</b> is typing",{name:a[0]}):2===a.length&&(s=I.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:a[0],other_name:a[1]}));return f.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},s)}return null}},{key:"renderRight",value:function e(){var t=this.props,r=t.wasRecentlyOnline,a=t.snippetCallback,n=t.tooLongCount;if(r&&n>0){var i=I.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:n});var s=I.t("Make a snippet instead?");var o=I.t("A snippet is a text file that can be much longer than a normal message.");return f.a.createElement("div",null,f.a.createElement("span",null,i," "),f.a.createElement(_["c"],{tip:o},f.a.createElement("span",null,f.a.createElement(g["a"],{tabIndex:"5",onClick:a},s))))}var l=function(){if(!r)return"";if(Object(k["c"])())return I.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>");return I.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}();return f.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},l)}},{key:"render",value:function e(){var t=this.props,r=t.showFormattingHint,a=t.wasRecentlyOnline,n=t.tooLongCount,i=t.isLegacy;var s=m()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":a&&(r||n>0)});var o=m()("p-notification_bar",{"p-notification_bar--legacy":i});return f.a.createElement("div",{className:o},f.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),f.a.createElement("div",{className:s},this.renderRight()))}}]);return t}(h["PureComponent"]);N.displayName="NotificationBar";N.defaultProps=A;var P=function e(t,r){var a=r.inputText,n=r.wysiwygTextLength,i=r.wasRecentlyOnline;var s=Object(C["a"])(t);var o=void 0!==i?i:Object(S["h"])(t);var l=0;var c=void 0;if(s&&n){c=n;l=Math.max(0,c-j["MAX_MESSAGE_INPUT_LENGTH"])}else{c=a.length;if(c>j["MAX_MESSAGE_INPUT_LENGTH"]/2){var u=Object(E["b"])(t,a);l=Math.max(0,u.length-j["MAX_MESSAGE_INPUT_LENGTH"])}}return{wasRecentlyOnline:o,tooLongCount:l,showFormattingHint:c>2,inputHasText:c>0}};var R=Object(b["connect"])(P)(N);var M=t["a"]=R},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(2);var p=r(1);var v=r.n(p);var m=r(0);var h=r(13);var f=r(16);var b=r.n(f);var g=r(4);var _=r(19);var y=r(35);var O=r(11);var k=r(31);var E=r(93);var j=r(10);var C=r(22);var S=r(3211);var w=new j["b"]("files");var I=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={spriteLoaded:false};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=new Image;this.spritePromise=new Promise(function(e){r.onload=function(){e()};r.src=cdn_url+"/be529/img/dragdrop_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,r=t.featureAnnounceOnly,a=t.teamName,n=t.channelName,i=t.userCanPost,s=t.isImOrMpim,o=t.useNightIllustration;var l=this.state.spriteLoaded;var c=false;if(Object(d["isBoolean"])(o))c=o;else{var u=new Date;var p=u.getHours();c=p>=20||p<8}var m=b()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!c});var h=r&&!i?w.t("Read-only"):w.rt("Upload to {teamName}",{teamName:a});var f="";f=r&&!i?w.t("Only selected team members can post in this channel."):s?w.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:n}):w.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:n});var g="";r&&!i?g=v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),v.a.createElement(C["b"],{type:"emoji-objects",className:"p-message_pane_drag_overlay__anim_readonly",inline:true})):l&&(g=v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),v.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),v.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),v.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"})));return v.a.createElement("div",{className:m},v.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},v.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},g),v.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},h),v.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},f)))}}]);return t}(p["PureComponent"]);I.displayName="MessagePaneDragOverlay";I.defaultProps={featureAnnounceOnly:false,teamName:"",channelName:"",isImOrMpim:false,useNightIllustration:void 0};function T(e,t){var r=t.channelId;var a=Object(_["d"])(e,r);var n=Object(y["d"])(e);return{featureAnnounceOnly:Object(g["isFeatureEnabled"])(e,"feature_announce_only"),channelName:Object(O["getDisplayNameForChannel"])(e,a,{imIncludeAtSign:false}),teamName:Object(k["getTeamDisplayName"])(n),userCanPost:Object(E["s"])(e,a.id),isImOrMpim:Object(O["isIm"])(a)||Object(O["isMpim"])(a)}}var A=Object(h["connect"])(T)(I);var N=t["a"]=A},,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(15);var s=r(48);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(13);var f=r(0);var b=r(40);var g=r.n(b);var _=r(2);var y=r(10);var O=r(84);var k=r(867);var E=r(572);var j=r(128);var C=r(54);var S=r(45);var w=r(21);var I=r(907);var T=r(1102);var A=r(164);var N=r(34);var P=r(553);var R=r(180);var M=r(1714);var x=new y["b"]("do_not_disturb");var D={snoozeNotifications:f["b"].func.isRequired,do24hrTime:f["b"].bool,inDnd:f["b"].bool,clogger:f["b"].object};var F={do24hrTime:false,inDnd:false,clogger:{track:_["noop"]}};var L=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=g()().add(1,"hour").startOf("hour");var n=a.format("YYYY-MM-DD");var i=a.format("HH:mm");var s=g()(n+" "+i).unix();r.state={snoozeEndDate:n,snoozeEndTime:i,snoozeEndTs:s};r.onDateChange=r.onDateChange.bind(r);r.onTimeChange=r.onTimeChange.bind(r);r.onGo=r.onGo.bind(r);return r}u()(t,[{key:"onDateChange",value:function e(t){var r=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:t,snoozeEndTs:g()(t+" "+r).unix()}})}},{key:"onTimeChange",value:function e(t){var r=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:t,snoozeEndTs:g()(r+" "+t).unix()}})}},{key:"onGo",value:function e(){var t=this.props,r=t.clogger,a=t.inDnd;var n=this.state.snoozeEndTs;var i=Object(T["a"])(n);if(i<=0)return;this.props.snoozeNotifications({duration:i,reason:"DndDialog:onGo"});r.track(w["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:i,dnd_preset:w["i"].DURATION_CUSTOM,dnd_snooze_type:a?w["j"].SNOOZE_ADJUST:w["j"].SNOOZE_INITIAL})}},{key:"getTimeSelectOptions",value:function e(){var t=this.props.do24hrTime;var r=this.state.snoozeEndDate;var a=r===g()().format("YYYY-MM-DD");var n=g()().format("HH:mm");var i=Object.keys(I["a"]).filter(function(e){return!(a&&e<n)}).map(function(e){return{value:e,label:t?e:I["a"][e]}});return i}},{key:"render",value:function e(){var t=this.state,r=t.snoozeEndDate,a=t.snoozeEndTime,i=t.snoozeEndTs;var s=Object(T["a"])(i)<=0;var o=Object(A["k"])(i);var l=x.t("Pause notifications until\u2026");var c=g()().format("YYYY-MM-DD");var u=g()().add(1,"year").format("YYYY-MM-DD");return n.a.createElement(O["a"],{title:l,goButtonText:x.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:s,onGo:this.onGo,showCancelButton:false},n.a.createElement(C["a"],{htmlFor:"dnd_dialog_date_button",text:x.t("Date")},n.a.createElement(k["c"],{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:r,onDateChange:this.onDateChange,disableDatesBefore:c,disableDatesAfter:u},n.a.createElement(j["a"],{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":x.t("Date to snooze notifications until")},o))),n.a.createElement(C["a"],{htmlFor:"dnd_dialog_time_select",text:x.t("Time")},n.a.createElement(E["b"],{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:a,useFilteredInput:false,usePlaceholderOption:false})))}}]);return t}(a["PureComponent"]);L.displayName="DndDialog";L.defaultProps=F;var B=function e(t){return{do24hrTime:Object(N["g"])(t,"time24"),inDnd:!!Object(R["getCurrentMemberDnd"])(t),clogger:Object(S["a"])({state:t})}};var U={snoozeNotifications:P["e"]};var q=Object(h["connect"])(B,U)(L);var G=Object(i["b"])("Opens the DND dialog",function(e,t,r){e(Object(s["openModal"])({element:n.a.createElement(q,r)}))});G.propTypes=null;var H=t["a"]=G},,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(8);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r(0);var v=r(12);var m={store:p["b"].shape({getState:p["b"].func.isRequired,subscribeImmediate:p["b"].func,subscribe:p["b"].func.isRequired}).isRequired,render:p["b"].func.isRequired};var h=function(e){u()(t,e);l()(t,null,[{key:"getDerivedStateFromProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.store;return r.getState()}}]);function t(e){n()(this,t);var r=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.store;r.state=a.getState();r.logger=Object(v["a"])({getState:a.getState,label:"CONNECT-IMMEDIATE"});r.unsubscribe=null;r.update=r.update.bind(r);return r}l()(t,[{key:"componentDidMount",value:function e(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function e(t){if(this.props.store!==t.store){this.unsubscribeFromStore();this.subscribeToStore()}}},{key:"componentWillUnmount",value:function e(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function e(){var t=this.props.store;var r=t.subscribeImmediate;if(!r){this.logger.warn("subscribeImmediate not found on store");r=t.subscribe}this.unsubscribe=r(this.update)}},{key:"unsubscribeFromStore",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function e(){var t=this;this.setState(function(){return t.props.store.getState()})}},{key:"render",value:function e(){return this.props.render(this.state)}}]);return t}(d["PureComponent"]);h.displayName="ConnectImmediate";var f=h;var b=t["a"]=f},,function(e,t,r){"use strict";r.d(t,"a",function(){return u});var a=r(10);var n=r(183);var i=r(51);var s=r(0);var o=r(1);var l=r.n(o);var c=new a["b"]("search");function u(e){var t=e.onClick,r=e.short,a=e.className;return l.a.createElement(n["a"],{enabled:["feature_tinyspeck","feature_search_feedback"]},l.a.createElement("span",{className:a},r?"":c.t("Something off?")+" ",l.a.createElement(i["a"],{onClick:t},c.t("Give feedback"))))}u.displayName="FeedbackLink";u.defaultProps={className:"",short:false}},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(2);var p=r(1);var v=r.n(p);var m=r(0);var h=r(13);var f=r(10);var b=r(98);var g=r(19);var _=r(4);var y=r(11);var O=r(93);var k=r(109);var E=r(135);var j=r(28);var C=r(139);var S=r(1811);var w=r(1757);var I=r(16);var T=r.n(I);var A=r(107);var N=r.n(A);var P=r(67);var R=r(34);var M=r(505);var x=r(1806);var D=r(39);var F=r(126);var L=r(22);var B=r(54);var U=r(1258);var q=r(4416);var G=r(1807);var H=r(50);var W=r(41);var V=r(706);var K=r(38);var z=r(1525);var Q=r(208);var Y=r(799);var J=r(4168);var X=r(168);var Z=r(691);var $=r(3285);var ee=new f["b"]("threads");var te=40;var re=150;var ae={channelId:m["b"].string.isRequired,threadTs:m["b"].string.isRequired,channelType:m["b"].string,prepareAndSendMessage:m["b"].func,legacySendSlashCommand:m["b"].func,editLastMessageInChannel:m["b"].func,viewContext:m["b"].string,useSendButton:m["b"].bool,focusInputOnMount:m["b"].bool,featureReactThreads:m["b"].bool,featureSonicInputs:m["b"].bool,featureWysiwygComposer:m["b"].bool,replyCount:m["b"].number,clogThreadEvent:m["b"].func,userCanPost:m["b"].bool.isRequired,onFocus:m["b"].func};var ne={channelType:"channel",prepareAndSendMessage:function e(){return Promise.resolve()},legacySendSlashCommand:d["noop"],editLastMessageInChannel:d["noop"],viewContext:void 0,useSendButton:false,focusInputOnMount:false,featureReactThreads:true,featureSonicInputs:true,featureWysiwygComposer:false,replyCount:0,clogThreadEvent:d["noop"],onFocus:d["noop"]};var ie=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.inputRef=v.a.createRef();r.reactionPopoverRef=v.a.createRef();r.state={hasEnteredText:false,hasFocus:false,broadcast:false,broadcastControlsHeight:0};Object(w["a"])(r,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore"]);r.getAdditionalDraftContent=Object(Y["a"])(function(e){return{broadcast:e}});return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.threadTs,i=r.viewContext;if(!Object(K["a"])()&&this.inputRef.current){var s=Object(Z["c"])(a,n);s&&this.inputRef.current.getWrappedInstance().value(s)}Object(Q["c"])({viewContext:i,channelId:a,threadTs:n,functions:{clear:function e(){var r=t.getInputRef();r&&r.clear()},isEmpty:function e(){var r=t.getInputRef();return r?r.isEmpty():null},prependContents:function e(r){var a=t.getInputRef();a&&a.prependContents(r)},setContents:function e(r){var a=t.getInputRef();a&&a.setContents(r)},getContents:function e(){var r=t.getInputRef();return r?r.getContents():null},setText:function e(r){var a=t.getInputRef();a&&a.value(r)},getText:function e(){var r=t.getInputRef();return r?r.value():null},getDisplayValue:function e(){var r=t.getInputRef();return r?r.displayValue():null},setBroadcast:function e(r){return t.setState(function(){return{broadcast:r}})},getBroadcast:function e(){return t.state.broadcast},focus:function e(){var r=t.getInputRef();r&&r.setCursorAtEnd()},clearHistory:function e(){var r=t.getInputRef();r&&r.clearHistory()},setCursorAtEnd:function e(){var r=t.getInputRef();r&&r.setCursorAtEnd()},getContentsForCurrentSelection:function e(){var r=t.getInputRef();if(!r)return null;var a=r.getSelection();if(!a)return null;return r.getContentsForRange(a.index,a.length)},openReactionPopoverForLastMessage:function e(){t.reactionPopoverRef.current&&t.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:function e(){var r=t.getInputRef();if(!r)return false;var a=r.getSelection();return a&&0===a.index},isCursorAtEnd:function e(){var r=t.getInputRef();if(!r)return false;var a=r.getSelection();return a&&a.index===r.getLength()}}})}},{key:"componentDidUpdate",value:function e(t,r){var a=this.state.hasFocus||this.state.hasEnteredText;var n=r.hasFocus||r.hasEnteredText;a&&!n?this.startExpandAnimation(0,te):!a&&n&&this.startExpandAnimation(te,0)}},{key:"componentWillUnmount",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.viewContext;Object(Q["d"])({viewContext:n,channelId:r,threadTs:a});this.expandAnimation&&this.expandAnimation.cancel()}},{key:"onBroadcastChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{broadcast:!!r}});if(!this.state.hasEnteredText){this.inputRef.current.getWrappedInstance().focus();this.preventUnfocus=false}}},{key:"onBroadcastControlsMouseDown",value:function e(t){t.preventDefault();this.state.hasEnteredText||(this.preventUnfocus=true)}},{key:"onTextChange",value:function e(t){this.setState(function(){return{hasEnteredText:!!t}});var r=this.props,a=r.channelId,n=r.threadTs;Object(K["a"])()||Object(Z["g"])(a,n,t)}},{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onBlur",value:function e(){if(this.preventUnfocus){this.preventUnfocus=false;return}this.setState(function(){return{hasFocus:false}})}},{key:"onExpandAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;this.setState(function(){return{broadcastControlsHeight:r}},a)}},{key:"onExpandAnimationEnd",value:function e(){this.expandAnimation=null}},{key:"getInputRef",value:function e(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"handleDraftRestore",value:function e(t){this.setState(function(e){var r=e.broadcastControlsHeight;return{broadcast:!!t.broadcast,broadcastControlsHeight:t.ops?te:r}})}},{key:"startExpandAnimation",value:function e(t,r){var a=this.state.broadcastControlsHeight;if(a===r)return;this.expandAnimation&&this.expandAnimation.cancel();this.expandAnimation=Object(V["a"])({fromValue:t,toValue:r,duration:re,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd})}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext})}},{key:"sendMessage",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.threadTs,i=r.replyCount,s=r.clogThreadEvent,o=r.featureSonicInputs,l=r.featureWysiwygComposer;var c=this.state.broadcast;this.setState(function(){return{broadcast:false}});var u=this.getInputRef();var d=u.value();if(!o&&Object(z["a"])(d)){u.clear();this.props.legacySendSlashCommand(a,n,d);return Promise.resolve()}if(!Object(G["a"])(u.getContents(),{featureWysiwygComposer:l}))return null;var p=c?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY";var v={num_msg_in_thread:i+1};s({event:p,metadata:v});var m=u.getContents();u.clear();u.focus();return this.props.prepareAndSendMessage({channelId:a,text:d,delta:l?new N.a(m.contents):null,replyToTs:n,shouldBroadcast:c}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){u.isEmpty()&&u.setContents(m)})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.viewContext,i=t.channelType,s=t.useSendButton,o=t.focusInputOnMount,l=t.userCanPost,c=t.featureReactThreads,u=t.featureSonicInputs,d=t.onFocus;var p=this.state,m=p.broadcast,h=p.hasEnteredText,f=p.hasFocus,b=p.broadcastControlsHeight;if(!c)return null;var g=h||f;var _=T()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":g});var y={height:b};var O="";O="mpim"===i?ee.t("Also send to the group"):"im"===i?ee.t("Also send as direct message"):ee.rt("Also send to <span></span>",null,function(){return v.a.createElement(C["a"],{channelId:r,inline:true,className:"p-threads_footer__broadcast_channel"})});var E="";E="mpim"===i||"im"===i?ee.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):ee.t("Choose this if you\u2019d like your reply to post in the channel, too");var j="p-thread_footer__broadcast_checkbox--"+Object(k["getThreadKey"])(r,a)+"--"+n;var S=T()("p-threads_footer__input",{"p-threads_footer__input--legacy":!u});var w=v.a.createElement(U["c"],{className:S,channelId:r,threadTs:a,viewContext:n,placeholder:ee.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:true,enableBroadcastKeywords:false,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!u,useLegacyDrafts:!Object(K["a"])(),maxLines:8,useSendButton:s,focusOnMount:o,maxLength:D["MAX_MESSAGE_INPUT_LENGTH"],onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(m)});Object(K["a"])()&&(w=v.a.createElement(q["a"],{ref:this.reactionPopoverRef,channelId:r,threadTs:a},w));return v.a.createElement("div",{className:"p-threads_footer__input_container","data-qa":"reply_container",onFocus:d},w,v.a.createElement("div",{className:_,style:y},v.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},l&&v.a.createElement(v.a.Fragment,null,v.a.createElement(B["a"],{className:"p-threads_footer__broadcast_label",text:O,htmlFor:j,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},v.a.createElement(F["a"],{className:"p-threads_footer__broadcast_checkbox",id:j,checked:m,onChange:this.onBroadcastChange,"data-qa":"threads_footer_broadcast_checkbox",disabled:!g})),v.a.createElement(H["c"],{tip:E},v.a.createElement(L["b"],{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:true,size:"inherit"}))),v.a.createElement(U["b"],{isDisabled:!h,className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}]);return t}(p["Component"]);ie.displayName="InputContainer";ie.defaultProps=ne;function se(e,t){var r=t.channelId,a=t.threadTs;var n=Object(g["d"])(e,r);var i=Object(P["a"])(e,r,a);return{channelType:Object(y["getChannelType"])(n),featureReactThreads:Object(_["isFeatureEnabled"])(e,"feature_react_threads"),featureSonicInputs:Object(_["isFeatureEnabled"])(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(J["a"])(e),useSendButton:Object(R["g"])(e,"msg_input_send_btn"),replyCount:Object(W["getReplyCount"])(i),userCanPost:Object(O["s"])(e,r)}}var oe={prepareAndSendMessage:function e(){return M["a"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return x["a"].apply(void 0,arguments)},legacySendSlashCommand:function e(t,r,a){return function(e,n){var i=n();var s=Object(g["d"])(i,t);var o=Object(P["a"])(i,t,r);if(!s||!o)return;Object(X["k"])(s,a,o)}}};var le=Object(h["connect"])(se,oe)(ie);var ce=r(3287);var ue=new f["b"]("threads");var de={channelId:m["b"].string.isRequired,threadTs:m["b"].string.isRequired,unknown:m["b"].bool,archived:m["b"].bool,frozen:m["b"].bool,imWithDeletedMember:m["b"].bool,cannotReply:m["b"].bool,nonMember:m["b"].bool,canJoin:m["b"].bool,focusInputOnMount:m["b"].bool,joinConversationApi:m["b"].func,featureReactThreads:m["b"].bool,featureAnnounceOnly:m["b"].bool,featureEscDisconnectV2Client:m["b"].bool,viewContext:m["b"].string,clogThreadEvent:m["b"].func,onFocus:m["b"].func};var pe={unknown:false,archived:false,frozen:false,imWithDeletedMember:false,cannotReply:false,nonMember:false,canJoin:false,focusInputOnMount:true,joinConversationApi:d["noop"],featureReactThreads:false,featureAnnounceOnly:false,featureEscDisconnectV2Client:false,viewContext:void 0,clogThreadEvent:d["noop"],onFocus:d["noop"]};var ve=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.joinChannel=r.joinChannel.bind(r);return r}s()(t,[{key:"joinChannel",value:function e(){var t=this.props.channelId;this.props.joinConversationApi({channelId:t})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.unknown,i=t.archived,s=t.frozen,o=t.imWithDeletedMember,l=t.cannotReply,c=t.nonMember,u=t.canJoin,d=t.focusInputOnMount,p=t.featureReactThreads,m=t.featureAnnounceOnly,h=t.featureEscDisconnectV2Client,f=t.viewContext,b=t.clogThreadEvent,g=t.onFocus;if(!p)return null;if(n||o)return null;if(i||s)return v.a.createElement(E["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},h&&s?ue.t("This channel is no longer shared with your organization."):ue.t("You are viewing a thread from an archived channel"));if(m&&l){var _=ue.t("Posting to this thread has been restricted to select members");return v.a.createElement(S["a"],{tooltip:_,featureAnnounceOnly:m})}if(l)return v.a.createElement(E["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},ue.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return v.a.createElement(C["a"],{channelId:r,inline:true,iconProps:{inherit:true}})}));if(c){if(!u)return null;return v.a.createElement("div",{className:"p-threads_footer_join_container"},v.a.createElement(j["d"],{type:"primary",size:"medium",onClick:this.joinChannel},ue.t("Join Channel")),!m&&v.a.createElement("p",{className:"p-threads_footer_join_label"},ue.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return v.a.createElement(C["a"],{channelId:r,inline:true,iconProps:{inherit:true}})})))}return v.a.createElement(le,{channelId:r,threadTs:a,key:Object(k["getThreadKey"])(r,a),focusInputOnMount:d,viewContext:f,clogThreadEvent:b,onFocus:g})}}]);return t}(p["Component"]);ve.displayName="ThreadFooter";ve.defaultProps=pe;function me(e,t){var r=t.channelId;var a=Object(g["d"])(e,r);var n=Object(_["isFeatureEnabled"])(e,"feature_esc_disconnect_v2_client");return{unknown:Object(y["isUnknownOrNonExistent"])(a),archived:Object(y["isArchived"])(a),frozen:n&&Object(y["isFrozen"])(a),imWithDeletedMember:Object(y["isImWithDeletedMember"])(e,a),cannotReply:!Object(y["canThread"])(e,a),nonMember:Object(y["isPublicChannel"])(a)&&!Object(y["isMemberOfChannel"])(a),canJoin:Object(O["g"])(e,r),featureEscDisconnectV2Client:n,featureReactThreads:Object(_["isFeatureEnabled"])(e,"feature_react_threads"),featureAnnounceOnly:Object(_["isFeatureEnabled"])(e,"feature_announce_only")}}var he=t["a"]=Object(h["connect"])(me,{joinConversationApi:b["joinConversationApi"]})(ve)},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(0);var f=r(1);var b=r.n(f);var g=r(2);var _=r(1213);var y={items:h["b"].arrayOf(_["d"]).isRequired,itemMapper:h["b"].func,actions:h["b"].arrayOf(_["c"]).isRequired,titleFormatter:h["b"].func,showingSelection:h["b"].bool,onToggleShowingSelection:h["b"].func,onToggleSelect:h["b"].func,onAction:h["b"].func,"data-qa":h["b"].string,position:h["b"].string};var O={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",itemMapper:null,position:void 0};var k=function(e){m()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"getBaseSelectionBarProps",value:function e(t){var r=this.props.itemMapper;var a=r?t.map(r):t;var n=Object(g["reduce"])(a,function(e,t){return e+(t.isSelected?1:0)},0);return{items:a,availableCount:t.length,selectedCount:n}}},{key:"render",value:function e(){var t=this.props,r=t.items,a=s()(t,["items"]);return b.a.createElement(_["b"],n()({},this.getBaseSelectionBarProps(r),a))}}]);return t}(f["PureComponent"]);k.displayName="SelectionBar";k.defaultProps=O;var E=k;r.d(t,"a",function(){return _["b"]});var j=t["b"]=E},,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(10);var p=r(0);var v=r(1);var m=r.n(v);var h=r(515);var f=r(13);var b=r(2);var g=r(1757);var _=r(22);var y=r(28);var O=r(273);var k=r(198);var E=r(1532);var j=r(38);function C(e){var t=/<@([A-Z0-9a-z]+)\|([^>]+)>/g;return e.replace(t,function(e,t,r){var a=Object(b["unescape"])(r);return"<@"+t+"|"+a+">"})}var S=r(531);var w=r(1076);var I=r(2855);var T=r(1508);var A=new d["b"]("search");var N={usePrimarySearch:p["b"].bool.isRequired,featurePeopleSearch:p["b"].bool.isRequired,isSearchAutocompleteOpen:p["b"].bool.isRequired,autoFocus:p["b"].bool,isSonic:p["b"].bool.isRequired,displayQuery:p["b"].string.isRequired,queryIsUserGenerated:p["b"].bool,onBlur:p["b"].func,onEnter:p["b"].func,onEscape:p["b"].func,onFocus:p["b"].func,searchInputChanged:p["b"].func.isRequired,clearSearchInput:p["b"].func.isRequired,autocompleteSelectedIndex:p["b"].number};var P={autoFocus:false,queryIsUserGenerated:false,onBlur:b["noop"],onEnter:b["noop"],onEscape:b["noop"],onFocus:b["noop"],autocompleteSelectedIndex:void 0};var R=null;var M=0;var x=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.texty=null;Object(g["a"])(r,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]);r.queryHasChanged=false;r.queryHasBeeenSubmitted=false;r.onUserInput=Object(b["debounce"])(r.onUserInput,100);r.placeholderCopy=r.lazyInitializeShuffledPlaceholderCopy();return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.autoFocus,a=t.usePrimarySearch,n=t.isSearchAutocompleteOpen;if(r||a&&n){var i=window._searchAutocompleteCatch;if(i){delete window._searchAutocompleteCatch;var s=i.value;this.texty.value(this.texty.value()+s);i.parentNode.removeChild(i)}this.texty.setCursorAtEnd()}}},{key:"shouldComponentUpdate",value:function e(t){var r=this.props.usePrimarySearch&&t.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen;return r||this.props.displayQuery!==t.displayQuery||this.props.autocompleteSelectedIndex!==t.autocompleteSelectedIndex}},{key:"componentDidUpdate",value:function e(t){this.texty&&this.props.usePrimarySearch&&!t.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus();this.props.queryIsUserGenerated||t.displayQuery===this.props.displayQuery||this.updateDisplayQuery()}},{key:"onUserInput",value:function e(){var t=this;if(this.queryHasChanged){this.queryHasChanged=false;this.props.searchInputChanged({textyString:this.getTextyString()}).then(function(){if(t.queryHasBeeenSubmitted){t.props.onEnter();t.queryHasBeeenSubmitted=false}})}else if(this.queryHasBeeenSubmitted){this.props.onEnter();this.queryHasBeeenSubmitted=false}}},{key:"onUserQueryChange",value:function e(){this.queryHasChanged=true;this.onUserInput()}},{key:"onEnter",value:function e(){if(null!==this.props.autocompleteSelectedIndex){this.queryHasBeeenSubmitted=true;this.onUserInput()}}},{key:"onClickClear",value:function e(){this.props.clearSearchInput();this.texty&&this.texty.focus()}},{key:"setTextyRef",value:function e(t){var r=!!(t&&t.getWrappedInstance);this.texty=r?t.getWrappedInstance():t}},{key:"getTextyString",value:function e(){if(!this.texty)return this.props.displayQuery;return C(this.texty.value())}},{key:"lazyInitializeShuffledPlaceholderCopy",value:function e(){if(this.props.featurePeopleSearch){var t=[A.t("Search for comments, asides, eurekas, and more"),A.t("Search for messages, replies, or even insightful asides"),A.t("Search for files, facts, figures, and stats"),A.t("Search for files, for people, for half-remembered fragments of conversation"),A.t("Search for a missing link"),A.t("Search for whatever; let\u2019s find it together"),A.t("Search discussions, directories, data, and more"),A.t("Search messages, files, around corners, under rugs, etc."),A.t("Search all across Slack"),A.t("Search far and wide"),A.t("Search high and low"),A.t("Search the Log of All Conversation and Knowledge"),A.t("Search because it\u2019s faster than scrolling"),A.t("Type what you want to search for. Slack will do the rest."),A.t("What do you want to search for today?"),A.t("Surely that\u2019s around here somewhere\u2026"),A.t("You\u2019re digging in the right place"),A.t("We\u2019re all searching, in a way. You can search Slack, specifically, here."),A.t("Search me. No, really."),A.t("Input search. Beep boop."),A.t("Search for something. Anything. You have the window open now anyway."),A.t("Delve into your archives, seize upon the answers. Rejoice.")];null===R&&(R=Object(b["shuffle"])(t.map(function(e,t){return t})));M=(M+1)%R.length;return t[R[M]]}return null}},{key:"focusTexty",value:function e(){this.texty&&this.texty.focus()}},{key:"updateDisplayQuery",value:function e(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}},{key:"render",value:function e(){var t=A.t("Search");var r={tabcomplete:{completers:[]},keyboard:{useFormattingCommands:false}};var a=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden";var n="number"===typeof this.props.autocompleteSelectedIndex?Object(T["b"])(this.props.autocompleteSelectedIndex):void 0;var i={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:true,activedescendant:n};var s=void 0;s=w["a"]&&this.placeholderCopy?this.placeholderCopy:A.t("Search messages, files, and channels",{fallbackHash:"2c741ca32c78642194b2b88f355b5ebb8d3ea849"});return m.a.createElement("div",{className:"c-search__input_box","data-qa":"search_input_box"},m.a.createElement(_["b"],{type:"search-medium",className:"c-search__input_box__icon"}),m.a.createElement(h["default"],{className:"c-search__input_box__input",modules:r,ref:this.setTextyRef,ariaLabel:t,ariaDescribedBy:"footer-instructions",unsafeAriaProps:i,initialText:this.props.displayQuery,placeholder:s,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:true,focusOnMount:false,useLegacyCreate:!this.props.isSonic,isJumbomojiEnabled:false,showMentionTooltips:false,enableBroadcastKeywords:false,useFocusRing:false,"data-qa":"focusable_search_input"}),m.a.createElement(y["c"],{className:a,onClick:this.onClickClear,label:A.t("Clear"),"data-qa":"search_input_clear"},A.t("Clear")))}}]);return t}(v["Component"]);x.displayName="SearchInputBox";x.defaultProps=P;var D=function e(t){return{usePrimarySearch:Object(S["a"])(t),isSearchAutocompleteOpen:Object(k["isSearchAutocompleteOpen"])(t),displayQuery:Object(O["getSearchInputBoxDisplayQuery"])(t),queryIsUserGenerated:Object(O["getSearchInputBoxQueryIsUserGenerated"])(t),autocompleteSelectedIndex:Object(k["getSearchAutocompleteSelectedIndex"])(t),isSonic:Object(j["a"])(t),featurePeopleSearch:Object(w["a"])(t)}};var F={searchInputChanged:function e(){return O["searchInputChanged"].apply(void 0,arguments)},clearSearchInput:function e(){return E["a"].apply(void 0,arguments)}};var L=t["a"]=Object(f["connect"])(D,F,null,{withRef:true})(x)},,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(0);var m=r(1);var h=r.n(m);var f=r(2);var b=r(1757);var g=r(13);var _=r(540);var y=r(10);var O=r(273);var k=r(198);var E=r(312);var j=r(74);var C=r.n(j);var S=r(30);var w=r(4);var I=r(802);var T=r(94);var A=r(852);var N=r(23);var P=r(366);var R=r(71);var M=r(38);var x=r(1508);var D=r(1360);var F=r(22);var L=r(1850);var B=new y["b"]("search");var U={featureOfflineMode:v["b"].bool,onFeedbackClick:v["b"].func.isRequired};var q={featureOfflineMode:false};var G=function e(){return h.a.createElement(m["Fragment"],null,h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"\u2191"),h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim margin_left_25"},"\u2193"),"\xa0",B.t("to navigate"),h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim margin_left_100","aria-label":B.t("Return")},"\u21b5"),"\xa0",B.t("to select"),h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim margin_left_100","aria-label":B.t("Escape Character")},"esc"),"\xa0",B.t("to dismiss"))};G.displayName="onlineLabel";var H=function e(t){var r=t.featureOfflineMode,a=t.onFeedbackClick;return h.a.createElement("footer",null,h.a.createElement("span",{className:"c-search_autocomplete__footer_navigation_help",id:"footer-instructions"},r?h.a.createElement(m["Fragment"],null,h.a.createElement(D["a"],null,B.rt("{iconOffline} <strong>No connection.</strong> Search is not available while offline, and navigating to conversations may be limited.",{iconOffline:h.a.createElement(F["b"],{type:"cloud-offline",size:"inherit",className:"c-icon--inline"})})),h.a.createElement(D["b"],null,G())):G()),h.a.createElement(L["a"],{className:"c-search_autocomplete__footer_navigation_feedback",onClick:a}))};H.displayName="Footer";H.defaultProps=q;var W=H;var V=r(2853);var K=new y["b"]("search");var z=new y["b"]("view");var Q={displayQuery:v["b"].string,userQuery:v["b"].string,suggestions:v["b"].array.isRequired,selectedIndex:v["b"].number,onAccept:v["b"].func,onDelete:v["b"].func,onSelectedIndexChange:v["b"].func,fetchSearchAutocompleteSuggestions:v["b"].func.isRequired,setSearchAutocompleteSelection:v["b"].func.isRequired,setSearchAutocompleteSuggestions:v["b"].func.isRequired,openSearchFeedbackDialog:v["b"].func.isRequired,lastOpenMethodWasSwitchy:v["b"].bool,teamId:v["b"].string.isRequired,telemeter:v["b"].object,featureOfflineMode:v["b"].bool.isRequired};var Y={selectedIndex:null,onAccept:f["noop"],onDelete:f["noop"],onSelectedIndexChange:f["noop"],displayQuery:null,userQuery:null,lastOpenMethodWasSwitchy:false,telemeter:R["d"]};var J=function e(t,r){return(t%r+r)%r};var X=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["a"])(r,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected","onMouseLeaveList","onFeedbackClick"]);r.searchAutocompleteSuggestionsPromise=void 0;r.markAutocompleteRenderStart=Object(f["throttle"])(I["b"].bind(null,e.telemeter),2e3,{leading:true});r.populateChannelNameCounts();r.listRef=h.a.createRef();r.listItemRefs={};return r}l()(t,[{key:"componentDidMount",value:function e(){document.body.addEventListener("keydown",this.onKeydown);this.onUserQueryChange();Object(A["e"])(this.props.teamId);var t=Object(M["a"])()?"omniswitcher-open-sonic":"omniswitcher-open-legacy";this.props.telemeter.measureAndClear("omniswitcher-open-mark",t)}},{key:"shouldComponentUpdate",value:function e(t){return t.selectedIndex!==this.props.selectedIndex||t.suggestions!==this.props.suggestions}},{key:"componentDidUpdate",value:function e(t){t.userQuery!==this.props.userQuery&&this.onUserQueryChange();this.populateChannelNameCounts()}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.onKeydown)}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({query:this.props.userQuery})}},{key:"onKeydown",value:function e(t){var r=function e(){t.preventDefault();t.stopPropagation();return false};var a=t.shiftKey;var n=t.which;var i=_["codes"].up,s=_["codes"].tab,o=_["codes"].down;if(!a&&n===i||a&&n===s){this.decrementSelectedIndex();return r()}if(!a&&n===o||n===s){this.incrementSelectedIndex();return r()}return true}},{key:"onUserQueryChange",value:function e(){Object(I["a"])(this.props.telemeter)}},{key:"onSuggestionDelete",value:function e(t){this.props.setSearchAutocompleteSuggestions({suggestions:Object(f["filter"])(this.props.suggestions,function(e){return t.key!==e.key})});this.props.onDelete()}},{key:"onSuggestionSelected",value:function e(t,r){this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!r})}},{key:"onMouseLeaveList",value:function e(){this.props.setSearchAutocompleteSelection({selectedIndex:null,setText:false})}},{key:"onSuggestionAccept",value:function e(){this.props.onAccept()}},{key:"getListItemRef",value:function e(t){this.listItemRefs[t]||(this.listItemRefs[t]=h.a.createRef());return this.listItemRefs[t]}},{key:"scrollToListItemIndex",value:function e(t){if(!this.listRef||!this.listRef.current||!this.listItemRefs[t]||!this.listItemRefs[t].current)return;var r=this.listRef.current;if(0===t){r.scrollTop=0;return}var a=this.listItemRefs[t].current.getWrappedInstance?this.listItemRefs[t].current.getWrappedInstance():this.listItemRefs[t].current;var n=a.offsetTop-r.offsetTop;var i=n+a.offsetHeight;n<r.scrollTop&&(r.scrollTop=n);i>r.scrollTop+r.clientHeight&&(r.scrollTop=i-r.clientHeight)}},{key:"populateChannelNameCounts",value:function e(){var t=this;this.channelNameCounts={};this.props.suggestions.forEach(function(e){e.is_type_channel&&(t.channelNameCounts[e.channel.name]=(t.channelNameCounts[e.channel.name]||0)+1)})}},{key:"incrementSelectedIndex",value:function e(){var t=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(t&&t.type===T["b"].QUERY&&t.suggestion_replacement!==this.props.displayQuery){this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:true});return}var r=J((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:r,setText:true});this.scrollToListItemIndex(r)}},{key:"decrementSelectedIndex",value:function e(){var t=J(this.props.selectedIndex-1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:true});this.scrollToListItemIndex(t)}},{key:"propsForSuggestion",value:function e(t,r){var a=r.is_type_channel&&this.channelNameCounts[r.channel.name]>1;return{index:t,suggestion:r,key:r.key,isSelected:t===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,hasChannelNameCollision:a}}},{key:"renderScreenReaderWorkaround",value:function e(){var t=this;if(!(C.a.chrome&&C.a.version<67)||!Object(S["isSSB"])())return null;var r=this.props.selectedIndex;var a=Object(f["last"])(this.props.suggestions.map(function(e,a){return e.is_type_navigational&&a===r?h.a.createElement(x["a"],t.propsForSuggestion(a,e)):null}).filter(function(e){return e}));return h.a.createElement("div",{"aria-live":"polite",className:"offscreen"},a)}},{key:"renderBlankSlate",value:function e(){var t=this;var r=this.props.featureOfflineMode;var a=Object(f["some"])(this.props.suggestions,function(e){return e.is_type_query_history});var i=h.a.createElement("header",null,h.a.createElement("span",{className:"c-search_autocomplete__header_label"},h.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},K.t("Recent searches"))));var s=this.props.suggestions.map(function(e,r){return e.is_type_query_history&&h.a.createElement(x["a"],n()({listItemRef:t.getListItemRef(r)},t.propsForSuggestion(r,e)))});var o=Object(f["some"])(this.props.suggestions,function(e){return e.is_type_navigational});var l=h.a.createElement("header",null,h.a.createElement("span",{className:"c-search_autocomplete__header_label"},h.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},z.t("Unreads & drafts",{fallbackHash:"95ed8c1c63175388741df85c038e3dc99d8ac375"}))));var c=this.props.suggestions.map(function(e,r){return e.is_type_navigational&&h.a.createElement(x["a"],n()({listItemRef:t.getListItemRef(r)},t.propsForSuggestion(r,e)))});var u=this.renderScreenReaderWorkaround();var d=h.a.createElement(m["Fragment"],null,o&&h.a.createElement("li",{role:"presentation"},l),c);var p=h.a.createElement(m["Fragment"],null,a&&h.a.createElement("li",{role:"presentation"},i),s);return h.a.createElement("div",{className:"c-search_autocomplete"},u,h.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.lastOpenMethodWasSwitchy&&d,p,!this.props.lastOpenMethodWasSwitchy&&d),h.a.createElement(W,{featureOfflineMode:r,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function e(){var t=this;var r=this.props.featureOfflineMode;var a=!this.props.userQuery;if(a)return this.renderBlankSlate();this.markAutocompleteRenderStart();var i=this.renderScreenReaderWorkaround();return h.a.createElement("div",{className:"c-search_autocomplete"},i,h.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.suggestions.map(function(e,r){return h.a.createElement(x["a"],n()({listItemRef:t.getListItemRef(r)},t.propsForSuggestion(r,e)))})),h.a.createElement(W,{featureOfflineMode:r,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(m["Component"]);X.displayName="SearchAutocomplete";X.defaultProps=Y;var Z=function e(t){return{suggestions:Object(k["getSearchAutocompleteSuggestions"])(t),selectedIndex:Object(k["getSearchAutocompleteSelectedIndex"])(t),userQuery:Object(O["getSearchInputBoxUserQuery"])(t),displayQuery:Object(O["getSearchInputBoxDisplayQuery"])(t),lastOpenMethodWasSwitchy:Object(P["f"])(t),teamId:Object(N["b"])(t),telemeter:Object(R["c"])({state:t}),featureOfflineMode:Object(w["isFeatureEnabled"])(t,"feature_offline_mode")}};var $={setSearchAutocompleteSelection:function e(){return k["setSearchAutocompleteSelection"].apply(void 0,arguments)},setSearchAutocompleteSuggestions:function e(){return k["setSearchAutocompleteSuggestions"].apply(void 0,arguments)},fetchSearchAutocompleteSuggestions:function e(){return E["b"].apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return E["i"].apply(void 0,arguments)}};var ee=t["a"]=Object(g["connect"])(Z,$)(X)},function(e,t,r){"use strict";var a=r(0);var n=r(13);var i=r(52);var s={children:a["b"].node,isDegradedMode:a["b"].bool};var o={children:null,isDegradedMode:null};var l=function e(t){var r=t.isDegradedMode,a=t.children;return r?a:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isDegradedMode:Object(i["isHavingTroubleReconnecting"])(t)}};t["a"]=Object(n["connect"])(c)(l)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(2);var m=r(1757);var h=r(1);var f=r.n(h);var b=r(0);var g=r(13);var _=r(16);var y=r.n(_);var O=r(152);var k=r(84);var E=r(126);var j=r(54);var C=r(4316);var S=r(15);var w=r(4);var I=r(23);var T=r(316);var A=r(1344);var N=r(863);var P=r(10);var R=r(391);var M=r(1557);var x=new P["b"]("snippet-dialog");var D="text/plain";var F=Object(S["b"])("Upload a Snippet, maybe share it too",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.broadcast,n=r.fileName,i=r.fileType,s=r.fileContent,o=r.channelOrMemberId,l=r.threadTs,c=r.introMessage,u=r.blocks;var d=t();var p=Object(w["isFeatureEnabled"])(d,"feature_sonic_snippets");var v=n||(p?x.t("Untitled"):"");var m=M["a"][i];var h=m&&m.mimeType||D;var f=new Blob([s],{type:h});f.name=v;f.snippetType=i;var b=Object(I["b"])(d);var g=Object(N["a"])(b);if(o)return e(Object(A["a"])({channelOrMemberId:o})).then(function(t){return g.uploadFiles({files:[f],shareData:{channelId:t,threadTs:t?l:void 0,clientMsgId:t?Object(R["a"])():void 0,introMessage:c,blocks:u,broadcast:!(!t||!l)&&a}}).then(function(){return e(Object(T["a"])({id:t}))})});return g.uploadFiles({files:[f]})});F.propTypes={fileName:b["b"].string,fileType:b["b"].string,fileContent:b["b"].string.isRequired,channelOrMemberId:b["b"].string,threadTs:b["b"].string,introMessage:b["b"].string,blocks:b["b"].array,broadcast:b["b"].bool};var L=F;var B=r(849);var U=r(39);var q=r(208);var G=r(1164);var H=r(134);var W=r(319);var V=r(48);var K=r(1537);var z=r(1538);var Q=r(1328);var Y=r(1539);var J=r(4382);var X=r(4401);var Z=r(2387);r.d(t,"BaseSnippetDialog",function(){return re});var $=new P["b"]("snippet-dialog");var ee={initialName:b["b"].string,initialType:b["b"].string,initialSnippetText:b["b"].string,initialChannelId:b["b"].string,initialShareWith:b["b"].bool,threadTs:b["b"].string,viewContext:b["b"].string,resetSnippetText:b["b"].string,initialContents:b["b"].object,resetChannelId:b["b"].string,uploadSnippet:b["b"].func.isRequired,closeModal:b["b"].func.isRequired,openModal:b["b"].func.isRequired,featureSonicSnippets:b["b"].bool,msgText:b["b"].string,setMsgText:b["b"].func.isRequired,selectedChannelId:b["b"].string,setSelectedChannel:b["b"].func.isRequired,disallowedKeywordInMsgText:b["b"].string,channelType:b["b"].oneOf(["mpim","im","channel","private"]),selectedChannelName:b["b"].node.isRequired,canPostInSelectedChannel:b["b"].bool.isRequired,canThread:b["b"].bool.isRequired,msgOps:b["b"].array,setMsgOps:b["b"].func.isRequired,converMsgOpsToRichTextMessage:b["b"].func.isRequired,featureWysiwygComposer:b["b"].bool};var te={initialName:"",initialType:void 0,initialSnippetText:"",initialChannelId:void 0,initialShareWith:void 0,threadTs:void 0,viewContext:void 0,resetSnippetText:void 0,initialContents:void 0,resetChannelId:void 0,featureSonicSnippets:false,msgText:"",channelType:null,selectedChannelId:null,disallowedKeywordInMsgText:null,msgOps:void 0,featureWysiwygComposer:false};var re=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["a"])(r,["handleBroadcastChange","handleFileNameChange","handleFileTypeChange","handleFileContentChange","handleShareWithChange","handleMsgTextChange","handleSubmit","handleSubmitError","shouldShowSpeedBump","handleCancel"]);r.state={fileName:e.initialName,fileType:e.initialType,fileContent:e.initialSnippetText,shareWith:Object(v["isBoolean"])(e.initialShareWith)?e.initialShareWith:!!e.initialChannelId,overMsgLengthLimit:false,broadcast:false};return r}l()(t,[{key:"isGoButtonDisabled",value:function e(){var t=this.props,r=t.disallowedKeywordInMsgText,a=t.canPostInSelectedChannel,n=t.threadTs,i=t.canThread;var s=this.state,o=s.overMsgLengthLimit,l=s.fileName,c=s.fileContent,u=s.shareWith;var d=l.length>U["MAX_FILENAME_LENGTH"];return u&&!a&&!n||u&&n&&!i||!!r||!c||o||d}},{key:"shouldShowSpeedBump",value:function e(t){if("cancel"===t||"close"===t){var r=this.state.fileContent;var a=this.props,n=a.resetSnippetText,i=a.initialSnippetText,s=a.featureWysiwygComposer;if(s)return r!==i;return r!==n}return false}},{key:"handleBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"handleFileNameChange",value:function e(t){this.setState(function(){return{fileName:t}})}},{key:"handleFileTypeChange",value:function e(t){this.setState(function(){return{fileType:t}})}},{key:"handleFileContentChange",value:function e(t){this.setState(function(){return{fileContent:t}})}},{key:"handleShareWithChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{shareWith:!!r}})}},{key:"handleMsgTextChange",value:function e(t){var r=t.text,a=t.msgOps,n=t.overLimit;var i=this.props.featureWysiwygComposer;i?this.props.setMsgOps(a):this.props.setMsgText(r);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"handleSubmit",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.msgText,n=t.msgOps,i=t.threadTs,s=t.featureWysiwygComposer;var o=this.state,l=o.broadcast,c=o.fileName,u=o.fileType,d=o.fileContent,p=o.shareWith;var v=void 0;s&&(v=this.props.converMsgOpsToRichTextMessage({msgOps:n,channelId:r,inThread:!!i}));this.props.uploadSnippet({fileName:Object(W["c"])({locale:Object(G["a"])(),text:c}),fileType:u,fileContent:d,channelOrMemberId:p?r:void 0,threadTs:p?i:void 0,introMessage:a,blocks:s?v:void 0,broadcast:l}).catch(this.handleSubmitError);this.props.closeModal()}},{key:"handleSubmitError",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.threadTs,n=t.msgText,i=t.initialContents,s=t.resetSnippetText,o=t.resetChannelId,l=t.viewContext;var c=this.state,u=c.fileName,d=c.fileType,p=c.fileContent,v=c.shareWith;this.props.openModal({element:f.a.createElement(se,{initialName:u,initialType:d,initialSnippetText:p,initialChannelId:r,initialShareWith:v,initialContents:i,initialText:n,threadTs:a,resetSnippetText:s,resetChannelId:o,viewContext:l})})}},{key:"handleCancel",value:function e(){var t=this.props,r=t.resetSnippetText,a=t.initialContents,n=t.resetChannelId,i=t.threadTs,s=t.viewContext,o=t.featureWysiwygComposer;var l=Object(q["a"])({channelId:n,threadTs:i,viewContext:s});if(!l)return;if(o){if(!a||!l.setContents||!l.focus)return;l.setContents(a);l.focus()}else if(r){if(!l.setText)return;l.setText(r)}}},{key:"maybeRenderBroadcast",value:function e(){var t=this.props,r=t.threadTs,a=t.canPostInSelectedChannel,n=t.channelType,i=t.selectedChannelName;var s=this.state.broadcast;if(!r||!a)return null;return f.a.createElement("div",{className:"p-snippet_dialog__broadcast_section"},f.a.createElement(X["a"],{channelType:n,selectedChannelName:i,value:s,onChange:this.handleBroadcastChange}))}},{key:"renderShareWith",value:function e(){var t=this.state.shareWith;var r=$.t("Share with:",{fallbackHash:"134bfa9822f411e84749498f9747ec887fd5d0fd",fallbackHashNs:"share-dialog"});var a="create-snippet-share-with-checkbox";return f.a.createElement(j["a"],{text:r,htmlFor:a,type:"inline"},f.a.createElement(E["a"],{id:a,"data-qa":"share_with",checked:t,onChange:this.handleShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.setSelectedChannel;var n=this.state.shareWith;return f.a.createElement(z["a"],{onChange:a,initialChannelId:r,isDisabled:!n,optionsListOffsetBottom:window.innerHeight})}},{key:"renderShareWithPicker",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.featureSonicSnippets,n=t.threadTs;if(n)return f.a.createElement(J["a"],{label:a?$.t("Sharing snippet in a thread"):"",channelId:r,threadTs:n});return f.a.createElement("div",{className:"p-snippet_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var r=Object(Y["a"])(n()({},this.props));if(!r)return null;return f.a.createElement("div",{className:"p-share_dialog__section"},f.a.createElement(O["d"],{type:"inline",level:"warning",className:"margin_bottom_100"},r))}},{key:"renderMessageInput",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.msgText;var n=this.state.shareWith;var i=$.t("Add a message, if you\u2019d like.",{fallbackHash:"23c9aa1fa55b5fbe8da1b3748ad70b595d6fadc5",fallbackHashNs:"share-dialog"});var s=y()("p-share_dialog__section","p-share_dialog__create_snippet_message_input",{"p-share_dialog__create_snippet_message_input--hide":!n});var o=Object(H["a"])(r)?r:void 0;return f.a.createElement("div",{className:s},f.a.createElement(K["a"],{text:a,channelId:o,onTextChange:this.handleMsgTextChange,enabled:n,placeholder:i,ariaLabel:i,onEnter:this.handleSubmit}),this.maybeRenderBroadcast())}},{key:"render",value:function e(){var t=this.state,r=t.fileName,a=t.fileType,n=t.fileContent;var i=this.props.featureSonicSnippets;if(!i)return null;var s="p-snippet_dialog";var o=$.t("Create snippet");var l=$.t("Create Snippet");return f.a.createElement(k["a"],{className:s,title:o,goButtonText:l,useSlackScrollbarWithPadding:true,shouldCloseOnGo:false,onGo:this.handleSubmit,onClose:this.handleCancel,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled(),getShouldShowSpeedBump:this.shouldShowSpeedBump,speedBumpBodyText:$.t("Are you sure you want to discard this snippet permanently?"),speedBumpCancelButtonText:$.t("No, keep it"),speedBumpContinueButtonText:$.t("Yes, discard this snippet"),showCancelButton:false},f.a.createElement(C["a"],{fileName:r,onFileNameChange:this.handleFileNameChange,fileType:a,onFileTypeChange:this.handleFileTypeChange,fileContent:n,onFileContentChange:this.handleFileContentChange,onKBSubmit:this.handleSubmit}),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(h["PureComponent"]);re.displayName="SnippetDialog";re.defaultProps=te;function ae(e,t){return n()({},Object(Q["b"])(e,t),{featureSonicSnippets:Object(w["isFeatureEnabled"])(e,"feature_sonic_snippets")})}function ne(e){return{uploadSnippet:function t(){return e(L.apply(void 0,arguments))},closeModal:function t(){return e(V["closeModal"].apply(void 0,arguments))},openModal:function t(){return e(V["openModal"].apply(void 0,arguments))},converMsgOpsToRichTextMessage:function t(){return e(B["a"].apply(void 0,arguments))}}}var ie=Object(g["connect"])(ae,ne)(re);var se=Object(Q["a"])(ie);var oe=t["default"]=se},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(2);var d=r(119);var p=r(27);var v=r(2139);var m=v["a"];var h=r(163);r.d(t,"a",function(){return f});r.d(t,"b",function(){return b});var f=function e(t,r){var a=document.getElementById("connected_workspaces_dialog_mount_point");if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m,n()({},r,{onClose:o})))),a)};var b=function e(t){l.a.unmountComponentAtNode(t)};var g={mountConnectedWorkspaces:f,unmountConnectedWorkspaces:b}},,,,,,,,,,,,,,,,,,function(e,t){var r="__lodash_hash_undefined__";function a(e){this.__data__.set(e,r);return this}e.exports=a},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){var a=r(2161),n=r(2162),i=r(2163);function s(e,t,r){return t===t?i(e,t,r):a(e,n,r)}e.exports=s},function(e,t){function r(e,t,r,a){var n=e.length,i=r+(a?1:-1);while(a?i--:++i<n)if(t(e[i],i,e))return i;return-1}e.exports=r},function(e,t){function r(e){return e!==e}e.exports=r},function(e,t){function r(e,t,r){var a=r-1,n=e.length;while(++a<n)if(e[a]===t)return a;return-1}e.exports=r},function(e,t,r){var a=r(2165);var n=Math.max;function i(e,t,r){t=n(void 0===t?e.length-1:t,0);return function(){var i=arguments,s=-1,o=n(i.length-t,0),l=Array(o);while(++s<o)l[s]=i[t+s];s=-1;var c=Array(t+1);while(++s<t)c[s]=i[s];c[t]=r(l);return a(e,this,c)}}e.exports=i},function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=r},function(e,t,r){var a=r(2167),n=r(2169);var i=n(a);e.exports=i},function(e,t,r){var a=r(2168),n=r(2115),i=r(1233);var s=n?function(e,t){return n(e,"toString",{configurable:true,enumerable:false,value:a(t),writable:true})}:i;e.exports=s},function(e,t){function r(e){return function(){return e}}e.exports=r},function(e,t){var r=800,a=16;var n=Date.now;function i(e){var t=0,i=0;return function(){var s=n(),o=a-(s-i);i=s;if(o>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=i},,,function(e,t,r){},function(e,t){function r(){}e.exports=r},function(e,t,r){var a=r(755),n=r(2175),i=r(682);var s="[object Object]";var o=Function.prototype,l=Object.prototype;var c=o.toString;var u=l.hasOwnProperty;var d=c.call(Object);function p(e){if(!i(e)||a(e)!=s)return false;var t=n(e);if(null===t)return true;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d}e.exports=p},function(e,t,r){var a=r(2122);var n=a(Object.getPrototypeOf,Object);e.exports=n},,,function(e,t,r){var a=r(2179),n=r(2202),i=r(1233),s=r(502),o=r(2212);function l(e){if("function"==typeof e)return e;if(null==e)return i;if("object"==typeof e)return s(e)?n(e[0],e[1]):a(e);return o(e)}e.exports=l},function(e,t,r){var a=r(2180),n=r(2201),i=r(1652);function s(e){var t=n(e);if(1==t.length&&t[0][2])return i(t[0][0],t[0][1]);return function(r){return r===e||a(r,e,t)}}e.exports=s},function(e,t,r){var a=r(1648),n=r(1649);var i=1,s=2;function o(e,t,r,o){var l=r.length,c=l,u=!o;if(null==e)return!c;e=Object(e);while(l--){var d=r[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return false}while(++l<c){d=r[l];var p=d[0],v=e[p],m=d[1];if(u&&d[2]){if(void 0===v&&!(p in e))return false}else{var h=new a;if(o)var f=o(v,m,p,e,t,h);if(!(void 0===f?n(m,v,i|s,o,h):f))return false}}return true}e.exports=o},function(e,t,r){var a=r(1235);function n(){this.__data__=new a;this.size=0}e.exports=n},function(e,t){function r(e){var t=this.__data__,r=t["delete"](e);this.size=t.size;return r}e.exports=r},function(e,t){function r(e){return this.__data__.get(e)}e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){var a=r(1235),n=r(1401),i=r(1400);var s=200;function o(e,t){var r=this.__data__;if(r instanceof a){var o=r.__data__;if(!n||o.length<s-1){o.push([e,t]);this.size=++r.size;return this}r=this.__data__=new i(o)}r.set(e,t);this.size=r.size;return this}e.exports=o},function(e,t,r){var a=r(1648),n=r(1650),i=r(2188),s=r(2191),o=r(2197),l=r(502),c=r(2118),u=r(2120);var d=1;var p="[object Arguments]",v="[object Array]",m="[object Object]";var h=Object.prototype;var f=h.hasOwnProperty;function b(e,t,r,h,b,g){var _=l(e),y=l(t),O=_?v:o(e),k=y?v:o(t);O=O==p?m:O;k=k==p?m:k;var E=O==m,j=k==m,C=O==k;if(C&&c(e)){if(!c(t))return false;_=true;E=false}if(C&&!E){g||(g=new a);return _||u(e)?n(e,t,r,h,b,g):i(e,t,O,r,h,b,g)}if(!(r&d)){var S=E&&f.call(e,"__wrapped__"),w=j&&f.call(t,"__wrapped__");if(S||w){var I=S?e.value():e,T=w?t.value():t;g||(g=new a);return b(I,T,r,h,g)}}if(!C)return false;g||(g=new a);return s(e,t,r,h,b,g)}e.exports=b},function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length;while(++r<a)if(t(e[r],r,e))return true;return false}e.exports=r},function(e,t,r){var a=r(681),n=r(2189),i=r(1639),s=r(1650),o=r(2190),l=r(1403);var c=1,u=2;var d="[object Boolean]",p="[object Date]",v="[object Error]",m="[object Map]",h="[object Number]",f="[object RegExp]",b="[object Set]",g="[object String]",_="[object Symbol]";var y="[object ArrayBuffer]",O="[object DataView]";var k=a?a.prototype:void 0,E=k?k.valueOf:void 0;function j(e,t,r,a,k,j,C){switch(r){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case y:if(e.byteLength!=t.byteLength||!j(new n(e),new n(t)))return false;return true;case d:case p:case h:return i(+e,+t);case v:return e.name==t.name&&e.message==t.message;case f:case g:return e==t+"";case m:var S=o;case b:var w=a&c;S||(S=l);if(e.size!=t.size&&!w)return false;var I=C.get(e);if(I)return I==t;a|=u;C.set(e,t);var T=s(S(e),S(t),a,k,j,C);C["delete"](e);return T;case _:if(E)return E.call(e)==E.call(t)}return false}e.exports=j},function(e,t,r){var a=r(524);var n=a.Uint8Array;e.exports=n},function(e,t){function r(e){var t=-1,r=Array(e.size);e.forEach(function(e,a){r[++t]=[a,e]});return r}e.exports=r},function(e,t,r){var a=r(2192);var n=1;var i=Object.prototype;var s=i.hasOwnProperty;function o(e,t,r,i,o,l){var c=r&n,u=a(e),d=u.length,p=a(t),v=p.length;if(d!=v&&!c)return false;var m=d;while(m--){var h=u[m];if(!(c?h in t:s.call(t,h)))return false}var f=l.get(e);if(f&&l.get(t))return f==t;var b=true;l.set(e,t);l.set(t,e);var g=c;while(++m<d){h=u[m];var _=e[h],y=t[h];if(i)var O=c?i(y,_,h,t,e,l):i(_,y,h,e,t,l);if(!(void 0===O?_===y||o(_,y,r,i,l):O)){b=false;break}g||(g="constructor"==h)}if(b&&!g){var k=e.constructor,E=t.constructor;k!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof k&&k instanceof k&&"function"==typeof E&&E instanceof E)&&(b=false)}l["delete"](e);l["delete"](t);return b}e.exports=o},function(e,t,r){var a=r(2193),n=r(2194),i=r(1640);function s(e){return a(e,i,n)}e.exports=s},function(e,t,r){var a=r(2113),n=r(502);function i(e,t,r){var i=t(e);return n(e)?i:a(i,r(e))}e.exports=i},function(e,t,r){var a=r(2195),n=r(2196);var i=Object.prototype;var s=i.propertyIsEnumerable;var o=Object.getOwnPropertySymbols;var l=o?function(e){if(null==e)return[];e=Object(e);return a(o(e),function(t){return s.call(e,t)})}:n;e.exports=l},function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length,n=0,i=[];while(++r<a){var s=e[r];t(s,r,e)&&(i[n++]=s)}return i}e.exports=r},function(e,t){function r(){return[]}e.exports=r},function(e,t,r){var a=r(2198),n=r(1401),i=r(2199),s=r(1647),o=r(2200),l=r(755),c=r(2116);var u="[object Map]",d="[object Object]",p="[object Promise]",v="[object Set]",m="[object WeakMap]";var h="[object DataView]";var f=c(a),b=c(n),g=c(i),_=c(s),y=c(o);var O=l;(a&&O(new a(new ArrayBuffer(1)))!=h||n&&O(new n)!=u||i&&O(i.resolve())!=p||s&&O(new s)!=v||o&&O(new o)!=m)&&(O=function(e){var t=l(e),r=t==d?e.constructor:void 0,a=r?c(r):"";if(a)switch(a){case f:return h;case b:return u;case g:return p;case _:return v;case y:return m}return t});e.exports=O},function(e,t,r){var a=r(1030),n=r(524);var i=a(n,"DataView");e.exports=i},function(e,t,r){var a=r(1030),n=r(524);var i=a(n,"Promise");e.exports=i},function(e,t,r){var a=r(1030),n=r(524);var i=a(n,"WeakMap");e.exports=i},function(e,t,r){var a=r(1651),n=r(1640);function i(e){var t=n(e),r=t.length;while(r--){var i=t[r],s=e[i];t[r]=[i,s,a(s)]}return t}e.exports=i},function(e,t,r){var a=r(1649),n=r(2203),i=r(2209),s=r(1404),o=r(1651),l=r(1652),c=r(1238);var u=1,d=2;function p(e,t){if(s(e)&&o(t))return l(c(e),t);return function(r){var s=n(r,e);return void 0===s&&s===t?i(r,e):a(t,s,u|d)}}e.exports=p},function(e,t,r){var a=r(1653);function n(e,t,r){var n=null==e?void 0:a(e,t);return void 0===n?r:n}e.exports=n},function(e,t,r){var a=r(2205);var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var i=/\\(\\)?/g;var s=a(function(e){var t=[];46===e.charCodeAt(0)&&t.push("");e.replace(n,function(e,r,a,n){t.push(a?n.replace(i,"$1"):r||e)});return t});e.exports=s},function(e,t,r){var a=r(2206);var n=500;function i(e){var t=a(e,function(e){r.size===n&&r.clear();return e});var r=t.cache;return t}e.exports=i},,function(e,t,r){var a=r(2208);function n(e){return null==e?"":a(e)}e.exports=n},function(e,t,r){var a=r(681),n=r(1644),i=r(502),s=r(1405);var o=1/0;var l=a?a.prototype:void 0,c=l?l.toString:void 0;function u(e){if("string"==typeof e)return e;if(i(e))return n(e,u)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=u},function(e,t,r){var a=r(2210),n=r(2211);function i(e,t){return null!=e&&n(e,t,a)}e.exports=i},function(e,t){function r(e,t){return null!=e&&t in Object(e)}e.exports=r},function(e,t,r){var a=r(1654),n=r(1715),i=r(502),s=r(2119),o=r(1717),l=r(1238);function c(e,t,r){t=a(t,e);var c=-1,u=t.length,d=false;while(++c<u){var p=l(t[c]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}if(d||++c!=u)return d;u=null==e?0:e.length;return!!u&&o(u)&&s(p,u)&&(i(e)||n(e))}e.exports=c},function(e,t,r){var a=r(2213),n=r(2214),i=r(1404),s=r(1238);function o(e){return i(e)?a(s(e)):n(e)}e.exports=o},function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}e.exports=r},function(e,t,r){var a=r(1653);function n(e){return function(t){return a(t,e)}}e.exports=n},,,,,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(2);var h=r(0);var f=r(912);var b=r(100);var g=r(35);var _=r(45);var y=r(1757);var O=r(354);var k=r(10);var E=r(31);var j=r(204);var C=r(187);var S=new k["b"]("help");var w={tickets:h["b"].shape({open:h["b"].number,closed:h["b"].number,unread:h["b"].number}),team:h["b"].object.isRequired,clogger:h["b"].object.isRequired,helpCenterToken:h["b"].string};var I={tickets:{open:0,closed:0,unread:0},helpCenterToken:h["b"].string};var T="HELP_MODAL_ACTION";var A="/help";var N=function e(t,r,a){var n={action:"view_request_history",trigger:"click_view_request_history"};t.track(T,n);var i=Object(E["getTeamUrl"])(a,Object(j["a"])(A,r));window.open(i)};var P=function e(t,r,a){var n={action:"view_new_replies",trigger:"click_view_new_replies"};t.track(T,n);var i=Object(E["getTeamUrl"])(a,Object(j["a"])(A,r));window.open(i)};var R=function e(t,r,a){var n={action:"view_open_requests",trigger:"click_view_open_requests"};t.track(T,n);var i=Object(E["getTeamUrl"])(a,Object(j["a"])(A,r));window.open(i)};var M=function e(t,r,a,n){if(t.closed>0&&0===t.unread&&0===t.open)return p.a.createElement("div",null,p.a.createElement("span",null,S.t("No pending requests.")),p.a.createElement(C["a"],{className:"p-help_modal__requests",onClick:function e(){return N(r,a,n)},"data-qa":"help_modal_requests_closed"},p.a.createElement("span",{className:"p-help_modal__requests__message bold"},S.t("View your help request history"),".")));return null};var x=function e(t,r,a,n){if(t>0){var i=t>1?S.t("You have new replies to your help requests."):S.t("You have a new reply to your help request.");return p.a.createElement(C["a"],{className:"p-help_modal__requests",onClick:function e(){return P(r,a,n)},"data-qa":"help_modal_requests_unread"},p.a.createElement("span",{className:"p-help_modal__requests_badge unread"},t),p.a.createElement("span",{className:"p-help_modal__requests__message bold"},i))}return null};var D=function e(t,r,a,n){if(t>0){var i=t>1?S.t("You have open help requests."):S.t("You have an open help request.");return p.a.createElement(C["a"],{className:"p-help_modal__requests",onClick:function e(){return R(r,a,n)},"data-qa":"help_modal_requests_read"},p.a.createElement("span",{className:"p-help_modal__requests_badge read"},t),p.a.createElement("span",{className:"p-help_modal__requests__message read bold"},i))}return null};var F=function e(t){return p.a.createElement("div",{className:"display_flex flex_direction_column"},M(t.tickets,t.clogger,t.helpCenterToken,t.team),p.a.createElement("div",{className:t.tickets.unread>0?"padding_top_50":""},x(t.tickets.unread,t.clogger,t.helpCenterToken,t.team)),p.a.createElement("div",{className:t.tickets.closed>0||t.tickets.unread>0?"padding_top_50":""},D(t.tickets.open,t.clogger,t.helpCenterToken,t.team)))};F.displayName="TicketsStatus";F.defaultProps=I;var L=F;var B=r(574);var U=r(57);var q=r(22);var G=r(2227);var H=r(3126);var W=new k["b"]("help");var V={query:h["b"].string,helpCenterToken:h["b"].string,team:h["b"].object.isRequired,tickets:h["b"].shape({open:h["b"].number,closed:h["b"].number,unread:h["b"].number}),onClose:h["b"].func,showKeyboardShortcuts:h["b"].func,trigger:h["b"].string.isRequired,clogger:h["b"].object.isRequired};var K={query:"",helpCenterToken:"",tickets:{closed:0,read:0,unread:0},onClose:m["noop"],showKeyboardShortcuts:m["noop"]};var z=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isModalOpen:true,query:e.query};r.zdLocale=Object(U["a"])();Object(y["a"])(r,["onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","onOpenSearchLink","onQueryChange"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.trigger,a=t.clogger;a.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:r})}},{key:"onClickBrowseLink",value:function e(){var t=this.state.query;var r=this.props.clogger;var a=Object(j["b"])({zdLocale:this.zdLocale,query:t,sidTrackingToken:this.props.helpCenterToken});t&&r.track("HELP_MODAL_SEARCH",{search_terms:t});r.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"});window.open(a)}},{key:"onClickContactUsButton",value:function e(){var t="/help/requests/new";var r=this.props,a=r.clogger,n=r.team;var i="HELP_MODAL_ACTION";var s={action:"submit_new_request",trigger:"click_submit_new_request"};a.track(i,s);var o=Object(E["getTeamUrl"])(n,Object(j["a"])(t,this.props.helpCenterToken));window.open(o)}},{key:"onClickShortcutsButton",value:function e(){var t=this.props.clogger;var r="HELP_MODAL_ACTION";var a={action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"};this.setState(function(){return{isModalOpen:false}});t.track(r,a);this.props.showKeyboardShortcuts()}},{key:"onOpenSearchLink",value:function e(t){var r=t.url,a=t.query;var n=this.props.clogger;a&&n.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale});n.track("HELP_MODAL_ZD_HIT",{zd_article_url:r})}},{key:"onQueryChange",value:function e(t){this.setState(function(){return{query:t}})}},{key:"render",value:function e(){var t=this.state.isModalOpen;var r=this.props,a=r.tickets,n=r.clogger,i=r.onClose,s=r.team,o=r.query;return p.a.createElement(O["a"],{isOpen:t,showCancelButton:false,showGoButton:false,onCancel:i,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},p.a.createElement(B["b"],{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},p.a.createElement(q["b"],{type:"keyboard",className:"small_right_margin"}),p.a.createElement("strong",null,W.t("Keyboard shortcuts"))),p.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200"},p.a.createElement("h1",{className:"p-help_modal_title"},W.t("How can we help?")),p.a.createElement(C["a"],{className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},p.a.createElement("span",{className:"p-help_modal__browse__text"},W.t("Browse all answers")),p.a.createElement(q["b"],{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),p.a.createElement(G["a"],{query:o,onOpenLink:this.onOpenSearchLink,autoFocus:true,onQueryChange:this.onQueryChange}),p.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},p.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},p.a.createElement(L,{tickets:a,team:s,clogger:n,helpCenterToken:this.props.helpCenterToken})),p.a.createElement("div",{className:"p-help_modal__footer_contact"},p.a.createElement("div",null,p.a.createElement("span",{className:"p-help_modal__contact_us__message"},W.t("Can\u2019t find what you need, or have some feedback?")),p.a.createElement(B["b"],{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},W.t("Contact Us"))))))}}]);return t}(d["Component"]);z.displayName="HelpModal";z.defaultProps=K;var Q=z;var Y={query:h["b"].string,helpCenterTrackingToken:h["b"].string,team:h["b"].object.isRequired,showKeyboardShortcuts:h["b"].func,trigger:h["b"].string.isRequired,tickets:h["b"].shape({open:h["b"].number,closed:h["b"].number,unread:h["b"].number}).isRequired,clogger:h["b"].object.isRequired,onClose:h["b"].func};var J={query:"",helpCenterTrackingToken:"",showKeyboardShortcuts:m["noop"],onClose:m["noop"]};var X=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.trigger,a=t.clogger,n=t.onClose,i=t.team,s=t.tickets,o=t.query;return p.a.createElement(Q,{query:o,team:i,helpCenterToken:this.props.helpCenterTrackingToken,tickets:s,onClose:n,showKeyboardShortcuts:this.props.showKeyboardShortcuts,trigger:r,clogger:a})}}]);return t}(d["Component"]);X.displayName="HelpModalContainer";X.defaultProps=J;var Z=function e(t){return{clogger:Object(_["a"])({state:t}),helpCenterTrackingToken:Object(f["getHelpCenterTrackingToken"])(t),team:Object(g["d"])(t),tickets:Object(f["getTicketCounts"])(t)}};var $={showKeyboardShortcuts:b["h"]};var ee=Object(v["connect"])(Z,$)(X);var te=t["a"]=ee},,function(e,t,r){"use strict";r.d(t,"e",function(){return b});r.d(t,"d",function(){return g});r.d(t,"c",function(){return _});r.d(t,"b",function(){return y});var a=r(37);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(2);var u=r.n(c);var d=r(0);var p=r(18);var v=r(36);var m=r(87);var h;var f=function e(t,r,a){var n=t.actions,i=t.channelIdsByActionId,o=t.actionIdsByChannelId;var u=a.reduce(function(e,t){return l()({},e,s()({},t,(e[t]||[]).filter(function(e){return e!==r})))},i);var d=l()({},o,s()({},r,(o[r]||[]).filter(function(e){return!a.includes(e)})));var p=a.filter(function(e){return 0===(u[e]||[]).length});return l()({},t,{actions:Object(c["omit"])(n,p),channelIdsByActionId:Object(c["omit"])(u,p),actionIdsByChannelId:d})};var b=Object(p["b"])("Update or insert one or more app action associated with a channelId");b.propTypes={channelId:d["b"].string.isRequired,actions:d["b"].arrayOf(m["a"].maybeUnknown(m["a"].AppAction)).isRequired};var g=Object(p["b"])("Update the app actions metadata associated with a given channelId");g.propTypes={channelId:d["b"].string.isRequired,count:d["b"].number,isLoaded:d["b"].bool,fetchFailed:d["b"].bool};var _=Object(p["b"])("Remove specific app actions by ID");_.propTypes={actionIds:d["b"].arrayOf(d["b"].string).isRequired,channelId:d["b"].string.isRequired};var y=Object(p["b"])("Remove all app actions tied to a given channelId");y.propTypes={channelId:d["b"].string.isRequired};var O={actions:d["b"].objectOf(m["a"].maybeUnknown(m["a"].AppAction)).isRequired,channelIdsByActionId:d["b"].objectOf(d["b"].arrayOf(d["b"].string)).isRequired,actionIdsByChannelId:d["b"].objectOf(d["b"].arrayOf(d["b"].string)).isRequired,actionMetaByChannelId:d["b"].objectOf(d["b"].shape({count:d["b"].number,isLoaded:d["b"].bool.isRequired,fetchFailed:d["b"].bool.isRequired})).isRequired};var k={actions:{},channelIdsByActionId:{},actionIdsByChannelId:{},actionMetaByChannelId:{}};var E=Object(v["b"])((h={},s()(h,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.actions;var n=a.reduce(function(e,t){return l()({},e,s()({},t.id,l()({},t,{app:l()({},Object(c["get"])(e[t.id],"app",{}),t.app)})))},e.actions);var i=a.reduce(function(e,t){return l()({},e,s()({},t.id,Object(c["uniq"])((e[t.id]||[]).concat(r))))},e.channelIdsByActionId);var o=a.map(function(e){return e.id});var u=Object(c["uniq"])((e.actionIdsByChannelId[r]||[]).concat(o));return l()({},e,{actions:n,channelIdsByActionId:i,actionIdsByChannelId:l()({},e.actionIdsByChannelId,s()({},r,u))})}),s()(h,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=t.channelId,a=n()(t,["channelId"]);var i=e.actionMetaByChannelId[r]||{isLoaded:false,fetchFailed:false};return l()({},e,{actionMetaByChannelId:l()({},e.actionMetaByChannelId,s()({},r,l()({},i,a)))})}),s()(h,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.actionIds;return f(e,r,a)}),s()(h,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId;var a=e.actionIdsByChannelId[r]||[];return f(e,r,a)}),h),k,{persistenceEnabled:true});E.propTypes=O;t["a"]=E},,,function(e,t,r){"use strict";var a=r(37);var n=r.n(a);var i=r(5);var s=r.n(i);var o=r(3);var l=r.n(o);var c=r(26);var u=r.n(c);var d=r(6);var p=r.n(d);var v=r(8);var m=r.n(v);var h=r(7);var f=r.n(h);var b=r(9);var g=r.n(b);var _=r(0);var y=r(1);var O=r.n(y);var k=r(88);var E=r(16);var j=r.n(E);var C=r(13);var S=r(2);var w=r(1757);var I=r(2374);var T=r(704);var A=r(35);var N=r(24);var P=r(17);var R=r(150);var M=r(48);var x=r(4);var D=r(12);var F=r(34);var L=r(1279);var B=r(132);var U=r(10);var q=r(45);var G=r(258);var H=r(230);var W=r(38);var V=r(435);var K=r(245);var z=r(22);var Q=r(157);var Y=r(701);var J=r(51);var X=r(96);var Z=r(444);var $=r(354);var ee=r(58);var te=r.n(ee);var re=r(1186);var ae=r(1239);var ne=r(135);var ie=r(54);var se=r(179);var oe=r(687);var le=new U["b"]("enterprise_workspaces");var ce={closeModal:_["b"].func,requestCreateWorkspaceApi:_["b"].func};var ue={closeModal:S["noop"],requestCreateWorkspaceApi:S["noop"]};var de=255;var pe=512;var ve={required:"required",nameTaken:"nameTaken",maxLength:"maxLength"};function me(e){var t=e.closeModal,r=e.requestCreateWorkspaceApi;var a=Object(y["useState"])(),n=te()(a,2),i=n[0],s=n[1];var o=Object(y["useState"])(),l=te()(o,2),c=l[0],u=l[1];var d=Object(y["useState"])(false),p=te()(d,2),v=p[0],m=p[1];var h=Object(y["useState"])(false),f=te()(h,2),b=f[0],g=f[1];var _=Object(y["useState"])(ve.required),k=te()(_,2),E=k[0],j=k[1];var C=Object(y["useState"])(ve.required),w=te()(C,2),I=w[0],T=w[1];function A(){g(false);m(true);r({workspaceName:i,workspaceMessage:c,reason:"workspace_directory_request_new_workspace"}).then(function(){return t()}).catch(function(e){var t=e.data;m(false);"name_taken"===t.error?j(ve.nameTaken):g(true)})}function N(e,t){var r=t.maxLength;var a=Object(S["trim"])(e);if(!a)return ve.required;if(r&&a.length>r)return ve.maxLength;return}function P(e){g(false);s(e);var t=N(e,{maxLength:de});j(t)}function R(e){g(false);u(e);var t=N(e,{maxLength:pe});T(t)}return O.a.createElement(re["a"],{labelledby:"request_workspace__title-bar",centered:true,closeModal:t},O.a.createElement(ae["g"],null,O.a.createElement(ae["i"],{id:"request_workspace__title-bar",title:le.t("Request creation of a new workspace")})),O.a.createElement(ae["c"],null,O.a.createElement(ae["d"],null,b&&O.a.createElement(ne["a"],{level:"error",className:"margin_bottom_100"},le.t("Sorry! Something went wrong. Please try again.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087",fallbackHashNs:"edit_profile"})),O.a.createElement("p",null,le.t("To create a new workspace, you\u2019ll need to send a request to an organization administrator. Before sending this request, be sure to check the Find Workspaces list to see whether a similar workspace already exists.")),O.a.createElement(ie["a"],{htmlFor:"p-request-workspace__name_input",id:"p-request-workspace__name_label",text:le.t("Workspace Name")},O.a.createElement(se["a"],{ariaDescribedby:"p-request-workspace__name_label",id:"p-request-workspace__name_input",name:"workspace_name",size:"large",useInlineAlert:true,onChange:P,errorText:E===ve.nameTaken?le.t("That workspace name is already taken.",{fallbackHash:"26cf402314e8bf926ba97077c467adcadb1c715e",fallbackHashNs:"enterprise_dashboard"}):void 0,value:i,isRequired:true,minCharacterLimit:1,maxCharacterLimit:de})),O.a.createElement(ie["a"],{htmlFor:"p-request-workspace__message_input",id:"p-request-workspace__message_label",text:le.t("Message to administrators")},O.a.createElement(oe["a"],{ariaDescribedby:"p-request-workspace__message_label",id:"p-request-workspace__message_input",name:"workspace_message",size:"large",useInlineAlert:true,onChange:R,value:c,isRequired:true,minCharacterLimit:1,maxCharacterLimit:pe})))),O.a.createElement(ae["e"],null,O.a.createElement(ae["f"],null,O.a.createElement(ae["b"],{"data-qa":"request_workspace_dialog_cancel_button",type:"outline"},le.t("Cancel")),O.a.createElement(ae["b"],{"data-qa":"request_workspace_dialog_go_button",onClick:A,loading:v,disabled:!!(I||E||b)},le.t("Send Request")))))}me.displayName="RequestWorkspaceDialog";me.defaultProps=ue;var he={closeModal:function e(){return M["closeModal"].apply(void 0,arguments)},requestCreateWorkspaceApi:function e(){return G["p"].apply(void 0,arguments)}};var fe=Object(C["connect"])(null,he)(me);var be=fe;var ge=r(1201);var _e=r(1487);var ye=r(84);var Oe=r(1489);var ke=r(28);var Ee=r(202);var je=r(3096);var Ce=new U["b"]("workspace_directory");var Se={team:_["b"].shape({admins:_["b"].arrayOf(_["b"].shape({real_name:_["b"].string})),can_leave:_["b"].bool,cannot_leave_reasons:_["b"].array,created:_["b"].number,deleted:_["b"].bool,description:_["b"].string,discoverable:_["b"].string,domain:_["b"].string,enterprise_id:_["b"].string,date_requested_join:_["b"].oneOfType([_["b"].string,_["b"].number]),icon:_["b"].object,id:_["b"].string,is_member:_["b"].bool,joined_date:_["b"].number,name:_["b"].string,user_counts:_["b"].object}).isRequired,callLeaveWorkspace:_["b"].func,onClose:_["b"].func,onActionReject:_["b"].func,onActionResolve:_["b"].func,fetchEnterpriseTeamById:_["b"].func,onLeaveReject:_["b"].func,onLeaveResolve:_["b"].func,onDone:_["b"].func,fetchTeam:_["b"].func,isGuest:_["b"].bool,displayDirectoryInModal:_["b"].bool,channelRedirect:_["b"].string,postLaunchAction:_["b"].string,userIdFromURL:_["b"].string};var we={callLeaveWorkspace:S["noop"],onClose:S["noop"],onActionResolve:S["noop"],onActionReject:S["noop"],fetchEnterpriseTeamById:S["noop"],onLeaveReject:S["noop"],onLeaveResolve:S["noop"],onDone:S["noop"],fetchTeam:S["noop"],isGuest:false,displayDirectoryInModal:false,channelRedirect:null,postLaunchAction:null,userIdFromURL:null};var Ie=function(e){g()(t,e);function t(e){p()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={team:{},loading:false};r.onWorkspaceLeave=r.onWorkspaceLeave.bind(r);r.setLoading=r.setLoading.bind(r);return r}f()(t,[{key:"componentDidMount",value:function e(){var t=this.props.team;this.setWorkspace(t);this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function e(t){var r=this.props,a=r.team,n=r.onLeaveReject,i=r.onLeaveResolve,s=r.onDone;t.preventDefault();return this.props.callLeaveWorkspace({teamId:a.id}).then(function(){return i({workspace:l()({},a,{is_member:false})})}).then(function(){return s()}).catch(function(e){return n({node:O.a.createElement("span",null,Ce.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"setWorkspace",value:function e(t,r){this.setState(function(){return{team:t}},r)}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getTitleAria",value:function e(){var t=this.state.team.name,r=void 0===t?"":t;if(!r)return"Workspace Name";return r}},{key:"canLeaveWorkspace",value:function e(){var t=this.state.team,r=t.is_member,a=t.can_leave;var n=this.props.isGuest;return r&&a&&!n}},{key:"fetchWorkspaceInfo",value:function e(){var t=this;var r=this.props.team.id;this.setLoading(true);return this.props.fetchEnterpriseTeamById({teamId:r,additionalOptions:{include_admins:true}}).then(function(e){t.setWorkspace(e,function(){return t.setLoading(false)})})}},{key:"listifyAdminRealNames",value:function e(t){var r=Object(S["map"])(t,function(e){return Object(P["getMemberRealName"])(e)});return Object(U["g"])(r,{noEscape:true})}},{key:"renderDialogHeaderCaption",value:function e(t){var r=this.state.loading;if(r)return null;if(!t)return null;return O.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},O.a.createElement(z["b"],{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),t)}},{key:"renderButton",value:function e(){var t=this.props,r=t.onActionReject,a=t.onActionResolve;var n=this.state,i=n.team,s=n.loading;if(s)return null;var o=Object(T["a"])()||Object(W["a"])()&&Object(V["b"])();var l=!o;return O.a.createElement(Oe["a"],{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:true,onActionReject:r,onActionResolve:a,anchorPage:"workspace_directory",size:"medium",doLaunchInNewTab:l,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:true})}},{key:"renderDialogHeader",value:function e(t){var r=this.state.team;var a=r.name,n=void 0===a?"":a,i=r.domain,s=void 0===i?"":i;var o=j()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(Ee["c"])()});return O.a.createElement("div",{className:o},O.a.createElement(Z["a"],{entityType:"workspace",dimension:100,entityData:r,featureReactMessages:true,featureReactMemberProfileCard:true}),O.a.createElement("div",{className:"p-workspace_directory_dialog__name"},Ce.t("{name}",{name:Object(U["o"])(n)})),O.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},Ce.t("{domain}.slack.com",{domain:s})),this.renderDialogHeaderCaption(t),this.renderButton())}},{key:"renderInfiniteSpinner",value:function e(){return O.a.createElement("div",{className:"overflow_hidden margin_100"},O.a.createElement(X["a"],{size:"jumbo",className:"inline_block full_width"}))}},{key:"renderDialogBody",value:function e(){if(this.state.loading)return this.renderInfiniteSpinner();var t=this.state.team,r=t.description,a=t.admins,n=t.user_counts;var i=[];r&&i.push({heading:Ce.t("About"),text:r,key:"dialog-description"});i.push({heading:Ce.t("Active members"),text:Ce.t("{activeMembers}",{activeMembers:Object(U["l"])(Object(S["get"])(n,"active_members",0))}),key:"dialog-active-members"},{heading:Ce.t("Workspace admins"),text:this.listifyAdminRealNames(a),key:"dialog-admins"});var s=function e(t){return O.a.createElement("div",{key:t.key},O.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),O.a.createElement("p",null,t.text))};return O.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return s(e)}))}},{key:"renderDialogFooter",value:function e(){return O.a.createElement(ke["c"],{className:"p-workspace_directory_dialog__leave",onClick:this.onWorkspaceLeave},Ce.t("Leave this workspace"))}},{key:"renderDialogOnMobile",value:function e(t){var r=this.canLeaveWorkspace();return O.a.createElement($["a"],{showCancelButton:false,showCloseButton:false,showGoButton:false,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(t),O.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),r&&this.renderDialogFooter()))}},{key:"render",value:function e(){var t=this.state.team;var r=Object(Ee["f"])(t,{context:"dialog"});if(Object(Ee["c"])())return this.renderDialogOnMobile(r);var a=this.props.displayDirectoryInModal;var n=j()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!a});var i={contentLabel:r,className:n,showCloseButton:true,showCancelButton:false,showGoButton:false,showHeader:true,title:this.renderDialogHeader(r),titleAria:this.getTitleAria(),useSlackScrollbar:false,showFooter:false,shouldCloseOnOverlayClick:true,invertCloseButton:true};this.canLeaveWorkspace()&&(i=l()({},i,{showFooter:true,footerText:this.renderDialogFooter()}));return O.a.createElement(ye["a"],i,this.renderDialogBody())}}]);return t}(y["Component"]);Ie.displayName="WorkspaceDirectoryDialog";Ie.defaultProps=we;var Te={callLeaveWorkspace:G["d"],fetchEnterpriseTeamById:G["k"]};var Ae=Object(C["connect"])(null,Te)(Ie);var Ne=Ae;var Pe=r(1171);var Re=r(778);var Me=r(3098);var xe={workspaces:_["b"].array.isRequired,scrollElement:_["b"].any,onScroll:_["b"].func,renderWorkspaceCard:_["b"].func,topOffset:_["b"].number};var De={scrollElement:window,onScroll:S["noop"],renderWorkspaceCard:S["noop"],topOffset:0};var Fe=function(e){g()(t,e);f()(t,null,[{key:"getUpdatedRowIndex",value:function e(t){var r=t.currentRow,a=void 0===r?0:r,n=t.prevColumns,i=void 0===n?0:n,s=t.updatedColumns,o=void 0===s?0:s;if(!a)return 0;if(i===o)return a;var l=a*i;return Math.floor(l/o)}}]);function t(e){p()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(r,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]);r.state={columns:3};r.list=null;r.keys=[];r.rowsByIndex=[];r.currentRow=0;return r}f()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.calculateColumns()}},{key:"componentDidUpdate",value:function e(r,a){if(this.state.columns!==a.columns){var n=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:a.columns,updatedColumns:this.state.columns});this.currentRow=n;var i=this.getKeyForRow(n);this.keys.length&&this.list.scrollToKey(i)}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function e(t){return this.props.onScroll(t)}},{key:"onResize",value:function e(){var t=this.list.getVisibleRange(),r=t.start;this.currentRow=r||0;this.calculateColumns()}},{key:"getListKeys",value:function e(){return this.keys}},{key:"getContentHeight",value:function e(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function e(t){return this.keys[t]}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setColumns",value:function e(t){this.setState(function(){return{columns:t}})}},{key:"getWorkspacesByRowIndex",value:function e(t){var r=this.state.columns;var a=this.props.workspaces;var n=this.rowsByIndex[t];var i=Math.min(n+r,a.length);return Object(S["range"])(n,i)}},{key:"calculateColumns",value:function e(){var t=window.innerWidth;var r=3;r=Object(Ee["c"])(t)?1:Object(Ee["d"])(t)?2:3;this.state.columns!==r&&this.setColumns(r)}},{key:"renderCell",value:function e(t){var r=this.props,a=r.workspaces,n=r.renderWorkspaceCard;var i=a[t];if(!i)return null;return O.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+t},n(i))}},{key:"renderRow",value:function e(t){var r=this;var a=this.getWorkspacesByRowIndex(t);var n=j()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return O.a.createElement("div",{className:n},a.map(function(e){return r.renderCell(e)}))}},{key:"render",value:function e(){var t=this.props,r=t.topOffset,a=t.scrollElement,i=n()(t,["topOffset","scrollElement"]);this.rowsByIndex=Object(S["range"])(0,this.props.workspaces.length,this.state.columns);this.keys=this.rowsByIndex.map(function(e){return e.toString()});return O.a.createElement(Re["a"],l()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},i))}}]);return t}(y["PureComponent"]);Fe.displayName="WorkspaceGridList";Fe.defaultProps=De;var Le=Fe;var Be=Le;var Ue=r(536);var qe=r(66);var Ge=r(1363);var He=r(3100);var We=new U["b"]("workspace_directory");var Ve={enterprise:_["b"].shape({icon:_["b"].object,id:_["b"].string,name:_["b"].string}).isRequired,user:_["b"].shape({id:_["b"].string,is_admin:_["b"].bool,is_owner:_["b"].bool,is_primary_owner:_["b"].bool,profile:_["b"].object}).isRequired,displayManageOrgButton:_["b"].bool,displaySearchBar:_["b"].bool,isMobileView:_["b"].bool,signoutUrl:_["b"].string.isRequired,prefCompliantMemberName:_["b"].string,organizationUrl:_["b"].string,selectedSearchOption:_["b"].object,onOptionSelected:_["b"].func,onClearHeaderInput:_["b"].func};var Ke={isMobileView:false,displayManageOrgButton:false,displaySearchBar:false,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:S["noop"],onClearHeaderInput:S["noop"]};var ze=function(e){g()(t,e);function t(e){p()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(r,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]);return r}f()(t,[{key:"onSelectOption",value:function e(t){this.props.onOptionSelected(t)}},{key:"onMenuItemSelected",value:function e(t){var r=this.props.signoutUrl;var a=window.location.origin+"/account/settings";switch(t){case"settings":window.open(a,"_self");break;case"signout":window.open(r,"_self");break;default:}return null}},{key:"maybeRenderManageOrganizationButton",value:function e(){if(!this.props.displayManageOrgButton)return null;var t=We.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return O.a.createElement(ke["d"],{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank"},t)}},{key:"maybeRenderSearchBar",value:function e(){var t=this.props.selectedSearchOption;if(!this.props.displaySearchBar||this.props.isMobileView)return null;return O.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},O.a.createElement(Pe["a"],{prepopulatedOption:t,featureZeroWorkspaceOnboarding:true,membersOnly:false,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderUserSettings",value:function e(){return O.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"renderUserMenu",value:function e(t){var r=this;var a=this.props,n=a.prefCompliantMemberName,i=a.enterprise,s=a.signoutUrl;var o=function e(){return O.a.createElement(qe["b"],{key:"workspace_directory_user_menu_name",label:O.a.createElement("span",{className:"black"},n),description:We.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:function e(){return r.onMenuItemSelected("settings")},className:"no_underline"})};var c=function e(){return O.a.createElement(qe["b"],{key:"workspace_directory_user_menu_sign_out",label:We.t("Sign out of {orgName}",{orgName:Object(U["o"])(i.name)}),href:s,onSelected:function e(){return r.onMenuItemSelected("signout")},className:"no_underline",danger:true})};return O.a.createElement(qe["f"],l()({},t,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),o(),O.a.createElement(qe["d"],null),c())}},{key:"renderAvatar",value:function e(){var t=this.props.user;return O.a.createElement(qe["e"],{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},O.a.createElement(ke["c"],{"aria-haspopup":true,className:"p-workspace_directory_header__user_icon"},O.a.createElement(Z["a"],{entityType:"member",dimension:36,entityData:t,customClasses:"flex_none cursor_pointer",featureReactMessages:true})))}},{key:"render",value:function e(){var t=this.props,r=t.enterprise,a=t.isMobileView,n=t.organizationUrl;var i=a?We.t("Directory"):We.t("Workspace Directory");return O.a.createElement(Ge["a"],{"data-qa":"ws_directory_header",title:i,team:r,isEnterprise:true,logoAriaLabel:"Slack",logoLink:n,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]);return t}(y["Component"]);ze.displayName="WorkspaceDirectoryHeader";ze.defaultProps=Ke;var Qe=function e(t,r){var a=r.user,n=r.enterprise,i=void 0===n?{}:n;return{signoutUrl:Object(x["getFromBootData"])(t,"signout_url"),prefCompliantMemberName:Object(P["getPrefCompliantMemberName"])(t,a),organizationUrl:Object(Ue["a"])(t,i.domain)}};var Ye=Object(C["connect"])(Qe)(ze);var Je=Ye;var Xe=r(3102);var Ze={title:_["b"].node,description:_["b"].node,showCloseButton:_["b"].bool,onClose:_["b"].func,className:_["b"].string,isHidden:_["b"].bool};var $e={title:"",description:"",showCloseButton:false,onClose:S["noop"],className:"",isHidden:true};var et=function(e){g()(t,e);function t(e){p()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClose=r.onClose.bind(r);r.onKeyPress=r.onKeyPress.bind(r);return r}f()(t,[{key:"onClose",value:function e(t){this.props.onClose(t)}},{key:"onKeyPress",value:function e(t){t.preventDefault();if(13===t.which)return this.props.onClose(t);return null}},{key:"renderCloseButton",value:function e(){var t=this.props.isHidden;return O.a.createElement(ke["c"],{tabIndex:t?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},O.a.createElement(z["b"],{type:"times"}))}},{key:"renderBannerText",value:function e(){var t=this.props,r=t.title,a=t.description;return O.a.createElement("div",{className:"p-workspace_directory_banner__text"},O.a.createElement("div",{className:"p-workspace_directory_banner__title"},r),O.a.createElement("span",{className:"p-workspace_directory_banner__description"},a))}},{key:"render",value:function e(){var t=this.props,r=t.showCloseButton,a=t.className;var n=j()("p-workspace_directory_banner",a);return O.a.createElement("div",{className:n},this.renderBannerText(),r&&this.renderCloseButton())}}]);return t}(y["PureComponent"]);et.displayName="WorkspaceDirectoryBanner";et.defaultProps=$e;var tt=et;var rt=tt;var at=r(2398);var nt=new U["b"]("workspace_directory");var it={enterprise:_["b"].shape({id:_["b"].string,name:_["b"].string,domain:_["b"].string,icon:_["b"].object,locale:_["b"].string}).isRequired,user:_["b"].shape({id:_["b"].string,name:_["b"].string,is_admin:_["b"].bool,is_owner:_["b"].bool,profile:_["b"].object}),fetchDirectoryWorkspaces:_["b"].func.isRequired,fetchEnterpriseTeamById:_["b"].func.isRequired,enqueueToast:_["b"].func,fetchRawMembersFromAPI:_["b"].func.isRequired,openModal:_["b"].func,closeModal:_["b"].func,allowWorkspaceRequest:_["b"].bool,showRequestDialog:_["b"].func,launchTeamId:_["b"].string,displayDirectoryInModal:_["b"].bool,onClose:_["b"].func,hasSeenOnboardingBanner:_["b"].bool,queryString:_["b"].object,setUserPrefByApi:_["b"].func,clogger:_["b"].object.isRequired,featureModernRequestWorkspaceDialog:_["b"].bool};var st={user:{},enqueueToast:S["noop"],openModal:S["noop"],closeModal:S["noop"],allowWorkspaceRequest:false,showRequestDialog:S["noop"],launchTeamId:null,displayDirectoryInModal:true,onClose:S["noop"],hasSeenOnboardingBanner:false,queryString:null,setUserPrefByApi:S["noop"],featureModernRequestWorkspaceDialog:false};var ot=300;var lt=Object(D["b"])();var ct=function(e){g()(t,e);f()(t,null,[{key:"sortListByWorkspaceName",value:function e(t){return Object(S["sortBy"])(t,function(e){return e.name})}}]);function t(e){p()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isMobileView:false,hasScrolledPastHeaderPane:false,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:true,viewingHiddenWorkspace:false};r.dialog=null;r.headerPaneHeight=null;r.clientHeight=null;r.page=null;r.pageSearch=null;r.listRefs={allWorkspaces:null,yourWorkspaces:null};r.windowScroller=null;r.onboardingBannerHeight=0;r.trackingCode="";Object(w["a"])(r,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]);return r}f()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(Ee["c"])());window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setLoadingWorkspaces("allWorkspaces",true);this.setLoadingWorkspaces("yourWorkspaces",true);if(this.props.launchTeamId){this.trackingCode="workspace_url";this.fetchTeam(this.props.launchTeamId)}var t=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(t);Object(Ee["m"])({trackingCode:this.trackingCode,clogger:this.props.clogger});var r=this.props.queryString&&Object(S["get"])(this.props.queryString,"user",null);r&&this.fetchSingleMemberToPrepopulate(r)}},{key:"componentDidUpdate",value:function e(t,r){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var a=this.getListHeight("yourWorkspaces");a!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:a});this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(k["findDOMNode"])(this.onboardingBanner).clientHeight);!r.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition();r.selectedOption!==this.state.selectedOption&&this.fetchSearchResults();this.maybeFetchNextPage(r)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;this.setIsMobileView(Object(Ee["c"])());var t=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:t})}},{key:"onScroll",value:function e(t){var r=t.currentTarget.scrollTop;var a=r>=this.headerPaneHeight;a&&this.pageSearch.getWrappedInstance().blur();a!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(a)}},{key:"onWindowScrollerScroll",value:function e(t){var r=t.scrollTop;this.doInfiniteScrollHandler({scrollTop:r})}},{key:"onFullscreenModalClose",value:function e(){this.dialog&&this.dialog.close();this.props.onClose&&this.props.onClose()}},{key:"onSearchAgainButtonClick",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onOnboardingBannerDismiss",value:function e(){this.setHideOnboardingBanner(true);this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:true}).catch(function(e){return lt.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onActionReject",value:function e(t){var r=t.node,a=t.err;r&&this.setToastText(r);lt.error("Error with Workspace Action in WorkspaceDirectory - ",a)}},{key:"onActionResolve",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.node,a=t.workspace;if(a)if(a.member){this.onWorkspaceJoin({workspace:a});if(this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else a.date_requested_join&&this.onWorkspaceRequested({workspace:a});r&&this.setToastText(r);return this.closeDialog()}},{key:"onWorkspaceRequested",value:function e(t){var r=t.workspace;if(!r)return;this.setState(function(e){var t=[].concat(u()(e.allWorkspaces.workspaces));var a=Object(S["findIndex"])(t,function(e){return e.id===r.id});if(a<0)return null;t[a]=r;var n={allWorkspaces:l()({},e.allWorkspaces,{workspaces:t})};return n})}},{key:"onWorkspaceJoin",value:function e(r){var a=this;var n=r.workspace;this.setState(function(e){var r=a.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(S["unionBy"])([n],i,"id");var o=e.yourWorkspaces.totalWorkspaces+1;var c={yourWorkspaces:l()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(s),totalWorkspaces:o}),searchResults:l()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})};return c})}},{key:"onWorkspaceLeave",value:function e(r){var a=this;var n=r.workspace;this.setState(function(e){var r=a.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(S["filter"])(i,function(e){return e.id!==n.id});var o=e.yourWorkspaces.totalWorkspaces-1;var c=e.allWorkspaces.workspaces;var u=Object(S["unionBy"])([n],c,"id");var d={yourWorkspaces:l()({},e.yourWorkspaces,{workspaces:s,totalWorkspaces:o}),allWorkspaces:l()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(u)}),searchResults:l()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})};return d},function(){a.closeDialog()})}},{key:"onSelectOption",value:function e(t){this.setSearchResultsOptions(t)}},{key:"onClearHeaderInput",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"getListHeight",value:function e(t){return this.listRefs[t]?this.listRefs[t].getContentHeight():0}},{key:"setPageRef",value:function e(t){this.page=t}},{key:"setPageSearchRef",value:function e(t){this.pageSearch=t}},{key:"setHeaderPaneRef",value:function e(t){this.headerPane=t}},{key:"setOnboardingBannerRef",value:function e(t){this.onboardingBanner=t}},{key:"setListRef",value:function e(t){var r=t.workspaceListKey,a=t.ref;this.listRefs[r]=a}},{key:"setWindowScrollerRef",value:function e(t){this.windowScroller=t}},{key:"setListTopOffset",value:function e(t){var r=t.workspaceListKey,a=t.topOffset;this.setState(function(e){return s()({},r,l()({},e[r],{topOffset:a}))})}},{key:"setSearchResultsOptions",value:function e(t){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},selectedOption:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"setViewingHiddenWorkspace",value:function e(t){this.setState(function(){return{viewingHiddenWorkspace:t}})}},{key:"setHasScrolledPastHeaderPane",value:function e(t){this.setState(function(){return{hasScrolledPastHeaderPane:t}})}},{key:"setHasApiError",value:function e(t,r){this.setState(function(e){return s()({},t,l()({},e[t],{hasApiError:r}))})}},{key:"setLoadingWorkspaces",value:function e(t,r){this.setState(function(e){return s()({},t,l()({},e[t],{loadingWorkspaces:r}))})}},{key:"setDialogWorkspaceDetail",value:function e(t,r){this.setState(function(){return{dialogWorkspaceDetail:t}},r)}},{key:"setWorkspaceFetchOptions",value:function e(t,r){var a=r.workspaces,n=void 0===a?[]:a,i=r.totalWorkspaces,o=void 0===i?0:i,c=r.onWorkspaces,u=void 0!==c&&c,d=r.nextCursorMark,p=void 0===d?null:d;this.setState(function(e){return s()({},t,l()({},e[t],{workspaces:n,totalWorkspaces:o,onWorkspaces:u,nextCursorMark:p}))})}},{key:"setHideOnboardingBanner",value:function e(t){this.setState(function(){return{hideOnboardingBanner:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:O.a.createElement(Q["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"getWorkspaceListTopOffset",value:function e(t){return this.state[t]?this.state[t].topOffset:0}},{key:"getListHeading",value:function e(t){var r=this.state.selectedOption;if("allWorkspaces"===t){var a=this.state.allWorkspaces.totalWorkspaces;var n=this.state.yourWorkspaces.totalWorkspaces;return nt.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(a-n,0)})}if("yourWorkspaces"===t)return nt.t("Your Workspaces");if("searchResults"===t){var i=this.state.searchResults,s=i.loadingWorkspaces,o=i.totalWorkspaces;var l=Object(S["get"])(r,"selectedOptionData");if(s)return null;if("member"===Object(S["get"])(r,"type")){var c=Object(P["getMemberRealName"])(l);var u=nt.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:c,workspaceCount:o});return O.a.createElement(O.a.Fragment,null,O.a.createElement(Z["a"],{entityType:"member",dimension:28,entityData:l,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),u)}if("workspace"===Object(S["get"])(r,"type")&&0===o)return nt.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(S["get"])(r,"type")||l.id===Ee["b"])&&o>0)return nt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:o,searchQuery:Object(S["get"])(l,"displayValue")});if("workspace"===Object(S["get"])(r,"type")&&o>0)return nt.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:o,workspaceName:Object(S["get"])(r,"selectedOptionData.name")})}return""}},{key:"getWorkspacesForList",value:function e(t){if("allWorkspaces"===t){var r=this.state.allWorkspaces.workspaces;var a=this.state.yourWorkspaces.workspaces;return Object(S["differenceBy"])(r,a,"id")}if("yourWorkspaces"===t)return this.state.yourWorkspaces.workspaces;if("searchResults"===t)return this.state.searchResults.workspaces;return[]}},{key:"maybeUpsertWorkspaceToSearchResults",value:function e(t,r){var a=Object(S["get"])(t.searchResults,"workspaces",[]);var n=Object(S["find"])(a,function(e){return r.id===e.id});return n?Object(S["unionBy"])([r],a,"id"):a}},{key:"openWorkspaceRequestForm",value:function e(){var t=this;var r=this.props,a=r.showRequestDialog,n=r.featureModernRequestWorkspaceDialog,i=r.openModal;n?i({element:O.a.createElement(be,null),isStackable:true}):a({displayModernToast:function e(r){var a=r.type,n=r.errorType,i=r.teamName;var s=Object(Ee["g"])({type:a,errorType:n,teamName:i});t.setToastText(O.a.createElement("div",{className:"display_flex"},"success"===a&&O.a.createElement(z["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),O.a.createElement("span",null,s)))}})}},{key:"maybeFetchNextPage",value:function e(t){!t.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces();!t.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"fetchSearchResults",value:function e(){var t=this.state.selectedOption,r=t.selectedOptionData,a=t.type;var n={};if(!r)return;this.setLoadingWorkspaces("searchResults",true);if(Object(S["get"])(r,"id")===Ee["b"])n.searchTerm=r.displayValue;else{n.id=r.id;n.type="member"===a?"single_user":"single_workspace"}Object(Ee["j"])({searchType:a,clogger:this.props.clogger});this.fetchWorkspacesWithArgs(n)}},{key:"fetchSingleMemberToPrepopulate",value:function e(t){var r=this;this.props.fetchRawMembersFromAPI({ids:[t]}).then(function(e){var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};r.setState(t)})}},{key:"openDialog",value:function e(t){var r=this;var a=t.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+a.id);Object(Ee["n"])({teamId:a.id,trackingCode:this.trackingCode,clogger:this.props.clogger});this.setDialogWorkspaceDetail(a,function(){r.dialog=r.props.openModal({element:r.renderDialog(),isStackable:true,name:"find-more-workspaces-info"})})}},{key:"closeDialog",value:function e(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}},{key:"fetchWorkspacesWithArgs",value:function e(t){var r=t.type,a=t.id,n=t.searchTerm;var i=this.props.user.id;var s=this.state.selectedOption;var o=Object(S["isEmpty"])(s);var l=a===i&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:l,additionalOptions:{type:r,id:a,searchTerm:n}})}},{key:"fetchTeam",value:function e(t){var r=this;return this.props.fetchEnterpriseTeamById({teamId:t}).then(function(e){r.setSearchResultsOptions({selectedOptionData:e,type:"workspace"});r.openDialog({team:e})}).catch(function(e){r.setViewingHiddenWorkspace(true);lt.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.additionalOptions,n=r.workspaceListKey,i=void 0===n?"allWorkspaces":n;var s=this.state[i].nextCursorMark;this.setHasApiError(i,false);return this.props.fetchDirectoryWorkspaces(l()({nextCursorMark:s},a)).then(function(e){var r=e.num_found,a=e.on_workspaces,n=e.items;var o=n;s&&(o=Object(S["unionBy"])(t.state[i].workspaces,o,"id"));t.setWorkspaceFetchOptions(i,{workspaces:o,totalWorkspaces:r,onWorkspaces:a,nextCursorMark:e.next_cursor_mark});t.setLoadingWorkspaces(i,false)}).catch(function(e){t.setHasApiError(i,true);t.setLoadingWorkspaces(i,false);lt.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}},{key:"hasFetchedAllWorkspaces",value:function e(t){return this.state[t].workspaces.length>=this.state[t].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var r=t.scrollHeight,a=t.scrollTop;return r-(a+this.clientHeight)<ot}},{key:"doInfiniteScrollHandler",value:function e(t){var r=t.scrollTop;var a=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";var n=this.getListHeight("yourWorkspaces");"allWorkspaces"===a&&(n+=this.getListHeight("allWorkspaces"));var i=this.hasScrolledWithinScrollThreshold({scrollTop:r,scrollHeight:n});i&&!this.hasFetchedAllWorkspaces(a)?this.setLoadingWorkspaces(a,true):!i&&this.hasFetchedAllWorkspaces(a)&&this.setLoadingWorkspaces(a,false)}},{key:"renderDialog",value:function e(){var t=this.state,r=t.dialogWorkspaceDetail,a=t.displayDirectoryInModal;var n=this.props.user;var i=Object(S["get"])(this.props.queryString,"channel",null);var s=Object(S["get"])(this.props.queryString,"action",null);var o=Object(S["get"])(this.props.queryString,"user",null);var l=Object(P["isGuest"])(n);return O.a.createElement(Ne,{team:r,displayDirectoryInModal:a,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:true,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:l,channelRedirect:i,postLaunchAction:s,userIdFromURL:o})}},{key:"renderInfiniteSpinner",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.renderFullPage;var a=j()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!r});return O.a.createElement("div",{className:a},O.a.createElement(X["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderWorkspaceCard",value:function e(t){if(Object(S["isEmpty"])(t))return null;var r=Object(T["a"])()||Object(W["a"])()&&Object(V["b"])();var a=!r;return O.a.createElement(_e["a"],{team:t,key:t.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:a,doUpsertJoin:true})}},{key:"renderTitle",value:function e(){var t=this.props.enterprise.name;return O.a.createElement("div",{className:"p-workspace_directory__title"},nt.t("Workspaces at {name}",{name:Object(U["o"])(t)}))}},{key:"renderWorkspaceSearchInput",value:function e(){var t=this.state.selectedOption;return O.a.createElement("div",{className:"p-workspace_directory__search"},O.a.createElement(Pe["a"],{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:false,triggerAction:this.onSelectOption,prepopulatedOption:Object(S["get"])(t,"selectedOptionData")}))}},{key:"renderWorkspaceDirectoryHeaderPane",value:function e(){var t=this.props,r=t.displayDirectoryInModal,a=t.user;var n=j()("p-workspace_directory__header_pane",{margin_top_75:r});return O.a.createElement("div",{className:n,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!r&&this.renderTitle(),!Object(P["isGuest"])(a)&&this.renderWorkspaceSearchInput())}},{key:"renderListHeading",value:function e(t){return O.a.createElement("p",{className:"p-workspace_directory__list_title"},t)}},{key:"renderYourWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"yourWorkspaces"})}},{key:"renderAllWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"allWorkspaces"})}},{key:"renderSearchResults",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"searchResults"})}},{key:"renderList",value:function e(t){var r=this;var a=t.listProps,n=t.workspaceListKey;var i=this.getWorkspacesForList(n);var s=this.state[n].loadingWorkspaces;if("searchResults"===n&&Object(S["isEmpty"])(i)&&!s)return this.renderSearchEmptyState();if(Object(S["isEmpty"])(i)&&!s)return null;var o=this.getWorkspaceListTopOffset(n);var c=this.getListHeading(n);return O.a.createElement(O.a.Fragment,null,this.renderListHeading(c),O.a.createElement("div",{className:"p-workspace_directory__list"},O.a.createElement(Be,l()({scrollElement:this.page,workspaces:i,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:o,ref:function e(t){return r.setListRef({workspaceListKey:n,ref:t})}},a))),s&&this.renderInfiniteSpinner())}},{key:"renderSearchEmptyState",value:function e(){var t=this;var r=this.state,a=r.searchResults,n=r.selectedOption;var i=Object(S["get"])(n,"selectedOptionData");var s=void 0;var o=void 0;if(Object(Ee["h"])(i)){var l=Object(S["get"])(a,"totalWorkspaces");var c=Object(S["get"])(a,"onWorkspaces");var u=Object(P["getMemberRealName"])(i);if(Object(ge["c"])({totalWorkspaces:l,onWorkspaces:c})&&!Object(ge["b"])({totalWorkspaces:l,onWorkspaces:c})){s=nt.t("{memberName} hasn\u2019t joined any workspaces",{memberName:u});o=nt.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return O.a.createElement(J["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}})}if(Object(ge["b"])({totalWorkspaces:l,onWorkspaces:c})){s=nt.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:u});o=nt.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:u},function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return O.a.createElement(J["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}})}return O.a.createElement("div",{className:"align_center"},O.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},O.a.createElement(Z["a"],{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),s),O.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}s=nt.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(S["get"])(i,"displayValue")});o=nt.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return O.a.createElement(J["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}});return O.a.createElement("div",{className:"align_center"},O.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s),O.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}},{key:"renderOnboardingBanner",value:function e(){var t=this.props.hasSeenOnboardingBanner;if(t)return null;var r=this.state.hideOnboardingBanner;var a=j()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":r});var n=nt.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return O.a.createElement(rt,{title:nt.t("What is a workspace?"),description:n,className:a,onClose:this.onOnboardingBannerDismiss,isHidden:r,showCloseButton:true,ref:this.setOnboardingBannerRef})}},{key:"renderWorkspaceRequestBanner",value:function e(){var t=this;var r=this.props.allowWorkspaceRequest;if(!r)return null;var a=nt.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(e){var r=e.text;return O.a.createElement(J["a"],{onClick:t.openWorkspaceRequestForm},r)});return O.a.createElement(rt,{title:nt.t("Can\u2019t find your workspace?"),description:a,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:S["noop"]})}},{key:"renderDirectoryLists",value:function e(t){var r=this.state.selectedOption;var a=t.onChildScroll,i=t.registerChild,s=n()(t,["onChildScroll","registerChild"]);var o=l()({onScroll:a,scrollElement:this.page},s);var c=!!Object(S["get"])(r,"selectedOptionData");if(c)return O.a.createElement("div",{ref:i},this.renderSearchResults(o));return O.a.createElement("div",{ref:i},this.renderYourWorkspaces(o),this.renderAllWorkspaces(o))}},{key:"renderWorkspaceDirectoryBody",value:function e(){var t=this;var r=this.state,a=r.searchResults,n=r.hideOnboardingBanner;var i=j()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!n});var s={};this.onboardingBannerHeight&&!n&&(s.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)");if(!this.page)return null;return O.a.createElement(O.a.Fragment,null,this.renderOnboardingBanner(),O.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:s},O.a.createElement(I["a"],{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(e){return t.renderDirectoryLists(e)}),!Object(S["get"])(a,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner()))}},{key:"renderEmptyState",value:function e(t){var r=this.props.enterprise;return O.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},O.a.createElement(gt,l()({enterprise:r},t)))}},{key:"renderDirectoryPage",value:function e(){var t=this.props.user;var r=this.state.viewingHiddenWorkspace;var a=this.state.allWorkspaces,n=a.workspaces,i=a.loadingWorkspaces;var s=this.state.yourWorkspaces,o=s.workspaces,l=s.loadingWorkspaces;var c=!l&&Object(S["isEmpty"])(o);var u=!i&&Object(S["isEmpty"])(n);if(c&&Object(P["isGuest"])(t))return this.renderEmptyState({isZeroWorkspaceGuest:true});if(u&&c)return this.renderEmptyState({isZeroWorkspaceOrg:true});if(r)return this.renderEmptyState({isHiddenWorkspace:true});return O.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderWorkspaceDirectoryHeader",value:function e(){var t=this.props,r=t.user,a=t.enterprise;var n=this.state,i=n.isMobileView,s=n.hasScrolledPastHeaderPane,o=n.selectedOption;var l=r.is_admin||r.is_owner;return O.a.createElement(Je,{enterprise:a,displayManageOrgButton:l,displaySearchBar:this.headerPane&&s,"data-js":"workspace_directory_sticky_header",user:r,isMobileView:i,selectedSearchOption:Object(S["get"])(o,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderDirectoryInModal",value:function e(){var t=this.props.enterprise;var r=j()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return O.a.createElement($["a"],{onCancel:this.onFullscreenModalClose,showCancelButton:false,showGoButton:false,title:nt.t("Workspaces at {orgName}",{orgName:t.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:true,withHeader:true},O.a.createElement("div",{className:r,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"render",value:function e(){var t=this.props.displayDirectoryInModal;var r=this.state.allWorkspaces,a=r.workspaces,n=r.loadingWorkspaces;var i=this.state.yourWorkspaces,s=i.workspaces,o=i.loadingWorkspaces;var l=o&&Object(S["isEmpty"])(s);var c=n&&Object(S["isEmpty"])(a);var u=l||c;if(t)return this.renderDirectoryInModal();return O.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),u&&this.renderInfiniteSpinner({renderFullPage:true}),O.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),O.a.createElement(Y["a"],null))}}]);return t}(y["Component"]);ct.displayName="WorkspaceDirectory";ct.defaultProps=st;var ut=function e(t,r){var a=r.userId;var n=Object(A["h"])(t)||{};var i=Object(N["d"])(t,a);var s=Object(L["a"])(t,"enterprise_team_creation_request");var o=s&&s.is_enabled&&!Object(P["isGuest"])(i);var c=Object(x["isClientApp"])(t);var u=Object(F["g"])(t,"seen_onboarding_banner");var d=Object(q["a"])({state:t});return{enterprise:n,user:l()({id:a},i),allowWorkspaceRequest:o,displayDirectoryInModal:c,hasSeenOnboardingBanner:u,clogger:d,featureModernRequestWorkspaceDialog:Object(x["isFeatureEnabled"])(t,"feature_modern_request_workspace_dialog")}};var dt={enqueueToast:R["enqueueToast"],openModal:function e(){return M["openModal"].apply(void 0,arguments)},closeModal:M["closeModal"],fetchRawMembersFromAPI:H["g"],setUserPrefByApi:B["d"],fetchEnterpriseTeamById:G["k"],fetchDirectoryWorkspaces:G["j"]};var pt=Object(C["connect"])(ut,dt,null,{areStatePropsEqual:function e(t,r){return Object(K["a"])(t,r,2)}})(ct);var vt=new U["b"]("workspace_directory");var mt={enterprise:_["b"].shape({id:_["b"].string,name:_["b"].string,domain:_["b"].string,icon:_["b"].object,locale:_["b"].string}).isRequired,isZeroWorkspaceGuest:_["b"].bool,isZeroWorkspaceOrg:_["b"].bool,isHiddenWorkspace:_["b"].bool,directoryUrl:_["b"].string};var ht={isZeroWorkspaceGuest:false,isZeroWorkspaceOrg:false,isHiddenWorkspace:false,directoryUrl:void 0};var ft=function(e){g()(t,e);function t(e){p()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.redirectToDirectory=r.redirectToDirectory.bind(r);return r}f()(t,[{key:"redirectToDirectory",value:function e(){var t=this.props.directoryUrl;window.open(t+"/signin/find-workspaces","_self")}},{key:"renderHeading",value:function e(){var t=this.props,r=t.enterprise,a=t.isHiddenWorkspace;var n=a?vt.t("No workspace found"):vt.t("No available workspaces");return O.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},O.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},O.a.createElement(Z["a"],{entityType:"org",dimension:28,entityData:r,customClasses:"flex_none",featureReactMessages:true})),n)}},{key:"renderZeroWorkspaceGuestBody",value:function e(){var t=this.props.enterprise;return O.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},vt.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(U["o"])(t.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function e(){var t=this.props.enterprise;return O.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},vt.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(U["o"])(t.name)}))}},{key:"renderHiddenWorkspaceBody",value:function e(){var t=this.props.enterprise;return O.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},vt.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(U["o"])(t.name)}))}},{key:"renderBody",value:function e(){var t=this.props,r=t.isZeroWorkspaceGuest,a=t.isZeroWorkspaceOrg,n=t.isHiddenWorkspace;if(r)return this.renderZeroWorkspaceGuestBody();if(a)return this.renderZeroWorkspaceOrgBody();if(n)return this.renderHiddenWorkspaceBody();return null}},{key:"renderFooter",value:function e(){var t=this.props.enterprise;return O.a.createElement(J["a"],{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},vt.t("View all {orgName} workspaces",{orgName:Object(U["o"])(t.name)}),O.a.createElement(z["b"],{type:"chevron-right",key:"footer-chevron-icon",inline:true}))}},{key:"render",value:function e(){return O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]);return t}(y["PureComponent"]);ft.displayName="WorkspaceDirectoryEmptyState";ft.defaultProps=ht;var bt=function e(t,r){var a=r.enterprise;return{directoryUrl:Object(Ue["a"])(t,a.domain)}};var gt=Object(C["connect"])(bt)(ft);r.d(t,"a",function(){return gt});var _t=t["b"]=pt},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(13);var f=r(2);var b=r(0);var g=r(10);var _=r(1366);var y=r(912);var O=function e(t,r){var a=Math.min(r||5e5,5e5);if(t.length>a)return Object(f["escapeRegExp"])(t.slice(0,a));return Object(f["escapeRegExp"])(t)};var k=r(35);var E=r(204);var j=r(57);var C=r(45);var S=r(2414);var w=r(1757);var I=r(392);var T=r(904);var A=r(96);var N=r(22);var P=r(187);var R=r(795);var M=function e(t){return m.a.createElement("div",null,m.a.createElement(P["a"],{"data-qa":"article-"+t.article.id,className:"p-help_search__list__item "+(t.isFocus?"p-help_search__list__item__focus":""),key:t.article.id+"-list-item",onClick:function e(){t.onClickArticle(t.article.url)},onKeyDown:function e(r){13===r.keyCode&&t.onClickArticle(t.article.url)}},m.a.createElement("div",{className:"p-help_search__list__item__title"},"string"===typeof t.article.title?m.a.createElement(R["a"],{className:"c-channel_search_result__justification",text:t.article.title,showTooltips:false}):t.article.title),m.a.createElement(N["b"],{type:"enter",className:"p-help_search__list__icon"})))};M.displayName="Article";M.defaultProps={article:{},isFocus:false,onClickArticle:f["noop"]};var x=M;var D=r(1643);var F=new g["b"]("help");var L={query:b["b"].string,helpCenterToken:b["b"].string,articles:b["b"].arrayOf(b["b"].shape({id:b["b"].oneOfType([b["b"].number,b["b"].string]),images:b["b"].array,label_names:b["b"].array,title:b["b"].node,url:b["b"].string})),tickets:b["b"].shape({open:b["b"].number,closed:b["b"].number,unread:b["b"].number}),onQueryChange:b["b"].func,isLoading:b["b"].bool,onOpenLink:b["b"].func,autoFocus:b["b"].bool};var B={query:"",helpCenterToken:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:f["noop"],isLoading:false,onOpenLink:f["noop"],autoFocus:false};var U=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={query:r.props.query,articles:r.props.articles,focusFirstResult:true,isLoading:r.props.isLoading};r.zdLocale=Object(j["a"])();Object(w["a"])(r,["onListMouseEnter","onSearchInputChange","onSearchInputSubmit","onClickArticle","onSearchInputBlur","renderArticles"]);return r}l()(t,[{key:"componentWillReceiveProps",value:function e(t){t.articles!==this.state.articles&&this.setState(function(){return{articles:t.articles,isLoading:t.isLoading}})}},{key:"onListMouseEnter",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{query:r,focusFirstResult:true}});this.props.onQueryChange(r)}},{key:"onSearchInputSubmit",value:function e(){this.state.articles.length&&this.openLinkInNewWindow({url:Object(E["a"])(this.state.articles[0].url,this.props.helpCenterToken),isFromSubmit:true,index:0,articleId:this.state.articles[0].id})}},{key:"onClickArticle",value:function e(t){var r=t.url,a=t.index,n=t.articleId;this.openLinkInNewWindow({url:Object(E["a"])(r,this.props.helpCenterToken),index:a,articleId:n})}},{key:"onSearchInputBlur",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"openLinkInNewWindow",value:function e(t){var r=t.url,a=t.index,n=t.isFromSubmit,i=t.articleId;var s=this.props.onOpenLink;s({url:r,query:this.state.query,index:a,isFromSubmit:n,articleId:i});window.open(Object(E["a"])(r,this.props.helpCenterToken))}},{key:"renderArticles",value:function e(t){var r=this;var a=this.state.articles;var n=a[t];return m.a.createElement(x,{article:n,isFocus:this.state.focusFirstResult&&0===t,onClickArticle:function e(a){return r.onClickArticle({url:a,index:t,articleId:n.id})}})}},{key:"render",value:function e(){var t=this;var r=this.props.autoFocus;var a=this.state,n=a.query,i=a.articles;this.keys=Object(f["map"])(i,"id").map(function(e){return e.toString()});return m.a.createElement(v["Fragment"],null,m.a.createElement(I["a"],{placeholder:F.t("Search the Help Center"),value:n,icon:"search",autoFocus:r,hasResetButton:true,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:true,className:"margin_top_200 margin_bottom_100",size:"large",onBlur:this.onSearchInputBlur}),n?null:m.a.createElement("div",{className:"p-help_search__popular_topics padding_bottom_100 bold"},F.t("Popular help topics")),m.a.createElement("div",{role:"list",className:"p-help_search__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?m.a.createElement(A["a"],{size:"large",color:"blue",noMargin:true}):m.a.createElement("div",{className:"p-help_search__list__inner full_height"},m.a.createElement(S["a"],null,function(e){var r=e.width,a=e.height;return m.a.createElement(T["a"],{width:r,height:a,keys:t.keys,rowRenderer:t.renderArticles})}))))}}]);return t}(v["Component"]);U.displayName="HelpSearch";U.defaultProps=B;var q=U;var G=new g["b"]("help");var H={query:b["b"].string,helpCenterTrackingToken:b["b"].string,fetchHelpArticles:b["b"].func,clogger:b["b"].object.isRequired,autoFocus:b["b"].bool,onQueryChange:b["b"].func,defaultArticlesData:b["b"].arrayOf(b["b"].oneOfType([b["b"].number,b["b"].shape({type:b["b"].string.isRequired,id:b["b"].number.isRequired,text:b["b"].string}),b["b"].shape({type:b["b"].string.isRequired,url:b["b"].string.isRequired,text:b["b"].string.isRequired})])),onOpenLink:b["b"].func};var W={query:"",helpCenterTrackingToken:"",fetchHelpArticles:f["noop"],autoFocus:false,onQueryChange:f["noop"],defaultArticlesData:null,onOpenLink:f["noop"]};function V(e){return"number"===typeof e||"helplink"===e.type?e.id||e:null}var K=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={query:r.props.query,articles:[],isLoading:true};r.allArticles=[];r.onQueryChange=r.onQueryChange.bind(r);r.zdLocale=Object(j["a"])();return r}l()(t,[{key:"componentDidMount",value:function e(){this.fetchHelpArticles({reason:"help-search-container/componentDidMount"})}},{key:"componentDidUpdate",value:function e(t){t.defaultArticlesData!==this.props.defaultArticlesData&&this.fetchHelpArticles({reason:"help-search-container/componentDidUpdate"})}},{key:"onQueryChange",value:function e(t){var r=t?this.filterArticlesByQuery(t):this.defaultArticles;if(t&&r.length<7){var a=Object(E["b"])({query:t,zdLocale:this.zdLocale,sidTrackingToken:this.props.helpCenterTrackingToken});r.push({id:-99999,images:[],label_names:[],title:G.rt('Search for "{query}" on the Help Center',{query:t}),url:a})}this.setState(function(){return{query:t,articles:r}});this.props.onQueryChange(t)}},{key:"filterPopularArticles",value:function e(t){var r=[];t.forEach(function(e){e.popular&&r.push(e)});r.sort(function(e,t){if(void 0===e.order)return 1;if(void 0===t.order)return-1;return e.order-t.order});return r}},{key:"filterDefaultArticles",value:function e(t){var r=this.props.defaultArticlesData;if(!r)return[];var a={};r.forEach(function(e){var r=V(e);r&&(a[r]=t.find(function(e){return e.id===r}))});var i=r.map(function(e,t){var r=V(e);if(r&&a[r]){if("number"===typeof e)return a[r];return n()({},a[r],{title:e.text||a[r].title})}return{id:"customArticle-"+t,title:e.text,url:e.url}}).filter(function(e){return!!e.url});return i}},{key:"filterArticlesByQuery",value:function e(t){var r=O(t);var a=new RegExp(r,"i");var n=-1;var i=this.allArticles.filter(function(e,t){if(e.title.toLowerCase()===r.toLowerCase()){n=t;return false}return e.title.match(a)});-1!==n&&i.unshift(this.allArticles[n]);return i}},{key:"processArticles",value:function e(t){var r=this;try{this.allArticles=JSON.parse(t.articles).articles}catch(e){this.allArticles=[]}this.defaultArticles=this.props.defaultArticlesData?this.filterDefaultArticles(this.allArticles):this.filterPopularArticles(this.allArticles);this.state.query?this.setState(function(){return{articles:r.filterArticlesByQuery(r.props.query),isLoading:false}}):this.setState(function(){return{articles:r.defaultArticles,isLoading:false}})}},{key:"fetchHelpArticles",value:function e(){var t=this;this.props.fetchHelpArticles({locale:this.zdLocale,reason:"help-search-container/fetchHelpArticles"}).then(function(e){t.processArticles(e)})}},{key:"render",value:function e(){var t=this.state,r=t.articles,a=t.query,n=t.isLoading;var i=this.props,s=i.clogger,o=i.autoFocus,l=i.onOpenLink;return m.a.createElement(q,{articles:r,query:a,autoFocus:o,helpCenterToken:this.props.helpCenterTrackingToken,onQueryChange:this.onQueryChange,isLoading:n,clogger:s,onOpenLink:l})}}]);return t}(v["Component"]);K.displayName="HelpSearchContainer";K.defaultProps=W;var z=function e(t){return{clogger:Object(C["a"])({state:t}),helpCenterTrackingToken:Object(y["getHelpCenterTrackingToken"])(t),team:Object(k["d"])(t)}};var Q={fetchHelpArticles:_["a"]};var Y=Object(h["connect"])(z,Q)(K);var J=t["a"]=Y},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(4453);var i=r(1406);Object(a["a"])("interop.history",{triggerNavigateBack:n["a"],triggerNavigateForward:n["b"],isHistoryNavigationEnabled:i["a"]})},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a={};r.r(a);r.d(a,"accessibility",function(){return s_["default"]});r.d(a,"activity",function(){return Jv["default"]});r.d(a,"allThreads",function(){return Wv["default"]});r.d(a,"allUnreads",function(){return dm["default"]});r.d(a,"appsInChannels",function(){return Cv["default"]});r.d(a,"bootData",function(){return E["default"]});r.d(a,"canInteract",function(){return Pv["default"]});r.d(a,"cfm",function(){return jf["default"]});r.d(a,"channelLoading",function(){return o_["default"]});r.d(a,"channelSidebar",function(){return B["default"]});r.d(a,"channelSidebarFolders",function(){return l_["default"]});r.d(a,"channelPrefixes",function(){return c_["default"]});r.d(a,"checkoutFlow",function(){return u_["default"]});r.d(a,"connectivity",function(){return h_});r.d(a,"consistency",function(){return Ge["default"]});r.d(a,"customEmoji",function(){return f_["default"]});r.d(a,"deletedMessages",function(){return b_["default"]});r.d(a,"desktop",function(){return Ba["default"]});r.d(a,"dnd",function(){return Za["default"]});r.d(a,"drafts",function(){return g_["default"]});r.d(a,"ekmChanges",function(){return sn["default"]});r.d(a,"ephemeralMessages",function(){return __["default"]});r.d(a,"expandables",function(){return Tn["default"]});r.d(a,"experiments",function(){return $i["default"]});r.d(a,"fileRefresh",function(){return Pn["default"]});r.d(a,"fileUpload",function(){return y_["default"]});r.d(a,"filesFlexpane",function(){return O_["default"]});r.d(a,"flannelUrl",function(){return pt["default"]});r.d(a,"globalNav",function(){return k_["default"]});r.d(a,"help",function(){return Ev["default"]});r.d(a,"imports",function(){return E_["default"]});r.d(a,"inbox",function(){return j_["default"]});r.d(a,"incrementalBoot",function(){return ce["default"]});r.d(a,"inlineFilePreviews",function(){return C_["default"]});r.d(a,"emailRender",function(){return S_["default"]});r.d(a,"invites",function(){return w_["default"]});r.d(a,"lastUsedSlashCommand",function(){return I_["default"]});r.d(a,"memberDirectoryFlexpane",function(){return T_["default"]});r.d(a,"messageEdit",function(){return bo["default"]});r.d(a,"messagePane",function(){return R_});r.d(a,"messagePaneBanner",function(){return M_["default"]});r.d(a,"modal",function(){return Qt["default"]});r.d(a,"navigationHistory",function(){return tl["default"]});r.d(a,"noop",function(){return hv["default"]});r.d(a,"onboarding",function(){return L_});r.d(a,"openPopoversCount",function(){return B_["default"]});r.d(a,"pendingFiles",function(){return U_["default"]});r.d(a,"pendingOpenChannel",function(){return q_["default"]});r.d(a,"persistedApiCalls",function(){return G_["default"]});r.d(a,"prefs",function(){return iy});r.d(a,"presence",function(){return ch["default"]});r.d(a,"pricingPlans",function(){return oy["default"]});r.d(a,"reactionsToast",function(){return kl["default"]});r.d(a,"searchAutocomplete",function(){return ly["default"]});r.d(a,"searchChannelsUsers",function(){return cy["default"]});r.d(a,"searchInputBox",function(){return uy["default"]});r.d(a,"searchInProductEducation",function(){return ub["default"]});r.d(a,"searchResults",function(){return dy["default"]});r.d(a,"searchSession",function(){return py["default"]});r.d(a,"searchUi",function(){return vy["default"]});r.d(a,"socket",function(){return b["default"]});r.d(a,"stars",function(){return wh["default"]});r.d(a,"pins",function(){return Fm["default"]});r.d(a,"teamCreation",function(){return my["default"]});r.d(a,"threadsFlexpane",function(){return Vv["default"]});r.d(a,"threadSub",function(){return Hv["default"]});r.d(a,"toast",function(){return zt["default"]});r.d(a,"topics",function(){return _y});r.d(a,"typing",function(){return Av["default"]});r.d(a,"uiSerialization",function(){return yy["default"]});r.d(a,"unfurls",function(){return Oy["default"]});r.d(a,"unreadCounts",function(){return ue["default"]});r.d(a,"unreadsView",function(){return Sy});r.d(a,"userGroupsFlexpane",function(){return wy["default"]});r.d(a,"usersCounts",function(){return Iy["default"]});r.d(a,"workspace",function(){return Ny});r.d(a,"welcomePlace",function(){return Fy});r.d(a,"enablePopupsBanner",function(){return Ly["default"]});r.d(a,"whatsNew",function(){return Jo["default"]});r.d(a,"composerToolbarUI",function(){return By["default"]});r.d(a,"channelBrowser",function(){return Uy["default"]});r.d(a,"flexpaneFocus",function(){return Wy});r.d(a,"adminMembers",function(){return Vy["default"]});r.d(a,"allCalls",function(){return jl["a"]});r.d(a,"appActions",function(){return Nl["b"]});r.d(a,"channelActions",function(){return tb["a"]});r.d(a,"appPermissions",function(){return _u["default"]});r.d(a,"appProfiles",function(){return tp["default"]});r.d(a,"appViews",function(){return Yy});r.d(a,"apps",function(){return Yl["default"]});r.d(a,"blocks",function(){return Jy["default"]});r.d(a,"bots",function(){return mp["default"]});r.d(a,"channelHistory",function(){return ae["default"]});r.d(a,"channels",function(){return tO});r.d(a,"channelsMeta",function(){return oO});r.d(a,"customizeEmoji",function(){return lO["default"]});r.d(a,"developerActions",function(){return cO["default"]});r.d(a,"emoji",function(){return uO["a"]});r.d(a,"environment",function(){return dO["default"]});r.d(a,"externalTeamIds",function(){return pO["b"]});r.d(a,"externalTeamsChannels",function(){return gO});r.d(a,"files",function(){return Rn["default"]});r.d(a,"idpGroups",function(){return _O["default"]});r.d(a,"lastNetworkSend",function(){return yO["default"]});r.d(a,"memberCounts",function(){return Ns["default"]});r.d(a,"members",function(){return SO});r.d(a,"membership",function(){return eo["default"]});r.d(a,"membershipOrdered",function(){return Sv["default"]});r.d(a,"messages",function(){return LO});r.d(a,"messagesMeta",function(){return bb["default"]});r.d(a,"notifications",function(){return BO["default"]});r.d(a,"paidFeatures",function(){return nn["default"]});r.d(a,"reactions",function(){return hh["default"]});r.d(a,"slashCommand",function(){return KO});r.d(a,"selfTeamIds",function(){return JO});r.d(a,"teams",function(){return XO["b"]});r.d(a,"userGroups",function(){return tk});r.d(a,"userGroupMembership",function(){return Hf["default"]});r.d(a,"window",function(){return ne["default"]});var n=r(3);var i=r.n(n);var s=r(2);var o=r.n(s);var l=r(292);var c=r(831);var u=r(65);var d=r(784);var p=r(27);var v=r(26);var m=r.n(v);var h=r(49);var f=r(120);var b=r(52);var g=function e(t){switch(t.type){case f["a"].getType():return i()({},t,{payload:"Channel bulk add payload is too big to output to redux devtools"});case b["socketMessageReceived"].getType():return i()({},t,{payload:"View raw WebSocket frames for details, but this was a "+(t.payload.subtype?[t.payload.type,t.payload.subtype].join("."):t.payload.type)+" message"});default:return t}};var _=Object(h["a"])()?void 0:function(){return{apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}};var y={autoPause:true,actionSanitizer:g,stateSanitizer:_,maxAge:1e3,features:{pause:true}};var O=y;function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,r=e.customEnhancers,a=e.middlewares,n=e.disableDevTools;var s=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&!n?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(i()({},O,{name:"Slack-"+t})):l["compose"];var o=s.apply(void 0,[l["applyMiddleware"].apply(void 0,m()(a))].concat(m()(r)));return o}var E=r(4);var j=r(101);var C=r(73);var S=r(97);var w=r(19);var I=r(259);var T=r(24);var A=r(11);var N=r(694);var P=r(56);function R(e,t){if(!Object(A["isIm"])(e))return false;var r=Object(T["d"])(t(),Object(A["getMemberIdFromIm"])(e));return r&&r.deleted}function M(e){return Object(A["isPublicChannel"])(e)&&!Object(A["isMemberOfChannel"])(e)}function x(e,t){Object(N["c"])();(M(e)||Object(A["isArchived"])(e)||R(e,t)||Object(A["isUnavailable"])(t(),e))&&Object(N["a"])(e)}function D(e,t,r){var a=r();if(!Object(E["shouldUseReactMessages"])(a))return;var n=Object(C["a"])(a);var i=Object(w["d"])(a,n);if(!i)return;x(i,r)}function F(e,t,r){var a=r();if(!Object(E["shouldUseReactMessages"])(a))return;var n=Object(C["a"])(a);var i=false;var s=e&&e.payload&&e.payload.channels;if(!s||!s.length)return;s.forEach(function(e){e&&e.id===n&&(i=true)});if(!i)return;var o=Object(w["d"])(a,n);if(!o)return;x(o,r)}function L(e,t,r){var a=r();if(!Object(E["shouldUseReactMessages"])(a))return;var n=e.payload;var i=Object(C["a"])(a);var s=Object(w["d"])(a,i);var o=Object(A["getMemberIdFromIm"])(s);if(!s||!Object(A["isIm"])(s)||!o)return;o===n.id&&x(s,r)}Object(P["d"])({actions:[j["e"]],sideEffect:D});Object(P["d"])({actions:[I["c"]],sideEffect:L});Object(P["d"])({actions:[f["a"]],sideEffect:F,reasons:[S["a"].ADD_CHANNEL,S["a"].ARCHIVE_CHANNEL,S["a"].UNARCHIVE_CHANNEL,S["a"].LEAVE_CHANNEL,S["a"].UPSERT_CHANNEL,S["a"].BULK_ADD_CHANNELS,S["a"].BULK_UPDATE_CHANNELS]});var B=r(796);var U=r(34);var q=r(333);var G=r(134);var H=r(132);var W=r(3754);var V=r(3789);var K=r(181);var z=r(1406);var Q=r(113);var Y=r(12);var J=10;var X=5;function Z(e,t,r){var a=r();if(Object(z["a"])(a))return;var n=!(!!Object(E["getFromBootData"])(a,"inviter_id")&&!!Object(E["getFromBootData"])(a,"inviter_name")||!!Object(E["getFromBootData"])(a,"landing_place_channel"));if(Object(U["g"])(a,"show_sidebar_quickswitcher_button"))return;if(Object(U["g"])(a,"k_key_omnibox_auto_hide_count")===X)return;if(void 0===Object(U["g"])(a,"k_key_omnibox_auto_hide_count"))return;if(Object(K["b"])(a))return;var i=Object(W["g"])(a);if(i)return;if(Object(V["a"])())return;if(Object(w["g"])(a)>=J){Object(Y["a"])({state:a}).error({show_sidebar_quickswitcher_button:JSON.stringify(Object(U["g"])(a,"show_sidebar_quickswitcher_button")),k_key_omnibox_auto_hide_count:JSON.stringify(Object(U["g"])(a,"k_key_omnibox_auto_hide_count")),count_of_open_channels:Object(w["g"])(a)},"show_sidebar_quickswitcher_button automatically set to true",{subtype:"show_sidebar_quickswitcher_button_true"});t(Object(H["d"])({pref:"show_sidebar_quickswitcher_button",value:true}));n&&t(Object(B["setJumperCoachmarkState"])("SHOW_BUTTON"))}}Object(P["d"])({actions:[f["a"]],sideEffect:Z,reasons:[S["a"].ADD_CHANNEL,S["a"].UPSERT_CHANNEL]});function $(e,t){var r=Object(U["e"])(e).split(",").filter(function(t){return Object(G["a"])(t)&&!Object(w["r"])(e,t)});r.length&&t(Object(Q["d"])({ids:r}))}function ee(e,t,r){var a=r();$(a,t)}Object(P["d"])({actions:[q["c"]],sideEffect:ee});function te(e,t,r){var a=r();if("newxp_suggested_channels"!==e.payload.pref)return;$(a,t)}Object(P["d"])({actions:[q["b"]],sideEffect:te});var re=r(98);var ae=r(103);var ne=r(209);var ie=r(284);var se=r(108);var oe=r(300);var le=r(67);var ce=r(547);var ue=r(188);var de=r(178);var pe=r(39);var ve=r(298);var me=r(168);var he=r(240);var fe=r(38);function be(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=r();if(!Object(ce["isFullyBooted"])(n)){Se({getState:r},"Not marking "+e+" because not fully booted");return}var i=Object(C["a"])(n);if(i!==e){Object(he["d"])(2005)&&Se({getState:r},"Not marking because "+e+" is not active");return}if(Object(ie["a"])(n)){Se({getState:r},"Not marking "+e+" because unread point was set manually");return}if(Object(ve["b"])()){Se({getState:r},"Not marking "+e+" because active channel is hidden");return}if(Object(fe["a"])()){if(!Object(de["e"])(n)){Se({getState:r},"Not marking "+e+" because attention not on chat ("+Object(de["c"])(n)+")");a||t(Object(j["i"])(null));return}}else if(!Object(me["f"])()){Se({getState:r},"Not marking "+e+" because attention not on chat ("+Object(me["c"])()+")");a||t(Object(j["i"])(null));return}var s=Object(w["d"])(n,e);var o=Object(ae["getTimestampsByChannelId"])(n,e),l=o.timestamps;var c=Object(A["getLatestTs"])(s,l);var u=Object(A["isRead"])(s);if(Object(A["isPublicChannel"])(s)&&!Object(A["isMemberOfChannel"])(s)){Se({getState:r},"Not marking "+e+" because not a member");return}if(Object(A["getLastReadTs"])(s)>=c&&u){Se({getState:r},"Not marking "+e+" because last_read >= latest && channel is read");return}var d=ge(n);var p=Object(ie["q"])(n);var v=Object(A["getLastReadTs"])(s)>=c;var m=Object(le["a"])(n,e,c);var h=Object(E["getCurrentUserId"])(n);var f=m&&m.user===h;if(d||p||v||u&&f){Se({getState:r},d?"Marking "+e+" because mark_msgs_read_immediately pref":p?"Marking "+e+" because unread line is visible":v?"Marking "+e+" because last_read >= latest":"Marking "+e+" because channel is read and last message is from self");t(Object(re["markMostRecentMsgRead"])({channelId:e,saveGhost:a&&!u,reason:pe["MARKED_REASONS"].VIEWED}))}else if(!d){Se({getState:r},"Not marking "+e+", clearing ghost last_read");t(Object(j["i"])(null))}}function ge(e){return Object(U["g"])(e,"mark_msgs_read_immediately")&&!Object(U["g"])(e,"start_scroll_at_oldest")}var _e=o.a.debounce(function(e,t,r){var a=r();var n=Object(w["d"])(a,e);if(ge(a)||!Object(A["isRead"])(n)){Se({getState:r},"Checking unreads after debounced channel change to "+e);be(e,t,r)}},500);function ye(e,t,r){var a=e.payload.channelId;if(!a)return;_e(a,t,r)}function Oe(e,t,r){var a=r();var n=Object(C["a"])(a);if(!Object(G["a"])(n))return;var i=Object(ne["isWindowFocused"])(a);var s=!Object(fe["a"])()||Object(se["j"])(a);i&&s&&requestAnimationFrame(function(){Se({getState:r},"Checking unreads after window became focused");be(n,t,r)})}function ke(e,t,r){var a=r();var n=Object(C["a"])(a);Object(se["j"])(a)&&Object(G["a"])(n)&&requestAnimationFrame(function(){Se({getState:r},"Checking unreads after workspace became focused");be(n,t,r)});t(Object(ue["activeWorkspaceChanged"])())}var Ee=o.a.debounce(function(e,t,r){var a=Object(ie["q"])(r());if(a){Se({getState:r},"Checking unreads after unread line became visible");be(e,t,r)}},350);function je(e,t,r){var a=r();var n=Object(C["a"])(a);if(!Object(G["a"])(n))return;if(ge(a))return;Ee(n,t,r)}function Ce(e,t,r){var a=r();var n=Object(C["a"])(a);if(!Object(G["a"])(n))return;o.a.defer(function(){Se({getState:r},"Checking unreads after fully booted");be(n,t,r)})}Object(P["d"])({actions:[j["e"]],sideEffect:ye});Object(P["d"])({actions:[ne["innerUpdateFocus"],ne["setWindow"]],sideEffect:Oe});Object(P["d"])({actions:[oe["f"]],sideEffect:ke});Object(P["d"])({actions:[j["n"]],sideEffect:je});Object(P["d"])({actions:[ce["setFullyBooted"]],sideEffect:Ce});function Se(e,t){Object(Y["a"])(e).info("CHECK-UNREADS",t)}var we=r(15);var Ie=r(23);var Te=r(1645);var Ae=r(1145);var Ne={};var Pe=11;var Re=604800;var Me=10;var xe=Object(we["b"])("Auto-close old DMs and MPDMs according to certain rules",function(e,t){var r=t();var a=Object(Y["a"])({state:r,label:"CHECK-FOR-OLD-IMS"});if(De(r))return;var n=[].concat(m()(Object(w["n"])(r)),m()(Object(w["l"])(r)));var i=n.filter(function(e){return!Object(A["isStarred"])(e)&&(Object(A["isOpen"])(e)||Object(A["isUnread"])(e))});if(i.length<=Pe){a.info("Within limit: "+i.length);return}var o=i.length-Pe;a.info("Over by "+o);var l=i.filter(function(e){return Fe(r,e)});var c={};l.forEach(function(e){c[e.id]=Le(r,e)});l=l.filter(function(e){return c[e.id]>Re});var u=Object(s["sortBy"])(l,function(e){return-1*c[e.id]});var d=Object(s["take"])(u,Math.min(o,Me));d.forEach(function(t){a.info("Closing "+t.id);e(Object(re["closeChannelApi"])({channelId:t.id,reason:"checkForOldImsToClose"}))})});function De(e){if(!Object(E["pageNeedsEnterprise"])(e))return false;var t=Object(s["get"])(Object(T["b"])(e),"enterprise_user.teams",[]);var r=Object(se["g"])(e)||[];var a=Object(s["intersection"])(r,t);if(Object(s["first"])(a)===Object(Ie["b"])(e))return false;return true}function Fe(e,t){if(Object(A["isSlackbot"])(t))return false;if(Object(A["isYou"])(Object(E["getCurrentUserId"])(e),t))return false;if(!Object(A["isOpen"])(t))return false;if(Object(A["isUnread"])(t))return false;if(Object(A["getHasDraft"])(e,t.id))return false;if(Object(Te["b"])(e,t.id))return false;if(t.id===Object(C["a"])(e))return false;return true}function Le(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;var a=Object(ae["getTimestampsByChannelId"])(e,t.id)||{timestamps:[]};var n=parseFloat(Object(A["getLatestTs"])(t,a.timestamps))||Object(A["getChannelCreatedTime"])(t);var i=new Date(1e3*n);var s=Object(Ae["a"])(r,i);return s}function Be(e,t,r){if(!Object(fe["a"])())return;if(!Object(E["isClientApp"])(r()))return;var a=Object(Ie["b"])(r());clearInterval(Ne[a]);Ne[a]=setInterval(function(){window.requestIdleCallback?window.requestIdleCallback(function(){t(xe())},{timeout:6e4}):t(xe())},9e5)}function Ue(e,t,r){if(!Object(fe["a"])())return;if(!Object(E["isClientApp"])(r()))return;var a=Object(Ie["b"])(r());clearInterval(Ne[a])}Object(P["d"])({actions:[b["connected"]],sideEffect:Be});Object(P["d"])({actions:[b["disconnected"]],sideEffect:Ue});var qe={checkForOldImsToClose:xe,shouldSkipThisTeam:De,canCloseThisChannel:Fe,getIdleTime:Le};Object(u["exportToGlobalDebugger"])("checkForOldImsToClose",xe);var Ge=r(302);var He=r(228);var We=r(160);var Ve=r(0);var Ke=r(424);var ze=r(29);var Qe=r(71);var Ye=6e4;var Je=6e5;var Xe=10;var Ze="client_stats_api_test_start";var $e="client_stats_users_info_start";var et="client_stats_files_edgespeed_start";var tt="client_stats_www_humans_start";var rt=Object(We["e"])("Measure the time to hit the api.test endpoint",function(e,t){var r=Object(Qe["c"])({getState:t});r.mark(Ze);return e(Object(ze["b"])({method:"api.test",reason:"user-fetch-stats"})).then(function(){r.measureAndClear(Ze,"client_stats_api_test")})});var at=Object(We["e"])("Measure the time to fetch a user from the api",function(e,t){var r=Object(E["getCurrentUserId"])(t());var a=Object(Qe["c"])({getState:t});a.mark($e);return e(Object(ze["b"])({method:"users.info",args:{user:r},reason:"user-fetch-stats"})).then(function(){a.measureAndClear($e,"client_stats_users_info")})});var nt=Object(We["e"])("Measure the time to fetch a file from files.slack.com",function(e,t){var r=Object(Qe["c"])({getState:t});r.mark(et);return fetch("//files.slack.com/edgespeed",{mode:"no-cors"}).then(function(){r.measureAndClear(et,"client_stats_files_edgespeed")})});var it=Object(We["e"])("Measure the time to fetch humans.txt from www",function(e,t){var r=Object(Qe["c"])({getState:t});r.mark(tt);return fetch("/humans.txt",{mode:"no-cors"}).then(function(){r.measureAndClear(tt,"client_stats_www_humans")})});var st={};var ot=Object(We["e"])("Collect api stats",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.attempt,n=void 0===a?0:a;return e(Object(Ke["a"])()).then(function(){var r=t();if(n>=Xe)return null;if("hidden"===document.visibleState){var a=Object(Ie["b"])(r);st[a]||(st[a]=setTimeout(function(){clearTimeout(st[a]);st[a]=null;e(ot({attempt:n+1}))},Ye));return st[a]}e(rt());e(at());if(window.fetch){e(nt());e(it())}return null})});ot.propTypes={attempt:Ve["b"].number};var lt=ot;var ct={measureApiTest:rt,measureUsersInfo:at,measureFiles:nt,measureHumansTxt:it,collectApiStatsTimeoutsById:st,clearAllApiStatsTimeouts:function e(){st={}}};var ut=r(5);var dt=r.n(ut);var pt=r(1199);var vt=r(1172);var mt=r(185);var ht="client_stats_flannel_xhr_fetch_start";var ft=Object(We["e"])("Measure the time it takes to fetch via flannel xhr",function(e,t){var r=Object(Qe["c"])({getState:t});var a=Object(T["b"])(t());var n={method:mt["c"].MEMBER_INFO,args:{updated_ids:dt()({},a.id,a.updated||0)},reason:"call-flannel-xhr-stats",EXPEDITED:true};return e(Object(vt["a"])(n)).delay(1e3).then(function(){r.mark(ht);return e(Object(vt["a"])(n))}).then(function(){r.measureAndClear(ht,"client_stats_flannel_xhr_fetch")}).catch(s["noop"])});ft.propTypes=null;var bt={};var gt=Object(We["e"])("Collect flannel xhr stats",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.attempt,n=void 0===a?0:a;return e(Object(Ke["a"])()).then(function(){var r=t();if(n>=Xe)return null;if("hidden"===document.visibleState){var a=Object(Ie["b"])(r);bt[a]||(bt[a]=setTimeout(function(){clearTimeout(bt[a]);bt[a]=null;e(gt({attempt:n+1}))},Ye));return bt[a]}e(Object(pt["getValidFlannelUrl"])()).then(function(){e(Object(Ke["a"])()).then(function(){e(ft())})});return null})});gt.propTypes={attempt:Ve["b"].number};var _t=gt;var yt={measureFlannelXhrFetch:ft,clearAllFlannelXhrStatsTimeouts:function e(){bt={}}};var Ot="client_stats_flannel_fetch_start";var kt=Object(We["e"])("Measure the time it takes to fetch via flannel xhr",function(e,t){var r=Object(Qe["c"])({getState:t});var a=Object(T["b"])(t());var n={method:mt["a"].MEMBER_QUERY,args:{updated_ids:dt()({},a.id,a.updated||0)},attemptNumber:mt["b"]};r.mark(Ot);return e(Object(mt["g"])(n)).then(function(){r.measureAndClear(Ot,"client_stats_flannel_fetch")}).catch(s["noop"])});var Et={};var jt=Object(We["e"])("Collect flannel socket stats",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.attempt,n=void 0===a?0:a;return e(Object(b["promiseToHaveOpenWebSocketAction"])()).then(function(){var r=t();if(n>=Xe)return null;if("hidden"===document.visibleState){var a=Object(Ie["b"])(r);Et[a]||(Et[a]=setTimeout(function(){clearTimeout(Et[a]);Et[a]=null;e(jt({attempt:n+1}))},Ye));return Et[a]}e(kt());return null})});jt.propTypes={attempt:Ve["b"].number};var Ct=jt;var St={measureFlannelSocketFetch:kt,clearAllFlannelSocketStatsTimeouts:function e(){Et={}}};var wt=Object(We["e"])("Collect user fetch stats",function(e){e(lt());e(_t());e(Ct())});var It=wt;var Tt={};var At=Object(We["e"])("Start initial time period stats collection",function(e,t){var r=t();var a=Object(Y["a"])({state:r});a.info("Will collect additional stats for the first "+Object(s["round"])(Je/6e4,1)+" minutes of this session");var n=Object(Ie["b"])(r);if(Tt[n])return;Tt[n]=setTimeout(function(){clearTimeout(Tt[n]);Tt[n]=null;e(It())},Je)});var Nt=At;var Pt=25;function Rt(e,t,r){if(!Object(E["isFeatureEnabled"])(r(),"feature_m11n_user_fetch_stats"))return;if(!Object(fe["a"])())return;var a=e.payload;if(a)return;var n=r();var i=Object(E["isFeatureEnabled"])(n,"feature_webapp_always_collect_initial_time_period_stats")||Object(He["a"])(Pt);if(!i)return;t(Nt())}Object(P["d"])({actions:[Ge["setBootInFlight"]],sideEffect:Rt});var Mt=r(294);var xt=3;var Dt={};function Ft(e,t,r){var a=Object(Ie["b"])(r());Dt[a]=(Dt[a]||0)+1;Dt[a]>=xt&&Object(Mt["a"])({reason:"Provisional connection timed out "+xt+" in a row",reasonKey:"prov_connection_max_time_out"})}function Lt(e,t,r){var a=Object(Ie["b"])(r());Dt[a]=0}Object(P["b"])([{actions:[b["provisionallyConnectedTimeout"]],sideEffect:Ft},{actions:[b["connected"]],sideEffect:Lt}]);var Bt={PROV_CONNECTED_TIMEOUT_THRESHOLD:xt,consecutiveProvConnectedTimeouts:Dt,maybeColdBootOnSocketTimeouts:Ft,resetConsecutiveProvConnectedTimeouts:Lt};Object.defineProperties(Bt,{consecutiveProvConnectedTimeouts:{get:function e(){return Dt},set:function e(t){Dt=t}}});var Ut=r(320);var qt=r(195);var Gt=r(538);var Ht=r(376);function Wt(e,t,r){var a=r();if(!Object(E["isFeatureEnabled"])(a,"feature_degraded_send"))return;if(Object(qt["d"])(a)){Object(Ht["g"])();Object(ve["d"])()}else if(Object(Gt["b"])())if(Object(qt["c"])(a)){if(!Object(qt["e"])(a)){Object(Ht["f"])();Object(ve["c"])({reason:{SERVICE_DOWN:true}})}}else{Object(Ht["f"])();Object(ve["c"])({reason:{API_ERROR:true}})}else{Object(Ht["f"])();Object(ve["c"])({reason:{OFFLINE:true}})}}Object(P["d"])({actions:[Ut["b"],Ut["a"]],sideEffect:Wt});var Vt=r(1);var Kt=r.n(Vt);var zt=r(150);var Qt=r(48);var Yt=r(74);var Jt=r.n(Yt);var Xt=r(30);var Zt=r(60);var $t=r(255);var er=r(57);function tr(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_is_deprecated_ssb)return true;var t=e();if(!Object(Xt["isSSB"])())return false;if(Object(E["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation")&&!Object(Xt["isSSBAndAtLeastVersion"])("3.0.0"))return true;return false}function rr(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_is_outdated_browser)return true;if(Object(Xt["isSSB"])())return false;if(Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_outdated")){if(Jt.a.chrome&&Jt.a.version<66)return true;if(Jt.a.firefox&&Jt.a.version<60)return true;if(Jt.a.safari&&Jt.a.version<10.1)return true;if(Jt.a.msedge&&Jt.a.version<16.16299)return true}return false}function ar(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_is_unsupported_browser)return true;if(Object(Xt["isSSB"])())return false;if(Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_unsupported")&&!(Jt.a.chrome||Jt.a.firefox||Jt.a.safari||Jt.a.msedge))return true;if(Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_mobile")&&sr())return true;return false}function nr(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_is_outdated_os)return true;if(Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_os")&&Object(Xt["isSSB"])()&&"macOS"===Jt.a.osname&&Object($t["compareVersions"])(Object($t["parseVersionString"])(Jt.a.osversion),Object($t["parseVersionString"])("10.10"))<0)return true;return false}function ir(){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_is_third_party)return true;if(navigator.userAgent&&navigator.userAgent.includes){if(navigator.userAgent.includes("Franz"))return true;if(navigator.userAgent.includes("Rambox"))return true;if(navigator.userAgent.includes("Station"))return true}return false}function sr(){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_is_mobile)return true;if(Jt.a.mobile||Jt.a.tablet)return true;return false}function or(){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_can_install_ssb)return true;if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_cannot_install_ssb)return false;if("macOS"===Jt.a.osname){var e=Object($t["parseVersionString"])("10.10");var t=Object($t["parseVersionString"])(Jt.a.osversion);return Object($t["compareVersions"])(t,e)>-1}if("Windows"===Jt.a.osname)return["7","8","8.1","10"].includes(Jt.a.osversion);if("Linux"===Jt.a.osname)return true;return false}function lr(){var e=Object(er["f"])();if("en-US"===e)return"https://slack.com/downloads";return"https://slack.com/intl/"+e+"/downloads"}function cr(){if(window.process&&window.process.mas)return"macappstore://itunes.apple.com/app/slack/id803453959";if(window.process&&window.process.windowsStore)return"ms-windows-store://pdp/?ProductId=9wzdncrdk3wp";var e=false;var t="";if(Object(Xt["isMac"])())e="osx";else if(Object(Xt["isWindows"])()){e="windows";t=Object(Xt["isWin64"])()?"windows_64":"windows"}else Object(Xt["isLinux"])()&&(e=false);if(!e)return lr();var r=lr()+"/instructions/"+e;r=Object(Zt["setUrlQueryStringValue"])(r,"os",e);t&&(r=Object(Zt["setUrlQueryStringValue"])(r,"build_architecture",t));return r}var ur=r(164);var dr=r(6);var pr=r.n(dr);var vr=r(7);var mr=r.n(vr);var hr=r(8);var fr=r.n(hr);var br=r(9);var gr=r.n(br);var _r=r(13);var yr=r(10);var Or=r(157);var kr=r(51);var Er=new yr["b"]("deprecation");var jr={featureSsbQ218Deprecation:Ve["b"].bool,onCloseComplete:Ve["b"].func,telemeter:Ve["b"].object};var Cr={featureSsbQ218Deprecation:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var Sr=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLinkClick=r.onLinkClick.bind(r);r.ref=Kt.a.createRef();return r}mr()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_ssb");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureSsbQ218Deprecation)return null;return Kt.a.createElement(Or["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Kt.a.createElement("div",null,Kt.a.createElement("strong",null,Er.t("This is an out-of-date version of Slack.",{fallbackHash:"50ebb2ef5c811360b7496e2bec13c28583af12e8"})),Kt.a.createElement("br",null),Kt.a.createElement(kr["a"],{href:cr(),onClick:this.onLinkClick},Er.t("Update now"))))}}]);return t}(Vt["Component"]);Sr.displayName="SSBDeprecationToast";Sr.defaultProps=Cr;var wr=function e(t){return{featureSsbQ218Deprecation:Object(E["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation"),telemeter:Object(Qe["c"])({state:t})}};var Ir=Object(_r["connect"])(wr)(Sr);var Tr=r(84);var Ar=new yr["b"]("deprecation");var Nr={featureSsbQ218DeprecationModal:Ve["b"].bool,telemeter:Ve["b"].object};var Pr={featureSsbQ218DeprecationModal:false,telemeter:{count:s["noop"]}};var Rr=function(e){gr()(t,e);function t(){pr()(this,t);return fr()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}mr()(t,[{key:"onGo",value:function e(){this.props.telemeter.count("deprecation_modal_click_ssb");window.open(cr())}},{key:"render",value:function e(){if(!this.props.featureSsbQ218DeprecationModal)return null;return Kt.a.createElement(Tr["a"],{title:Ar.t("This is an out-of-date version of Slack"),cancelText:Ar.t("Skip for Now"),goButtonText:Ar.t("Update the App"),onGo:this.onGo},Kt.a.createElement("div",null,Kt.a.createElement("p",null,Ar.t("We\u2019ve released a new version of Slack with an assortment of bug fixes and an all-around smoother experience.")),Kt.a.createElement("p",null,Ar.rt("To continue using Slack, please update your version of the app immediately. Feel free to <a>contact us</a> if you have any questions.",{fallbackHash:"c9631f01ab6b932241f68aa1de3b1f179c33aceb"},function(e){var t=e.text;return Kt.a.createElement(kr["a"],{href:"https://my.slack.com/help/requests/new"},t)}))))}}]);return t}(Vt["Component"]);Rr.displayName="SSBDeprecationModal";Rr.defaultProps=Pr;var Mr=function e(t){return{featureSsbQ218DeprecationModal:Object(E["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal"),telemeter:Object(Qe["c"])({state:t})}};var xr=Object(_r["connect"])(Mr)(Rr);var Dr=r(204);var Fr=new yr["b"]("deprecation");var Lr={canInstallSSB:Ve["b"].bool,isThirdParty:Ve["b"].bool,featureDeprecateQ119OutdatedToast:Ve["b"].bool,onCloseComplete:Ve["b"].func,telemeter:Ve["b"].object};var Br={canInstallSSB:false,isThirdParty:false,featureDeprecateQ119OutdatedToast:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var Ur=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLinkClick=r.onLinkClick.bind(r);r.ref=Kt.a.createRef();return r}mr()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_outdated");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureDeprecateQ119OutdatedToast)return null;var t=Object(Dr["b"])({articleId:"115002037526",zdLocale:Object(er["a"])()});var r=void 0;r=this.props.isThirdParty?Fr.t("You\u2019re accessing Slack with a third-party app that is out-of-date."):this.props.canInstallSSB?Fr.t("This browser is out-of-date. Please update or switch to the Slack app."):Fr.t("This browser is out-of-date and needs to be updated soon.");return Kt.a.createElement(Or["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Kt.a.createElement("div",null,Kt.a.createElement("strong",null,r)," ",Kt.a.createElement(kr["a"],{href:t,onClick:this.onLinkClick},Fr.t("Learn more"))))}}]);return t}(Vt["Component"]);Ur.displayName="OutdatedBrowserToast";Ur.defaultProps=Br;var qr=function e(t){return{featureDeprecateQ119OutdatedToast:Object(E["isFeatureEnabled"])(t,"feature_deprecate_q119_outdated_toast"),telemeter:Object(Qe["c"])({state:t})}};var Gr=Object(_r["connect"])(qr)(Ur);var Hr=new yr["b"]("deprecation");var Wr={canInstallSSB:Ve["b"].bool,isMobile:Ve["b"].bool,featureDeprecateQ119UnsupportedToast:Ve["b"].bool,featureDeprecateQ119Mobile:Ve["b"].bool,onCloseComplete:Ve["b"].func,telemeter:Ve["b"].object};var Vr={canInstallSSB:false,isMobile:false,featureDeprecateQ119UnsupportedToast:false,featureDeprecateQ119Mobile:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var Kr=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLinkClick=r.onLinkClick.bind(r);r.ref=Kt.a.createRef();return r}mr()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_unsupported");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureDeprecateQ119UnsupportedToast)return null;var t=Object(Dr["b"])({articleId:"115002037526",zdLocale:Object(er["a"])()});var r=void 0;this.props.isMobile?this.props.featureDeprecateQ119Mobile&&(r=Hr.t("This browser is no longer supported. Please download the app.")):r=this.props.canInstallSSB?Hr.t("This browser is no longer supported. Please switch browsers or download the app."):Hr.t("This browser is no longer supported \u2014 please switch browsers soon.");return Kt.a.createElement(Or["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Kt.a.createElement("div",null,Kt.a.createElement("strong",null,r)," ",Kt.a.createElement(kr["a"],{href:t,onClick:this.onLinkClick},Hr.t("Learn more"))))}}]);return t}(Vt["Component"]);Kr.displayName="UnsupportedBrowserToast";Kr.defaultProps=Vr;var zr=function e(t){return{featureDeprecateQ119UnsupportedToast:Object(E["isFeatureEnabled"])(t,"feature_deprecate_q119_unsupported_toast"),featureDeprecateQ119Mobile:Object(E["isFeatureEnabled"])(t,"feature_deprecate_q119_mobile"),telemeter:Object(Qe["c"])({state:t})}};var Qr=Object(_r["connect"])(zr)(Kr);var Yr=new yr["b"]("deprecation");var Jr={featureDeprecateQ119OsToast:Ve["b"].bool,onCloseComplete:Ve["b"].func,telemeter:Ve["b"].object};var Xr={featureDeprecateQ119OsToast:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var Zr=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLinkClick=r.onLinkClick.bind(r);r.ref=Kt.a.createRef();return r}mr()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_os");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureDeprecateQ119OsToast)return null;var t=Object(Dr["b"])({articleId:"115002037526",zdLocale:Object(er["a"])()});var r=Yr.t("This operating system is no longer supported \u2014 please update soon.");return Kt.a.createElement(Or["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Kt.a.createElement("div",null,Kt.a.createElement("strong",null,r)," ",Kt.a.createElement(kr["a"],{href:t,onClick:this.onLinkClick},Yr.t("Learn more"))))}}]);return t}(Vt["Component"]);Zr.displayName="OutdatedOSToast";Zr.defaultProps=Xr;var $r=function e(t){return{featureDeprecateQ119OsToast:Object(E["isFeatureEnabled"])(t,"feature_deprecate_q119_os_toast"),telemeter:Object(Qe["c"])({state:t})}};var ea=Object(_r["connect"])($r)(Zr);var ta=new yr["b"]("deprecation");var ra={canInstallSSB:Ve["b"].bool,isThirdParty:Ve["b"].bool,featureDeprecateQ119Modal:Ve["b"].bool,telemeter:Ve["b"].object};var aa={canInstallSSB:false,isThirdParty:false,featureDeprecateQ119Modal:false,telemeter:{count:s["noop"]}};var na=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);return r}mr()(t,[{key:"onGo",value:function e(){var t=this.props,r=t.isThirdParty,a=t.canInstallSSB,n=t.telemeter;r?n.count("deprecation_modal_click_thirdparty"):n.count("deprecation_modal_click_outdated");a?window.open(cr()):window.open(this.getHelpCenterUrl())}},{key:"getHelpCenterUrl",value:function e(){return Object(Dr["b"])({articleId:"115002037526",zdLocale:Object(er["a"])()})}},{key:"renderThirdParty",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;var r=this.props.canInstallSSB;return Kt.a.createElement(Tr["a"],{title:ta.t("This app is out-of-date"),cancelText:ta.t("Skip for Now"),goButtonText:r?ta.t("Use the Slack App"):ta.t("Learn More"),onGo:this.onGo},Kt.a.createElement("div",null,Kt.a.createElement("p",null,ta.t("You\u2019re using a third-party app to access Slack, and it\u2019s now out-of-date. We know it\u2019s a hassle to update or switch apps, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Kt.a.createElement("p",null,r?ta.rt("<strong>Please update your third-party app, if possible, to continue using Slack.</strong> Or, for the finest Slack experience, we recommend switching to the <download>Slack desktop app</download> \u2014 which handily includes automatic updates!",{},function(e){var t=e.tag,r=e.text;if("download"===t)return Kt.a.createElement(kr["a"],{href:lr()},r);return false}):ta.rt("Please update your third-party app, if possible, to continue using Slack. You can also switch to using Slack in one of our <hc>supported browsers</hc>, if you\u2019d prefer.",{},function(e){var r=e.tag,a=e.text;if("hc"===r)return Kt.a.createElement(kr["a"],{href:t.getHelpCenterUrl()},a);return false})),Kt.a.createElement("p",null,ta.rt("Feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var t=e.tag,r=e.text;if("contact"===t)return Kt.a.createElement(kr["a"],{href:"https://my.slack.com/help/requests/new"},r);return false}))))}},{key:"render",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;var r=this.props,a=r.canInstallSSB,n=r.isThirdParty;if(n)return this.renderThirdParty();return Kt.a.createElement(Tr["a"],{title:ta.t("This browser is out-of-date"),cancelText:ta.t("Skip for Now"),goButtonText:a?ta.t("Use the Slack App"):ta.t("Learn More"),onGo:this.onGo},Kt.a.createElement("div",null,Kt.a.createElement("p",null,ta.t("We know it\u2019s a hassle to upgrade, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Kt.a.createElement("p",null,ta.rt("<strong>To continue using Slack, please upgrade to a newer version of one of our <hc>supported browsers</hc> by March 15.</strong> As always, feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var r=e.tag,a=e.text;if("contact"===r)return Kt.a.createElement(kr["a"],{href:"https://my.slack.com/help/requests/new"},a);if("hc"===r)return Kt.a.createElement(kr["a"],{href:t.getHelpCenterUrl()},a);return false})),a&&Kt.a.createElement("p",null,ta.t("For the finest Slack experience, we recommend using our desktop app: You\u2019ll get greater control over your notifications, easy switching between teams, and \u2014 handily \u2014 automatic updates!"))))}}]);return t}(Vt["Component"]);na.displayName="OutdatedBrowserModal";na.defaultProps=aa;var ia=function e(t){return{featureDeprecateQ119Modal:Object(E["isFeatureEnabled"])(t,"feature_deprecate_q119_modal"),telemeter:Object(Qe["c"])({state:t})}};var sa=Object(_r["connect"])(ia)(na);var oa=new yr["b"]("deprecation");var la={canInstallSSB:Ve["b"].bool,featureDeprecateQ119Modal:Ve["b"].bool,telemeter:Ve["b"].object};var ca={canInstallSSB:false,featureDeprecateQ119Modal:false,telemeter:{count:s["noop"]}};var ua=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);return r}mr()(t,[{key:"onGo",value:function e(){var t=this.props.canInstallSSB;this.props.telemeter.count("deprecation_modal_click_unsupported");t?window.open(cr()):window.open(this.getHelpCenterUrl())}},{key:"getHelpCenterUrl",value:function e(){return Object(Dr["b"])({articleId:"115002037526",zdLocale:Object(er["a"])()})}},{key:"render",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;var r=this.props.canInstallSSB;return Kt.a.createElement(Tr["a"],{title:oa.t("This browser is no longer supported"),cancelText:oa.t("Skip for Now"),goButtonText:r?oa.t("Use the Slack App"):oa.t("Learn More"),onGo:this.onGo},Kt.a.createElement("div",null,Kt.a.createElement("p",null,oa.t("We know it\u2019s a hassle to change browsers, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Kt.a.createElement("p",null,oa.rt("<strong>To continue using Slack, please switch to one of our <hc>supported browsers</hc> by March 15.</strong> As always, feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var r=e.tag,a=e.text;if("contact"===r)return Kt.a.createElement(kr["a"],{href:"https://my.slack.com/help/requests/new"},a);if("hc"===r)return Kt.a.createElement(kr["a"],{href:t.getHelpCenterUrl()},a);return false})),r&&Kt.a.createElement("p",null,oa.t("For the finest Slack experience, we recommend using our desktop app: You\u2019ll get greater control over your notifications, easy switching between teams, and \u2014 handily \u2014 automatic updates!"))))}}]);return t}(Vt["Component"]);ua.displayName="UnsupportedBrowserModal";ua.defaultProps=ca;var da=function e(t){return{featureDeprecateQ119Modal:Object(E["isFeatureEnabled"])(t,"feature_deprecate_q119_modal"),telemeter:Object(Qe["c"])({state:t})}};var pa=Object(_r["connect"])(da)(ua);var va=new yr["b"]("deprecation");var ma={featureDeprecateQ119Modal:Ve["b"].bool,telemeter:Ve["b"].object};var ha={featureDeprecateQ119Modal:false,telemeter:{count:s["noop"]}};var fa=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);return r}mr()(t,[{key:"onGo",value:function e(){this.props.telemeter.count("deprecation_modal_click_os");window.open(this.getHelpCenterUrl())}},{key:"getHelpCenterUrl",value:function e(){return Object(Dr["b"])({articleId:"115002037526",zdLocale:Object(er["a"])()})}},{key:"render",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;return Kt.a.createElement(Tr["a"],{title:va.t("This operating system is no longer supported"),truncateTitle:false,cancelText:va.t("Skip for Now"),goButtonText:va.t("Learn More"),onGo:this.onGo},Kt.a.createElement("div",null,Kt.a.createElement("p",null,va.t("We know it\u2019s a hassle to run an update, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Kt.a.createElement("p",null,va.rt("<strong>To continue using Slack, please <hc>update your computer\u2019s operating system</hc> by March 15.</strong> As always, feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var r=e.tag,a=e.text;if("contact"===r)return Kt.a.createElement(kr["a"],{href:"https://my.slack.com/help/requests/new"},a);if("hc"===r)return Kt.a.createElement(kr["a"],{href:t.getHelpCenterUrl()},a);return false}))))}}]);return t}(Vt["Component"]);fa.displayName="OudatedOSModal";fa.defaultProps=ha;var ba=function e(t){return{featureDeprecateQ119Modal:Object(E["isFeatureEnabled"])(t,"feature_deprecate_q119_modal"),telemeter:Object(Qe["c"])({state:t})}};var ga=Object(_r["connect"])(ba)(fa);var _a=604800;var ya=86400;function Oa(e){var t=Object(ur["e"])();var r=Object(U["g"])(e(),"deprecation_toast_last_seen");return t-r<_a}function ka(e){var t=Object(ur["e"])();var r=Object(U["g"])(e(),"deprecation_modal_last_seen");return t-r<ya}function Ea(){var e=Object(ur["e"])();return Object(ur["n"])(e).getHours()>=12}function ja(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_ssb_toast)return true;if(!tr(e))return false;if(Object(E["isFeatureEnabled"])(e(),"feature_ssb_q218_deprecation_modal"))return false;if(Oa(e))return false;if(!Ea())return false;return true}function Ca(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_ssb_modal)return true;if(!tr(e))return false;if(!Object(E["isFeatureEnabled"])(e(),"feature_ssb_q218_deprecation_modal"))return false;if(ka(e))return false;if(!Ea())return false;return true}function Sa(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_outdated_browser_modal)return true;if(!rr(e))return false;if(!Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(ka(e))return false;if(!Ea())return false;return true}function wa(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_unsupported_browser_modal)return true;if(!ar(e))return false;if(!Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(ka(e))return false;if(!Ea())return false;return true}function Ia(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_outdated_os_modal)return true;if(!nr(e))return false;if(!Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(ka(e))return false;if(!Ea())return false;return true}function Ta(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_outdated_browser_toast)return true;if(!rr(e))return false;if(!Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_outdated_toast"))return false;if(Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(Oa(e))return false;if(!Ea())return false;return true}function Aa(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_unsupported_browser_toast)return true;if(!ar(e))return false;if(!Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_unsupported_toast"))return false;if(Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(Oa(e))return false;if(!Ea())return false;return true}function Na(e){if(Object(Zt["urlQueryStringParse"])(window.location).deprecation_show_outdated_os_toast)return true;if(!nr(e))return false;if(!Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_os_toast"))return false;if(Object(E["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(Oa(e))return false;if(!Ea())return false;return true}function Pa(e){e(Object(H["d"])({pref:"deprecation_toast_last_seen",value:Object(ur["e"])()}))}function Ra(e){e(Object(H["d"])({pref:"deprecation_modal_last_seen",value:Object(ur["e"])()}))}function Ma(e,t){var r=Object(Qe["c"])({getState:t});if(Ca(t)){Ra(e);e(Object(Qt["openModal"])({element:Kt.a.createElement(xr,null)}));r.count("deprecation_modal_ssb");return true}if(Sa(t)){Ra(e);e(Object(Qt["openModal"])({element:Kt.a.createElement(sa,{canInstallSSB:or(),isThirdParty:ir()})}));ir()?r.count("deprecation_modal_thirdparty"):r.count("deprecation_modal_outdated");return true}if(wa(t)){Ra(e);e(Object(Qt["openModal"])({element:Kt.a.createElement(pa,{canInstallSSB:or()})}));r.count("deprecation_modal_unsupported");return true}if(Ia(t)){Ra(e);e(Object(Qt["openModal"])({element:Kt.a.createElement(ga,null)}));r.count("deprecation_modal_os");return true}return false}function xa(e,t){var r=Object(Qe["c"])({getState:t});if(ja(t)){Pa(e);e(Object(zt["enqueueToast"])({element:Kt.a.createElement(Ir,null)}));r.count("deprecation_toast_ssb");return true}if(Ta(t)){Pa(e);e(Object(zt["enqueueToast"])({element:Kt.a.createElement(Gr,{canInstallSSB:or(),isThirdParty:ir()})}));r.count("deprecation_toast_outdated");return true}if(Aa(t)){Pa(e);e(Object(zt["enqueueToast"])({element:Kt.a.createElement(Qr,{canInstallSSB:or(),isMobile:sr()})}));r.count("deprecation_toast_unsupported");return true}if(Na(t)){Pa(e);e(Object(zt["enqueueToast"])({element:Kt.a.createElement(ea,null)}));r.count("deprecation_toast_os");return true}return false}var Da=Object(we["b"])("shows a deprecation warning if and when appropriate",function(e,t){if(!Object(E["isClientApp"])(t()))return false;if(Ma(e,t))return true;if(xa(e,t))return true;return false});function Fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();if(t)return;if(!Object(b["isFirstConnection"])(n))return;if(!Object(ne["isWindowFocused"])(n))return;r(Da())}function La(e,t,r){var a=r();if(!Object(ne["isWindowFocused"])(a))return;if(!Object(b["wasPreviouslyConnected"])(a))return;t(Da())}Object(P["d"])({actions:[b["connected"]],sideEffect:Fa});Object(P["d"])({actions:[ne["innerUpdateFocus"]],sideEffect:La});var Ba=r(193);var Ua=r(42);var qa=r(100);var Ga="DESKTOP-SIDE-EFFECT";Object(P["a"])({actions:[Ba["updateFromDesktop"]],sideEffect:function e(t){Object(Y["a"])().info(Ga,"Update from desktop for keys ",Object.keys(t.payload))}});var Ha=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.actions,a=t.sideEffect;return Object(P["d"])({actions:r,sideEffect:function e(t,r,n){Object(Y["a"])({getState:n}).info(Ga,"Reacting to ",t);return a(t,r,n)}})};Ha({actions:[Ba["startDesktopDownload"]],sideEffect:function e(t,r,a){var n=t.payload,i=n.fileId,s=n.downloadUrl,o=n.showFlexpane;var l=a();var c=Object(Ie["b"])(l);var u=Object(E["getCurrentUserId"])(l);s||Object(Y["a"])({getState:a}).error(Ga,"Received startDesktopDownload with missing url");o&&r(Object(qa["f"])());Object(Ba["getTeamDownloadIds"])(l).includes(i)&&r(Object(Ba["highlightDownload"])(i));Object(Ua["startDownload"])({id:i,teamId:c,url:s,userId:u})}});var Wa=function e(t,r){Ha({actions:[t],sideEffect:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.payload;var n=arguments[1];var i=arguments[2];var s=Object(Ie["b"])(i());r(a,s)}})};Wa(Ba["showDesktopDownload"],Ua["showDownload"]);Wa(Ba["openDesktopDownload"],Ua["openDownload"]);Wa(Ba["cancelDesktopDownload"],Ua["cancelDownload"]);Wa(Ba["retryDesktopDownload"],Ua["retryDownload"]);Wa(Ba["removeDesktopDownload"],Ua["removeDownload"]);Wa(Ba["resumeDesktopDownload"],Ua["resumeDownload"]);Wa(Ba["pauseDesktopDownload"],Ua["pauseDownload"]);Ha({actions:[Ba["clearTeamDesktopDownloads"]],sideEffect:function e(t,r,a){return Object(Ua["clearDownloads"])(Object(Ie["b"])(a()))}});var Va=r(47);var Ka=r(845);function za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];Object(Ka["b"])(t)?r(Object(Ka["a"])(t)):r(Object(Va["g"])(t))}function Qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];r(Object(Va["h"])(t))}function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];r(Object(Va["e"])(t))}Object(P["b"])([{actions:[b["socketErrorMessageReceived"]],sideEffect:function e(){return za.apply(void 0,arguments)}},{actions:[b["degradedModeMessageReceived"]],sideEffect:function e(){return Qa.apply(void 0,arguments)}},{actions:[b["socketMessageReceived"]],sideEffect:function e(){return Ya.apply(void 0,arguments)}}]);var Ja={};Object.defineProperty(Ja,"handleSocketErrorMessage",{get:function e(){return za},set:function e(t){za=t}});Object.defineProperty(Ja,"handleSocketMessage",{get:function e(){return Ya},set:function e(t){Ya=t}});var Xa=r(252);var Za=r(180);var $a=r(847);var en="DND";var tn=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload;var a=arguments[1];var n=arguments[2];var i=n();if(!Object(E["isFeatureEnabled"])(i,"feature_sonic_dnd_manager"))return;if(r)return;var o=Object(s["keys"])(Object(Za["getAllDndSchedules"])(i));if(Object(s["isEmpty"])(o))return;Object(Y["a"])({getState:n}).info(en,"Flushing and fetching fresh DND times for the following members after connecting to the websocket: "+o);a(Object(Za["removeDnd"])({memberIds:o}));a(Object(Za["updateSnooze"])({snoozeEnabled:false,snoozeEndTs:void 0}));a(Object($a["c"])())};Object(P["d"])({actions:[b["connected"],Xa["b"]],sideEffect:tn});var rn=r(43);var an=r(377);var nn=r(857);var sn=r(1197);var on=r(470);var ln=function(){var e=Object(rn["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a,n,i,s,o,l,c,u;return regeneratorRuntime.wrap(function e(d){while(1)switch(d.prev=d.next){case 0:a=r();n=mn(a);if(n){d.next=4;break}return d.abrupt("return",Promise.resolve());case 4:i=Object(Y["a"])({state:a,label:cn});s=Object(Qe["c"])({getState:r});i.info("Checking for EKM change events");s.count("hc_check_ekm");d.next=10;return Object(rn["resolve"])(t(Object(an["c"])()).tap(function(){s.count("hc_check_ok")}).catch(function(e){var t=e&&e.message?e.message:"unknown_error";s.count("hc_check_error");s.count("hc_check_error_"+t);i.warn("Checking for changes failed due to "+t);return{ekmChangeTimestamp:void 0}}));case 10:o=d.sent;l=o.ekmChangeTimestamp;if(l){d.next=14;break}return d.abrupt("return",Promise.resolve());case 14:c=Object(sn["getLastEKMChangeTimestamp"])(a);i.info("Last ekm change known - "+c+"; Latest ekm change - "+l);u=parseFloat(l)>parseFloat(c);if(u){s.count("hc_clear_cache_ekm");i.info("EKM clear cache event occurred");if(Object(fe["a"])()){if(Ua["isDesktop"]){i.info("Clearing desktop file cache");Object(Ua["clearCache"])()}Object(Mt["a"])({reason:"EKM change at "+l,reasonKey:"ekm_change"})}else Object(Mt["b"])({reason:"EKM change at "+l,reasonKey:"ekm_change"})}return d.abrupt("return",Promise.resolve());case 19:case"end":return d.stop()}},e,this)}));return function t(r,a){return e.apply(this,arguments)}}();var cn="EKM-CHANGES";var un={};var dn=288e5;var pn=5e3;function vn(e){return Object(E["isFeatureEnabled"])(e,"feature_ekm_message_revocation_polling_test")?pn:dn}function mn(e){return Object(E["isClientApp"])(e)&&Object(nn["isEKMPurchased"])(e)}function hn(e){return mn(e)}function fn(e){return!!un[e]}function bn(e,t,r){var a=r();var n=Object(Ie["b"])(a);hn(a)?gn(n,t,r):_n(n,r)}function gn(e,t,r){if(fn(e))return;var a=r();var n=Object(Y["a"])({state:a,label:cn});var i=Object(on["a"])(vn(a),.8,1.2);un[e]=setInterval(function(){ln.call({},t,r);n.info("Called conversation.historyChanges API from poller for team "+e)},i);n.info("Started polling conversation.historyChanges API for team "+e+" on an interval of "+i+" ms.")}function _n(e,t){if(!fn(e))return;clearInterval(un[e]);delete un[e];var r=Object(Y["a"])({state:t(),label:cn});r.info("Stopped polling conversation.historyChanges API for team "+e)}function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(t)return;var n=a();if(!mn(n))return;if(Object(b["isFirstConnection"])(n)){bn({},r,a);if(!Object(fe["a"])())return}ln(r,a)}var On={};Object.defineProperties(On,{connectedSideEffect:{get:function e(){return yn},set:function e(t){yn=t}},dispatchFetchHistoryChanges:{get:function e(){return ln},set:function e(t){ln=t}},pollTimers:{get:function e(){return un}},isPolling:{get:function e(){return fn}},maybeStartPolling:{get:function e(){return bn},set:function e(t){bn=t}},shouldDetectEKMChanges:{get:function e(){return mn},set:function e(t){mn=t}},shouldPoll:{get:function e(){return hn},set:function e(t){hn=t}},startPolling:{get:function e(){return gn},set:function e(t){gn=t}},stopPolling:{get:function e(){return _n},set:function e(t){_n=t}}});Object(P["b"])([{actions:[b["connected"],Xa["b"]],sideEffect:yn},{actions:[nn["setPaidFeatures"]],sideEffect:bn}]);var kn=r(862);function En(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];Object(kn["c"])(a,t)}function jn(e,t,r){Object(kn["d"])(r)}function Cn(e,t,r){var a=r();var n=Object(Ge["getLastKnownEventTimestamp"])(a);if(!n)return;Object(kn["f"])(r,{start:n})}function Sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];Object(kn["e"])(a,t)}Object(P["b"])([{actions:[b["connected"]],sideEffect:En},{actions:[b["disconnected"]],sideEffect:jn},{actions:[Xa["b"]],sideEffect:Cn},{actions:[b["socketMessageReceived"]],sideEffect:Sn}]);function wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Object(Mt["a"])({reason:"eventlog.history "+(t||"no reason provided"),reasonKey:"eventlog_gap"})}Object(P["d"])({actions:[Ge["eventlogGapDetected"]],sideEffect:wn});var In={handleEventlogGap:wn};var Tn=r(340);var An=r(691);function Nn(e,t,r){var a=r();Object(An["f"])(Object(Tn["getExpandables"])(a))}Object(P["d"])({actions:[Tn["setExpanded"],Tn["bulkSetExpanded"]],sideEffect:Nn});var Pn=r(437);var Rn=r(85);var Mn=r(1536);function xn(e,t,r){var a=r();var n=e.payload.id;var i=Object(Pn["getFileRefreshState"])(a,n);if(i!==Pn["STATE"].REFRESHING)return;var s=Object(Pn["getFileRefreshTimeout"])(a,n);s&&clearTimeout(s);var o=setTimeout(function(){return t(Object(Pn["refreshReset"])({fileId:n,timeout:o}))},Mn["a"]);t(Object(Pn["refreshDone"])({fileId:n}))}Object(P["d"])({actions:[Rn["addFile"]],sideEffect:xn});var Dn=r(282);function Fn(e,t,r){var a=r();e.forEach(function(e){var t=Object(Rn["getFileById"])(a,e);Object(Dn["d"])(t)})}function Ln(e,t,r){var a=e.payload;if(!a)return;Fn([a.id],t,r)}function Bn(e,t,r){var a=e.payload;if(!a)return;Fn(a.map(function(e){return e.id}),t,r)}Object(P["d"])({actions:[Rn["addFile"]],sideEffect:Ln});Object(P["d"])({actions:[Rn["bulkAddFiles"]],sideEffect:Bn});function Un(e,t,r){var a=r();if(!Object(K["b"])(a))return;if(!Object(s["get"])(window,"desktop.app.updateDragRegion"))return;var n=Object(Ie["b"])(a);var i=e.payload;if(n!==i)return;Object(Y["a"])({getState:r}).info("GLOBAL-NAV","Resetting SSB drag region");window.desktop.app.updateDragRegion([])}function qn(e,t,r){var a="isTitleBarForcedByUser";if(!Object(Ua["hasPreference"])(a))return;var n=r();if(!Object(K["b"])(n)){if(Object(E["isFeatureEnabled"])(n,"feature_global_nav_rollback")){if(false===Object(Ua["getPreference"])(a))return;Object(Ua["setPreference"])({name:a,value:false});Object(Y["a"])({getState:r}).info("GLOBAL-NAV","Resetting Desktop Nav SSB frame changes")}return}if(true===Object(Ua["getPreference"])(a))return;Object(Ua["setPreference"])({name:a,value:true});Object(Y["a"])({getState:r}).info("GLOBAL-NAV","Enabling desktop UI frame changes for next boot")}Object(P["d"])({actions:[Ba["setActiveTeam"]],sideEffect:Un});Object(P["d"])({actions:[ce["setFullyBooted"]],sideEffect:qn});var Gn=r(20);var Hn=Object(Gn["b"])("TS.ui.fs_modal.isShowing",function(){return null});var Wn=Object(Gn["b"])("TS.ui.fs_modal.close",function(){return null});var Vn=Object(Gn["b"])("TS.ui.fs_modal.start",function(){return null});var Kn=r(1555);var zn={},Qn=zn.isWorkspaceBooted;var Yn={},Jn=Yn.purgeStoredModel;var Xn="MIGRATION";function Zn(e){if(!Object(fe["a"])())return false;var t=Object(p["b"])();if(!t)return false;return!Qn(t.getState(),e)}var $n=Object(we["b"])("Handles an active enterprise migration",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.data,n=void 0===a?{}:a,s=r.method;var l=t();var c=Object(h["a"])()?"allow_reload":void 0;var u=Object(E["getFromBootData"])(l,"api_active_migration_error_response_type")||c;var d=Object(Ie["b"])(l);var p=Zn(d)||Object(E["getFromBootData"])(l,"ignore_api_active_migration_error");var v=Object(Y["a"])({getState:t});Object(h["a"])()&&Jn(d);if(!u){v.info(Xn,'API returned "active_migration" (enterprise org migration) for '+s+" - not alerting or reloading because no api_active_migration_error_response_type set.",n);return true}if(p){v.info(Xn,'API returned "active_migration" (enterprise org migration) for '+s+' - skipping "'+u+'" because ignore_api_active_migration_error set.',n);return true}switch(u){case"allow_reload":var m=Object(E["getFromBootData"])(l,"active_migration_reload_underway");if(!m){v.warn('About to reload because API returned "active_migration" (enterprise org migration) for '+s+" and api_active_migration_error_response_type allows reload.",n);e(Object(E["setBootData"])(i()({},l.bootData,{active_migration_reload_underway:true})));Object(Mt["b"])({msg:false,reason:'API returned "active_migration" (enterprise org migration) for '+s+" and api_active_migration_error_response_type allows reload",reasonKey:"active_migration_underway"})}break;case"show_dialog":var f=Object(E["getFromBootData"])(l,"user_saw_migration_dialog");if(f)v.info(Xn,'API returned "active_migration" (enterprise org migration) for '+s+", but user has already seen dialog. Doing nothing.");else{v.info(Xn,'API returned "active_migration" (enterprise org migration) for '+s+". Showing migration dialog.");Vn({title:"This team is joining an Enterprise Organization!",body:"Apologies for the interruption. This team is currently being migrated into "+(n.enterprise_name?"the <b>"+o.a.escape(n.enterprise_name)+"</b> Organization":"an Organization")+", which can take some time to complete. In the meantime, you won\u2019t be able to use it, but we\u2019ll email you once it\u2019s done.",show_cancel_button:false,show_go_button:false,disable_default_controls:true,disable_esc:true});e(Object(E["setBootData"])(i()({},l.bootData,{user_saw_migration_dialog:true})))}break;default:v.warn('API returned "active_migration" (enterprise org migration) for '+s+', but api_active_migration_error_response_type of "'+u+'" not recognized - doing nothing.',n)}return true});$n.propTypes={data:Ve["b"].object,method:Ve["b"].string};function ei(e,t){t($n(e.payload))}Object(P["d"])({actions:[Kn["a"]],sideEffect:ei});var ti=r(365);var ri=r(31);var ai=r(433);var ni={},ii=ni.fetchAuthAndReturnToUrl;var si=new yr["b"]("client");var oi={team:Ve["b"].object.isRequired};var li=function e(){ii("/"+Object(ai["b"])())};var ci=function e(t){var r=t.team;return Kt.a.createElement(ti["a"],{onClose:li,showCancelButton:false,title:""},si.rt("You have been removed from <strong>{team_name}</strong>.",{team_name:Object(ri["getTeamDisplayName"])(r)}))};ci.displayName="UserRemovedFromTeamAlertDialog";var ui=ci;var di=ui;var pi=Object(Gn["b"])("TS.maybeShowRateLimitedDialog");var vi=r(269);var mi=new yr["b"]("access_limited");var hi=function(e){gr()(t,e);function t(){pr()(this,t);return fr()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}mr()(t,[{key:"render",value:function e(){return Kt.a.createElement(Tr["a"],{onClose:this.props.onClose,showCancelButton:false,goButtonText:mi.t("Try Again"),title:mi.t("Your current network has blocked this workspace."),truncateTitle:false},Kt.a.createElement(Vt["Fragment"],null,mi.t("Your current network will only allow you to access certain Slack workspaces (usually, just the ones you use for work)."),Kt.a.createElement("br",null),Kt.a.createElement("br",null),mi.t("To get connected, change networks and try again.")))}}]);return t}(Vt["Component"]);hi.displayName="AccessLimitedDialog";hi.defaultProps={onClose:s["noop"]};var fi=hi;var bi=r(187);var gi=new yr["b"]("access_limited");var _i=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onCloseComplete=r.onCloseComplete.bind(r);r.onLinkClick=r.onLinkClick.bind(r);r.ref=Kt.a.createRef();return r}mr()(t,[{key:"onCloseComplete",value:function e(){this.props.onClose()}},{key:"onLinkClick",value:function e(){this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){var t=this;return Kt.a.createElement(Or["b"],{ref:this.ref,shouldAutoFade:false,showCloseButton:false,onCloseComplete:this.onCloseComplete},Kt.a.createElement("div",null,gi.rt("<strong>Your current network has blocked this workspace.</strong> Your current network will only allow you to access certain Slack workspaces (usually, just the ones you use for work). To get connected, change networks and <a>try again</a>.",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.tag,a=e.text;return"strong"===r?Kt.a.createElement("strong",null,a):Kt.a.createElement(bi["a"],{onClick:t.onLinkClick},a)})))}}]);return t}(Vt["Component"]);_i.displayName="AccessLimitedToast";_i.defaultProps={onClose:s["noop"]};var yi=_i;var Oi={};var ki=Object(We["e"])("Opens a modal to notify user that Slack access has been limited on this network",function(e,t){var r=t();var a=Object(Ie["b"])(r);if(Oi[a])return;Oi[a]=true;e(Object(Ke["e"])());e(Object(vi["halt"])());var n=function t(){Object(fe["a"])()&&e(Object(zt["dismissCurrentToast"])());Oi[a]=false;e(Object(vi["clearFastReconnectUrl"])());e(Object(Ke["d"])());e(Object(vi["unhalt"])())};Object(fe["a"])()?e(Object(zt["enqueueToast"])({element:Kt.a.createElement(yi,{onClose:n})})):e(Object(Qt["openModal"])({element:Kt.a.createElement(fi,{onClose:n})}))});var Ei=ki;var ji=r(35);var Ci={},Si=Ci.fetchAuthAndReturnToUrl,wi=Ci.getFetchAuthUrl;var Ii=false;var Ti=Object(we["b"])("Handle when a user is removed from a team",function(e,t){var r=t();var a=Object(ji["d"])(r);if(Ii)return;Ii=true;Object(Y["a"])({getState:t}).warn("You have been removed from the "+Object(ri["getTeamDisplayName"])(a)+" workspace.");if(!Object(h["a"])()){Object(ve["j"])(a.id);return}e(Object(Qt["openModal"])({element:Kt.a.createElement(di,{team:a})}))});Ti.propTypes=Ve["b"].string;var Ai=Object(we["b"])("Handle invalid auth by refetching or reloading",function(e,t,r){if(Object(Xt["isElectronAndAtLeastVersion"])("3.0.0")&&Object(ne["isWindowUnloading"])(t()))return;Object(Ua["invalidateAuth"])();if(Object(h["a"])()){Object(Y["a"])({getState:t}).info("Fetching auth due to invalid_auth error");Si("/"+Object(ai["b"])())}else Object(Mt["b"])({reason:"Reloading due to error "+r,reasonKey:"invalid_auth"})});Ai.propTypes=Ve["b"].string;function Ni(){Object(Mt["b"])({noCache:true,reason:"forceReloadWithReason",reasonKey:"start_error_force_reload"})}function Pi(e){Object(Mt["a"])({reason:"Cold booting due to '"+e+"' error",reasonKey:"start_error_"+e})}function Ri(){pi()}function Mi(e){e(Ei())}function xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.error("2FA required - redirecting to gantry auth");var t=wi(window.location.pathname);try{window.location.assign(t)}catch(e){location=t}return null}var Di=Object(we["b"])("Handle when a user is removed from a team",function(e,t,r){var a=Object(Y["a"])({getState:t});a.info("Handling start error '"+r+"'");switch(r){case"user_removed_from_team":return e(Ti(r));case"account_inactive":case"team_disabled":case"invalid_auth":return e(Ai(r));case"two_factor_setup_required":return xi(a);case"force_reload":return Ni();case"clear_cache":case"org_login_required":case"team_added_to_org":if(Object(h["a"])()){a.info("Re-fetching auth and forcing cold boot due to start error: "+r);var n=Object(Zt["setUrlQueryStringValue"])(location.search+location.hash,"force_cold_boot",1);return Si(n)}return Pi(r);case"ratelimited":return Ri();case"accesslimited":return Mi(e);default:var i="Unknown start error '"+r+"'";a.error(i);throw new Error(i)}});Di.propTypes=Ve["b"].string;function Fi(e,t){var r=e.payload;return t(Di(r))}Object(P["d"])({actions:[Ka["a"]],sideEffect:Fi});var Li=r(4198);var Bi=r(45);var Ui=r(21);var qi=r(2308);var Gi=new yr["b"]("toast_new_locale");var Hi={locale:Ve["b"].string.isRequired,featureNewLocaleToast:Ve["b"].bool,featureLocaleToastTranslation:Ve["b"].bool,fadeDelay:Ve["b"].number,onClose:Ve["b"].func,onLinkClick:Ve["b"].func,openChangeLanguageDialog:Ve["b"].func.isRequired,clogger:Ve["b"].object.isRequired};var Wi={featureNewLocaleToast:false,featureLocaleToastTranslation:false,fadeDelay:0,onClose:s["noop"],onLinkClick:s["noop"]};var Vi=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLinkClick=r.onLinkClick.bind(r);r.onCloseClick=r.onCloseClick.bind(r);r.ref=Kt.a.createRef();return r}mr()(t,[{key:"componentDidMount",value:function e(){this.trackClog(dt()({},Ui["y"].action,Ui["w"].IMPRESSION))}},{key:"onLinkClick",value:function e(){var t,r=this;var a=this.props,n=a.locale,e=a.onLinkClick;e();var i=(t={},dt()(t,Ui["y"].action,Ui["w"].CLICK),dt()(t,Ui["y"].ui_element,Ui["z"].LINK_LOCALE_TRIGGER),dt()(t,Ui["y"].ui_component,Ui["x"].TOAST),t);this.trackClog(i);Promise.resolve(this.props.openChangeLanguageDialog({locale:n,options:{referringEventId:Ui["l"].I18N_NEW_LOCALE_TOAST_SHOWN,referringUiContext:i}})).then(function(){var e=r.ref.current&&r.ref.current.getWrappedInstance&&r.ref.current.getWrappedInstance();e&&e.hideToast()})}},{key:"onCloseClick",value:function e(){var t;this.trackClog((t={},dt()(t,Ui["y"].action,Ui["w"].CLOSE),dt()(t,Ui["y"].ui_element,Ui["z"].BTN_CLOSE),t))}},{key:"getMessage",value:function e(){var t=this;var r=this.props,a=r.featureLocaleToastTranslation,n=r.locale;var i=Object(er["f"])();if(!("en-US"===i||"es-ES"===i)&&!a)return null;var s=void 0;var o=void 0;switch(n){case"es-LA":s="\xa1Hola! \ud83d\udc4b";o=Gi.t("You can now use Slack in Latin American Spanish.");break;case"pt-BR":s="Ol\xe1! \ud83d\udc4b";o=Gi.t("You can now use Slack in Brazilian Portuguese.");break;case"en-GB":s="Hello! \ud83d\udc4b";o="You can now use Slack in UK English.";break;default:return null}var l=Gi.rt("<Link>Give it a try</Link>, or change your language anytime in Preferences.",null,function(e){var r=e.text;return Kt.a.createElement(kr["a"],{onClick:t.onLinkClick},Kt.a.createElement("strong",null,r))});return Kt.a.createElement(Vt["Fragment"],null,s," ",o," ",l)}},{key:"trackClog",value:function e(t){var r=this.props,a=r.clogger,n=r.locale;a.track(Ui["l"].I18N_NEW_LOCALE_TOAST_SHOWN,{contexts:{locale:n,ui_context:i()({},t,dt()({},Ui["y"].ui_component,Ui["x"].TOAST))}})}},{key:"render",value:function e(){var t=this.props,r=t.featureNewLocaleToast,a=t.fadeDelay,n=t.locale,i=t.onClose;if(!r)return null;var s=!!Object(er["e"])()[n];if(!s)return null;var o=this.getMessage();if(!o)return null;var l=cdn_url+"/b1e00/img/i18n/new-locale-toast.png";var c=l.replace(".png","@2x.png");return Kt.a.createElement(Or["b"],{toastClasses:"c-new_locale_toast",closeButtonClasses:"c-new_locale_toast__close_button",showCloseButton:true,shouldAutoFade:!!a,fadeDelay:a,ref:this.ref,onCloseClick:this.onCloseClick,onClose:i},Kt.a.createElement("div",null,Kt.a.createElement("img",{className:"c-new_locale_toast__image",src:l,srcSet:c+" 2x",alt:""}),Kt.a.createElement("div",{className:"c-new_locale_toast__content"},o)))}}]);return t}(Vt["PureComponent"]);Vi.displayName="NewLocaleToast";Vi.defaultProps=Wi;var Ki=function e(t){return{featureNewLocaleToast:Object(E["isFeatureEnabled"])(t,"feature_new_locale_toast"),featureLocaleToastTranslation:Object(E["isFeatureEnabled"])(t,"feature_locale_toast_translation"),clogger:Object(Bi["a"])({state:t})}};var zi={openChangeLanguageDialog:function e(){return Li["a"].apply(void 0,arguments)}};var Qi=Object(_r["connect"])(Ki,zi)(Vi);Qi.propTypes={onCloseComplete:Ve["b"].func};var Yi=function e(t){return Kt.a.createElement(Qi,t)};Yi.displayName="newLocaleToastFactory";var Ji=Qi;var Xi=r(25);var Zi=Object(Xi["a"])("Fetches a new locale to suggest based on user signals",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason;return e(Object(ze["a"])({method:"i18n.locale.suggestNew",args:{},reason:a}))});Zi.propTypes={reason:Ve["b"].string};var $i=r(122);var es="seen_p2_locale_change_message";var ts=3e5;var rs=function e(t){return{"pt-BR":"i18n_toast_pt_br","en-GB":"i18n_toast_en_gb","es-LA":"i18n_toast_es_la"}[t]};var as=Object(we["b"])("Update pref value to when new locale toast has been seen",function(e,t,r){return e(Object(H["d"])({pref:es,value:r}))});as.propTypes={value:Ve["b"].number};var ns=Object(we["b"])("Maybe show the new locale toast",function(e,t){var r=t();if(!Object(E["isFeatureEnabled"])(r,"feature_new_locale_toast"))return Promise.resolve();var a=Object(U["g"])(r,es);var n=!!a;var i=Date.now()-a;if(n&&i>ts)return Promise.resolve();return e(Zi()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.locale;var i=function t(){return e(as(Date.now()-ts))};if(!a||a===Object(er["f"])())return i();var s=rs(a);if(s&&"treatment"!==Object($i["getGroupForUser"])(r,s))return Promise.resolve();var o=Yi({locale:a,onLinkClick:i,onClose:i,fadeDelay:ts});n||e(as(Date.now()));return e(Object(zt["enqueueToast"])({element:o}))})});var is=ns;var ss=function e(t,r,a){var n=a();if(!Object(b["isFirstConnection"])(n)||!(Object(E["isClientApp"])(n)||Object(E["isWebApp"])(n)))return;r(is())};Object(P["d"])({actions:[b["connected"]],sideEffect:ss});var os=r(221);function ls(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;var r=Object(w["d"])(a,t);Object(os["a"])(r)})}function cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();var i=Object(w["d"])(n,t.id);Object(os["e"])(i)}function us(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(A["isPrivateChannel"])(e))Object(os["f"])(i()({},e,{is_member:false}));else{var t=Object(w["d"])(a,e.id);Object(os["f"])(t)}})}function ds(e){var t=e&&e.payload&&e.payload.channels;if(!t||!t.length)return;t.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(os["j"])(e)})}function ps(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(w["d"])(a,e.id);Object(os["m"])(t)})}function vs(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(w["d"])(a,e.id);if(Object(A["isExternallySharedChannel"])(t)&&!Object(A["isPendingExternallySharedChannel"])(t)){Object(os["k"])(t);var r=Object(C["a"])(a);r===t.id&&Object(os["c"])(t)}else Object(A["isPendingExternallySharedChannel"])(t)?Object(os["l"])(t):Object(A["isExternallySharedChannel"])(t)||Object(A["isPendingExternallySharedChannel"])(t)?Object(A["isPrivateChannel"])(t)&&Object(os["j"])(t):Object(os["p"])(t)})}function ms(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(w["d"])(a,e.id);Object(os["i"])(t,e.purpose.creator,e.purpose.value)})}function hs(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(w["d"])(a,e.id);Object(os["n"])(t,e.topic.userId,e.topic.value)})}function fs(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(w["d"])(a,e.id);Object(os["o"])(t)})}Object(P["b"])([{actions:[f["a"]],sideEffect:ls,reasons:[S["a"].ARCHIVE_CHANNEL]},{actions:[f["b"]],sideEffect:cs},{actions:[f["a"]],sideEffect:us,reasons:[S["a"].LEAVE_CHANNEL]},{actions:[f["a"]],sideEffect:ds,reasons:[S["a"].RENAME_CHANNEL]},{actions:[f["a"]],sideEffect:ps,reasons:[S["a"].ORG_ACCESS]},{actions:[f["a"]],sideEffect:vs,reasons:[S["a"].CHANNEL_UPDATED]},{actions:[f["a"]],sideEffect:ms,reasons:[S["a"].SET_PURPOSE]},{actions:[f["a"]],sideEffect:hs,reasons:[S["a"].SET_TOPIC]},{actions:[f["a"]],sideEffect:fs,reasons:[S["a"].UNARCHIVE_CHANNEL]}]);var bs=Object(Gn["b"])("TS.redux.socket.connectedSig.dispatch");var gs=Object(Gn["b"])("TS.redux.socket.disconnectedSig.dispatch");var _s=Object(Gn["b"])("TS.redux.socket.provisionallyConnectedSig.dispatch");var ys=Object(Gn["b"])("TS.redux.socket.socketErrorMessageReceivedSig.dispatch");var Os=Object(Gn["b"])("TS.redux.socket.socketMessageReceivedSig.dispatch");var ks=Object(Gn["b"])("TS.redux.socket.troubleConnectingSig.dispatch");var Es=Object(Gn["b"])("TS.redux.socket.waitingForRateLimitSig.dispatch");function js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;bs(t)}function Cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;_s(t)}function Ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;ys(t)}function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Os(t)}function Is(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Es(t)}function Ts(){gs.apply(void 0,arguments)}function As(){ks.apply(void 0,arguments)}Object(P["b"])([{actions:[b["connected"]],sideEffect:js},{actions:[b["disconnected"]],sideEffect:Ts},{actions:[b["provisionallyConnected"]],sideEffect:Cs},{actions:[b["socketErrorMessageReceived"]],sideEffect:Ss},{actions:[b["socketMessageReceived"]],sideEffect:ws},{actions:[b["troubleConnecting"]],sideEffect:As},{actions:[b["waitingForRateLimit"]],sideEffect:Is}]);var Ns=r(241);var Ps=Object(Gn["b"])("TS.membership.membership_counts_need_refetch_sig.dispatch");var Rs=r(17);function Ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=a();var i=false;var s=Object(w["d"])(n,t.prevChannelId,i);!Object(A["isMemberOfChannel"])(s)&&Object(A["isPublicChannel"])(s)&&r(Object(Ns["clearMemberCounts"])(t.prevChannelId))}function xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(t)return;var n=a();var s=Object(C["a"])(n);var o=Object(Ns["getCachedMemberCounts"])(n,s);r(Object(Ns["clearAllMemberCounts"])());s&&o&&r(Object(Ns["addOrReplaceMemberCounts"])({channelId:s,countInfo:i()({},o,{should_refetch:true})}));Ps()}function Ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();r(Object(Ns["updateAndInvalidateMemberCounts"])({channelId:t.id,memberCountDelta:1,restrictedMemberCountDelta:Object(Rs["isRestricted"])(Object(T["b"])(n))?1:0,appCountDelta:0}))}function Fs(e,t){var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Ns["clearMemberCounts"])(e.id))})}Object(P["b"])([{actions:[j["e"]],sideEffect:Ms},{actions:[b["connected"],Xa["b"]],sideEffect:xs},{actions:[f["b"]],sideEffect:Ds},{actions:[f["a"]],sideEffect:Fs,reasons:[S["a"].LEAVE_CHANNEL]}]);var Ls=r(1186);var Bs=r(3919);var Us=r(3927);var qs=r(4403);var Gs=r(3950);var Hs=r(832);var Ws=new yr["b"]("client");var Vs={user:Ve["b"].object.isRequired};var Ks=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={loading:false};r.onConfirm=r.onConfirm.bind(r);return r}mr()(t,[{key:"onConfirm",value:function e(t){t.stopPropagation();if(this.state.loading)return;this.setState(function(){return{loading:true}});Object(Mt["b"])({reason:"User initiated refresh from the role change refresh dialog because the user\u2019s role changed while they were connected",reasonKey:"role_change_refresh_dialog"})}},{key:"render",value:function e(){var t=this.props.user;var r=this.state.loading;var a=null;a=t.is_ultra_restricted?Ws.t("Your account permissions have changed! You are now a single-channel guest of the workspace. You must now reload for the changes to take effect."):t.is_restricted?Ws.t("Your account permissions have changed! You are now a multi-channel guest of the workspace. You must now reload for the changes to take effect."):Ws.t("Your account permissions have changed! You are now a full member of the workspace. You must now reload for the changes to take effect.");return Kt.a.createElement(Ls["a"],{closeModal:this.onConfirm,role:"alertdialog",contentLabel:Ws.t("Reload required"),labelledby:"role_change_refresh_confirmation_title_bar"},Kt.a.createElement(Bs["a"],{title:Ws.t("Reload required"),id:"role_change_refresh_confirmation_title_bar"}),Kt.a.createElement(Us["a"],{"data-qa":"role_change_refresh_confirmation_body"},Kt.a.createElement("p",null,a)),Kt.a.createElement(qs["a"],null,Kt.a.createElement(Gs["a"],null,Kt.a.createElement(Hs["a"],{"aria-label":Ws.t("Reload"),type:"danger",size:"medium",onClick:this.onConfirm,loading:r,"data-qa":"role_change_refresh_confirmation_button"},Ws.t("Reload")))))}}]);return t}(Vt["PureComponent"]);Ks.displayName="RoleChangeRefreshDialog";var zs={closeModal:function e(){return Object(Qt["closeModal"])()}};var Qs=Object(_r["connect"])(null,zs)(Ks);var Ys="role-change-refresh-dialog";var Js=Object(we["b"])('Opens the "Leave the Beta" ESC confirmation dialog',function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.user;var n=Object(Qt["getCurrentModals"])(t());if(Object(s["find"])(n,{name:Ys}))return;e(Object(Qt["openModal"])({element:Kt.a.createElement(Qs,{user:a}),isStackable:true,name:Ys}))});Js.propTypes={user:Ve["b"].object.isRequired};var Xs=Js;function Zs(e,t,r){var a=r();var n=void 0;if(e.type===f["a"].getType()){n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return}else e.type===f["b"].getType()&&(n=[e&&e.payload]);n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object(A["isExternallySharedChannel"])(e))return;var r=Object(A["getPendingAndConnectedTeamIds"])(a,e,{includeSelfTeamId:true});var n=Object(ri["omitCurrentTeamId"])(a,r);var i=n.reduce(function(e,t){return e.concat(o.a.filter(Object(T["a"])(a),{team_id:t}))},[]);i.length&&t(Object(I["a"])(i))})}function $s(e,t){t(Xs({user:e.payload.user}))}Object(P["b"])([{actions:[f["b"]],sideEffect:Zs},{actions:[f["a"]],sideEffect:Zs,reasons:[S["a"].LEAVE_CHANNEL]},{actions:[I["b"]],sideEffect:$s}]);var eo=r(251);function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=a();var i=false;var s=Object(w["d"])(n,t.prevChannelId,i);!Object(A["isMemberOfChannel"])(s)&&Object(A["isPublicChannel"])(s)&&r(Object(eo["clearChannelMembershipInfo"])(t.prevChannelId))}function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];t||r(Object(eo["clearAllMembershipInfo"])())}function ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];r(Object(eo["clearChannelMembershipInfo"])(t.id));var n=Object(E["isFeatureEnabled"])(a(),"feature_dont_set_channel_membership_twice");n||r(Object(eo["setChannelMembershipInfoForUsers"])({channelId:t.id,membershipInfo:dt()({},Object(E["getCurrentUserId"])(a()),true)}))}function no(e,t){var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(eo["clearChannelMembershipInfo"])(e.id))})}Object(P["b"])([{actions:[j["e"]],sideEffect:to},{actions:[b["connected"],Xa["b"]],sideEffect:ro},{actions:[f["b"]],sideEffect:ao},{actions:[f["a"]],sideEffect:no,reasons:[S["a"].LEAVE_CHANNEL]}]);var io=r(194);var so=r(123);var oo=r(1054);var lo=r(316);var co=r(109);var uo=r(1101);function po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(t)return;Object(Y["a"])({getState:a}).info("MESSAGE-HISTORY","Resetting reachedEnd");r(Object(ae["resetReachedEnd"])())}function vo(e,t,r){var a=r();var n=e.payload,i=n.channelId,s=n.append;var o=Object(C["a"])(a);var l=Object(E["isFeatureEnabled"])(a,"feature_react_threads")&&Object(co["getCurrentThreadKey"])(a);if(!s)return;i!==o&&i!==l&&t(Object(ae["truncateChannelHistory"])({channelId:i}))}function mo(e,t,r){var a=r();var n=e.payload.prevChannelId;if(!n)return;var i=Object(C["a"])(a);if(i===n)return;var s=Object(w["d"])(a,n);if(!s)return;var o=Object(w["d"])(a,i);if(o&&Object(A["isPublicChannel"])(o)&&!Object(A["isMemberOfChannel"])(o)){var l=[i];t(Object(Q["f"])({ids:l})).then(function(){return Object(uo["b"])()})}else if(o&&Object(A["isPublicChannel"])(o)&&!Object(A["isMemberOfChannel"])(o)){var c="message-history/onChannelChange";t(Object(Q["i"])({channelId:i,noMembers:true,reason:c})).then(function(e){if(!e||!e.channel)return;t(Object(io["a"])({channel:e.channel}));Object(uo["b"])()})}Object(A["isArchived"])(s)||Object(A["isPublicChannel"])(s)&&!Object(A["isMemberOfChannel"])(s)?t(Object(ae["removeAllTimestamps"])({channelId:n})):t(Object(ae["truncateChannelHistory"])({channelId:n}))}function ho(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(e){if(!e)return;if(Object(fe["a"])()&&Object(se["j"])(a)&&Object(C["a"])(a)===e.id){var r=Object(oo["a"])(a);r&&t(Object(lo["a"])({id:r}))}t(Object(ae["removeAllTimestamps"])({channelId:e.id,includeThreads:Object(E["isFeatureEnabled"])(a,"feature_react_threads")}))})}function fo(e,t,r){var a=void 0;e.type===f["d"].getType()?a=e&&e.payload&&e.payload.ids:e.type===f["b"].getType()&&(a=[e&&e.payload&&e.payload.id]);if(!a||!a.length)return;var n=r();a.forEach(function(e){if(!e)return;t(Object(ae["removeAllTimestamps"])({channelId:e,includeThreads:Object(E["isFeatureEnabled"])(n,"feature_react_threads")}));t(Object(so["e"])({channelId:e}))})}Object(P["d"])({actions:[ae["addTimestamps"]],sideEffect:vo});Object(P["d"])({actions:[j["e"]],sideEffect:mo});Object(P["d"])({actions:[f["a"]],sideEffect:ho,reasons:[S["a"].ARCHIVE_CHANNEL,S["a"].LEAVE_CHANNEL]});Object(P["d"])({actions:[f["d"],f["b"]],sideEffect:fo});Object(P["d"])({actions:[b["connected"],Xa["b"]],sideEffect:po});var bo=r(358);var go=r(208);function _o(e,t,r){var a=e.payload,n=a.viewContext,i=a.channelId,s=a.ts;var o=Object(le["a"])(r(),i,s);var l=o?o.thread_ts:null;if((Object(E["isFeatureEnabled"])(r(),"feature_react_threads")||Object(E["isFeatureEnabled"])(r(),"feature_react_all_threads"))&&l&&(n===pe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||n===pe["MESSAGE_CONTAINERS"].THREADS_VIEW)){var c=Object(go["a"])({viewContext:n,channelId:i,threadTs:l});c&&c.focus();return}if(Object(E["isFeatureEnabled"])(r(),"feature_sonic_inputs")){var u=Object(go["a"])({viewContext:pe["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:i});u&&u.focus();return}Object(Ht["a"])()}Object(P["d"])({actions:[bo["stopEditingMessage"]],sideEffect:_o});var yo={restoreFocusToMessageInput:_o};var Oo=r(308);function ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=t&&t.ids||[];var i=Object(C["a"])(a());if(n.indexOf(i)<0)return;var s=Object(oo["a"])(a());r(Object(Oo["a"])({id:s}))}Object(P["b"])([{actions:[f["d"]],sideEffect:ko}]);var Eo=Object(Xi["a"])("Check to see whether we need to reload",function(e,t,r){var a=t();if(Xt["isJsPath"])return Promise.resolve(new Error("Cannot check whether to reload when using js_path"));var n=Object(E["getFromBootData"])(a,"version_ts");var i=r.reason||"unknown";return e(Object(ze["a"])({method:"rtm.shouldReload",args:{version_ts:n,reason:i}}))});Eo.propTypes={reason:Ve["b"].string};var jo="clientMinVersion";var Co=18e5;var So="dontRefreshForMinVersionBeforeTs";function wo(e){sessionStorage[jo]=e}function Io(e){var t=Object(Y["b"])({label:"MIN-VERSION"});if(!Object(h["a"])()){t.info("Allowing min version reload");return true}if(!e){t.info("Allowing min version reload because clientMinVersion does not exist???");return true}var r=sessionStorage[jo];r&&(r=parseInt(r,10));var a=sessionStorage[So];a&&(a=parseInt(a,10));var n=document.documentElement;var i=!(!n||!n.dataset)&&n.dataset.versionTs;"dev"!==i&&"local_js"!==i&&(i=parseInt(i,10));if("dev"===i||"local_js"===i){t.info("Allowing min version reload because we are in dev also this should never happen????");wo(e);return true}if(!r){t.info("Allowing min version reload because we have not recently reloaded due to a min version bump");wo(e);return true}if(e!==r){t.info("Allowing min version reload because the previous min version reload was caused by a different min version bump");wo(e);return true}if(a&&Date.now()>a){t.info("Allowing min version reload because we have blocked min version reloads for the last "+Co+" MS and rtm.shouldReload is still returning true");wo(e);delete sessionStorage[So];return true}if(i<e){if(!a){a=Date.now()+Co;sessionStorage[So]=a}t.info("PREVENTING min version reload because we just did a reload due to a min version bump and still got a version older than the min version bump");return false}wo(e);return true}var To={CLIENT_MIN_VERSION_STORAGE_KEY:jo,DELAY_MIN_VERSION_REFRESH_DURATION_MS:Co,DONT_REFRESH_FOR_MIN_VERSION_UNTIL_STORAGE_KEY:So};var Ao=function(){var e=Object(rn["method"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClientOnline,r=e.logger;if(t())return true;r.info(Ho,"Waiting to come back online to reload");return Wo("online")});return function t(r){return e.apply(this,arguments)}}();var No=function(){var e=Object(rn["method"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasFocus,r=e.logger,a=e.telemeter;if(!t())return true;Fo||(Fo=new Promise(function(e){window.setTimeout(function(){r.info(Ho,"Waited the max "+Go+"ms for a blur event");a.count("mvp_m_shouldreload_waited_too_long_for_blur");Lo=true;e()},Go)}));r.info(Ho,"Waiting for blur event to reload");return Promise.race([Wo("blur"),Fo])});return function t(r){return e.apply(this,arguments)}}();var Po=function(){var e=Object(rn["method"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClientOnline,r=e.hasFocus,a=e.logger,n=e.telemeter,i=e.timesCalled,s=void 0===i?0:i;if(Vo({isClientOnline:t,hasFocus:r})&&0===s){Mo()&&n.count("mvp_m_shouldreload_immediate");return true}if(Mo()&&0===s){n.count("mvp_m_shouldreload_will_defer");t()||n.count("mvp_m_shouldreload_will_defer_offline")}return Promise.all([Ao({isClientOnline:t,logger:a}),No({hasFocus:r,telemeter:n,logger:a})]).tap(function(){a.info(Ho,"Online and unfocused, waiting "+qo+"ms to reload")}).delay(qo).then(function(){if(Vo({isClientOnline:t,hasFocus:r})){Mo()&&n.count("mvp_m_shouldreload_did_defer");return true}a.info(Ho,"Waited "+qo+" ms but now it is no longer safe to reload, trying again",{isClientOnline:t(),hasFocus:r(),timesCalled:s});return Po({isClientOnline:t,hasFocus:r,logger:a,telemeter:n,timesCalled:s+1})})});return function t(r){return e.apply(this,arguments)}}();var Ro=void 0;function Mo(){"undefined"===typeof Ro&&(Ro=Object(He["a"])(100));return Ro}var xo={};var Do={};var Fo=void 0;var Lo=false;var Bo=false;var Uo=27e5;var qo=2e4;var Go=108e5;var Ho="MIN-VERSION";function Wo(e){var t=void 0;var r=false;return new Promise(function(a){t=function e(t){return a(t)};window.addEventListener(e,t,r)}).finally(function(){window.removeEventListener(e,t,r)})}function Vo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClientOnline,r=e.hasFocus;return t()&&!r()}var Ko=Object(we["b"])("Calls rtm.shouldReload and possibly reloads",function(e,t){if(Bo)return;var r=t();var a=Object(Qe["c"])({getState:t});var n=Object(Ie["b"])(r);var i=Object(Y["a"])({getState:t});Do[n]=Date.now();i.info(Ho,"checking to see if we should reload");Mo()&&a.count("mvp_m_check");e(Eo({reason:"polling"})).then(function(e){if(!e||!e.should_reload){i.info(Ho,"no need to reload");return}var r=e.client_min_version;if(!Io(r))return;if(Bo)return;Bo=true;Po({isClientOnline:function e(){return Object(qt["c"])(t())},hasFocus:function e(){if(Lo)return false;return document.hasFocus()},logger:i,telemeter:a}).then(function(){var e="rtm.shouldReload told us to reload earlier, we are now unfocused and online";i.info(Ho,e);Object(Mt["b"])({reason:e,reasonKey:"rtm_should_reload"})})}).catch(function(){i.warn(Ho,"rtm.shouldReload check failed; ignoring since we will try again later")})});function zo(e,t,r){var a=r();var n=Object(Ie["b"])(a);if(!xo[n]){var i=Object(on["a"])(Uo,.8,1.2);xo[n]=setInterval(function(){t(Ko())},i);Object(u["exportToTeamDebugger"])(n,"minVersionPoll",{checkNow:function e(){return t(Ko())},getLastPollTime:function e(){return Do[n]},getCurrentlyAwaitingReload:function e(){return Bo},timer:xo[n]})}}Object(P["d"])({actions:[vi["start"]],sideEffect:zo});var Qo={checkForMinVersionBumpAndMaybeReload:Ko,awaitSafeTimeToReload:Po,awaitBlurTimeout:Fo};Object.defineProperties(Qo,{awaitSafeTimeToReload:{get:function e(){return Po},set:function e(t){Po=t}},awaitBlurTimeout:{get:function e(){return Fo},set:function e(t){Fo=t}}});var Yo=r(1164);var Jo=r(1343);var Xo=r(1324);function Zo(e,t,r){if(!Object(h["a"])())return;var a=e&&e.payload;if(!a)return;var n=void 0;a.pref&&"locale"===a.pref?n=a.value:a.locale&&(n=a.locale);if(!n)return;var i=r();var o=Object(ji["d"])(i).id;var l=Object(Yo["a"])({teamId:o});var c=Object(s["get"])(document,["documentElement","lang"]);var u=l===n;var d=c===n;if(u&&d)return;t(Object(Xo["c"])({localeChanged:true}));Object(Jo["getIsLoading"])(i)||t(Object(Jo["fetchAndUpsertWhatsNewUpdates"])({reason:"prefs/maybeSetLocaleSideEffect"}));Object(Yo["b"])(n,o)}function $o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();if(t)return;if(!Object(E["isFeatureEnabled"])(n,"feature_set_tz_automatically"))return;if(!Object(U["g"])(n,"set_tz_automatically"))return;try{var i=Object(U["g"])(n,"tz");var s=Intl.DateTimeFormat().resolvedOptions().timeZone;s!==i&&r(Object(H["d"])({pref:"tz",value:s}))}catch(e){}}Object(P["d"])({actions:[q["b"],q["c"],q["a"]],sideEffect:Zo});Object(P["d"])({actions:[b["connected"]],sideEffect:$o});var el={maybeSetLocaleSideEffect:Zo};var tl=r(410);var rl=r(868);function al(e,t,r){var a=r();if(!Object(K["b"])(a))return;var n=e.payload&&e.payload.history;if(!n)return;window.desktop&&window.desktop.deviceStorage&&window.desktop.deviceStorage.setItem("navigation-history",JSON.stringify(n))}function nl(e,t,r){var a=r();if(!Object(K["b"])(a))return;if(!Object(h["a"])()&&e.type===oe["f"].getType())return;var n=Object(C["a"])(a);var i=Object(ji["d"])(a);var o=e.type===oe["f"].getType()?i.id===e.payload[0]:i.id===e.payload;Object(Y["a"])({getState:r}).info("WORKSPACE-FOCUS","workspace focus state changed to "+o);if(!i||!o){t(Object(tl["setLoaded"])(false));return}t(Object(rl["f"])()).then(function(){var e=Object(w["d"])(a,n);t(Object(rl["e"])({viewId:n,viewName:Object(A["getDisplayNameForChannel"])(a,e,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),teamId:i.id,teamName:Object(ri["getTeamDisplayName"])(i),teamIcon:Object(s["get"])(i,"icon.image_44")}))})}Object(P["d"])({actions:[tl["updateNavigationHistory"]],sideEffect:al});Object(P["d"])({actions:[Ba["setActiveTeam"]],sideEffect:nl});Object(P["d"])({actions:[oe["f"]],sideEffect:nl});var il=r(529);var sl=r(138);var ol=new yr["b"]("offline_mode");function ll(e){var t=e.clientLastOnline,r=e.channelHasHistory,a=e.onCloseComplete,n=e.featureOfflineMode;if(!n)return null;var i=r?ol.rt("Last updated {clientLastOnline}.",{clientLastOnline:Object(yr["o"])(Object(il["a"])(t))}):ol.rt("Go online to get the latest messages.");return Kt.a.createElement(Or["b"],{ariaAssertive:true,position:"top-right",icon:"cloud-offline-small",onCloseComplete:a},Kt.a.createElement("span",null,Kt.a.createElement("strong",null,ol.rt("No connection."))," ",i))}ll.displayName="OfflineChannelToast";var cl=Object(sl["a"])("feature_offline_mode")(ll);var ul=Object(we["b"])("shows a toast indicating when the client was last connected",function(e,t,r){var a=r.channelId;var n=t();var i=Object(qt["f"])(n)/1e3;var s=Object(ae["channelHasAnyHistory"])(n,a);var o=Kt.a.createElement(cl,{clientLastOnline:i,channelHasHistory:s});e(Object(zt["enqueueToast"])({element:o}))});ul.propTypes={channelId:Ve["b"].string.isRequired};var dl=cl;function pl(e,t,r){var a=r();if(!Object(E["isFeatureEnabled"])(a,"feature_offline_mode"))return;if(!Object(fe["a"])())return;if(Object(qt["c"])(a))return;var n=Object(C["a"])(a);if(!Object(G["a"])(n))return;t(ul({channelId:n}))}Object(P["d"])({actions:[j["e"]],sideEffect:pl});var vl=r(1502);var ml=r(3957);Object(P["d"])({actions:[ml["a"]],sideEffect:function e(t,r){return r(Object(vl["a"])())}});var hl=r(1053);var fl=r(1290);Object(P["d"])({actions:[fl["a"]],sideEffect:function e(t,r){return r(Object(hl["a"])())}});var bl=r(1262);var gl=r(1263);var _l=r(695);var yl="PRESENCE-MANAGER";var Ol=function e(t,r,a){if(!Object(h["a"])()&&!Object(E["isFeatureEnabled"])(a(),"feature_sonic_presence_manager"))return;var n=Object(Ie["b"])(a());var i=Object(_l["b"])(n);if(!i||Object(s["isEmpty"])(i))return;Object(Y["a"])({getState:a}).debug(yl,"Sending the presence subscription after establishing a websocket connection");r(Object(_l["d"])())};Object(P["d"])({actions:[b["connected"]],sideEffect:Ol});var kl=r(913);function El(e,t,r){var a=r();var n=Object(Ie["b"])(a);var i=e.payload&&e.payload[0];n!==i&&t(Object(kl["clearQueue"])())}Object(P["d"])({actions:[oe["f"]],sideEffect:El});var jl=r(197);var Cl=r(1176);var Sl=r(480);var wl=r(541);function Il(e,t){t(Object(jl["j"])(Object(Cl["b"])(e.room)))}function Tl(e,t){t(Object(jl["j"])(Object(Cl["a"])(e.block.call.v1)))}Object(Va["a"])("call_block_updated",Tl);Object(Va["a"])("sh_room_join",Il);Object(Va["a"])("sh_room_leave",Il);Object(Va["a"])("sh_room_update",Il);Object(Va["a"])("screenhero_invite",function(e,t,r){if(!Object(h["a"])())return;var a=r();var n=Object(w["d"])(a,e.channel);if(Object(wl["a"])(a,n))return;t(Object(Sl["d"])(e))});Object(Va["a"])("screenhero_invite_response",function(e,t,r){if(!Object(h["a"])())return;t(Object(Sl["f"])(e))});Object(Va["a"])("screenhero_invite_cancel",function(e,t,r){if(!Object(h["a"])())return;t(Object(Sl["e"])(e))});var Al=r(1062);var Nl=r(685);var Pl=r(448);function Rl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.is_uninstall,r=e.app_id;var a=arguments[1];var n=arguments[2];if(!r)return;Object(E["isFeatureEnabled"])(n(),"feature_app_actions_fe_refactor")?a(t?Object(Nl["e"])([r]):Object(Al["b"])([r])):a(t&&r?Object(Pl["k"])([r]):Object(Pl["d"])())}Object(Va["a"])("app_actions_updated",Rl);var Ml=r(1757);var xl=r(780);var Dl=r(186);var Fl=r(1187);var Ll=r(339);var Bl=r(924);var Ul=function e(){pr()(this,e);var t={};t.promise=new Promise(function(e,r){t.resolve=e;t.reject=r});return t};var ql=Ul;function Gl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;var r=new ql;e.then(r.resolve,r.reject);setTimeout(function(){if(e.isPending()){e.cancel();var a=new Error("Maximum timeout ("+t+"ms) exceeded.");r.reject(a)}},t);return r.promise}var Hl={invalidSubmission:"invalid_submission"};var Wl=Object(Xi["a"])("fetch a dialog that has been pushed by an app",function(e,t,r){var a=e(Object(ze["a"])({method:"dialog.get",args:{dialog_id:r}})).then(function(e){var t=e.dialog,r=void 0===t?{}:t;return Object(Ll["b"])(r)});return Gl(a)});Wl.propTypes=Ve["b"].string;var Vl=Object(Xi["a"])("submit and app generated dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.dialogId,n=r.submission;var i={dialog_id:a,submission:JSON.stringify(n)};var s=e(Object(ze["a"])({method:"dialog.submit",args:i})).catch(function(e){var t=e.data||{};var r=new Error(e.message);r.data={error:t.error,dialogErrors:t.dialog_errors};throw r});return Gl(s)});Vl.propTypes={dialogId:Ve["b"].string,submission:Ve["b"].object};var Kl=Object(Xi["a"])("notify an app that the dialog it generated has been canceled",function(e,t,r){return e(Object(ze["a"])({method:"dialog.notifyCancel",args:{dialog_id:r}}))});Kl.propTypes=Ve["b"].string;var zl=Object(Xi["a"])("fetch select options from a third party app based on a search query",function(e,t,r){var a=r.dialogId,n=r.inputName,i=r.value;return e(Object(ze["a"])({method:"dialog.selectSuggestion",args:Object(Bl["a"])({dialogId:a,name:n,value:i})})).then(function(e){var t=e.option_groups,r=e.options;if(t)return{optionGroups:t};if(r)return{options:r};return{options:[]}})});zl.propTypes={dialogId:Ve["b"].string.isRequired,inputName:Ve["b"].string.isRequired,value:Ve["b"].string.isRequired};var Ql=r(61);var Yl=r(182);var Jl=r(310);function Xl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reduce(function(e,t){return i()({},e,dt()({},t.name,t.error))},{})}var Zl={formatErrors:Xl};var $l=r(16);var ec=r.n($l);var tc=r(88);var rc=r(96);var ac=r(95);var nc=r(152);var ic={align:Ve["b"].oneOf(Object(s["values"])(nc["a"])),message:Ve["b"].node.isRequired,type:Ve["b"].oneOf(Object(s["values"])(nc["c"]))};var sc={align:nc["a"].left,type:nc["c"].boxed};function oc(e){var t=e.align,r=e.message,a=e.type;return Kt.a.createElement(nc["d"],{type:a,align:t,level:nc["b"].error,className:"margin_bottom_100"},r)}oc.displayName="AppDialogError";oc.defaultProps=sc;var lc=Object(ac["pure"])(oc);var cc=r(54);var uc=r(1346);function dc(e,t){return e+"_"+t.name}function pc(e,t,r){return e+"_"+t.name+"_"+r}function vc(e,t,r){return dc(e,t)+"_"+r.value}var mc={dialogId:Ve["b"].string.isRequired,error:Ve["b"].string,input:Ve["b"].object.isRequired,isSubmitting:Ve["b"].bool,onBlur:Ve["b"].func.isRequired,onChange:Ve["b"].func.isRequired,onFocus:Ve["b"].func.isRequired,fetchSelectSuggestionDialog:Ve["b"].func.isRequired,value:Ve["b"].string};var hc={error:null,isSubmitting:false,value:""};var fc=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.optionsFetcher=r.optionsFetcher.bind(r);return r}mr()(t,[{key:"getLabelId",value:function e(){var t=this.props,r=t.dialogId,a=t.input;return pc(r,a,"label")}},{key:"optionsFetcher",value:function e(t){var r=this.props,a=r.dialogId,n=r.input;return this.props.fetchSelectSuggestionDialog({dialogId:a,inputName:n.name,value:t})}},{key:"renderSelect",value:function e(){var t=this.props,r=t.dialogId,a=t.error,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,l=t.onFocus,c=t.value;var u=dc(r,n);var d=this.getLabelId();var p={id:u,isSubmitting:i,labelId:d,onBlur:s,onChange:o,onFocus:l,value:c,dialogId:r,dataSource:n.data_source,includeApps:false,minQueryLength:n.min_query_length,optionsFetcher:this.optionsFetcher,options:n.options,optionGroups:n.option_groups,isDisabled:n.is_disabled,isRequired:n.is_required,hintText:n.hint,errorText:a,name:n.name,placeholder:n.placeholder,ref:this.setRef,selectedOptions:n.selected_options};return Kt.a.createElement(uc["a"],p)}},{key:"render",value:function e(){var t=this.props,r=t.dialogId,a=t.input,n=t.isSubmitting;var i=dc(r,a);var s=this.getLabelId();var o=ec()({"c-label--disabled":a.disabled||n});return Kt.a.createElement(cc["a"],{className:o,htmlFor:i,id:s,key:a.name,text:a.label,optional:!!a.optional},this.renderSelect())}}]);return t}(Kt.a.Component);fc.displayName="AppDialogInputSelect";var bc={fetchSelectSuggestionDialog:zl};fc.defaultProps=hc;var gc=Object(_r["connect"])(null,bc,null,{withRef:true})(fc);var _c=r(179);var yc={error:Ve["b"].string,dialogId:Ve["b"].string.isRequired,input:Ve["b"].object.isRequired,isSubmitting:Ve["b"].bool,onBlur:Ve["b"].func.isRequired,onChange:Ve["b"].func.isRequired,onFocus:Ve["b"].func.isRequired,value:Ve["b"].string};var Oc={error:null,isSubmitting:false,value:""};var kc=function(e){gr()(t,e);function t(){pr()(this,t);return fr()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}mr()(t,[{key:"render",value:function e(){var t=this.props,r=t.error,a=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,l=t.onFocus,c=t.value;var u=dc(a,n);var d=pc(a,n,"label");var p=ec()({"c-label--disabled":n.disabled||i});return Kt.a.createElement(cc["a"],{className:p,htmlFor:u,id:d,key:n.name,text:n.label,optional:!!n.optional},Kt.a.createElement(_c["a"],{autoComplete:"off",labelId:d,isDisabled:n.disabled||i,errorText:r,hintText:n.hint,id:u,isRequired:!n.optional,name:n.name,onBlur:s,onChange:o,onFocus:l,placeholder:n.placeholder,type:"text",value:c}))}}]);return t}(Kt.a.Component);kc.displayName="AppDialogInputText";var Ec=kc;kc.defaultProps=Oc;var jc=r(687);var Cc={dialogId:Ve["b"].string.isRequired,error:Ve["b"].string,input:Ve["b"].object.isRequired,isSubmitting:Ve["b"].bool,onBlur:Ve["b"].func.isRequired,onChange:Ve["b"].func.isRequired,onFocus:Ve["b"].func.isRequired,value:Ve["b"].string};var Sc={error:null,isSubmitting:false,value:""};function wc(e){var t=e.dialogId,r=e.error,a=e.input,n=e.isSubmitting,i=e.onBlur,s=e.onChange,o=e.onFocus,l=e.value;var c=dc(t,a);var u=pc(t,a,"label");var d=ec()({"c-label--disabled":a.disabled||n});return Kt.a.createElement(cc["a"],{className:d,htmlFor:c,key:a.name,id:u,text:a.label,optional:!!a.optional},Kt.a.createElement(jc["a"],{autoComplete:"off",labelId:u,isDisabled:a.disabled||n,errorText:r,hintText:a.hint,id:c,isRequired:!a.optional,name:a.name,maxCharacterLimit:a.max_length,onBlur:i,onChange:s,onFocus:o,placeholder:a.placeholder,value:l}))}wc.displayName="AppDialogInputTextarea";wc.defaultProps=Sc;var Ic={select:"select",text:"text",textarea:"textarea"};var Tc={error:Ve["b"].string,dialogId:Ve["b"].string.isRequired,input:Ve["b"].object.isRequired,isSubmitting:Ve["b"].bool,onBlur:Ve["b"].func.isRequired,onChange:Ve["b"].func.isRequired,onFocus:Ve["b"].func.isRequired,value:Ve["b"].string};var Ac={error:null,isSubmitting:false,value:""};var Nc=function(e){gr()(t,e);function t(){pr()(this,t);return fr()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}mr()(t,[{key:"render",value:function e(){var t=this.props,r=t.error,a=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,l=t.onFocus,c=t.value;var u={error:r,dialogId:a,input:n,isSubmitting:i,onBlur:s,onChange:o,onFocus:l,value:c};switch(n.type){case Ic.select:return Kt.a.createElement(gc,u);case Ic.text:return Kt.a.createElement(Ec,u);case Ic.textarea:return Kt.a.createElement(wc,u);default:return}}}]);return t}(Kt.a.Component);Nc.displayName="AppDialogInput";var Pc=Nc;Nc.defaultProps=Ac;var Rc;var Mc=new yr["b"]("app_dialog");var xc=(Rc={},dt()(Rc,Ic.text,150),dt()(Rc,Ic.textarea,3e3),Rc);var Dc={maxLength:"maxLength",minLength:"minLength",required:"required"};function Fc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case Dc.maxLength:return Mc.t("You can't enter more than {maxLength, plural, =1 {# character} other {# characters}}.",t);case Dc.minLength:return Mc.t("You must enter at least {minLength, plural, =1 {# character} other {# characters}}.",t);case Dc.required:return Mc.t("This field is required.");default:break}return null}function Lc(e){var t=e.elements,r=e.lastActiveElementName,a=e.touchedElements,n=e.values;return t.reduce(function(e,t){var o=n[t.name];var l=r===t.name;var c=!t.optional&&!o&&!l;var u=Object(s["includes"])([Ic.text,Ic.textarea],t.type);var d=Math.max(t.min_length,0);var p=Object(s["isNumber"])(d)&&Object(s["get"])(o,"length",0)<d;var v=!o&&l;var m=!o&&t.optional;var h=u&&p&&!v&&!m;var f=Math.min(t.max_length,xc[t.type]);var b=f&&Object(s["get"])(o,"length")>f;var g=u&&b;if(!a[t.name])return e;if(c)return i()({},e,dt()({},t.name,Fc(Dc.required)));if(h)return i()({},e,dt()({},t.name,Fc(Dc.minLength,{minLength:d})));if(g)return i()({},e,dt()({},t.name,Fc(Dc.maxLength,{maxLength:f})));return e},{})}var Bc={validate:Lc};var Uc=r(2310);var qc=new yr["b"]("app_dialog");var Gc={id:Ve["b"].string.isRequired,elements:Ve["b"].array,isLoading:Ve["b"].bool,isSubmitting:Ve["b"].bool,loadingFailed:Ve["b"].bool,serverErrors:Ve["b"].object,submittingFailed:Ve["b"].bool,onLoadRetried:Ve["b"].func.isRequired,onSubmit:Ve["b"].func.isRequired,onSubmitRetried:Ve["b"].func.isRequired};var Hc={elements:[],serverErrors:{},isLoading:false,isSubmitting:false,loadingFailed:false,submittingFailed:false};var Wc=300;var Vc=3;var Kc=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={errors:{},lastActiveElementName:null,touchedElements:{},values:{},selectedOptions:{}};Object(Ml["a"])(r,["onInputBlurred","onInputChanged","onInputFocused","setFirstElementRef","submit","updateErrors"]);r.updateErrors=Object(s["debounce"])(r.updateErrors,Wc);return r}mr()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=!t.isLoading&&this.props.isLoading;if(r){var a=t.elements.reduce(function(e,t){return i()({},e,dt()({},t.name,t.value))},{});this.setState(function(){return{values:Object(s["omitBy"])(a,s["isUndefined"])}})}}},{key:"componentDidUpdate",value:function e(t){var r=!this.props.isLoading&&t.isLoading;var a=!this.props.isSubmitting&&t.isSubmitting;if(this.firstElement&&(r||a)){var n=Object(tc["findDOMNode"])(this.firstElement);n&&n.focus()}}},{key:"onInputBlurred",value:function e(){this.setState(function(){return{lastActiveElementName:null}})}},{key:"onInputFocused",value:function e(){var t=this;this.setState(function(e){return{errors:Lc({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"onInputChanged",value:function e(t,r){var a=this;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.setTouched,o=void 0===s||s,l=n.selectedOption;this.setState(function(e){var n=t;var s=i()({},e.touchedElements,dt()({},t,o));var c=i()({},e.values,dt()({},t,r));var u=i()({},e.selectedOptions,dt()({},t,l?[l]:void 0));var d=Lc({elements:a.props.elements,lastActiveElementName:n,touchedElements:s,values:c});var p={lastActiveElementName:n,touchedElements:s,values:c,selectedOptions:u};return d[t]?p:i()({},p,{errors:d})});this.updateErrors()}},{key:"getElementError",value:function e(t){var r=!this.state.touchedElements[t]&&this.props.serverErrors[t];return r||this.state.errors[t]||null}},{key:"getElementInput",value:function e(t){var r=this.state.selectedOptions;if(r[t.name])return i()({},t,{selected_options:r[t.name]});return t}},{key:"getGeneralError",value:function e(t){return qc.rt("We had some trouble connecting. <a>Try again?</a>",null,function(e){var r=e.text;return Kt.a.createElement(bi["a"],{onClick:t,type:"button"},r)})}},{key:"getShouldShowSpeedBump",value:function e(t){var r=this.state,a=r.touchedElements,n=r.values;if("go"!==t)return Object(s["some"])(this.props.elements,function(e){var t=e.name,r=e.type;if(!a[t])return false;var i=n[t];if(r===Ic.text||r===Ic.textarea)return Object(s["get"])(i,"length",0)>=Vc;return!!i});return false}},{key:"setFirstElementRef",value:function e(t){this.firstElement=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"bindArgs",value:function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return t.bind.apply(t,[this].concat(a))}},{key:"updateErrors",value:function e(){var t=this;this.setState(function(e){return{errors:Lc({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"maybeRenderGeneralError",value:function e(){if(this.props.submittingFailed)return Kt.a.createElement(lc,{message:this.getGeneralError(this.props.onSubmitRetried)});return null}},{key:"submit",value:function e(){var t=this;var r=null;var a=this.props.elements.reduce(function(e,t){return i()({},e,dt()({},t.name,true))},{});var n=Lc({elements:this.props.elements,lastActiveElementName:r,touchedElements:a,values:this.state.values});this.setState(function(){return{errors:n,lastActiveElementName:r,touchedElements:a}});if(!Object(s["isEmpty"])(n)){var o=new Error("Validation failed.");return Promise.reject(o)}return this.props.onSubmit(this.props.id,this.state.values).finally(function(){return t.setState(function(){return{touchedElements:{}}})})}},{key:"renderDialogElements",value:function e(){var t=this;return Kt.a.createElement("form",{onSubmit:function e(t){t.preventDefault()}},this.props.elements.map(function(e,r){return Kt.a.createElement(Pc,{error:t.getElementError(e.name),dialogId:t.props.id,input:t.getElementInput(e),isSubmitting:t.props.isSubmitting,key:e.name,onBlur:t.onInputBlurred,onChange:t.bindArgs(t.onInputChanged,e.name),onFocus:t.onInputFocused,ref:0===r?t.setFirstElementRef:null,value:t.state.values[e.name]})}))}},{key:"render",value:function e(){var t=this.props,r=t.isLoading,a=t.isSubmitting,n=t.loadingFailed,i=t.onLoadRetried;var s=ec()("p-app_dialog_elements",{"p-app_dialog_elements--empty":r||n},{"p-app_dialog_elements--submitting":a});var o=void 0;o=r?Kt.a.createElement(rc["a"],{size:"jumbo"}):n?Kt.a.createElement(lc,{message:this.getGeneralError(i),align:"center"}):this.renderDialogElements();return Kt.a.createElement("div",{className:s},this.maybeRenderGeneralError(),o)}}]);return t}(Vt["Component"]);Kc.displayName="BaseAppDialogElements";Kc.defaultProps=Hc;var zc=Object(xl["a"])(Kc);var Qc=zc;var Yc={fetcher:Ve["b"].func.isRequired,id:Ve["b"].string.isRequired,onFetchRejected:Ve["b"].func,onFetchResolved:Ve["b"].func,onSubmitRetried:Ve["b"].func,submitter:Ve["b"].func.isRequired};var Jc={onFetchRejected:s["noop"],onFetchResolved:s["noop"],onSubmitRetried:s["noop"]};var Xc=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={errors:{},isLoading:true};Object(Ml["a"])(r,["onFetchRejected","onFetchResolved","onSubmit","onSubmitRejected","onSubmitResolved","retryLoad","setDialogElementsRef"]);return r}mr()(t,[{key:"componentDidMount",value:function e(){this.state.isLoading&&this.load()}},{key:"onFetchRejected",value:function e(){this.setState(function(){return{isLoading:false,loadingFailed:true}},this.props.onFetchRejected)}},{key:"onFetchResolved",value:function e(t){var r=this;this.setState(function(){return{elements:t.elements,isLoading:false,loadingFailed:false}},function(){r.props.onFetchResolved(t)})}},{key:"onSubmitRejected",value:function e(t){var r=t.data||{};var a={isSubmitting:false};r.error===Hl.invalidSubmission?a.errors=Xl(r.dialogErrors):a.submittingFailed=true;this.setState(function(){return a});throw t}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{errors:{},isSubmitting:false,submittingFailed:false}})}},{key:"onSubmit",value:function e(t,r){this.setState(function(){return{isSubmitting:true}});return this.props.submitter({dialogId:t,submission:r}).then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.dialogElements&&this.dialogElements.getShouldShowSpeedBump())}},{key:"setDialogElementsRef",value:function e(t){this.dialogElements=t;this.dialogElements&&this.dialogElements.getWrappedInstance&&(this.dialogElements=this.dialogElements.getWrappedInstance())}},{key:"load",value:function e(){this.props.fetcher(this.props.id).then(this.onFetchResolved).catch(this.onFetchRejected)}},{key:"retryLoad",value:function e(){this.setState(function(){return{isLoading:true}},this.load)}},{key:"submit",value:function e(){return this.dialogElements.submit()}},{key:"render",value:function e(){return Kt.a.createElement(Qc,{id:this.props.id,serializationKey:"app-dialog-elements",elements:this.state.elements,serverErrors:this.state.errors,isLoading:this.state.isLoading,isSubmitting:this.state.isSubmitting,loadingFailed:this.state.loadingFailed,onLoadRetried:this.retryLoad,onSubmitRetried:this.props.onSubmitRetried,onSubmit:this.onSubmit,ref:this.setDialogElementsRef,submittingFailed:this.state.submittingFailed})}}]);return t}(Vt["Component"]);Xc.displayName="AppDialogElementsContainer";var Zc=function e(t,r){var a=r.fetcher,n=r.submitter;return{fetcher:a||function(e){return t(Wl(e))},submitter:n||function(e){return t(Vl(e))}}};Xc.defaultProps=Jc;var $c=Object(xl["a"])(Xc);var eu=Object(_r["connect"])(null,Zc,null,{withRef:true})($c);var tu=eu;var ru=r(2312);var au=new yr["b"]("app_dialog");var nu={appId:Ve["b"].string.isRequired,app:Ve["b"].object,fetcher:Ve["b"].func,id:Ve["b"].string.isRequired,notifyCancel:Ve["b"].func.isRequired,onClose:Ve["b"].func,submitLabel:Ve["b"].string,submitter:Ve["b"].func,title:Ve["b"].string.isRequired,clogger:Ve["b"].object.isRequired,defaultAppIcon:Ve["b"].string.isRequired};var iu={app:{isNonExistent:true},fetcher:null,onClose:s["noop"],submitLabel:void 0,submitter:null};var su=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={goButtonIsDisabled:true,goButtonIsPending:false,shouldNotifyOnCancel:false};Object(Ml["a"])(r,["getShouldShowSpeedBump","onFetchResolved","onSubmitRejected","onSubmitResolved","onClose","onGo","onKeyPressedCmdEnter","renderTitle","setElementsContainerRef"]);return r}mr()(t,[{key:"componentDidMount",value:function e(){this.track("opened");this.keyCommands=new Dl["a"];this.keyCommands.bindAll([{keys:["command+enter"],handler:this.onKeyPressedCmdEnter}])}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset()}},{key:"onFetchResolved",value:function e(t){var r=t.notifyOnCancel;this.setState(function(){return{goButtonIsDisabled:false,shouldNotifyOnCancel:r}})}},{key:"onSubmitRejected",value:function e(){this.setState(function(){return{goButtonIsPending:false}})}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{goButtonIsPending:false}},this.props.onClose)}},{key:"onClose",value:function e(){var t=this.props,e=t.onClose,r=t.id,a=t.notifyCancel;var n=this.state.shouldNotifyOnCancel;n&&a(r);this.track("cancelled");Object(s["defer"])(e)}},{key:"onKeyPressedCmdEnter",value:function e(){this.onGo()}},{key:"onGo",value:function e(){this.setState(function(){return{goButtonIsPending:true}});this.elementsContainer.submit().then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.elementsContainer&&this.elementsContainer.getShouldShowSpeedBump())}},{key:"setElementsContainerRef",value:function e(t){this.elementsContainer=t&&t.getWrappedInstance();this.elementsContainer&&this.elementsContainer.getWrappedInstance&&(this.elementsContainer=this.elementsContainer.getWrappedInstance())}},{key:"track",value:function e(t){var r=this.props,a=r.appId,n=r.id,i=r.clogger;i.track("APP_DIALOG_"+t.toUpperCase(),{app_id:a,dialog_id:n,contexts:{core:{app_id:a}}})}},{key:"renderTitle",value:function e(){var t=this.props,r=t.app,a=t.defaultAppIcon;var n=Object(Jl["a"])(r,72,a);var i=au.t("Header Icon");return Kt.a.createElement("div",{className:"p-app_dialog__title"},Kt.a.createElement("img",{alt:i,className:"p-app_dialog__title_icon",src:n}),Kt.a.createElement("div",{className:"p-app_dialog__title_text"},this.props.title))}},{key:"render",value:function e(){var t=this.props,r=t.appId,a=t.app;var n="/apps/"+r;var i=void 0;i=Object(Ql["b"])(a)?a.name:Object(Ql["d"])(a)?Kt.a.createElement(Fl["a"],{type:"unknown"}):Kt.a.createElement(Fl["a"],{type:"non-existent"});var s=au.rt("Learn more about {appName}",{appName:i});var o=this.props,l=o.fetcher,c=o.id,u=o.submitLabel,d=o.submitter,p=o.title;var v=this.state,m=v.goButtonIsDisabled,h=v.goButtonIsPending;var f=u||au.t("Submit");return Kt.a.createElement(Tr["a"],{contentLabel:p,className:"p-app_dialog",footerIcon:"question-circle",footerLink:n,footerText:s,getShouldShowSpeedBump:this.getShouldShowSpeedBump,goButtonIsDisabled:h||m,goButtonIsPending:h,goButtonText:f,goOnEnterPressed:false,onClose:this.onClose,onGo:this.onGo,shouldCloseOnGo:false,title:this.renderTitle()},Kt.a.createElement(tu,{fetcher:l,id:c,serializationKey:"app-dialog-elements-container-"+c,onFetchResolved:this.onFetchResolved,onSubmitRetried:this.onGo,ref:this.setElementsContainerRef,submitter:d}))}}]);return t}(Vt["Component"]);su.displayName="AppDialog";su.defaultProps=iu;var ou=function e(t,r){var a=r.appId;return{app:Object(Yl["getAppById"])(t,a),defaultAppIcon:Object(Yl["getDefaultAppIcon"])(t),clogger:Object(Bi["a"])({state:t})}};var lu={notifyCancel:Kl};var cu=su;var uu=Object(xl["a"])(su);var du=Object(_r["connect"])(ou,lu)(uu);var pu=du;var vu=Object(we["b"])("Opens app dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=Kt.a.createElement(pu,i()({},r,{serializationKey:"app-dialog",onClose:function t(){return e(Object(Qt["closeModal"])())}}));e(Object(Qt["openModal"])({element:a}))});vu.propTypes={appId:Ve["b"].string.isRequired,id:Ve["b"].string.isRequired,submitLabel:Ve["b"].string,title:Ve["b"].string.isRequired};var mu=vu;var hu=r(332);var fu=function e(t,r){var a=t.app_id,n=t.client_token,i=t.dialog_id,s=t.dialog_submit_label,o=t.dialog_title,l=t.timeout_range;if(!hu["a"].check(n))return;var c=hu["a"].getTimeDelta(n),u=c.delta,d=c.nowTs,p=c.tokenTs;Object(Bi["a"])().track(Ui["l"].APP_DIALOG_OPEN_ATTEMPTED,{app_id:a,dialog_id:i,dialog_client_token_ts:p,dialog_ms_event_received_ts:d});if(u>=l)return;r(mu({appId:a,id:i,submitLabel:s,title:o}))};Object(Va["a"])("dialog_opened",fu);var bu=Object(Gn["b"])("TS.client.channel_page.handleAppChannelMembershipChange");var gu=Object(Gn["b"])("TS.client.channel_page.handleAppWildcardChange");var _u=r(295);var yu=r(1056);var Ou=r(1364);var ku="app_wildcard_added";var Eu="app_wildcard_removed";var ju="app_permission_request";var Cu="app_permission_user_request";var Su="app_conversation_invite_request";var wu="channel";function Iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.type;var a=arguments[1];var n=arguments[2];var o=n();var l=r===ku;var c=Object(C["a"])(o);var u=Object(G["a"])(c)&&c;var d=Object(w["v"])(o,u)&&Object(w["d"])(o,u);var p=Object(s["cloneDeep"])(Object(Ns["getCachedMemberCounts"])(o,u));var v=Object(eo["getChannelMembershipInfoForUser"])(o,u,t);var m=Object(A["isPublicChannel"])(d)&&v.isKnown&&l!==v.isMember;a(Object(eo["clearAllMembershipInfoForUser"])(t));a(Object(Ns["clearAllMemberCounts"])());if(m&&p&&p.counts){var h=Object(s["get"])(p,"counts.app_count",0);var f=h+(l?1:-1);p.counts.app_count=f;a(Object(Ns["addOrReplaceMemberCounts"])({channelId:u,countInfo:i()({},p,{should_refetch:true})}))}Ps();a(Object(_u["maybeUpdateAppPermissionsAfterWildcardChange"])({appUserId:t,wildcardEnabled:l}));gu(l)}function Tu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.client_token,a=e.scope_info,n=e.scope_type,i=e.timeout_range,s=e.trigger_id,o=e.type;var l=arguments[1];if(!hu["a"].check(r))return;var c=hu["a"].getTimeDelta(r),u=c.delta;if(u>=i)return;var d={appUserId:t,hasChannelScopes:n===wu,isUserRequest:o===Cu,scopeInfo:a,scopeType:n,triggerId:s};var p=Kt.a.createElement(yu["a"],d);l(Object(Qt["openModal"])({element:p}))}function Au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.channel_id,a=e.client_token,n=e.invite_message_ts,i=e.scope_info,s=e.timeout_range;var o=arguments[1];if(!hu["a"].check(a))return;var l=hu["a"].getTimeDelta(a),c=l.delta;if(c>=s)return;o(Object(Ou["a"])({appUserId:t,channelId:r,inviteMessageTs:n,referringEventId:"MSG_LINK_CLICKED",scopeInfo:i}))}Object(Va["a"])(ku,Iu);Object(Va["a"])(Eu,Iu);Object(Va["a"])(ju,Tu);Object(Va["a"])(Cu,Tu);Object(Va["a"])(Su,Au);var Nu=r(87);var Pu=r(18);var Ru=Nu["a"].maybeUnknown(Nu["a"].AppView);var Mu=Object(Pu["b"])("add a view to the store");Mu.propTypes=Ru.isRequired;var xu=Object(Pu["b"])("update a view in the store");xu.propTypes=Ru.isRequired;var Du=Object(Pu["b"])("updates a view's state from the store");Du.propTypes={view:Ru.isRequired,viewState:Ve["b"].object.isRequired};var Fu=Object(Pu["b"])("remove a view from the store");Fu.propTypes=Ru.isRequired;var Lu=Object(Pu["b"])("sets the active view ID");Lu.propTypes=Ve["b"].string.isRequired;var Bu=Object(Pu["b"])("bulk add views to the store");Bu.propTypes=Ve["b"].arrayOf(Ru).isRequired;var Uu=r(14);var qu=/^@?V[A-Z0-9]{8,}$/;function Gu(e){return qu.test(e)}var Hu={internalError:"internal_error",validationFailed:"validation_failed"};var Wu=Object(Xi["a"])("get the contents of an app view",function(e,t,r){if(!r)return Promise.reject();var a=e(Object(ze["a"])({method:"views.get",reason:"fetchView",args:{view_id:r}})).then(function(e){var t=e.view;return t}).catch(function(e){var t=e.data||{};throw t});return Gl(a)});Wu.propTypes=Ve["b"].string;var Vu=Object(Xi["a"])("submit an app view dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.viewId,n=r.viewState;if(!a||!n)return Promise.reject();var i=hu["a"].generateAndEnqueue();var s={client_token:i,view_id:a,state:JSON.stringify(n)};var o=e(Object(ze["a"])({method:"views.submit",reason:"submit-view",args:s})).then(function(e){var t=e.view,r=e.response_action;return{updatedView:t,responseAction:r}}).catch(function(e){var t=e.data||{};throw t});return Gl(o)});Vu.propTypes={viewId:Ve["b"].string.isRequired,viewState:Ve["b"].object.isRequired};var Ku=Object(Xi["a"])("delete an app view",function(e,t,r){if(!r)return Promise.reject();var a=hu["a"].generateAndEnqueue();var n={client_token:a,view_id:r};var i=e(Object(ze["a"])({method:"views.close",reason:"close-view",args:n})).catch(function(e){var t=e.data||{};throw t});return Gl(i)});Ku.propTypes=Ve["b"].string.isRequired;var zu=r(192);var Qu=r(1041);var Yu=Object(Uu["b"])(function(e){return e?e.appViews:{}});var Ju=Object(we["b"])("Bulk upsert views to store, with logging",function(e,t,r){var a=t();var n=Object(Ie["b"])(a);var i=Yu(a);var o=[];var l=[];var c=Object(Y["a"])({getState:t});Object(s["forEach"])(r,function(r){if(r&&r.id){if(r!==i[r.id]){o.push(r);i[r.id]?c.debug("APP VIEWS",'bulkUpsertView: updating existing view "'+r.id+'"'):c.debug("APP VIEWS",'bulkUpsertView: adding view "'+r.id+'"')}Object(Ql["b"])(r)&&l.push(r.id);r.blocks&&Object(Qu["b"])(e,t,r.blocks)}});o.length&&e(Bu(o));td().markObjectsAsFresh(n,l);return o});Ju.propTypes=Ve["b"].arrayOf(Nu["a"].maybeUnknown(Nu["a"].AppView)).isRequired;function Xu(e,t){return Promise.all(t.map(function(t){return Object(p["a"])(e,Wu(t))}))}function Zu(e,t){Object(p["a"])(e,Ju(t))}function $u(e,t){return Xu(e,t).then(function(t){return Object(p["a"])(e,Ju(t))})}var ed=Object(s["memoize"])(function(){return new Ql["a"]({fetch:Xu,upsertKnown:Zu,upsertNonExistent:Zu})});var td=Object(s["memoize"])(function(){return new zu["b"]({fetch:$u,isEnabled:function e(){return true}})});var rd=function e(t,r){return td().markObjectsAsStale(t,r)};var ad=function e(t){return td().getFreshObjects(t)};var nd=Object(Uu["b"])(function(e){return e&&e.appViews?e.appViews.activeModalViewId:void 0});var id=Object(Uu["b"])(function(e,t){return t&&t.id&&e&&e.appViews&&e.appViews.viewsState?e.appViews.viewsState[t.id]:void 0});var sd=Object(Uu["b"])(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return false;var a=Object(Ie["b"])(e);var n=Yu(e).views[t];if(!n&&Gu(t)&&r)return ed().fetchObjectWithId(a,t);td().maybeRefetch(a,t);return n||false});var od=Object(Uu["b"])(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r=Object(Ie["b"])(e);var a=Yu(e);var n=a.activeModalViewId;if(!n)return false;var i=a.views[n];if(!i&&t)return ed().fetchObjectWithId(r,n);td().maybeRefetch(r,n);return i||false});var ld=Object(Uu["b"])(function(e){var t=Yu(e);var r=t.activeModalViewId;if(!r)return;return t.viewsState[r]||void 0});var cd=Object(we["b"])("Upsert a single view to store, with logging",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.id){var a=t();var n=Yu(a);if(r!==n[r.id]){var i=Object(Y["a"])({getState:t});i.debug("APP VIEWS",'upsertView: upserting view "'+r.id+'"');e(Mu(r))}}});cd.propTypes=Nu["a"].maybeUnknown(Nu["a"].AppView).isRequired;var ud=Object(we["b"])("Reload view",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.id;if(!a)return false;e(cd({id:a,isUnknown:true}));return e(Wu(a)).then(function(t){return e(cd(t))}).catch(function(){e(cd({id:a,isNonExistent:true}))})});ud.propTypes=Nu["a"].maybeUnknown(Nu["a"].AppView).isRequired;var dd=Object(we["b"])("Submit and upsert view",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.view,n=r.viewState;if(!a.id)return false;return e(Vu({viewId:a.id,viewState:n})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.updatedView,n=t.responseAction;if(r)if("update"===n)e(cd(r));else if("push"===n&&r.previous_view_id===a.id&&a.type===pe["APP_VIEW_TYPES"].modal&&r.type===pe["APP_VIEW_TYPES"].modal){e(cd(r));e(Lu(r.id))}return n})});dd.propTypes={view:Nu["a"].AppView.isRequired,viewState:Ve["b"].object.isRequired};var pd=Object(we["b"])("Remove view",function(e,t,r){if(!r)return false;var a=e(sd(t(),r));if(!a)return false;return e(Fu(a))});pd.propTypes=Ve["b"].string.isRequired;var vd=r(37);var md=r.n(vd);var hd=r(28);var fd=r(2172);var bd={children:Ve["b"].any.isRequired,backButton:Ve["b"].node,showBackButton:Ve["b"].bool,nextButton:Ve["b"].node,showNextButton:Ve["b"].bool,nextButtonTooltip:Ve["b"].node,nextButtonIsDisabled:Ve["b"].bool,nextButtonIsPending:Ve["b"].bool,goOnEnterPressed:Ve["b"].bool,onBack:Ve["b"].func,onNext:Ve["b"].func,"data-qa":Ve["b"].string};var gd={backButton:void 0,showBackButton:true,nextButton:void 0,showNextButton:true,nextButtonTooltip:void 0,nextButtonIsDisabled:false,nextButtonIsPending:false,goOnEnterPressed:true,onBack:s["noop"],onNext:s["noop"],"data-qa":"dialog"};var _d=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Ml["a"])(r,["handleNextClick","handleBackClick","onEnter","setModalRef"]);return r}mr()(t,[{key:"componentDidMount",value:function e(){var t=this.props.goOnEnterPressed;var r=void 0;this.modal&&this.modal.node&&(r=this.modal.node);this.keyCommands=new Dl["a"](r);var a=[];t&&a.push({keys:["enter"],handler:this.onEnter});this.keyCommands.bindAll(a)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onEnter",value:function e(t){var r=t&&t.target&&t.target.tagName;if("BUTTON"===r||"A"===r||"INPUT"===r||"TEXTAREA"===r)return;this.props.onNext()}},{key:"setModalRef",value:function e(t){this.modal=t}},{key:"handleBackClick",value:function e(){this.props.onBack()}},{key:"handleNextClick",value:function e(){this.props.onNext()}},{key:"renderBackButton",value:function e(){var t=this.props,r=t.backButton,a=t["data-qa"];return r&&Kt.a.createElement(hd["d"],{type:"outline",className:"c-wizard_dialog__back",onClick:this.handleBackClick,"data-qa":a+"_back"},r||"Back")}},{key:"renderNextButton",value:function e(){var t=this.props,r=t.nextButton,a=t.nextButtonIsDisabled,n=t.nextButtonIsPending,i=t["data-qa"];return r&&Kt.a.createElement(hd["b"],{type:"primary",className:"c-wizard_dialog__next ",onClick:this.handleNextClick,loading:n,disabled:a,"data-qa":i+"_next"},r||"Next")}},{key:"renderFooter",value:function e(){var t=this.props,r=t.showBackButton,a=t.showNextButton;return(r||a)&&Kt.a.createElement("div",{className:"c-wizard_dialog__footer"},this.renderBackButton(),this.renderNextButton())}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.showBackButton,n=t.showNextButton,s=t.nextButton,o=t.backButton,l=t.goOnEnterPressed,c=md()(t,["children","showBackButton","showNextButton","nextButton","backButton","goOnEnterPressed"]);return Kt.a.createElement(Tr["a"],i()({ref:this.setModalRef,overlayClassName:"c-wizard_dialog",shouldCloseOnOverlayClick:false,goOnEnterPressed:false,showGoButton:false,showCancelButton:false,customFooterContent:this.renderFooter()},c),r)}}]);return t}(Vt["Component"]);_d.displayName="WizardModal";_d.defaultProps=gd;var yd=_d;var Od=r(1223);var kd=new yr["b"]("app_views");var Ed={retryHandler:Ve["b"].func,align:Ve["b"].oneOf(Object(s["values"])(nc["a"])),message:Ve["b"].node,type:Ve["b"].oneOf(Object(s["values"])(nc["c"])),featureAppViewsV1:Ve["b"].bool};var jd={retryHandler:void 0,align:nc["a"].left,message:void 0,type:nc["c"].boxed,featureAppViewsV1:false};var Cd=function(e){gr()(t,e);function t(){pr()(this,t);return fr()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}mr()(t,[{key:"getGeneralError",value:function e(){var t=this.props,r=t.retryHandler,a=t.featureAppViewsV1;if(a)return r?kd.rt("We had some trouble connecting. <a>Try again?</a>",null,function(e){var t=e.text;return Kt.a.createElement(kr["a"],{onClick:r},t)}):kd.t("We had some trouble connecting. Please try again.");return"We had some trouble connecting. Please try again."}},{key:"render",value:function e(){var t=this.props,r=t.align,a=t.message,n=t.type;return Kt.a.createElement(nc["d"],{type:n,align:r,level:nc["b"].error,className:"margin_bottom_100"},a||this.getGeneralError())}}]);return t}(Vt["Component"]);Cd.displayName="AppViewError";var Sd=function e(t){return{featureAppViewsV1:Object(E["isFeatureEnabled"])(t,"feature_app_views_v1")}};Cd.defaultProps=jd;var wd=Object(_r["connect"])(Sd)(Cd);var Id=r(2215);var Td=function(e){gr()(t,e);function t(){pr()(this,t);return fr()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}mr()(t,[{key:"render",value:function e(){var t=this.props,r=t.serverErrors,a=t.showErrors,n=t.viewId,i=t.viewState,s=t.setViewState,o=t.children;return Kt.a.createElement(Id["a"].Provider,{value:{serverErrors:r,showErrors:a,viewId:n,viewState:i,setViewState:s}},o)}}]);return t}(Vt["Component"]);Td.displayName="AppViewProvider";Td.defaultProps={viewId:void 0,viewState:void 0,showErrors:false,serverErrors:void 0,setViewState:s["noop"]};var Ad=Td;var Nd=r(1219);var Pd=r(1261);var Rd=r(3491);var Md={view:Nu["a"].maybeUnknown(Nu["a"].AppView),viewState:Ve["b"].object,isLoading:Ve["b"].bool,loadingFailed:Ve["b"].bool,containerContext:Ve["b"].oneOf(Object(s["values"])(Nd["a"])).isRequired,onViewErrorsUpdate:Ve["b"].func,serverErrors:Ve["b"].object,showErrors:Ve["b"].bool,dispatchReloadView:Ve["b"].func.isRequired,dispatchUpdateViewState:Ve["b"].func.isRequired,dispatchSendActions:Ve["b"].func.isRequired,featureAppViewsV1:Ve["b"].bool};var xd={onViewErrorsUpdate:s["noop"],serverErrors:{},showErrors:false,view:void 0,isLoading:false,loadingFailed:false,viewState:void 0,featureAppViewsV1:false};var Dd=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.viewErrors={};r.iteration=0;Object(Ml["a"])(r,["setViewState","retryLoad","handleAction","renderViewContents"]);return r}mr()(t,[{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.view,n=r.viewState;var o=Object(s["get"])(this.props,"view.blocks");if(!Object(s["isEqual"])(t.view,this.props.view)&&o){var l={};o.forEach(function(e){e.type===pe["BK_BLOCK_TYPES"].input&&(l[e.block_id]=true)});var c=Object(s["get"])(n,"values");var u=Object(s["cloneDeep"])(c);Object.keys(c).forEach(function(e){l[e]||delete u[e]});this.props.dispatchUpdateViewState({view:a,viewState:i()({},n,{values:u})})}}},{key:"setViewState",value:function e(t){var r=this;var a=t.elementState,n=t.elementError;var o=this.props,l=o.view,c=o.viewState;var u=Object(s["cloneDeep"])(Object(s["get"])(c,"values"));Object.keys(a).forEach(function(e){u[e]=a[e]});Object.keys(n).forEach(function(e){n[e]?r.viewErrors[e]=n[e]:delete r.viewErrors[e]});this.props.dispatchUpdateViewState({view:l,viewState:i()({},c,{values:u})});this.props.onViewErrorsUpdate(Object(s["cloneDeep"])(this.viewErrors))}},{key:"retryLoad",value:function e(){this.props.dispatchReloadView({id:this.props.view.id})}},{key:"handleAction",value:function e(t){var r=this.props.view;return!Object(Pd["l"])(r.blocks,t.blockId)&&r.bot_id?this.props.dispatchSendActions({serviceId:r.bot_id,serviceTeamId:r.team_id,container:{type:Nd["a"].view,view_id:r.id},actions:[t]}):Promise.resolve()}},{key:"renderViewContents",value:function e(){var t=this.props,r=t.view,a=t.serverErrors,n=t.showErrors,i=t.containerContext,s=t.viewState;return Kt.a.createElement(Ad,{key:r.id,viewId:r.id,viewState:s,serverErrors:a,showErrors:n,setViewState:this.setViewState},Kt.a.createElement(Rd["a"],{serviceId:r.bot_id,blocks:r.blocks,blocksContainerContext:i,onAction:this.handleAction,container:Nd["a"].view}))}},{key:"render",value:function e(){var t=this.props,r=t.isLoading,a=t.loadingFailed,n=t.featureAppViewsV1;if(!n)return null;var i=void 0;i=r?Kt.a.createElement(rc["a"],{size:"jumbo"}):a?Kt.a.createElement(wd,{retryHandler:this.retryLoad}):this.renderViewContents();return i}}]);return t}(Vt["Component"]);Dd.displayName="AppView";var Fd=function e(t){var r=od(t);return{view:r,viewState:ld(t,r),isLoading:Object(Ql["d"])(r),loadingFailed:Object(Ql["c"])(r),featureAppViewsV1:Object(E["isFeatureEnabled"])(t,"feature_app_views_v1")}};var Ld=function e(t){return{dispatchReloadView:function e(r){return t(ud(r))},dispatchSendActions:function e(r){return t(Object(Od["d"])(r))},dispatchUpdateViewState:function e(r){return t(Du(r))}}};Dd.defaultProps=xd;var Bd=Object(_r["connect"])(Fd,Ld)(Dd);var Ud=r(712);var qd=r(55);var Gd=r(2314);var Hd=new yr["b"]("app_view_modal");var Wd={update:"update",clear:"clear",push:"push",errors:"errors"};var Vd={view:Nu["a"].maybeUnknown(Nu["a"].AppView),viewState:Ve["b"].object,app:Ve["b"].oneOfType([Ve["b"].bool,Nu["a"].maybeUnknown(Nu["a"].App)]),appId:Ve["b"].string,isLoading:Ve["b"].bool,loadingFailed:Ve["b"].bool,title:Ve["b"].object.isRequired,submitButton:Ve["b"].object,closeButton:Ve["b"].object,defaultAppIcon:Ve["b"].string.isRequired,dispatchCloseModal:Ve["b"].func.isRequired,dispatchSetActiveViewId:Ve["b"].func.isRequired,dispatchSubmitAndUpsertView:Ve["b"].func.isRequired,dispatchRemoveViewById:Ve["b"].func.isRequired,dispatchDeleteView:Ve["b"].func.isRequired,featureAppViewsV1:Ve["b"].bool};var Kd={view:void 0,viewState:void 0,app:void 0,appId:void 0,isLoading:false,loadingFailed:false,submitButton:void 0,closeButton:void 0,featureAppViewsV1:false};var zd=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clientErrors=void 0;r.submitAndUpsertViewPromise=void 0;r.state={submittingFailed:false,isSubmitting:false,showErrors:false,errorMsg:void 0,errors:void 0};Object(Ml["a"])(r,["renderTitle","maybeRenderGeneralError","maybeRenderSubmittingSpinner","handleWizardClose","handleWizardNext","handleWizardBack","submit","handleSubmitRejected","handleSubmitResolved","handleViewErrorsUpdate"]);return r}mr()(t,[{key:"componentWillUnmount",value:function e(){this.submitAndUpsertViewPromise&&this.submitAndUpsertViewPromise.cancel&&this.submitAndUpsertViewPromise.cancel()}},{key:"handleWizardClose",value:function e(){this.close();this.removeView({viewId:this.props.view.root_view_id,shouldDeleteView:true})}},{key:"handleWizardNext",value:function e(){this.submit()}},{key:"handleWizardBack",value:function e(){this.back()}},{key:"handleSubmitRejected",value:function e(t){this.setState(function(){return{errorMsg:t.error,errors:t.errors,showErrors:true,isSubmitting:false,submittingFailed:true}})}},{key:"handleSubmitResolved",value:function e(t){var r=this.props.view;if(t===Wd.update||t===Wd.push)this.setState(function(){return{errorMsg:"",errors:{},showErrors:false,isSubmitting:false,submittingFailed:false}});else if(t===Wd.clear){this.close();this.removeView({viewId:r.root_view_id})}else if(!t){if(r.previous_view_id){this.setState(function(){return{errorMsg:"",errors:{},showErrors:false,isSubmitting:false,submittingFailed:false}});this.props.dispatchSetActiveViewId(r.previous_view_id)}else this.close();this.removeView()}}},{key:"handleViewErrorsUpdate",value:function e(t){this.clientErrors=t}},{key:"submit",value:function e(){if(Object(s["isEmpty"])(this.clientErrors)){this.setState(function(){return{errorMsg:"",errors:{},showErrors:false,isSubmitting:true,submittingFailed:false}});var t=this.props,r=t.dispatchSubmitAndUpsertView,a=t.view,n=t.viewState;this.submitAndUpsertViewPromise=r({view:a,viewState:n}).then(this.handleSubmitResolved).catch(this.handleSubmitRejected)}else this.setState(function(){return{showErrors:true}})}},{key:"back",value:function e(){var t=this.props.view;if(t.previous_view_id){this.props.dispatchSetActiveViewId(t.previous_view_id);this.removeView({shouldDeleteView:true})}else{this.close();this.removeView({viewId:t.clear_on_close?t.root_view_id:t.id,shouldDeleteView:true})}}},{key:"close",value:function e(){this.props.dispatchCloseModal()}},{key:"removeView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.viewId,a=t.shouldDeleteView;var n=r||this.props.view.id;this.props.dispatchRemoveViewById(n);a&&this.props.dispatchDeleteView(n)}},{key:"maybeRenderGeneralError",value:function e(){var t=!this.props.isLoading&&!this.props.loadingFailed&&!this.state.isSubmitting&&this.state.submittingFailed&&this.state.errorMsg!==Hu.validationFailed;return t?Kt.a.createElement(wd,{retryHandler:this.submit}):null}},{key:"maybeRenderSubmittingSpinner",value:function e(){return this.state.isSubmitting?Kt.a.createElement(rc["a"],{size:"jumbo",className:"p-app_dialog__submitting_spinner"}):null}},{key:"renderTitle",value:function e(){var t=this.props.view.title||this.props.title;var r=this.props,a=r.featureAppViewsV1,n=r.app,s=r.defaultAppIcon;var o=Object(Jl["a"])(n,72,s);var l=a?Hd.t("Header Icon"):"";return Kt.a.createElement("div",{className:"p-app_dialog__title"},Kt.a.createElement("img",{alt:l,className:"p-app_dialog__title_icon",src:o}),Kt.a.createElement(Ud["a"],i()({className:"p-app_dialog__title_text"},t)))}},{key:"renderBackButton",value:function e(){var t=this.props,r=t.closeButton,a=t.view;var n=a.close||r;n||(n={type:"plain_text",text:"Cancel",emoji:true});return Kt.a.createElement(Ud["a"],n)}},{key:"renderNextButton",value:function e(){var t=this.props,r=t.submitButton,a=t.view,n=t.isLoading,i=t.loadingFailed;var s=!n&&!i&&a.submit||(n||i)&&r;return s&&Kt.a.createElement(Ud["a"],s)}},{key:"render",value:function e(){var t=this.state,r=t.isSubmitting,a=t.showErrors,n=t.errors;var i=this.props.title;var s=this.renderNextButton;var o=ec()("p-app_view_modal",{"p-app_view_modal--submitting":r});return Kt.a.createElement(yd,{className:o,title:this.renderTitle(),titleAria:i.text,showNextButton:!!s,nextButton:this.renderNextButton(),nextButtonIsDisabled:r,nextOnEnterPressed:false,onNext:this.handleWizardNext,backButton:this.renderBackButton(),onBack:this.handleWizardBack,onClose:this.handleWizardClose},this.maybeRenderGeneralError(),Kt.a.createElement(Bd,{containerContext:qd["a"].modal,onViewErrorsUpdate:this.handleViewErrorsUpdate,showErrors:a,serverErrors:n}),this.maybeRenderSubmittingSpinner())}}]);return t}(Vt["Component"]);zd.displayName="AppViewModal";var Qd=function e(t,r){var a=r.appId;var n=od(t);return{view:n,viewState:ld(t),app:Object(Yl["getAppById"])(t,a),isLoading:Object(Ql["d"])(n),loadingFailed:Object(Ql["c"])(n),defaultAppIcon:Object(Yl["getDefaultAppIcon"])(t),featureAppViewsV1:Object(E["isFeatureEnabled"])(t,"feature_app_views_v1")}};var Yd=function e(t){return{dispatchCloseModal:function e(r){return t(Object(Qt["closeModal"])(r))},dispatchSetActiveViewId:function e(r){return t(Lu(r))},dispatchRemoveViewById:function e(r){return t(pd(r))},dispatchDeleteView:function e(r){return t(Ku(r))},dispatchSubmitAndUpsertView:function e(r){return t(dd(r))}}};zd.defaultProps=Kd;var Jd=Object(_r["connect"])(Qd,Yd)(zd);var Xd=Object(we["b"])("Open an app view in a modal",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appId,n=r.title,i=r.submitButton,s=r.closeButton;var o=Kt.a.createElement(Jd,{appId:a,title:n,submitButton:i,closeButton:s});e(Object(Qt["openModal"])({element:o}))});Xd.propTypes={title:Ve["b"].object,submitButton:Ve["b"].object,closeButton:Ve["b"].object};var Zd=Xd;function $d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.view_id,r=e.view_type,a=e.previous_view_id,n=e.client_token,i=e.timeout_range,s=e.title,o=e.submit,l=e.close,c=e.app_id;var u=arguments[1];var d=arguments[2];var p=d();if(!Object(E["isFeatureEnabled"])(p,"feature_app_views_v1"))return;if(!hu["a"].check(n))return;var v=hu["a"].getTimeDelta(n),m=v.delta;if(m>=i)return;var h=od(p);if(!h&&!a||h&&h.id===a){u(Lu(t));h||r!==pe["APP_VIEW_TYPES"].modal||u(Zd({appId:c,title:s,submitButton:o,closeButton:l}))}}function ep(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.view_id;var r=arguments[1];var a=arguments[2];var n=a();if(!Object(E["isFeatureEnabled"])(n,"feature_app_views_v1"))return;var i=Object(Ie["b"])(n);rd(i,[t]);r(ud({id:t}))}Object(Va["a"])("view_opened",$d);Object(Va["a"])("view_updated",ep);var tp=r(363);function rp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app;var r=arguments[1];t&&r(Object(Yl["bulkUpsertAppsAndMarkAsFresh"])([t]))}function ap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_id;var r=arguments[1];var a=arguments[2];np(t,r);ip(t,r,a)}function np(e,t){e&&t(Object(Yl["bulkRmApps"])([e]))}function ip(e,t){t(Object(tp["markAsStaleByAppId"])(e))}Object(Va["a"])("apps_installed",rp);Object(Va["a"])("apps_changed",rp);Object(Va["a"])("apps_uninstalled",ap);var sp=Object(Xi["a"])("Runs a benchmark on a RTM event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.method,n=r.identifier,i=r.loadtest,o=r.args;return e(Object(ze["a"])({method:"api.benchmark",args:{m:a,id:n,lt:i,a:o}})).catch(s["noop"])});sp.propTypes={method:Ve["b"].string,identifier:Ve["b"].string,loadtest:Ve["b"].any,args:Ve["b"].any};var op={},lp=op.didIngestIncomingConfigThisSession;var cp={},up=cp.refetchAuth;var dp=["fast_disco","fetch_auth","reload","slow_disco","fast_failover","slow_failover"];function pp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=arguments[2];var a=e.m,n=e.pct,i=e.sub,s=e.id;if(!Object(fe["a"])())return;if(!Object(He["a"])(n)||!Object(He["a"])(i))return;if(document.hasFocus())return;var o=r();if(lp())return;if(!Object(b["isConnected"])(o))return;var l=Object(Qe["c"])({state:o});l.count("sbb_start");var c=Object(Y["a"])({state:o});c.info("Performing Sonic benchmark '"+a+"' with run id '"+s+"'");if(s){if(window.sessionStorage.getItem("sonic_benchmarks_"+s))return;window.sessionStorage.setItem("sonic_benchmarks_"+s,1)}switch(a){case"fast_disco":t(Object(vi["disconnect"])());break;case"slow_disco":t(Object(vi["clearFastReconnectUrl"])());t(Object(vi["disconnect"])());break;case"fast_failover":t(Object(vi["failover"])());break;case"slow_failover":t(Object(vi["clearFastReconnectUrl"])());t(Object(vi["failover"])());break;case"fetch_auth":up();break;case"reload":Object(Mt["b"])({reason:"sonic_benchmark"});break;default:c.warn("Unable to run Sonic benchmark command '"+a+"'")}}function vp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=arguments[2];var a=e.m,n=e.pct,i=e.sub,s=e.lt,o=e.a,l=e.id;dp.indexOf(a)>=0?pp(e,t,r):Object(He["a"])(n)&&Object(He["a"])(i)&&t(sp({method:a,loadtest:s,args:o,id:l}))}Object(Va["a"])("benchmark",vp);var mp=r(199);function hp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var r=arguments[1];var a=arguments[2];fp({bot:t},r);bp(t,r,a)}function fp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var r=arguments[1];r(Object(mp["upsertBot"])(t))}function bp(e,t){t(Object(tp["markAsStaleByServiceIds"])([e.id]))}Object(Va["a"])("bot_added",fp);Object(Va["a"])("bot_changed",hp);var gp=r(2316);var _p=r(1473);var yp=r(397);var Op=r(334);var kp=r(257);var Ep=r(902);var jp=r(472);var Cp=r(338);var Sp={},wp=Sp.updateCurrentRoute,Ip=Sp.getRouteName,Tp=Sp.getRouteParams;var Ap="CHANNEL-STATUS";function Np(e){var t={};Object(s["has"])(e,"is_moved")&&(t.isMoved=true===e.is_moved);Object(s["has"])(e,"is_frozen")&&(t.isFrozen=true===e.is_frozen);return t}function Pp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=arguments[2];var a=e.channel;var n=r();var s=Object(w["v"])(n,a)&&Object(w["d"])(n,a);if(!s){Object(Y["a"])({getState:r}).warn("Received archive event for an unknown channel: "+a);return}if(Object(A["isArchived"])(s))return;Object(Y["a"])({getState:r}).info(Ap,"Archived channel "+a);var o=void 0;if(Object(A["isPublicChannel"])(s)){var l=Object(T["b"])(n);o=!Object(Rs["isRestricted"])(l)&&Object(A["isMemberOfChannel"])(s)}else Object(A["isPrivateChannel"])(s)&&(o=!!Object(A["isOpen"])(s));var c={id:a,wasArchivedThisSession:o};var u=Np(e);t(Object(re["archiveChannel"])(i()({},c,u)))}function Rp(e,t,r){var a=r();var n=Object(Ie["b"])(a);var i=Object(Y["a"])({teamId:n,label:Ap});var s=e?e.channel:null;if(!s||!s.id){i.warn("Received a backfill with no channel ID: "+JSON.stringify(e));return}i.info("Channel "+s.id+" known to have changed; marking as stale so it will be refetched when needed");Object(yp["d"])(n,[s.id]);t(Object(eo["clearChannelMembershipInfo"])(s.id));t(Object(Ns["clearMemberCounts"])(s.id))}function Mp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];if(Object(A["isIm"])(t)){r(Object(io["a"])({channel:t}));Object(Cp["d"])();r(Object(re["updateOneKeyForChannel"])({id:t.id,opened_this_session:true}));r(Object(Te["c"])({channelId:t.id,openedThisSession:true}));return}if(Object(Rs["isRestricted"])(Object(T["b"])(a())))return;Object(Y["a"])({getState:a}).info(Ap,"Created channel "+t.id);var n=r(Object(io["a"])({channel:t}));Object(os["d"])(n)}var xp=function(){var e=Object(rn["method"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user;var a=arguments[1];a(Object(_p["a"])({channel:t,user:r}))});return function t(r,a){return e.apply(this,arguments)}}();function Dp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.converted_to;var a=arguments[1];var n=arguments[2];var s=n();var o=Object(w["v"])(s,t)&&Object(w["d"])(s,t);if(!o){Object(Y["a"])({getState:n}).error("Unknown channel "+t);return}a(Object(re["updateOneKeyForChannel"])({id:t,is_open:false}));var l=void 0;if(r){a(Object(re["updateOneKeyForChannel"])({id:t,latest:null}));l=r}if(t===Object(C["a"])(n())){var c=Object(E["isClientApp"])(n());if(Object(fe["a"])()){l=l||Object(oo["a"])(n());if(Object(se["j"])(s))a(Object(Oo["a"])({id:l}));else{var u=Ip(n());var d=Tp(n());a(wp({routeName:u,params:i()({},d,{entityId:l})}))}}else c&&l?a(Object(Oo["a"])({id:l})):c&&Object(ve["a"])()}Object(A["isIm"])(o)&&Object(jp["a"])(Object(w["d"])(n(),t))}function Fp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];var n=a();var i=Object(w["v"])(n,t)&&Object(w["d"])(n,t);if(!i){Object(Y["a"])({getState:a}).warn("Received deleted event for an unknown channel: "+t);return}Object(Y["a"])({getState:a}).info(Ap,"Deleted channel "+t);r(Object(f["d"])({ids:[t]}))}function Lp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];var n=a();var i=Object(w["v"])(n,t)&&Object(w["d"])(n,t,false);var s=Object(Y["a"])({getState:a,label:Ap});if(!i){s.warn("Received im_deleted event for an unknown im "+t+", ignoring");return}if(!Object(A["isIm"])(i)){s.warn("Received im_deleted event for a non-im channel "+t+", ignoring");return}var o=Object(A["getMemberIdFromIm"])(i);var l=Object(T["d"])(n,o,false);if(!l||Object(Rs["isUnknownOrNonExistent"])(l))s.warn("Received im_deleted event for im ("+t+") with non-existent or unknown member ("+o+"), ignoring.");else{Object(Y["a"])({getState:a}).info("Received im_deleted event for im ("+t+") with member ("+o+"), removing member ("+o+").");r(Object(I["a"])([l]))}Object(Y["a"])({getState:a}).info("Received im_deleted event for im ("+t+") with member ("+o+"), removing channel ("+t+").");r(Object(f["d"])({ids:[t]}))}function Bp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];Object(Y["a"])({getState:a}).info(Ap,"You joined channel "+t.id);var n=a();if((Object(A["isMpim"])(t)||Object(A["isPrivateChannel"])(t))&&!Object(A["isExternallySharedChannel"])(t)){var s=Object(w["v"])(n,t.id)&&Object(w["d"])(n,t.id);s&&Object(Y["a"])({getState:a}).warn("Received join event for an mpim or group we already know about ("+t.id+"); ignoring it.")}var o=i()({},t,{is_member:true});var l=r(Object(io["a"])({channel:o}));r(Object(f["b"])(l));if(Object(T["l"])(n)){var c=Object(T["b"])(n);r(Object(I["g"])([c]))}}function Up(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];Object(Y["a"])({getState:a}).info(Ap,"You left channel "+t);var n=a();var i=Object(w["v"])(n,t)&&Object(w["d"])(n,t);if(!i){Object(os["q"])(t)||Object(Y["a"])({getState:a}).warn("Received left event for a channel we don't know about ("+t+"); ignoring it.");return}Object(A["isMemberOfChannel"])(i)&&r(Object(re["leaveChannel"])(i));var s=Object(T["l"])(n);(Object(A["isPrivateChannel"])(i)||s)&&r(Object(f["d"])({ids:[i.id]}));if(s){var o=Object(T["b"])(n);r(Object(I["g"])([o]))}}function qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var a=arguments[2];var n=a();var i=Object(w["v"])(n,t.id)&&Object(w["d"])(n,t.id);if(!i){Object(Y["a"])({getState:a}).warn("Received rename event for an unknown channel: "+t.id);return}Object(Y["a"])({getState:a}).info(Ap,"Renamed channel "+t.id);r(Object(re["renameChannel"])({id:t.id,name:t.name,name_normalized:t.name_normalized,_name_lc:t.name.toLowerCase()}))}function Gp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user,a=e.ts,n=e.purpose;var i=arguments[1];var s=arguments[2];var o=s();var l=Object(w["v"])(o,t)&&Object(w["d"])(o,t);if(!l){Object(Y["a"])({getState:s}).warn("Received channel purpose change event for an unknown channel: "+t);return}Object(Y["a"])({getState:s}).info(Ap,r+" changed purpose for channel "+t);var c={creator:r,last_set:a,value:n};i(Object(re["setChannelPurpose"])({id:t,purpose:c}))}function Hp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=arguments[2];var a=e.channel;var n=r();var s=Object(w["v"])(n,a)&&Object(w["d"])(n,a);if(!s){Object(Y["a"])({getState:r}).warn("Received unarchive event for an unknown channel: "+a);return}if(!Object(A["isArchived"])(s)||Object(E["isFeatureEnabled"])(n,"feature_esc_disconnect_v2_client")&&Object(A["isFrozen"])(s))return;Object(Y["a"])({getState:r}).info(Ap,"Unarchived channel "+a);Object(A["isPublicChannel"])(s)&&s.was_archived_this_session&&t(Object(re["joinConversationApi"])({channelId:a,inBackground:true}));var o={id:a};var l=Np(e);t(Object(re["unarchiveChannel"])(i()({},o,l)))}function Wp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user,a=e.ts,n=e.topic;var i=arguments[1];var s=arguments[2];var o=s();var l=Object(w["v"])(o,t)&&Object(w["d"])(o,t);if(!l){Object(Y["a"])({getState:s}).warn("Received topic change event for an unknown channel: "+t);return}Object(Y["a"])({getState:s}).info(Ap,r+" changed topic for "+t);var c={creator:r,last_set:a,value:n};i(Object(re["setChannelTopic"])({id:t,topic:c}))}function Vp(e,t,r){var a=e.channel,n=e.ts,i=e.type;var s=r();var o=Object(w["v"])(s,a)&&Object(w["d"])(s,a);if("group_marked"===i&&Object(A["isMpim"])(o))return;if(!o)return;t(Object(Ep["d"])({id:a,ts:n}))}function Kp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.channels,a=e.updates;var n=arguments[1];var o=arguments[2];var l=o();var c=Object(T["b"])(l);var u=Object(Y["a"])({getState:o,label:Ap});var d=[];r?d=r:t&&(d=[t]);if(!d||!d.length){u.warn("Received channel_updated without a channel, ignoring.");return}d.forEach(function(e){var t=false;var r=Object(w["d"])(l,e,t);if(!r){u.info("Received channel_updated on missing channel: "+e+", ignoring.");return}if(!a||!Object(s["isObject"])(a)){u.warn("Received channel_updated with no updates for channel: "+e+", ignoring.");return}var d=Object(s["clone"])(a);if(Object(s["has"])(a,"is_archived")){var p=i()({channel:e},a);a.is_archived?Pp(p,n,o):Hp(p,n,o)}if(Object(s["has"])(a,"permissions"))if(Object(E["isFeatureEnabled"])(l,"feature_announce_only_websocket")){var v=Object(Op["a"])(l,{prefValue:a.permissions.post,user:c});var m=Object(Op["a"])(l,{prefValue:a.permissions.thread,user:c});d=i()({},Object(s["omit"])(d,["permissions"]),{is_read_only:!v&&!m,is_thread_only:!v&&m})}else d=i()({},Object(s["omit"])(d,["permissions"]));u.info("Received channel_updated for "+e);n(Object(re["handleUpdateChannelEvent"])({channel:i()({},d,{id:e})}))})}function zp(e,t,r){var a=Object(Y["a"])({getState:r,label:Ap});var n=e&&e.channel&&e.channel.id;if(!n){a.warn("Received channel_converted_to_shared without a channel, ignoring.");return}var i=r();var s=Object(w["v"])(i,n)&&Object(w["d"])(r(),n);if(!s){a.info("Received channel_converted_to_shared on missing channel: "+n+", ignoring.");return}if(!Object(A["isOrgShared"])(e.channel)&&!Object(A["isOrgGlobalSharedPublicOrPrivateChannel"])(e.channel)){a.warn("Received channel_converted_to_shared for a non-org-shared, non-global-shared channel: "+n+", ignoring.");return}a.info("Received channel_converted_to_shared for "+n);t(Object(re["convertToShared"])({channel:e.channel}))}function Qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=arguments[2];var a=e.group,n=md()(e,["group"]);var s=Object(Y["a"])({getState:r,label:Ap});if(!a){s.warn("Received group_converted_to_shared without a group, ignoring.");return}var o=i()({},n,{channel:a});zp(o,t,r)}function Yp(e,t,r){var a=e&&e.type;var n=e&&e.channel;if(!n){Object(Y["a"])({getState:r}).warn("Received "+a+" without a 'channel' id.");return}var i=r();var s=Object(w["v"])(i,n)&&Object(w["d"])(i,n);if(!s){Object(Y["a"])({getState:r}).warn("Received "+a+" for an unknown channel: "+n);return}t(Object(ae["removeAllTimestamps"])({channelId:n,includeThreads:Object(E["isFeatureEnabled"])(i,"feature_react_threads")}))}function Jp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.is_global_shared,a=e.teams,n=e.type;var i=arguments[1];var o=arguments[2];var l=o();var c=Object(Y["a"])({getState:o,label:Ap});if(!n){c.warn("Received teams_*_shared_channel without a type, ignoring.");return}if(!Object(kp["e"])(l)){c.warn("Received "+n+" on a non-enterprise, ignoring.");return}if(!t){c.warn("Received "+n+" without a channel, ignoring.");return}var u=false;var d=Object(w["d"])(o(),t,u);if(!d){c.info("Received "+n+" on missing channel: "+t+", ignoring.");return}if(!Object(A["isOrgShared"])(d)){c.warn("Received "+n+" on non-org shared channel: "+t+", ignoring.");return}c.info("Received "+n+" for "+t);var p=Object(Ie["b"])(l);if("teams_left_shared_channel"===n&&a.indexOf(p)<0){c.info("Handling "+n+", current team ("+p+") was removed from "+t+", removing channel from store.");i(Object(f["d"])({ids:[t]}));return}var v=a;var h=a;if("teams_joined_shared_channel"===n)if(r)v=[];else{var b=Object(A["getInternalTeamIds"])(l,d)||[];h=Object(s["uniq"])([].concat(m()(h),m()(b)));v=Object(s["uniq"])(v.concat(b))}i(Object(re["updateOrgAccessForChannel"])({channelId:t,orgWide:r,teamIds:v,internalTeamIds:h}))}var Xp={};Object.defineProperty(Xp,"channelArchived",{get:function e(){return Pp},set:function e(t){Pp=t}});Object.defineProperty(Xp,"channelUnarchived",{get:function e(){return Hp},set:function e(t){Hp=t}});Object(Va["a"])("channel_archive",Pp);Object(Va["a"])("channel_changed",Rp);Object(Va["a"])("channel_created",Mp);Object(Va["a"])("channel_deleted",Fp);Object(Va["a"])("channel_joined",Bp);Object(Va["a"])("channel_left",Up);Object(Va["a"])("channel_rename",qp);Object(Va["a"])("channel_unarchive",Hp);Object(Va["a"])("channel_updated",Kp);Object(Va["a"])("group_archive",Pp);Object(Va["a"])("group_deleted",Fp);Object(Va["a"])("group_joined",Bp);Object(Va["a"])("group_left",Up);Object(Va["a"])("group_rename",qp);Object(Va["a"])("group_unarchive",Hp);Object(Va["a"])("mpim_joined",Bp);Object(Va["a"])("mpim_open",xp);Object(Va["a"])("im_created",Mp);Object(Va["a"])("im_open",xp);Object(Va["a"])("im_deleted",Lp);Object(Va["a"])("mpim_close",Dp);Object(Va["a"])("im_close",Dp);Object(Va["a"])("channel_marked",Vp);Object(Va["a"])("group_marked",Vp);Object(Va["a"])("mpim_marked",Vp);Object(Va["a"])("im_marked",Vp);Object(Va["a"])("channel_converted_to_shared",zp);Object(Va["a"])("group_converted_to_shared",Qp);Object(Va["a"])("teams_joined_shared_channel",Jp);Object(Va["a"])("teams_left_shared_channel",Jp);Object(Va["a"])("channel_history_changed",Yp);Object(Va["a"])("im_history_changed",Yp);Object(Va["a"])("mpim_history_changed",Yp);Object(Va["a"])("group_history_changed",Yp);var Zp=r(851);var $p=void 0;function ev(e){$p||($p=Object(s["throttle"])(function(){return e(Object(Xo["b"])({resetPreviousCommands:true}))},1e3,{leading:false,trailing:true}));return $p}function tv(e,t){var r=e.commands_removed,a=e.commands_updated,n=e.commands_cache_ts;if(r||a){Object(s["forEach"])(r,function(e){return t(Object(Zp["b"])({commandName:e.name}))});t(Object(Zp["a"])({commands:a,cacheTs:n}))}else ev(t)()}Object(Va["a"])("commands_changed",tv);var rv="DND";function av(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,r=e.type,a=e.user;var n=arguments[1];var i=arguments[2];var s=i();if(!Object(E["isFeatureEnabled"])(s,"feature_sonic_dnd_rtm")&&!Object(h["a"])())return;if(!Object(Za["getDndScheduleByMemberId"])(s,a))return;Object(Y["a"])({getState:i}).info(rv,"Received a "+r+" event for the current member ("+a+") with updated DND times");var o=t.next_dnd_start_ts,l=t.next_dnd_end_ts,c=t.snooze_enabled,u=t.snooze_endtime;n(Object($a["d"])({nextDndStartTs:o,nextDndEndTs:l,snoozeEnabled:c,snoozeEndTs:u}));n(Object($a["a"])({fetchDndTimes:false}))}function nv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,r=e.type,a=e.user;var n=arguments[1];var i=arguments[2];var s=i();if(!Object(E["isFeatureEnabled"])(s,"feature_sonic_dnd_rtm")&&!Object(h["a"])())return;if(a===Object(E["getCurrentUserId"])(s))return;if(!Object(Za["getDndScheduleByMemberId"])(s,a))return;Object(Y["a"])({getState:i}).info(rv,"Received a "+r+" event for the following member with updated DND times: "+a);var o=t.next_dnd_start_ts,l=t.next_dnd_end_ts;n(Object(Za["updateDndSchedule"])({memberId:a,nextDndStartTs:o,nextDndEndTs:l}));n(Object($a["a"])({fetchDndTimes:false}))}Object(Va["a"])("dnd_updated",av);Object(Va["a"])("dnd_updated_user",nv);var iv=r(717);var sv=r(1099);var ov=r(158);var lv=function e(t,r,a){if(!t)return;var n=a();var i=Object(E["isFeatureEnabled"])(n,"feature_sonic_emoji");if(!i)return;var s=t.name,o=t.names,l=t.subtype,c=t.value,u=t.old_name,d=t.new_name,p=t.event_ts;var v=Object(Ie["b"])(n);var m=Object(Y["a"])({teamId:v});if(!p){m.warn("RTM","emoji_changed: missing event_ts");return}if("add"===l){if(s&&c){var h=Object(ov["i"])(dt()({},s,c)),f=h.emojis,b=h.aliases;r(Object(sv["bulkAddCustomEmoji"])({teamId:v,cacheTs:p,emojis:f,aliases:b}))}else m.warn("RTM",'emoji_changed: "add" subtype missing "name" or "value"');return}if("remove"===l){Array.isArray(o)?r(Object(iv["bulkRemoveCustomEmoji"])({teamId:v,cacheTs:p,names:o})):m.warn("RTM",'emoji_changed: "remove" subtype missing "names"');return}if("rename"===l){u&&d?r(Object(iv["renameCustomEmoji"])({teamId:v,cacheTs:p,prevName:u,nextName:d})):m.warn("RTM",'emoji_changed: "rename" subtype missing "old_name" or "new_name"');return}m.warn("RTM","emoji_changed: unknown or missing subtype")};Object(Va["a"])("emoji_changed",lv);var cv={handleEmojiChanged:lv};var uv=new yr["b"]("files");function dv(e,t,r){if(Ua["isDesktop"]){var a=r();var n=Object(E["isFeatureEnabled"])(a,"feature_email_notify");if(!n)return;var i=e.file_id;if(!i)return;var o=Object(Rn["getFileById"])(a,i);var l=Object(Ie["b"])(a);var c=Object(w["j"])(a,Object(T["b"])(a).id);if(!c)return;var u=Object(s["includes"])(e.channels,c.id);var d=Object(w["d"])(a,Object(s["head"])(e.channels));if(!d){Object(Y["b"])().warn("invalid channel in email_shared RTM");return}var p={title:uv.t("Shared with {channel_name}",{channel_name:Object(A["getDisplayNameForChannel"])(a,d,{imIncludeAtSign:false})}),content:o.subject||uv.t("(No Subject)"),channel:"launch_uri",thread_ts:u?"slack://share-file?id="+i+"&team="+l:"slack://channel?team="+l+"&id="+d.id};u&&(p.subtitle=uv.t("Click to Share"));Object(Ua["notify"])(p)}}Object(Va["a"])("email_shared",dv);var pv=r(1104);function vv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;Object(pv["c"])(t);Object(pv["d"])(t)}Object(Va["a"])("enterprise_rename",vv);var mv=r(479);var hv=r(1198);var fv=r(473);function bv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id;var r=arguments[1];var a=arguments[2];if(!t)return;var n=a();if(!Object(Rn["hasFileWithId"])(n,t))return;var i=Object(Ie["b"])(n);if(!Object(Rn["isObjectFresh"])(i,t))return;var s=Object(Rn["getFileById"])(n,t);Object(mv["r"])(i,[t]);Object(Dn["d"])(s);Object(fv["a"])()&&n.docs&&n.docs[t]&&r(Object(hv["noopAction"])())}function gv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id,r=e.file_ids;var a=arguments[1];var n=arguments[2];var i=r||[t];Object(s["compact"])(i).forEach(function(e){if(Object(h["a"])()){var t=false;var r=Object(Rn["getFileById"])(n(),e,t);r&&a(Object(Rn["tombstoneFile"])({fileId:e}))}else Object(Dn["n"])(e)})}function _v(e,t,r){var a=Object(E["isFeatureEnabled"])(r(),"feature_file_comment_deleted_rtm_handler");if(!a)return;var n=e.file_id,i=e.comment;null!==Object(mv["l"])(r(),n,i)&&t(Object(mv["s"])({fileId:n,commentId:i}))}Object(Va["a"])("file_created",bv);Object(Va["a"])("file_public",bv);Object(Va["a"])("file_private",bv);Object(Va["a"])("file_change",bv);Object(Va["a"])("file_shared",bv);Object(Va["a"])("file_unshared",bv);Object(Va["a"])("file_deleted",gv);Object(Va["a"])("file_comment_deleted",_v);var yv=r(1094);function Ov(e,t,r){if(!Object(fe["a"])()&&"client"!==Object(E["getFromBootData"])(r(),"app"))return;Object(yv["b"])()}Object(Va["a"])("shared_invite_code_created",Ov);Object(Va["a"])("shared_invite_code_disabled",Ov);var kv=Object(Gn["b"])("TS.help.onIssueChange");var Ev=r(912);function jv(e,t){var r=e.issue;Object(h["a"])()?t(Object(Ev["upsertHelpCenterIssue"])(r)):kv(r)}Object(Va["a"])("issue_change",jv);var Cv=r(1083);var Sv=r(1516);var wv=r(798);var Iv=r(447);var Tv=r(1170);var Av=r(452);var Nv=r(68);var Pv=r(4608);function Rv(e,t,r){var a=e.user,n=e.channel,i=e.inviter;var s=r();var o=Object(T["m"])(s,a)&&Object(T["d"])(s,a);var l=Object(w["v"])(s,n)&&Object(w["d"])(s,n);var c=Object(E["getCurrentUserId"])(s);var u=Object(T["b"])(s);var d=true;var p=Object(Y["a"])({state:s});var v=t(Object(eo["setChannelMembershipInfoForUsers"])({channelId:n,membershipInfo:dt()({},a,d)}));if(v){t(Object(Ns["updateAndInvalidateMemberCounts"])({channelId:n}));t(Object(_u["maybeUpdateAppPermissionsAfterChannelAdd"])({appUserId:a,channelId:n}));Object(Rs["isAppOrBot"])(o)&&(Object(E["isFeatureEnabled"])(s,"feature_m11n_channel_details")?t(Object(Cv["markAppsInChannelAsStale"])(n)):bu(l))}if(l&&!Object(A["isIm"])(l)&&!Object(A["isMpim"])(l)){if(!Object(A["isMemberOfChannel"])(l)){p.info(a+" joined channel "+n+" but we are not a member; ignoring");return}p.info(a+" joined channel "+n);i&&a===c&&t(Object(Tv["addInviter"])({channelId:n,inviter:i}));if(v){var m=Object(E["isFeatureEnabled"])(s,"feature_stranger_danger")?!Object(Pv["canMemberInteractById"])(s,a):Object(Rs["isStranger"])(o);(Object(Rs["isExternal"])(o)||Object(Rs["isRestricted"])(u))&&m&&(Object(E["isFeatureEnabled"])(s,"feature_stranger_danger")?Object(Iv["c"])(Object(Ie["b"])(s),[o.id]):t(Object(I["h"])(o)));Object(os["g"])(l,a)}}var h=Object(Ie["b"])(s);t(Object(Sv["verifyActiveChannelAndMarkObjectsAsStale"])({teamId:h,ids:[n]}))}function Mv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,r=e.channel;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(T["m"])(i,t)&&Object(T["d"])(i,t);var o=Object(w["v"])(i,r)&&Object(w["d"])(i,r);var l=false;var c=Object(Y["a"])({state:i});var u=a(Object(eo["setChannelMembershipInfoForUsers"])({channelId:r,membershipInfo:dt()({},t,l)}));var d=Object(Ie["b"])(i);a(Object(Sv["verifyActiveChannelAndMarkObjectsAsStale"])({teamId:d,ids:[r]}));if(u){a(Object(Ns["updateAndInvalidateMemberCounts"])({channelId:r}));a(Object(_u["maybeUpdateAppPermissionsAfterChannelRemove"])({appUserId:t,channelId:r}));Object(Rs["isAppOrBot"])(s)&&(Object(E["isFeatureEnabled"])(i,"feature_m11n_channel_details")?a(Object(Cv["removeAppsInChannelUserId"])({channelId:r,userId:t})):bu(o))}if(o&&!Object(A["isIm"])(o)&&!Object(A["isMpim"])(o)){if(!Object(A["isMemberOfChannel"])(o)){c.info(t+" left channel "+r+" but we are not a member; ignoring");return}c.info(t+" left channel "+r);if(u){var p=Object(T["b"])(i);var v=Object(E["isFeatureEnabled"])(i,"feature_stranger_danger")?Object(Pv["canMemberInteractById"])(i,t):!Object(Rs["isStranger"])(s);(Object(Rs["isExternal"])(s)||Object(Rs["isRestricted"])(p))&&v&&(Object(E["isFeatureEnabled"])(i,"feature_stranger_danger")?Object(Iv["c"])(Object(Ie["b"])(i),[s.id]):a(Object(I["h"])(s)));Object(os["h"])(o,t)}}}function xv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user;var r=arguments[1];var a=arguments[2];if(!t)return;var n=a();var i=Object(T["m"])(n,t.id)&&Object(T["d"])(n,t.id);if(!i)return;if(!Object(E["isFeatureEnabled"])(n,"feature_degraded_send")&&i.id===Object(E["getCurrentUserId"])(n)&&t.profile&&!t.profile.email&&!Object(Nv["a"])(n,"display_email_addresses")){var s=i.profile&&i.profile.email;if(s){Object(Y["a"])({state:n}).info("user_change: email hidden via team pref. appending email from model for local user, so it is not lost in upsert.");t.profile.email=s}}Object(h["a"])()?r(Object(wv["a"])({members:[t]})):Object(Cp["f"])(t)}function Dv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,r=e.channel;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(T["m"])(i,t)&&Object(T["d"])(i,t);if(!s){Object(Y["a"])({state:i}).info("user_typing event from user ("+t+") not in model; ignoring");return}var o=Object(w["v"])(i,r)&&Object(w["d"])(i,r);if(!o){Object(Y["a"])({state:i}).warn("user_typing event for channel ("+r+") not in model; ignoring");return}a(Object(Av["memberStartedTyping"])({channelId:r,memberId:t}))}Object(Va["a"])("member_joined_channel",Rv);Object(Va["a"])("member_left_channel",Mv);Object(Va["a"])("user_change",xv);Object(Va["a"])("user_typing",Dv);var Fv=r(1277);var Lv=r(505);var Bv=r(863);var Uv=r(41);var qv=r(1288);var Gv=r(1289);var Hv=r(351);var Wv=r(361);var Vv=r(385);var Kv=r(274);var zv=Object(we["b"])("If all threads is open, maybe update it after a new message arrives",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs;var i=Object(co["getThreadKey"])(a,n);var o=Object(Y["a"])({getState:t,label:"MAYBE-ALL-THREADS"});if(!Object(E["isClientApp"])(t()))return Promise.resolve();var l=Object(C["a"])(t());var c=Object(se["j"])(t())||!Object(se["f"])(t());if(l!==Kv["a"].allThreads||!c)return Promise.resolve();return e(Object(Hv["promiseToGetSubscribed"])({channelId:a,threadTs:n})).then(function(r){if(!r)return Promise.resolve();o.info("Incrementing new reply count with "+i);e(Object(Wv["incrementTotalUnreadReplies"])());var l=Object(Wv["getThreads"])(t());var c=Object(s["some"])(l,{threadKey:i});if(c)return Promise.resolve();return e(Object(Vv["requestReplies"])({channelId:a,threadTs:n,limit:5})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.msgs;if(!r||!r.length)return;var a=Object(s["last"])(r).ts;var n={threadKey:i,sortTs:a,hasUnreads:true};o.info("Prepending "+i);e(Object(Wv["prependThread"])({thread:n}))})})});zv.propTypes={channelId:Ve["b"].string,threadTs:Ve["b"].string};var Qv=zv;var Yv=r(359);var Jv=r(803);var Xv=Object(we["b"])("Fetch a specific activity mention item by timestamp if the activity flexpane is open",function(e,t,r){var a=t();var n=Object(se["i"])(a);if("activity"!==n)return Promise.resolve();return e(Object(Jv["fetchActivityByMessageTs"])(r))});Xv.propTypes={channelId:Ve["b"].string.isRequired,messageTs:Ve["b"].string.isRequired};var Zv=Xv;var $v=r(268);var em=r(573);var tm=r(239);var rm=r(162);var am=r(901);var nm=new Set;function im(e,t,r){var a=r();if(!Object(E["isClientApp"])(a))return null;var n=Object(w["v"])(a,e.channel)&&Object(w["d"])(a,e.channel);var i=om(e);var s=void 0;s=Object(A["isMemberOfChannel"])(n)?"desktop_notification"===e.type?Object(tm["p"])(a,e):Object(A["isIm"])(n)?Object(tm["q"])(a,e,n):Object(tm["o"])(a,e,n):rm["a"].NOT_A_MEMBER;s===rm["a"].NONE&&nm.has(i)&&(s=rm["a"].ALREADY_SHOWN);if(s!==rm["a"].NONE){var o=Object(rm["b"])(s,n&&n.id,e.ts);if(o){Object(Y["a"])({getState:r}).warn("Notification ("+e.type+") suppressed because:\n"+o);lm(a,{channel:n.id,timestamp:e.ts||e.msg,description:o})}}else{t(Object(am["e"])({message:e,modelObject:n,options:"desktop_notification"===e.type?{skip_formatting:true,launch_uri:e.launchUri,image_uri:e.imageUri,avatar_image:e.avatarImage}:{}}));nm.add(i);lm(a,{channel:n.id,timestamp:e.ts||e.msg,description:"Notification shown"})}return s}function sm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.timestamp;var a=arguments[1];var n=arguments[2];var s=n();var o=Object(le["a"])(s,t,r);if(!o)return;if(o._ignore_dnd)return;a(Object(so["a"])([i()({},o,{_ignore_dnd:true})]));var l=Object(le["a"])(n(),t,r);im(l,a,n)}function om(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.msg,a=e.ts;return t&&(a||r)?t+":"+(a||r):Date.now().toString()}function lm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channel,a=t.timestamp,n=t.description;var i={channel:r,msg_ts:a,desc:n};Object.keys(i).forEach(function(t){Object(Qe["b"])({state:e}).recordMetric(t,i[t])})}Object(Va["a"])("desktop_notification",im);Object(Va["a"])("dnd_override",sm);var cm={};Object.defineProperty(cm,"beaconNotification",{get:function e(){return lm},set:function e(t){lm=t}});var um=r(293);var dm=r(326);var pm="RTM-THREADS";var vm=function e(t,r,a){var n=a();var i=t.channel,s=t.message;var l=Object(w["v"])(n,i)&&Object(w["d"])(n,i);var c=Object(le["a"])(n,i,s.ts);var u=void 0;s&&s.latest_reply?u=s.latest_reply:s&&s.replies&&s.replies.length&&(u=o.a.maxBy(s.replies,"ts").ts);if(c&&c.reply_count){var d=void 0;c&&c.latest_reply?d=c.latest_reply:c&&c.replies&&c.replies.length&&(d=o.a.maxBy(c.replies,"ts").ts);if(u<d){Object(Y["a"])({getState:a}).info(pm,"Not processing an older message_replied event, "+u+" < "+d+", in "+i);return}}Object($v["i"])(t);var p=r(Object(um["a"])({imsgs:[s],channelId:i}));r(Object(so["a"])(p));Object($v["k"])(l,s,true,false)};function mm(e,t,r){var a=e.subscription||{},n=a.channel,i=a.thread_ts,s=a.last_read;if(!n||!i)return;Object(Y["a"])({getState:r}).info(pm,"thread_subscribed "+n+" "+i);t(Object(Hv["upsertSubscriptionAndMarkAsFresh"])({channelId:n,ts:i,subscribed:true,lastRead:s}))}function hm(e,t,r){var a=e.subscription||{},n=a.channel,i=a.thread_ts,s=a.last_read;if(!n||!i)return;Object(Y["a"])({getState:r}).info(pm,"thread_unsubscribed "+n+" "+i);t(Object(Hv["upsertSubscriptionAndMarkAsFresh"])({channelId:n,ts:i,subscribed:false,lastRead:s}))}function fm(e,t){var r=e.subscription||{},a=r.channel,n=r.thread_ts,i=r.last_read;if(!a||!n)return;t(Object(Hv["setSubscription"])({channelId:a,ts:n,lastRead:i}))}function bm(e,t,r){var a=Object(E["isFeatureEnabled"])(r(),"feature_react_threads");if(!a)return;var n=e.has_unreads,i=e.timestamp,s=e.mention_count,l=e.mention_count_by_channel;Object(Y["a"])({getState:r}).info(pm,"update_thread_state has_unreads:"+n+" mention_count:"+s+" ts:"+i);Object(E["isFeatureEnabled"])(r(),"feature_incremental_unread_counts")?t(Object(ue["threadsUnreadCountChanged"])({threadsHasUnreads:n,threadsMentionCountByChannel:o.a.isArray(l)?{}:l})):t(Object(dm["updateUnreadThreads"])({hasUnreads:n,mentionCountByChannel:o.a.isArray(l)?{}:l}))}Object(Va["a"])("thread_subscribed",mm);Object(Va["a"])("thread_unsubscribed",hm);Object(Va["a"])("thread_marked",fm);Object(Va["a"])("update_thread_state",bm);function gm(e,t,r){if(!e)return;var a=r();switch(e.subtype){case"message_changed":ym(e,t,r);return;case"message_deleted":Om(e,t,r);return;case"message_replied":vm(e,t,r);return;case"channel_history_changed":case"group_history_changed":case"im_history_changed":case"mpim_history_changed":return;case"channel_purpose":case"group_purpose":Gp(e,t,r);break;case"channel_topic":case"group_topic":Wp(e,t,r);break;default:break}_m(e,t,r);im(e,t,r);km(e,t,r);Em(e,r);if(Object(E["isFeatureEnabled"])(a,"feature_sonic_activity")){var n=Object(E["getCurrentUserId"])(a);if(!Object(Uv["isFromCurrentUser"])(e,n)){var i=Object(Yv["a"])(a);var o=Object(Ie["b"])(a);Object(Uv["containsMention"])(e,n,i,o)&&t(Zv({channelId:e.channel,messageTs:e.ts})).catch(s["noop"])}}Object(E["isFeatureEnabled"])(r(),"feature_react_all_threads")&&e.thread_ts&&t(Qv({channelId:e.channel,threadTs:e.thread_ts}))}function _m(e,t,r){if(!Object(fe["a"])())return;if(!e||!e.channel)return;var a=t(Object(qv["a"])(e));Object(Lv["c"])(r,t,a,e)}function ym(e,t,r){var a=r();var n=Object(Y["a"])({state:a});var i=e.message,s=e.channel,o=e._from_evt_log,l=e.previous_message;var c=Object(w["v"])(a,s)&&Object(w["d"])(a,s);if(!i){n.error("no message?");return}if(!i.ts){n.error("no message ts?");return}if(!c){n.error("unknown msg.channel:"+s);return}Object($v["i"])(e);t(Object(Gv["a"])({message:i,channelId:s,fromEventLog:o,prevMessage:l}));Object(E["isFeatureEnabled"])(a,"feature_sonic_activity")&&Object(Uv["isTombstone"])(i)&&t(Object(Jv["removeActivityByMessageTs"])({channelId:s,messageTs:i.ts}))}function Om(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleted_ts,r=e.channel,a=e._from_evt_log;var n=arguments[1];var i=arguments[2];n(Object(Fv["a"])({deleted_ts:t,channel:r,_from_evt_log:a}));var s=i();Object(E["isFeatureEnabled"])(s,"feature_sonic_activity")&&n(Object(Jv["removeActivityByMessageTs"])({channelId:r,messageTs:t}))}function km(e,t,r){var a=r();var n=Object(E["getCurrentUserId"])(a);if(!Object(E["isFeatureEnabled"])(a,"feature_ally_sounds"))return;if(!Object(ne["isWindowFocused"])(a))return;if(!Object(Ua["isScreenReaderEnabled"])())return;if(Object(Uv["isFromCurrentUser"])(e,n))return;if(Object(Uv["isReply"])(e))return;if(!Object(Uv["isFromChannel"])(e,Object(C["a"])(a)))return;var i=Object(Uv["containsMention"])(e,n,Object(Yv["a"])(a),Object(Ie["b"])(a));Object(em["b"])(i)}function Em(e,t){var r=Object(Ie["b"])(t());var a=e.client_msg_id;Object(Bv["b"])(r,a)}Object(Va["a"])("message",gm);var jm=r(933);Object(Va["a"])("slackbot_continue",jm["c"]);Object(Va["a"])("slackbot_response_sent",jm["d"]);Object(Va["a"])("slackbot_skip_or_stop",jm["e"]);var Cm=r(2317);var Sm=r(3959);var wm=r(254);var Im=r(77);function Tm(e,t){var r=t.file;if(r&&1===Object.keys(r).length){if(Object(Rn["hasFileWithId"])(e,r.id))return Object(Rn["getFileById"])(e,r.id);return null}return r}var Am=Tm;var Nm=r(4277);var Pm=Object(we["b"])("Upserts a file after a change in the pinned status and returns the new message event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.item,n=r.pinned,s=r.channelId,o=r.pinnedInfo;var l=Am(t(),a);if(!l)return a;var c=Object(Im["extendFileWithPinnedInfo"])(l,s,o);var u=Object(Nm["a"])(n,c,s);e(Object(wm["a"])({files:[u]}));return i()({},a,{file:u})});Pm.propTypes={channelId:Ve["b"].string.isRequired,item:Ve["b"].object.isRequired,pinned:Ve["b"].bool.isRequired,pinnedInfo:Ve["b"].object};var Rm=Pm;var Mm=r(838);var xm=Object(we["b"])("Upserts a file after a change in a file comment pinned status and returns the new message event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.item,n=r.pinned,o=r.channelId;var l=Am(t(),a);if(!l)return a;var c=a.comment;var u=Object(s["findIndex"])(l.comments,function(e){return e.id===c.id});var d=i()({},l);var p=void 0;if(u>-1){var v=Object(Nm["a"])(n,l.comments[u],o);p=i()({},v);d.comments[u]=i()({},v)}else{p=c;d=Object(Mm["a"])(c,l)}e(Object(wm["a"])({files:[d]}));return i()({},a,{comment:p})});xm.propTypes={channelId:Ve["b"].string.isRequired,item:Ve["b"].object.isRequired,pinned:Ve["b"].bool.isRequired};var Dm=xm;var Fm=r(234);var Lm=r(304);var Bm={message:"message",file_comment:"file_comment",file:"file"};var Um=Bm;var qm=function e(t,r){var a=r.type;if(a!==t.type)return false;switch(a){case Um.message:return t.message.ts===r.message.ts;case Um.file:return t.file.id===r.file.id;case Um.file_comment:return t.comment.id===r.comment.id;default:return false}};var Gm=function e(t,r){var a=function e(t){return qm(t,r)};return Object(s["findIndex"])(t,a)};var Hm=function e(t,r){var a=function e(t){return qm(t,r)};return Object(s["reject"])(t,a)};var Wm=qm;var Vm=Object(we["b"])("Update the pinned_items field for a channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.pinned,n=r.item,s=r.channelId,o=r.count;var l=Object(Y["a"])({getState:t,label:"UPDATE_CHANNEL_PINNED_ITEMS"});var c=false;var u=Object(w["d"])(t(),s,c);if(!u){l.warn("Channel matching "+s+" not found.");return}var d=i()({},u,{pinned_items:u.pinned_items||[],pinned_items_count:u.pinned_items_count||0});if(!Object(Lm["b"])(d)){e(Object(Fm["updatePinCount"])({channelId:s,count:o}));return}if(a){var p=Gm(d.pinned_items,n);if(-1===p){d.pinned_items=[n].concat(m()(d.pinned_items));Object(Lm["i"])(d,o);e(Object(re["addChannel"])({channel:d}));Object(Lm["c"])(d,n,a)}}else{d.pinned_items=Hm(d.pinned_items,n);Object(Lm["i"])(d,o);e(Object(re["addChannel"])({channel:d}));Object(Lm["c"])(d,n,a)}});Vm.propTypes={channelId:Ve["b"].string.isRequired,item:Ve["b"].object.isRequired,pinned:Ve["b"].bool.isRequired,count:Ve["b"].number.isRequired};var Km=Vm;var zm=Object(we["b"])("Updates local state when pin status on a channel has changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.pinned,n=r.item,i=r.channelId,s=r.pinCount,o=r.pinnedInfo;var l={};if(a&&o){l.pinnedBy=o.pinned_by;l.pinnedTs=o.pinned_ts}var c=n.type;var u=void 0;switch(c){case Um.message:u=e(Object(Sm["a"])({pinned:a,item:n,channelId:i,pinnedInfo:l}));break;case Um.file_comment:u=e(Dm({pinned:a,item:n,channelId:i}));break;case Um.file:u=e(Rm({pinned:a,item:n,channelId:i,pinnedInfo:l}));break;default:}e(Km({pinned:a,item:u,channelId:i,count:s}))});zm.propTypes={pinned:Ve["b"].bool.isRequired,item:Ve["b"].object.isRequired,channelId:Ve["b"].string.isRequired,maybeCount:Ve["b"].number,pinnedInfo:Ve["b"].object};var Qm=zm;var Ym=Qm;function Jm(e,t,r){var a=Object(Y["a"])({getState:r,label:"PIN_ADDED_RTM"});if(!e||!e.channel_id){a.warn("RTM event missing, or missing channel_id.");return}var n=false;var i=r();var s=e.channel_id;var o=Object(w["d"])(i,s,n);if(!o){a.warn("Channel matching "+s+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=true;t(Ym({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}));if(Object(E["isFeatureEnabled"])(i,"feature_sonic_pins")){Object(Fm["getLoadingState"])(i,s)===Fm["PINS_LOADING_STATES"].LOADED&&t(Object(Fm["addPinnedItems"])({items:[Object(Fm["formatPinFromAPI"])(l)],channelId:s}));t(Object(Fm["updatePinCount"])({count:c,channelId:s}))}}function Xm(e,t,r){var a=Object(Y["a"])({getState:r,label:"PIN_REMOVED_RTM"});if(!e||!e.channel_id){a.warn("RTM event missing, or missing channel_id.");return}var n=false;var i=r();var s=e.channel_id;var o=Object(w["d"])(i,s,n);if(!o){a.warn("Channel matching "+s+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=false;t(Ym({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}));if(Object(E["isFeatureEnabled"])(i,"feature_sonic_pins")){Object(Fm["getLoadingState"])(i,s)===Fm["PINS_LOADING_STATES"].LOADED&&t(Object(Fm["removePinnedItem"])({item:Object(Fm["formatPinFromAPI"])(l),channelId:s}));t(Object(Fm["updatePinCount"])({count:c,channelId:s}))}}Object(Va["a"])("pin_added",Jm);Object(Va["a"])("pin_removed",Xm);var Zm=r(1218);var $m=r(217);var eh=r(575);var th=Object(we["b"])("Set currently muted channels from the muted_channels pref",function(e,t,r){var a=t();var n=Object(Y["a"])({state:a,label:"MUTED-CHANNELS"});var i=Object(U["g"])(a,"muted_channels");if(r===i){n.info("Muted channels haven't changed, returning early");return}n.info("Muted channels changed, new muted channels: "+r);e(Object(q["b"])({pref:"muted_channels",value:r}));var o=Object(s["isString"])(r)?r.split(","):[];var l=o.reduce(function(e,t){e[t]=true;return e},{});e(Object($m["setMutedChannels"])(l));Object(eh["b"])()});th.propTypes=Ve["b"].string;var rh=r(1069);var ah=new Set(["emoji_use","graphic_emoticons","emoji_mode","preferred_skin_tone"]);var nh=new Set(["who_can_post_general"]);function ih(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.value;var a=arguments[1];var n=arguments[2];var i=n();if("arrow_history"===t&&(Object(fe["a"])()||Object(E["isFeatureEnabled"])(i,"feature_sonic_inputs")))return;if("muted_channels"===t){a(th(r));return}if(ah.has(t))Object(eh["c"])({name:t,value:r});else{a(Object(q["b"])({pref:t,value:r}));Object(eh["e"])({name:t,value:r})}}function sh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.value;var a=arguments[1];"who_can_manage_ext_shared_channels"===t&&a(Object(rh["a"])({pref:t,value:r}));if(nh.has(t))Object(eh["d"])({name:t,value:r});else{a(Object(Zm["b"])({pref:t,value:r}));Object(eh["f"])({name:t,value:r});"dropbox_legacy_picker"===t&&Object(eh["d"])({name:t,value:r})}}Object(Va["a"])("pref_change",ih);Object(Va["a"])("team_pref_change",sh);var oh={PREFS_WITH_LEGACY_LOGIC:ah,TEAM_PREFS_WITH_LEGACY_LOGIC:nh,onPrefChangedEvent:ih,onTeamPrefChangedEvent:sh};var lh=r(230);var ch=r(309);var uh=r(1061);var dh="PRESENCE";function ph(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,r=e.type;var a=arguments[1];var n=arguments[2];var i=Object(Y["a"])({getState:n});if("away"!==t&&"active"!==t){i.error(dh,"An unknown presence was received in the '"+r+"' event: '"+t+"'");return}i.debug("["+dh+"] ","Received a ws manual_presence_change event. Will update current member's presence to "+t);a(Object(uh["a"])({presence:t}))}function vh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,r=e.type,a=e.users;var n=arguments[1];var o=arguments[2];var l=o();var c=Object(Y["a"])({getState:o});if("away"!==t&&"active"!==t){c.error(dh,"An unknown presence was received in the '"+r+"' event: '"+t+"'");return}if(Object(s["isEmpty"])(a)){c.error(dh,"The '"+r+"' event did not contain an array of users to update the presence for");return}c.debug("["+dh+"] ",'Received a ws presence_change event. Will update the following users to a status of "'+t+'": '+a.join(", "));var u=a.filter(function(e){return Object(T["m"])(l,e)&&Object(ch["getPresenceByMemberId"])(l,e)!==t}).map(function(e){return i()({},Object(T["i"])(l,e),{presence:t})});if(Object(s["isEmpty"])(u))return;Object(lh["i"])(n,u);u.forEach(function(e){Object(Cp["a"])(e)})}Object(Va["a"])("manual_presence_change",ph);Object(Va["a"])("presence_change",vh);var mh=r(789);var hh=r(318);var fh=r(360);function bh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.ts,a=e.file,n=e.comment;switch(t){case"message":return!!r;case"file":return"string"===typeof a;case"file_comment":return"string"===typeof a&&!!n;default:return false}}function gh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type,a=t.ts,n=t.channel,i=t.file,s=t.comment;switch(r){case"message":return Object(le["a"])(e,n,a)||Object($v["d"])(a,n)||void 0;case"file":return Object(Rn["getFileById"])(e,i)||void 0;case"file_comment":return Object(Rn["getFileCommentById"])(e,i,s)||void 0;default:return}}function _h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,r=e.reaction,a=e.user,n=e.url,i=e._from_evt_log,o=e.event_ts;var l=arguments[1];var c=arguments[2];var u=c();if(!Object(s["isObject"])(t)){Object(Y["a"])({state:u}).error("reaction_added has no item");return}if(!bh(t))return;var d=gh(u,t);if(!d)return;var p=t.channel,v=t.type,m=t.ts,h=t.file,f=t.comment;var b=m||f||h;var g=Object(fh["c"])(v,b,p);var _=Object(E["getCurrentUserId"])(u);var y=l(Object(hh["addReaction"])({key:g,name:r,userId:a,url:n}));if(_!==a&&_===d.user){var O=true;var k=!i&&"message"===v;Object(E["isFeatureEnabled"])(c(),"feature_classic_nav")&&Object(se["j"])(u)&&l(Object(kl["queueToast"])({key:g,emoji:r,userId:a,channelId:p}));Object(mh["a"])({adding:O,name:r,key:g,userId:a,eventTs:o,shouldAlert:k,channelId:p,url:n});y&&Object(E["isFeatureEnabled"])(u,"feature_sonic_activity")&&l(Zv({channelId:d.channel,messageTs:d.ts})).catch(s["noop"])}if(y){var j=i||a!==Object(E["getCurrentUserId"])(u);Object(mh["b"])({key:g,name:r,userId:a,type:v,shouldThrottle:j})}}function yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,r=e.reaction,a=e.user,n=e.url,i=e._from_evt_log,o=e.event_ts;var l=arguments[1];var c=arguments[2];var u=c();if(!Object(s["isObject"])(t)){Object(Y["a"])({state:u}).error("reaction_removed has no item");return}if(!bh(t))return;var d=gh(u,t);if(!d)return;var p=t.channel,v=t.type,m=t.ts,h=t.file,f=t.comment;var b=m||f||h;var g=Object(fh["c"])(v,b,p);var _=Object(E["getCurrentUserId"])(u);var y=l(Object(hh["removeReaction"])({key:g,name:r,userId:a,url:n}));if(_!==a&&_===d.user){var O=false;var k=!i&&"message"===v;Object(mh["a"])({adding:O,name:r,key:g,userId:a,eventTs:o,shouldAlert:k,channelId:p,url:n});if(y&&Object(E["isFeatureEnabled"])(u,"feature_sonic_activity")){l(Object(Jv["removeActivityByMessageTs"])({channelId:d.channel,messageTs:d.ts}));var j=Object(hh["getReactionsForKey"])(u,g);j&&j.length&&l(Zv({channelId:d.channel,messageTs:d.ts})).catch(s["noop"])}}if(y){var C=i||a!==_;Object(mh["b"])({key:g,name:r,userId:a,type:v,shouldThrottle:C})}}Object(Va["a"])("reaction_added",_h);Object(Va["a"])("reaction_removed",yh);var Oh=r(331);var kh=r(380);var Eh="RTM-SHARED-CHANNELS";function jh(e,t,r){var a=e.team;var n=Object(Y["a"])({getState:r,label:Eh});n.info("Received external_org_migration_started for "+a.id+".");t(Object(Oh["k"])({teamId:a.id,isMigrating:a.is_migrating}));t(Object(kh["b"])())}Object(Va["a"])("external_org_migration_started",jh);function Ch(e,t,r){var a=e.team;var n=Object(Y["a"])({getState:r,label:Eh});n.info("Received external_org_migration_finished for "+a.id+".");t(Object(Oh["i"])({teamId:a.id,externalOrgMigrated:true,isMigrating:false}));t(Object(kh["b"])())}Object(Va["a"])("external_org_migration_finished",Ch);var Sh={gridMigrationStarted:jh,gridMigrationFinished:Ch};var wh=r(759);var Ih=r(1553);var Th="RTM-STARS";var Ah={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment",CHANNEL:"channel",IM:"im",GROUP:"group"};var Nh=function e(t,r,a){if(!t)return;if(!t.item){Object(Y["a"])({getState:a}).info(Th,'imsg type "'+t.type+'" has no item');return}r(Object(wh["addStarredItem"])(t.item));if(t.item.type===Ah.MESSAGE){var n=r(Object(um["a"])({imsgs:[t.item.message],channelId:t.item.channel}));r(Object(so["a"])(n))}else if(t.item.type===Ah.FILE)r(Object(wm["a"])({files:[t.item.file]}));else if(t.item.type===Ah.CHANNEL||t.item.type===Ah.IM||t.item.type===Ah.GROUP){var s=Object(w["d"])(a(),t.item.channel);if(!s||Object(A["isUnknownOrNonExistent"])(s))return;Object(Ih["a"])(t.item.channel,true);r(Object(io["a"])({channel:i()({},s,{is_starred:true}),reason:S["a"].SET_STAR}))}Object(Y["a"])({getState:a}).info(Th,"star_added")};var Ph=function e(t,r,a){if(!t&&!t.item){Object(Y["a"])({getState:a}).info(Th,t.type+" has no item");return}r(Object(wh["removeStarredItem"])(t.item));if(t.item.type===Ah.MESSAGE){var n=r(Object(um["a"])({imsgs:[i()({},t.item.message,{is_starred:false})],channelId:t.item.channel}));r(Object(so["a"])(n))}else if(t.item.type===Ah.FILE){var s=Object(Ie["b"])(a());Object(Rn["markObjectsAsStale"])(s,[t.item.file.id])}else if(t.item.type===Ah.CHANNEL||t.item.type===Ah.IM||t.item.type===Ah.GROUP){var o=Object(w["d"])(a(),t.item.channel);if(!o||Object(A["isUnknownOrNonExistent"])(o))return;Object(Ih["a"])(t.item.channel,false);r(Object(io["a"])({channel:i()({},o,{is_starred:false}),reason:S["a"].SET_STAR}))}Object(Y["a"])({getState:a}).info(Th,"star_removed")};Object(Va["a"])("star_added",Nh);Object(Va["a"])("star_removed",Ph);var Rh={starAdded:Nh,starRemoved:Ph};var Mh=r(544);var xh=Object(Gn["b"])("TS.ui.shared_channels_open_beta_modal.maybeShowSharedChannelsCreateCoachmark",s["noop"]);var Dh=r(4390);var Fh=r(1475);var Lh=r(1476);var Bh=r(4028);var Uh=r(872);var qh={},Gh=qh.ensureCredentialsAreFreshInner;var Hh={},Wh=Hh.getLocalConfigByKeyInner;var Vh=Gh;var Kh=Wh;function zh(e,t,r){if(Object(h["a"])()){if(!Object(fe["a"])())return;Object(Uh["a"])(r);return}Object(Mh["h"])()}function Qh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var r=arguments[1];var a=arguments[2];var n=Object(Y["a"])({getState:a,label:"RTM"});if(Object(fe["a"])()){var o=Object(T["b"])(a());o&&o.enterprise_user&&o.enterprise_user.teams&&r(Object(wv["a"])({members:[i()({},o,{enterprise_user:i()({},o.enterprise_user,{teams:Object(s["union"])(o.enterprise_user.teams,[t])})})]}));n.info("User was added to team "+t+"; re-fetching auth");Object(Uh["b"])(r,a,t)}else if(!Object(h["a"])()){n.info("User was added to team "+t);Object(Cp["g"])(t)}}function Yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var r=arguments[1];var a=arguments[2];var n=Object(Y["a"])({getState:a,label:"RTM"});if(!Object(h["a"])()){n.info("User was removed from team "+t);Object(Cp["h"])(t);return}var o=Object(T["b"])(a());o&&o.enterprise_user&&o.enterprise_user.teams&&r(Object(wv["a"])({members:[i()({},o,{enterprise_user:i()({},o.enterprise_user,{teams:Object(s["without"])(o.enterprise_user.teams,t)})})]}));var l=Object(Ie["b"])(a());var c=Object.keys(Kh("teams")||{}).indexOf(t)>=0;var u=Object(fe["a"])()?c:t===l;if(u){n.info("User was removed from team "+t+"; re-fetching auth");Object(Uh["c"])(r,a,t)}else n.info("User was removed from team "+t+" but it is not relevant to us; ignoring")}function Jh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,r=e.name;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(ji["d"])(i);if(!s)return;var o=t||s.id;a(Object(Oh["f"])({teamId:o,name:r}));var l=n();var c=Object(ji["j"])(l,o);if(s.id===o){Object(Mh["f"])(c);Object(Ua["teamNameChanged"])(r)}else Object(Mh["c"])(c)}function Xh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,r=e.icon;var a=arguments[1];var n=arguments[2];var i=Object(ji["d"])(n());if(!i)return;var s=t||i.id;a(Object(Oh["j"])({teamId:s,icon:r}));var o=n();var l=Object(ji["d"])(o);if(l.id===s){Object(Mh["a"])(l);l.icon&&l.icon.image_68&&true!==l.icon.image_default?Object(Ua["setTeamIcon"])(l.icon,s):Object(Y["a"])({state:o}).warn("updateTeamIcon was called, but missing an image to set")}}function Zh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var r=arguments[1];r(Object(Fh["a"])({fields:t.fields}));Object(Mh["g"])()}function $h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var r=arguments[1];r(Object(Oh["g"])({fields:t.fields}));Object(Mh["g"])()}function ef(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var r=arguments[1];var a=t.fields;r(Object(Lh["a"])({fieldsToDelete:a}));Object(Mh["g"])()}function tf(e,t,r){var a=Object(ji["d"])(r());t(Object(kh["c"])({team:i()({},a,{email_domain:e.email_domain})}));var n=Object(ji["d"])(r());Object(Mh["e"])(n)}function rf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plan,r=e.can_add_ura,a=e.paid_features;var n=arguments[1];var s=arguments[2];var o=Object(ji["d"])(s());n(Object(Oh["d"])({shouldUpsertTeam:false,forceUpdate:true})).then(function(e){n(Object(kh["c"])({team:i()({},o,e,{plan:t,can_add_ura:r})}));a&&n(Object(nn["setPaidFeatures"])(a));Object(fe["a"])()?n(Object(Bh["a"])()):xh()})}function af(e,t,r){var a=Object(ji["d"])(r());t(Object(kh["c"])({team:i()({},a,{domain:e.domain})}));Object(Ua["teamDomainChanged"])(e.url);var n=Object(ji["d"])(r());Object(Mh["d"])(n)}function nf(e,t,r){var a=Object(ji["d"])(r());var n=Object(s["without"])(e.team_ids,a.id);t(Object(Dh["c"])({teamId:n}))}Object(Va["a"])("accounts_changed",zh);Object(Va["a"])("user_added_to_team",Qh);Object(Va["a"])("user_removed_from_team",Yh);Object(Va["a"])("team_plan_change",rf);Object(Va["a"])("team_rename",Jh);Object(Va["a"])("team_icon_change",Xh);Object(Va["a"])("team_profile_reorder",$h);Object(Va["a"])("team_profile_change",Zh);Object(Va["a"])("team_profile_delete",ef);Object(Va["a"])("email_domain_changed",tf);Object(Va["a"])("team_domain_change",af);Object(Va["a"])("team_connection_severed",nf);var sf={};Object.defineProperty(sf,"ensureCredentialsAreFresh",{get:function e(){return Vh},set:function e(t){Vh=t}});Object.defineProperty(sf,"getLocalConfigByKey",{get:function e(){return Kh},set:function e(t){Kh=t}});var of=r(1064);var lf=r(582);var cf=6e4;var uf={};var df={};function pf(e,t){return uf[e]&&uf[e][t]}function vf(e,t,r){uf[e]||(uf[e]={});uf[e][t]=r}function mf(e,t){return df[e]&&df[e][t]}function hf(e,t,r){df[e]||(df[e]={});df[e][t]=r}function ff(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cf;clearTimeout(pf(e,t));var r=setTimeout(function(){if(!Object(b["isConnected"])(Object(p["c"])(e))){ff(e,t);return}Object(p["a"])(e,Object(of["a"])()).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p["a"])(e,Object(lf["a"])(t))}).catch(function(t){Object(Y["a"])({teamId:e}).error("After delay, failed to fetch client counts for "+e+": "+t)})},Object(on["a"])(t,0,.2));vf(e,t,r)}function bf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cf;clearInterval(mf(e,t));var r=setInterval(function(){if(!Object(b["isConnected"])(Object(p["c"])(e)))return;Object(p["a"])(e,Object(of["a"])()).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p["a"])(e,Object(lf["a"])(t))}).catch(function(t){Object(Y["a"])({teamId:e}).error("On interval, failed to fetch client counts for "+e+": "+t)})},Object(on["a"])(t,0,.2));hf(e,t,r)}var gf=Object(we["b"])("Poll client unreads API after delay",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.delay;return Object(E["isFeatureEnabled"])(t(),"feature_vitess_sidebar")&&ff(Object(Ie["b"])(t()),a)});gf.propTypes={delay:Ve["b"].number};var _f=Object(we["b"])("Poll client unreads API on interval",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.interval;return Object(E["isFeatureEnabled"])(t(),"feature_desync_resync")&&bf(Object(Ie["b"])(t()),a)});_f.propTypes={interval:Ve["b"].number};var yf=Object(we["b"])("Clear client unreads API timeout",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.delay,n=void 0===a?cf:a;var i=Object(Ie["b"])(t());var s=pf(i,n);s&&clearTimeout(s)});yf.propTypes={delay:Ve["b"].number};var Of=Object(we["b"])("Clear client unreads API interval",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.interval,n=void 0===a?cf:a;var i=Object(Ie["b"])(t());var s=mf(i,n);s&&clearInterval(s)});Of.propTypes={interval:Ve["b"].number};var kf={DEFAULT_WAIT:cf,clientUnreadsTimeoutByTeam:uf,clientUnreadsIntervalByTeam:df};var Ef=r(145);var jf=r(756);var Cf=r(840);var Sf=Object(on["a"])(3e5,0,.2);var wf=r(1297);var If=r(516);var Tf={};function Af(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=Object(p["c"])(e);var a=Object(If["a"])(e).reduce(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.ts;(e[r]||(e[r]=[])).push(a);return e},{});if(t.length){var n=t.reduce(function(e,t){e[t]=true;return e},{});var i=Object(Rn["getFreshObjects"])(e).filter(function(e){return Object(Im["getFileShareLocations"])(Object(Rn["getFileById"])(r,e,false)).some(function(e){return n[e]})});Object(Rn["markObjectsAsStale"])(e,i);Object(yp["d"])(e,t);t.forEach(function(t){if(!a[t])return;Object(If["c"])(e,t,a[t]);Object(p["a"])(e,Object(ae["resetReachedEnd"])({channelId:t}))})}else{Object(Rn["markObjectsAsStale"])(e,Object(Rn["getFreshObjects"])(e));Object(yp["d"])(e,Object(yp["a"])(e));Object.keys(a).forEach(function(t){return Object(If["c"])(e,t,a[t])});Object(p["a"])(e,Object(ae["resetReachedEnd"])())}}function Nf(e){if(Object(fe["a"])())Object(p["a"])(e,Object(Xa["e"])());else if(Object(h["a"])()){Object(p["a"])(e,Object(jf["incrementMajorVersion"])());Object(p["a"])(e,Object(Xa["b"])())}else Object(wf["b"])()}function Pf(e,t,r,a){if(t)return;var n=[];if(r){n.push("channel_deleted","commands_changed","emoji_changed","file_deleted","team_domain_change","apps_uninstalled","subteam_deleted");Object(h["a"])()||n.push("team_rename","team_domain_change")}if(a){n.push("channel_rename","file_deleted","pin_added","pin_removed","channel_history_changed","group_history_changed","im_history_changed","mpim_history_changed","teams_left_shared_channel");Object(h["a"])()||n.push("channel_converted_to_shared")}if(!n.length)return;var i=Object(p["c"])(e);var o=Object(s["uniq"])(n).join(",");var l=Object(Ge["getLastKnownEventTimestamp"])(i);if(!l)return;var c=Object(p["d"])(e);if(!c||!c.getState)return;Object(kn["f"])(c.getState,{start:l,include:o})}function Rf(e){var t=Tf[e];Tf[e]=[];var r=Object(p["c"])(e);var a=Object(E["getCurrentUserId"])(r);var n=[];var i=[];var s=[];var o=[];var l=[];var c=t.length;for(var u=0;u<c;u++){var d=t[u];if(d===a){n.push(d);break}if(Object(G["a"])(d))i.push(d);else if(Object(Ef["b"])(d))o.push(d);else{if(!Object(Ef["a"])(d)){l.push(d);break}s.push(d)}}var v=!!(n.length||l.length);var m=!!(o.length||s.length);var h=!!i.length;v?Nf(e):m?Af(e):h&&Af(e,i);Pf(e,v,m,h);Object(p["a"])(e,Object(Xa["d"])(t));if(Object(Cf["a"])(Object(p["c"])(e)))return;Object(p["a"])(e,Of({interval:Sf}));Object(p["a"])(e,gf({delay:Sf}))}var Mf=function(){var e=Object(s["memoize"])(function(){return Object(s["throttle"])(Rf,Sf)});return function(t){return e(t)(t)}}();var xf=Object(we["b"])("Invalidate client caches for topics",function(e,t){var r;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var n=t();var i=Object(Ie["b"])(n);(r=Tf[i]||(Tf[i]=[])).push.apply(r,m()(a));Mf(i)});xf.propTypes=Ve["b"].arrayOf(Ve["b"].string).isRequired;var Df=Object(we["b"])("Cancel pending invalidation for topics",function(e,t){var r=t();var a=Object(Ie["b"])(r);Tf[a]=[]});Df.propTypes=null;var Ff={pendingIdsByTeam:Tf};Object.defineProperty(Ff,"invalidateSome",{get:function e(){return Af},set:function e(t){Af=t}});Object.defineProperty(Ff,"invalidateAll",{get:function e(){return Nf},set:function e(t){Nf=t}});Object.defineProperty(Ff,"invalidateTopics",{get:function e(){return Rf},set:function e(t){Rf=t}});Object.defineProperty(Ff,"invalidateTopicsThrottled",{get:function e(){return Mf},set:function e(t){Mf=t}});Object.defineProperty(Ff,"replayEvents",{get:function e(){return Pf},set:function e(t){Pf=t}});function Lf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel_ids,r=void 0===t?[]:t;var a=arguments[1];var n=arguments[2];var i=n();if(!Object(E["isFeatureEnabled"])(i,"feature_desync_resync"))return;var s=r.filter(function(e){return!Object(Cf["b"])(i,e)});if(!s.length)return;a(Object(Xa["c"])(s));a(_f({interval:Sf}))}function Bf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel_ids,r=void 0===t?[]:t;var a=arguments[1];var n=arguments[2];if(!Object(E["isFeatureEnabled"])(n(),"feature_desync_resync"))return;a(xf(r))}Object(Va["a"])("desync",Lf);Object(Va["a"])("resync",Bf);var Uf={desync:Lf,resync:Bf};var qf=r(231);var Gf=r(151);var Hf=r(291);var Wf=r(783);function Vf(e,t,r){var a=r();if(!e||!e.subteam||!e.subteam.id){Object(Y["a"])({getState:r}).warn("subteam_updated: No message event provided, or no subteam provided in the message event.");return}var n=e.subteam;var i=e.subteam.id;var s=Object(Gf["i"])(a,i)&&Object(Gf["e"])(a,i);if(!s){Object(Y["a"])({getState:r}).warn("subteam_updated: User group "+i+" not in model.");return}var o=Kf({knownUserGroup:s,newUserGroup:n});t(Object(qf["p"])({userGroups:[o]}));Object(E["isFeatureEnabled"])(r(),"feature_sonic_user_groups")||Object(Wf["b"])(i)}function Kf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.knownUserGroup,r=e.newUserGroup;if(t)return i()({},r,{users:t.users||[]});return r}function zf(e,t,r){if(Object(E["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam_id){Object(Y["a"])({getState:r}).warn("subteam_members_changed: No message event provided, or no subteam_id provided in the message event.");return}var a=e.subteam_id;var n=Object(Gf["i"])(r(),a)&&Object(Gf["e"])(r(),a);if(!n){Object(Y["a"])({getState:r}).warn("subteam_members_changed: Received event for an unknown user group: "+a);return}var i=n.users,o=void 0===i?[]:i;var l=e.added_users,c=void 0===l?[]:l,u=e.removed_users,d=void 0===u?[]:u;var p=o;c.length&&(p=Object(s["union"])(p,c));d.length&&(p=Object(s["difference"])(p,d));t(Object(qf["d"])({groupId:n.id,users:p}))}function Qf(e,t,r){if(!e||!e.subteam){Object(Y["a"])({getState:r}).warn("subteam_created: No message event provided, or no subteam provided in the message event.");return}t(Object(qf["p"])({userGroups:[e.subteam]}));Object(E["isFeatureEnabled"])(r(),"feature_sonic_user_groups")||Object(Wf["b"])(e.subteam.id)}function Yf(e,t,r){if(!e||!e.subteam||!e.subteam.id){Object(Y["a"])({getState:r}).warn("subteam_deleted: No message event provided, or no subteam provided in the message event.");return}var a=e.subteam.id;t(Object(qf["j"])(a));Object(E["isFeatureEnabled"])(r(),"feature_sonic_user_groups")||Object(Wf["b"])(a)}function Jf(e,t,r){if(!e||!e.subteam_id){Object(Y["a"])({getState:r}).warn("subteam_self_added: No message event provided, or no subteam id provided in the message event.");return}var a=Object(E["getCurrentUserId"])(r());var n={groupId:e.subteam_id,memberId:a};t(Object(qf["b"])(n));t(Object(Hf["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:true}))}function Xf(e,t,r){if(!e||!e.subteam_id){Object(Y["a"])({getState:r}).warn("subteam_self_removed: No message event provided, or no subteam id provided in the message event.");return}var a=Object(E["getCurrentUserId"])(r());if(!a)return;var n={groupId:e.subteam_id,memberId:a};t(Object(qf["k"])(n));t(Object(Hf["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:false}))}Object(Va["a"])("subteam_updated",Vf);Object(Va["a"])("subteam_members_changed",zf);Object(Va["a"])("subteam_created",Qf);Object(Va["a"])("subteam_deleted",Yf);Object(Va["a"])("subteam_self_added",Jf);Object(Va["a"])("subteam_self_removed",Xf);var Zf=r(1103);var $f=function e(t,r){if(!t)return;var a=t.event;"channel_joined"!==a&&"message_sent"!==a||r(Object(Zf["c"])())};Object(Va["a"])("welcome_place_task_completed",$f);var eb={welcomePlaceTaskCompleted:$f};var tb=r(2223);var rb=function e(t){var r=t.channel,a=t.app_id,n=t.action_id,i=t.action,s=t.app;var o=i?{appId:a,id:n.toString(),name:i.name,description:i.description,type:i.type,channelId:r,app:s}:void 0;return{action:o,channelId:r,appId:a,actionId:n.toString()}};var ab=function e(t,r,a){if(Object(E["isFeatureEnabled"])(a(),"feature_channel_actions_client")){var n=rb(t),i=n.channelId,s=n.action;r(Object(tb["e"])({channelId:i,actions:[s]}))}};var nb=function e(t,r,a){if(Object(E["isFeatureEnabled"])(a(),"feature_channel_actions_client")){var n=rb(t),i=n.channelId,s=n.action;r(Object(tb["e"])({channelId:i,actions:[s]}))}};var ib=function e(t,r,a){if(Object(E["isFeatureEnabled"])(a(),"feature_channel_actions_client")){var n=rb(t),i=n.channelId,s=n.actionId;r(Object(tb["c"])({channelId:i,actionIds:[s]}))}};var sb=function e(){Object(Va["a"])("channel_action_updated",ab);Object(Va["a"])("channel_action_added",nb);Object(Va["a"])("channel_action_removed",ib)};var ob=sb;ob();var lb=r(196);var cb=r(758);var ub=r(858);Object(P["d"])({actions:[j["e"]],sideEffect:function e(t,r,a){var n=a();Object(lb["t"])(n)&&r(Object(cb["a"])())}});Object(P["d"])({actions:[j["e"],j["c"]],sideEffect:function e(t,r){r(Object(ub["searchInProductEducationReset"])())}});var db=r(580);function pb(e,t,r){var a=r();var n=Object(Y["a"])({getState:r});if(!Object(ce["isFullyBooted"])(a))return false;var i=Object(U["g"])(a,"sidebar_theme");if("custom_theme"===i)return false;var s=null;try{s=JSON.parse(Object(U["g"])(a,"sidebar_theme_custom_values"))}catch(e){return false}var o=Object(db["e"])(i,null,{useGlobalNav:Object(K["b"])(a)});if(!s.column_bg||!o.column_bg)return false;if(s.column_bg.toUpperCase()!==o.column_bg.toUpperCase()){n.info("SIDEBAR-THEME","Sidebar theme values don't match expected values; fixing the pref");t(Object(H["d"])({pref:"sidebar_theme_custom_values",value:JSON.stringify(o)}));return true}return false}Object(P["d"])({actions:[ce["setFullyBooted"]],sideEffect:pb});function vb(e,t,r){var a=r();var n=hb(a);if(n&&Object(A["isUnavailable"])(a,n)){var i=Object(se["i"])(a);if("details"===i||"channel_info"===i)t(Object(qa["a"])());else if("thread"===i||"convo"===i){var s=Object(co["getCurrentThreadKey"])(a);var o=Object(co["decodeThreadKey"])(s),l=o.channelId;var c=Object(w["d"])(a,l);Object(A["isUnavailable"])(a,c)&&t(Object(qa["a"])())}}}function mb(e,t,r){if(Object(fe["a"])())return;var a=r();var n=hb(a);if(n&&Object(A["isUnavailable"])(a,n)){Object(uo["b"])();Object(N["a"])(n)}}function hb(e){var t=Object(C["a"])(e);return Object(w["d"])(e,t)}Object(P["d"])({actions:[kh["b"]],sideEffect:vb});Object(P["d"])({actions:[j["e"]],sideEffect:vb});Object(P["d"])({actions:[kh["b"]],sideEffect:mb});var fb={maybeCloseFlexpane:vb,legacyUpdateActiveChannel:mb};var bb=r(329);var gb=r(1042);var _b=Object(Gn["b"])("TS.highlights_briefing.handleFeedback",function(){return false});function yb(e,t){_b(e.payload);t(Object(gb["a"])(e.payload))}function Ob(e,t,r){if(!e.payload.prevChannelId||e.payload.channelId===e.payload.prevChannelId)return;var a=r();if(!Object(E["shouldUseReactMessages"])(a))return;var n=false;var i=Object(w["d"])(a,e.payload.prevChannelId,n);if(!i||!i.last_read)return;var s=Object(bb["getHighlightedTimestampsPriorToTimestamp"])(a,{channelId:e.payload.prevChannelId,beforeTs:i.last_read});if(!s.length)return;var l=o.a.reduce(s,function(e,t){e[t]={sliHighlight:{isHighlight:false}};return e},{});t(Object(bb["setHighlightsForMessages"])(dt()({},e.payload.prevChannelId,l)))}Object(P["d"])({actions:[bb["setFeedbackForHighlight"]],sideEffect:yb});Object(P["d"])({actions:[j["e"]],sideEffect:Ob});var kb=10;var Eb=9e5;var jb=void 0;var Cb={};var Sb={};var wb={};function Ib(){void 0===jb&&(jb=Object(He["a"])(kb));return jb}var Tb="asleep";var Ab="connecting";var Nb="connected";var Pb="wait_connectivity";var Rb="wait_rate_limit";function Mb(e){if(Object(b["isAsleep"])(e))return Tb;if(Object(b["isConnecting"])(e))return Ab;if(Object(b["isConnected"])(e))return Nb;if(Object(b["isWaitingForConnectivity"])(e))return Pb;if(Object(b["isWaitingForRateLimit"])(e))return Rb;return"disconnected"}function xb(e,t,r){if(!Ib())return;var a=r();var n=Object(Ie["b"])(a);var i=Mb(a);if(Sb[n]!==i){Sb[n]=i;Cb[n]=Cb[n]||[];Cb[n].push({status:i,ts:window.performance.now()})}}function Db(e,t,r){if(!Ib())return;var a=r();var n=Object(Qe["c"])({getState:r});var i=Object(Ie["b"])(a);if(wb[i])return;wb[i]=performance.now();var s=Object(on["a"])(Eb,.8,1.2);setInterval(function(){if(!Cb[i])return;var e={};Cb[i].forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.status,a=t.ts;var n=arguments[1];var s=Cb[i][n+1];var o=s?s.ts:performance.now();var l=o-a;e[r]=e[r]||0;e[r]+=l});Object.keys(e).forEach(function(t){var r=e[t];n.count("ws_tis_"+t,r)});var t=performance.now()-wb[i];var r=e[Tb]||0;n.count("ws_tis_duration",t);n.count("ws_tis_duration_awake",t-r);wb[i]=performance.now();Cb[i]=[{status:Sb[i],ts:window.performance.now()}]},s)}Object(P["b"])([{actions:[b["stateChanged"]],sideEffect:xb},{actions:[vi["start"]],sideEffect:Db}]);var Fb=r(4518);var Lb=new yr["b"]("sonic_deluxe_toast");var Bb={UNSEEN:0,SEEN:2,DARK:3};var Ub={"en-US":"https://slackhq.com/introducing-a-more-efficient-slack-desktop-experience","en-GB":"https://slackhq.com/intl-uk-introducing-a-more-efficient-slack-desktop-experience","ja-JP":"https://slackhq.com/intl-ja-jp-introducing-a-more-efficient-slack-desktop-experience","pt-BR":"https://slackhq.com/agora-o-slack-para-computadores-tem-uma-experiencia-mais-agil-e-mais-eficiente","es-LA":"https://slackhq.com/presentamos-una-experiencia-de-slack-para-computadora-mas-agil-y-mas-eficiente","es-ES":"https://slackhq.com/presentamos-una-experiencia-de-slack-para-ordenador-mas-eficiente-y-agil","de-DE":"https://slackhq.com/slack-fuer-den-desktop-jetzt-noch-schneller-und-effizienter","fr-FR":"https://slackhq.com/lexperience-slack-sur-ordinateur-est-maintenant-plus-rapide-mais-aussi-plus-efficace"};var qb={isExistingUser:Ve["b"].bool,hasSeenToast:Ve["b"].bool,setSeen:Ve["b"].func.isRequired,telemeter:Ve["b"].object.isRequired,dismissCurrentToast:Ve["b"].func.isRequired,featureSonicDeluxeToast:Ve["b"].bool.isRequired};var Gb={hasSeenToast:false,isExistingUser:false};var Hb=function(e){gr()(t,e);function t(e){pr()(this,t);var r=fr()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Ml["a"])(r,["onLinkClick","onCloseClick","replaceLink"]);return r}mr()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("sonic_deluxe_toast_click");this.props.dismissCurrentToast();this.props.setSeen()}},{key:"onCloseClick",value:function e(){this.props.telemeter.count("sonic_deluxe_toast_dismiss")}},{key:"replaceLink",value:function e(t){var r=t.text,a=t.tag;if("a"!==a)return null;var n=Object(Yo["a"])();var i=Ub[n];return Kt.a.createElement(kr["a"],{className:"p-sonic_deluxe_toast__link",href:i,onClick:this.onLinkClick},r)}},{key:"renderContent",value:function e(){if(!this.props.featureSonicDeluxeToast)return null;if(this.props.isExistingUser)return Lb.rt("<strong>Here\u2019s a nice thing.</strong> We\u2019ve made some improvements and Slack is now snappier and more efficient. <a>Learn more about this update</a>",null,this.replaceLink);return Lb.rt("<strong>Voil\xe0!</strong> Welcome to a snappier, more efficient Slack. <a>Learn more about this desktop update</a>",null,this.replaceLink)}},{key:"render",value:function e(){if(!this.props.featureSonicDeluxeToast)return null;if(this.props.hasSeenToast){this.props.setSeen();this.props.dismissCurrentToast();return null}this.props.telemeter.count("sonic_deluxe_toast_shown");var t=this.renderContent();var r=cdn_url+"/2fa86/img/sonic_deluxe_toast.png";var a=cdn_url+"/2fa86/img/sonic_deluxe_toast@2x.png";return Kt.a.createElement(Or["b"],{fadeDelay:3e5,closeButtonClasses:"p-sonic_deluxe_toast__close",toastClasses:"p-sonic_deluxe_toast",onCloseComplete:this.props.setSeen,onCloseClick:this.onCloseClick,ariaAssertive:true},Kt.a.createElement("div",null,Kt.a.createElement("img",{alt:"",src:r,srcSet:a+" 2x",className:"p-sonic_deluxe_toast__img"}),Kt.a.createElement("div",{className:"p-sonic_deluxe_toast__text"},t)))}}]);return t}(Vt["Component"]);Hb.displayName="SonicDeluxeToast";Hb.defaultProps=Gb;var Wb=Object(_r["connect"])(function(e){return{telemeter:Object(Qe["c"])({state:e}),featureSonicDeluxeToast:Object(E["isFeatureEnabled"])(e,"feature_sonic_deluxe_toast"),hasSeenToast:Object(U["g"])(e,"seen_sonic_deluxe_toast")===Bb.SEEN}},{dismissCurrentToast:function e(){return zt["dismissCurrentToast"].apply(void 0,arguments)}})(Hb);var Vb=r(1453);function Kb(e,t,r){var a=Object(Qe["c"])({getState:t});a.count("sonic_deluxe_toast_setSeen_"+r);try{var n=+window.localStorage.getItem("seen_sonic_deluxe_toast");n!==r&&window.localStorage.setItem("seen_sonic_deluxe_toast",r)}catch(e){Object(Y["a"])({getState:t}).error("Unable to access localStorage for sonic_deluxe_toast")}Object(U["g"])(t(),"seen_sonic_deluxe_toast")!==r&&e(Object(H["d"])({pref:"seen_sonic_deluxe_toast",value:r}))}function zb(e,t){var r=false;var a=false;try{var n=+window.localStorage.getItem("seen_sonic_deluxe_toast");n===Bb.SEEN?a=true:n===Bb.DARK&&(r=true)}catch(e){Object(Y["a"])({getState:t}).error("Unable to access localStorage for sonic_deluxe_toast")}var i=Object(U["g"])(t(),"seen_sonic_deluxe_toast");i===Bb.SEEN?a=true:i===Bb.DARK&&(r=true);if(a){Kb(e,t,Bb.SEEN);return Bb.SEEN}if(r){Kb(e,t,Bb.DARK);return Bb.DARK}return Bb.UNSEEN}function Qb(e,t,r){var a=r();if(!Object(fe["a"])())return;if(!Object(se["j"])(a))return;if(Object(Vb["h"])(a)&&zb(t,r)!==Bb.SEEN){Kb(t,r,Bb.SEEN);return}if(Object(E["isFeatureEnabled"])(a,"feature_sonic_deluxe_toast_dark")&&!Object(E["isFeatureEnabled"])(a,"feature_sonic_deluxe_toast")&&!Object(E["isFeatureEnabled"])(a,"feature_sonic_deluxe_toast_existing")){Kb(t,r,Bb.DARK);return}if(Object(E["isFeatureEnabled"])(a,"feature_sonic_deluxe_toast_existing")&&zb(t,r)===Bb.DARK){Object(Qe["c"])({state:a}).count("sonic_deluxe_toast_shown_existing");t(Object(zt["enqueueToast"])({element:Kt.a.createElement(Wb,{isExistingUser:true,setSeen:function e(){return Kb(t,r,Bb.SEEN)}})}));return}Object(E["isFeatureEnabled"])(a,"feature_sonic_deluxe_toast")&&zb(t,r)===Bb.UNSEEN&&t(Object(zt["enqueueToast"])({element:Kt.a.createElement(Wb,{isExistingUser:false,setSeen:function e(){return Kb(t,r,Bb.SEEN)}})}))}Object(P["d"])({actions:[ne["innerUpdateFocus"],ne["setWindow"],oe["f"]],sideEffect:Qb});function Yb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(!Object(E["isFeatureEnabled"])(a(),"feature_desync_resync"))return;if(!Object(Cf["a"])(a()))return;r(Object(Xa["a"])());r(Of({interval:Sf}));r(Df());t&&r(gf())}Object(P["b"])([{actions:[b["connected"]],sideEffect:Yb}]);var Jb={connectedSideEffect:Yb};function Xb(e,t){if(!Object(h["a"])())return;if(Object(fe["a"])())return;t(Object(vi["finalizeProvisionalConnection"])())}Object(P["d"])({actions:[b["provisionallyConnected"]],sideEffect:Xb});var Zb=function e(t,r,a){var n=a();var i=Object(Y["a"])({state:n,label:"THREADS"});if(!Object(E["isFeatureEnabled"])(n,"feature_react_threads"))return;var o=Object(se["i"])(n);if("thread"!==o&&"convo"!==o)return;var l=Object(se["e"])(n)[0];var c=Object(co["decodeThreadKey"])(l),u=c.channelId,d=c.threadTs;var p=t.type===f["a"].getType()&&Object(s["some"])(t.payload.channels,function(e){return e.id===u&&Object(A["isPrivateChannel"])(e)});var v=t.type===ae["removeTimestamp"].getType()&&t.payload.channelId===u&&t.payload.timestamp===d;switch(true){case p:i.action("Closing flexpane: user left private channel");break;case v:i.action("Closing flexpane: last message in thread deleted");break;default:break}(p||v)&&r(Object(qa["a"])())};var $b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload;var a=arguments[1];var n=arguments[2];if(r)return;var i=n();if(!Object(E["isFeatureEnabled"])(i,"feature_react_all_threads"))return;if(!Object(E["isClientApp"])(i))return;var s=Object(C["a"])(i);var o=Object(se["j"])(i)||!Object(se["f"])(i);if(s!==Kv["a"].allThreads||!o)return;Object(Y["a"])({state:i,label:"THREADS"}).info("Refreshing threads view on reconnect");a(Object(Wv["incrementAllThreadsRefreshCounter"])())};Object(P["d"])({actions:[f["a"]],sideEffect:Zb,reasons:[S["a"].LEAVE_CHANNEL]});Object(P["d"])({actions:[ae["removeTimestamp"]],sideEffect:Zb});Object(P["d"])({actions:[b["connected"]],sideEffect:$b});var eg={};function tg(e,t,r){var a=r();var n=Object(Ie["b"])(a);if(eg[n])return;eg[n]=setInterval(function(){t(Object(Av["checkTypingMap"])())},1e3)}function rg(e,t,r){var a=r();var n=Object(Ie["b"])(a);if(!eg[n])return;clearInterval(eg[n]);delete eg[n]}Object(P["d"])({actions:[Av["updateTyping"]],sideEffect:tg});Object(P["d"])({actions:[Av["clearTypingCleanupInterval"]],sideEffect:rg});var ag=r(409);var ng=r(1472);var ig="UNREAD-COUNTS";var sg={};var og=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.teamId,a=t.counts,n=void 0===a?{}:a;var i=n.channels,s=void 0===i?[]:i,o=n.groups,l=void 0===o?[]:o,c=n.ims,u=void 0===c?[]:c,d=n.mpims,p=void 0===d?[]:d;sg[r]=[].concat(m()(s),m()(l),m()(u),m()(p)).filter(function(e){return e.has_unreads||e.unread_count_display>0}).map(function(e){return e.id})};var lg=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.teamId,a=t.channelId;var n=sg[r];return o.a.includes(n,a)};var cg={};function ug(e){cg[e]||dg(e);return cg[e]}function dg(e){cg[e]={}}var pg={};function vg(e){pg[e]||(pg[e]={});return pg[e]}function mg(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"unread-counts/fetchHistoryForCounting";var i=r();var s=Object(Ie["b"])(i);var l=ug(s);var c=Object(Y["a"])({state:i});if(l[e.id]){c.warn("Ignoring new unread counting history request for "+e.id);return}var u=vg(s);var d=u[e.id];if(d){if(!a||!o.a.isNumber(d)){c.info(ig,"Dropping unread history request for "+e.id+" since there is already one pending");return}c.info(ig,"Cancelling timer and making history request for "+e.id+" now");clearTimeout(u[e.id])}var p=a?0:o.a.random(2500,1e4);c.info(ig,"Fetching history for unread counting: "+e.id+", waiting "+p+" ms");u[e.id]=setTimeout(function(){var r=!a&&t(Object(lf["b"])({channelId:e.id}));if(r){delete u[e.id];return}c.info("HISTORY-FETCH","Fetching history for unread counting: "+e.id);u[e.id]=t(Object(an["b"])({channelId:e.id,type:Object(A["getChannelType"])(e),oldest:null,latest:null,reason:n})).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.msgs,n=r.hasMore,i=r.pinCount,s=r.deleted;l[e.id]=true;var c=o.a.map(a,"ts");t(Object(ag["a"])({msgs:a,channelId:e.id,latest:o.a.max(c),oldest:o.a.min(c),hasMore:{hasMoreStart:n,hasMoreEnd:false},forceUnreadCount:true,deleted:s}));o.a.isNumber(i)&&t(Object(Fm["updatePinCount"])({channelId:e.id,count:i}))}).finally(function(){delete u[e.id]})},p)}var hg={};function fg(e){hg[e]||(hg[e]={});return hg[e]}function bg(e,t,r){var a=e.id;var n=Object(Y["a"])({getState:r});var i=fg(Object(Ie["b"])(r()));if(i[a]){n.info(ig,"Ignoring redundant initial count sync request for "+e.id);return}i[a]=true;var s=o.a.random(2500,1e4);n.info(ig,"Syncing initial counts for "+e.id+" in "+s+" ms");setTimeout(function(){t(Object(Q["h"])({channelId:a})).then(function(r){var n=r.has_unreads?1:0;var i=o.a.isNumber(r.mention_count)?r.mention_count:0;var s=Object(A["isIm"])(e)||Object(A["isMpim"])(e)?i:n;t(Object(ue["setInitialUnreadCountsForChannel"])({id:a,unreadCnt:s,unreadHighlightCnt:i}))}).finally(function(){delete i[a]})},s)}function gg(e,t,r){var a=r();if(!Object(E["isFeatureEnabled"])(a,"feature_degraded_send")||!Object(E["shouldUseReactMessages"])(a)||!Object(E["isClientApp"])(a))return;if(Object(b["wasPreviouslyConnected"])(a))return;_g(e,t,r)}function _g(e,t,r){var a=r();if(!Object(E["shouldUseReactMessages"])(a)||!Object(E["isClientApp"])(a))return;var n=Object(b["wasLastConnectFast"])(a);if(n)return;var i=Object(Ie["b"])(a);dg(i);t(Object(ue["setInitialUnreadCounts"])({}));var s=Object(E["isFeatureEnabled"])(a,"feature_vitess_sidebar")?of["a"]:ng["a"];Object(Y["a"])({getState:r}).info(ig,"Fetching counts");t(s()).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};og({teamId:i,counts:e});return t(Object(lf["a"])(e))}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(E["isFeatureEnabled"])(a,"feature_degraded_send")){var r=o.a.compact(o.a.concat(e.channels,e.groups));t(Object(re["reconcileChannelAccess"])({channels:r}))}}).finally(function(){return t(gf())})}function yg(e,t,r){var a=r();var n=Object(Y["a"])({state:a});var i=Object(Ie["b"])(a);if(!Object(E["shouldUseReactMessages"])(a))return;var s=e.payload,l=s.channelId,c=s.timestamps,u=s.forceUnreadCount,d=s.append,p=s.fromEvtLog;if(o.a.isEmpty(c))return;if(p)return;var v=false;var m=Object(w["d"])(a,l,v);if(!m)return;var h=Object(A["getLastReadTs"])(m);if(o.a.isUndefined(h)){n.warn(ig,"Undefined last_read for "+l);h="0000000000.000000"}var f=Object(A["isRead"])(m);var b=o.a.some(c,function(e){return e>=h});if(!b&&!u)return;var g=l===Object(C["a"])(a);g&&n.info(ig,"Counting unreads in "+l+" because ("+c.length+") timestamps added");var _=t(Object(lf["b"])({channelId:l}));if(!_){var y=false;var O="unread-counts/onAddTimestamps";kg(r,m,c)&&mg(m,t,r,y,O)}if(c&&c.length>1&&f){var k=Object(w["d"])(r(),l);if(Object(A["isUnread"])(k)){var j=Og(r,k)?"unexpected_unread_joins_after_loading_history":"unexpected_unread_after_loading_history";n.error({id:l,initial:Object(ue["getInitialUnreadCountsByChannelId"])(r(),l)},j);n.info(ig,l+" initially marked unread in the users.counts || client.counts response: "+lg({teamId:i,channelId:l}))}}if(Object(E["isFeatureEnabled"])(a,"feature_degraded_send")){var S=e.payload,I=S.hasMore,T=S.oldest;var N=o.a.get(I,"hasMoreEnd",!T||I);if(c&&b&&!N){var P=!f;g&&n.info(ig,"Checking unreads in "+l+" after a new message");be(l,t,r,P)}}else if(c&&1===c.length&&c[0]>h){var R=!d;g&&n.info(ig,"Checking unreads in "+l+" after a new message");be(l,t,r,R)}}function Og(e,t){var r=Object(E["getCurrentUserId"])(e());var a=Object(ae["getTimestampsByChannelId"])(e(),t.id);if(!a||o.a.isEmpty(a.timestamps))return false;var n=a.timestamps.map(function(r){return Object(le["a"])(e(),t.id,r)});var i=Object(A["getLastReadTs"])(t);var s=n.filter(function(e){return Object(Uv["isMessageUnread"])(e,i,r)});if(o.a.isEmpty(s))return false;return o.a.every(s,function(e){return Object(Uv["isJoinLeave"])(e)})}function kg(e,t,r){if(Object(A["isIm"])(t)||Object(A["isMpim"])(t))return true;var a=e();var n=o.a.map(r||[],function(e){return Object(le["a"])(a,t.id,e)});return o.a.some(n,function(e){if(!e)return false;return Object(Uv["containsMention"])(e,Object(E["getCurrentUserId"])(a),Object(Yv["a"])(a),Object(Ie["b"])(a),{ignoreAtHereMentions:true,ignoreAtEveryoneMentions:true,ignoreAtChannelMentions:true})})}function Eg(e,t,r){var a=r();var n=Object(Y["a"])({state:a});if(!Object(E["shouldUseReactMessages"])(a))return;var i=e.payload,s=i.channelId,o=i.timestamp,l=i.forceUnreadCount,c=i.fromEvtLog;if(c)return;if(!o)return;var u=false;var d=Object(w["d"])(a,s,u);if(!d)return;var p=Object(A["getLastReadTs"])(d);if(o<p&&!l)return;n.info(ig,"Counting unreads in "+s+" because message removed");var v=t(Object(lf["b"])({channelId:s}));v||jg({dispatch:t,getState:r,channel:d,timestamp:o})&&bg(d,t,r)}function jg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getState,r=e.channel,a=e.timestamp;var n=Object(ae["getTimestampsByChannelId"])(t(),r.id,null),i=n.timestamps,s=n.start;var o=Object(A["getLatestTs"])(r,i);var l=s||o+1e-6;return a<l}function Cg(e,t,r){if(!e.payload.last_read)return;var a=r();var n=Object(Y["a"])({state:a});if(!Object(E["shouldUseReactMessages"])(a))return;var i=e.payload.id;var s=false;var o=Object(w["d"])(a,i,s);if(!o)return;if(Object(A["isFromAnotherTeam"])(o))return;n.info(ig,"Counting unreads in "+i+" because last_read changed to "+e.payload.last_read);var l=t(Object(lf["b"])({channelId:i}));if(!l){var c=true;var u="unread-counts/onLastReadUpdated";mg(o,t,r,c,u)}}function Sg(e,t,r){var a=r();var n=Object(Y["a"])({state:a});if(!Object(E["shouldUseReactMessages"])(a))return;var i=e.payload,s=i.id,o=i.unreadCnt,l=i.unreadHighlightCnt;var c=false;var u=Object(w["d"])(a,s,c);if(!u)return;n.info(ig,"Counting unreads in "+s+" because initial counts updated to {"+o+", "+l+"}");t(Object(lf["b"])({channelId:s}))}function wg(e,t,r){var a=r();if(!Object(E["isFeatureEnabled"])(a,"feature_incremental_unread_counts"))return;var n=o.a.keys(Object($m["getMutedChannels"])(a));if(!n||!n.length)return;t(Object(ue["maybeStopCountingChannels"])({channelIds:n}))}function Ig(e,t,r){var a=r();if(!Object(E["isFeatureEnabled"])(a,"feature_incremental_unread_counts"))return;var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;t(Object(ue["maybeStopCountingChannels"])({channelIds:o.a.map(n,"id")}))}Object(P["d"])({actions:[b["troubleConnecting"]],sideEffect:gg});Object(P["d"])({actions:[b["connected"]],sideEffect:_g});Object(P["d"])({actions:[ae["addTimestamps"]],sideEffect:yg});Object(P["d"])({actions:[ae["removeTimestamp"]],sideEffect:Eg});Object(P["d"])({actions:[f["c"]],sideEffect:Cg});Object(P["d"])({actions:[ue["setInitialUnreadCountsForChannel"]],sideEffect:Sg});Object(P["d"])({actions:[$m["setMutedChannel"],$m["setMutedChannels"]],sideEffect:wg});Object(P["d"])({actions:[f["a"]],sideEffect:Ig,reasons:[S["a"].ARCHIVE_CHANNEL,S["a"].LEAVE_CHANNEL]});var Tg={shouldFetchHistoryAfterTimestampsAdded:kg,shouldFetchHistoryAfterTimestampRemoved:jg,syncInitialCounts:bg};function Ag(e,t,r){var a=r();var n=Object(Ie["b"])(a);var i=Object(Bv["a"])(n);i.onDisconnect()}function Ng(e,t,r){var a=e&&e.payload&&e.payload.reason;if(a!==S["a"].LEAVE_CHANNEL)return;var n=r();var i=Object(Ie["b"])(n);var s=Object(Bv["a"])(i);s.onChannelLeave()}Object(P["d"])({actions:[b["disconnected"]],sideEffect:Ag});Object(P["d"])({actions:[f["a"]],sideEffect:Ng});var Pg="USER_GROUP_MEMBERSHIP";var Rg=Object(Xi["a"])("Fetch user groups by id",function(e,t){return e(Object(ze["a"])({method:"subteams.membership",reason:"user-group-membership-api/fetchUserGroupMembership"})).then(function(e){return e.subteams}).catch(function(e){if(e.data&&"user_is_restricted"===e.data.error){Object(Y["a"])({getState:t}).warn(Pg,"subteams.membership failed with user_is_restricted: Guests are not allowed to have user groups");return[]}Object(Y["a"])({getState:t}).error(Pg,"failed to fetch user group membership");throw e})});Rg.propTypes=null;function Mg(e,t,r){var a=r();var n=Object(Y["a"])({state:a});if(!Object(E["isClientApp"])(a))return Promise.resolve();var i=Object(b["wasLastConnectFast"])(a);if(i)return Promise.resolve();if(!Object(fe["a"])())return Promise.resolve();if(Object(b["isFirstConnection"])(a))return Promise.resolve();t(Object(Hf["clearAllUserGroupMembership"])());return t(Rg()).then(function(e){if(!e)return;t(Object(Hf["bulkAddUserGroupMembership"])({userGroups:e,isMember:true}));n.info(Pg,"Completed subteams.membership processing")})}Object(P["d"])({actions:[b["connected"],Xa["b"]],sideEffect:Mg});var xg={updateUserGroups:Mg};var Dg=r(4402);function Fg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;if(!Object(fe["a"])())try{document.body.classList.toggle("p-team_creator_onboarding--in_progress",!!t)}catch(e){}}Object(P["d"])({actions:[Dg["a"]],sideEffect:Fg});var Lg=r(864);var Bg={},Ug=Bg.internalWorkspacesRemovedType;function qg(e,t,r){Object(Y["a"])({getState:r}).info("WINDOW-UNLOADING","workspace handling window unloading event")}Object(P["d"])({actions:[ne["setUnloading"]],sideEffect:qg});Object(P["d"])({actions:[ne["setUnloading"]],sideEffect:function e(t,r,a){return Object(Lg["a"])(Object(Ie["b"])(a()))}});Ug&&Object(P["d"])({actions:[Ug],sideEffect:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload;return r.forEach(function(e){return Object(Lg["a"])(e)})}});var Gg=108e5;var Hg={};var Wg=null;function Vg(e,t,r){var a=r();if(!Object(Vb["h"])(a))return;var n=setInterval(function(){window.requestIdleCallback?window.requestIdleCallback(function(){t(Object(Zf["c"])())},{timeout:6e4}):t(Object(Zf["c"])())},Gg);if(Object(fe["a"])()){var i=Object(Ie["b"])(a);clearInterval(Hg[i]);Hg[i]=n}else{clearInterval(Wg);Wg=n}}function Kg(e,t,r){if(Object(fe["a"])()){var a=Object(Ie["b"])(r());clearInterval(Hg[a])}else clearInterval(Wg)}Object(P["d"])({actions:[b["connected"]],sideEffect:Vg});Object(P["d"])({actions:[b["disconnected"]],sideEffect:Kg});var zg={},Qg=zg.hasServiceWorkerUpdatedThisSession;var Yg={},Jg=Yg.getFocusedWorkspace;var Xg=void 0;var Zg="OPPORTUNISTIC_RELOADS";var $g="opportunistic_reload_prevented_reason";var e_=12e5;var t_=Object(s["memoize"])(function(){var e=Object(Y["b"])({label:Zg});var t=Object(p["b"])();var r=t&&t.getState&&t.getState();if(!r)return false;var a=Jg(r);var n=Object(p["c"])(a);if(!n)return false;var i=Object(E["isFeatureEnabled"])(n,"feature_opportunistic_reloads");e.info("Opportunistic Reloads is "+(i?"enabled":"disabled")+" for this session");return i});function r_(){if(Xg)return;Xg=setTimeout(n_,e_)}function a_(){if(!Xg)return;clearTimeout(Xg);Xg=null}function n_(){Xg=null;var e=Object(Y["b"])({label:Zg});var t=Object(Qe["a"])();e.info("User has been blurred for "+e_+" ms, evaluating whether or not we should reload opportunistically");if("hidden"!==document.visibilityState){e.info("Client is still visible to the user even though it is not focused, will avoid updating");t.count($g+"_document_is_visible");r_();return}if(!Qg()){e.info("There have been no service worker updates, will not reload");t.count($g+"_no_service_worker_updates");r_();return}var r=Object(p["b"])();var a=r&&r.getState&&r.getState();if(!Object(qt["d"])(a)){e.info("client does not appear to be online, will not reload");t.count($g+"_not_online");r_();return}var n=Jg(a);var i=Object(p["c"])(n);if(!Object(de["b"])(i)){e.info("Client is in a state where we cannot switch workspaces, will not reload in order to preserve ephemeral state");t.count($g+"_cannot_switch_workspaces");r_();return}Object(Mt["b"])({reason:"Opportunistic reload: User has been blurred for "+e_+" ms and we have a service worker update.",reasonKey:"opportunistic_reload"})}Object(P["a"])({actions:[ne["innerUpdateFocus"]],sideEffect:function e(t,r,a){if(!Object(fe["a"])())return;if(!t_())return;var n=a();var i=Object(ne["isWindowFocused"])(n);i?a_():r_()}});var i_={maybeOpportunisticReload:n_,telemeterPrefix:$g,getOpportunisticReloadTimeout:function e(){return Xg}};Object.defineProperty(i_,"isOpportunisticReloadingEnabled",{get:function e(){return t_},set:function e(t){t_=t}});var s_=r(683);var o_=r(533);var l_=r(787);var c_=r(1298);var u_=r(184);var d_=r(36);var p_;var v_={serviceOnline:true,lastSocketActivity:0,clientOnline:true,lastClientConnection:Date.now()};var m_=Object(d_["b"])((p_={},dt()(p_,Ut["b"],function(e,t){return i()({},e,{serviceOnline:!!t})}),dt()(p_,Ut["c"],function(e){return i()({},e,{lastSocketActivity:Date.now()})}),dt()(p_,Ut["a"],function(e,t){return i()({},e,{clientOnline:!!t,lastClientConnection:Date.now()})}),p_),v_,{persistenceEnabled:false});m_.propTypes={serviceOnline:Ve["b"].bool.isRequired,lastSocketActivity:Ve["b"].number.isRequired,clientOnline:Ve["b"].bool.isRequired,lastClientConnection:Ve["b"].number.isRequired};var h_=m_;var f_=r(1195);var b_=r(911);var g_=r(684);var __=r(455);var y_=r(236);var O_=r(760);var k_=r(1080);var E_=r(177);var j_=r(4408);var C_=r(1169);var S_=r(1512);var w_=r(1256);var I_=r(1254);var T_=r(576);var A_;var N_={channelId:null,startTs:null,highlightTs:null,highlightLazy:null,highlightsBackButtonVisible:false,userSetUnreadPoint:false,unreadLineVisible:false,ghostLastRead:null,scrollmarks:{},overlayVisible:false,prevChannelId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,hasMessagePaneUnmounted:false,isAppSpaceOpen:false,focusRequestedTs:void 0};var P_=Object(d_["b"])((A_={},dt()(A_,j["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.startTs,n=t.startTsOffset,s=t.highlightTs,o=t.ghostLastRead,l=t.prevChannelId;return i()({},e,{channelId:r,startTs:a||null,startTsOffset:n,highlightTs:s||null,highlightsBackButtonVisible:false,userSetUnreadPoint:false,unreadLineVisible:false,ghostLastRead:o,prevChannelId:l,prevChannelSwitchTs:String(Date.now()/1e3)})}),dt()(A_,j["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.offset,n=t.highlight,s=t.highlightLazy;var l=n?r:o.a.uniqueId();return i()({},e,{startTs:r,startTsOffset:a,highlightTs:l,highlightLazy:s})}),dt()(A_,j["a"],function(e){return i()({},e,{highlightTs:null,highlightLazy:null})}),dt()(A_,j["o"],function(e){return i()({},e,{userSetUnreadPoint:true,ghostLastRead:null})}),dt()(A_,j["b"],function(e,t){if(t!==e.channelId)return e;if(!e.userSetUnreadPoint)return e;return i()({},e,{userSetUnreadPoint:false})}),dt()(A_,j["i"],function(e,t){return i()({},e,{ghostLastRead:t})}),dt()(A_,j["j"],function(e,t){return i()({},e,{highlightsBackButtonVisible:t})}),dt()(A_,j["n"],function(e,t){if(t===e.unreadLineVisible)return e;return i()({},e,{unreadLineVisible:t})}),dt()(A_,j["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.scrollmark;return i()({},e,{scrollmarks:i()({},e.scrollmarks,dt()({},r,a))})}),dt()(A_,j["m"],function(e,t){if(e.overlayVisible===t)return e;return i()({},e,{overlayVisible:t})}),dt()(A_,j["f"],function(e,t){return i()({},e,{channelSessionId:t})}),dt()(A_,j["l"],function(e,t){return i()({},e,{newxpOnboardingStep:t})}),dt()(A_,j["k"],function(e,t){return i()({},e,{hasMessagePaneUnmounted:t})}),dt()(A_,j["g"],function(e,t){return i()({},e,{isAppSpaceOpen:t})}),dt()(A_,j["h"],function(e,t){return i()({},e,{focusRequestedTs:t})}),A_),N_,{persistenceEnabled:true});P_.propTypes={channelId:Ve["b"].string,startTs:Ve["b"].string,highlightTs:Ve["b"].string,highlightLazy:Ve["b"].bool,highlightsBackButtonVisible:Ve["b"].bool,userSetUnreadPoint:Ve["b"].bool,unreadLineVisible:Ve["b"].bool,ghostLastRead:Ve["b"].string,scrollmarks:Ve["b"].objectOf(Ve["b"].object),overlayVisible:Ve["b"].bool,prevChannelId:Ve["b"].string,prevChannelSwitchTs:Ve["b"].string,newxpOnboardingStep:Ve["b"].string,hasMessagePaneUnmounted:Ve["b"].bool,isAppSpaceOpen:Ve["b"].bool};var R_=P_;var M_=r(530);var x_;var D_={inJoinerOnboarding:false,inCreatorOnboarding:false,onboardingChannelId:"",welcomeModel:{},tractorMessageCoachmarkVisible:false,tractorFilesCoachmarkVisible:false,joinerLandingPlaceCoachmarkVisible:false};var F_=Object(d_["b"])((x_={},dt()(x_,Dg["a"],function(e,t){return i()({},e,{inCreatorOnboarding:t})}),dt()(x_,Dg["b"],function(e,t){return i()({},e,{inJoinerOnboarding:t})}),dt()(x_,Dg["e"],function(e,t){return i()({},e,{onboardingChannelId:t})}),dt()(x_,Dg["d"],function(e){return i()({},e,{inJoinerOnboarding:false,inCreatorOnboarding:false})}),dt()(x_,Dg["h"],function(e,t){return i()({},e,{welcomeModel:t||{}})}),dt()(x_,Dg["g"],function(e,t){return i()({},e,{tractorMessageCoachmarkVisible:t})}),dt()(x_,Dg["f"],function(e,t){return i()({},e,{tractorFilesCoachmarkVisible:t})}),dt()(x_,Dg["c"],function(e,t){return i()({},e,{joinerLandingPlaceCoachmarkVisible:t})}),x_),D_,{persistenceEnabled:false});F_.propTypes={inJoinerOnboarding:Ve["b"].bool,inCreatorOnboarding:Ve["b"].bool,onboardingChannelId:Ve["b"].string,welcomeModel:Ve["b"].object,tractorMessageCoachmarkVisible:Ve["b"].bool,tractorFilesCoachmarkVisible:Ve["b"].bool,joinerLandingPlaceCoachmarkVisible:Ve["b"].bool};var L_=F_;var B_=r(4278);var U_=r(564);var q_=r(917);var G_=r(1081);var H_=r(1222);var W_=Object(Pu["b"])("Set a channel pref");W_.propTypes={pref:Ve["b"].string.isRequired,value:Ve["b"].any.isRequired};var V_=r(806);var K_=r(1184);var z_=r(518);var Q_;var Y_="notifications";var J_={showOpenTransition:true,lastActiveSection:Y_};var X_={user:{},team:{},channel:{},enterprise:{},userColors:{},notifications:{},uiState:J_};var Z_="all_notifications_prefs";var $_="user_colors";var ey="frecency_jumper";var ty="frecency_ent_jumper";var ry="emoji_use";function ay(e){var t;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.pref,n=r.value;var s=arguments[2];if(!a||!s)return e;if(e[s]&&e[s][a]===n)return e;var o=e.notifications;"user"===s&&a===Z_&&(o=Object(z_["a"])(n));var l=e.userColors;"user"===s&&a===$_&&(l=Object(z_["a"])(n));var c=e.user&&e.user.frecency_jumper;"user"===s&&a===ey&&(c=Object(z_["a"])(n));var u=e.user&&e.user.frecency_ent_jumper;"user"===s&&a===ty&&(u=Object(z_["a"])(n));var d=e.user&&e.user[ry];"user"===s&&a===ry&&(d=Object(z_["a"])(n));return i()({},e,dt()({notifications:o,userColors:l},s,i()({},e[s],(t={},dt()(t,a,n),dt()(t,"emoji_use",d),dt()(t,"frecency_jumper",c),dt()(t,"frecency_ent_jumper",u),t))))}var ny=Object(d_["b"])((Q_={},dt()(Q_,q["c"],function(e,t){var r=t&&Object(z_["a"])(t[Z_]);var a=t&&Object(z_["a"])(t[$_]);var n=t&&Object(z_["a"])(t[ry]);var s=t&&Object(z_["a"])(t[ey]);var o=t&&Object(z_["a"])(t[ty]);return i()({},e,{user:i()({},t,{emoji_use:n,frecency_jumper:s,frecency_ent_jumper:o}),userColors:a,notifications:r})}),dt()(Q_,q["b"],function(e,t){return ay(e,t,"user")}),dt()(Q_,H_["b"],function(e,t){return ay(e,t,"team")}),dt()(Q_,H_["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=false;if(0===Object.keys(t).length)return e;var a=i()({},e.team);Object(s["forEach"])(t,function(t,n){if(e.team[n]!==t){r=true;a[n]=t}});if(!r)return e;return i()({},e,{team:a})}),dt()(Q_,q["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=false;if(0===Object.keys(t).length)return e;var a=i()({},e.user);var n=e.notifications;var o=e.userColors;Object(s["forEach"])(t,function(t,i){if(e.user[i]!==t){r=true;a[i]=t;i===Z_&&(n=Object(z_["a"])(t));i===$_&&(o=Object(z_["a"])(t))}});if(!r)return e;return i()({},e,{notifications:n,userColors:o,user:a})}),dt()(Q_,H_["c"],function(e,t){return i()({},e,{team:t})}),dt()(Q_,W_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.pref,n=t.value;if(!r||!a)return e;var s=e.channel;var o=s[r];return i()({},e,{channel:i()({},s,dt()({},r,i()({},o,dt()({},a,n))))})}),dt()(Q_,rh["b"],function(e,t){return i()({},e,{enterprise:t})}),dt()(Q_,rh["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.pref,a=t.value;if(!r||null==a)return e;var n=e.enterprise;var s=n.org_prefs;return i()({},e,{enterprise:i()({},n,{org_prefs:i()({},s,dt()({},r,a))})})}),dt()(Q_,V_["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name,a=t.value,n=t.sync,s=void 0!==n&&n;if(!r||null==a)return e;var o=e.notifications.global||{};if(!s||"global_desktop"!==r&&"global_mobile"!==r)o[r]=a;else{o.global_desktop=a;o.global_mobile=a}var l={channels:e.notifications.channels,global:i()({},o)};return i()({},e,{notifications:l})}),dt()(Q_,V_["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.name,n=t.value,s=t.sync;if(!r||!a||null==n)return e;if(s&&"desktop"!==a)throw new Error("Cannot use sync arg with "+a+", can only be applied when name is 'desktop'");var o=e.notifications&&e.notifications.channels||{};var l=o[r]||{};if(s&&l.desktop===n&&l.mobile===n)return e;if(l[a]===n)return e;var c=i()({},l,dt()({},a,n));s&&(c.mobile=n);var u=i()({},e.notifications,{channels:i()({},o,dt()({},r,i()({},c)))});return i()({},e,{notifications:u})}),dt()(Q_,V_["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId;if(!r)return e;if(!e.notifications||!e.notifications.channels)return e;var a=Object(s["omit"])(e.notifications.channels,r);return i()({},e,{notifications:i()({},e.notifications,{channels:a})})}),dt()(Q_,V_["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.override;if(!r||!a)return e;return i()({},e,{notifications:i()({},e.notifications,{channels:i()({},e.notifications.channels,dt()({},r,a))})})}),dt()(Q_,K_["b"],function(e,t){return i()({},e,{uiState:{showOpenTransition:t,lastActiveSection:e.uiState.lastActiveSection}})}),dt()(Q_,K_["a"],function(e,t){return i()({},e,{uiState:{showOpenTransition:e.uiState.showOpenTransition,lastActiveSection:t}})}),Q_),X_,{persistenceEnabled:true});ny.propTypes={user:Ve["b"].objectOf(Ve["b"].any),team:Ve["b"].objectOf(Ve["b"].any),enterprise:Ve["b"].objectOf(Ve["b"].any),userColors:Ve["b"].objectOf(Ve["b"].string),notifications:Ve["b"].shape({global:Ve["b"].object,channels:Ve["b"].any}),uiState:Ve["b"].shape({showOpenTransition:Ve["b"].bool,lastActiveSection:Ve["b"].string})};var iy=ny;var sy={DEFAULT_UI_STATE:J_};var oy=r(146);var ly=r(198);var cy=r(1514);var uy=r(273);var dy=r(173);var py=r(434);var vy=r(1259);var my=r(232);var hy;var fy={};var by=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r.length)return t;var n=i()({},t);r.forEach(function(e){n[e]=i()({},n[e],{desynced:a})});return n};var gy=Object(d_["b"])((hy={},dt()(hy,Xa["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=true;return by(e,t,r)}),dt()(hy,Xa["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=false;return by(e,t,r)}),dt()(hy,Xa["a"],function(){return{}}),hy),fy,{persistenceEnabled:false});gy.propTypes=Ve["b"].objectOf(Ve["b"].shape({desynced:Ve["b"].bool}));var _y=gy;var yy=r(856);var Oy=r(1432);var ky=r(1547);var Ey;var jy={newUnreadMsgCount:0,refreshId:0,focusRequestedThreadKey:void 0};var Cy=Object(d_["b"])((Ey={},dt()(Ey,ky["d"],function(e,t){return i()({},e,{newUnreadMsgCount:t})}),dt()(Ey,ky["a"],function(e){var t=e.refreshId||0;return i()({},e,{refreshId:t+1})}),dt()(Ey,ky["c"],function(e,t){if(e.focusRequestedThreadKey===t)return e;return i()({},e,{focusRequestedThreadKey:t})}),Ey),jy,{persistenceEnabled:false});Cy.propTypes={newUnreadMsgCount:Ve["b"].number};var Sy=Cy;var wy=r(692);var Iy=r(1515);var Ty;var Ay=Object(d_["b"])((Ty={},dt()(Ty,oe["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;if(!r)return e;return i()({},e,{primaryViewId:r})}),dt()(Ty,oe["g"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.flexName,a=t.flexParams,n=void 0===a?[]:a,s=t.flexOrigin,o=void 0===s?null:s,l=t.flexOriginId,c=void 0===l?null:l;return i()({},e,{flexName:r,flexParams:n,flexOrigin:o,flexOriginId:c})}),dt()(Ty,oe["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.flexOrigin,a=void 0===r?null:r,n=t.flexOriginId,s=void 0===n?null:n;return i()({},e,{flexOrigin:a,flexOriginId:s})}),dt()(Ty,oe["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.flexRestore,a=void 0===r?null:r;return i()({},e,{flexRestore:a})}),dt()(Ty,oe["f"],function(e,t){return i()({},e,{focusedWorkspaces:t})}),dt()(Ty,oe["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.prevRouteName,a=t.prevFlexName,n=t.prevFlexParams;return i()({},e,{prevRouteName:r,prevFlexName:a,prevFlexParams:n})}),dt()(Ty,oe["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelDetailsOpen,a=t.channelDetailsSection;if(e.channelDetailsOpen===r&&e.channelDetailsSection===a)return e;return i()({},e,{channelDetailsOpen:r,channelDetailsSection:a})}),Ty),{},{persistenceEnabled:true});Ay.propTypes={primaryViewId:Ve["b"].string,flexName:Ve["b"].string,flexParams:Ve["b"].arrayOf(Ve["b"].string),flexOrigin:Ve["b"].string,flexRestore:Ve["b"].object,flexOriginId:Ve["b"].string,focusedWorkspaces:Ve["b"].arrayOf(Ve["b"].string),prevRouteName:Ve["b"].string,prevFlexName:Ve["b"].string,prevFlexParams:Ve["b"].object,channelDetailsOpen:Ve["b"].bool,channelDetailsSection:Ve["b"].string};var Ny=Ay;var Py=r(391);var Ry=r(3312);var My;var xy={channelMessages:{},items:[],lastRequestTimestamp:null,isWorkflowItemCoachmarkVisible:false,isOpenedFromSonicBoot:false,pageEntryPoint:"direct",pageViewingSessionId:Object(Py["a"])(),lastUsedLocale:null};var Dy=Object(d_["b"])((My={},dt()(My,Ry["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.messages;return i()({},e,{channelMessages:i()({},e.channelMessages,dt()({},r,i()({},e.channelMessages[r]||{},a)))})}),dt()(My,Ry["f"],function(e,t){return i()({},e,{items:t.items,lastUsedLocale:t.locale,lastRequestTimestamp:Date.now()})}),dt()(My,Ry["b"],function(e){return i()({},e,{isOpenedFromSonicBoot:true})}),dt()(My,Ry["a"],function(e){return i()({},e,{isWorkflowItemCoachmarkVisible:false})}),dt()(My,Ry["g"],function(e){return i()({},e,{isWorkflowItemCoachmarkVisible:true})}),dt()(My,Ry["e"],function(e,t){return i()({},e,{pageEntryPoint:t})}),dt()(My,Ry["c"],function(e){return i()({},e,{pageViewingSessionId:Object(Py["a"])()})}),My),xy,{persistenceEnabled:false});Dy.propTypes={channelMessages:Ve["b"].object};var Fy=Dy;var Ly=r(1443);var By=r(4400);var Uy=r(4600);var qy=r(1661);var Gy={focusKey:null};var Hy=Object(d_["b"])(dt()({},qy["a"],function(e,t){return i()({},e,{focusKey:t})}),Gy,{persistenceEnabled:false});Hy.propTypes={focusKey:Ve["b"].string};var Wy=Hy;var Vy=r(237);var Ky;var zy=function e(t,r){if(!r||!r.id)return t;var a=t.views,n=t.viewsState;return i()({},t,{views:i()({},a,dt()({},r.id,r)),viewsState:i()(dt()({},r.id,r.state),n)})};var Qy=Object(d_["b"])((Ky={},dt()(Ky,Mu,zy),dt()(Ky,xu,zy),dt()(Ky,Du,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.view,a=t.viewState;if(!r||!r.id||!a)return e;var n=e.viewsState;return i()({},e,{viewsState:i()({},n,dt()({},r.id,a))})}),dt()(Ky,Fu,function(e,t){if(!t||!t.id)return e;var r=Object(s["pickBy"])(e.views,function(e){return e.id!==t.id&&e.root_view_id!==t.id&&e.previous_view_id!==t.id});var a=i()({},e.viewsState);Object.keys(e.viewsState).forEach(function(e){r[e]||delete a[e]});var n=e.activeModalViewId;return{views:r,viewsState:a,activeModalViewId:r[n]?n:null}}),dt()(Ky,Lu,function(e,t){if(!t)return e;return i()({},e,{activeModalViewId:t})}),dt()(Ky,Bu,function(e,t){if(!t||!t.length||!Object(s["isArray"])(t))return e;var r=Object(s["filter"])(t,function(e){return e&&e.id});if(!r.length)return e;var a=i()({},e);Object(s["forEach"])(r,function(t){a.views[t.id]=t;a.viewsState[t.id]=e.viewsState[t.id]||t.state});return a}),Ky),{views:{},viewsState:{},activeModalViewId:null},{persistenceEnabled:true});Qy.propTypes={views:Ve["b"].object,viewsState:Ve["b"].object,activeModalViewId:Ve["b"].string};var Yy=Qy;var Jy=r(1082);var Xy;var Zy=(Xy={},dt()(Xy,f["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels,a=t.reason;var n=false;if(!a){Object(Y["b"])().warn("addOrReplace action must have a reason! Ignoring.");return e}if(!r||!r.length)return e;var s=i()({},e);r.forEach(function(e){if(e&&e.id){n=true;s[e.id]=e}});return n?s:e}),dt()(Xy,f["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ids;if(!r||!r.length)return e;return o.a.omit(e,r)}),Xy);var $y=Object(d_["b"])(Zy,{},{persistenceEnabled:true});$y.propTypes=Ve["b"].objectOf(Ve["b"].shape({id:Ve["b"].string.isRequired}));var eO={reducerConfig:Zy};var tO=$y;var rO=r(1479);var aO=r(1480);var nO=r(895);var iO=r(686);var sO=Object(c["a"])({channelNamesToIds:rO["default"],inviters:Tv["default"],mutedChannels:$m["default"],needsApiMarking:aO["default"],needsCreatedMessage:nO["default"],openedThisSession:Te["a"],prqMetrics:iO["default"]});var oO=sO;var lO=r(411);var cO=r(581);var uO=r(1430);var dO=r(1079);var pO=r(503);var vO=r(58);var mO=r.n(vO);var hO;var fO=function e(t){if(!t.counts)return null;var r={};Object.entries(t.counts).forEach(function(e){var t=mO()(e,2),a=t[0],n=t[1];r[a]=Object(s["toNumber"])(n)||0});return r};var bO=Object(d_["b"])((hO={},dt()(hO,Dh["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teams;if(!r)return e;var a={};r.forEach(function(e){a[e.id]={channels:e.channels,counts:fO(e)}});return a}),dt()(hO,Dh["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId;if(!r)return e;var a=i()({},e);delete a[r];return a}),dt()(hO,Dh["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId,a=t.channel;if(!r||!a)return e;var n=e[r];if(!n||!n.channels||!n.channels.length)return e;var o=Object(s["filter"])([].concat(m()(n.channels)),function(e){return e!==a.id});var l=null;if(n.counts){l=i()({},n.counts);o.length<n.channels.length&&(Object(A["isPrivateChannel"])(a)?l.private=Math.max(0,l.private-1):l.public=Math.max(0,l.public-1))}return i()({},e,dt()({},r,i()({},e[r],{channels:o,counts:fO({counts:l})})))}),hO),{},{persistenceEnabled:true});bO.propTypes=Ve["b"].objectOf(Ve["b"].shape({channels:Ve["b"].arrayOf(Ve["b"].string),counts:Ve["b"].shape({public:Ve["b"].number,private:Ve["b"].number,im:Ve["b"].number,mpim:Ve["b"].number})}));var gO=bO;var _O=r(914);var yO=r(1196);var OO;var kO=function e(t){return t&&t.profile&&t.profile.fields};var EO=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=false;if(r.possible_values&&kO(t)){var n=t.profile.fields[r.id];a=void 0!==n&&-1===r.possible_values.indexOf(n.value)}return a};var jO=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i()({},t,{profile:i()({},t.profile,{fields:Object(s["omit"])(t.profile.fields,r)})})};var CO=Object(d_["b"])((OO={},dt()(OO,I["c"],function(e,t){if(!t||!t.id)return e;return i()({},e,dt()({},t.id,t))}),dt()(OO,I["d"],function(e,t){if(!t||!t.length||!Object(s["isArray"])(t))return e;var r=i()({},e);t.forEach(function(e){r[e.id]=e});return r}),dt()(OO,I["h"],function(e,t){if(!t||!t.id||!e[t.id])return e;return Object(s["omit"])(e,t.id)}),dt()(OO,I["a"],function(e,t){if(!t||!t.length||!Object(s["isArray"])(t))return e;return Object(s["omit"])(e,Object(s["map"])(t,"id"))}),dt()(OO,I["g"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=Object(s["compact"])(t.map(function(t){return e[t.id]}));var a=e[Rs["SLACKBOT_ID"]];var n=Object(s["uniq"])([a].concat(m()(r)));var i=n.reduce(function(e,t){t&&(e[t.id]=t);return e},{});return i}),dt()(OO,I["f"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fieldsToDelete;var a=Object(s["reduce"])(e,function(e,t,a){kO(t)&&Object(s["some"])(r,function(e){return void 0!==t.profile.fields[e]})&&(e[a]=jO(t,r));return e},{});if(Object(s["isEmpty"])(a))return e;return i()({},e,a)}),dt()(OO,I["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fields,a=void 0===r?[]:r;var n=Object(s["reduce"])(e,function(e,t,r){if(kO(t)){var n=Object(s["filter"])(a,function(e){return EO(t,e)});n.length>0&&(e[r]=jO(t,n.map(function(e){return e.id})))}return e},{});if(Object(s["isEmpty"])(n))return e;return i()({},e,n)}),dt()(OO,I["b"],function(e){return e}),OO),{},{persistenceEnabled:true});CO.propTypes=Ve["b"].objectOf(Ve["b"].shape({id:Ve["b"].string.isRequired}));var SO=CO;var wO=r(1501);var IO;var TO=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.channelId,n=r.ts,s=r.isHidden;var o=t[a];if(!o)return t;var l=o[n];if(!l)return t;if("thread_broadcast"!==l.subtype)return t;if(!!l._hidden_reply===s)return t;return i()({},t,dt()({},a,i()({},o,dt()({},n,i()({},l,{_hidden_reply:s})))))};var AO=Symbol("Non-persisted messages map");var NO=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.messages,n=r.replace;var s=a.map(function(e){var t=e.file&&e.file.id?{file:e.file.id}:{};var r=o.a.map(o.a.compact(e.files),function(e){return e.id||e});var a=r&&r.length?{files:r}:{files:void 0};var n=performance.now().toString();return i()({},e,t,a,{__meta__:{lastUpdatedTs:n}})});var l=o.a.groupBy(s,"channel");var c={};var u={};o.a.forEach(l,function(e,r){u[r]=i()({},t[r]);c[r]=i()({},c[r]);o.a.forEach(e,function(e){u[r][e.ts]=n?e:i()({},u[r][e.ts],e);Object(Uv["shouldPersistMessage"])(e)||(c[r][e.ts]=true)});o.a.isEmpty(c[r])&&delete c[r]});var d=i()({},t,u);o.a.isEmpty(c)||(d[AO]=i()({},t[AO],c));return d};var PO=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.messages,n=r.replace;if(!a||!a.length||!o.a.isArray(a))return t;var i=o.a.compact(o.a.map(a,"root"));var s=NO(t,{messages:a,replace:n});if(i.length)return NO(s,{messages:i,replace:false});return s};var RO=function e(t,r,a){if(!t[r])return t;var n=a(t[r]);if(o.a.isEmpty(n))return o.a.omit(t,[r]);return i()({},t,dt()({},r,n))};var MO=function e(t,r,a){var n=RO(t,r,a);n!==t&&n[AO]&&(n[AO]=RO(n[AO],r,a));return n};var xO=function e(t){var r=t[AO]||{};var a=o.a.omit(t,[AO]);if(o.a.isEmpty(r))return a;o.a.forEach(r,function(e,t){if(o.a.isEmpty(a[t]))return;if(o.a.isEmpty(e))return;var r=i()({},a[t]);o.a.forEach(e,function(e,t){r[t]=Object(wO["b"])(r[t])});a[t]=r});return a};var DO={};var FO=Object(d_["b"])((IO={},dt()(IO,so["a"],function(e,t){return PO(e,{messages:t})}),dt()(IO,so["i"],function(e,t){return PO(e,{messages:t,replace:true})}),dt()(IO,so["h"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channel,a=t.ts;if(!r||!a)return e;return MO(e,r,function(e){return o.a.omit(e,[a])})}),dt()(IO,so["f"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channel,a=t.oldestAllowableTs;if(!r||!a)return e;if(!e[r])return e;var n=parseFloat(a);if(isNaN(n))throw new Error("Invalid oldestAllowableTs");return MO(e,r,function(e){return o.a.omitBy(e,function(e,t){return parseFloat(t)<n})})}),dt()(IO,so["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId;if(!r)return e;if(!e[r])return e;var a=o.a.omit(e,[r]);var n=a[AO];n&&n[r]&&(a[AO]=o.a.omit(n,[r]));return a}),dt()(IO,so["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.ts;return TO(e,{channelId:r,ts:a,isHidden:true})}),dt()(IO,so["l"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.ts;return TO(e,{channelId:r,ts:a,isHidden:false})}),dt()(IO,so["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.ts,n=t.text,s=t.blocks,l=t.memberId,c=t.editTs;var u=e[r];if(!u)return e;var d=e[r][a];if(!d)return e;if(s){if(o.a.isEqual(s,d.blocks))return e}else if(d.text===n)return e;var p=void 0;l&&(p={user:l,ts:c});var v=i()({},d,{edited:p});s?v.blocks=s:v.text=n;return i()({},e,dt()({},r,i()({},u,dt()({},a,v))))}),dt()(IO,so["j"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.messageTs,n=t.attachmentId,s=t.actionId,o=t.isPending;var l=e[r][a];if(!l)return e;var c=l.__meta__||{};var u=dt()({},"attachment-"+n+"-isPending",o);var d=dt()({},"attachment-"+n+"-action-"+s+"-isPending",o);return i()({},e,dt()({},r,i()({},e[r],dt()({},a,i()({},l,{__meta__:i()({},c,u,d)})))))}),dt()(IO,so["k"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.messageTs,n=t.attachmentId,s=t.isShowing;var o=e[r][a];if(!o)return e;var l=o.__meta__||{};var c=dt()({},"attachment-"+n+"-loaderIsShowing",s);return i()({},e,dt()({},r,i()({},e[r],dt()({},a,i()({},o,{__meta__:i()({},l,c)})))))}),dt()(IO,so["g"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.messageTs,n=t.attachmentId;var s=e[r];if(!s)return e;var l=s[a];if(!l)return e;var c=o.a.find(l.attachments,{id:n});if(!c)return e;return i()({},e,dt()({},r,i()({},s,dt()({},a,i()({},l,{attachments:o.a.reject(l.attachments,{id:n})})))))}),dt()(IO,so["b"],function(){return DO}),IO),DO,{persistenceEnabled:true,beforeWriteTransform:xO});FO.propTypes=Ve["b"].objectOf(Ve["b"].objectOf(Ve["b"].shape({ts:Ve["b"].string,type:Ve["b"].string,user:Ve["b"].string})));var LO=FO;var BO=r(1194);var UO=r(4319);var qO=r(399);var GO=function(e,t){var r=i()({},e);var a={};Object(s["forEach"])(t,function(e){var t=Object(qO["g"])(e);if(!Object(s["startsWith"])(t,"/"))return;var n=Object(qO["a"])(e);if(n){a[n]=a[n]||[];a[n].push(t);return}var o=Object(qO["d"])(e);Object(UO["a"])(o)||(r[o]=i()({autocomplete:true},e,{isServer:true}))});if(!Object(s["isEmpty"])(a)){var n=Object(s["keyBy"])(r,qO["g"]);Object(s["forEach"])(a,function(e,t){var r=n[t];if(!r)return;r.aliases=e})}return r};var HO;var WO={commands:{},cacheTs:null};var VO=Object(d_["b"])((HO={},dt()(HO,Zp["c"],function(){return WO}),dt()(HO,Zp["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.commandName;var a=e.commands,n=a[r],s=md()(a,[r]);if(!n)return e;return i()({},e,{commands:s})}),dt()(HO,Zp["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.commands,a=void 0===r?[]:r,n=t.cacheTs;if(Object(s["isEmpty"])(a))return e;var i=GO(e.commands,Object(s["keyBy"])(a,"name"));return{commands:i,cacheTs:n}}),HO),WO,{persistenceEnabled:true});VO.propTypes=Ve["b"].shape({commands:Ve["b"].objectOf(Ve["b"].shape({app:Ve["b"].string,autocomplete:Ve["b"].bool,desc:Ve["b"].string,isServer:Ve["b"].bool,name:Ve["b"].string,usage:Ve["b"].string})),cacheTs:Ve["b"].string});var KO=VO;var zO;var QO={};var YO=Object(d_["b"])((zO={},dt()(zO,d["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return i()({},e,{enterpriseId:r})}),dt()(zO,d["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return i()({},e,{teamId:r})}),zO),QO,{persistenceEnabled:true});YO.propTypes=Ve["b"].shape({enterpriseId:Ve["b"].string,teamId:Ve["b"].string});var JO=YO;var XO=r(1140);var ZO;var $O=Object(Y["b"])();var ek=Object(d_["b"])((ZO={},dt()(ZO,qf["a"],function(e,t){if(!t||!t.id){$O.warn('addGroup: user group missing required "id" prop');return e}var r=i()({},e);r[t.id]=i()({},t);return r}),dt()(ZO,qf["c"],function(e,t){if(!t||!t.length)return e;var r=t.some(function(e){return e.id});if(!r)return e;var a=i()({},e);t.forEach(function(e){if(!e.id){$O.warn('bulkAddGroups: user group missing required "id" prop');return}a[e.id]=i()({},e,{users:e.users||[]})});return a}),dt()(ZO,qf["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.groupId,a=t.users,n=void 0===a?[]:a;if(!n||!r||!e[r])return e;var s=i()({},e[r]);s.users=n;s.user_count=n.length;return i()({},e,dt()({},r,s))}),dt()(ZO,qf["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.groupId,a=t.memberId;if(!a||!r||!e[r]||Object(s["includes"])(e[r].users,a))return e;var n=i()({},e[r]);n.users=[].concat(m()(n.users||[]),[a]);return i()({},e,dt()({},r,n))}),dt()(ZO,qf["k"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.groupId,a=t.memberId;if(!a||!r||!e[r]||!Object(s["includes"])(e[r].users,a))return e;var n=e[r],o=n.users,l=md()(n,["users"]);l.users=Object(s["without"])(o,a);return i()({},e,dt()({},r,l))}),dt()(ZO,qf["j"],function(e,t){if(!t)return e;var r=Object(s["omit"])(e,t);return r}),ZO),{},{persistenceEnabled:true});ek.propTypes=Ve["b"].objectOf(Ve["b"].shape({id:Ve["b"].string.isRequired,users:Ve["b"].array}));var tk=ek;var rk=r(1683);var ak=r.n(rk);var nk=r(527);var ik="_testOnlySpyableDispatch";var sk=function(){return function(e){var t=function e(){return e[ik].apply(e,arguments)};t[ik]=e;return t}};var ok=r(250);var lk=function e(t){return Object(ok["b"])("Handle side effects",function(e,r,a){var n=t[a.type];n&&Promise.resolve().then(function(){n.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.sideEffect,n=void 0===r?o.a.noop:r,i=t.reasons,s=void 0===i?[]:i;if(s.length){var l=a&&a.payload&&a.payload.reason;if(!o.a.includes(s,l))return}try{n(a,e.dispatch,e.getState)}catch(t){Object(Y["a"])({getState:e.getState}).error("SIDE-EFFECTS","Error in side effect for '"+a.type+"'",t,{subtype:"side_effect_error"})}})});return r(a)})};var ck=lk(P["e"]);var uk=lk(P["c"]);var dk=[];var pk=Object(Y["b"])();var vk=Object(ok["b"])("Allows devs to get console logging or trigger breakpoints when state they care about changes",function(e,t,r){var a=[];var n=e.getState();dk.forEach(function(e){a.push(e(n,r))});var i=t(r);var s=e.getState();dk.forEach(function(e,t){var n=e(s,r);if(a[t]!==n){pk.warn("redux watcher","watcher value has changed! \nAction: ",r,"\nBefore: ",a[t],"\nAfter:  ",n);Xt["isDev"]||Xt["isJsPath"]}});return i});var mk=vk;function hk(e){if(!o.a.isFunction(e)){pk.error("watcherFn passed in to addWatcher must be a function");return}dk.push(e)}function fk(){dk=[]}Object(u["exportToGlobalDebugger"])("reduxWatcher",{addWatcher:hk,clearAllWatchers:fk});var bk=r(311);var gk=r(1072);var _k="DESKTOP-MIDDLEWARE";var yk=[];var Ok=Object(gk["a"])([function(e){return Object(U["g"])(e,"mac_ssb_bullet")},ue["getTotalUnreads"],ue["getTotalUnreadHighlights"]],function(e,t,r){return{showBullet:e,unreads:t,unreadHighlights:r}});var kk=Object(gk["a"])([function(e){return Object(U["g"])(e,"sidebar_theme")},U["c"],K["b"]],function(e,t,r){var a=Object(db["e"])(e,t,{useGlobalNav:r})||bk["a"];return{titlebarBackground:Object(bk["c"])(a.column_bg,32,{outputHex:true}),titlebarTextColor:a.text_color}});var Ek=Object(gk["a"])(yk.map(function(e){return function(t){return Object(E["isFeatureEnabled"])(t,e)}}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object(s["fromPairs"])(yk.map(function(e,r){return[e,t[r]]}))});var jk=Object(gk["a"])([function(e){return Object(E["isFeatureEnabled"])(e,"feature_desktop_sonic_rollout")},function(e){return Object(E["isFeatureEnabled"])(e,"feature_desktop_sonic_beta_rollout")},function(e){return Object(E["isFeatureEnabled"])(e,"feature_desktop_sonic_disable_rollout")}],function(e,t,r){var a=Ck();var n=!r&&(a?t:e);return{isSonicEnabled:n,isSonicDisabled:r}});function Ck(){return"beta"===Object(Ua["getReleaseChannel"])()}var Sk=Object(gk["a"])([kk,Ek,jk,Ok],function(e,t,r,a){return{theme:e,featureFlags:t,bootConfig:r,unreads:a}});var wk={};var Ik=Object(ok["b"])("Handle desktop data sync",function(e,t,r){var a=e.getState();var n=Object(Ie["b"])(a);if(!n)return t(r);wk[n]||(wk[n]={});var o=Sk(a);var l=Object.entries(o).reduce(function(e,t){var r=mO()(t,2),a=r[0],s=r[1];if(wk[n][a]===s)return e;wk[n][a]=s;return i()({},e,dt()({},a,s))},{});if(!Object(s["isEmpty"])(l)){Object(Y["a"])({getState:e.getState}).info(_k,"Forwarding redux payload to desktop",Object.keys(l));var c=dt()({},n,l);Object(Ua["dispatchReduxUpdate"])({teams:c})}return t(r)});var Tk=Ik;var Ak=r(1283);var Nk=r(172);var Pk=[];var Rk=1e4;var Mk={};function xk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=e.reducerConfig;var a=Object(Ie["b"])(t);var n=Mk[a]||{};Mk[a]=t;t&&Object.keys(t).forEach(function(e){if(t[e]===n[e])return;var a=Object(Nk["k"])(r&&r[e]);if(!a){Object(Y["b"])().error('dev-only-unserializable-state-detector-middleware cannot find a persistence config for the store "'+e+'". Please share this message in #devel-redux-persist');return}var i=a.persistenceEnabled,s=a.beforeWriteTransform;if(!i)return;var o=s?s(t[e]):t[e];if(!Object(Ak["a"])(o)){if(Pk.includes(e))return;Object(Y["b"])().error('Redux store "'+e+'" has unserializable state!\nFix this by ensuring that the store contains no functions or promises.\nAre you not working on the '+e+" store? Were you just minding your own business when this error popped up out of nowhere?\nPlease DM @drew this error message and he'll look into it.");Pk.push(e)}})}var Dk=Object(s["throttle"])(xk,Rk);var Fk=Dk;var Lk=Object(ok["b"])("In dev, warns when store state is unserializable",function(e,t,r){var a=(Xt["isDev"]||Xt["isJsPath"])&&!Object(fe["a"])();if(!a)return t(r);var n=e.getState();var i=t(r);var s=Object(Ie["b"])(n);var o=Object(Nk["j"])(s);if(!s)return i;var l=e.getState();Dk({state:l,reducerConfig:o});return i});var Bk=Lk;var Uk={resetLoggedOffenders:function e(){Pk=[]},validateState:xk,setPrevStateForTeamId:function e(t,r){Mk[t]=r},replaceThrottledValidateState:function e(t){Dk=t},resetThrottledValidateState:function e(){Dk=Fk}};var qk=r(1484);var Gk={},Hk=Gk.getImmediatelyPersistedState,Wk=Gk.clearImmediatelyPersistedStateForUserId;var Vk=100;var Kk={};var zk={};var Qk=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Kk[t]=r};var Yk=function e(t){return Kk[t]||{}};var Jk=function e(t,r){try{localStorage.setItem(t,JSON.stringify(r))}catch(e){}};var Xk=function e(t){var r=void 0;try{r=JSON.parse(localStorage.getItem(t))}catch(e){}return r};function Zk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=void 0===t?{}:t,a=e.reducerConfig,n=void 0===a?{}:a,i=e.teamId,s=e.userId,o=e.keyPrefix,l=void 0===o?"":o,c=e.prevStatePassedIn;var u=void 0;if(c)u=c;else{u=Yk(i);Qk(i,r)}Object.keys(r).forEach(function(e){var t=n[e];var a=r[e];var o=u[e];if(a===o)return;var c=Object(Nk["i"])({teamId:i,userId:s,key:""+l+e});if(Object(Nk["l"])(t)){Zk({state:a,prevState:o,reducerConfig:Object(Nk["h"])(t),keyPrefix:c+"."});return}var d=Object(Nk["k"])(t)||{},p=d.persistenceEnabled,v=void 0!==p&&p,m=d.persistImmediately,h=void 0!==m&&m,f=d.beforeWriteTransform;if(!v||!h)return;var b=f?f(r[e]):r[e];Jk(c,b)})}var $k={};var eE=function e(t){var r=$k[t];if(!r){r=Object(s["throttle"])(Zk,Vk);$k[t]=r}return r};var tE=Object(ok["b"])("Persists data from Redux into localStorage for rehydration later",function(e,t,r){var a=e.getState();var n=Object(Ie["b"])(a);var i=Object(E["getCurrentUserId"])(a);var s=Object(Nk["j"])(n);if(a&&s&&n&&i){var o=eE(n);o({state:a,teamId:n,userId:i,reducerConfig:s})}if(n&&!zk[n]){zk[n]={persist:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;Object(Y["a"])({teamId:n}).info("DEBUG","Persisting to immediate persistence");Zk({state:t,teamId:n,userId:i,reducerConfig:s})},get:function e(){Object(Y["a"])({teamId:n}).info("DEBUG","Getting immediately persisted state");return Hk&&Hk({teamId:n,userId:i})},clear:function e(){Object(Y["a"])({teamId:n}).info("DEBUG","Clearing immediately persisted state");return Wk&&Wk({teamId:n,userId:i})}};Object(u["exportToTeamDebugger"])(n,"persist.immediatePersist",zk[n])}return t(r)});var rE=tE;var aE={immediatelyPersistState:Zk,immediatelyPersistStateThrottledByTeam:$k,getImmediatelyPersistStateThrottled:eE,setPrevState:Qk,getPrevState:Yk,setItem:Jk,getItem:Xk};Object.defineProperties(aE,{getImmediatelyPersistStateThrottled:{get:function e(){return eE},set:function e(t){eE=t}},setPrevState:{get:function e(){return Qk},set:function e(t){Qk=t}},getPrevState:{get:function e(){return Yk},set:function e(t){Yk=t}},setItem:{get:function e(){return Jk},set:function e(t){Jk=t}}});var nE={},iE=nE.dispatchActionToAllBootedTeamsInOrg;var sE=false;function oE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevState,r=void 0===t?{}:t,a=e.state,n=void 0===a?{}:a,i=e.reducerConfig,s=void 0===i?{}:i;var o=false;Object.keys(n).forEach(function(e){if(o)return;var t=s[e];var a=n[e];var i=r[e];if(a===i)return;if(Object(Nk["l"])(t)){o=oE({prevState:i,state:a,reducerConfig:Object(Nk["h"])(t)});return}Object(Nk["n"])(t)&&(o=true)});return o}var lE=Object(ok["b"])("Syncs data between workspaces in the same org by fanning out actions to other workspaces",function(e,t,r){if(!Object(fe["a"])()||sE)return t(r);var a=e.getState();var n=t(r);var i=e.getState();var s=Object(Ie["a"])(i);var o=Object(Ie["b"])(i);var l=Object(Nk["j"])(o);if(i&&s&&l&&oE({prevState:a,state:i,reducerConfig:l})){sE=true;var c=Object(p["b"])();c.dispatch(iE({enterpriseId:s,action:r,ignoreIds:[o]}))}sE=false;return n});var cE=lE;var uE={shouldSyncAction:oE,currentlySyncing:sE};Object.defineProperties(uE,{currentlySyncing:{get:function e(){return sE},set:function e(t){sE=t}}});var dE=r(227);var pE=r(170);var vE=[nk["b"],ak.a,cE,ck,vi["default"],mk,Bk,qk["a"]];Ua["isDesktop"]&&Object(Ua["isDesktopReduxSyncEnabled"])()&&vE.push(Tk);Object(dE["a"])()||Object(pE["a"])()||vE.push(rE);"undefined"!==typeof window.__karma__&&vE.unshift(sk);var mE=vE;var hE=r(1684);var fE="_testOnlyFlush";var bE="react_redux_batched_update";var gE=.001;var _E=false;var yE=function e(t){return function(){var e=Object(pE["a"])()||Object(dE["a"])();if(e&&!_E){var r=t.apply(void 0,arguments);return i()({},r,{subscribeImmediate:r.subscribe})}var a=void 0;var n=void 0;var s=!e&&Object(Qe["a"])();var o=function t(){n=null;if(a){var r=Math.random()<gE&&!e;r&&s.mark(bE+"_mark");var i=a;a=null;i();r&&s.measureAndClear(bE+"_mark",bE)}};var l=function e(t){if(n)return;a=t;n=requestAnimationFrame(o)};var c=Object(hE["batchedSubscribe"])(l)(t);return i()({},c.apply(void 0,arguments),dt()({},fE,o))}};var OE=yE;var kE={setEnableEvenInTests:function e(t){_E=t}};var EE="persist:";var jE="persist/FLUSH";var CE="persist/REHYDRATE";var SE="persist/PAUSE";var wE="persist/PERSIST";var IE="persist/PURGE";var TE="persist/REGISTER";var AE=-1;var NE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var PE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function RE(e,t,r,a){var n=a.debug;var i=PE({},r);e&&"object"===("undefined"===typeof e?"undefined":NE(e))&&Object.keys(e).forEach(function(a){if("_persist"===a)return;if(t[a]!==r[a]){false;return}i[a]=e[a]});false;return i}function ME(e){var t=e.blacklist||null;var r=e.whitelist||null;var a=e.transforms||[];var n=e.throttle||0;var i=""+(void 0!==e.keyPrefix?e.keyPrefix:EE)+e.key;var s=e.storage;var o=false===e.serialize?function(e){return e}:xE;var l={};var c={};var u=[];var d=null;var p=null;var v=function e(t){Object.keys(t).forEach(function(e){if(!f(e))return;if(l[e]===t[e])return;if(-1!==u.indexOf(e))return;u.push(e)});Object.keys(l).forEach(function(e){void 0===t[e]&&u.push(e)});null===d&&(d=setInterval(m,n));l=t};function m(){if(0===u.length){d&&clearInterval(d);d=null;return}var e=u.shift();var t=a.reduce(function(t,r){return r.in(t,e,l)},l[e]);if(void 0!==t)try{c[e]=o(t)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete c[e];0===u.length&&h()}function h(){Object.keys(c).forEach(function(e){void 0===l[e]&&delete c[e]});p=s.setItem(i,o(c)).catch(b)}function f(e){if(r&&-1===r.indexOf(e)&&"_persist"!==e)return false;if(t&&-1!==t.indexOf(e))return false;return true}function b(e){e&&false}var g=function e(){while(0!==u.length)m();return p||Promise.resolve()};return{update:v,flush:g}}function xE(e){return JSON.stringify(e)}function DE(e){var t=e.transforms||[];var r=""+(void 0!==e.keyPrefix?e.keyPrefix:EE)+e.key;var a=e.storage;var n=e.debug;var i=false===e.serialize?function(e){return e}:FE;return a.getItem(r).then(function(e){if(!e)return;try{var r={};var a=i(e);Object.keys(a).forEach(function(e){r[e]=t.reduceRight(function(t,r){return r.out(t,e,a)},i(a[e]))});return r}catch(e){false;throw e}})}function FE(e){return JSON.parse(e)}function LE(e){var t=e.storage;var r=""+(void 0!==e.keyPrefix?e.keyPrefix:EE)+e.key;return t.removeItem(r,BE)}function BE(e){e&&false}var UE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function qE(e,t){var r={};for(var a in e){if(t.indexOf(a)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,a))continue;r[a]=e[a]}return r}var GE=5e3;function HE(e,t){false;var r=void 0!==e.version?e.version:AE;var a=e.debug||false;var n=void 0===e.stateReconciler?RE:e.stateReconciler;var i=e.getStoredState||DE;var s=void 0!==e.timeout?e.timeout:GE;var o=null;var l=false;var c=true;var u=function e(t){t._persist.rehydrated&&o&&!c&&o.update(t);return t};return function(a,d){var p=a||{},v=p._persist,m=qE(p,["_persist"]);var h=m;if(d.type===wE){var f=false;var b=function t(r,a){false;if(!f){d.rehydrate(e.key,r,a);f=true}};s&&setTimeout(function(){!f&&b(void 0,new Error('redux-persist: persist timed out for persist key "'+e.key+'"'))},s);c=false;o||(o=ME(e));if(v)return a;if("function"!==typeof d.rehydrate||"function"!==typeof d.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");d.register(e.key);i(e).then(function(t){var a=e.migrate||function(e,t){return Promise.resolve(e)};a(t,r).then(function(e){b(e)},function(e){false;b(void 0,e)})},function(e){b(void 0,e)});return UE({},t(h,d),{_persist:{version:r,rehydrated:false}})}if(d.type===IE){l=true;d.result(LE(e));return UE({},t(h,d),{_persist:v})}if(d.type===jE){d.result(o&&o.flush());return UE({},t(h,d),{_persist:v})}if(d.type===SE)c=true;else if(d.type===CE){if(l)return UE({},h,{_persist:UE({},v,{rehydrated:true})});if(d.key===e.key){var g=t(h,d);var _=d.payload;var y=false!==n&&void 0!==_?n(_,a,g,e):g;var O=UE({},y,{_persist:UE({},v,{rehydrated:true})});return u(O)}}if(!v)return t(a,d);var k=t(h,d);if(k===h)return a;k._persist=v;return u(k)}}var WE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var VE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function KE(e,t,r,a){var n=a.debug;var i=VE({},r);e&&"object"===("undefined"===typeof e?"undefined":WE(e))&&Object.keys(e).forEach(function(a){if("_persist"===a)return;if(t[a]!==r[a]){false;return}if(zE(r[a])){i[a]=VE({},i[a],e[a]);return}i[a]=e[a]});false;return i}function zE(e){return null!==e&&!Array.isArray(e)&&"object"===("undefined"===typeof e?"undefined":WE(e))}function QE(e,t){e.stateReconciler=void 0===e.stateReconciler?KE:e.stateReconciler;return HE(e,Object(l["combineReducers"])(t))}var YE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function JE(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var XE={registry:[],bootstrapped:false};var ZE=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:XE;var r=arguments[1];switch(r.type){case TE:return YE({},t,{registry:[].concat(JE(t.registry),[r.key])});case CE:var a=t.registry.indexOf(r.key);var n=[].concat(JE(t.registry));n.splice(a,1);return YE({},t,{registry:n,bootstrapped:0===n.length});default:return t}};function $E(e,t,r){var a,n;false;var i=r||false;var s=Object(l["createStore"])(ZE,XE,t?t.enhancer:void 0);var o=function e(t){s.dispatch({type:TE,key:t})};var c=function t(r,a,n){var o={type:CE,payload:a,err:n,key:r};e.dispatch(o);s.dispatch(o);if(i&&u.getState().bootstrapped){i();i=false}};var u=YE({},s,{purge:function t(){var r=[];e.dispatch({type:IE,result:function e(t){r.push(t)}});return Promise.all(r)},flush:function t(){var r=[];e.dispatch({type:jE,result:function e(t){r.push(t)}});return Promise.all(r)},pause:function t(){e.dispatch({type:SE})},persist:function t(){e.dispatch({type:wE,register:o,rehydrate:c})}});u.persist();return u}function ej(e,t){var r=t||{},a=r.debug;return function(t,r){if(!t){false;return Promise.resolve(void 0)}var a=t._persist&&void 0!==t._persist.version?t._persist.version:AE;if(a===r){false;return Promise.resolve(t)}if(a>r){false;return Promise.resolve(t)}var n=Object.keys(e).map(function(e){return parseInt(e)}).filter(function(e){return r>=e&&e>a}).sort(function(e,t){return e-t});false;try{var i=n.reduce(function(t,r){false;return e[r](t)},t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}}function tj(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.whitelist||null;var n=r.blacklist||null;function i(e){if(a&&-1===a.indexOf(e))return true;if(n&&-1!==n.indexOf(e))return true;return false}return{in:function t(r,a,n){return!i(a)&&e?e(r,a,n):r},out:function e(r,a,n){return!i(a)&&t?t(r,a,n):r}}}var rj=r(1182);var aj=r(1318);var nj=r(469);var ij="generate prop types hashes";function sj(e){var t=Object.keys(e);var r=t.reduce(function(t,r){var a=e[r];if(a&&a.propTypes&&Object(Nk["m"])(a)){var n=Object(nj["c"])(a.propTypes,r);var i=Object(aj["a"])(n);t[r]=i;a.propTypesHash=i}return t},{});return r}function oj(e){var t=Object(Nk["h"])(e);if(t)return sj(t);Object(Y["b"])().info(ij,"invalid reducer passed in to generatePropTypesHashesFromReducer. You should pass in a reducer created using combineReducers");return null}var lj=r(1155);var cj={},uj=cj.getPersistConfigForStore;var dj={},pj=dj.getLocalConfigByKey;var vj=Object(He["a"])(100);var mj=void 0;function hj(){mj=null}function fj(e){mj=e}var bj={};function gj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(p["d"])(e);var r=bj[e];var a=Object(Qe["a"])();var n=Object(Y["a"])({teamId:e});n.info(Nk["o"],"Persisting state to storage");vj&&a.mark(Nk["b"]+"_persistence_write_mark_"+Nk["c"]);r.update(t.getState());r.flush().then(function(){var e=void 0;vj&&(e=a.measureAndClear(Nk["b"]+"_persistence_write_mark_"+Nk["c"]));n.info(Nk["o"],"Persisted state"+(e?": "+e.toFixed(1)+"ms":""))}).catch(function(){vj&&a.clearMarks(Nk["b"]+"_persistence_write_mark_"+Nk["c"])})}var _j=false;var yj=function e(t){return function(e){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];var i=mj;var o=Object(Nk["h"])(e);i&&o&&Object(Nk["q"])(i,o);var l=Object(pE["a"])()||Object(dE["a"])();var c=void 0!==uj&&Object(fe["a"])()&&(!l||_j);if(!c)return t.apply(void 0,[e].concat(a));if(c&&!i){Object(Y["b"])().error(new Error("Redux persist enhancer cannot find a team id. Redux persist will be disabled"));return t.apply(void 0,[e].concat(a))}var d=void 0;var v=void 0;var m=e;var h=Object(Y["a"])({teamId:i});if(c){var f=uj({teamId:i,reducerConfig:o});m=HE(f,e);Object(Nk["p"])({reducer:m,reducerConfig:o});d=ME(f);bj[i]=d;v=oj(m)}var b=t.apply(void 0,[m].concat(a));var g=b._initStore;b._initStore=function e(t){g&&g(t);v&&t.dispatch(Object(lj["a"])(v))};if(c){var _=function e(){gj(i,b)};var y=b.subscribe(Object(s["throttle"])(_,Nk["d"],{trailing:true,leading:false}));var O=Object(s["throttle"])(function(){h.info(Nk["o"],"Persisting state to storage because we just lost network connectivity");_()},Nk["e"],{leading:true});window.addEventListener("offline",O);window.addEventListener("beforeunload",function(){var e=pj("orderedTeamIds");if(Array.isArray(e)&&false===e.includes(i)){h.info(Nk["o"],"Not persisting state to storage even though the window is about to unload - teamId not found in sidebar");return}Object(p["a"])(i,Object(yy["clearSerializedData"])());Object(rj["c"])();h.info(Nk["o"],"Persisting state to storage because the window is about to unload");_()});Object(u["exportToTeamDebugger"])(i,"persist.reduxPersist",{getPersistoid:function e(){h.info("DEBUG","Getting Redux Persist persistoid object");return d},persist:function e(){h.info("DEBUG","Persisting state to Redux Persist");_()},get:function e(){var t=void 0;var r=Object(u["getFromGlobalDebugger"])("reduxPersist.getStoredModel");if(r){h.info("DEBUG","Getting stored model from Redux Persist");t=r(i).tap(function(e){h.info("DEBUG",e)})}else h.info("DEBUG","Cannot get cache: `slackDebug.reduxPerist.getStoredModel` does not exist");return t},clear:function e(){var t=Object(u["getFromGlobalDebugger"])("reduxPersist.purgeStoredModel");if(t){h.info("DEBUG","Clearing cache from Redux Persist");t(i)}else h.info("DEBUG","Cannot clear cache: `slackDebug.reduxPersist.purgeStoredModel` is missing")},stop:function e(){h.info("DEBUG","No longer running Redux Persist");y()}})}return b}};var Oj=yj;var kj={};Object.defineProperty(kj,"isEnabledInTests",{get:function e(){return _j},set:function e(t){_j=t}});var Ej=[OE,Oj];var jj=r(1481);r.d(t,"a",function(){return Cj});function Cj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,r=e.reducers,n=void 0===r?a:r,s=e.middlewares,o=void 0===s?mE:s,v=e.customEnhancers,m=void 0===v?Ej:v,h=e.initialState,f=void 0===h?{}:h,b=e.disableDevTools,g=void 0!==b&&b;if(!t)throw new Error("configureStore must be called with a teamId parameter");var _=k({teamId:t,customEnhancers:m,middlewares:o,disableDevTools:g});var y=Object(c["a"])(i()({},n,{persistenceHashes:jj["a"]}));fj(t);var O=Object(l["createStore"])(y,f,_);hj();var E=O._initStore;O._initStore=function e(r){E&&E(r);r.dispatch(Object(d["b"])({id:t}))};O._initStore(O);Object(p["f"])(t,O);Object(u["exportToTeamDebugger"])(t,"redux",O);return O}var Sj=void 0;Object(u["exportToGlobalDebuggerWithGetter"])("redux",function(){if(Sj)return Sj;var e=function e(t,r){var a=t.replace("@slack/redux/","").replace(/\.js$/,"").replace(/-middleware$/,"").replace(/\//,"_");return Object(s["camelCase"])(a+"_"+r)};var t=function t(r){var a={};Object.values(r).forEach(function(t){t.meta&&(a[e(t.meta.file,t.meta.name)]=t)});return a};var r=function e(t){var r={};Object.values(t).forEach(function(e){if(!e||!e.meta||!e.meta.name)return;r[e.meta.name]=e});return r};Sj={actions:t(Object(Pu["a"])()),middlewares:r(Object(ok["a"])()),reducers:t(Object(d_["a"])()),selectors:t(Object(Uu["a"])()),thunks:t(Object(we["a"])())};return Sj})},,,,function(e,t,r){},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(15);var s=r(48);var o=r(2);var l=r(58);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(1757);var y=r(16);var O=r.n(y);var k=r(13);var E=r(2414);var j=r(10);var C=r(1360);var S=r(84);var w=r(537);var I=r(4326);var T=r(2217);var A=r(1059);var N=r(28);var P=r(22);var R=r(290);var M=r(4);var x=r(19);var D=r(23);var F=r(316);var L=r(186);var B=r(11);var U=r(17);var q=r(31);var G=r(71);var H=r(443);var W=r(145);var V=r(886);var K=r(278);var z=r(1543);var Q=r(1183);var Y=r(3);var J=r.n(Y);var X=r(790);var Z=r(61);var $=r(426);var ee=r(35);var te=r(4200);var re=[230,132,102,88,68,44,34];var ae={className:g["b"].string,size:g["b"].number.isRequired,team:g["b"].object,invert:g["b"].bool};var ne={className:void 0,team:void 0,invert:false};function ie(e){var t=e.size,r=e.team;var a=Object(q["getTeamIcon"])(r);if(!a||a.image_default)return null;var n=2*t;var i=Object($["a"])(n,re);return a["image_"+i]}function se(e){var t=Object(q["getTeamDisplayName"])(e);return Object(q["getTeamInitials"])(t,{limit:2})}function oe(e){var t=e.className,r=e.invert,a=e.size,i=e.team;var s=Object(Z["c"])(i);var o=Object(Z["d"])(i);if(s||o)return n.a.createElement(te["a"],{className:O()(t,"c-team_entity__icon"),isNonExistent:s,size:a,invert:r});var l=ie({size:a,team:i});var c=!l&&se(i);return n.a.createElement("span",{"aria-hidden":"true",className:O()(t,"c-team_entity__icon",{"c-team_entity__icon--default":!l}),style:{backgroundImage:l&&"url("+l+")",fontSize:Math.round(a/1.8)+"px",height:a,lineHeight:a+"px",width:a}},c)}oe.displayName="TeamIcon";oe.defaultProps=ne;function le(e,t){var r=t.id;return{team:Object(ee["j"])(e,r)}}var ce=Object(k["connect"])(le)(oe);ce.propTypes={id:g["b"].string.isRequired};var ue=ce;var de=r(2265);var pe=r(3151);var ve={className:g["b"].string,id:g["b"].string.isRequired,isDeactivated:g["b"].bool,invert:g["b"].bool};var me={className:void 0,isDeactivated:false,invert:false};function he(e){var t=e.className,r=e.id,a=e.invert,i=e.isDeactivated;var s=i?I["c"].dim:null;a&&(s=I["c"].highlightDark);return n.a.createElement(X["d"],{avatar:function e(t){return n.a.createElement(ue,J()({},t,{id:r,size:I["a"].small,invert:a}))},className:t,size:"small",style:s,text:n.a.createElement(de["a"],{id:r,invert:a})})}he.displayName="SmallTeamEntity";he.defaultProps=me;var fe=he;var be={className:g["b"].string,id:g["b"].string.isRequired,isActive:g["b"].bool,isDeactivated:g["b"].bool,isDisabled:g["b"].bool,secondaryContent:g["b"].node};var ge={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0};function _e(e){var t=e.className,r=e.id,a=e.isActive,i=e.isDeactivated,s=e.isDisabled,o=e.secondaryContent;var l=void 0;a?l=s||i?I["c"].highlightDim:I["c"].highlightDark:(s||i)&&(l=I["c"].dim);return n.a.createElement(Q["a"],{className:t,style:l,primaryContent:n.a.createElement(fe,{id:r,isDeactivated:i,invert:l===I["c"].highlightDark}),secondaryContent:o,size:"small"})}_e.displayName="SmallTeamListEntity";_e.defaultProps=ge;var ye=_e;var Oe=r(274);var ke=r(3153);function Ee(e,t){var r=[];Object(o["forEach"])(e,function(e){var a=e.item;if(Object(W["b"])(a.id))return;if(Object(W["a"])(a.id)){if(a.id===t)return;if(!Object(q["isTeamOpen"])(a))return}r.push(a)});return r}var je=new j["b"]("quick_switcher");var Ce={featureSonicQuickSwitcher:g["b"].bool,search:g["b"].func,setPrimaryView:g["b"].func.isRequired,getDraftAndUnreadChannels:g["b"].func.isRequired,getTeamIdForChannelFromAnotherTeam:g["b"].func.isRequired,currentTeamId:g["b"].string.isRequired,closeModal:g["b"].func.isRequired,featureOfflineMode:g["b"].bool.isRequired,telemeter:g["b"].object.isRequired,recordFrecencyEvent:g["b"].func.isRequired,isChannelDeletedMember:g["b"].func.isRequired};var Se={featureSonicQuickSwitcher:false,search:o["noop"]};var we=38;var Ie=300;var Te="qs_result_rendering_ms";var Ae="qs_input_change";var Ne={open:false,searchQuery:"",results:[],index:0,deletedResults:[],initialFocusSet:false,searchMetaData:[]};var Pe={entities:{channels:{includePublic:true,includePrivate:true,includeFromAnotherTeam:true,includeMpims:true,includeArchived:true,onlyIfMember:false,searchPreviousNames:true,onlyVisibleMpims:false},members:{includeSelf:true,includeSlackbot:true,includeBots:true,onlyLocalTeam:false,onlyAdmins:false,includeDeleted:true},teams:true,userGroups:false,views:false},limit:24,sort:{preferExactMatch:true,frecency:true,preferChannelsUserBelongsTo:true,selfFirst:true},allowEmptyQuery:true,returnMetadata:true,tiered:true};var Re=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["a"])(r,["onInput","renderResult","onShowDeactivatedClick","onItemClick","handleUpOrShiftTabKey","handleDownOrTabKey","handleEnterKey","getBestFormerName"]);r.state=Ne;r.searchInputRef=n.a.createRef();return r}v()(t,[{key:"componentDidMount",value:function e(){this.bindKeyCommands();this.setResultsToUnreadsAndDrafts()}},{key:"componentDidUpdate",value:function e(t,r){var a=this.props.telemeter;a.getLatestMark(Ae)&&a.measureAndClear(Ae,Te);if(!r.initialFocusSet&&this.searchInputRef.current){this.setInitialFocus();this.searchInputRef.current.focus()}}},{key:"componentWillUnmount",value:function e(){this.unbindKeyCommands()}},{key:"onItemClick",value:function e(){this.openChannelOrDm()}},{key:"onItemHover",value:function e(t){this.state.index!==t&&this.setState(function(){return{index:t}})}},{key:"onShowDeactivatedClick",value:function e(){var t=Object(o["filter"])(this.state.results,function(e){return"hasDeactivated"!==e.id});t=t.concat(this.state.deletedResults);this.setState(function(){return{results:t,deletedResults:[]}})}},{key:"onInput",value:function e(t){this.props.telemeter.mark(Ae);var r=t.target.value;this.setState(function(){return{searchQuery:r}});this.search(r)}},{key:"setResultsToUnreadsAndDrafts",value:function e(){this.resetResultsState(this.props.getDraftAndUnreadChannels())}},{key:"setInitialFocus",value:function e(){this.setState(function(){return{initialFocusSet:true}})}},{key:"setSearchMetaData",value:function e(t){this.setState(function(){return{searchMetaData:t}})}},{key:"getBestFormerName",value:function e(t){var r=this.state.searchMetaData;var a=Object(o["find"])(r,["item.id",t]);if(!a)return null;var n=Object(o["get"])(a,"bestPreviousNameMatch");if(!n)return null;return n}},{key:"handleUpOrShiftTabKey",value:function e(t){t.preventDefault();t.stopPropagation();var r=this.state,a=r.index,n=r.results;this.setState(function(){return{index:0===a?n.length-1:a-1}})}},{key:"handleDownOrTabKey",value:function e(t){t.preventDefault();t.stopPropagation();var r=this.state,a=r.index,n=r.results;this.setState(function(){return{index:(a+1)%n.length}})}},{key:"handleEnterKey",value:function e(t){t.preventDefault();this.openChannelOrDm()}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up","shift+tab"],handler:this.handleUpOrShiftTabKey},{keys:["down","tab"],handler:this.handleDownOrTabKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new L["a"](document.body));this.keyCommands.bindAll(t)}},{key:"unbindKeyCommands",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"openChannelOrDm",value:function e(){var t=this.state,r=t.results,a=t.index,n=t.searchQuery;var i=this.props,s=i.currentTeamId,o=i.getTeamIdForChannelFromAnotherTeam;var l=r[a];var c=l.id;if(Object(W["a"])(c)){Object(K["c"])(V["a"],{teamId:c},{reason:"quickswitcher:openChannelOrDm"});return}var u=Object(B["isFromAnotherTeam"])(l);var d=u?o(l):s;this.props.recordFrecencyEvent({id:c,text:n});this.props.setPrimaryView({id:c,teamId:d});this.setState(function(){return Ne});this.props.closeModal()}},{key:"search",value:function e(t){var r=this;this.remoteSearchPromise&&this.remoteSearchPromise.isPending()&&this.remoteSearchPromise.cancel();if(!t){this.setResultsToUnreadsAndDrafts();return null}return this.props.search({query:t,options:Pe}).then(function(e){r.remoteSearchPromise=e.promise;r.setSearchMetaData(e);var t=Ee(e,r.props.currentTeamId);r.resetResultsState(t);return r.remoteSearchPromise.then(function(e){var t=false;r.setSearchMetaData(e);var a=Ee(e,r.props.currentTeamId);r.resetResultsState(a,t)})})}},{key:"resetResultsState",value:function e(t){var r=this;var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=Object(o["partition"])(t,function(e){return Object(U["isDeleted"])(e)||r.props.isChannelDeletedMember(e)}),i=c()(n,2),s=i[0],l=i[1];var u=void 0;var d=void 0;if(s.length>1&&l.length){u=l.concat({id:"hasDeactivated"});d=s}else{u=l.concat(s);d=[]}var p=this.state,v=p.index,m=p.results;var h=0;if(!a&&m.length){var f=m[v];f&&f.id&&(h=Object(o["findIndex"])(u,function(e){return f.id===e.id}))}this.setState(function(){return{results:u,deletedResults:d,index:-1===h?0:h}})}},{key:"renderResult",value:function e(t){var r=this;if(!this.props.featureSonicQuickSwitcher)return null;var a=this.state.results[t].id;var i=this.getBestFormerName(a);var s=t===this.state.index;if("hasDeactivated"===a)return this.renderDeletedOptionRow();var o=O()("p-quick_switcher__searcher_result",{"p-quick_switcher__searcher_result--selected":t===this.state.index});var l=void 0;l=a===Oe["a"].allThreads?n.a.createElement(A["a"],{invert:s,label:je.t("Threads"),prefix:n.a.createElement(P["b"],{type:"comment-alt",size:"inherit"}),"data-qa":"quick_switcher_result_threads"}):Object(W["a"])(a)?n.a.createElement(ye,{id:a,isActive:s}):n.a.createElement(T["a"],{channelId:a,isActive:s,"data-qa":"quick_switcher_result_channel",bestFormerName:i,displayFormerNames:I["d"].bestOnly});return n.a.createElement(N["c"],{onClick:this.onItemClick,onMouseMove:function e(){return r.onItemHover(t)},className:o,"data-qa":"quick_switcher_result"},l)}},{key:"renderEmptyResults",value:function e(){if(!this.props.featureSonicQuickSwitcher)return null;var t=this.state.searchQuery;var r=je.t("Create a channel named #{channelName}",{channelName:t});var a=je.t("No matches found. Did you spell it correctly?");return n.a.createElement("div",{className:"p-quick_switcher__empty_results_container","data-qa":"quick_switcher_empty_results"},n.a.createElement("span",{className:"p-quick_switcher__empty_results_label"},a),n.a.createElement(z["a"],null,n.a.createElement(N["d"],{type:"outline",size:"small"},r)))}},{key:"renderDeletedOptionRow",value:function e(){var t=O()("p-quick_switcher__show_deactivated");var r=je.t("Show { deletedLength, plural, =1 { # deactivated account } other { # deactivated accounts }}",{deletedLength:this.state.deletedResults.length,fallbackHash:"feba4c19a527da3284a69be904d33a90e6fb3f17",fallbackHashNs:"jumper"});return n.a.createElement(N["c"],{onClick:this.onShowDeactivatedClick,className:t},r)}},{key:"renderResultsFromSearcher",value:function e(){var t=this;var r=this.state,a=r.results,i=r.index;this.keys=Object(o["map"])(a,"id");var s=this.keys[i];var l=Math.min(a.length*we,Ie);return n.a.createElement("div",{"data-qa":"quick_switcher_results"},n.a.createElement(E["a"],{disableHeight:true},function(e){var r=e.width;return n.a.createElement(w["a"],{width:r,height:l,keys:t.keys,rowRenderer:t.renderResult,itemToScroll:s,animateOnScroll:false})}))}},{key:"renderResults",value:function e(){if(this.state.results.length)return this.renderResultsFromSearcher();if(this.state.searchQuery)return this.renderEmptyResults();return null}},{key:"renderFooter",value:function e(){var t=je.rt('{iconUpArrow}{iconDownArrow} to navigate {iconEnter} to select <strong className="margin_left_150">esc</strong> to dismiss',{iconUpArrow:n.a.createElement(P["b"],{type:"arrow-large-up",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconDownArrow:n.a.createElement(P["b"],{type:"arrow-large-down",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconEnter:n.a.createElement(P["b"],{type:"enter",size:"inherit",className:"p-quick_switcher__footer_icon margin_left_150"}),fallbackHash:"6073ad556716a850199fe235793ca2e2a12dc636",fallbackHashNs:"jumper"});if(!this.props.featureOfflineMode)return n.a.createElement("div",{className:"t-display-as-micro"},t);var r=je.rt("{iconOffline} No connection \u2014\xa0some results may not be available.",{iconOffline:n.a.createElement(P["b"],{type:"cloud-offline",size:"inherit",className:"p-quick_switcher__footer_icon p-quick_switcher__footer_icon_offline"})});return n.a.createElement("div",{className:"t-display-as-micro"},n.a.createElement(C["b"],null,t),n.a.createElement(C["a"],null,r))}},{key:"render",value:function e(){if(!this.props.featureSonicQuickSwitcher)return null;return n.a.createElement(S["a"],{showHeader:false,showFooter:true,className:"p-quick_switcher","data-qa":"quick_switcher",showCancelButton:false,showCloseButton:false,showGoButton:false,footerText:this.renderFooter(),overlayClassName:"p-quick_swticher_overlay",titleAria:je.t("Quick Switcher")},n.a.createElement("input",{placeholder:je.t("Jump to..."),className:"p-quick_switcher__input","data-qa":"quick_switcher_input",onChange:this.onInput,value:this.state.searchQuery,ref:this.searchInputRef,spellCheck:false}),this.renderResults())}}]);return t}(a["PureComponent"]);Re.displayName="QuickSwitcher";Re.defaultProps=Se;var Me=function e(t){return{featureSonicQuickSwitcher:Object(M["isFeatureEnabled"])(t,"feature_sonic_quick_switcher"),getDraftAndUnreadChannels:function e(){return Object(x["h"])(t)},getTeamIdForChannelFromAnotherTeam:function e(r){return Object(B["teamIdForChannelFromAnotherTeam"])(t,r)},isChannelDeletedMember:function e(r){return Object(B["isImWithDeletedMember"])(t,r)},currentTeamId:Object(D["b"])(t),featureOfflineMode:Object(M["isFeatureEnabled"])(t,"feature_offline_mode"),telemeter:Object(G["c"])({state:t})}};var xe={search:R["e"],setPrimaryView:F["a"],closeModal:s["closeModal"],recordFrecencyEvent:H["c"]};var De=Object(k["connect"])(Me,xe)(Re);var Fe=De;var Le=r(540);var Be=r(366);var Ue=r(1792);var qe="quick-switcher";function Ge(e,t){var r=Object(s["getCurrentModals"])(t());if(Object(o["find"])(r,{name:qe})){e(Object(s["closeModal"])());return}e(Object(s["openModal"])({element:n.a.createElement(Fe,null),name:qe}))}function He(e){var t=Object(s["getCurrentModals"])(e);return!!Object(o["find"])(t,{name:qe})}var We=Object(i["b"])("maybe shows quick switcher modal",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.event,n=r.keyCode;a&&a.preventDefault();if(Object(Be["b"])(t())){var i=void 0;n&&n===Le["codes"].k?i="k":n&&n===Le["codes"].t&&(i="t");e(Object(Ue["a"])({key:i||"button"}));return true}if(Ge(e,t))return true;return false});We.propTypes={event:g["b"].object,keyCode:g["b"].number};var Ve=t["a"]=We},,function(e,t,r){"use strict";r.r(t);var a=r(1287);var n=r(44);Object(n["a"])("interop.beaconApiCall",a["a"])},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(1757);var y=r(10);var O=r(4);var k=r(1175);var E=r(4370);var j=new y["b"]("enterprise_dashboard");var C={featureAuditLogsView:g["b"].bool};var S={featureAuditLogsView:false};var w=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={selectedUser:null};Object(_["a"])(r,["setSelectedUser"]);return r}v()(t,[{key:"setSelectedUser",value:function e(t){this.setState(function(){return{selectedUser:t}})}},{key:"renderUserRow",value:function e(t){var r=t.value;return n.a.createElement(E["a"],{id:r,size:"small"})}},{key:"renderFilters",value:function e(){if(!this.props.featureAuditLogsView)return null;return n.a.createElement(k["c"],{selectId:"audit_log_user_filter",placeholderText:j.t("Select a User..."),isRequired:false,renderOption:this.renderUserRow,renderSelectedOption:this.renderUserRow,onOptionSelected:this.setSelectedUser,maxResultCount:20})}},{key:"render",value:function e(){if(!this.props.featureAuditLogsView)return null;return n.a.createElement("div",{style:{height:"600px"}},n.a.createElement("h1",null,j.t("Audit Logs")),this.renderFilters())}}]);return t}(a["PureComponent"]);w.displayName="AuditLogsView";var I=function e(t){return{featureAuditLogsView:Object(O["isFeatureEnabled"])(t,"feature_audit_logs_view")}};w.defaultProps=S;var T=Object(o["connect"])(I)(w);var A=T;Object(c["a"])("interop.auditLogs",{render:function e(t,r){if(!t)throw new Error("auditLogs render must be called with a teamId parameter");var a=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:a},n.a.createElement(A,null)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,function(e,t,r){},function(e,t,r){"use strict";r.d(t,"a",function(){return s});r.d(t,"b",function(){return o});r.d(t,"d",function(){return l});r.d(t,"c",function(){return c});var a=r(0);var n=r(25);var i=r(29);var s=Object(n["a"])("Gets the list of workflows for this user",function(e,t,r){var a=r.onlyActive,n=void 0===a||a;return e(Object(i["a"])({method:"users.workflows.list",args:{only_active:n}}))});s.propTypes={onlyActive:a["b"].bool};var o=Object(n["a"])("Completes a workflow task with given ID",function(e,t,r){var a=r.userTaskId;return e(Object(i["a"])({method:"users.workflows.tasks.completed",args:{user_task_id:a}}))});o.propTypes={userTaskId:a["b"].number};var l=Object(n["a"])("Marks a workflow task with given ID as in progress",function(e,t,r){var a=r.userTaskId;return e(Object(i["a"])({method:"users.workflows.tasks.inProgress",args:{user_task_id:a}}))});l.propTypes={userTaskId:a["b"].number};var c=Object(n["a"])("Completes a workflow with given ID",function(e,t,r){return e(Object(i["a"])({method:"users.workflows.completed",args:{user_workflow_id:r}}))});c.propTypes={userTaskId:a["b"].number}},,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(2);var f=r(1757);var b=r(16);var g=r.n(b);var _=r(232);var y=r(34);var O=r(48);var k=r(38);var E=r(10);var j=r(12);var C=r(45);var S=r(21);var w=r(84);var I={title:v["b"].string,children:v["b"].node.isRequired,step:v["b"].number.isRequired,currentStep:v["b"].number.isRequired,setModalTitle:v["b"].func.isRequired};var T={title:""};var A=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentWillReceiveProps",value:function e(){var t=this.props,r=t.title,a=t.currentStep,n=t.step;var i=a===n;i&&this.props.setModalTitle(r)}},{key:"render",value:function e(){var t=this.props,r=t.currentStep,a=t.step;var n=r===a;var i=g()({"p-onboarding__step":true,"p-onboarding__step--active":n,"p-onboarding__step--inactive":!n});var s=p.a.createElement("div",{className:i},n&&this.props.children);return n?s:null}}]);return t}(d["Component"]);A.displayName="Step";A.defaultProps=T;var N={setModalTitle:_["setModalTitle"]};var P=Object(m["connect"])(null,N)(A);var R=r(3);var M=r.n(R);var x=r(5);var D=r.n(x);var F=r(585);var L=new E["b"]("password");var B=function e(t){var r={no_values:L.t("Please enter a password!"),matches_username:L.t("That password is too similar to your username. Try something different?"),matches_email:L.t("That password is too similar to your email address. Try something different?"),too_short:L.t("Your password must be at least 6 characters long."),too_long:L.t("Your password can be at most 500 characters long."),numeric_sequence:L.t("Your password cannot solely contain sequences of letters or numbers."),alpha_sequence:L.t("Your password cannot solely contain sequences of letters or numbers."),adjacent:L.t("Your password cannot solely contain adjacent keys on a keyboard."),repeated:L.t("Your password cannot solely contain a repeated character."),common:L.t("That password is pretty common. Try something different?")};return r[t]||""};var U=B;var q=r(508);var G=r(179);var H=r(364);var W=r(211);var V=r(126);var K=r(1052);var z=r(54);var Q={src:v["b"].string.isRequired};var Y=function e(t){var r=t.src;return p.a.createElement(d["Fragment"],null,p.a.createElement("div",{className:"p-onboarding__step__header"},p.a.createElement("img",{src:r,srcSet:r+" 1x, "+r.replace(".png","@2x.png")+" 2x",alt:""})))};Y.displayName="StepHeader";var J=Y;var X={imgUrl:v["b"].string.isRequired,realName:v["b"].string,gdprPref:v["b"].bool,onPasswordSet:v["b"].func,gdpr:v["b"].bool.isRequired,inEU:v["b"].bool.isRequired,needsPasswordSet:v["b"].bool,updateRealName:v["b"].func,updateGdprPref:v["b"].func,updateStep:v["b"].func,setStepCallback:v["b"].func,submitCheckPasswordComplexity:v["b"].func};var Z={realName:"",gdprPref:false,onPasswordSet:h["noop"],needsPasswordSet:true,updateRealName:h["noop"],updateGdprPref:h["noop"],updateStep:h["noop"],setStepCallback:h["noop"],submitCheckPasswordComplexity:h["noop"]};var $=new E["b"]("team_creation");var ee=Object(j["b"])();var te="TEAM_CREATOR_ONBOARDING";var re=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props.realName;Object(f["a"])(r,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]);r.nameInput=null;r.updateRealNameDebounced=Object(h["debounce"])(r.updateRealNameApi,500);r.checkPasswordComplexityDebounced=Object(h["debounce"])(r.checkPasswordComplexityApi,500);r.state={realName:a,realNameError:null,password:"",passwordError:null,gdpr:null};return r}s()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.validateAndSaveStep()}},{key:"onRealNameChange",value:function e(){this.updateRealNameDebounced(this.state.realName)}},{key:"onPasswordChange",value:function e(t){var r=this;this.setState(function(){return{password:t}},function(){r.checkPasswordComplexityDebounced(t)})}},{key:"onGdprPrefChange",value:function e(t){var r=this;var a=t.target.classList.contains("gdpr_pref_radio");var n=!!a||t.target.checked;var i=t.target.value;this.setState(function(){return{gdpr:n,gdprRadioValue:i}},function(){r.props.updateGdprPref({gdprPref:n})})}},{key:"onGo",value:function e(){var t=this;var r=this.props.needsPasswordSet;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;r&&t.props.onPasswordSet(t.state.password);t.props.updateStep({number:q["d"].workspace})}).catch(function(e){ee.info(te,e)})}},{key:"setRealNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateRealName",value:function e(t){this.setState(function(){return{realName:t}})}},{key:"updateRealNameApi",value:function e(t){var r=this;this.props.updateRealName({realName:t}).then(function(){r.setState(function(){return{realNameError:null}})}).catch(function(e){r.setState(function(){return{realNameError:e}})}).finally(function(){r.validateAndSaveStep()})}},{key:"checkPasswordComplexityApi",value:function e(t){var r=this;this.props.submitCheckPasswordComplexity({password:t}).then(function(){r.setState(function(){return{passwordError:null}})}).catch(function(e){var t=e.data;r.setState(function(){return{passwordError:t.error}})}).finally(function(){r.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,r=t.realName,a=t.realNameError,n=t.password,i=t.passwordError;var s=this.props.needsPasswordSet;var o=!s||n;return this.props.updateStep({validated:!!(r&&o&&!a&&!i),forceValidation:true})}},{key:"renderRealNameField",value:function e(){var t=this.state,r=t.realName,a=t.realNameError;var n=a?a.message:null;var i=a?a.name:null;var s=g()("realName_input",D()({"c-input_text--with_error":n,"p-onboarding__step__real_name_input--success":!n},i,n));var o=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;var l={name:"real_name",hintText:$.t("Your name will be displayed with messages you send."),id:"real_name",className:s,"data-qa":"tractor-real-name-input",value:r,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef};var c={text:$.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return p.a.createElement(z["a"],c,p.a.createElement(G["a"],M()({},l,o)))}},{key:"renderPasswordField",value:function e(){var t=this.state,r=t.password,a=t.passwordError;var n=g()("password_input",D()({"c-input_text--with_error":!!a,"p-onboarding__step__password_input--success":!a},a,!!a));var i={text:$.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"};var s={name:"password_field",hintText:$.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:n,onChange:this.onPasswordChange,value:r,type:"password"};var o="";a&&(o=U(a));var l=a?{errorText:o,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],i,p.a.createElement(G["a"],M()({},s,l)))}},{key:"renderGdprPref",value:function e(){var t=this.props.inEU;var r=this.props.gdpr;var a=this.state.gdpr;var n=p.a.createElement(z["a"],{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:$.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},p.a.createElement(V["a"],{id:"gdpr_field",checked:null===a?r:a,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange}));var i=p.a.createElement(H["a"],{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},p.a.createElement(K["a"],null,$.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),p.a.createElement(z["a"],{htmlFor:"gdpr_field_yes",text:$.t("Sure!"),cursor:"pointer",type:"inline"},p.a.createElement(W["a"],{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),p.a.createElement(z["a"],{htmlFor:"gdpr_field_no",text:$.t("No thanks"),cursor:"pointer",type:"inline"},p.a.createElement(W["a"],{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return t?i:n}},{key:"render",value:function e(){return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:this.props.imgUrl}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}]);return t}(d["Component"]);re.displayName="ProfileStep";re.defaultProps=Z;var ae=function e(t){return{realName:Object(_["getRealName"])(t),gdpr:Object(_["getGdprPref"])(t),inEU:Object(_["getInEurope"])(t),needsPasswordSet:Object(y["g"])(t,"needs_initial_password_set")}};var ne={updateRealName:_["updateRealName"],updateGdprPref:_["updateGdprPref"],updateStep:_["updateStep"],setStepCallback:_["setStepCallback"],submitCheckPasswordComplexity:F["d"]};var ie=Object(m["connect"])(ae,ne)(re);var se=r(4);var oe=r(187);var le=r(687);var ce={imgUrl:v["b"].string.isRequired,invites:v["b"].array,domainWhitelistingPref:v["b"].bool,workspaceName:v["b"].string,channelName:v["b"].string.isRequired,signupDomain:v["b"].string,onDialogFinish:v["b"].func,validateInvites:v["b"].func,sendInvites:v["b"].func,setDomainWhitelistingPref:v["b"].func,updateStep:v["b"].func,setStepCallback:v["b"].func,canWhitelistDomain:v["b"].bool,featureTractorSharedInviteLink:v["b"].bool,featureTractorBackupChannelnameCopy:v["b"].bool,sharedInviteLink:v["b"].string,fetchAndSetSharedInviteLink:v["b"].func};var ue={invites:[],workspaceName:"",domainWhitelistingPref:false,signupDomain:"",onDialogFinish:h["noop"],validateInvites:h["noop"],sendInvites:h["noop"],setDomainWhitelistingPref:h["noop"],updateStep:h["noop"],setStepCallback:h["noop"],canWhitelistDomain:false,featureTractorSharedInviteLink:true,featureTractorBackupChannelnameCopy:false,sharedInviteLink:"",fetchAndSetSharedInviteLink:h["noop"]};var de=new E["b"]("team_creation");var pe=Object(j["b"])();var ve="TEAM_CREATOR_ONBOARDING";var me=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props.invites;var i=a instanceof Array?a.join(", "):a;Object(f["a"])(r,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]);r.invitesInput=null;r.validateInvitesDebounced=Object(h["debounce"])(r.validateInvites,250);r.state={invites:i,invitesError:null,domainWhitelistingPref:false,toggleSharedInviteLink:false};return r}s()(t,[{key:"componentDidMount",value:function e(){this.invitesInput.focus();var t=this.props,r=t.sharedInviteLink,a=t.featureTractorSharedInviteLink;this.props.setStepCallback(this.onGo);a&&!r&&this.props.fetchAndSetSharedInviteLink();this.props.updateStep({validated:true})}},{key:"onInvitesChange",value:function e(t){var r=this;this.setState(function(){return{invites:t}},function(){r.validateInvitesDebounced(t)})}},{key:"onDomainWhitelistingCheckboxChange",value:function e(t){var r=this;var a=t.target.checked;this.setState(function(){return{domainWhitelistingPref:a}},function(){r.props.setDomainWhitelistingPref(a)})}},{key:"onGo",value:function e(){var t=this;this.props.sendInvites().then(function(){t.props.onDialogFinish().then(function(){t.props.updateStep({number:q["d"].completion})})}).catch(function(e){pe.info(ve,e);t.setState(function(){return{invitesError:e}})})}},{key:"setInvitesInputRef",value:function e(t){this.invitesInput=t}},{key:"validateInvites",value:function e(t){var r=this;this.props.validateInvites({invites:t}).then(function(){r.setState(function(){return{invitesError:null}})}).catch(function(e){r.setState(function(){return{invitesError:e}})})}},{key:"toggleSharedInviteLinkView",value:function e(){var t=this.state.toggleSharedInviteLink;this.setState(function(){return{toggleSharedInviteLink:!t}})}},{key:"renderInvitesInput",value:function e(){var t=this.state,r=t.invites,a=t.invitesError;var n=this.props,i=n.workspaceName,s=n.channelName,o=n.featureTractorBackupChannelnameCopy;var l=a?a.message:null;var c=a?a.name:null;var u=g()("invites_input",D()({"c-input_textarea--with_error":l,"p-onboarding__step__invites_input--success":!l},c,l));var d=void 0;d=o?s&&void 0!==s&&""!==s?de.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:i}):de.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:i}):de.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:i});var v={name:"invites_field",id:"invites_field",className:u,onChange:this.onInvitesChange,value:r,"data-qa":"tractor-invites-input",hintText:a?null:d,ref:this.setInvitesInputRef};var m={className:"margin_bottom_150",text:de.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"};var h=l?{errorText:l,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],m,p.a.createElement(le["a"],M()({},v,h)))}},{key:"renderDomainWhitelistingCheckbox",value:function e(){var t=this.props.signupDomain;var r=this.state.domainWhitelistingPref;var a=this.props.domainWhitelistingPref;return p.a.createElement(z["a"],{className:"margin_bottom_150 normal tractor_checkbox_label",text:de.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:t}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},p.a.createElement(V["a"],{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===r?a:r,onChange:this.onDomainWhitelistingCheckboxChange}))}},{key:"renderSharedInviteLink",value:function e(){if(!this.props.featureTractorSharedInviteLink)return null;var t=this.props.sharedInviteLink;var r=this.state.toggleSharedInviteLink;var a=de.t("invite link");var n=de.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:p.a.createElement(oe["a"],{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},a)});var i={text:n,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"};var s={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:de.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:t,onFocus:this.select};return p.a.createElement("div",{className:"margin_bottom_100"},!r&&p.a.createElement("span",null,n),r&&p.a.createElement(z["a"],i,p.a.createElement(G["a"],s)))}},{key:"render",value:function e(){return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:this.props.imgUrl}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}]);return t}(d["Component"]);me.displayName="InvitesStep";me.defaultProps=ue;var he=function e(t){return{invites:Object(_["getInvites"])(t),workspaceName:Object(_["getWorkspaceName"])(t),domainWhitelistingPref:Object(_["getDomainWhitelistingPref"])(t),channelName:Object(_["getChannelName"])(t),signupDomain:Object(_["getSignupDomain"])(t),canWhitelistDomain:Object(_["getCanWhitelistOwnerEmailDomain"])(t),featureTractorSharedInviteLink:Object(se["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(se["isFeatureEnabled"])(t,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(_["getSharedInviteLink"])(t)}};var fe={validateInvites:_["validateInvites"],sendInvites:_["sendInvites"],setDomainWhitelistingPref:_["setDomainWhitelistingPref"],fetchAndSetSharedInviteLink:_["fetchAndSetSharedInviteLink"],updateStep:_["updateStep"],setStepCallback:_["setStepCallback"]};var be=Object(m["connect"])(he,fe)(me);var ge={imgUrl:v["b"].string.isRequired,workspaceName:v["b"].string,workspaceDomain:v["b"].string,hasInvited:v["b"].bool,onDialogFinish:v["b"].func,updateWorkspaceName:v["b"].func,updateWorkspaceDomain:v["b"].func,updateStep:v["b"].func,setStepCallback:v["b"].func,fetchAndSetSharedInviteLink:v["b"].func,featureTractorSharedInviteLink:v["b"].bool};var _e={workspaceName:"",workspaceDomain:"",hasInvited:false,onDialogFinish:h["noop"],updateWorkspaceName:h["noop"],updateWorkspaceDomain:h["noop"],updateStep:h["noop"],setStepCallback:h["noop"],fetchAndSetSharedInviteLink:h["noop"],featureTractorSharedInviteLink:false};var ye=new E["b"]("team_creation");var Oe=Object(j["b"])();var ke="TEAM_CREATOR_ONBOARDING";var Ee=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.workspaceName,s=a.workspaceDomain;Object(f["a"])(r,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]);r.nameInput=null;r.updateWorkspaceNameDebounced=Object(h["debounce"])(r.updateWorkspaceNameApi,500);r.updateWorkspaceDomainDebounced=Object(h["debounce"])(r.updateWorkspaceDomainApi,500);r.state={workspaceName:i,workspaceNameError:null,workspaceDomain:s,workspaceDomainError:null};return r}s()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.props.updateStep({validated:true})}},{key:"onWorkspaceNameChange",value:function e(t){var r=this;this.setState(function(){return{workspaceName:t}},function(){r.updateWorkspaceNameDebounced(t)})}},{key:"onWorkspaceNameBlur",value:function e(){var t=this.props.workspaceName;var r=this.state.workspaceName;r||this.onWorkspaceNameChange(t)}},{key:"onWorkspaceDomainChange",value:function e(t){var r=this;this.setState(function(){return{workspaceDomain:t}},function(){r.updateWorkspaceDomainDebounced(t)})}},{key:"onGo",value:function e(){var t=this;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;t.props.hasInvited?t.props.onDialogFinish().then(function(){t.props.updateStep({number:q["d"].completion})}):t.props.updateStep({number:q["d"].invites})}).catch(function(e){Oe.info(ke,e)})}},{key:"setWorkspaceNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateWorkspaceNameApi",value:function e(t){var r=this;this.props.updateWorkspaceName({workspaceName:t}).then(function(){r.setState(function(){return{workspaceNameError:null}})}).catch(function(e){r.setState(function(){return{workspaceNameError:e}})}).finally(function(){r.validateAndSaveStep()})}},{key:"updateWorkspaceDomainApi",value:function e(t){var r=this;var a=this.props.featureTractorSharedInviteLink;this.props.updateWorkspaceDomain({workspaceDomain:t}).then(function(){r.setState(function(){return{workspaceDomainError:null}});a&&r.props.fetchAndSetSharedInviteLink()}).catch(function(e){r.setState(function(){return{workspaceDomainError:e}})}).finally(function(){r.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,r=t.workspaceDomain,a=t.workspaceNameError,n=t.workspaceDomainError;return this.props.updateStep({validated:!!(r&&!a&&!n),forceValidation:true})}},{key:"renderWorkspaceName",value:function e(){var t=this.state,r=t.workspaceName,a=t.workspaceNameError;var n=a?a.message:null;var i=a?a.name:null;var s=g()("workspaceName_input",D()({"c-input_text--with_error":n,"p-onboarding__step__workspace_name_input--success":!n},i,n));var o={className:"margin_bottom_150",text:ye.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"};var l={name:"workspace_name_field",id:"workspace_name_field",className:s,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:r,"data-qa":"tractor-workspace-name-input",hintText:ye.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef};var c=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],o,p.a.createElement(G["a"],M()({},l,c)))}},{key:"renderWorkspaceDomain",value:function e(){var t=this.state,r=t.workspaceDomain,a=t.workspaceDomainError;var n=a?a.message:null;var i=a?a.name:null;var s=g()("workspaceDomain_input",D()({"c-input_text--with_error":n,"p-onboarding__step__workspace_domain_input--success":!n},i,n));var o={text:ye.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"};var l={name:"workspace_domain_field",id:"workspace_domain_field",className:s,hintText:ye.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:r,suffix:".slack.com"};var c=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return p.a.createElement(z["a"],o,p.a.createElement(G["a"],M()({},l,c)))}},{key:"render",value:function e(){return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:this.props.imgUrl}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}]);return t}(d["Component"]);Ee.displayName="WorkspaceStep";Ee.defaultProps=_e;var je=function e(t){return{workspaceName:Object(_["getWorkspaceName"])(t),workspaceDomain:Object(_["getWorkspaceDomain"])(t),hasInvited:Object(y["g"])(t,"has_invited"),featureTractorSharedInviteLink:Object(se["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link")}};var Ce={updateWorkspaceName:_["updateWorkspaceName"],updateWorkspaceDomain:_["updateWorkspaceDomain"],fetchAndSetSharedInviteLink:_["fetchAndSetSharedInviteLink"],updateStep:_["updateStep"],setStepCallback:_["setStepCallback"]};var Se=Object(m["connect"])(je,Ce)(Ee);var we={imgUrl:v["b"].string.isRequired,invites:v["b"].array,channelName:v["b"].string.isRequired,updateStep:v["b"].func};var Ie={invites:[],updateStep:h["noop"]};var Te=new E["b"]("team_creation");var Ae=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.props.updateStep({validated:true})}},{key:"render",value:function e(){var t=this.props,r=t.imgUrl,a=t.invites,n=t.channelName;var i=n&&void 0!==n&&""!==n?a.length:0;var s=void 0;var o=void 0;switch(i){case 0:s=Te.t("Your Slack workspace is all set");o=Te.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:s=Te.t("Your invitation has been sent!");o=Te.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break;default:s=Te.t("Your {numInvites} invitations have been sent!",{numInvites:i});o=Te.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break}return p.a.createElement(d["Fragment"],null,p.a.createElement(J,{src:r}),p.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},p.a.createElement("h2",null,s),o))}}]);return t}(d["Component"]);Ae.displayName="CompletionStep";Ae.defaultProps=Ie;var Ne=function e(t){return{invites:Object(_["getInvites"])(t),channelName:Object(_["getChannelName"])(t)}};var Pe={updateStep:_["updateStep"]};var Re=Object(m["connect"])(Ne,Pe)(Ae);var Me=r(3209);var xe={invites:v["b"].array,modalTitle:v["b"].string,onClose:v["b"].func,stepCallback:v["b"].func,stepNumber:v["b"].number,isCurrentStepValid:v["b"].bool,isPromiseRunning:v["b"].bool,hasInvited:v["b"].bool,needsPasswordSet:v["b"].bool,clogger:v["b"].object.isRequired,fetchAndSetChannelInfo:v["b"].func,fetchAndSetWorkspace:v["b"].func,fetchAndSetSignupDetails:v["b"].func,setInitialMarketingPref:v["b"].func,setStepNumber:v["b"].func,updatePassword:v["b"].func,submitDomainWhitelistingPref:v["b"].func,completeWorkflowTask:v["b"].func,closeModal:v["b"].func};var De={invites:[],modalTitle:"",onClose:h["noop"],stepCallback:h["noop"],stepNumber:0,isCurrentStepValid:false,isPromiseRunning:false,hasInvited:false,needsPasswordSet:true,fetchAndSetChannelInfo:h["noop"],fetchAndSetWorkspace:h["noop"],fetchAndSetSignupDetails:h["noop"],setInitialMarketingPref:h["noop"],setStepNumber:h["noop"],updatePassword:h["noop"],submitDomainWhitelistingPref:h["noop"],completeWorkflowTask:h["noop"],closeModal:h["noop"]};var Fe=new E["b"]("team_creation");var Le=Object(j["b"])();var Be="TEAM_CREATOR_ONBOARDING";var Ue=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["a"])(r,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]);r.state={password:null};return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.fetchAndSetChannelInfo();this.props.fetchAndSetWorkspace();this.props.fetchAndSetSignupDetails();this.props.setInitialMarketingPref();this.preloadRemainingImages();Le.info(Be,"Onboarding dialog mounted.");var t=this.props.needsPasswordSet;t&&this.props.setStepNumber(0)}},{key:"onBack",value:function e(){var t=this.props,r=t.stepNumber,a=t.clogger;var n=void 0;n=r>0?r-1:q["c"]-1;a.track(S["l"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][r],action:"BACK"}}});this.props.setStepNumber(n)}},{key:"onGo",value:function e(){var t=this.props,r=t.stepCallback,a=t.isCurrentStepValid,n=t.clogger,i=t.stepNumber;a&&r();n.track(S["l"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][i],action:"CLICK"}}})}},{key:"onClose",value:function e(){var t=this.props,r=t.clogger,a=t.stepNumber;r.track(S["l"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][a],action:"CLOSE"}}});Object(k["a"])()?this.props.closeModal():this.props.onClose()}},{key:"onPasswordSet",value:function e(t){this.setState(function(){return{password:t}})}},{key:"onDialogFinish",value:function e(){var t=this;var r=this.state.password;var a=void 0;a=this.props.needsPasswordSet?this.props.updatePassword({password:r}):Promise.resolve();var n=this.props.submitDomainWhitelistingPref();return Promise.all([a,n]).then(function(){return t.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})}).catch(function(e){Le.info(Be,e)})}},{key:"getGoButtonText",value:function e(){var t=this.props,r=t.stepNumber,a=t.invites,n=t.hasInvited;var i=a?a.length:0;switch(r){case 1:return n?Fe.t("Finish"):Fe.t("Next");case 2:return i>=1?Fe.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:i,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):Fe.t("Finish");case 3:if(0===i)return Fe.t("Explore Slack");return Fe.t("Start the Conversation");default:return Fe.t("Next")}}},{key:"getFooterText",value:function e(){var t=this.props,r=t.stepNumber,a=t.hasInvited;if(r>=q["c"])return null;var n=r+1;var i=a?2:3;return Fe.t("Step {stepNumber} of {totalSteps}",{stepNumber:n,totalSteps:i})}},{key:"preloadRemainingImages",value:function e(){Object(h["map"])(q["b"],function(e,t){if("profile"===t)return null;var r=new Image;var a=new Image;r.src=e;a.src=e.replace(".png","@2x.png");return null})}},{key:"shouldShowBackButton",value:function e(t){if(t===q["d"].profile||t===q["d"].completion)return false;return true}},{key:"render",value:function e(){var t=this.props,r=t.modalTitle,a=t.stepNumber,n=t.isCurrentStepValid,i=t.isPromiseRunning;var s=g()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===a});return p.a.createElement(d["Fragment"],null,p.a.createElement(w["a"],{showGoButton:true,showCloseButton:true,showHeader:true,shouldCloseOnCancel:false,shouldCloseOnGo:a===q["d"].completion,truncateTitle:false,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(a),goButtonIsDisabled:!n,goButtonIsPending:i,goButtonText:this.getGoButtonText(),title:r,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:Fe.t("Back"),id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:s,bodyClassName:"p-team_creator_onboarding_dialog__body"},p.a.createElement(P,{step:0,currentStep:a,title:Fe.t("Set your name and password")},p.a.createElement(ie,{imgUrl:q["b"].profile,onPasswordSet:this.onPasswordSet})),p.a.createElement(P,{step:1,currentStep:a,title:Fe.t("Review your team\u2019s details")},p.a.createElement(Se,{imgUrl:q["b"].workspace,onDialogFinish:this.onDialogFinish})),p.a.createElement(P,{step:2,currentStep:a,title:Fe.t("Add people to your Slack workspace")},p.a.createElement("div",null),p.a.createElement(be,{imgUrl:q["b"].invites,onDialogFinish:this.onDialogFinish})),p.a.createElement(P,{step:3,currentStep:a},p.a.createElement("div",null),p.a.createElement(Re,{imgUrl:q["b"].completion}))))}}]);return t}(p.a.Component);Ue.displayName="TeamCreatorOnboardingDialog";Ue.defaultProps=De;var qe=function e(t){return{hasInvited:Object(y["g"])(t,"has_invited"),needsPasswordSet:Object(y["g"])(t,"needs_initial_password_set"),stepNumber:Object(_["getStepNumber"])(t),modalTitle:Object(_["getModalTitle"])(t),stepCallback:Object(_["getStepCallback"])(t),isCurrentStepValid:Object(_["getCurrentStepValidity"])(t),isPromiseRunning:Object(_["getIsPromiseRunning"])(t),invites:Object(_["getInvites"])(t),clogger:Object(C["a"])({state:t})}};var Ge={fetchAndSetChannelInfo:_["fetchAndSetChannelInfo"],fetchAndSetWorkspace:_["fetchAndSetWorkspace"],fetchAndSetSignupDetails:_["fetchAndSetSignupDetails"],setInitialMarketingPref:_["setInitialMarketingPref"],setStepNumber:_["setStepNumber"],updatePassword:_["updatePassword"],submitDomainWhitelistingPref:_["submitDomainWhitelistingPref"],completeWorkflowTask:_["completeWorkflowTask"],closeModal:O["closeModal"]};var He=t["a"]=Object(m["connect"])(qe,Ge)(Ue)},,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(22);var o=r(138);var l=r(10);var c=r(2281);var u=r.n(c);var d=new l["b"]("offline_mode");function p(e){var t=e.featureOfflineMode,r=e.caption;if(!t)return null;return n.a.createElement("div",{className:"p-inline_offline_indicator"},n.a.createElement("span",null,n.a.createElement(s["b"],{type:"cloud-offline-small",size:"inherit"})," ",n.a.createElement("strong",null,d.t("No connection."))," ",r||d.t("Go online to load more messages.")))}p.displayName="InlineOfflineIndicator";p.defaultProps={caption:void 0};t["a"]=Object(o["a"])("feature_offline_mode")(p)},function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(0);var s=r(22);var o=r(138);var l=r(10);var c=r(2281);var u=r.n(c);var d=new l["b"]("offline_mode");function p(e){var t=e.featureOfflineMode,r=e.caption;if(!t)return null;return n.a.createElement("div",{className:"p-large_offline_indicator"},n.a.createElement("p",{className:"p-large_offline_indicator__headline"},n.a.createElement(s["b"],{type:"cloud-offline-small",size:"inherit"})," ",d.t("No connection")),n.a.createElement("p",{className:"p-large_offline_indicator__caption"},r||d.t("Go online to get the latest messages.")))}p.displayName="LargeOfflineIndicator";p.defaultProps={caption:void 0};t["a"]=Object(o["a"])("feature_offline_mode")(p)},function(e,t,r){},,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(356);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(2);var _=r(10);var y=r(24);var O=r(35);var k=r(4);var E=r(17);var j=r(31);var C=r(535);var S=r(270);var w=r(28);var I=r(22);var T=r(223);function A(e){return!!Object(g["has"])(e,"activeCall")}var N=r(197);var P=r(1209);var R=r(457);var M=r(3142);var x=new _["b"]("incoming_call_window");var D=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"componentDidMount",value:function e(){Object(P["a"])(R["g"],{loop:true})}},{key:"componentWillUnmount",value:function e(){Object(P["b"])(R["g"])}},{key:"getSrcSetAttribute",value:function e(t){if(!t)return"";return t+" 2x"}},{key:"maybeRenderGuestBadge",value:function e(){if(this.props.isUltraRestricted)return n.a.createElement(I["b"],{type:"single-channel-guest",inline:true});if(this.props.isRestricted)return n.a.createElement(I["b"],{type:"restricted-user",inline:true});return null}},{key:"renderUserImage",value:function e(){var t=this.props.avatarUrls,r=t.imageUrl,a=t.imageUrl2x;if(r||a)return n.a.createElement("img",{className:"p-incoming_call__member_image",src:r||a,srcSet:this.getSrcSetAttribute(a),alt:""});return null}},{key:"renderExternalTeamLabel",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__external_team_banner"},n.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),n.a.createElement(S["b"],{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},n.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function e(){var t=this.props.featureSpockCalls?x.t("is calling you"):"";return n.a.createElement("div",{className:"p-incoming_call__user_caption"},t)}},{key:"renderCallButtons",value:function e(){var t=this;return n.a.createElement("div",{className:"p-incoming_call__button_container"},n.a.createElement(w["d"],{type:"danger",size:"medium",onClick:function e(){return t.props.onRejectCall(t.props.callId)},className:"p-incoming_call__button","aria-label":"Decline"},n.a.createElement(I["b"],{type:"times"})),n.a.createElement(w["d"],{type:"primary",size:"medium",onClick:function e(){return t.props.onAcceptCall(t.props.callId)},className:"p-incoming_call__button","aria-label":"Accept"},n.a.createElement(I["b"],{type:"phone"})))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),n.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}]);return t}(a["PureComponent"]);D.displayName="IncomingCall";function F(e,t){if(A(e))return e.activeCall.incomingInviterUserId;var r=Object(N["b"])(e,t).incomingInvite;if(!r){Object(T["d"])("No incoming invite");return}return r.userId}var L=function e(t,r){var a=F(t,r.callId);if(!a)throw new Error("No inviter user id for callId: "+r.callId);var n=Object(y["d"])(t,a);var i=Object(E["getMemberTeamId"])(n);var s=Object(O["j"])(t,i);var o=Object(E["isExternal"])(n);var l=Object(E["getPrefCompliantMemberName"])(t,n);var c=Object(j["getTeamDisplayName"])(s);var u=Object(g["get"])(n,"profile.avatar_hash");var d=Object(C["a"])({size:200,teamId:i,memberId:a,avatarHash:u});return{avatarUrls:d,prefCompliantMemberName:l,memberTeamId:i,externalTeamName:c,isRestricted:Object(E["isRestricted"])(n),isUltraRestricted:Object(E["isUltraRestricted"])(n),isExternal:o,featureSpockCalls:Object(k["isFeatureEnabled"])(t,"feature_spock_calls")}};var B={mapStateToProps:L};Object.defineProperty(B,"mapStateToProps",{get:function e(){return L},set:function e(t){L=t}});var U=Object(i["connect"])(L)(D);var q=r(704);var G=r(12);var H=r(3144);var W=r(480);var V=r(149);var K=r(160);var z=r(26);var Q=r.n(z);var Y=r(5);var J=r.n(Y);var X=r(3);var Z=r.n(X);var $=r(207);var ee=["#FFE0E0","#DBEB8D","#B5E0FF","#FFE5B2","#BDE595","#D4D5FF","#F9EF6E","#D0F2ED","#FFCCFF"];var te=function(){function e(){d()(this,e);this.startIndex=Math.floor(Math.random()*(ee.length-1))}v()(e,[{key:"getSelfColor",value:function e(){return ee[this.startIndex]}},{key:"getColorForJoinIndex",value:function e(t){return ee[(this.startIndex+1+t)%ee.length]}}]);return e}();var re=r(29);var ae=r(395);var ne=Object(K["b"])("Sends an invite to the web API from the call window",function(e,t,r){var a=r.id,n=r.invitedUserIds;Object(T["d"])(Object(ae["a"])(),"We expect this to run in a call window context");return Promise.all([n.map(function(t){return e(Object(re["a"])({method:"screenhero.rooms.invite",reason:"calls-invite",args:{responder:t,room:a,should_share:true,cancelable:true}}))})])});var ie=r(1420);var se=Object(K["a"])("Update part or all of the call");var oe=Object(K["a"])("Update the active call token");var le=Object(K["a"])("Update the elapsed call time");var ce=Object(K["a"])("Store gleaned contextual information from the url");var ue=Object(K["c"])({},{hasJoined:false,elapsedDisplayTime:Object(ie["a"])(0)},{persistenceEnabled:false}).on(ce,function(e,t){var r=t.callOrConversationId,a=t.inviterUserId;var n=Object(V["h"])(r);return Z()({},e,{id:n?r:void 0,conversationId:n?void 0:r,incomingInviterUserId:a,incomingInviteResponse:Object(q["a"])()?void 0:V["c"].Accept})}).on(se,function(e,t){return Z()({},e,t)}).on(le,function(e){if(!e.callStartedTimestamp)return e;return Z()({},e,{elapsedDisplayTime:Object(ie["a"])(Date.now()-1e3*e.callStartedTimestamp)})}).on(oe,function(e,t){var r=t.token,a=t.tokenExpiry;if(!e.server){Object(T["d"])("Cannot set server token without a server");return e}return Z()({},e,{server:Z()({},e.server,{token:r,tokenExpiry:a})})});var de=ue;var pe=function e(t){return!!t.activeCall.incomingInviterUserId&&!t.activeCall.incomingInviteResponse};var ve=function e(t){return!!t.activeCall.incomingInviterUserId};var me=function e(t){return!!t.activeCall.conversationId&&Object(V["i"])(t.activeCall.conversationId)};var he=function e(t){return t.activeCall.conversationId};var fe=function e(t){return t.activeCall.id};var be=new te;function ge(e,t){return"Could not "+t+": problem with peerId "+e+"."}function _e(e){return"self"===e.id}function ye(e){return _e(e)}function Oe(e){return _e(e)}var ke=Object(K["a"])("Add a remote peer");var Ee=Object(K["a"])("Remove a remote peer");var je=Object(K["a"])("Update a peer");var Ce=Object(K["a"])("Add an invited user");var Se=Object(K["a"])("Update a response for an invited user");var we=Object(K["a"])("Remove an invited user");var Ie=Object(K["a"])("Update a peer's connection");var Te=Object(K["a"])("Update the screen share of a peer");var Ae=Object(K["a"])("Set the ID of the peer selected by the user");var Ne=Object(K["a"])("Set the ID of the peer selected by the user");var Pe=Object(K["a"])("Set the ID of the active speaker");var Re=Object(K["a"])("Add an emoji reaction");var Me=Object(K["a"])("Remove an emoji reaction");var xe=Object(K["a"])("Send an emoji reaction");var De={self:{id:"self",isMicrophoneEnabled:true,isDrawEnabled:true,reactionColor:be.getSelfColor(),drawHue:Math.floor(360*Math.random())},invitedUsers:{},byId:{},leftById:{},reacjis:[],reacjiShownCounter:0,remotePeerJoinedCounter:0};var Fe=Object(K["c"])({},De,{persistenceEnabled:false}).on(ke,function(e,t){Object(T["d"])(!e.byId[t.id],ge(t.id,"addRemotePeer"));var r=e.remotePeerJoinedCounter;return Z()({},e,{remotePeerJoinedCounter:e.remotePeerJoinedCounter+1,lastRemoteScreensharePeerId:vt(e,t),byId:Z()({},e.byId,J()({},t.id,Z()({},t,{joinIndex:r,reactionColor:be.getColorForJoinIndex(r)})))},e.invitedUsers[t.userId]?{invitedUsers:Z()({},e.invitedUsers,J()({},t.userId,Z()({},e.invitedUsers[t.userId],{isExpired:true})))}:null)}).on(Ee,function(e,t){var r=e.byId[t];Object(T["d"])(!!r,"Peer should exist in order to remove");return Z()({},e,{speakingPeerId:e.speakingPeerId===t?void 0:e.speakingPeerId,userSelectedPeerId:e.userSelectedPeerId===t?void 0:e.userSelectedPeerId,lastRemoteScreensharePeerId:e.lastRemoteScreensharePeerId===t?void 0:e.lastRemoteScreensharePeerId,byId:Z()({},Object(g["omit"])(e.byId,t)),leftById:Z()({},e.leftById,J()({},r.id,Z()({},r)))})}).on(Ce,function(e,t){var r=t.userId,a=t.isCancelable,n=void 0===a||a;return Z()({},e,{invitedUsers:Z()({},e.invitedUsers,J()({},r,{response:"pending",isCancelable:n,isExpired:false}))})}).on(Se,function(e,t){var r=t.userId,a=t.response;return Z()({},e,{invitedUsers:Z()({},e.invitedUsers,J()({},r,Z()({},e.invitedUsers[r],{response:a})))})}).on(we,function(e,t){return Z()({},e,{invitedUsers:Z()({},e.invitedUsers,J()({},t,Z()({},e.invitedUsers[t],{isExpired:true})))})}).on(je,function(e,t){if(ye(t))return Z()({},e,{self:Z()({},e.self,t,!Object(g["isUndefined"])(t.isScreenshareEnabled)&&{isHostDrawEnabled:false})});Object(T["d"])(!!e.byId[t.id],ge(t.id,"updatePeer"));return Z()({},e,{byId:Z()({},e.byId,J()({},t.id,Z()({},e.byId[t.id],t)))})}).on(Te,function(e,t){Object(T["d"])(!!e.byId[t.id],ge(t.id,"setRemotePeerScreenshare"));return Z()({},e,{lastRemoteScreensharePeerId:vt(e,t),byId:Z()({},e.byId,J()({},t.id,Z()({},e.byId[t.id],t)))})}).on(Ie,function(e,t){var r=t.id,a=t.isConnected;Object(T["d"])(!!e.byId[r],ge(r,"setRemotePeerIsConnected"));return Z()({},e,!a&&{lastRemoteScreensharePeerId:vt(e,{id:r,isScreenshareEnabled:false})},{byId:Z()({},e.byId,J()({},r,Z()({},e.byId[r],{isConnected:a},!a&&{isCameraEnabled:false,isScreenshareEnabled:false})))})}).on(Ae,function(e,t){"self"!==t&&Object(T["d"])(!!e.byId[t],ge(t,"setUserSelectedPeerId"));return Z()({},e,{userSelectedPeerId:t})}).on(Ne,function(e){return Z()({},e,{userSelectedPeerId:void 0})}).on(Pe,function(e,t){Object(T["d"])(!!e.byId[t],ge(t,"setSpeakingPeerId"));return Z()({},e,{speakingPeerId:t})}).on(Re,function(e,t){var r=e.reacjiShownCounter+1;return Z()({},e,{reacjiShownCounter:r,reacjis:[{peerId:t.peerId,emoji:t.emoji,id:r,isEmoji:t.isEmoji}].concat(Q()(e.reacjis))})}).on(Me,function(e,t){var r=e.reacjis.filter(function(e){return e.id!==t});return Z()({},e,{reacjis:r})});var Le=Fe;var Be=Object(K["d"])(function(e,t){var r=e.peers;if("self"===t)return r.self;var a=r.byId[t];Object(T["d"])(!!a,ge(t,"getPeer"));return a});var Ue=Object(K["d"])(function(e,t){var r=e.peers.byId[t];Object(T["d"])(!!r,ge(t,"getPeer"));return r});var qe=Object(K["d"])(function(e){return e.peers.self});var Ge=Object(K["d"])(function(e,t){if("self"===t)return e.peers.self;return He(e,t)});var He=Object(K["d"])(function(e,t){var r=e.peers;var a=r.byId[t];var n=r.leftById[t];Object(T["d"])(!!a||!!n,"No record of peer ever existing with id: "+t);return a||n});var We=Object(K["d"])(function(e){return e.peers.leftById});var Ve=Object(K["d"])(function(e){return e.peers.invitedUsers});var Ke=Object($["createSelector"])(Ve,function(e){return Object(g["pickBy"])(e,function(e){var t=e.isExpired;return!t})});var ze=Object($["createSelector"])(Ve,function(e){return Object.keys(e)});var Qe=Object($["createSelector"])(Ke,function(e){return Object.keys(e)});var Ye=Object(K["d"])(function(e){return e.peers.byId});var Je=Object($["createSelector"])(Ye,function(e){return Object(g["map"])(e,"userId")});var Xe=Object($["createSelector"])(Ye,function(e){return Object(g["orderBy"])(e,"joinIndex","desc")});var Ze=Object($["createSelector"])(Xe,function(e){return Object(g["map"])(e,"id")});var $e=Object($["createSelector"])(Xe,function(e){return Object(g["map"])(e,"userId")});var et=Object(K["d"])(function(e){return!!Object.keys(e.peers.byId).length||!!Object.keys(e.peers.leftById).length});var tt=Object($["createSelector"])(Ye,function(e){return Object(g["some"])(e,function(e){var t=e.isScreenshareEnabled;return!!t})});var rt=Object($["createSelector"])(Ke,function(e){return Object(g["reduce"])(e,function(e,t,r){var a=t.response,n=t.isExpired;("pending"===a||a===V["c"].Accept&&!n)&&e.push(r);return e},[])});var at=Object($["createSelector"])(Ke,function(e){return Object(g["filter"])(e,function(e){var t=e.isCancelable;return t})});var nt=Object($["createSelector"])(Ve,Ye,We,he,function(e,t,r,a){return!Object(g["size"])(t)&&!Object(g["size"])(r)&&Object(g["size"])(e)&&!!a&&!Object(V["j"])(a)&&Object(g["every"])(e,function(e){return"pending"!==e.response&&e.response!==V["c"].Accept})});var it=Object(K["d"])(function(e){return ct(e)||e.peers.lastRemoteScreensharePeerId||e.peers.speakingPeerId||Number(Object.keys(e.peers.byId)[0])});var st=Object($["createSelector"])(rt,function(e){return e[0]});var ot=Object(K["d"])(function(e){var t=it(e);if(!t)return false;return!!Be(e,t).isScreenshareEnabled});var lt=Object(K["d"])(function(e){var t=it(e);if(!t)return false;return!!Be(e,t).isCameraEnabled});var ct=Object(K["d"])(function(e){return e.peers.userSelectedPeerId});var ut=Object(K["d"])(function(e){var t=qe(e);if(!t.isScreenshareEnabled||!t.screens)return;return t.screens[t.thumbnailIndex||0]});var dt=Object(K["d"])(function(e){return e.peers.reacjis});var pt=Object(K["d"])(function(e,t){return Object(E["getPrefCompliantMemberNameById"])(e,He(e,t).userId)});function vt(e,t){var r=t.isScreenshareEnabled;if(e.lastRemoteScreensharePeerId===t.id&&!r)return;return r&&t.id||e.lastRemoteScreensharePeerId}var mt=Object(K["e"])("Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share",function(e,t,r){var a=r.id,n=r.isScreenshareEnabled;e(Te({id:a,isScreenshareEnabled:n}));n&&e(je({id:"self",isScreenshareEnabled:false}))});var ht=Object(K["e"])("Invite new members to an existing call",function(e,t,r){var a=t();if(!Object(T["b"])(a.activeCall.id,"Must have an active call to send an invite"))return;r.forEach(function(t){return e(Ce({userId:t}))});e(ne({id:a.activeCall.id,invitedUserIds:r}))});var ft=new _["b"]("calls");var bt=Object(K["d"])(function(e){var t=e.activeCall.incomingInviterUserId&&Object(E["getPrefCompliantMemberNameById"])(e,e.activeCall.incomingInviterUserId);var r=e.activeCall.name;var a=he(e);var n=e.activeCall.hasJoined;var i=$e(e);var s=i.length;var o=pe(e);var l=ze(e);if(r&&n)return r;if(o)return ft.t("{inviterName} is calling you",{inviterName:t});if(a&&!s&&l.length){var c=Object(E["getPrefCompliantMemberNameById"])(e,l[0]);var u=l.length-1;if(l.length>1)return ft.t("Calling {namedInvitedUser} and {remainingInvitedUserCount,plural,=1{# other person}other{# other people}}",{namedInvitedUser:c,remainingInvitedUserCount:u,fallbackHash:"1f193c850fe96a988a352bb5c38247343e49f235"});return ft.t("Calling {namedInvitedUser}",{namedInvitedUser:c})}if(!s)return ft.t("Slack call, waiting for others to join");var d=Object(E["getPrefCompliantMemberNameById"])(e,i[0]);var p=i.length-1;if(i.length>1)return ft.t("Slack call with {namedPeer} and {remainingJoinedPeers,plural,=1{# other person}other{# other people}}",{namedPeer:d,remainingJoinedPeers:p,fallbackHash:"6f6600f1cf4eef0e7f75926baabfc8baf445c5c8"});return ft.t("Slack call with {namedPeer}",{namedPeer:d})});var gt=Object(K["d"])(function(e){var t=Object(N["c"])(e);var r=t&&t.incomingInvite&&Object(E["getPrefCompliantMemberNameById"])(e,t.incomingInvite.userId);return r?ft.t("{inviterName} is calling you",{inviterName:r}):ft.t("Incoming call")});var _t=function e(t){var r=t.invitingCall,a=t.onAcceptCall,i=t.onRejectCall,s=t.callTitle;Object(q["a"])()&&Object(G["b"])().error("BrowserIncomingCall should only be instantiated in a browser.");if(!r)return null;var o={content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}};return n.a.createElement(c.a,{isOpen:true,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:true,shouldReturnFocusAfterClose:true,style:o,contentLabel:s},n.a.createElement("div",{className:"p-browser_incoming_call"},n.a.createElement(U,{callId:r,onAcceptCall:a,onRejectCall:i})))};var yt=function e(t){var r=Object(N["c"])(t);var a=gt(t);return{invitingCall:r&&r.id,callTitle:a}};var Ot=function e(t){return{onAcceptCall:function e(r){return t(Object(W["a"])(r))},onRejectCall:function e(r){return t(Object(W["b"])({id:r,response:V["c"].Reject}))}}};var kt=Object(i["connect"])(yt,Ot)(_t);var Et=r(163);var jt=function e(t,r){if(!t)throw new Error("mountIncomingCall must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(Et["a"],null,n.a.createElement(kt,null))),r)};var Ct=jt;var St=r(44);Object(St["a"])("interop.mountBrowserIncomingCall",Ct)},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(119);var d=r(27);var p=r(2226);var v=r(163);var m=function e(t,r,a){if(!t)throw new Error("mountWorkspaceDirectory must be called with a teamId parameter");var i=Object(d["d"])(t);var o=n()({},a,{onClose:function e(){return l.a.unmountComponentAtNode(r)}});Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(v["a"],null,s.a.createElement(p["b"],o))),r)};var h=function e(t){l.a.unmountComponentAtNode(t)};var f={mountWorkspaceDirectory:m,unmountWorkspaceDirectory:h};var b=r(44);Object(b["a"])("interop.mountWorkspaceDirectory",m);Object(b["a"])("interop.unmountWorkspaceDirectory",h)},,,,,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){var a,i;(function(){var r=false;var s=this;var o=function(e){if(e instanceof o)return e;if(!(this instanceof o))return new o(e);this.EXIFwrapped=e};true;(true,e.exports)&&(t=e.exports=o);t.EXIF=o;var l=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};var c=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var u=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};var d=o.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"};var p=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function v(e,t,r){e.addEventListener?e.addEventListener(t,r,false):e.attachEvent&&e.attachEvent("on"+t,r)}function m(e){return!!e.exifdata}function h(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"";e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");var r=atob(e);var a=r.length;var n=new ArrayBuffer(a);var i=new Uint8Array(n);for(var s=0;s<a;s++)i[s]=r.charCodeAt(s);return n}function f(e,t){var r=new XMLHttpRequest;r.open("GET",e,true);r.responseType="blob";r.onload=function(e){200!=this.status&&0!==this.status||t(this.response)};r.send()}function b(e,t){function a(r){var a=g(r);e.exifdata=a||{};var n=_(r);e.iptcdata=n||{};if(o.isXmpEnabled){var i=I(r);e.xmpdata=i||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=h(e.src);a(n)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){a(e.target.result)};f(e.src,function(e){i.readAsArrayBuffer(e)})}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";a(s.response);s=null};s.open("GET",e.src,true);s.responseType="arraybuffer";s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){r&&console.log("Got file of length "+e.target.result.byteLength);a(e.target.result)};i.readAsArrayBuffer(e)}}function g(e){var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength,i;while(a<n){if(255!=t.getUint8(a)){r&&console.log("Not a valid marker at offset "+a+", found: "+t.getUint8(a));return false}i=t.getUint8(a+1);r&&console.log(i);if(225==i){r&&console.log("Found 0xFFE1 marker");return w(t,a+4,t.getUint16(a+2)-2)}a+=2+t.getUint16(a+2)}}function _(e){var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength;var i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(a<n){if(i(t,a)){var s=t.getUint8(a+7);s%2!==0&&(s+=1);0===s&&(s=4);var o=a+8+s;var l=t.getUint16(a+6+s);return O(e,o,l)}a++}}var y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function O(e,t,r){var a=new DataView(e);var n={};var i,s,o,l,c;var u=t;while(u<t+r){if(28===a.getUint8(u)&&2===a.getUint8(u+1)){l=a.getUint8(u+2);if(l in y){o=a.getInt16(u+3);c=o+5;s=y[l];i=S(a,u+5,o);n.hasOwnProperty(s)?n[s]instanceof Array?n[s].push(i):n[s]=[n[s],i]:n[s]=i}}u++}return n}function k(e,t,a,n,i){var s=e.getUint16(a,!i),o={},l,c,u;for(u=0;u<s;u++){l=a+12*u+2;c=n[e.getUint16(l,!i)];!c&&r&&console.log("Unknown tag: "+e.getUint16(l,!i));o[c]=E(e,l,t,a,i)}return o}function E(e,t,r,a,n){var i=e.getUint16(t+2,!n),s=e.getUint32(t+4,!n),o=e.getUint32(t+8,!n)+r,l,c,u,d,p,v;switch(i){case 1:case 7:if(1==s)return e.getUint8(t+8,!n);l=s>4?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint8(l+d);return c;case 2:l=s>4?o:t+8;return S(e,l,s-1);case 3:if(1==s)return e.getUint16(t+8,!n);l=s>2?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint16(l+2*d,!n);return c;case 4:if(1==s)return e.getUint32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getUint32(o+4*d,!n);return c;case 5:if(1==s){p=e.getUint32(o,!n);v=e.getUint32(o+4,!n);u=new Number(p/v);u.numerator=p;u.denominator=v;return u}c=[];for(d=0;d<s;d++){p=e.getUint32(o+8*d,!n);v=e.getUint32(o+4+8*d,!n);c[d]=new Number(p/v);c[d].numerator=p;c[d].denominator=v}return c;case 9:if(1==s)return e.getInt32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+4*d,!n);return c;case 10:if(1==s)return e.getInt32(o,!n)/e.getInt32(o+4,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+8*d,!n)/e.getInt32(o+4+8*d,!n);return c}}function j(e,t,r){var a=e.getUint16(t,!r);return e.getUint32(t+2+12*a,!r)}function C(e,t,r,a){var n=j(e,t+r,a);if(!n)return{};if(n>e.byteLength)return{};var i=k(e,t,t+n,d,a);if(i["Compression"])switch(i["Compression"]){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var s=t+i.JpegIFOffset;var o=i.JpegIFByteCount;i["blob"]=new Blob([new Uint8Array(e.buffer,s,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i["Compression"])}else 2==i["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}function S(e,t,r){var a="";for(n=t;n<t+r;n++)a+=String.fromCharCode(e.getUint8(n));return a}function w(e,t){if("Exif"!=S(e,t,4)){r&&console.log("Not valid EXIF data! "+S(e,t,4));return false}var a,n,i,s,o,d=t+6;if(18761==e.getUint16(d))a=false;else{if(19789!=e.getUint16(d)){r&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false}a=true}if(42!=e.getUint16(d+2,!a)){r&&console.log("Not valid TIFF data! (no 0x002A)");return false}var v=e.getUint32(d+4,!a);if(v<8){r&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!a));return false}n=k(e,d,d+v,c,a);if(n.ExifIFDPointer){s=k(e,d,d+n.ExifIFDPointer,l,a);for(i in s){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[i]=p[i][s[i]];break;case"ExifVersion":case"FlashpixVersion":s[i]=String.fromCharCode(s[i][0],s[i][1],s[i][2],s[i][3]);break;case"ComponentsConfiguration":s[i]=p.Components[s[i][0]]+p.Components[s[i][1]]+p.Components[s[i][2]]+p.Components[s[i][3]];break}n[i]=s[i]}}if(n.GPSInfoIFDPointer){o=k(e,d,d+n.GPSInfoIFDPointer,u,a);for(i in o){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3];break}n[i]=o[i]}}n["thumbnail"]=C(e,d,v,a);return n}function I(e){if(!("DOMParser"in self))return;var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength,i=new DOMParser;while(a<n-4){if("http"==S(t,a,4)){var s=a-1;var o=t.getUint16(a-2)-1;var l=S(t,s,o);var c=l.indexOf("xmpmeta>")+8;l=l.substring(l.indexOf("<x:xmpmeta"),c);var u=l.indexOf("x:xmpmeta")+10;l=l.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(u);var d=i.parseFromString(l,"text/xml");return A(d)}a++}}function T(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var r=0;r<e.attributes.length;r++){var a=e.attributes.item(r);t["@attributes"][a.nodeName]=a.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes.item(n);var s=i.nodeName;if(null==t[s])t[s]=T(i);else{if(null==t[s].push){var o=t[s];t[s]=[];t[s].push(o)}t[s].push(T(i))}}return t}function A(e){try{var t={};if(e.children.length>0)for(var r=0;r<e.children.length;r++){var a=e.children.item(r);var n=a.attributes;for(var i in n){var s=n[i];var o=s.nodeName;var l=s.nodeValue;void 0!==o&&(t[o]=l)}var c=a.nodeName;if("undefined"==typeof t[c])t[c]=T(a);else{if("undefined"==typeof t[c].push){var u=t[c];t[c]=[];t[c].push(u)}t[c].push(T(a))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}o.enableXmp=function(){o.isXmpEnabled=true};o.disableXmp=function(){o.isXmpEnabled=false};o.getData=function(e,t){if((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)return false;m(e)?t&&t.call(e):b(e,t);return true};o.getTag=function(e,t){if(!m(e))return;return e.exifdata[t]};o.getIptcTag=function(e,t){if(!m(e))return;return e.iptcdata[t]};o.getAllTags=function(e){if(!m(e))return{};var t,r=e.exifdata,a={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a};o.getAllIptcTags=function(e){if(!m(e))return{};var t,r=e.iptcdata,a={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a};o.pretty=function(e){if(!m(e))return"";var t,r=e.exifdata,a="";for(t in r)r.hasOwnProperty(t)&&("object"==typeof r[t]?r[t]instanceof Number?a+=t+" : "+r[t]+" ["+r[t].numerator+"/"+r[t].denominator+"]\r\n":a+=t+" : ["+r[t].length+" values]\r\n":a+=t+" : "+r[t]+"\r\n");return a};o.readFromBinaryFile=function(e){return g(e)};true;!(a=[],i=function(){return o}.apply(t,a),void 0!==i&&(e.exports=i))}).call(this)},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(150);var s=r(2248);var o=r(44);Object(o["a"])("interop.mountDownloadBlockedToast",function(){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"])}))})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var a={"./actions.js":4417,"./activity-session.js":3996,"./add-app-to-channel.js":3019,"./add-ephemeral-feedback.js":3020,"./all-unreads.js":4183,"./api-unauthed.js":3021,"./api.js":3978,"./app-actions.js":3022,"./apps.js":3023,"./automount.js":3024,"./bots.js":3025,"./calls.js":3026,"./channels.js":3027,"./connectivity.js":3028,"./console.js":3029,"./constants.js":3030,"./emoji.js":3031,"./emojiComponent.js":3032,"./enterprise/enterprise-analytics-util.js":3971,"./enterprise/mount-create-workspace-modal.jsx":3966,"./enterprise/mount-dashboard-analytics-apps.jsx":3036,"./enterprise/mount-dashboard-app-management.jsx":3923,"./enterprise/mount-dashboard-audit-logs.jsx":2267,"./enterprise/mount-dashboard-billing-overview.jsx":3970,"./enterprise/mount-dashboard-ekm-status.jsx":3965,"./enterprise/mount-dashboard-nav.jsx":3938,"./enterprise/mount-dashboard-security-preferences.jsx":4603,"./enterprise/mount-dashboard-shared-channels.jsx":4268,"./enterprise/mount-dashboard-sso-preferences.jsx":4379,"./enterprise/mount-dashboard-team-apps.jsx":3951,"./enterprise/mount-dashboard-team-overview.jsx":1542,"./enterprise/mount-migration-table.jsx":3932,"./enterprise/mount-move-channels-custom-message.jsx":3994,"./enterprise/mount-org-wide-settings-pane.jsx":4627,"./enterprise/mount-terms-of-service.jsx":4022,"./enterprise/mount-workspace-directory.jsx":2290,"./eventlog.js":3105,"./experiments-unauthed.js":4024,"./experiments.js":3106,"./flannel.js":3107,"./fuzzy-matcher.js":3108,"./greetings-earth.js":4025,"./history-navigation.js":2239,"./infra/app-subdomain-check.js":4398,"./infra/beacon-api-call.js":2266,"./infra/boot/index.js":3987,"./infra/connectivity.js":3109,"./infra/debug.js":3110,"./infra/failover-proxy-check.js":4032,"./infra/register-global-error-handler.js":4034,"./infra/rtm.js":3111,"./infra/run-cdn-download-test.js":3995,"./infra/socket-manager.js":3112,"./infra/telemeter.js":3988,"./infra/token-to-team-id.js":3113,"./infra/upload-queue.js":3114,"./lazy-filter-select.jsx":3115,"./member-counts.js":3116,"./members.js":3997,"./membership.js":3117,"./message-input-registry.js":3118,"./message-pane-input.js":3119,"./message-pane.js":3980,"./messages.js":3120,"./metrics-responsiveness.js":3121,"./mount-admin-invite-settings.js":4497,"./mount-admin-invites-table.js":3977,"./mount-app-profile-flexpane.js":3943,"./mount-app-space.js":3949,"./mount-apps-browser.js":4306,"./mount-browser-incoming-call.js":2289,"./mount-channel-create-modal.js":4507,"./mount-channel-options-dialog.js":4351,"./mount-channel-sidebar.js":4606,"./mount-connected-workspaces.js":3160,"./mount-custom-status-input.js":4007,"./mount-dnd-preferences.js":3985,"./mount-document-title.js":3961,"./mount-download-access-logs-button.js":4527,"./mount-download-blocked-toast.js":2726,"./mount-downloads-view.js":3958,"./mount-emoji-picker.js":4008,"./mount-favicon.js":3960,"./mount-file-upload-banner.js":3999,"./mount-files-flexpane.js":4444,"./mount-global-nav.js":3011,"./mount-help-modal.js":4021,"./mount-image-viewer.js":4019,"./mount-invite-modal.js":4016,"./mount-keyboard-shortcuts.js":1439,"./mount-lazy-filter-select.js":4013,"./mount-member-directory-flexpane.js":4175,"./mount-menu.js":4026,"./mount-message-actions-menu.js":4006,"./mount-message-pane-banner.js":4009,"./mount-message-pane-drag-overlay.js":4003,"./mount-message-pane-input.js":4619,"./mount-message-pane.js":4624,"./mount-migration-blocker.js":3982,"./mount-modal-container.js":4002,"./mount-new-file-menu.js":4215,"./mount-notification-bar.js":4005,"./mount-oauth-confirm.jsx":3255,"./mount-org-retention-request.js":3940,"./mount-pages.js":3967,"./mount-pricing-calculator.js":4004,"./mount-profile-flexpane.js":3984,"./mount-redox.js":3968,"./mount-scrollbar.js":4012,"./mount-service-import-mapping-form.js":3956,"./mount-starred-items-flexpane.js":4456,"./mount-team-creator-onboarding-dialog.js":3266,"./mount-thread-drag-overlay.js":4018,"./mount-threads-flexpane.js":3935,"./mount-threads-view.js":4197,"./mount-toast.js":3300,"./mount-tooltip-tip.js":4023,"./mount-user-calendar-flexpane.jsx":3976,"./mount-user-groups-flexpane.js":4030,"./mount-user-groups-list.js":3998,"./mount_team_blurb.js":1409,"./mpims.js":3311,"./onboarding.js":4598,"./open-app-management-modal.js":3313,"./open-apps-browser-modal.js":3946,"./open-invite-member-to-channel-dialog.js":4201,"./pages.js":3314,"./prefs.js":4e3,"./presence-manager.js":3315,"./pricing_plans_modal.js":4001,"./reactions.js":3316,"./redux.js":4614,"./remove-app-from-channel.js":3321,"./rules.js":3322,"./rules/files.js":3323,"./rules/notifications.js":3324,"./search.js":4625,"./searcher.js":4011,"./self-team-ids.js":3325,"./send-message.js":3326,"./set-app-element-for-react-modal.js":3327,"./slash-command.js":3328,"./sonic-calls-supported-clients.js":3329,"./stars.js":3330,"./teams.js":3331,"./texty.js":3332,"./topics.js":3333,"./typing.js":3334,"./user-groups.js":3335,"./utility/a11y.js":3975,"./utility/broadcast-keywords.js":3336,"./utility/client-action-token.js":3337,"./utility/clipboard.js":3338,"./utility/clog-types.js":3339,"./utility/clog.js":3340,"./utility/currency.js":3341,"./utility/date-time.js":3342,"./utility/desktop.js":3991,"./utility/environment.js":3343,"./utility/format.js":4015,"./utility/i18n.js":3344,"./utility/search/autocomplete-suggestions.js":3345,"./utility/search/autocomplete.js":3346,"./utility/search/conversions.js":3347,"./utility/threads.js":3348,"./utility/url.js":3349,"./utility/utility.js":3955,"./utility/versions.js":3350,"./welcome-place.js":4511,"./workspace.js":3351,"./zendesk-widget.js":4504};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=2822},,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(0);var c=r(4);var u=r(1697);var d=r(16);var p=r.n(d);var v=r(34);var m=r(10);var h=r(30);var f=r(38);var b=r(3);var g=r.n(b);var _=r(6);var y=r.n(_);var O=r(7);var k=r.n(O);var E=r(8);var j=r.n(E);var C=r(9);var S=r.n(C);var w=r(2);var I=r(22);var T=r(66);var A=r(410);var N=r(868);var P=r(765);var R=r(12);var M=r(45);var x=r(186);var D=r(3973);var F=r(407);var L=r(181);var B=r(28);var U=r(50);var q=300;var G={children:l["b"].node,className:l["b"].string,disabled:l["b"].bool,tooltip:l["b"].oneOfType([l["b"].string,l["b"].func]),"aria-label":l["b"].string.isRequired,onClick:l["b"].func.isRequired,onTrigger:l["b"].func};var H={children:null,className:void 0,disabled:false,tooltip:void 0,onTrigger:w["noop"]};var W=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMouseDown=r.onMouseDown.bind(r);r.onMouseUp=r.onMouseUp.bind(r);r.pressTimer=void 0;return r}k()(t,[{key:"componentWillUnmount",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function e(t){var r=this;if(this.props.disabled)return;if(0!==t.button)return;t.persist();this.pressTimer=setTimeout(function(){return r.props.onTrigger(t)},q);window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function e(){var t=this.props,r=t.disabled,a=t.tooltip,i=t["aria-label"];var s=p()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":r});var o=function e(t){var a=t.tip,i=t.children;if(r||!a)return i;return n.a.createElement(U["c"],{tip:a,delay:800,position:"bottom",offsetY:Ia,tipClassName:"p-global_nav__top_history_tip"},i)};return n.a.createElement(o,{tip:a},n.a.createElement(B["c"],{className:s,disabled:r,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":i},this.props.children))}}]);return t}(a["PureComponent"]);W.displayName="HistoryButton";W.defaultProps=H;var V=W;var K=r(23);var z=r(139);var Q=new m["b"]("global_nav");var Y={viewId:l["b"].string,viewName:l["b"].string,teamId:l["b"].string,teamName:l["b"].string,teamIcon:l["b"].string,currentTeamId:l["b"].string,featureGlobalNav:l["b"].bool};var J={viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:false};var X=function(e){S()(t,e);function t(){y()(this,t);return j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}k()(t,[{key:"renderTeamIcon",value:function e(){var t=this.props,r=t.teamIcon,a=t.teamName;return n.a.createElement(U["c"],{tip:a,position:"bottom",zIndex:"above_fs"},n.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+r+")"}}))}},{key:"renderThreads",value:function e(){var t=this.props,r=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav;if(!s)return null;var o=r===i?n.a.createElement(I["b"],{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=Q.t("Threads");return n.a.createElement(a["Fragment"],null,o,l)}},{key:"renderUnreads",value:function e(){var t=this.props,r=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav;if(!s)return null;var o=r===i?n.a.createElement(I["b"],{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=Q.t("All Unreads");return n.a.createElement(a["Fragment"],null,o,l)}},{key:"render",value:function e(){var t=this.props,r=t.viewId,i=t.viewName,s=t.teamId,o=t.currentTeamId;if("Vall_threads"===r)return this.renderThreads();if("Vall_unreads"===r)return this.renderUnreads();if(s===o)return n.a.createElement(z["a"],{channelId:r,className:"p-global_nav__top_history_item_channel_name"});return n.a.createElement(a["Fragment"],null,this.renderTeamIcon(),i)}}]);return t}(a["Component"]);X.displayName="HistoryItem";X.defaultProps=J;var Z=function e(t){return{currentTeamId:Object(K["b"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var $=Object(i["connect"])(Z)(X);var ee=new m["b"]("global_nav");var te={history:l["b"].object.isRequired,back:l["b"].func,forward:l["b"].func,index:l["b"].func,sync:l["b"].func,action:l["b"].func,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var re={back:w["noop"],forward:w["noop"],index:w["noop"],sync:w["noop"],action:l["b"].func,featureGlobalNav:false};var ae=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBackClick=r.onBackClick.bind(r);r.onForwardClick=r.onForwardClick.bind(r);r.renderBackMenu=r.renderBackMenu.bind(r);r.renderForwardMenu=r.renderForwardMenu.bind(r);r.renderBackTooltip=r.renderBackTooltip.bind(r);r.renderForwardTooltip=r.renderForwardTooltip.bind(r);return r}k()(t,[{key:"componentDidMount",value:function e(){var t=this;if(!Object(L["c"])())return;window.requestIdleCallback&&window.requestIdleCallback(function(){return t.props.sync()});var r=Object(h["isWindows"])();var a=[{keys:r?"alt+left":["command+[","command+left"],handler:function e(r){if(t.shouldPreventShortcut(r))return;r.preventDefault();t.props.action("GLOBAL-NAV","Navigating back in history with key command");t.props.back();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}})}},{keys:r?"alt+right":["command+]","command+right"],handler:function e(r){if(t.shouldPreventShortcut(r))return;r.preventDefault();t.props.action("GLOBAL-NAV","Navigating forward in history with key command");t.props.forward();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}})}}];this.keyCommands||(this.keyCommands=new x["a"]);this.keyCommands.bindAll(a)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onBackClick",value:function e(){this.props.back();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}},{key:"onForwardClick",value:function e(){this.props.forward();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}},{key:"shouldPreventShortcut",value:function e(t){if(t.metaKey&&("ArrowRight"===t.key||"ArrowLeft"===t.key)){var r=Object(D["a"])()&&Object(F["g"])(document.activeElement)||document.activeElement===document.body;if(!r)return true}return false}},{key:"renderStackMenu",value:function e(t,r){var a=this;var i=function e(t){return t.viewId+":"+t.teamId};var s=Object(w["uniqBy"])(t,i);var o=s.map(function(e){return{label:n.a.createElement($,e),key:i(e),click:function t(){a.props.index({target:e.index});a.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}});return n.a.createElement(T["a"],g()({},r,{template:o}))}},{key:"renderBackMenu",value:function e(t){var r=Object(P["a"])(this.props.history);if(!r)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}});return this.renderStackMenu(r.reverse(),t)}},{key:"renderForwardMenu",value:function e(t){var r=Object(P["b"])(this.props.history);if(!r)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}});return this.renderStackMenu(r,t)}},{key:"renderBackTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(h["isMac"])()?"\u2318[":ee.t("Alt+Left Arrow");return n.a.createElement(a["Fragment"],null,ee.t("Go back"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"renderForwardTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(h["isMac"])()?"\u2318]":"Alt+Right Arrow";return n.a.createElement(a["Fragment"],null,ee.t("Go forward"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"render",value:function e(){var t=this.props,r=t.history,i=t.featureGlobalNav;if(!i)return null;if(!Object(L["c"])())return null;var s=!Object(P["a"])(r)||!Object(P["a"])(r).length;var o=!Object(P["b"])(r)||!Object(P["b"])(r).length;var l={position:"bottom-left",offsetX:-12,offsetY:Ta,customTrigger:true};return n.a.createElement(a["Fragment"],null,n.a.createElement(T["e"],g()({renderMenu:this.renderBackMenu},l),n.a.createElement(V,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:s,tooltip:this.renderBackTooltip,"aria-label":ee.t("Go back")},n.a.createElement(I["b"],{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),n.a.createElement(T["e"],g()({renderMenu:this.renderForwardMenu},l),n.a.createElement(V,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:o,tooltip:this.renderForwardTooltip,"aria-label":ee.t("Go forward")},n.a.createElement(I["b"],{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]);return t}(a["Component"]);ae.displayName="History";ae.defaultProps=re;var ne=function e(t){return{history:Object(A["getNavigationHistory"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),action:Object(R["a"])({state:t}).action,clogger:Object(M["a"])({state:t})}};var ie={back:N["a"],forward:N["b"],index:N["c"],sync:N["f"]};var se=Object(i["connect"])(ne,ie)(ae);var oe=r(35);var le=r(31);var ce=r(1360);var ue=r(37);var de=r.n(ue);var pe=r(42);var ve=r(1094);var me=r(1773);var he=r(2291);var fe=r(794);var be=r(1784);var ge=r(20);var _e=Object(ge["b"])("TS.ui.workspaces.start");var ye=r(15);var Oe=r(48);var ke=r(2221);var Ee=Object(ye["b"])("Opens the help modal",function(e,t,r){e(Object(Oe["openModal"])({element:n.a.createElement(ke["a"],r)}))});Ee.propTypes={trigger:l["b"].string.isRequired};var je=r(1367);var Ce=Object(ge["b"])("TS.magic_login.execute");var Se=r(3180);var we=new m["b"]("workflow_builder");var Ie=function e(){return n.a.createElement("div",{className:"p-launch_workflow_builder"},we.t("Workflow Builder")," ",n.a.createElement("div",{className:"p-launch_workflow_builder__pill"},we.t("PILOT")))};Ie.displayName="LaunchWorkflowBuilder";var Te=Ie;var Ae={name:l["b"].string.isRequired,org:l["b"].string,icon:l["b"].string,url:l["b"].string};var Ne={org:void 0,icon:void 0,url:void 0};var Pe=function e(t){var r=t.name,a=t.icon,i=t.org,s=t.url;return n.a.createElement("div",{className:"p-global_nav__top_menu_header"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:a&&"url("+a+")"}}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},r),n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},i||s)))};Pe.displayName="TeamHeader";Pe.defaultProps=Ne;var Re=function e(t){var r=Object(oe["d"])(t);return{name:Object(le["getTeamDisplayName"])(r),org:r.enterprise_name,icon:r.icon&&r.icon.image_88||void 0,url:r.domain+".slack.com"}};var Me=Object(i["connect"])(Re)(Pe);var xe=r(24);var De=r(2140);var Fe=r(1190);var Le=new m["b"]("global_nav");var Be={menuProps:l["b"].object,team:l["b"].object.isRequired,isEnterprise:l["b"].bool,enterpriseURL:l["b"].string,isAppmin:l["b"].bool,featureGlobalNav:l["b"].bool};var Ue={menuProps:void 0,isEnterprise:false,enterpriseURL:void 0,isAppmin:false,featureGlobalNav:false};var qe=function e(t){var r=t.featureGlobalNav,a=t.team,i=t.isEnterprise,s=t.enterpriseURL,o=t.isAppmin,l=t.menuProps;if(!r)return null;var c=[{label:Le.t("Manage members"),href:Object(le["getTeamUrl"])(a,"/admin")},{label:Le.t("Workspace settings"),href:Object(le["getTeamUrl"])(a,"/admin/settings")},{label:Le.t("Organization settings"),href:"https://"+s+"/manage",hide:!i},{label:Le.t("Manage apps"),href:Object(le["getTeamUrl"])(a,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:i||!o},{label:Le.t("Manage shared channels"),click:function e(){return Object(De["a"])(a.id)},hide:!Object(Fe["a"])()}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},l,{template:c}))};qe.displayName="TeamAdminSubmenu";qe.defaultProps=Ue;var Ge=function e(t){var r=Object(oe["d"])(t);return{team:r,isEnterprise:Object(le["isEnterpriseTeam"])(r),enterpriseURL:Object(c["getFromBootData"])(t,"enterprise_url"),isAppmin:Object(xe["k"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var He=Object(i["connect"])(Ge)(qe);var We=r(26);var Ve=r.n(We);var Ke=r(2226);var ze=Object(ye["b"])("Opens the Find More Workspaces modal.",function(e,t,r){if(!Object(c["isFeatureEnabled"])(t(),"feature_sonic_find_more_wksps"))return;e(Object(Oe["openModal"])({element:n.a.createElement(Ke["b"],{userId:r}),name:"find-more-workspaces",isStackable:true}))});ze.propTypes={userId:l["b"].string.isRequired};var Qe=ze;var Ye=r(49);var Je=r(536);var Xe=new m["b"]("global_nav");var Ze=3;var $e={menuProps:l["b"].object,enterprises:l["b"].arrayOf(l["b"].shape({id:l["b"].string,name:l["b"].string,teams:l["b"].arrayOf(l["b"].object)})),others:l["b"].arrayOf(l["b"].shape({id:l["b"].string,name:l["b"].string,url:l["b"].string})),currentEnterpriseId:l["b"].string,currentUserId:l["b"].string,signinURL:l["b"].string,featureGlobalNav:l["b"].bool,featureClassicNav:l["b"].bool,openFindMoreWorkspacesModal:l["b"].func.isRequired};var et={menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,currentUserId:void 0,signinURL:void 0,featureGlobalNav:false,featureClassicNav:false};var tt=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getTeamItem=r.getTeamItem.bind(r);r.getEnterpriseItems=r.getEnterpriseItems.bind(r);r.getOtherItems=r.getOtherItems.bind(r);return r}k()(t,[{key:"getTeamItem",value:function e(t){var r=this.props,i=r.featureGlobalNav,s=r.featureClassicNav;if(!i&&!s)return null;if(!t.url)return null;var o=Object(f["a"])()?Object(le["getTeamUrl"])({domain:"app"},"client/"+t.id):t.url+("/"===t.url.substr(-1)?"messages":"/messages");var l=t.icons&&(t.icons.image_44||t.icons.image_88);return{label:n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+l+")"}}),n.a.createElement("strong",null,t.name)),href:o,target:"_self",showLinkIndicatorIcon:false}}},{key:"getEnterpriseItems",value:function e(){var t=this;var r=this.props,a=r.enterprises,n=r.currentEnterpriseId,i=r.currentUserId,s=r.featureGlobalNav,o=r.featureClassicNav;if(!s&&!o)return[];return Object(w["flatten"])(a.map(function(e){var r=e.teams.map(t.getTeamItem);var a=e.id===n&&e.overLimit?{label:Xe.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:function e(){return t.props.openFindMoreWorkspacesModal(i)}}:null;return[{type:"header",label:e.name}].concat(Ve()(r),[a,{type:"separator"}])}))}},{key:"getOtherItems",value:function e(){var t=this;var r=this.props,a=r.others,n=r.featureGlobalNav,i=r.featureClassicNav;if(!n&&!i)return[];if(!a||!a.length)return[];var s=a.map(function(e){return t.getTeamItem(e)});return[{type:"header",label:Xe.t("Your other workspaces")}].concat(Ve()(s))}},{key:"render",value:function e(){var t=this.props,r=t.signinURL,a=t.featureGlobalNav,i=t.featureClassicNav,s=t.menuProps;if(!a&&!i)return null;var o=r&&[{type:"separator"},{label:Xe.t("Sign in to another workspace"),href:r}];var l=[].concat(Ve()(this.getEnterpriseItems()),Ve()(this.getOtherItems()),Ve()(o||[]));return n.a.createElement(T["a"],g()({},s,{template:l,stripTerminalSeparators:true}))}}]);return t}(a["Component"]);tt.displayName="SwitchWorkspacesSubmenu";tt.defaultProps=et;var rt=function e(t){var r=Object(c["getOtherAccounts"])(t).map(function(e){return{id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}});if(!Object(Ye["a"])()){var a=Object(xe["b"])(t);(Object(w["get"])(a,"enterprise_user.teams")||[]).map(function(e){return Object(oe["j"])(t,e)}).forEach(function(e){r.push({id:e.id,enterpriseId:Object(w["get"])(a,"enterprise_user.enterprise_id")||e.enterprise_id,url:Object(Je["b"])(t,e.domain),name:Object(le["getTeamDisplayName"])(e),enterpriseName:Object(w["get"])(a,"enterprise_user.enterprise_name")||e.enterprise_name,icons:e.icon,isUnknown:Object(le["isUnknown"])(e)})})}var n=Object(oe["d"])(t);var i=n.enterprise_id;r=r.sort(function(e,t){if(i){if(e.enterpriseId===i&&t.enterpriseId!==i)return-1;if(t.enterpriseId===i&&e.enterpriseId!==i)return 1}if(!e.isUnknown&&t.isUnknown)return-1;if(!t.isUnknown&&e.isUnknown)return 1;return Object(m["p"])(e.name,t.name)});var s=n.id;r=r.filter(function(e){return e.id!==s});return Object(w["uniqBy"])(r,"id")};var at=function e(t){var r={};t.filter(function(e){return e.enterpriseId}).forEach(function(e){var t=e.enterpriseId;r[t]?r[t].teams.length<Ze?r[t].teams.push(e):r[t].overLimit=true:r[t]={id:t,name:e.enterpriseName,teams:[e]}});return Object.values(r)};var nt=function e(t){var r=rt(t);var a=at(r);var n=r.filter(function(e){return!e.enterpriseId});var i=Object(oe["d"])(t).enterprise_id;var s=Object(c["getCurrentUserId"])(t);var o=Object(c["getFromBootData"])(t,"signin_url");return{enterprises:a,others:n,currentEnterpriseId:i,currentUserId:s,signinURL:o,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureClassicNav:Object(c["isFeatureEnabled"])(t,"feature_classic_nav")}};var it={openFindMoreWorkspacesModal:function e(){return Qe.apply(void 0,arguments)}};var st=Object(i["connect"])(nt,it)(tt);var ot=r(68);var lt=r(182);var ct=r(17);var ut=r(93);var dt=r(801);function pt(e){var t=Object(xe["b"])(e);var r=Object(oe["d"])(e);var a=Object(ct["isAdmin"])(t);var n=Object(ct["isOwner"])(t);var i=Object(ct["isRestricted"])(t);var s=Object(c["pageNeedsEnterprise"])(e);var o=Object(le["isPaidTeam"])(r);var l=a;var u=Object(dt["d"])();var d=Object(c["isFeatureEnabled"])(e,"feature_builder_can_access");var p=a||!i&&(!Object(ot["a"])(e,"emoji_only_admins")||!Object(ot["a"])(e,"slackbot_responses_only_admins")||!Object(ot["a"])(e,"loading_only_admins"));var m=s&&Object(lt["isAppSpaceEnabled"])(e)&&Object(xe["k"])(e);var f=a||!Object(ot["a"])(e,"stats_only_admins")&&!i;var b=n||Object(v["g"])(e,"purchaser")||Object(ot["a"])(e,"all_users_can_purchase");var g=b&&o;var _=!o&&!Object(pe["isAppStoreBuild"])();var y=s&&!Object(ct["isRestricted"])(t);var O=o&&Object(ut["n"])(e);var k=Object(c["getFromBootData"])(e,"help_url");var E=Object(c["isFeatureEnabled"])(e,"feature_tinyspeck")||h["isDev"];var j=s&&!i;var C=Object(c["getOtherAccounts"])(e).length-1;var S=Object(Ye["a"])()?C:C+Object(w["get"])(t,"enterprise_user.teams.length",1);var I=S>=1&&!pe["isDesktop"];var T=!I&&!!Object(c["getFromBootData"])(e,"signin_url");return{administration:l,invite:u,launchWorkflowBuilder:d,customize:p,manageApps:m,analytics:f,billing:g,plans:_,orgShared:y,externalShared:O,help:k,version:E,findWorkspaces:j,switchWorkspaces:I,signin:T}}var vt={},mt=vt.removeWorkspace;var ht=new m["b"]("global_nav");var ft={actions:l["b"].object,team:l["b"].object.isRequired,signOut:l["b"].func,openPrefsModal:l["b"].func,signoutName:l["b"].string.isRequired,signoutURL:l["b"].string,signinURL:l["b"].string,launchWorkflowBuilder:l["b"].func,openSharedChannelIntroductionModal:l["b"].func,renderSonicMenu:l["b"].func,featureGlobalNav:l["b"].bool,featureSharedChannelsRemoveBetaLabel:l["b"].bool};var bt={actions:{},signOut:w["noop"],openPrefsModal:w["noop"],launchWorkflowBuilder:w["noop"],openSharedChannelIntroductionModal:w["noop"],signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:false,featureSharedChannelsRemoveBetaLabel:false};var gt=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSigninClick=r.onSigninClick.bind(r);r.onOpenAppClick=r.onOpenAppClick.bind(r);r.renderAdminSubmenu=r.renderAdminSubmenu.bind(r);r.renderWorkspacesSubmenu=r.renderWorkspacesSubmenu.bind(r);return r}k()(t,[{key:"onSigninClick",value:function e(t){if(pe["isDesktop"]){t.preventDefault();Object(pe["signInTeam"])()}}},{key:"onOpenAppClick",value:function e(t){t.preventDefault();Ce({fallback_to_browser:true,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"renderAdminSubmenu",value:function e(t){return n.a.createElement(He,{menuProps:t})}},{key:"renderWorkspacesSubmenu",value:function e(t){return n.a.createElement(st,{menuProps:t})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.actions,i=r.renderSonicMenu,s=r.featureGlobalNav,o=r.signoutName,l=r.signoutURL,c=r.signinURL,u=r.team,d=r.launchWorkflowBuilder,p=r.featureSharedChannelsRemoveBetaLabel,v=de()(r,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team","launchWorkflowBuilder","featureSharedChannelsRemoveBetaLabel"]);if(!s)return null;var m=[{type:"submenu",label:"Sonic",renderSubmenu:i,hide:!i},{type:"separator"},{type:"custom",children:n.a.createElement(Me,{key:"team-header"})},{type:"separator"},{label:ht.t("Preferences"),shortcut:Object(h["isMac"])()&&pe["isDesktop"]&&"\u2318,",click:function e(){return t.props.openPrefsModal()}},{type:"separator"},{type:"submenu",label:ht.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!a.administration},{label:ht.t("Analytics"),hide:!a.analytics,href:Object(le["getTeamUrl"])(u,"/stats")},{label:ht.t("Billing"),hide:!a.billing,href:Object(le["getTeamUrl"])(u,"/admin/billing")},{label:ht.t("See paid plans"),hide:!a.plans,href:Object(le["getTeamUrl"])(u,"/pricing")},{key:"launch-workflow-builder",hide:!a.launchWorkflowBuilder,click:d,children:n.a.createElement(Te,null)},{label:ht.t("Customize Slack"),hide:!a.customize,href:Object(le["getTeamUrl"])(u,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:ht.t("Invite people"),hide:!a.invite,click:function e(){return Object(ve["a"])({source:"team_menu"})}},{label:ht.t("Manage apps"),hide:!a.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:ht.t("Shared channels (beta)"),hide:!a.externalShared,click:function e(){return Object(f["a"])()?t.props.openSharedChannelIntroductionModal():Object(me["a"])()}},{type:"separator"},{label:ht.t("Help & feedback"),hide:!a.help,click:Ee},{label:"Version info (TS only)",hide:!a.version,click:je["a"]},{type:"separator"},{label:ht.t("Find more workspaces"),hide:!a.findWorkspaces,click:function e(){return _e()}},{type:"submenu",label:ht.t("Switch workspaces"),hide:Object(f["a"])()||!a.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:ht.t("Sign in to another workspace"),hide:!a.signin,href:c,click:this.onSigninClick},{label:ht.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(f["a"])(),click:function e(){return t.props.signOut(u.id)},dataQa:"logout"},{label:ht.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:Object(f["a"])(),href:l,target:"_self",dataQa:"logout"},{type:"separator"},{label:ht.rt("Open the Slack App"),hide:pe["isDesktop"],href:Object(le["getTeamUrl"])(u,"/ssb/open"),click:this.onOpenAppClick}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},v,{template:m,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:true}))}}]);return t}(a["Component"]);gt.displayName="TeamMenu";gt.defaultProps=bt;var _t=function e(t){return{signOut:function e(){return t(mt.apply(void 0,arguments))},openPrefsModal:function e(){return t(Object(fe["a"])())},launchWorkflowBuilder:function e(){return t(Object(be["a"])())},openSharedChannelIntroductionModal:function e(){return t(he["a"].apply(void 0,arguments))}}};var yt=function e(t){var r=Object(oe["d"])(t);return{actions:pt(t),team:r,signoutName:r.enterprise_name||Object(le["getTeamDisplayName"])(r),signoutURL:Object(le["isEnterpriseTeam"])(r)?Object(c["getFromBootData"])(t,"enterprise_logout_url"):Object(c["getFromBootData"])(t,"logout_url"),signinURL:Object(c["getFromBootData"])(t,"signin_url"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureSharedChannelsRemoveBetaLabel:Object(c["isFeatureEnabled"])(t,"feature_shared_channels_remove_beta_label")}};var Ot=Object(i["connect"])(yt,_t)(gt);var kt=Ot;var Et=new m["b"]("global_nav");var jt={name:l["b"].string,featureGlobalNav:l["b"].bool,featureOfflineMode:l["b"].bool,clogger:l["b"].object.isRequired,renderSonicMenu:l["b"].func};var Ct={name:void 0,featureGlobalNav:false,featureOfflineMode:false,renderSonicMenu:void 0};var St=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.renderMenu=r.renderMenu.bind(r);r.renderIcon=r.renderIcon.bind(r);return r}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(kt,g()({},t,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderIcon",value:function e(){if(this.props.featureOfflineMode)return n.a.createElement(a["Fragment"],null,n.a.createElement(ce["b"],null,n.a.createElement(I["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})),n.a.createElement(ce["a"],null,n.a.createElement(U["c"],{tip:Et.t("No network connection"),position:"bottom"},n.a.createElement(I["b"],{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"}))));return n.a.createElement(I["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"render",value:function e(){var t=this.props,r=t.name,a=t.featureGlobalNav;if(!r||!a)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},n.a.createElement(B["c"],{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":Et.t("Team menu")},n.a.createElement("div",{className:"overflow_ellipsis"},r),this.renderIcon()))}}]);return t}(a["Component"]);St.displayName="Name";St.defaultProps=Ct;var wt=function e(t){var r=Object(oe["d"])(t);return{name:r?Object(le["getTeamDisplayName"])(r):void 0,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureOfflineMode:Object(c["isFeatureEnabled"])(t,"feature_offline_mode"),clogger:Object(M["a"])({state:t})}};var It=Object(i["connect"])(wt)(St);var Tt=r(1053);var At=r(216);var Nt=r(451);var Pt=r(373);var Rt=r(553);var Mt=r(1546);var xt=r(309);var Dt=r(73);var Ft=r(19);var Lt=r(180);var Bt=r(168);var Ut=r(1728);var qt={name:l["b"].string,secondary:l["b"].string,userId:l["b"].string,inDnd:l["b"].bool,inDndBySnooze:l["b"].bool};var Gt={name:void 0,secondary:void 0,userId:void 0,inDnd:false,inDndBySnooze:false};var Ht=function e(t){var r=t.name,a=t.secondary,i=t.userId,s=t.inDnd,o=t.inDndBySnooze;var l=a?n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},a):null;var c=p()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":s&&o,"p-global_nav__top_menu_schedule_background":s&&!o});return n.a.createElement("div",{className:c},n.a.createElement(At["b"],{userId:i,size:36,isInteractive:false,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},r),l))};Ht.displayName="UserHeader";Ht.defaultProps=Gt;var Wt=function e(t){var r=Object(xe["b"])(t);var a=Object(Lt["getSnoozeScheduleForCurrentUser"])(t),n=a.snoozeEnabled;return{name:Object(ct["getPrefCompliantMemberName"])(t,r),secondary:Object(ct["getMemberSecondaryName"])(t,r),userId:r.id,inDnd:!!Object(Lt["getDndByMemberId"])(t,r.id),inDndBySnooze:n}};var Vt=Object(i["connect"])(Wt)(Ht);var Kt=r(1102);var zt=r(1714);var Qt=new m["b"]("do_not_disturb");var Yt={inDndBySnooze:l["b"].bool.isRequired,snoozeEndTs:l["b"].number,dndEndTs:l["b"].number,do24hrTime:l["b"].bool};var Jt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false};var Xt=function(e){S()(t,e);function t(){y()(this,t);return j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}k()(t,[{key:"render",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.snoozeEndTs,i=t.dndEndTs,s=t.do24hrTime;var o=p()("p-dnd_header",{"p-dnd_header__snooze_background":r,"p-dnd_header__schedule_background":!r});var l=r?a:i;var c=Object(Kt["b"])(l,{do24hrTime:s});return n.a.createElement("div",{className:o},n.a.createElement("div",{className:"p-dnd_header__status"},n.a.createElement("div",null,n.a.createElement("strong",null,Qt.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),n.a.createElement("div",{className:"p-dnd_header__sub_text"},c)))}}]);return t}(a["PureComponent"]);Xt.displayName="DndHeader";Xt.defaultProps=Jt;var Zt=function e(t){var r=Object(c["getCurrentUserId"])(t);var a=Object(Lt["getDndScheduleByMemberId"])(t,r),n=a.nextDndEndTs;var i=Object(Lt["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(v["g"])(t,"time24")}};var $t=Object(i["connect"])(Zt)(Xt);function er(e){var t=Object(c["isFeatureEnabled"])(e,"feature_tinyspeck");return{help:Object(c["getFromBootData"])(e,"help_url"),version:t||h["isDev"]}}var tr=new m["b"]("global_nav");var rr={actions:l["b"].object,currentMember:l["b"].object,currentPresence:l["b"].string,onTriggerClose:l["b"].func,openCustomStatusDialog:l["b"].func,currentChannel:l["b"].object,inDnd:l["b"].bool,inDndBySnooze:l["b"].bool,endDndSnooze:l["b"].func,endDndSchedule:l["b"].func,featureGlobalNav:l["b"].bool,toggleUserPresence:l["b"].func,updateCurrentMemberProfile:l["b"].func,openPrefsModal:l["b"].func};var ar={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:w["noop"],openCustomStatusDialog:w["noop"],currentChannel:void 0,inDnd:false,inDndBySnooze:false,endDndSnooze:w["noop"],endDndSchedule:w["noop"],featureGlobalNav:false,toggleUserPresence:w["noop"],updateCurrentMemberProfile:w["noop"],openPrefsModal:w["noop"]};var nr=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderDndMenu=r.renderDndMenu.bind(r);r.renderPresenceLabel=r.renderPresenceLabel.bind(r);return r}k()(t,[{key:"renderDndMenu",value:function e(t){var r=this.props.currentChannel;return n.a.createElement(Ut["a"],{currentChannel:r,menuProps:t,useGlobalNav:true})}},{key:"renderPresenceLabel",value:function e(){var t=this.props,r=t.currentPresence,a=t.featureGlobalNav;if(!a)return null;switch(r){case"active":return tr.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,r=e.key;return n.a.createElement("strong",{key:r},t)});case"away":return tr.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,r=e.text,a=e.key;switch(t){case"status":return n.a.createElement("strong",{className:"half_opacity",key:a},r);case"strong":return n.a.createElement("strong",{key:a},r);default:return null}});default:return null}}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.actions,i=r.currentMember,s=r.inDnd,o=r.inDndBySnooze,l=r.featureGlobalNav,c=de()(r,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!l)return null;var u=[{type:"custom",children:n.a.createElement(Vt,{key:"user-header"})},{type:"custom",children:n.a.createElement($t,{key:"dnd-header"}),hide:!s},{type:"submenu",label:tr.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:s},{label:tr.t("Resume notifications now"),key:"turn-off-dnd",hide:!s,click:o?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:tr.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!s||s&&!o},{label:tr.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!s||s&&o,click:function e(){return t.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})}},{type:"separator",key:"dnd-separator",hide:!s},{label:tr.t("Clear status"),hide:!Object(ct["hasCustomStatusSet"])(i),click:function e(){t.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(ct["hasCustomStatusSet"])(i)?tr.t("Edit status"):tr.t("Set a status"),shortcut:Object(h["isMac"])()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:tr.t("Profile & account"),click:function e(){return Object(Bt["i"])(i.id)}},{label:tr.rt("Notification preferences"),key:"notification-preferences",click:function e(){return t.props.openPrefsModal({activeSection:"notifications"})}},{type:"custom",children:n.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide});var d=p()({"p-global_nav__top_user_menu":true,"p-global_nav__top_user_menu--dnd":s});return n.a.createElement(T["a"],g()({},c,{template:u,menuClassNames:d,noMargin:true}))}}]);return t}(a["Component"]);nr.displayName="UserMenu";nr.defaultProps=ar;var ir=function e(t){var r=Object(xe["b"])(t);var a=Object(Dt["a"])(t);var n=Object(Lt["getSnoozeScheduleForCurrentUser"])(t),i=n.snoozeEnabled;return{actions:er(t),currentMember:r,currentPresence:Object(xt["getCurrentMemberPresence"])(t),currentChannel:Object(Ft["d"])(t,a,false)||void 0,inDnd:!!Object(Lt["getDndByMemberId"])(t,r.id),inDndBySnooze:i,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var sr={openCustomStatusDialog:Tt["a"],toggleUserPresence:xt["toggleUserPresence"],updateCurrentMemberProfile:Mt["a"],endDndSnooze:Rt["b"],endDndSchedule:Rt["a"],openPrefsModal:fe["a"]};var or=Object(i["connect"])(ir,sr)(nr);var lr=or;var cr=new m["b"]("global_nav");var ur={userId:l["b"].string,hasCustomStatus:l["b"].bool,openCustomStatusDialog:l["b"].func,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var dr={userId:void 0,hasCustomStatus:false,openCustomStatusDialog:w["noop"],featureGlobalNav:false};var pr=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUserClick=r.onUserClick.bind(r);r.onStatusClick=r.onStatusClick.bind(r);r.renderMenu=r.renderMenu.bind(r);return r}k()(t,[{key:"onUserClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"onStatusClick",value:function e(){this.props.openCustomStatusDialog();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(lr,t)}},{key:"render",value:function e(){var t=this.props,r=t.userId,a=t.hasCustomStatus,i=t.featureGlobalNav;if(!r||!i)return null;var s=a&&n.a.createElement(B["c"],{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":cr.t("Edit status")},n.a.createElement(Nt["b"],{memberId:r,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),n.a.createElement(I["b"],{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return n.a.createElement("div",{className:"p-global_nav__top_user"},s,n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},n.a.createElement(B["c"],{"aria-label":cr.t("User menu")},n.a.createElement(At["b"],{userId:r,size:32,showBadge:false,isInteractive:false,className:p()({"p-global_nav__top_user_avatar":true,"p-global_nav__top_user_avatar--beside-status":a}),tabIndex:"-1"}),n.a.createElement(Pt["a"],{memberId:r,className:"p-global_nav__top_user_presence",inline:false}))))}}]);return t}(a["Component"]);pr.displayName="User";pr.defaultProps=dr;var vr=function e(t){return{userId:Object(c["getCurrentUserId"])(t),hasCustomStatus:Object(ct["hasCustomStatusSet"])(Object(xe["b"])(t)),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var mr={openCustomStatusDialog:Tt["a"]};var hr=Object(i["connect"])(vr,mr)(pr);var fr=r(74);var br=r.n(fr);var gr=r(1080);var _r=r(931);var yr=r(81);var Or=r(108);var kr=r(100);var Er=r(279);var jr={icon:l["b"].string.isRequired,pane:l["b"].string.isRequired,tooltip:l["b"].node.isRequired,"aria-label":l["b"].string.isRequired,active:l["b"].bool,children:l["b"].node,className:l["b"].string,toggleActivityFlexpane:l["b"].func.isRequired,showStarredItemsList:l["b"].func.isRequired,closeFlexpane:l["b"].func.isRequired,clogger:l["b"].object.isRequired};var Cr={active:false,children:void 0,className:void 0};var Sr=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}k()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.pane,a=t.active,n=t.clogger;"team"===r?Object(Bt["m"])():"starred_items"===r&&Object(f["a"])()?a?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===r?this.props.toggleActivityFlexpane():Object(Er["d"])(r);"mentions"===r?n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===r&&n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function e(){var t=this.props,r=t.icon,a=t.tooltip,i=t.pane,s=t.active,o=t.children,l=t["aria-label"];var c=p()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+i,s&&"p-global_nav__top_flex--active",this.props.className);return n.a.createElement(U["c"],{tip:a,delay:U["a"],position:"bottom",offsetY:Ia},n.a.createElement(B["c"],{className:c,onClick:this.onClick,"aria-label":l},n.a.createElement(I["b"],{type:r,className:"p-global_nav__top_button_icon"}),o))}}]);return t}(a["PureComponent"]);Sr.displayName="FlexButton";Sr.defaultProps=Cr;var wr=function e(t,r){var a=r.pane;return{active:Object(Or["i"])(t)===a,clogger:Object(M["a"])({state:t})}};var Ir=function e(t){return{toggleActivityFlexpane:function e(){return t(Object(kr["q"])())},showStarredItemsList:function e(){return t(Object(kr["k"])())},closeFlexpane:function e(){return t(Object(kr["a"])())}}};var Tr=Object(i["connect"])(wr,Ir)(Sr);var Ar=new m["b"]("global_nav");var Nr={reactionToast:l["b"].shape({emoji:l["b"].string,memberName:l["b"].string,channelName:l["b"].string}),noAnimation:l["b"].bool,featureGlobalNav:l["b"].bool};var Pr={reactionToast:void 0,noAnimation:false,featureGlobalNav:false};var Rr=function e(t){var r=t.reactionToast,i=t.noAnimation,s=t.featureGlobalNav;if(!s)return null;var o=r&&n.a.createElement(yr["b"],{text:":"+r.emoji+":",emojiSize:yr["a"].LARGE,className:"p-global_nav__top_activity_toast"});var l=br.a.chrome&&!pe["isDesktop"];var c=!l&&n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(h["isMac"])()?"\u2318\u21e7M":"Ctrl+Shift+M");var u=r?n.a.createElement(a["Fragment"],null,Object(_r["a"])(r.memberName),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_light_gray"},Object(_r["a"])(r.channelName))):n.a.createElement(a["Fragment"],null,Ar.t("Activity"),c);var d=p()({"p-global_nav__top_activity":true,"p-global_nav__top_activity--no-animation":i,"p-global_nav__top_activity--toasting":r});return n.a.createElement("div",{className:d},n.a.createElement(Tr,{icon:"mentions",pane:"activity",tooltip:u,"aria-label":Ar.t("Activity")}),o)};Rr.displayName="ActivityButton";Rr.defaultProps=Pr;var Mr=function e(t){return{reactionToast:Object(gr["getReactionToast"])(t),noAnimation:!Object(v["g"])(t,"a11y_animations"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var xr=Object(i["connect"])(Mr)(Rr);var Dr=new m["b"]("global_nav");var Fr={isUserRestricted:l["b"].bool,isPaid:l["b"].bool,isEnterprise:l["b"].bool,userId:l["b"].string,showFileList:l["b"].func,showDownloads:l["b"].func,showKeyboardShortcuts:l["b"].func,showWhatsNew:l["b"].func,showUserGroupList:l["b"].func,showUserCalendar:l["b"].func,featureCalendarSimpleAgendaView:l["b"].bool,featureGlobalNav:l["b"].bool,featureSonicUserGroups:l["b"].bool,openHelpModal:l["b"].func,clogger:l["b"].object.isRequired};var Lr={isUserRestricted:false,isPaid:false,isEnterprise:false,userId:void 0,showFileList:w["noop"],showDownloads:w["noop"],showKeyboardShortcuts:w["noop"],showWhatsNew:w["noop"],showUserGroupList:w["noop"],showUserCalendar:w["noop"],featureCalendarSimpleAgendaView:false,featureGlobalNav:false,featureSonicUserGroups:false,openHelpModal:w["noop"]};var Br=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onTriggerClick=r.onTriggerClick.bind(r);r.clogItem=r.clogItem.bind(r);r.renderMenu=r.renderMenu.bind(r);return r}k()(t,[{key:"onTriggerClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function e(t){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:t})}},{key:"renderMenu",value:function e(t){var r=this;var a=this.props,i=a.featureGlobalNav,s=a.featureSonicUserGroups,o=a.isUserRestricted,l=a.isPaid,c=a.isEnterprise,u=a.userId;if(!i)return null;var d=[{label:Dr.t("Your events"),icon:n.a.createElement(I["b"],{type:"all-files-alt"}),click:function e(){r.props.showUserCalendar();r.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:Dr.t("Files"),icon:n.a.createElement(I["b"],{type:"all-files-alt"}),click:function e(){r.props.showFileList({user:u});r.clogItem("files_user")}},{label:Dr.t("Downloads"),icon:n.a.createElement(I["b"],{type:"cloud-download"}),click:function e(){r.props.showDownloads({user:u});r.clogItem("downloads")},hide:!(window.desktop&&window.desktop.downloads)},{type:"separator"},{label:c?Dr.t("Organization Directory"):Dr.t("Workspace Directory"),icon:n.a.createElement(I["b"],{type:"team-directory"}),shortcut:!br.a.firefox&&(Object(h["isMac"])()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function e(){Object(Bt["m"])();r.clogItem("team")}},{label:Dr.t("User Groups"),icon:n.a.createElement(I["b"],{type:"user-groups"}),click:function e(){s?r.props.showUserGroupList():Object(Bt["l"])();r.clogItem("groups")},hide:o||!l},{type:"separator"},{label:Dr.t("What\u2019s New"),icon:n.a.createElement(I["b"],{type:"emoji-celebration"}),click:function e(){r.props.showWhatsNew();r.clogItem("whats_new")}},{label:Dr.t("Keyboard Shortcuts"),icon:n.a.createElement(I["b"],{type:"keyboard"}),shortcut:Object(h["isMac"])()?"\u2318/":"Ctrl+/",click:function e(){r.props.showKeyboardShortcuts();r.clogItem("shortcuts")}},{label:Dr.t("Help"),icon:n.a.createElement(I["b"],{type:"question-circle"}),click:function e(){r.props.openHelpModal({trigger:"flex_menu"});r.clogItem("help")}}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},t,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:d,stripTerminalSeparators:true,width:Object(h["isMac"])()?void 0:360}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{position:"bottom-right",renderMenu:this.renderMenu,offsetY:Ta,onClick:this.onTriggerClick},n.a.createElement(U["c"],{tip:Dr.t("More options"),position:"bottom",delay:U["a"],offsetY:Ia},n.a.createElement(B["c"],{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":Dr.t("More options")},n.a.createElement(I["b"],{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"}))))}}]);return t}(a["PureComponent"]);Br.displayName="FlexpanesMenu";Br.defaultProps=Lr;var Ur=function e(t){return{isUserRestricted:Object(ct["isRestricted"])(Object(xe["b"])(t)),isPaid:Object(le["isPaidTeam"])(Object(oe["d"])(t)),isEnterprise:Object(c["pageNeedsEnterprise"])(t),userId:Object(c["getCurrentUserId"])(t),featureCalendarSimpleAgendaView:Object(c["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(c["isFeatureEnabled"])(t,"feature_sonic_user_groups"),clogger:Object(M["a"])({state:t})}};var qr={showFileList:kr["g"],showKeyboardShortcuts:function e(){return kr["h"].apply(void 0,arguments)},showDownloads:kr["f"],showWhatsNew:kr["p"],showUserGroupList:kr["o"],showUserCalendar:kr["m"],openHelpModal:Ee};var Gr=Object(i["connect"])(Ur,qr)(Br);var Hr=r(273);var Wr=r(1532);var Vr=r(4199);var Kr=r(88);var zr=r(1757);var Qr=r(277);var Yr=r(198);var Jr=r(183);var Xr=r(802);var Zr=r(1567);var $r=r(71);var ea=r(1858);var ta=r(312);var ra=r(1855);var aa={autocompleteIsOpen:l["b"].bool.isRequired,openSearchAutocomplete:l["b"].func.isRequired,closeSearchAutocomplete:l["b"].func.isRequired,searchAutocompleteSuggestionAccept:l["b"].func.isRequired,searchPrecache:l["b"].func.isRequired,displayQuery:l["b"].string,telemeter:l["b"].object};var na={displayQuery:"",telemeter:$r["d"]};var ia=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(zr["a"])(r,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]);r.precacheSearch=Object(w["throttle"])(r.precacheSearch.bind(r),6e4);return r}k()(t,[{key:"onClick",value:function e(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function e(){this.props.openSearchAutocomplete();this.precacheSearch()}},{key:"onSearchInputBoxEscape",value:function e(){this.props.closeSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Xr["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"precacheSearch",value:function e(){this.props.searchPrecache()}},{key:"render",value:function e(){var t=p()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!pe["isDesktop"],"p-global_nav__top_search--primarysearch":true,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return n.a.createElement(Jr["a"],{enabled:["feature_primary_search"]},n.a.createElement(B["c"],{className:t,onClick:this.onClick},n.a.createElement(ra["a"],{autoFocus:false,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]);return t}(a["PureComponent"]);ia.displayName="AutocompleteInputInPrimarySearch";ia.defaultProps=na;var sa=function e(t){return{autocompleteIsOpen:Object(Yr["isSearchAutocompleteOpen"])(t),displayQuery:Object(Hr["getSearchInputBoxDisplayQuery"])(t),telemeter:Object($r["c"])({state:t})}};var oa={searchPrecache:ta["o"],openSearchAutocomplete:Yr["openSearchAutocomplete"],closeSearchAutocomplete:Yr["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Zr["a"]};var la=Object(i["connect"])(sa,oa)(ia);var ca={isOpen:l["b"].bool.isRequired,userQuery:l["b"].string.isRequired,closeAutocomplete:l["b"].func.isRequired,searchAutocompleteSuggestionAccept:l["b"].func.isRequired,telemeter:l["b"].object};var ua={telemeter:$r["d"]};var da=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(zr["a"])(r,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]);r.calculatePopoverConstraints=Object(w["throttle"])(r.calculatePopoverConstraints.bind(r),1e3);r.searchHeaderBackdrop=Object(a["createRef"])();r.state={hasCalculatedConstraints:false,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}};r.autocompleteInputRef=null;return r}k()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Xr["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function e(){if(!this.autocompleteInputRef)return;var t=Object(Kr["findDOMNode"])(this.autocompleteInputRef);var r=t.getBoundingClientRect();var a=t.parentElement.getBoundingClientRect();var n=10;this.setState(function(){return{hasCalculatedConstraints:true,overlayStyle:{marginTop:a.bottom},contentStyle:{top:0,left:r.left-n,width:r.width+2*n}}})}},{key:"handleAutocompleteRef",value:function e(t){this.autocompleteInputRef=t;t&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function e(t){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===t.target&&this.props.closeAutocomplete()}},{key:"render",value:function e(){var t=this.props,r=t.isOpen,a=t.closeAutocomplete;var i="c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch";var s=r&&this.state.hasCalculatedConstraints;return n.a.createElement(Jr["a"],{enabled:["feature_primary_search"]},s&&n.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),n.a.createElement(la,{ref:this.handleAutocompleteRef}),n.a.createElement(Qr["a"],{ariaRole:"dialog",ariaLabel:"Search",isOpen:s,position:"bottom-right",onClose:a,shouldFade:false,overlayClassName:i,allowanceX:20,allowanceY:0,shouldFocusAfterRender:false,shouldReturnFocusAfterClose:false,onResize:this.calculatePopoverConstraints,shouldObserveResize:true,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},r&&n.a.createElement("div",{className:"c-search-autocomplete"},n.a.createElement(ea["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]);return t}(a["PureComponent"]);da.displayName="AutocompleteInPrimarySearch";da.defaultProps=ua;var pa=function e(t){return{userQuery:Object(Hr["getSearchInputBoxUserQuery"])(t),isOpen:Object(Yr["isSearchAutocompleteOpen"])(t),telemeter:Object($r["c"])({state:t})}};var va={closeAutocomplete:Yr["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Zr["a"]};var ma=Object(i["connect"])(pa,va)(da);var ha=r(795);var fa=r(850);var ba=r(531);function ga(e){return"Vsearch"===Object(Dt["a"])(e)}var _a=new m["b"]("search");var ya={displayQuery:l["b"].string,clearSearchInputField:l["b"].func,orgName:l["b"].string,teamName:l["b"].string,clogger:l["b"].object.isRequired,openFromClick:l["b"].func,openSearchAutocomplete:l["b"].func.isRequired,isPrimarySearchFeatureEnabled:l["b"].bool.isRequired,showSearchAsActive:l["b"].bool.isRequired};var Oa={displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:w["noop"],clearSearchInputField:w["noop"]};var ka=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.onClearClick=r.onClearClick.bind(r);return r}k()(t,[{key:"onClick",value:function e(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"onClearClick",value:function e(t){t.stopPropagation();this.props.clearSearchInputField()}},{key:"render",value:function e(){var t=this.props,r=t.displayQuery,i=t.orgName,s=t.teamName,o=t.isPrimarySearchFeatureEnabled,l=t.showSearchAsActive;var c=r?n.a.createElement(a["Fragment"],null,n.a.createElement(ha["a"],{text:r,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:false,noLinking:true,noSpecials:true,noHighlights:true}),n.a.createElement(B["c"],{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:_a.t("Clear")},n.a.createElement(I["b"],{type:"times-small"}))):n.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},_a.rt("Search {teamName}",{teamName:i||s||""}));var u=p()({"p-global_nav__top_search":true,"p-global_nav__top_search--no_history":!Object(L["c"])()});var d=!o||!l;return n.a.createElement(a["Fragment"],null,d&&n.a.createElement(B["c"],{className:u,onClick:this.onClick},n.a.createElement(I["b"],{type:"search-medium",className:"p-global_nav__top_search_icon"}),c),!o&&n.a.createElement(Vr["a"],null),!d&&n.a.createElement(ma,null))}}]);return t}(a["Component"]);ka.displayName="SearchPlaceholderInput";ka.defaultProps=Oa;var Ea=function e(t){return{displayQuery:Object(Hr["getSearchInputBoxDisplayQuery"])(t),orgName:Object(oe["f"])(t)||"",teamName:Object(le["getTeamDisplayName"])(Object(oe["d"])(t)),clogger:Object(M["a"])({state:t}),isPrimarySearchFeatureEnabled:Object(ba["a"])(t),showSearchAsActive:ga(t)||Object(Yr["isSearchAutocompleteOpen"])(t)}};var ja={openSearchAutocomplete:Yr["openSearchAutocomplete"],openFromClick:fa["a"],clearSearchInputField:Wr["a"]};var Ca=Object(i["connect"])(Ea,ja)(ka);var Sa=r(2402);var wa=new m["b"]("global_nav");var Ia=-12;var Ta=-4;var Aa={theme:l["b"].string,renderSonicMenu:l["b"].func,featureGlobalNav:l["b"].bool};var Na={theme:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var Pa=function e(t){var r=t.theme,i=t.renderSonicMenu,s=t.featureGlobalNav;if(!s)return null;var o=p()("p-global_nav__top",r&&"p-global_nav__top--theme-"+r);return n.a.createElement("div",{className:o},n.a.createElement(It,{renderSonicMenu:i}),n.a.createElement(se,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(Ca,null),n.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),n.a.createElement(xr,null),n.a.createElement(Tr,{icon:"star-o",pane:Object(f["a"])()?"starred_items":"stars",tooltip:n.a.createElement(a["Fragment"],null,wa.t("Starred items"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(h["isMac"])()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":wa.t("Starred items")}),n.a.createElement(Gr,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(hr,null))};Pa.displayName="TopNav";Pa.defaultProps=Na;var Ra=function e(t){return{theme:Object(v["g"])(t,"sidebar_theme"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ma=Object(i["connect"])(Ra)(Pa);var xa=r(1783);var Da=r(11);var Fa=r(383);var La=r(1312);var Ba=r(217);var Ua=r(98);var qa=r(379);var Ga=r(1217);var Ha=r(1500);var Wa=r(1165);var Va=r(1506);var Ka=Object(ge["b"])("TS.ui.invite.showInviteMemberToChannelDialog");var za=Object(ge["b"])("TS.ui.mpim_conversion_modal.startMpimConversionModal");var Qa=r(1753);var Ya=Object(ge["b"])("TS.ui.apps_browser.startAddApps");var Ja=Object(ge["b"])("TS.notifs.canModelObHaveChannelMentions",function(){return false});var Xa=Object(ge["b"])("TS.notifs.muteOrUnmuteCorG");var Za=r(221);var $a=r(40);var en=r.n($a);var tn=r(867);var rn=new m["b"]("global_nav");var an={channelId:l["b"].string.isRequired,channel:l["b"].object,close:l["b"].func,back:l["b"].func,featureGlobalNav:l["b"].bool};var nn={channel:void 0,close:w["noop"],back:w["noop"],featureGlobalNav:false};var sn=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onDateChange=r.onDateChange.bind(r);return r}k()(t,[{key:"onDateChange",value:function e(t){var r=this.props,a=r.channelId,n=r.close;var i=en()(t,"YYYY-MM-DD").format("X");Object(Bt["q"])(a,i);n()}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.back,i=t.featureGlobalNav;if(!i)return null;var s=r.created?en()(r.created,"X").format("YYYY-MM-DD"):void 0;return n.a.createElement(T["f"],g()({},this.props,{width:325}),n.a.createElement(tn["a"],{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:s,disableDatesAfter:en()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),n.a.createElement(B["c"],{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back","data-qa":"date_picker_back",onClick:a},rn.t("Back to menu")))}}]);return t}(a["Component"]);sn.displayName="JumpToDate";sn.defaultProps=nn;var on=function e(t,r){var a=r.channelId;return{channel:Object(Ft["d"])(t,a),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var ln=Object(i["connect"])(on)(sn);var cn=r(1499);function un(e,t){var r=Object(Ft["d"])(e,t);if(!e||!r)return null;var a=Object(xe["d"])(e,Object(Da["getMemberIdFromIm"])(r));var n=Object(xe["b"])(e);var i=Object(Da["getChannelType"])(r);var s="im"===i;var o="mpim"===i;var l="channel"===i;var u="private"===i;var d=l||u;var p=Object(Da["isYou"])(n.id,r);var v=Object(cn["c"])(e,r);var m=true;var h=!s&&!Object(ct["isUltraRestricted"])(n);var f=p;var b=s&&!p;var g=s&&!p&&!Object(Da["isSlackbot"])(r)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isUltraRestricted"])(a)&&!Object(ct["isDeleted"])(a)&&!Object(ct["isExternal"])(a);var _=true;var y=d&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n)&&Object(Da["isMemberOfChannel"])(r)&&(!Object(Da["isRequired"])(r)||Object(dt["c"])(r))&&(!Object(c["pageNeedsEnterprise"])(e)||!(Object(Da["isOrgShared"])(r)&&!Object(dt["b"])()));var O=Object(ut["R"])(e,t);var k=o&&Object(ut["F"])(e)&&!Object(Da["isExternallySharedChannel"])(r);var E=!s&&(o||Object(Da["isMemberOfChannel"])(r)&&!Object(Da["isArchived"])(r));var j=E;var C=true;var S=Object(ot["a"])(e,"allow_email_ingestion");var w=d&&Object(Da["isMemberOfChannel"])(r)&&!Object(Da["isArchived"])(r)&&!Object(Da["isRequired"])(r)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n);var I=d&&!Object(Da["isMemberOfChannel"])(r)&&!Object(Da["isArchived"])(r)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n);var T=!l&&Object(ut["K"])(e,t);var A=Object(Da["isArchived"])(r)&&(!Object(c["isFeatureEnabled"])(e,"feature_esc_disconnect_v2_client")||!Object(Da["isFrozen"])(r))&&!Object(Da["getIsChannelMoved"])(r);var N=Object(Da["isArchived"])(r)&&Object(ct["isAdmin"])(n)&&l&&!Object(Da["isRequired"])(r);return{call:v,jump:m,invite:h,editProfile:f,viewProfile:b,addMember:g,details:_,options:y,retention:O,convertToPrivate:k,notifications:E,mute:j,apps:C,email:S,leave:w,join:I,exportHistory:T,unarchive:A,delete:N}}var dn=r(113);var pn=r(365);var vn=new m["b"]("global_nav");var mn=Object(ye["b"])("Un-archive a channel",function(e,t,r){var a=r.channelId;if(!Object(c["isFeatureEnabled"])(t(),"feature_global_nav"))return;e(Object(dn["P"])({channelId:a})).catch(function(r){Object(R["a"])({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",r);var a=Object(w["get"])(r,"data.error");var i="restricted_action"===a?vn.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):vn.t("Sorry, something went wrong. Try again in a moment.");e(Object(Oe["openModal"])({element:n.a.createElement(pn["a"],{title:vn.t("Un-archive failed")},i)}))})});mn.propTypes={channelId:l["b"].string.isRequired};var hn=mn;var fn=new m["b"]("global_nav");var bn={channelId:l["b"].string.isRequired,channel:l["b"].object.isRequired,onMenuItemSelected:l["b"].func,team:l["b"].object,canManagePostingPermissions:l["b"].bool,showManagePostingPermissionsNewBadge:l["b"].bool,actions:l["b"].object,displayName:l["b"].string,isMuted:l["b"].bool,joinChannel:l["b"].func,unarchiveChannel:l["b"].func,gantryStartCall:l["b"].func,openChannelNotificationPrefsModal:l["b"].func,featureGlobalNav:l["b"].bool,featureAnnounceOnly:l["b"].bool};var gn={onMenuItemSelected:w["noop"],actions:void 0,displayName:void 0,isMuted:false,joinChannel:w["noop"],unarchiveChannel:w["noop"],gantryStartCall:w["noop"],openChannelNotificationPrefsModal:w["noop"],team:void 0,canManagePostingPermissions:false,showManagePostingPermissionsNewBadge:false,featureGlobalNav:false,featureAnnounceOnly:false};var _n=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMenuItemSelected=r.onMenuItemSelected.bind(r);r.getMuteLabel=r.getMuteLabel.bind(r);r.getItems=r.getItems.bind(r);r.preventClose=false;r.state={mode:"menu"};return r}k()(t,[{key:"onMenuItemSelected",value:function e(t,r){if(this.preventClose){this.preventClose=false;return}this.props.onMenuItemSelected(t,r)}},{key:"getMuteLabel",value:function e(){var t=this.props,r=t.isMuted,a=t.channel,n=t.displayName,i=t.featureGlobalNav;var s="mpim"===Object(Da["getChannelType"])(a);if(!i)return null;if(r&&s)return fn.t("Unmute this conversation");if(r&&!s)return fn.t("Unmute {channelName}",{channelName:n});if(!r&&s)return fn.t("Mute this conversation");if(!r&&!s)return fn.t("Mute {channelName}",{channelName:n});return null}},{key:"getItems",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.channel,i=r.actions,s=r.displayName,o=r.joinChannel,l=r.team,c=r.canManagePostingPermissions,u=r.showManagePostingPermissionsNewBadge,d=r.featureGlobalNav,p=r.featureAnnounceOnly;var v=Object(Da["getChannelType"])(n);var h=Object(Da["getMemberIdFromIm"])(n);if(!i||!v||!d)return[];var f="mpim"===v;var b="channel"===v;var g="private"===v;var _=b||g;var y=[{label:fn.t("Jump to date\u2026"),show:i.jump,key:"jump",click:function e(){t.preventClose=true;t.setState(function(){return{mode:"jump-to-date"}})}},{label:f?fn.t("Invite another member\u2026"):fn.rt("Add people to {channelName}\u2026",{channelName:s}),show:i.invite,key:"invite",click:function e(){return f?Object(Qa["a"])(n):Object(Ha["a"])(a)}},{label:fn.t("Edit your profile"),show:i.editProfile,key:"editProfile",click:function e(){return Object(Wa["a"])()}},{label:fn.t("View {userPossesive} profile",{userPossesive:Object(m["c"])(s)}),show:i.viewProfile,key:"viewProfile",click:function e(){return Object(Bt["i"])(h)}},{label:fn.t("Add {userName} to a channel\u2026",{userName:s}),show:i.addMember,key:"addMember",click:function e(){return Ka(h)}},{label:_?fn.t("View channel details"):fn.t("View conversation details"),show:i.details,key:"details",click:function e(){return Object(Er["c"])("details")}},{label:fn.t("Convert to a private channel\u2026"),show:i.convertToPrivate,key:"convertToPrivate",click:function e(){return za(n)}},{label:fn.t("Edit message retention\u2026"),show:i.retention,key:"retention",click:function e(){return Object(Va["a"])(a,"retention")}},{label:fn.t("Manage posting permissions"),show:p&&c&&i.options,key:"managePostingPermissions",badgeLabel:u?fn.t("NEW"):void 0,click:function e(){return Object(Va["a"])(a,"posting_privilege")}},{label:fn.t("Additional options\u2026"),show:i.options,key:"options",click:function e(){return Object(Va["a"])(a)}},{type:"separator",key:"separator-1"},{label:fn.t("Notification preferences\u2026"),show:i.notifications,key:"notifications",click:function e(){return t.props.openChannelNotificationPrefsModal({channelId:a})}},{label:this.getMuteLabel(),show:i.mute,key:"mute",click:function e(){return Xa(a)}},{type:"separator",key:"separator-2"},{label:fn.t("Add an app"),show:i.apps,key:"apps",click:function e(){return Ya()}},{label:f?fn.t("Send email to this conversation\u2026"):fn.t("Send email to {channelName}\u2026",{channelName:s}),show:i.email,key:"email",href:Object(le["getTeamUrl"])(l,"/services/new/email"),target:"_blank"},{type:"separator",key:"separator-3"},{label:fn.t("Leave {channelName}",{channelName:s}),show:i.leave,key:"leave",click:function e(){return Object(Za["r"])(a)}},{label:fn.t("Join {channelName}",{channelName:s}),show:i.join,key:"join",click:function e(){return o({channelId:a})}},{type:"separator",key:"separator-4"},{label:fn.t("Export message history\u2026"),show:i.exportHistory,key:"exportHistory",click:function e(){return Object(Va["a"])(a,"export")}},{type:"separator",key:"separator-5"},{label:fn.t("Un-archive {channelName}",{channelName:s}),show:i.unarchive,key:"unarchive",click:function e(){return t.props.unarchiveChannel({channelId:a})}},{label:fn.t("Delete {channelName}",{channelName:s}),show:i.delete,key:"unarchive",click:function e(){return Object(Va["a"])(a,"delete")}}];return y.filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function e(){var t=this;switch(this.state.mode){case"menu":return n.a.createElement(T["a"],g()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:true}));case"jump-to-date":return n.a.createElement(ln,g()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function e(){t.preventClose=true;t.setState(function(){return{mode:"menu"}})}}));default:return null}}}]);return t}(a["Component"]);_n.displayName="Menu";_n.defaultProps=gn;var yn=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);var i=Object(oe["d"])(t);var s=Object(ut["M"])(t,a);var o=Object(xe["b"])(t);var l=Object(ct["isAdmin"])(o)||Object(ct["isOwner"])(o);var u=l&&!Object(Da["isOrgSharedPublicOrPrivateChannel"])(n);return{channel:n,actions:un(t,a),displayName:Object(Da["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),isMuted:Object(Ba["isChannelMutedById"])(t,a),team:i,canManagePostingPermissions:s,showManagePostingPermissionsNewBadge:u,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureAnnounceOnly:Object(c["isFeatureEnabled"])(t,"feature_announce_only")}};var On={joinChannel:Ua["joinConversationApi"],unarchiveChannel:hn,gantryStartCall:qa["d"],openChannelNotificationPrefsModal:Ga["a"]};var kn=Object(i["connect"])(yn,On)(_n);var En=new m["b"]("channel_header");var jn={channelId:l["b"].string,name:l["b"].string,type:l["b"].string.isRequired,userId:l["b"].string,members:l["b"].oneOfType([l["b"].array,l["b"].bool]),presences:l["b"].oneOfType([l["b"].object,l["b"].bool]),currentUser:l["b"].string.isRequired,isMuted:l["b"].bool,isOrgShared:l["b"].bool.isRequired,isExternallyShared:l["b"].bool.isRequired,isPendingExternallyShared:l["b"].bool.isRequired,sharedTeamIds:l["b"].arrayOf(l["b"].string),className:l["b"].string,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Cn={channelId:void 0,name:void 0,userId:void 0,members:void 0,presences:void 0,sharedTeamIds:void 0,className:void 0,isMuted:false,featureGlobalNav:false};var Sn=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderChannel=r.renderChannel.bind(r);r.renderPrivate=r.renderPrivate.bind(r);r.renderIM=r.renderIM.bind(r);r.renderMPIM=r.renderMPIM.bind(r);r.renderMenu=r.renderMenu.bind(r);r.onClick=r.onClick.bind(r);return r}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderChannel",value:function e(t){return n.a.createElement(t,null,this.props.name)}},{key:"renderPrivate",value:function e(t){return n.a.createElement(a["Fragment"],null,n.a.createElement(I["b"],{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),n.a.createElement(t,null,this.props.name))}},{key:"renderIM",value:function e(t){var r=this.props.userId;return n.a.createElement(a["Fragment"],null,n.a.createElement(t,null,n.a.createElement(Fa["a"],{id:r,key:"name"})),n.a.createElement(Pt["a"],{memberId:r,className:"p-global_nav__channel_name_presence",key:"presence"}),n.a.createElement(Nt["b"],{memberId:r,tooltip:false,key:"custom-status"}))}},{key:"renderMPIM",value:function e(t){var r=this;var i=this.props,s=i.members,o=i.presences;var l=Object(w["flatMap"])(Object(w["filter"])(s,function(e){return e!==r.props.currentUser}),function(e,t){var r=o[e]===xt["PRESENCE_AWAY"]?"p-global_nav__channel_name_member--away":void 0;return n.a.createElement(a["Fragment"],{key:e},t>0?", ":null,n.a.createElement(Fa["a"],{id:e,className:r}),n.a.createElement(Nt["b"],{memberId:e,tooltip:false,noText:true}))});return n.a.createElement(t,null,l)}},{key:"renderShared",value:function e(){var t=this.props,r=t.isOrgShared,a=t.isExternallyShared,i=t.isPendingExternallyShared,s=t.sharedTeamIds;if(r)return n.a.createElement(U["c"],{tip:En.t("Shared channel"),position:"bottom"},n.a.createElement(I["b"],{type:"shared-channel",inline:true,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"}));if(a)return n.a.createElement(La["a"],{sharedTeamIds:s,pending:i,inline:true,tooltip:true,tooltipPosition:"bottom",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"});return null}},{key:"renderMenu",value:function e(t){return n.a.createElement(kn,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.type,i=r.className,s=r.isMuted,o=r.featureGlobalNav;if(!o)return null;var l=function e(r){var a=r.children;return n.a.createElement(T["e"],{renderMenu:t.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4,onClick:t.onClick},n.a.createElement(B["c"],{className:"p-global_nav__channel_name_name"},a))};var c=void 0;switch(a){case"channel":c=this.renderChannel(l);break;case"private":c=this.renderPrivate(l);break;case"im":c=this.renderIM(l);break;case"mpim":c=this.renderMPIM(l);break;default:break}var u=p()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+a,s&&"p-global_nav__channel_name--muted",i);return n.a.createElement("div",{className:u,"data-qa":"channel_name"},c,this.renderShared())}}]);return t}(a["Component"]);Sn.displayName="Name";Sn.defaultProps=Cn;var wn=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);var i=Object(Da["getMemberIdsFromMpim"])(n);var s=i&&Object(w["mapValues"])(Object(w["keyBy"])(i),function(e){return Object(xt["getPresenceByMemberId"])(t,e)});return{channelId:a,name:Object(Da["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),type:Object(Da["getChannelType"])(n),userId:Object(Da["getMemberIdFromIm"])(n)||n.user_id,currentUser:Object(c["getCurrentUserId"])(t),isMuted:Object(Ba["isChannelMutedById"])(t,a),members:i,presences:s,isOrgShared:Object(Da["isOrgSharedPublicOrPrivateChannel"])(n),isExternallyShared:Object(Da["isExternallySharedChannel"])(n),isPendingExternallyShared:Object(Da["isPendingExternallySharedChannel"])(n),sharedTeamIds:Object(Da["getPendingAndConnectedTeamIds"])(t,n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var In=Object(i["connect"])(wn)(Sn);var Tn=Object(ge["b"])("TS.ui.channel_topic_dialog.start");var An={start:Tn};var Nn=new m["b"]("global_nav");var Pn={topic:l["b"].string,isChannel:l["b"].bool.isRequired,canEdit:l["b"].bool,featureGlobalNav:l["b"].bool.isRequired};var Rn={topic:void 0,canEdit:true};var Mn=function e(t){if(t.target&&"A"===t.target.tagName)return;Tn()};var xn=function e(t){var r=t.topic,i=t.isChannel,s=t.canEdit,o=t.featureGlobalNav;if(!o||!i)return null;var l=void 0;if(r){var c=n.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},Nn.t("edit"));l=n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_topic_text"},n.a.createElement(ha["a"],{text:r,className:"p-global_nav__channel_topic_content",noJumbomoji:true,noHighlights:true})),s&&c)}else l=s?n.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},Nn.t("Add a topic\u2026")):null;var u=p()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!r});return n.a.createElement(B["c"],{className:u,onClick:Mn},l)};xn.displayName="Topic";xn.defaultProps=Rn;var Dn=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);return{topic:n&&n.topic&&n.topic.value,isChannel:!!(Object(Da["isPublicChannel"])(n)||Object(Da["isPrivateChannel"])(n)),canEdit:Object(ut["z"])(t,a).ok,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Fn=Object(i["connect"])(Dn)(xn);var Ln=r(865);var Bn=new m["b"]("global_nav");var Un={channelId:l["b"].string.isRequired,type:l["b"].oneOf(["channel","private","im","mpim"]),starred:l["b"].bool,show:l["b"].bool.isRequired,updateStar:l["b"].func.isRequired,featureGlobalNav:l["b"].bool.isRequired,clogger:l["b"].object.isRequired};var qn={starred:false,type:"channel"};var Gn=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}k()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.channelId,a=t.starred,n=t.clogger;this.props.updateStar(!a,{channel:r});n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"getTip",value:function e(){var t=this.props,r=t.type,a=t.starred,n=t.featureGlobalNav;if(!n)return null;if("im"===r||"mpim"===r)return a?Bn.t("Unstar this conversation"):Bn.t("Star this conversation");return a?Bn.t("Unstar this channel"):Bn.t("Star this channel")}},{key:"render",value:function e(){var t=this.props,r=t.starred,a=t.show;if(!a)return null;return n.a.createElement(U["c"],{position:"bottom",tip:this.getTip()},n.a.createElement(B["c"],{className:p()("p-global_nav__channel_star",r&&"p-global_nav__channel_star--starred"),onClick:this.onClick,"aria-label":this.getTip()},n.a.createElement(I["b"],{type:r?"star":"star-o",size:"inherit"})))}}]);return t}(a["Component"]);Gn.displayName="Star";Gn.defaultProps=qn;var Hn=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);return{type:Object(Da["getChannelType"])(n),show:Object(Da["canStarOrUnstarChannel"])(n),starred:Object(Da["isStarred"])(n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Wn={updateStar:Ln["a"]};var Vn=Object(i["connect"])(Hn,Wn)(Gn);var Kn=r(278);var zn=r(191);var Qn=new m["b"]("global_nav");var Yn={count:l["b"].number,isChannel:l["b"].bool,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Jn={count:void 0,isChannel:true,featureGlobalNav:false};var Xn=function e(t){var r=t.count,i=t.isChannel,s=t.clogger,o=t.featureGlobalNav;if(!o)return null;if(!r&&!i)return null;var l=function e(t){var r=t.key,i=t.text;return n.a.createElement(a["Fragment"],{key:r},n.a.createElement("span",{className:"bold"},i),"\xa0")};var c=Object(w["isNumber"])(r)?Qn.rt("{count, plural, =1 {<span>#</span>Pin} other {<span>#</span>Pins}}",{count:r},l):Qn.rt("<span>\u2013</span>Pins",{count:r},l);var u=Object(w["isNumber"])(r)?Qn.t("{count, plural, =1 {# pins} other {# pins}}. View pinned items",{count:r},l):Qn.t("View pinned items");var d=function e(){if(Object(f["a"])()){var t=Object(Kn["b"])();Object(Kn["c"])(zn["d"],t.params)}Object(Er["f"])();s.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_PINS"}}})};return n.a.createElement(U["c"],{position:"bottom",tip:Qn.t("View pinned items"),offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:d,"aria-label":u},c))};Xn.displayName="Pins";Xn.defaultProps=Jn;var Zn=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);return{count:n&&n.pinned_items_count,isChannel:Object(Da["isPublicChannel"])(n)||Object(Da["isPrivateChannel"])(n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var $n=Object(i["connect"])(Zn)(Xn);var ei=r(241);var ti=new m["b"]("global_nav");var ri={count:l["b"].number,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ai={count:void 0,featureGlobalNav:false};var ni=function e(t){var r=t.count,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=function e(t){var r=t.key,i=t.text;return n.a.createElement(a["Fragment"],{key:r},n.a.createElement("span",{className:"bold"},i),"\xa0")};var l=Object(w["isNumber"])(r)?ti.rt("{count, plural, =1 {<span>#</span>Member} other {<span>#</span>Members}}",{count:r},o):ti.rt("<span>\u2013</span>Members",{count:r},o);var c=Object(w["isNumber"])(r)?ti.t("{count, plural, =1 {# member} other {# members}}. View member list",{count:r},o):ti.t("View member list");var u=function e(){Object(Er["e"])();i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_MEMBERS"}}})};return n.a.createElement(U["c"],{position:"bottom",tip:ti.t("View member list"),offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item",onClick:u,"aria-label":c},l))};ni.displayName="Members";ni.defaultProps=ai;var ii=function e(t,r){var a=r.channelId;var n=Object(ei["getMemberCounts"])(t,a);return{count:n&&n.counts&&n.counts.member_count,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var si=Object(i["connect"])(ii)(ni);var oi=new m["b"]("channel_header");var li={channelId:l["b"].string.isRequired,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ci={featureGlobalNav:false};var ui=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.renderMenu=r.renderMenu.bind(r);return r}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_ACTIONS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(kn,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4,onClick:this.onClick},n.a.createElement(U["c"],{position:"bottom-right",tip:oi.t("Channel settings"),offsetY:-4},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item","aria-label":oi.t("Channel settings")},n.a.createElement(I["b"],{type:"cog-o"}))))}}]);return t}(a["Component"]);ui.displayName="Actions";ui.defaultProps=ci;var di=function e(t){return{featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var pi=Object(i["connect"])(di)(ui);var vi=r(1085);var mi=new m["b"]("global_nav");var hi={isBot:l["b"].bool,activeTab:l["b"].oneOf(["messages","about"]),featureGlobalNav:l["b"].bool};var fi={isBot:false,activeTab:"messages",featureGlobalNav:false};var bi=function e(t){var r=t.isBot,i=t.activeTab,s=t.featureGlobalNav;if(!s||!r)return null;return n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},n.a.createElement(B["c"],{className:p()("p-global_nav__channel_bot_tab","messages"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(vi["a"])("messages")},"data-qa":"global_nav_channel_bot_tabs_messages"},mi.t("Messages")),n.a.createElement(B["c"],{className:p()("p-global_nav__channel_bot_tab","about"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(vi["a"])("about")},"data-qa":"global_nav_channel_bot_tabs_about"},mi.t("About"))),n.a.createElement("div",{className:"p-global_nav__channel_divider"}))};bi.displayName="BotTabs";bi.defaultProps=fi;var gi=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);var i=Object(Da["getMemberIdFromIm"])(n);if(!i)return{};var s=Object(xe["d"])(t,i);return{isBot:Object(ct["isAppOrBot"])(s),activeTab:Object(gr["getActiveAppTab"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var _i=Object(i["connect"])(gi)(bi);var yi=r(1047);var Oi=new m["b"]("global_nav");var ki={show:l["b"].bool,channel:l["b"].object,tooltipMessage:l["b"].string,featureGlobalNav:l["b"].bool,startCall:l["b"].func};var Ei={show:false,channel:void 0,tooltipMessage:void 0,featureGlobalNav:false,startCall:w["noop"]};var ji=function e(t){var r=t.show,a=t.channel,i=t.tooltipMessage,s=t.featureGlobalNav,o=t.startCall;if(!r||!a||!s)return null;return n.a.createElement(U["c"],{position:"bottom",tip:i,offsetY:-4},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function e(){return Object(f["a"])()?o():Object(yi["c"])(a)},"aria-label":Oi.t("Start a call")},n.a.createElement(I["b"],{className:"p-global_nav__channel_call_button_icon",type:"phone"})))};ji.displayName="CallButton";ji.defaultProps=Ei;var Ci=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);if(!n)return null;return{show:Object(cn["c"])(t,n),channel:n,tooltipMessage:Object(cn["b"])(t,n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Si={startCall:qa["d"]};var wi=Object(i["connect"])(Ci,Si)(ji);var Ii=new m["b"]("channel_header");var Ti={isChannel:l["b"].bool,active:l["b"].bool,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Ai={isChannel:true,active:false,featureGlobalNav:false};var Ni=function e(t){var r=t.isChannel,a=t.active,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=void 0;r&&a&&(o=Ii.t("Hide channel details"));r&&!a&&(o=Ii.t("View channel details"));!r&&a&&(o=Ii.t("Hide conversation details"));r||a||(o=Ii.t("View conversation details"));var l=p()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":a});var c=function e(){if(Object(f["a"])()){var t=Object(Kn["b"])();Object(Kn["c"])(zn["d"],t.params)}Object(Er["d"])("details");i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_DETAILS"}}})};return n.a.createElement(U["c"],{position:"bottom-right",tip:o,offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:l,onClick:c},Ii.t("Details")))};Ni.displayName="Details";Ni.defaultProps=Ai;var Pi=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);if(!n)return null;return{isChannel:Object(Da["isPublicChannel"])(n)||Object(Da["isPrivateChannel"])(n),active:"details"===Object(Or["i"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Ri=Object(i["connect"])(Pi)(Ni);var Mi={channelId:l["b"].string.isRequired,channelType:l["b"].oneOf(["channel","private","mpim","im"]),featureGlobalNavLayout:l["b"].bool};var xi={channelType:void 0,featureGlobalNavLayout:false};var Di=function e(t){var r=t.channelId,a=t.channelType,i=t.featureGlobalNavLayout;if(!r||!a)return null;var s=p()("p-global_nav__channel",{"p-global_nav__channel--relayout":i});return n.a.createElement("div",{className:s},n.a.createElement(Vn,{channelId:r}),n.a.createElement(In,{channelId:r}),n.a.createElement(Fn,{channelId:r}),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),n.a.createElement(_i,{channelId:r}),"im"!==a&&n.a.createElement(si,{channelId:r}),n.a.createElement($n,{channelId:r}),n.a.createElement(Ri,{channelId:r}),n.a.createElement("div",{className:"p-global_nav__channel_divider"}),n.a.createElement(wi,{channelId:r}),n.a.createElement(pi,{channelId:r}))};Di.displayName="ModelHeader";Di.defaultProps=xi;var Fi=function e(t,r){var a=r.channelId;var n=Object(Ft["d"])(t,a);if(!n)return{};return{channelType:Object(Da["getChannelType"])(n),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var Li=Object(i["connect"])(Fi)(Di);var Bi=r(138);var Ui=new m["b"]("global_nav");var qi={featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool};var Gi={featureGlobalNav:false,featureGlobalNavLayout:false};var Hi=function e(t){var r=t.featureGlobalNav,a=t.featureGlobalNavLayout;if(!r)return null;var i=Ui.t("Threads");var s="p-global_nav__channel_name p-global_nav__channel_name--synthetic";var o=p()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":a});return n.a.createElement("div",{className:o,"data-qa":"channel_name"},n.a.createElement("div",{className:s},i))};Hi.displayName="AllThreadsHeader";Hi.defaultProps=Gi;var Wi=Object(Bi["a"])("feature_global_nav","feature_global_nav_layout")(Hi);var Vi=r(132);var Ki=r(1687);var zi=r(326);var Qi=r(1335);var Yi=new m["b"]("global_nav");var Ji={hasUnreads:l["b"].bool,sortOrder:l["b"].string,newUnreads:l["b"].number,setUserPrefByApi:l["b"].func,featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool};var Xi={hasUnreads:true,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:w["noop"],featureGlobalNav:false,featureGlobalNavLayout:false};var Zi=function(e){S()(t,e);function t(e){y()(this,t);var r=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSortButton=r.renderSortButton.bind(r);r.renderSortMenu=r.renderSortMenu.bind(r);return r}k()(t,[{key:"changeSort",value:function e(t){if(t===this.props.sortOrder)return;this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t});Object(Qi["b"])()}},{key:"renderSortMenu",value:function e(t){var r=this;if(!this.props.featureGlobalNav)return null;var a=[{label:Yi.t("Alphabetically"),click:function e(){return r.changeSort("alphabetical")}},{label:Yi.t("Scientifically"),click:function e(){return r.changeSort("priority")}},{label:Yi.t("Newest channel"),click:function e(){return r.changeSort("newest")}},{label:Yi.t("Oldest channel"),click:function e(){return r.changeSort("oldest")}}];return n.a.createElement(T["a"],g()({},t,{template:a}))}},{key:"renderSortButton",value:function e(){var t=this.props,r=t.hasUnreads,a=t.sortOrder,i=t.featureGlobalNav;if(!i)return null;if(!r)return null;var s={alphabetical:Yi.rt("<strong>Sort:</strong> Alphabetically"),priority:Yi.rt("<strong>Sort:</strong> Scientifically"),oldest:Yi.rt("<strong>Sort:</strong> Oldest channel"),newest:Yi.rt("<strong>Sort:</strong> Newest channel")};var o=s[a];return n.a.createElement(T["e"],{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},n.a.createElement(B["c"],{className:"p-global_nav__unread_sort"},o,n.a.createElement(I["b"],{type:"chevron-down",inline:true})))}},{key:"renderRefreshButton",value:function e(){var t=this.props,r=t.newUnreads,a=t.featureGlobalNav;if(!a||!r)return null;var i=Yi.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:r});return n.a.createElement(B["d"],{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:Qi["c"]},n.a.createElement(I["b"],{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),i)}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;var t=p()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":this.props.featureGlobalNavLayout});return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic","data-qa":"channel_name"},Yi.t("All Unreads")),this.renderRefreshButton(),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]);return t}(a["Component"]);Zi.displayName="AllUnreadsHeader";Zi.defaultProps=Xi;var $i=function e(t){return{hasUnreads:Object(zi["hasUnreads"])(t),sortOrder:Object(Ki["a"])(t),newUnreads:Object(gr["getNewUnreads"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var es={setUserPrefByApi:Vi["d"]};var ts=Object(i["connect"])($i,es)(Zi);var rs={id:l["b"].string};var as={id:void 0};var ns=function e(t){var r=t.id;if(!r)return null;if("Vall_threads"===r)return n.a.createElement(Wi,null);if("Vall_unreads"===r)return n.a.createElement(ts,null);if("Vsearch"===r)return n.a.createElement(xa["a"],null);return n.a.createElement(Li,{channelId:r})};ns.displayName="ChannelHeader";ns.defaultProps=as;var is=function e(t){return{id:Object(Dt["a"])(t)}};var ss=Object(i["connect"])(is)(ns);var os=r(1696);var ls=r(5);var cs=r.n(ls);var us={closeFlexpane:l["b"].func};var ds={closeFlexpane:w["noop"]};var ps=function e(t){return n.a.createElement(B["c"],{className:"p-global_nav__flex_btn",onClick:t.closeFlexpane},n.a.createElement(I["b"],{type:"times"}))};ps.displayName="FlexClose";ps.defaultProps=ds;var vs=Object(i["connect"])(null,{closeFlexpane:kr["a"]})(ps);var ms=r(1350);var hs=r(51);var fs=r(109);var bs=r(41);var gs=new m["b"]("global_nav");var _s=function e(t){var r=t.channelId,a=t.threadTs,i=t.name,s=t.isChannel,o=t.featureGlobalNav;if(!o)return null;var l=Object(bs["constructMsgPermalink"])(r,a);var c=void 0;if(i){var u=n.a.createElement(hs["a"],{href:l,className:"p-global_nav__flex_thread_permalink"},i);c=s?gs.rt("Thread in {channelName}",{channelName:u}):gs.rt("Thread with {displayName}",{displayName:u})}else c=gs.t("Thread");return n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},c)};_s.displayName="ThreadHeader";_s.defaultProps={channelId:void 0,threadTs:void 0,name:void 0,isChannel:true,featureGlobalNav:false};var ys=function e(t){var r=Object(Or["e"])(t)[0];var a=Object(fs["decodeThreadKey"])(r),n=a.channelId,i=a.threadTs;var s=Object(Ft["d"])(t,n);if(!s)return null;return{channelId:n,threadTs:i,name:Object(Da["getDisplayNameForChannel"])(t,s),isChannel:Object(Da["isPublicChannel"])(s)||Object(Da["isPrivateChannel"])(s),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Os=Object(i["connect"])(ys)(_s);var ks=new m["b"]("global_nav");var Es=function e(t){var r=t.name,a=t.isChannel,i=t.featureGlobalNav;if(!i)return null;return a&&r?n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},ks.t("About {channelName}",{channelName:r})):n.a.createElement("h2",{className:"p-global_nav__flex_title"},ks.t("About this conversation"))};Es.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var js=function e(t){var r=Object(Dt["a"])(t);var a=Object(Ft["d"])(t,r);if(!a)return null;return{name:Object(Da["getDisplayNameForChannel"])(t,a),isChannel:Object(Da["isPrivateChannel"])(a)||Object(Da["isPublicChannel"])(a),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Cs=Object(i["connect"])(js)(Es);var Ss=new m["b"]("global_nav");var ws={isAdminUser:l["b"].bool,isEnterprise:l["b"].bool,isDetailPane:l["b"].bool,featureGlobalNav:l["b"].bool};var Is={isAdminUser:false,isEnterprise:false,isDetailPane:false,featureGlobalNav:false};var Ts=function e(t){var r=t.isAdminUser,i=t.isEnterprise,s=t.isDetailPane,o=t.featureGlobalNav;if(!o)return null;var l=i?Ss.t("Organization Directory"):Ss.t("Workspace Directory");var c=r&&!s&&n.a.createElement(a["Fragment"],null,n.a.createElement(U["c"],{tip:Ss.t("Manage members"),position:"bottom-right"},n.a.createElement(B["c"],{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(I["b"],{type:"cog-o"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(a["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},l),c)};Ts.displayName="DirectoryHeader";Ts.defaultProps=Is;var As=function e(t){return{isAdminUser:Object(ct["isAdmin"])(Object(xe["b"])(t)),isEnterprise:Object(le["isEnterpriseTeam"])(Object(oe["d"])(t)),isDetailPane:!Object(w["isEmpty"])(Object(Or["e"])(t)),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ns=Object(i["connect"])(As)(Ts);var Ps=r(1202);var Rs=new m["b"]("global_nav");var Ms={featureGlobalNav:l["b"].bool,dispatchOpenModal:l["b"].bool};var xs={featureGlobalNav:false,dispatchOpenModal:false};var Ds=function e(t){var r=t.featureGlobalNav,i=t.dispatchOpenModal;if(!r)return null;var s=Rs.t("User Groups");var o=function e(){i({element:n.a.createElement(Ps["a"],null)})};var l=Object(dt["a"])()?n.a.createElement(a["Fragment"],null,n.a.createElement(U["c"],{tip:Rs.t("Create a user group"),position:"bottom-right"},n.a.createElement(B["c"],{"data-qa":"user_group_create_button",onClick:o,className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(I["b"],{type:"compose-dm"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"})):null;return n.a.createElement(a["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},s),l)};Ds.displayName="UserGroupsHeader";Ds.defaultProps=xs;var Fs=function e(t){return{featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ls=function e(t){return{dispatchOpenModal:function e(){return t(Oe["openModal"].apply(void 0,arguments))}}};var Bs=Object(i["connect"])(Fs,Ls)(Ds);var Us=r(193);var qs=new m["b"]("global_nav");var Gs={numDownloads:l["b"].number,featureGlobalNav:l["b"].bool,clearDownloads:l["b"].func};var Hs={numDownloads:0,featureGlobalNav:false,clearDownloads:w["noop"]};var Ws=function e(t){var r=t.numDownloads,i=t.featureGlobalNav,s=t.clearDownloads;if(!i)return null;var o=r>1&&n.a.createElement(a["Fragment"],null,n.a.createElement(B["c"],{onClick:s,className:"p-global_nav__flex_btn"},qs.t("Clear all")),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(a["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},qs.t("Downloads")),o)};Ws.displayName="DownloadsHeader";Ws.defaultProps=Hs;var Vs=function e(t){return{numDownloads:(Object(Us["getTeamDownloadIds"])(t)||[]).length,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ks={clearDownloads:function e(){return Object(Us["clearTeamDesktopDownloads"])()}};var zs=Object(i["connect"])(Vs,Ks)(Ws);var Qs=new m["b"]("global_nav");var Ys={flexName:l["b"].string,featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool,featureSonicUserGroups:l["b"].bool,flexOrigin:l["b"].string};var Js={flexName:void 0,featureGlobalNav:void 0,featureGlobalNavLayout:void 0,featureSonicUserGroups:void 0,flexOrigin:void 0};var Xs=function(e){S()(t,e);function t(){y()(this,t);return j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}k()(t,[{key:"renderTitle",value:function e(){var t=this.props,r=t.flexName,a=t.featureGlobalNav,i=t.flexOrigin,s=t.featureSonicUserGroups;if(!a)return null;var o="p-global_nav__flex_title";switch(r){case"convo":case"thread":return n.a.createElement(Os,null);case"files":if("starred_items"===i)return n.a.createElement("h2",{className:o},Qs.t("Starred Items"));return n.a.createElement("h2",{className:o},Qs.t("Files"));case"stars":case"starred_items":return n.a.createElement("h2",{className:o},Qs.t("Starred Items"));case"mentions":return n.a.createElement("h2",{className:o},Qs.t("Activity"));case"team":return n.a.createElement(Ns,null);case"whats_new":return n.a.createElement("h2",{className:o},Qs.t("What\u2019s New"));case"groups":case"user_groups":if(s)return n.a.createElement(Bs,null);return n.a.createElement("h2",{className:o},Qs.t("User Groups"));case"shortcuts":return n.a.createElement("h2",{className:o},Qs.t("Keyboard Shortcuts"));case"downloads":return n.a.createElement(zs,null);case"details":return n.a.createElement(Cs,null);case"apps":return n.a.createElement("h2",{className:o},Qs.t("About this app"));default:return n.a.createElement("h2",{className:o},"Unimplemented: ",r)}}},{key:"render",value:function e(){var t=this.props,r=t.flexName,a=t.featureGlobalNavLayout;if(!r)return null;var i=p()(cs()({"p-global_nav__flex":true,"p-global_nav__flex--sonic":Object(f["a"])(),"p-global_nav__flex--legacy":!Object(f["a"])(),"p-global_nav__flex--relayout":a},"p-global_nav__flex--"+r,true));return n.a.createElement("div",{className:i},n.a.createElement(ms["a"],null),this.renderTitle(),n.a.createElement(vs,null))}}]);return t}(a["Component"]);Xs.displayName="FlexHeader";Xs.defaultProps=Js;var Zs=function e(t){return{flexName:Object(Or["i"])(t),flexOrigin:Object(Or["c"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout"),featureSonicUserGroups:Object(c["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var $s=Object(i["connect"])(Zs)(Xs);var eo=function e(t){var r=t.featureGlobalNavLayout;return r?n.a.createElement(a["Fragment"],null,n.a.createElement(u["a"],null),n.a.createElement("div",{className:"p-global_nav p-global_nav--top_only"},n.a.createElement(Ma,null))):n.a.createElement(a["Fragment"],null,n.a.createElement(u["a"],null),n.a.createElement("div",{className:"p-global_nav"},n.a.createElement(Ma,null),n.a.createElement("div",{className:"p-global_nav__bottom"},n.a.createElement(os["a"],null),n.a.createElement(ss,null),n.a.createElement($s,null))))};eo.defaultProps={featureGlobalNavLayout:false};var to=function e(t){return{featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var ro=Object(i["connect"])(to)(eo);var ao=function e(t,r){if(!t)throw new Error("mountGlobalNav must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(ro,null)),r)};var no=function e(t,r){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(ss,null)),r)};var io=function e(t,r){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement($s,null)),r)};var so=r(44);Object(so["a"])("interop.globalNav",{mountGlobalNav:ao,mountGlobalNavChannel:no,mountGlobalNavFlex:io})},,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1364);var n=r(44);Object(n["a"])("interop.addAppToChannel",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},function(e,t,r){"use strict";r.r(t);var a=r(408);var n=r(44);Object(n["a"])("interop.addEphemeralFeedback",function(e){return TS.redux.dispatch(Object(a["b"])(e))})},function(e,t,r){"use strict";r.r(t);var a=r(1507);var n=r(44);Object(n["a"])("interop.api_unauthed",{callSlackApiUnauthed:a["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(757);Object(a["a"])("interop.appActions",{selectGlobalActions:function e(){return Object(n["b"])(TS.redux.getState())},selectGlobalActionsCache:function e(){return Object(n["c"])(TS.redux.getState())}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(182);var i=r(1839);var s=r(363);var o=r(1173);var l=r(898);var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getBoundingClientRect?t.getBoundingClientRect():{}};Object(a["a"])("interop.apps",{getAppById:function e(t){return Object(n["getAppById"])(TS.redux.getState(),t)},ingestApps:function e(t){return TS.redux.dispatch(Object(n["bulkAddApps"])(t))},clearApps:function e(){return TS.redux.dispatch(Object(n["clearApps"])())},isAppSpaceEnabled:function e(){return Object(n["isAppSpaceEnabled"])(TS.redux.getState())},isGlobalActionsEnabled:function e(){return Object(n["isGlobalActionsEnabled"])(TS.redux.getState())},openAppProfileCard:function e(t,r,a,n,i){return TS.redux.dispatch(Object(o["a"])({serviceId:t,homeWorkspaceId:r,memberId:a,coordinates:c(n),popoverProps:i}))},promiseToGetLegacyAppProfileByServiceId:function e(t){return TS.redux.dispatch(Object(s["promiseToGetLegacyAppProfileByServiceId"])({serviceId:t}))},loadAppActions:function e(){return TS.redux.dispatch(Object(i["a"])())},runAppAction:function e(t){return TS.redux.dispatch(Object(l["c"])(t))}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(350);Object(a["a"])("interop.automount.mountAllWithStore",n["b"])},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(432);var s=r(44);var o=r(199);Object(s["a"])("interop.bots",n()({},i,{getBotState:function e(){return Object(o["getBotState"])(TS.redux.getState())},getBotById:function e(t){return Object(o["getBotById"])(TS.redux.getState(),t)},getBotNameById:function e(t){return Object(o["getBotNameById"])(TS.redux.getState(),t)},getBotInfoByMsg:function e(t){return Object(o["getBotInfoByMsg"])(TS.redux.getState(),t)},getBotConfigureUrl:function e(t){return Object(o["getBotConfigureUrl"])(TS.redux.getState(),t)},isBotExternal:function e(t){return Object(o["isBotExternal"])(TS.redux.getState(),t)},ensureBotsArePresent:function e(t){return Object(o["ensureBotsArePresent"])(TS.redux.getState(),TS.redux.dispatch,t)}}))},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(379);var i=r(480);Object(a["a"])("interop.calls",{startOrJoinCall:n["e"],handleCallInvite:i["d"],handleCallInviteResponse:i["f"],handleCallInviteCancel:i["e"]})},function(e,t,r){"use strict";r.r(t);var a=r(120);var n=r(98);var i=r(19);var s=r(194);var o=r(397);var l=r(23);var c=r(1473);var u=r(895);var d=r(113);var p=r(11);var v=r(44);var m=r(686);function h(e,t){var r=TS.redux.getState();var a=Object(i["d"])(r,e,t);return TS.redux.channels.interop.maybeWrapEntity(a)}function f(e,t){if(!e)return null;var r=h(e,t);if(r&&r.is_channel)return r;return null}function b(e,t){if(!e)return null;var r=h(e,t);if(r&&r.is_group&&!r.is_mpim)return r;return null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=TS.redux.channels.getEntityById(e,t);if(r&&r.is_group&&r.is_mpim)return r;return null}function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=TS.redux.channels.getEntityById(e,t);if(Object(p["isIm"])(r))return r;return null}function y(){return TS.redux.dispatch(Object(n["getGeneralChannel"])())}function O(e,t){return TS.redux.dispatch(Object(s["a"])({channel:e,isBulkUpsert:t}))}function k(e){return TS.redux.dispatch(Object(d["d"])(e))}function E(e){return TS.redux.dispatch(Object(d["g"])(e))}function j(e){return TS.redux.dispatch(Object(d["f"])(e))}function C(e){return TS.redux.dispatch(Object(d["e"])(e))}function S(e){var t=TS.redux.getState();return Object(i["u"])(t,e)}function w(e,t){return TS.redux.dispatch(Object(d["E"])({channelId:e,topic:t}))}function I(e){var t=TS.redux.getState();var r=Object(l["b"])(t);Object(o["c"])(r,e)}function T(e){var t=TS.redux.getState();var r=Object(l["b"])(t);return Object(o["b"])(r,e)}function A(){return Object(o["f"])()}function N(e,t){return TS.redux.dispatch(Object(c["a"])({channel:e,user:t}))}function P(){return TS.redux.dispatch(n["markMostRecentMsgRead"].apply(void 0,arguments))}function R(){return TS.redux.dispatch(n["setChannelTopic"].apply(void 0,arguments))}function M(e){return Object(i["p"])(TS.redux.getState(),e)}function x(){return Object(i["q"])(TS.redux.getState())}function D(){return Object(i["b"])(TS.redux.getState())}function F(){return TS.redux.dispatch(n["addChannel"].apply(void 0,arguments))}function L(){return TS.redux.dispatch(n["setChannelPurpose"].apply(void 0,arguments))}function B(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i["o"].apply(void 0,[TS.redux.getState()].concat(t))}function U(){return TS.redux.dispatch(a["d"].apply(void 0,arguments))}function q(){return TS.redux.dispatch(n["bulkAddChannels"].apply(void 0,arguments))}function G(){return TS.redux.dispatch(n["updateOneKeyForChannel"].apply(void 0,arguments))}function H(){return Object(i["s"])(TS.redux.getState())}function W(){return TS.redux.dispatch(Object(n["clearAllShowInListEvenThoughUnreadsFlags"])())}function V(){return TS.redux.dispatch(n["bulkUpdateChannels"].apply(void 0,arguments))}function K(){return Object(i["n"])(TS.redux.getState())}function z(){return Object(i["l"])(TS.redux.getState())}function Q(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i["e"].apply(void 0,[TS.redux.getState()].concat(t))}function Y(){return TS.redux.dispatch(n["leaveChannel"].apply(void 0,arguments))}function J(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i["k"].apply(void 0,[TS.redux.getState()].concat(t))}Object(v["a"])("interop.channels",{disconnectChannel:d["c"],getPublicChannelById:f,getEntityById:h,getGeneralChannel:y,getGroupById:b,getImById:_,getMpimById:g,getNeedsCreatedMessageState:function e(t){return Object(u["getNeedsCreatedMessageState"])(TS.redux.getState(),t)},isImWithDeletedMember:function e(t){return Object(p["isImWithDeletedMember"])(TS.redux.getState(),t)},openConversationBetweenMembers:Object(v["b"])(d["t"]),submitChannelPurpose:d["D"],submitChannelTopic:w,createChannel:n["createChannel"],submitDeclineSharedChannelInvite:function e(t){return TS.redux.dispatch(Object(d["I"])(t))},submitLeave:d["N"],isMemberOfChannel:p["isMemberOfChannel"],joinConversationApi:n["joinConversationApi"],startImByMemberId:n["startImByMemberId"],closeChannelApi:n["closeChannelApi"],updateOrgAccessForChannelApi:n["updateOrgAccessForChannelApi"],updateOrgAccessForChannel:n["updateOrgAccessForChannel"],upsertChannel:O,getChannelPinnedItemByMessage:p["getChannelPinnedItemByMessage"],channelTopicExceedsLimit:p["channelTopicExceedsLimit"],getChannelTopicError:p["getChannelTopicError"],getChannelPurposeError:p["getChannelPurposeError"],updateChannelLastTrigger:m["updateChannelLastTrigger"],getPendingAndConnectedTeamIds:p["getPendingAndConnectedTeamIds"],getInternalTeamIds:p["getInternalTeamIds"],fetchAndUpsertChannelsById:k,fetchAndUpsertChannelsWithQuery:E,fetchAndUpsertChannelsFromAPI:C,fetchAndUpsertChannelsFromFlannel:j,hasChannelWithId:S,markObjectsAsFresh:I,pauseRefetch:A,isObjectFresh:T,shouldStopChannelMentions:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return p["shouldStopChannelMentions"].apply(void 0,[TS.redux.getState()].concat(r))},setConversationOpen:N,getUnarchivedPublicAndPrivateChannelsUserIsIn:function e(){return Object(i["t"])(TS.redux.getState())},markMostRecentMsgRead:P,setChannelTopic:R,getPublicChannels:M,getPublicChannelsUserIsIn:x,getAllChannels:D,addChannel:F,getChannelById:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return i["d"].apply(void 0,[TS.redux.getState()].concat(r))},setChannelPurpose:L,getPrivateChannels:B,removeChannels:U,bulkAddChannels:q,updateOneKeyForChannel:G,getUnarchivedPublicAndPrivateChannels:H,clearAllShowInListEvenThoughUnreadsFlags:W,bulkUpdateChannels:V,getMpims:K,getIms:z,getChannelByName:Q,leaveChannel:Y,getImIdByMemberId:J})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(320);var i=r(195);function s(){return Object(i["d"])(TS.redux.getState())}function o(){return Object(i["b"])(TS.redux.getState())}Object(a["a"])("interop.connectivity",{isOnline:s,getMaximumSocketWait:o,waitForNetworkConnection:n["e"],setClientOnline:function e(){return TS.redux.dispatch(n["a"].apply(void 0,arguments))}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(86);Object(a["a"])("interop.console",n)},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(44);var s=r(39);Object(i["a"])("interop.constants",n()({},s))},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(210);Object(a["a"])("interop.emoji",{isValidEmojiText:function e(t){return Object(n["isValidEmojiText"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},isEmojiNameSkinToneModifiable:function e(t){return Object(n["isEmojiNameSkinToneModifiable"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getCanonicalEmojiName:function e(t){return Object(n["getCanonicalEmojiName"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getEmojiUrl:function e(t){var r=t.text,a=t.emojiSize,i=t.emojiMode;return Object(n["getEmojiUrl"])(TS.redux.getState(),{teamId:TS.model.team.id,text:r,emojiMode:i,emojiSize:a})},getEmojiFrecencyIdFromName:n["getEmojiFrecencyIdFromName"],test:n["test"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(81);Object(a["a"])("interop.emojiComponent",{EmojiSizes:n["a"],mapStateToProps:function e(t){return Object(n["c"])(TS.redux.getState(),t)}})},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(1);var n=r.n(a);var i=r(13);var s=r(85);var o=function e(t,r){var a=r.fileId;return{file:Object(s["getFileById"])(t,a)}};function l(e){return Object(i["connect"])(o)(function(t){if(!t||!t.file)return null;return n.a.createElement(e,t)})}},function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);Object(c["a"])("interop.enterpriseAnalyticsAppsTab",{render:function e(t,r){if(!t)throw new Error("enterpriseAnalyticsAppsTab render must be called with a teamId parameter");var a=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:a},n.a.createElement("div",null,"APPS!")),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){},,,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){"use strict";var a=r(26);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(0);var m=r(1);var h=r.n(m);var f=r(88);var b=r(16);var g=r.n(b);var _=r(2);var y=r(28);var O=r(22);var k=r(277);var E=r(10);var j=r(4438);var C=new E["b"]("coachmarks");var S=150;var w=-500;var I={children:v["b"].element,className:v["b"].string,position:v["b"].string,delay:v["b"].number,content:v["b"].oneOfType([v["b"].node,v["b"].func]),zIndex:v["b"].oneOf(["above_fs","fs","menu","below_menu"]),onContinue:v["b"].func,onShow:v["b"].func,onSkip:v["b"].func,hasCloseButton:v["b"].bool,hasSkipLink:v["b"].bool,hasSkipButton:v["b"].bool,skipButtonText:v["b"].string,continueButtonText:v["b"].string,skipLinkPre:v["b"].string,skipLinkText:v["b"].string,title:v["b"].node,shouldShow:v["b"].oneOfType([v["b"].func,v["b"].bool])};var T={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:_["noop"],onShow:_["noop"],onSkip:_["noop"],hasCloseButton:true,hasSkipLink:true,hasSkipButton:false,skipButtonText:"",skipLinkPre:"",skipLinkText:"",continueButtonText:"",title:"",shouldShow:false};var A=function(e){p()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isShowing:false,contentsRect:null};e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(e);e.setCoachmarkRef=e.setCoachmarkRef.bind(e);e.maybeShowCoachmark=e.maybeShowCoachmark.bind(e);e.measureContents=e.measureContents.bind(e);e.onSkipClick=e.onSkipClick.bind(e);e.onCloseClick=e.onCloseClick.bind(e);e.onContinueClick=e.onContinueClick.bind(e);e.containClickEvents=e.containClickEvents.bind(e);e.onResize=Object(_["debounce"])(e.measureContentsAndSetState.bind(e),S,{maxWait:S});return e}l()(t,[{key:"componentWillMount",value:function e(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"componentWillReceiveProps",value:function e(t){this.props.shouldShow!==t.shouldShow&&true===t.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==t.shouldShow&&false===t.shouldShow&&this.hideCoachmark()}},{key:"componentWillUnmount",value:function e(){this.hideCoachmark();window.clearTimeout(this.delayTimer);this.onResize.cancel();if(this.listenerInstalled){window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}}},{key:"onSkipClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"SKIP")}},{key:"onCloseClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"CLOSE")}},{key:"onContinueClick",value:function e(t){this.hideCoachmark();this.props.onContinue(t)}},{key:"setCoachmarkedContentRef",value:function e(t){this.coachmarkedContent=t}},{key:"setCoachmarkRef",value:function e(t){this.coachmark=t}},{key:"containClickEvents",value:function e(t){t.stopPropagation()}},{key:"measureContents",value:function e(){if(this.coachmarkedContent)return Object(f["findDOMNode"])(this.coachmarkedContent).getBoundingClientRect();return null}},{key:"measureContentsAndSetState",value:function e(){var t=this;this.setState(function(){return{contentsRect:t.measureContents()}})}},{key:"maybeShowCoachmark",value:function e(){var t=this;var r=Object(_["isFunction"])(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow;if(r){this.setState(function(){return{isShowing:true,contentsRect:t.measureContents()}});window.addEventListener("resize",this.onResize);this.listenerInstalled=true;this.props.onShow()}else this.hideCoachmark()}},{key:"hideCoachmark",value:function e(){this.setState(function(){return{isShowing:false,contentsRect:null}});window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}},{key:"renderCloseButton",value:function e(){if(!this.props.hasCloseButton)return null;return h.a.createElement(y["c"],{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":C.t("Close")},h.a.createElement(O["a"],{type:"times"}))}},{key:"renderTitle",value:function e(){return h.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"renderContent",value:function e(){return h.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderSkipLink",value:function e(){if(!this.props.hasSkipLink)return null;var t=this.props.skipLinkPre||C.t("Done?");var r=this.props.skipLinkText||C.t("Click here to skip");return h.a.createElement("div",{className:"p-coachmark__skip_link"},h.a.createElement("span",null,t),t&&" ",h.a.createElement(y["c"],{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},r))}},{key:"renderSkipButton",value:function e(){if(!this.props.hasSkipButton)return null;return h.a.createElement(y["d"],{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText)}},{key:"renderFooter",value:function e(){var t=this.props.hasSkipLink?"p-coachmark__footer":g()("p-coachmark__footer","margin_top_100");var r=this.props.continueButtonText||C.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"});return h.a.createElement("div",{className:t},this.renderSkipLink(),this.renderSkipButton(),h.a.createElement(y["d"],{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},r))}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.position,i=t.zIndex;var s=this.state,o=s.isShowing,l=s.contentsRect;var c=g()("p-coachmark","p-coachmark--"+a,this.props.className);var u=o&&h.a.createElement(k["a"],{isOpen:o,position:a,targetBounds:l,allowanceX:w,allowanceY:w,zIndex:i,key:"coachmark-popover",onClose:this.onCloseClick},h.a.createElement("div",{className:c,"data-qa":"coachmark",onClick:this.containClickEvents,ref:this.setCoachmarkRef,role:"presentation"},h.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return h.a.cloneElement(r,{ref:this.setCoachmarkedContentRef},[].concat(n()(h.a.Children.toArray(r.props.children)),[u]))}}]);return t}(m["PureComponent"]);A.displayName="DeprecatedCoachmark";A.defaultProps=T;var N=A;var P=t["a"]=N},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(26);var l=r.n(o);var c=r(6);var u=r.n(c);var d=r(7);var p=r.n(d);var v=r(8);var m=r.n(v);var h=r(9);var f=r.n(h);var b=r(1);var g=r.n(b);var _=r(0);var y=r(13);var O=r(2);var k=r(1757);var E=r(21);var j=r(45);var C=r(528);var S=r(477);var w=r(15);var I=r(4);var T=r(10);var A=r(570);var N=r(443);var P=r(87);var R=Object(w["b"])("Record a frecency event for some message action + maybe a query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.action,n=r.query,i=void 0===n?"":n;var s=a.frecencyId;Object(I["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor")?e(Object(N["c"])({id:s,text:i})):Object(A["c"])({id:s},i)});R.propTypes={action:P["a"].MessageAction.isRequired,query:_["b"].string};var M=R;var x=r(39);var D=r(14);var F=r(67);var L=r(41);var B=r(315);var U=new T["b"]("message");var q={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var G=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(F["a"])(e,a,r);if(!n)return null;if(!Object(L["canAddReaction"])(n))return null;return{id:x["SLACK_ACTION_IDS"].addReaction,name:U.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(B["f"])("add_reaction"),uiElement:E["z"].ADD_REACTION_BUTTON}});G.propTypes=q;var H=G;var W=r(19);var V=new T["b"]("message");var K={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var z=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(F["a"])(e,a,r);if(!n)return null;var i=Object(W["d"])(e,a);if(!Object(L["canReplyOrComment"])(e,{message:n,channel:i}))return null;var s=V.t("Start a thread");var o=E["z"].START_A_THREAD_BUTTON;if(Object(L["isThreadBroadcast"])(n)||Object(L["getReplyCount"])(n)){s=V.t("Reply to thread");o=E["z"].REPLY_TO_THREAD_BUTTON}return{id:x["SLACK_ACTION_IDS"].comment,name:s,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(B["f"])("thread_reply"),uiElement:o}});z.propTypes=K;var Q=z;var Y=new T["b"]("message");var J={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var X=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(F["a"])(e,a,r);if(!n)return null;var i=Object(W["d"])(e,a);if(!Object(L["canCopyLink"])(e,{message:n,channel:i}))return null;return{id:x["SLACK_ACTION_IDS"].copyLink,name:Object(I["isFeatureEnabled"])(e,"feature_desktop_copy_text")?Y.t("Copy link to message"):Y.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(B["f"])("copy_link"),uiElement:E["z"].COPY_LINK_BUTTON}});X.propTypes=J;var Z=X;var $=new T["b"]("message");var ee={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var te=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.messageContainerType,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(F["a"])(e,a,r);if(!c)return null;var u=Object(W["d"])(e,a);if(!Object(L["canDeleteMessage"])(e,{message:c,channel:u,messageContainerType:n}))return null;return{id:x["SLACK_ACTION_IDS"].deleteMessage,name:$.t("Delete message"),iconType:"trash",danger:true,"data-qa":"delete_message",frecencyId:Object(B["f"])("delete"),uiElement:E["z"].DELETE_MESSAGE_BUTTON,disabled:s,showOfflineIcon:l}});te.propTypes=ee;var re=te;var ae=r(68);var ne=new T["b"]("message");var ie={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var se=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(F["a"])(e,a,r);if(!l)return null;var c=Object(W["d"])(e,a);var u=Object(I["getCurrentUserId"])(e);var d=Object(ae["a"])(e,"msg_edit_window_mins");if(!Object(L["canEditMessage"])(e,u,l,c,d))return null;return{id:x["SLACK_ACTION_IDS"].editMessage,name:ne.t("Edit message"),iconType:"pencil","data-qa":"edit_message",frecencyId:Object(B["f"])("edit"),uiElement:E["z"].EDIT_MESSAGE_BUTTON,disabled:i,showOfflineIcon:o}});se.propTypes=ie;var oe=se;var le=new T["b"]("message");var ce=new T["b"]("messages_action_items");var ue={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,allUnreads:_["b"].string.isRequired};var de=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.allUnreads;var i=Object(F["a"])(e,a,r);if(!i)return null;var s=Object(W["d"])(e,a);if(!Object(L["canMarkUnread"])(e,{message:i,channel:s}))return null;return{id:x["SLACK_ACTION_IDS"].markUnread,name:n?ce.t("Mark above as read"):le.t("Mark unread"),iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(B["f"])("mark_unread"),uiElement:E["z"].MARK_UNREAD_BUTTON}});de.propTypes=ue;var pe=de;var ve=r(234);var me=r(11);var he=new T["b"]("message");function fe(e,t,r,a){var n="#"+t;switch(r){case"channel":if(e)return he.t("Un-pin from {channelName}",{channelName:n});if(a)return he.t("Pin to {channelName}",{channelName:n,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});return he.t("Pin to {channelName}\u2026",{channelName:n});case"private":if(e)return he.t("Un-pin from {channelName}",{channelName:t});if(a)return he.t("Pin to {channelName}",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});return he.t("Pin to {channelName}\u2026",{channelName:t});default:if(e)return he.t("Un-pin from this conversation");if(a)return he.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"});return he.t("Pin to this conversation\u2026")}}var be={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var ge=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(F["a"])(e,a,r);if(!l)return null;var c=Object(W["d"])(e,a);if(!Object(L["canPin"])(e,{message:l,channel:c}))return null;var u=Object(ve["isMessagePinned"])(e,{channelId:a,ts:r});var d=Object(me["getDisplayNameForChannel"])(e,c,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var p=Object(me["getChannelType"])(c);var v=u?E["z"].PIN_TO_THIS_CONVERSATION_BUTTON:E["z"].UNPIN_FROM_THIS_CONVERSATION_BUTTON;var m=Object(I["isFeatureEnabled"])(e,"feature_sonic_pins");return{id:x["SLACK_ACTION_IDS"].pin,name:fe(u,d,p,m),iconType:"thumb-tack","data-qa":"pin_message",frecencyId:Object(B["f"])(u?"unpin":"pin"),uiElement:v,disabled:i,showOfflineIcon:o}});ge.propTypes=be;var _e=ge;var ye=r(775);var Oe=r(833);var ke=r(1310);var Ee=r(1548);var je=Object(w["b"])("Add a reminder for a message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.time,n=r.channelId,i=r.ts;var s=Object(F["a"])(t(),n,i);return e(Object(Ee["a"])({time:a,message_channel:n,message_ts:i,respond_in_channel:Object(L["reminderShouldRespondInChannel"])(s)}))});je.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,time:_["b"].string.isRequired};var Ce=je;var Se=new T["b"]("message");var we={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,time:_["b"].string.isRequired,remind:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Ie=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);return r}p()(t,[{key:"onSelected",value:function e(){var t=this.props,r=t.remind,a=t.ts,n=t.channelId,i=t.time,s=t.clogger;r({ts:a,channelId:n,time:i});s.track(E["l"].MSG_ACTION,{contexts:{ui_context:{action:E["w"].CLICK,step:E["A"].MORE_ACTIONS_MENU,ui_element:E["z"].REMIND_ME_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,r=t.remind,a=t.ts,i=t.channelId,o=t.time,l=s()(t,["remind","ts","channelId","time"]);return g.a.createElement(S["a"],n()({},l,{onSelected:this.onSelected}))}}]);return t}(b["PureComponent"]);Ie.displayName="RemindMenuItem";var Te=function e(t){return{clogger:Object(j["a"])({state:t})}};var Ae={remind:Ce};var Ne=Object(y["connect"])(Te,Ae)(Ie);var Pe=Object(C["b"])(Ne);var Re={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,featureAppViewsV1:_["b"].bool,featureAppViewsReminders:_["b"].bool,renderLegacySubmenu:_["b"].bool};var Me={featureAppViewsV1:false,featureAppViewsReminders:false,renderLegacySubmenu:true};var xe=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSubmenu=r.renderSubmenu.bind(r);return r}p()(t,[{key:"renderSubmenu",value:function e(t){var r=this.props,a=r.channelId,i=r.ts,s=r.featureAppViewsV1,o=r.featureAppViewsReminders;var l={channelId:a,ts:i};return g.a.createElement(ye["a"],n()({},t,{"data-qa":"remind_submenu",width:"auto"}),g.a.createElement(Pe,n()({},l,{label:Se.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),g.a.createElement(Pe,n()({},l,{label:Se.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),g.a.createElement(Pe,n()({},l,{label:Se.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),g.a.createElement(Pe,n()({},l,{label:Se.t("Tomorrow"),time:"Tomorrow"})),g.a.createElement(Pe,n()({},l,{label:Se.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),s&&o&&g.a.createElement(Pe,n()({},l,{label:s?Se.t("Custom\u2026"):"",time:"Custom"})))}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.ts,i=s()(t,["channelId","ts"]);return g.a.createElement(ke["a"],n()({},i,{renderSubmenu:this.renderSubmenu}))}}]);return t}(b["PureComponent"]);xe.displayName="Remind";xe.defaultProps=Me;var De=Object(Oe["a"])(xe);var Fe=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(F["a"])(e,a,r);if(!l)return null;var c=Object(W["d"])(e,a);if(!Object(L["canAddReminder"])(e,{message:l,channel:c}))return null;var u=Object(I["isFeatureEnabled"])(e,"feature_app_views_v1");var d=Object(I["isFeatureEnabled"])(e,"feature_app_views_reminders");return g.a.createElement(De,{key:"remind_submenu",label:Se.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(B["f"])("remind"),ts:r,channelId:a,featureAppViewsV1:u,featureAppViewsReminders:d,renderLegacySubmenu:true,disabled:i,showOfflineIcon:o})});var Le=Fe;var Be=new T["b"]("message");var Ue={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,messageContainerType:_["b"].oneOf(Object(O["values"])(x["MESSAGE_CONTAINERS"])),disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var qe=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.messageContainerType,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(F["a"])(e,a,r);if(!c)return null;var u=Object(W["d"])(e,a);if(!Object(L["canRemoveBroadcast"])(e,{message:c,channel:u,messageContainerType:n}))return null;var d=Object(me["isPublicChannel"])(u)||Object(me["isPrivateChannel"])(u)?Be.t("Remove from channel"):Be.t("Remove from conversation");return{id:x["SLACK_ACTION_IDS"].removeBroadcast,name:d,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(B["f"])("remove"),uiElement:E["z"].REMOVE_FROM_CONVERSATION_BUTTON,disabled:s,showOfflineIcon:l}});qe.propTypes=Ue;var Ge=qe;var He=new T["b"]("message");var We={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Ve=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(F["a"])(e,a,r);if(!n)return null;if(!Object(L["canBeShared"])(n))return null;var i=Object(L["isShareableFileMsg"])(n)?He.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):He.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return{id:x["SLACK_ACTION_IDS"].shareMessage,name:i,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(B["f"])("share"),uiElement:E["z"].SHARE_MESSAGE_BUTTON}});Ve.propTypes=We;var Ke=Ve;var ze=r(85);var Qe=new T["b"]("message");var Ye={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Je=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(F["a"])(e,a,r);if(!n)return null;if(!Object(L["canStar"])(n))return null;var i=Object(L["isStarred"])(n);var s=i?Qe.t("Unstar message"):Qe.t("Star message");if(Object(L["isFileComment"])(n)){var o=Object(O["first"])(n.files);var l=n.comment&&Object(ze["getFileCommentById"])(e,o,n.comment.id);l&&(s=i?Qe.t("Unstar file comment"):Qe.t("Star file comment"))}var c=i?E["z"].UNSTAR_MESSAGE_BUTTON:E["z"].STAR_MESSAGE_BUTTON;return{id:x["SLACK_ACTION_IDS"].star,name:s,iconType:i?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(B["f"])(i?"unstar":"star"),uiElement:c}});Je.propTypes=Ye;var Xe=Je;var Ze=r(351);var $e=r(34);var et=new T["b"]("message");var tt=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(F["a"])(e,a,r);var c=Object(W["d"])(e,a);var u=Object(me["isArchived"])(c);var d=Object(Ze["getIsSubscribed"])(e,{ts:r,channelId:a});var p=u&&d;if(!Object(L["canReplyOrComment"])(e,{message:l,channel:c,ignoreMembership:p}))return null;var v=Object($e["g"])(e,"threads_everything");var m=Object(L["getReplyCount"])(l);var h=et.t("Follow message");var f=et.t("You\u2019ll be notified about any replies");var b=E["z"].FOLLOW_MESSAGE_BUTTON;var g=void 0;var _=Object(Ze["getIsSubscriptionLoading"])(e,{ts:r,channelId:a});if(!_||i&&o)if(d){if(m){h=et.t("Unfollow thread");g=et.t("This will be removed from Threads");f=v?et.t("You won\u2019t be notified about new replies"):g}else{h=et.t("Unfollow message");g=et.t("Replies will be excluded from Threads");f=v?et.t("You won\u2019t be notified about replies"):g}b=E["z"].UNFOLLOW_MESSAGE_BUTTON}else if(m){h=et.t("Follow thread");g=et.t("New replies will appear in Threads");f=v?et.t("You\u2019ll be notified about new replies"):g}else{h=et.t("Follow message");g=et.t("Any replies will show up in Threads");f=v?et.t("You\u2019ll be notified about any replies"):g}else{h=et.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"});f=""}return{id:x["SLACK_ACTION_IDS"].subscribe,name:h,description:f,isLoading:_,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(B["f"])(d?"thread_unfollow":"thread_follow"),uiElement:b}});tt.propTypes={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,disabled:_["b"].bool.isRequired,showOfflineIcon:_["b"].bool.isRequired};var rt=tt;function at(e){return n()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:E["z"].APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(B["e"])(e))}var nt=r(1322);function it(e,t){if(!e)return false;var r=Object(nt["a"])(e.name);if(!r)return false;var a=Object(nt["a"])(e.description);var n=t.split(/\s+/);return Object(O["every"])(n,function(e){return Object(O["includes"])(r,e)||Object(O["includes"])(a,e)})}var st=r(757);var ot=new T["b"]("app_actions");var lt=function e(t,r){return[H(t,r),Q(t,r),Z(t,r),re(t,r),oe(t,r),pe(t,r),_e(t,r),Ge(t,r),Ke(t,r),Xe(t,r),rt(t,r)]};var ct=function e(t){return n()({},t,{danger:false,description:ot.t("Slack")})};var ut=function e(t){return{id:t.frecencyId,action:t}};var dt=Object(w["b"])("Search message actions (app + Slack) in Redux store",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.query,n=void 0===a?"":a,i=s()(r,["query"]);var o=t();var c=Object(st["d"])(o),u=c.actions;var d=lt(o,i).filter(function(e){return e&&!e.isLoading});var p=[].concat(l()(d.map(ct)),l()(u.map(at)));p=p.filter(function(e){return it(e,Object(nt["a"])(n))});p=Object(N["d"])(o,{query:n,list:p.map(ut)});p=p.map(function(e){return e.action});return p});dt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,messageContainerType:_["b"].oneOf(Object(O["values"])(x["MESSAGE_CONTAINERS"])),query:_["b"].string};var pt=Object(w["b"])("Search message actions (app + Slack), returns as Promise",function(e,t,r){var a=e(dt(r));return Promise.resolve(a)});pt.propTypes=dt.propTypes;var vt=pt;var mt=r(1839);var ht=r(98);var ft=r(12);var bt=r(38);var gt=r(777);var _t=r(360);var yt=function e(t,r,a){var n=r.channelId,i=r.ts;return a(function(e,r){var a=r();var s=Object(F["a"])(a,n,i);var o=Object(_t["b"])(s);return Object(gt["a"])({e:t,rxn_key:o})})};var Ot=yt;var kt=r(100);var Et=Object(w["b"])("Open a thread to reply to a message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(F["a"])(i,a,n);var o=s.thread_ts||n;e(Object(kt["l"])({channelId:a,threadTs:o}))});Et.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var jt=Et;var Ct=r(35);var St=r(548);var wt=r(276);var It=Object(w["b"])("Copy link to message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(F["a"])(i,a,n);var o=s.thread_ts;var l=Object(Ct["d"])(i);var c=l&&l.domain;var u=Object(L["constructAbsoluteMsgPermalink"])({teamDomain:c,channelId:a,ts:n,threadTs:o});e(Object(St["a"])({msg:s,payload:{subtype:"copy_link"}}));Object(wt["writeText"])(u)});It.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Tt=It;var At=r(393);var Nt=r(1208);var Pt=Object(w["b"])("Copy message text",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(F["a"])(i,a,n);e(Object(St["a"])({msg:s,payload:{subtype:"copy_text"}}));var o=Object(At["a"])(Object(Nt["a"])(i,{text:s.text,tsf_mode:"EDIT"}));Object(wt["writeText"])(o)});Pt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Rt=Pt;var Mt=r(1549);var xt=r(48);var Dt=Object(w["b"])("Delete message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts,i=r.rollup;var s=g.a.createElement(Mt["a"],{channelId:a,ts:n,rollup:i});Promise.resolve().then(function(){return e(Object(xt["openModal"])({element:s}))})});Dt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Ft=Dt;var Lt=r(1550);var Bt=Object(w["b"])("Remove message broadcast",function(e,t,r){var a=g.a.createElement(Lt["a"],r);Promise.resolve().then(function(){return e(Object(xt["openModal"])({element:a}))})});Bt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Ut=Bt;var qt=r(708);var Gt=Object(w["b"])("Share message in channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;e(Object(qt["a"])({ts:n,channelId:a}))});Gt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Ht=Gt;var Wt=r(865);var Vt=r(532);var Kt=r(1819);var zt=r(1151);var Qt=r(1794);var Yt=r(16);var Jt=r.n(Yt);var Xt=r(3033);var Zt=r(1092);var $t=r(925);var er=r(926);var tr=r(1778);var rr=r(1779);var ar=r(1832);var nr=r(1093);var ir=r(1066);var sr=r(762);var or=r(1095);var lr=r(3577);var cr={className:_["b"].string,children:_["b"].node};var ur={className:void 0,children:void 0};var dr=function(e){f()(t,e);function t(){u()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=Jt()("c-message_kit__pillow",this.props.className);return g.a.createElement(or["a"],{className:t},this.props.children)}}]);return t}(b["PureComponent"]);dr.displayName="MessagePillow";var pr=dr;dr.defaultProps=ur;var vr=r(2407);var mr=r(3937);var hr=Object(Xt["a"])(Qt["a"]);var fr={msg:_["b"].object.isRequired,className:_["b"].string,showSender:_["b"].bool,onFileClick:_["b"].func,timestampClickable:_["b"].bool,timestampFull:_["b"].bool,timestampRelative:_["b"].bool,flexOrigin:_["b"].string,flexOriginId:_["b"].string,blocksContainerContext:_["b"].string};var br={className:void 0,showSender:true,onFileClick:O["noop"],timestampClickable:true,timestampFull:true,timestampRelative:false,flexOrigin:"activity",flexOriginId:void 0,blocksContainerContext:void 0};var gr=function(e){f()(t,e);function t(){u()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,r=t.className,a=t.msg,i=t.showSender,s=t.onFileClick,o=t.timestampClickable,l=t.timestampFull,c=t.timestampRelative,u=t.flexOrigin,d=t.flexOriginId,p=t.blocksContainerContext;var v=i&&g.a.createElement("div",{className:"c-message_kit__condensed_message_header"},g.a.createElement(Zt["a"],{msg:a,size:16}),"\xa0",g.a.createElement($t["a"],{msg:a,className:"c-message_kit__condensed_message_sender"}),g.a.createElement(er["a"],{msg:a,clickable:o,full:l,relative:c}));return g.a.createElement(pr,{className:Jt()("c-message_kit__message","c-message_kit__condensed_message",r)},v,g.a.createElement(nr["a"],{className:"c-message_kit__condensed_message_text",msg:a,isSingleLine:true}),g.a.createElement(ir["a"],{msg:a,blockLimit:1,blocksContainerContext:p}),g.a.createElement(sr["b"],{msg:a,renderFile:function e(t){return g.a.createElement(hr,n()({},t,{className:Jt()("c-message_kit__condensed_message_file",{"c-message_kit__condensed_message_file--isolated":!a.text}),onClick:s}))}}),g.a.createElement("div",{className:"c-message_kit__condensed_message_meta"},g.a.createElement(tr["a"],{msg:a,className:"c-message_kit__condensed_message_reactions"}),g.a.createElement(rr["a"],{msg:a,flexOrigin:u,flexOriginId:d})),g.a.createElement(ar["a"],{msg:a,flexOrigin:u,flexOriginId:d}))}}]);return t}(b["PureComponent"]);gr.displayName="CondensedMessage";gr.defaultProps=br;var _r=gr;var yr=r(55);var Or=r(1225);var kr=r(1776);var Er=r(1214);var jr=r(1347);var Cr=r(4350);var Sr={avatarSize:_["b"].number,className:_["b"].string,flexOrigin:_["b"].string,msg:_["b"].object.isRequired,timestampClickable:_["b"].bool,timestampFull:_["b"].bool,timestampRelative:_["b"].bool,blocksContainerContext:_["b"].string};var wr={avatarSize:24,className:void 0,flexOrigin:void 0,timestampClickable:false,timestampFull:true,timestampRelative:false,blocksContainerContext:void 0};var Ir=function(e){f()(t,e);function t(){u()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,r=t.avatarSize,a=t.className,n=t.flexOrigin,i=t.msg,s=t.timestampClickable,o=t.timestampFull,l=t.timestampRelative,c=t.blocksContainerContext;return g.a.createElement(pr,{className:Jt()("c-message_kit__message","c-message_kit__contextual_message",a)},g.a.createElement(jr["a"],{msg:i},g.a.createElement(Er["a"],{light:g.a.createElement(Zt["a"],{msg:i,size:r})},g.a.createElement($t["a"],{msg:i}),"\xa0\xa0",g.a.createElement(er["a"],{msg:i,clickable:s,full:o,relative:l}),g.a.createElement("br",null),g.a.createElement(nr["a"],{msg:i}),g.a.createElement(ir["a"],{msg:i,blocksContainerContext:c}),g.a.createElement(kr["a"],{msg:i}),g.a.createElement(sr["b"],{msg:i}),g.a.createElement(Or["a"],{msg:i}),g.a.createElement(ar["a"],{flexOrigin:n,msg:i}))))}}]);return t}(b["PureComponent"]);Ir.displayName="ContextualMessage";Ir.defaultProps=wr;var Tr=Ir;var Ar={fileId:_["b"].string.isRequired,commentId:_["b"].string.isRequired,className:_["b"].string,comment:_["b"].object};var Nr={className:void 0,comment:void 0};var Pr=function(e){f()(t,e);function t(){u()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,r=t.comment,a=t.fileId,n=t.className;if(!r)return null;var i={user:r.user,ts:r.timestamp.toString(),subtype:"file_comment",comment:r,files:[a]};return g.a.createElement(Tr,{msg:i,className:n})}}]);return t}(b["PureComponent"]);Pr.displayName="PinnedItemFileComment";Pr.defaultProps=Nr;var Rr=function e(t,r){var a=r.fileId,n=r.commentId;return{comment:Object(ze["getFileCommentById"])(t,a,n)}};var Mr=Object(y["connect"])(Rr)(Pr);var xr={pin:_["b"].object.isRequired,previewFile:_["b"].func.isRequired};var Dr=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["onFileClick","renderMessage","renderFile","renderFileComment"]);return r}p()(t,[{key:"onFileClick",value:function e(t,r){if(!r)return;this.props.previewFile({fileId:r.id,flexOrigin:"details",flexOriginId:"pins"})}},{key:"renderMessage",value:function e(t){if(!t||!t.ts)return null;return g.a.createElement(_r,{msg:t,timestampClickable:true,onFileClick:this.onFileClick,className:"p-pinned_items__message",flexOrigin:"details",flexOriginId:"pins",blocksContainerContext:yr["a"].pinned_items})}},{key:"renderFile",value:function e(t){if(!t||!t.id)return null;return g.a.createElement(Qt["a"],{file:t,onClick:this.onFileClick,showActions:false})}},{key:"renderFileComment",value:function e(t){if(!t||!t.id)return null;return g.a.createElement(Mr,{commentId:t.id,fileId:t.fileId})}},{key:"render",value:function e(){var t=this.props.pin;if(t.type===ve["PINNED_ITEM_TYPES"].FILE)return this.renderFile(t);if(t.type===ve["PINNED_ITEM_TYPES"].FILE_COMMENT)return this.renderFileComment(t);return this.renderMessage(t)}}]);return t}(b["PureComponent"]);Dr.displayName="PinnedItem";var Fr=function e(t){return{previewFile:function e(){return t(kt["c"].apply(void 0,arguments))}}};var Lr=Object(y["connect"])(null,Fr)(Dr);var Br=new T["b"]("channel_details");var Ur={pin:_["b"].object.isRequired,channelId:_["b"].string.isRequired,unpinMessage:_["b"].func.isRequired,pinsRemove:_["b"].func.isRequired};var qr=function e(t){var r=t.pin,a=t.channelId,n=t.unpinMessage,i=t.pinsRemove;var s=Object(b["useCallback"])(function(){var e={channelId:a,reason:"pins-list-remove"};switch(r.type){case ve["PINNED_ITEM_TYPES"].MESSAGE:e.ts=r.ts;break;case ve["PINNED_ITEM_TYPES"].FILE:e.fileId=r.id;break;case ve["PINNED_ITEM_TYPES"].FILE_COMMENT:e.fileCommentId=r.id;break;default:break}r.type===ve["PINNED_ITEM_TYPES"].MESSAGE?n(e):i(e)},[r,a,n,i]);var o=Object(Vt["a"])(),l=o.featureM11nChannelDetails;if(!l)return null;return g.a.createElement(zt["a"],{title:Br.t("Remove pinned item"),goButtonText:Br.t("Remove pinned item"),onGo:s},g.a.createElement("p",null,Br.t("Are you sure you want to remove this pinned item?")),g.a.createElement(Lr,{pin:r}))};qr.displayName="PinnedItemRemoveConfirm";var Gr={unpinMessage:function e(){return ve["unpinMessage"].apply(void 0,arguments)},pinsRemove:function e(){return Kt["c"].apply(void 0,arguments)}};var Hr=Object(y["connect"])(null,Gr)(qr);var Wr=Object(w["b"])("Toggle message pinned status, with a confirmation dialog before un-pinning",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.ts,n=r.channelId;var i=t();if(Object(ve["isMessagePinned"])(i,{ts:a,channelId:n})){var s=Object(ve["getItemWithPinIdentifier"])(i,{type:ve["PINNED_ITEM_TYPES"].MESSAGE,channel:n,ts:a});e(Object(xt["openModal"])({element:g.a.createElement(Hr,{pin:s,channelId:n})}))}else e(Object(ve["pinMessage"])({ts:a,channelId:n}))});Wr.propTypes={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Vr=function e(t,r,a,n){var i=a.ts,s=a.channelId,o=a.rollup,l=a.messageContainerType;var c=Object(ft["b"])();if(r.appId)return n(Object(mt["b"])({actionId:r.id,appId:r.appId,messageTs:i,channelId:s}));switch(r.id){case x["SLACK_ACTION_IDS"].addReaction:return Ot(t,a,n);case x["SLACK_ACTION_IDS"].comment:return n(jt({ts:i,channelId:s}));case x["SLACK_ACTION_IDS"].copyLink:return n(Tt({ts:i,channelId:s}));case x["SLACK_ACTION_IDS"].copyText:return n(Rt({ts:i,channelId:s}));case x["SLACK_ACTION_IDS"].deleteMessage:return n(Ft({ts:i,channelId:s,rollup:o}));case x["SLACK_ACTION_IDS"].editMessage:c.warn("Edit message is an unhandled case");return null;case x["SLACK_ACTION_IDS"].markUnread:return n(Object(ht["setUnreadPoint"])({channelId:s,unreadTs:i}));case x["SLACK_ACTION_IDS"].pin:return Object(bt["a"])()?n(Wr({ts:i,channelId:s})):n(Object(ve["togglePin"])({ts:i,channelId:s}));case x["SLACK_ACTION_IDS"].remind:c.warn("Remind is an unhandled case");return null;case x["SLACK_ACTION_IDS"].removeBroadcast:return n(Ut({ts:i,channelId:s}));case x["SLACK_ACTION_IDS"].shareMessage:return n(Ht({ts:i,channelId:s}));case x["SLACK_ACTION_IDS"].star:return n(Object(Wt["b"])({ts:i,channelId:s}));case x["SLACK_ACTION_IDS"].subscribe:return n(Object(Ze["toggleThreadSubscription"])({ts:i,channelId:s,messageContainerType:l}));default:c.warn("Unknown action type "+r.id);return null}};var Kr=Vr;var zr=r(84);var Qr=r(96);var Yr=r(572);var Jr=r(5);var Xr=r.n(Jr);var Zr=r(1187);var $r=r(22);var ea=r(61);var ta=r(182);var ra=r(310);var aa=56;var na={action:P["a"].MessageAction.isRequired,className:_["b"].string,pillarClassName:_["b"].string,app:P["a"].maybeUnknown(P["a"].App),defaultAppIcon:_["b"].string.isRequired};var ia={className:"",pillarClassName:"",app:void 0};var sa=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["renderEnter","renderIcon","renderIconMaybe"]);return r}p()(t,[{key:"renderIcon",value:function e(){var t=this.props,r=t.action,a=t.app,n=t.defaultAppIcon;var i=a&&a.icons||r.iconSet;if(i){var s=aa;var o=Object(ra["a"])({icons:i},s,n);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:o})}if(r.iconType)return g.a.createElement($r["b"],{type:r.iconType});return null}},{key:"renderIconMaybe",value:function e(t){if(!t)return null;return g.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},t)}},{key:"renderEnter",value:function e(){var t=this.props,r=t.className,a=t.pillarClassName;var n=Jt()(r,"c-menu_item__enter",Xr()({},a+"__enter",a));return g.a.createElement($r["a"],{type:"enter",className:n,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function e(){var t;var r=this.props,a=r.action,n=r.app,i=r.className,s=r.pillarClassName;var o=Jt()(i,"c-menu_item__button","c-button-unstyled",(t={"c-menu_item__button--danger":a.danger},Xr()(t,""+s,s),Xr()(t,s+"--danger",a.danger&&s),t));var l=n&&n.name||a.description;!l&&n&&(l=g.a.createElement(Zr["a"],{type:Object(ea["d"])(n)?"unknown":"non-existent"}));return g.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},g.a.createElement("div",{className:o,"data-qa":a["data-qa"],key:a.id,id:a.id},this.renderIconMaybe(this.renderIcon()),g.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},a.label||a.name,g.a.createElement("div",{className:"c-menu_item__description"},l)),this.renderEnter()))}}]);return t}(b["PureComponent"]);sa.displayName="AppActionsDialogItem";sa.defaultProps=ia;var oa=function e(t,r){var a=r.action;return{app:a&&a.appId&&Object(ta["getAppById"])(t,a.appId),defaultAppIcon:Object(ta["getDefaultAppIcon"])(t)}};var la=Object(y["connect"])(oa)(sa);var ca=r(88);var ua=r(423);var da=r(1339);var pa=r(339);var va=r(3921);var ma=r(795);var ha=r(216);var fa=r(919);var ba=r(853);var ga=r(923);var _a=r(3202);var ya={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,channel:_["b"].object.isRequired,theme:_["b"].string,hasAdHocSender:_["b"].bool,userId:_["b"].string,username:_["b"].string,botId:_["b"].string,text:_["b"].string,attachments:_["b"].arrayOf(_["b"].object),blocksContainerContext:_["b"].string,blocks:P["a"].BlockKitBlocks,featureAttachmentsV2:_["b"].bool};var Oa={theme:"light",hasAdHocSender:false,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:yr["a"].app_actions,featureAttachmentsV2:false,text:void 0};var ka=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={gradient:false};r.renderAttachment=r.renderAttachment.bind(r);return r}p()(t,[{key:"componentDidMount",value:function e(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function e(){var t=Object(ca["findDOMNode"])(this);t&&t.scrollHeight>t.clientHeight&&this.setState(function(){return{gradient:true}})}},{key:"renderContent",value:function e(){var t=this.props,r=t.text,a=t.blocks,n=t.ts,i=t.blocksContainerContext,s=t.featureAttachmentsV2;if(a&&s)return g.a.createElement(va["a"],{blocks:a,containerId:n,blocksContainerContext:i});return g.a.createElement(ma["a"],{"data-qa":"app-actions-pillow-message-text",text:r})}},{key:"renderAvatar",value:function e(){var t=this.props,r=t.userId,a=t.hasAdHocSender,n=t.botId;return g.a.createElement(ha["b"],{className:"p-app_actions_pillow__avatar",userId:r,isAdHocMember:a,botId:n,size:24,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderTimestamp",value:function e(){var t=this.props.ts;return g.a.createElement(fa["b"],{timestamp:t,relative:false,full:true})}},{key:"renderAttachment",value:function e(t,r){var a=this.props,i=a.ts,s=a.channelId,o=a.blocksContainerContext;return g.a.createElement(ba["a"],n()({key:r},Object(pa["b"])(t),{messageTs:i,activeChannelId:s,showDelete:false,blocksContainerContext:o}))}},{key:"renderAttachments",value:function e(){var t=this.props.attachments;if(!t||!t.length)return null;return g.a.createElement("div",{className:"p-app_actions_pillow__attachments"},t.map(this.renderAttachment))}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar());return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.userId,a=t.botId,n=t.username,i=t.theme,s=t.channel;return g.a.createElement("div",{className:"p-app_actions_pillow__content_header"},g.a.createElement(ga["a"],{userId:r,botId:a,username:n,channelName:Object(me["getDisplayName"])(s),isInteractive:false}),"light"===i&&this.renderTimestamp())}},{key:"render",value:function e(){var t=this.props.theme;var r=Jt()("p-app_actions_pillow","p-app_actions_pillow--"+t,{"p-app_actions_pillow--gradient":this.state.gradient});return g.a.createElement("div",{className:r,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),g.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),g.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),g.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]);return t}(b["PureComponent"]);ka.displayName="AppActionsPillow";ka.defaultProps=Oa;var Ea=function e(t,r){var a=r.ts,n=r.channelId;var i=Object(F["a"])(t,n,a);var s=Object(W["d"])(t,n);var o=Object(L["getMessageMemberId"])(i);var l=Object(L["getMsgSenderEntity"])(t,i),c=l.botId,u=l.username;return{channel:s,userId:o,username:u,botId:c,theme:Object(ua["a"])(t),hasAdHocSender:Object(da["a"])(i),text:i.text,attachments:i.attachments,blocks:i.blocks,featureAttachmentsV2:Object(I["isFeatureEnabled"])(t,"feature_attachments_v2")}};var ja=Object(y["connect"])(Ea)(ka);var Ca=r(2404);var Sa=new T["b"]("app_actions");var wa=64;var Ia="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click";var Ta={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,handleMessageAction:_["b"].func.isRequired,searchMessageActions:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Aa={onClose:O["noop"],onSelectAction:O["noop"]};var Na=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={filterQuery:"",isLoading:true,isError:false,actions:[]};r.initClogged=false;Object(k["a"])(r,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]);r.searchActionsDebounced=Object(O["debounce"])(r.searchActions,200,{leading:true});return r}p()(t,[{key:"componentDidMount",value:function e(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function e(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){var t=this.props.clogger;t.track(E["l"].MSG_ACTION,{contexts:{ui_context:{action:E["w"].IMPRESSION,step:E["A"].MESSAGE_ACTION_DIALOG,ui_element:E["z"].MESSAGE_ACTION_DIALOG}},app_actions_showing:this.state.actions.length});this.initClogged=true}}},{key:"componentWillUnmount",value:function e(){this.activePromise&&delete this.activePromise}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(E["l"].MSG_ACTION,{contexts:{ui_context:{action:E["w"].CLICK,step:E["A"].MESSAGE_ACTION_DIALOG,ui_element:E["z"].GET_MORE_APP_ACTIONS}},app_actions_showing:this.state.actions.length})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.closeModal,o=a.handleMessageAction,e=a.onSelectAction,l=a.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,r,{ts:n,channelId:i});c||o(t,r,{ts:n,channelId:i});this.props.recordMessageActionFrecencyEvent({action:r,query:this.state.filterQuery});var u={ui_context:{action:E["w"].CLICK,step:E["A"].MESSAGE_ACTION_DIALOG,ui_element:r.uiElement}};r.appId?l.track(E["l"].MSG_ACTION,{contexts:u,app_id:r.appId,action_id:r.id}):l.track(E["l"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){this.setState(function(){return{filterQuery:t}},this.searchActionsDebounced)}},{key:"searchActions",value:function e(){var t=this;var r=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(e){t.activePromise===r&&t.setState(function(){return{actions:e,isError:false,isLoading:false}})}).catch(function(){t.setState(function(){return{isError:true,isLoading:false}})});this.activePromise=r}},{key:"handleSelectEvent",value:function e(t,r,a){this.onSelectAction(a,r.props.action)}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,r=t.channelId,a=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(ja,{channelId:r,ts:a}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(Qr["a"],null))}},{key:"renderSingleAction",value:function e(t){var r=g.a.createElement(la,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:r,value:t.id}}},{key:"renderSelect",value:function e(){var t=Sa.t("Search message actions\u2026");return g.a.createElement(Yr["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(O["map"])(this.state.actions,this.renderSingleAction),optionsRowHeight:wa})}},{key:"render",value:function e(){var t=this.state.isLoading;var r=Sa.t("Get more message actions");var a=Sa.t("Use an action");return g.a.createElement(zr["a"],{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Ia,onFooterLinkClick:this.onFooterLinkClick,footerText:r,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["PureComponent"]);Na.displayName="AppActionsDialog";Na.defaultProps=Aa;function Pa(e){return{clogger:Object(j["a"])({state:e})}}var Ra=function e(t){return{closeModal:function e(){return t(Object(xt["closeModal"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return Kr.apply(void 0,a.concat([t]))},searchMessageActions:function e(){return t(vt.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function e(r){return t(M(r))}}};var Ma=Object(y["connect"])(Pa,Ra)(Na);var xa=r(448);var Da=st["d"];var Fa=new T["b"]("app_actions");var La=64;var Ba="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click";var Ua={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,slackActions:_["b"].arrayOf(P["a"].MessageAction).isRequired,appActions:_["b"].arrayOf(P["a"].AppActionMenuItem),isLoading:_["b"].bool.isRequired,onLoad:_["b"].func.isRequired,handleMessageAction:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var qa={appActions:[],onClose:O["noop"],onSelectAction:O["noop"]};var Ga=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={normalizedFilterQuery:""};Object(k["a"])(r,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]);return r}p()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(E["l"].MSG_ACTION,{contexts:{ui_context:{action:E["w"].IMPRESSION,step:E["A"].MESSAGE_ACTION_DIALOG,ui_element:E["z"].MESSAGE_ACTION_DIALOG}},app_actions_showing:this.props.appActions.length});this.props.onLoad()}},{key:"shouldComponentUpdate",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channelId,a=t.ts,n=t.isLoading;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.normalizedFilterQuery;if(this.state.normalizedFilterQuery!==s)return true;if(this.props.isLoading&&!n)return true;if(this.props.channelId!==r)return true;if(this.props.ts!==a)return true;return false}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(E["l"].MSG_ACTION,{contexts:{ui_context:{action:E["w"].CLICK,step:E["A"].MESSAGE_ACTION_DIALOG,ui_element:E["z"].GET_MORE_APP_ACTIONS}},app_actions_showing:this.props.appActions.length})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.closeModal,o=a.handleMessageAction,e=a.onSelectAction,l=a.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,r,{ts:n,channelId:i});c||o(t,r,{ts:n,channelId:i});Object(B["b"])(r,this.state.normalizedFilterQuery);var u={ui_context:{action:E["w"].CLICK,step:E["A"].MESSAGE_ACTION_DIALOG,ui_element:r.uiElement}};r.appId?l.track(E["l"].MSG_ACTION,{contexts:u,app_id:r.appId,action_id:r.id}):l.track(E["l"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){var r=Object(nt["a"])(t);this.setState(function(){return{normalizedFilterQuery:r}})}},{key:"getActions",value:function e(){var t=[].concat(l()(Object(O["map"])(this.props.slackActions,this.formatSlackAction)),l()(Object(O["map"])(this.props.appActions,at)));t=Object(O["filter"])(t,this.filterAction);t=Object(B["c"])(t,this.state.normalizedFilterQuery);return t}},{key:"handleSelectEvent",value:function e(t,r,a){this.onSelectAction(a,r.props.action)}},{key:"filterAction",value:function e(t){return it(t,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function e(t){return n()({},t,{danger:false,description:Fa.t("Slack")})}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,r=t.channelId,a=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(ja,{channelId:r,ts:a}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(Qr["a"],null))}},{key:"renderSingleAction",value:function e(t){var r=g.a.createElement(la,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:r,value:t.id}}},{key:"renderSelect",value:function e(){var t=Fa.t("Search message actions\u2026");return g.a.createElement(Yr["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(O["map"])(this.getActions(),this.renderSingleAction),optionsRowHeight:La})}},{key:"render",value:function e(){var t=this.props.isLoading;var r=Fa.t("Get more message actions");var a=Fa.t("Use an action");return g.a.createElement(zr["a"],{contentLabel:a,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Ba,onFooterLinkClick:this.onFooterLinkClick,footerText:r,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(a),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["Component"]);Ga.displayName="AppActionsDialog";Ga.defaultProps=qa;function Ha(e,t){var r=Da(e),a=r.loading,n=r.actions;var i=Object(O["filter"])([H(e,t),Q(e,t),Z(e,t),re(e,t),oe(e,t),pe(e,t),_e(e,t),Ge(e,t),Ke(e,t),Xe(e,t),rt(e,t)]);var s=!!(a||Object(O["find"])(i,"isLoading"));return{slackActions:i,appActions:n,isLoading:s,clogger:Object(j["a"])({state:e})}}var Wa=function e(t){return{closeModal:function e(){return t(Object(xt["closeModal"])())},onLoad:function e(){return t(Object(xa["b"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return Kr.apply(void 0,a.concat([t]))}}};var Va={};Object.defineProperty(Va,"selectMessageActions",{get:function e(){return Da},set:function e(t){Da=t}});var Ka=Object(y["connect"])(Ha,Wa)(Ga);var za=function e(t){var r=t.featureAppActionsFeRefactor,a=s()(t,["featureAppActionsFeRefactor"]);if(r)return g.a.createElement(Ma,a);return g.a.createElement(Ka,a)};za.displayName="AppActionsSwitcher";var Qa=function e(t){return{featureAppActionsFeRefactor:Object(I["isFeatureEnabled"])(t,"feature_app_actions_fe_refactor")}};var Ya=Object(y["connect"])(Qa)(za);var Ja=Object(w["b"])("Open app actions dialog",function(e,t,r){var a=g.a.createElement(Ya,r);e(Object(xt["openModal"])({element:a}))});Ja.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired};var Xa=Ja;var Za=r(195);var $a=new T["b"]("message");var en=3;var tn="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click";var rn={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired,hasActions:_["b"].bool.isRequired,hasOverflow:_["b"].bool.isRequired,browseAppActions:_["b"].func.isRequired,clogger:_["b"].object.isRequired,featureOfflineMode:_["b"].bool.isRequired,isOffline:_["b"].bool.isRequired};var an=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);r.state={hasActions:e.hasActions};return r}p()(t,[{key:"onSelected",value:function e(t){var r=this.props,a=r.ts,n=r.channelId,i=r.onSelectAction,s=r.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:a,channelId:n,onSelectAction:i}):t&&"click"!==t.type&&window.open(tn,"_blank");s.track(E["l"].MSG_ACTION,{contexts:{ui_context:{action:E["w"].CLICK,step:E["A"].MORE_ACTIONS_MENU,ui_element:E["z"].MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,i=t.onSelectAction,o=t.hasActions,l=t.browseAppActions,c=t.featureOfflineMode,u=t.isOffline,d=s()(t,["ts","channelId","onSelectAction","hasActions","browseAppActions","featureOfflineMode","isOffline"]);var p=this.state.hasActions?$a.t("More message actions\u2026"):$a.t("Add a message action\u2026");return g.a.createElement(S["a"],n()({},d,{label:p,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:tn,disabled:c&&u,showOfflineIcon:c&&u}))}}]);return t}(b["Component"]);an.displayName="BrowseAppActions";var nn=function e(t){var r=Object(st["d"])(t),a=r.actions,n=r.loading;var i=a.length;return{hasActions:n||!!i,hasOverflow:n||i>en,clogger:Object(j["a"])({state:t}),featureOfflineMode:Object(I["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(Za["c"])(t)}};var sn=function e(t){return{browseAppActions:function e(){return t(Xa.apply(void 0,arguments))}}};var on=Object(C["b"])(Object(y["connect"])(nn,sn)(an));var ln=r(66);var cn=r(335);var un=new T["b"]("message");var dn={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var pn=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(F["a"])(e,a,r);if(!n)return null;if(!Object(L["canCopyMessage"])(e,{message:n}))return null;return{id:x["SLACK_ACTION_IDS"].copyText,name:un.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(B["f"])("copy_text"),uiElement:E["z"].COPY_LINK_BUTTON}});pn.propTypes=dn;var vn=pn;var mn=r(17);var hn=56;var fn=40;var bn={type:_["b"].oneOf(Object(O["values"])(cn["a"])),action:P["a"].MessageAction.isRequired,onSelected:_["b"].func.isRequired,app:P["a"].maybeUnknown(P["a"].App),defaultAppIcon:_["b"].string.isRequired,clogger:_["b"].object.isRequired};var gn={type:cn["a"].default,app:void 0};var _n=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);return r}p()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.clogger,a=t.action;if(a.appId){var n={ui_context:{action:E["w"].IMPRESSION,step:E["A"].MORE_ACTIONS_MENU,ui_element:a.uiElement}};r.track(E["l"].MSG_ACTION,{app_id:a.appId,action_id:a.id,contexts:n})}}},{key:"onSelected",value:function e(t){var r=this.props,a=r.action,e=r.onSelected;e(t,a)}},{key:"renderIcon",value:function e(){var t=this.props,r=t.action,a=t.app,n=t.type,i=t.defaultAppIcon;var s=a&&a.icons||r.iconSet;if(s){var o=n===cn["a"].compactItem?fn:hn;var l=Object(ra["a"])({icons:s},o,i);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:l})}if(r.iconType)return g.a.createElement($r["b"],{type:r.iconType});return null}},{key:"render",value:function e(){var t=this.props,r=t.action,a=t.app,i=t.onSelected,o=t.type,l=s()(t,["action","app","onSelected","type"]);var c=a&&a.name||r.description;!c&&a&&(c=g.a.createElement(Zr["a"],{type:Object(ea["d"])(a)?"unknown":"non-existent"}));return g.a.createElement(S["a"],n()({type:o,label:r.label||r.name,description:c,icon:this.renderIcon(),danger:r.danger,onSelected:this.onSelected,"data-qa":r["data-qa"]},l))}}]);return t}(b["PureComponent"]);_n.displayName="MessageActionMenuItem";_n.defaultProps=gn;var yn=function e(t,r){var a=r.action;return{app:a&&a.appId&&Object(ta["getAppById"])(t,a.appId),defaultAppIcon:Object(ta["getDefaultAppIcon"])(t),clogger:Object(j["a"])({state:t})}};var On=Object(y["connect"])(yn)(_n);var kn=Object(C["b"])(On);var En=r(3205);var jn=3;var Cn={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,rollup:P["a"].Rollup(),messageContainerType:_["b"].oneOf(Object(O["values"])(x["MESSAGE_CONTAINERS"])),onSelectAction:_["b"].func,onMenuItemSelected:_["b"].func,onLoad:_["b"].func,slackActions:_["b"].arrayOf(_["b"].oneOfType([P["a"].MessageAction,_["b"].node])).isRequired,canRunAppAction:_["b"].bool,appActions:_["b"].array,handleMessageAction:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,clogger:_["b"].object.isRequired,featureOfflineMode:_["b"].bool.isRequired,isOffline:_["b"].bool.isRequired};var Sn={messageContainerType:x["MESSAGE_CONTAINERS"].MESSAGE_PANE,onSelectAction:O["noop"],onMenuItemSelected:O["noop"],onLoad:O["noop"],canRunAppAction:false,appActions:[],rollup:void 0};var wn=function(e){f()(t,e);function t(e){u()(this,t);var r=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={appActions:e.appActions};Object(k["a"])(r,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]);return r}p()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad();var t=this.props.clogger;t.track(E["l"].MSG_ACTION,{contexts:{ui_context:{action:E["w"].IMPRESSION,step:E["A"].MORE_ACTIONS_MENU,ui_element:E["z"].MORE_ACTIONS_MENU}},app_actions_showing:Math.min(this.state.appActions.length,jn)})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.handleMessageAction,e=a.onSelectAction,o=a.rollup,l=a.clogger,c=a.messageContainerType;var u=e(t,r,{ts:n,channelId:i});u||s(t,r,{ts:n,channelId:i,rollup:o,messageContainerType:c});this.props.recordMessageActionFrecencyEvent({action:r});var d={ui_context:{action:E["w"].CLICK,step:E["A"].MORE_ACTIONS_MENU,ui_element:r.uiElement}};r.appId?l.track(E["l"].MSG_ACTION,{contexts:d,app_id:r.appId,action_id:r.id}):l.track(E["l"].MSG_ACTION,{contexts:d})}},{key:"renderAppActions",value:function e(){var t=this.props,r=t.onSelectAction,a=t.ts,n=t.channelId;var i=this.state.appActions;var s=i.slice(0,jn).map(this.renderSingleAppAction);return[].concat(l()(s),[g.a.createElement(on,{key:"browse_app_actions",ts:a,channelId:n,onSelectAction:r})])}},{key:"renderSingleAppAction",value:function e(t){var r=this.props,a=r.featureOfflineMode,n=r.isOffline;var i=at(t);return g.a.createElement(kn,{key:i.id,type:cn["a"].compactItem,action:i,onSelected:this.onSelectAction,disabled:a&&n,showOfflineIcon:a&&n})}},{key:"renderSlackActions",value:function e(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function e(t,r){if(!t)return null;if(g.a.isValidElement(t))return g.a.cloneElement(t,{key:r});var a=Object(O["omit"])(t,["iconType","iconSet"]);return g.a.createElement(kn,{key:a.id,className:"p-message_actions_menu__"+a.id,action:a,onSelected:this.onSelectAction,disabled:a.disabled,showOfflineIcon:a.showOfflineIcon})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,i=t.messageContainerType,o=t.onLoad,l=t.onMenuItemSelected,c=t.onSelectAction,u=t.canRunAppAction,d=t.appActions,p=t.slackActions,v=t.handleMessageAction,m=s()(t,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]);return g.a.createElement(ln["f"],n()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:l,stripTerminalSeparators:true},m),this.renderSlackActions(),g.a.createElement(ln["d"],null),u&&this.renderAppActions())}}]);return t}(b["PureComponent"]);wn.displayName="MessageActionsMenu";wn.defaultProps=Sn;var In=function e(t,r){var a=r.channelId,i=r.ts;var s=r.messageContainerType||x["MESSAGE_CONTAINERS"].MESSAGE_PANE;var o=Object(F["a"])(t,a,i);var l=Object(L["canRunAppAction"])(o);var c=Object(mn["canRunAppAction"])(t);var u=Object(st["d"])(t),d=u.actions;var p=Object(I["isFeatureEnabled"])(t,"feature_offline_mode");var v=!Object(Za["c"])(t);var m=c&&l;var h=p?n()({},r,{disabled:v,showOfflineIcon:v}):r;var f=Object(O["filter"])([rt(t,h),g.a.createElement(ln["d"],null),Object(O["includes"])([x["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,x["MESSAGE_CONTAINERS"].THREADS_VIEW,x["MESSAGE_CONTAINERS"].SLI_BRIEFING],s)&&Ke(t,r),Z(t,r),vn(t,r),Object(O["includes"])([x["MESSAGE_CONTAINERS"].MESSAGE_PANE,x["MESSAGE_CONTAINERS"].UNREAD_VIEW],s)&&pe(t,n()({},r,{allUnreads:s===x["MESSAGE_CONTAINERS"].UNREAD_VIEW})),Le(t,h),_e(t,h),oe(t,h),Ge(t,h),re(t,h)]);return{slackActions:f,appActions:d,canRunAppAction:m,clogger:Object(j["a"])({state:t}),featureOfflineMode:p,isOffline:v}};var Tn=function e(t){return{onLoad:function e(){return t(Object(xa["b"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return Kr.apply(void 0,a.concat([t]))},recordMessageActionFrecencyEvent:function e(r){return t(M(r))}}};var An=Object(y["connect"])(In,Tn)(wn);var Nn=t["a"]=An},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){"use strict";r.r(t);var a=r(862);var n=r(44);Object(n["a"])("interop.Eventlog",{createInstanceForTeam:a["a"],getInstanceForTeam:a["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(122);var n=r(44);Object(n["a"])("interop.experiments",{getGroupForUser:function e(t){return Object(a["getGroupForUser"])(TS.redux.getState(),t)},getAllAssignmentsForDebugging:function e(){return Object(a["getAllAssignmentsForDebugging"])(TS.redux.getState())}})},function(e,t,r){"use strict";r.r(t);var a=r(4);var n=r(185);var i=r(1172);var s=r(44);var o=r(453);Object(s["a"])("interop.Flannel",{query:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return TS.redux.dispatch(Object(n["g"])({method:t,args:r,attemptNumber:a}))},call:function e(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return TS.redux.dispatch(Object(i["a"])({method:t,args:r,reason:a,EXPEDITED:n}))},fetchRawMembersWithQuery:function e(t,r){return TS.redux.dispatch(Object(o["f"])({query:t,limit:r}))},fetchRawChannelsWithQuery:function e(t,r){return TS.redux.dispatch(Object(o["d"])({query:t,limit:r}))},fetchRawMembersByIds:function e(t){return TS.redux.dispatch(Object(o["e"])({ids:t}))},fetchRawChannelsByIds:function e(t){return TS.redux.dispatch(Object(o["c"])({ids:t}))},getSocketStartArgs:function e(){return Object(n["f"])(TS.redux.getState())},useSocket:function e(){return Object(a["shouldUseSocket"])(TS.redux.getState())},getFlannelConnectionUrl:n["e"],METHODS:n["c"],COMMANDS:n["a"],MAX_RETRY_COUNT:n["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(476);var n=r(44);Object(n["a"])("interop.FuzzyMatcher",a["b"])},function(e,t,r){"use strict";r.r(t);var a=r(538);var n=r(44);Object(n["a"])("interop.BandwidthChecker",a["a"])},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(65);Object(a["a"])("interop.debug",n)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(47);Object(a["a"])("interop.rtm",{debugGetHandlers:n["c"],debugGetPendingMessages:function e(){return Object(n["d"])(TS.boot_data.team_id)}})},function(e,t,r){"use strict";r.r(t);var a=r(269);var n=r(1786);var i=r(44);function s(e){if(!a[e])throw new Error("There is no Socket Manager action called '"+e+"'");return function(){var t=a[e].apply(a,arguments);return TS.redux.dispatch(t)}}Object(i["a"])("interop.SocketManager",{clearFastReconnectUrl:s("clearFastReconnectUrl"),debugGetInstance:s("debugGetInstance"),debugGetState:s("debugGetState"),debugResetRateLimit:s("debugResetRateLimit"),debugSetFastReconnectsEnabled:s("debugSetFastReconnectsEnabled"),debugSetSocketConnectFlakiness:s("debugSetSocketConnectFlakiness"),debugSetSocketSendFlakiness:s("debugSetSocketSendFlakiness"),debugTriggerError:s("debugTriggerError"),disconnect:s("disconnect"),finalizeProvisionalConnection:s("finalizeProvisionalConnection"),reconnectImmediately:s("reconnectImmediately"),send:s("send"),sleep:s("sleep"),start:s("start"),wake:s("wake"),maybeTickleMS:function e(){return TS.redux.dispatch(Object(n["a"])())}})},function(e,t,r){"use strict";r.r(t);var a=r(507);var n=r(44);Object(n["a"])("interop.setTeamIdForToken",a["c"])},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(863);Object(a["a"])("interop.uploadQueue",{getInstance:function e(){return Object(n["a"])(TS.boot_data.team_id)}})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(10);var l=r(44);var c=r(1787);var u=r(1788);var d=r(1544);var p=r(1545);function v(e){var t=new o["b"]("channel_browser");var r=t.rt("<span>Show:</span> {label}",{label:e.label},function(t){var r=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},r)});return r}function m(e){var t=new o["b"]("channel_browser");var r=t.rt("<span>Sort:</span> {label}",{label:e.label},function(t){var r=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},r)});return r}function h(e){var t=new o["b"]("team_picker");var r=void 0;r=e?t.rt("No teams found matching <strong>{query}</strong>",{query:s.a.escape(e)}):t.t("No teams found");return r}function f(e){return n.a.createElement(c["a"],{item:e})}f.displayName="teamPickerListItem";function b(e){return n.a.createElement(u["a"],{item:e})}b.displayName="teamPickerToken";function g(e){return n.a.createElement(d["a"],{item:e})}g.displayName="memberListItem";function _(e){return n.a.createElement(p["a"],{item:e})}_.displayName="memberListToken";Object(l["a"])("interop.lazyFilterSelect",{channelBrowserShowWhichChannelsToken:v,channelBrowserSortByToken:m,teamPickerNoResults:h,teamPickerListItem:f,teamPickerToken:b,memberListItem:g,memberListToken:_})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1158);var i=r(241);function s(e){var t=TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:e}));if(t.promise)return t.promise.then(function(){return Object(i["getCachedMemberCounts"])(TS.redux.getState(),e).counts});return Promise.resolve(t.counts)}Object(a["a"])("interop.memberCounts",{getOrFetchMemberCounts:function e(t){return TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:t}))},promiseToGetMemberCounts:s,fetchMemberCountsForTeam:function e(){return TS.redux.dispatch(Object(n["b"])())}})},function(e,t,r){"use strict";r.r(t);var a=r(251);var n=r(44);var i=r(924);function s(e){return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.apply(void 0,[TS.redux.getState()].concat(r))}}function o(e){var t=Object(i["a"])(e);if(!t.is_known){t.is_known=false;Object.defineProperty(t,"is_member",{get:function e(){throw new Error("Value for is_member is not known; check is_known before accessing this field")}})}return t}Object(n["a"])("interop.membership",{ensureChannelMembershipIsKnownForUsers:s(a["ensureChannelMembershipIsKnownForUsers"]),getCachedChannelMembershipInfoForUser:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=a["getCachedChannelMembershipInfoForUser"].apply(void 0,[TS.redux.getState()].concat(r));return o(i)}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(208);Object(a["a"])("interop.message_input_registry",{getInputProxy:n["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);var i=r(44);var s=r(208);var o=r(39);Object(i["a"])("interop.message_pane_input",{focus:function e(t){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!r)return;r.focus()},focusWithoutSettingCursor:function e(t){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!r)return;r.focusWithoutSettingCursor()},hasFocus:function e(t){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!r&&r.hasFocus()},isEnabled:function e(t){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!r&&r.isEnabled()},value:function e(t,r){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!n)return"";if(!Object(a["isUndefined"])(r)){n.setText(r);return""}return n.getText(r)},displayValue:function e(t){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return r?r.getDisplayValue():""},setPlaceholder:function e(t,r){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!a)return;a.setPlaceholder(r)},insertContentsAtCursor:function e(t,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";var i=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});i&&i.insertContentsAtCursor(r,a,n)},getSelection:function e(t){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return r?r.getSelection():""},setCursor:function e(t,r,a){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});n&&n.setCursor(r,a)}})},function(e,t,r){"use strict";r.r(t);var a=r(511);var n=r(4);var i=r(359);var s=r(23);var o=r(293);var l=r(123);var c=r(67);var u=r(1527);var d=r(41);var p=r(1161);var v=r(516);var m=r(44);Object(m["a"])("interop.messages",{addMessages:function e(){return TS.redux.dispatch(l["a"].apply(void 0,arguments))},getMessageByTimestamp:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return c["a"].apply(void 0,[TS.redux.getState()].concat(r))},getMessagesByChannelId:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return c["b"].apply(void 0,[TS.redux.getState()].concat(r))},getMessagesByProps:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return c["c"].apply(void 0,[TS.redux.getState()].concat(r))},computeRollups:u["a"],getExpandableKey:a["a"],canCountAsUnreadForCurrentUser:d["canCountAsUnreadForCurrentUser"],preprocessImsg:function e(t,r){return TS.redux.dispatch(Object(o["a"])({imsgs:[t],channelId:r}))[0]},preprocessImsgs:function e(t,r){return TS.redux.dispatch(Object(o["a"])({imsgs:t,channelId:r}))},containsMention:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(d["containsMention"])(t,Object(n["getCurrentUserId"])(TS.redux.getState()),Object(i["a"])(TS.redux.getState()),Object(s["b"])(TS.redux.getState()),{ignoreAtHereMentions:r,ignoreHighlightWords:a,ignoreAtEveryoneMentions:o,ignoreAtChannelMentions:l})},isReply:d["isReply"],canEditMessage:function e(t,r,a,n){return Object(d["canEditMessage"])(TS.redux.getState(),t,r,a,n)},shouldRenderFileThread:function e(t){return Object(d["shouldRenderFileThread"])(t,{featureFileThreads:true,featureFileThreadsDarkLaunch:true})},shouldIgnoreHighlightWords:d["shouldIgnoreHighlightWords"],isAppMessage:function e(t){return Object(d["isAppMessage"])(TS.redux.getState(),t)},atEveryoneRegExp:d["atEveryoneRegExp"],atChannelRegExp:d["atChannelRegExp"],atGroupRegExp:d["atGroupRegExp"],atHereRegExp:d["atHereRegExp"],getClogUIStepFromContext:d["getClogUIStepFromContext"],canChannelHaveAtChannelMentions:p["a"],markObjectsAsFresh:v["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1106);Object(a["a"])("interop.metricsResponsiveness",{startMonitoringResponsiveness:n["f"],stopMonitoringResponsiveness:n["h"],storeResponsiveStats:n["j"],isEnabled:n["d"],getTotalBeachballCount:n["b"],getTotalStutterCount:n["c"]})},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,,,,function(e,t,r){},,function(e,t,r){},,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(2140);var n=r(44);Object(n["a"])("interop.mountConnectedWorkspaces",a["a"]);Object(n["a"])("interop.unmountConnectedWorkspaces",a["b"])},,,,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(3);var c=r.n(l);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(2);var y=r(1757);var O=r(10);var k=r(28);var E=r(187);var j=r(1491);var C=r(54);var S=r(1710);var w=r(1361);var I=r(1488);var T=r(211);var A=r(22);var N=r(51);var P=r(50);var R=r(1558);var M=r(45);var x=r(355);var D=r(95);var F={appIcon:g["b"].string.isRequired,appName:g["b"].string.isRequired,teamIcon:g["b"].string.isRequired,teamName:g["b"].string.isRequired};var L=function e(t){var r=t.appIcon,a=t.appName,i=t.teamIcon,s=t.teamName;return n.a.createElement("div",{className:"p-oauth_flow__logos margin_auto display_flex"},n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:r,alt:a,title:a}),n.a.createElement("span",{className:"p-oauth_flow__arrows flex_one sk_light_grey"},n.a.createElement(A["a"],{type:"arrow-large-left",className:"p-oauth_flow__left_directional_arrow--secondary full_width inline_block position_relative"}),n.a.createElement(A["a"],{type:"arrow-large-right",className:"p-oauth_flow__right_directional_arrow--secondary full_width inline_block position_relative"})),n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:i,alt:a,title:s}))};L.displayName="OAuthPageLogos";var B=Object(D["pure"])(L);var U=r(3242);var q=new O["b"]("pages_oauth");var G=g["b"].arrayOf(x["a"]);var H={appIsReviewed:g["b"].bool,appIsInternalIntegration:g["b"].bool,authRowIdentifier:g["b"].string.isRequired,crumbKey:g["b"].string.isRequired,appIcon:g["b"].string.isRequired,appName:g["b"].string.isRequired,teamIcon:g["b"].string.isRequired,teamName:g["b"].string.isRequired,denyUrl:g["b"].string.isRequired,safeTeamScopeInfo:G,dangerousTeamScopeInfo:G,safeChannelScopeInfo:G,dangerousChannelScopeInfo:G,needSecondStep:g["b"].bool.isRequired,needTeamPicker:g["b"].bool.isRequired,singleChannel:g["b"].bool,channelItems:g["b"].shape({channels:g["b"].object,group_channels:g["b"].object,im_channels:g["b"].object,mpim_channels:g["b"].object}),appId:g["b"].string,appType:g["b"].string,appIsInstalled:g["b"].bool,initialSelectedTeamID:g["b"].string,teamsList:g["b"].arrayOf(g["b"].shape({href:g["b"].string.required,teamId:g["b"].string.required,teamImg:g["b"].string.required,teamName:g["b"].string.required})),signInUrl:g["b"].string,switchTeamUrlPathAndQuery:g["b"].string,onTeamSelected:g["b"].func,orgName:g["b"].string,appDevelopmentTeamName:g["b"].string,teamId:g["b"].string,enterpriseId:g["b"].string,userId:g["b"].string};var W={appIsReviewed:true,appIsInternalIntegration:false,safeTeamScopeInfo:[],dangerousTeamScopeInfo:[],safeChannelScopeInfo:[],dangerousChannelScopeInfo:[],singleChannel:false,appId:void 0,appType:void 0,appIsInstalled:false,initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:_["noop"],signInUrl:void 0,switchTeamUrlPathAndQuery:void 0,channelItems:{},orgName:void 0,appDevelopmentTeamName:void 0,teamId:void 0,userId:void 0,enterpriseId:void 0};var V=300;var K=function e(t){return"p-oauth_flow__channel_picker_list_item"+(t.group?"--group-title":"")};var z=function e(t,r,a){return t.map(function(e){var t={id:e.encoded_id,channelType:r};t.label="im"===r?"@"+e.username:"channel"===r||"private"===r?"#"+e.name:e.name;a&&a.find(function(t){return t.id===e.encoded_id})&&(t.preselected=true);return t})};var Q=function e(t,r){var a=[];t.channels&&a.push({id:"channels",label:"Channels",group:true,children:z(Object(_["values"])(t.channels),"channel",r)});t.group_channels&&a.push({id:"group_channels",label:"Private Channels",group:true,children:z(Object(_["values"])(t.group_channels),"private",r)});if(t.im_channels||t.mpim_channels){var n=[];var i=[];t.im_channels&&(n=z(Object(_["values"])(t.im_channels),"im",r));t.mpim_channels&&(i=z(Object(_["values"])(t.mpim_channels),"mpim",r));var s=n.concat(i);a.push({id:"im_mpim_channels",label:"Direct Messages",group:true,children:s})}return a};var Y=function e(t,r,a,n){var i=Object(_["compact"])(t.concat(r,a,n));return Object(_["map"])(i,function(e){return e.scopes.join(",")}).join(",")};var J=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,n=a.appId,i=a.appName,s=a.safeTeamScopeInfo,o=a.dangerousTeamScopeInfo,l=a.safeChannelScopeInfo,c=a.dangerousChannelScopeInfo,u=a.userId,p=a.teamId,v=a.enterpriseId;r.trackingProps={app_scopes:Y(s,o,l,c),app_name:i,app_id:n};r.state={step:0,selectedRadioValue:"all-channels",selectedChannelValues:[],lfsInputValue:""};r.clogger=Object(M["a"])({userId:u,teamId:p,enterpriseId:v,locale:Object(O["q"])()});Object(y["a"])(r,["onDenyClick","onContinueClick","onBackClick","onInputKeyUp","changeRadioButtonCheck","updateSpecificChannelsValues","setLfsRef"]);return r}v()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.appIsInstalled,a=t.appId,n=t.appType;window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"AppDirectoryApp_OAuthDetails",is_installed:r,app_id:a,app_type:n});this.clogger.track("OAUTH_REVIEWS_SCOPES",this.trackingProps);this.clogger.trackForm("#oauth_authorize_confirm_form","OAUTH_AUTHORIZE_CONFIRM_FORM",this.trackingProps)}},{key:"onDenyClick",value:function e(){this.clogger.track("OAUTH_DENY",this.trackingProps)}},{key:"onContinueClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_NEXT_PAGE",this.trackingProps);this.setState(function(){return{step:1}})}},{key:"onBackClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_PREVIOUS_PAGE",this.trackingProps);this.setState(function(){return{step:0}})}},{key:"onInputKeyUp",value:function e(){var t=Object(_["get"])(this,"lfs.input.value","");this.setState(function(){return{lfsInputValue:t}})}},{key:"setLfsRef",value:function e(t){this.lfs=t}},{key:"updateSpecificChannelsValues",value:function e(t){this.setState(function(){return{lfsInputValue:"",selectedChannelValues:t,selectedRadioValue:"specific-channels"}})}},{key:"changeRadioButtonCheck",value:function e(t){var r=t.target.id;this.setState(function(){return{selectedRadioValue:r}})}},{key:"noWorkspaceScopesUsed",value:function e(){var t=this.props,r=t.dangerousTeamScopeInfo,a=t.safeTeamScopeInfo;return Object(_["isEmpty"])(r)&&Object(_["isEmpty"])(a)}},{key:"noChannelScopesUsed",value:function e(){var t=this.props,r=t.dangerousChannelScopeInfo,a=t.safeChannelScopeInfo;return Object(_["isEmpty"])(r)&&Object(_["isEmpty"])(a)}},{key:"isChannelInputRequired",value:function e(){var t=this.state.step;var r=this.props,a=r.appIsInstalled,n=r.singleChannel,i=r.needSecondStep,s=r.channelItems;if(Object(_["isEmpty"])(s)||this.noChannelScopesUsed())return false;if(1===t&&!n&&a)return false;if(0===t&&i&&!this.noWorkspaceScopesUsed())return false;return true}},{key:"isRequiredChannelMissing",value:function e(){var t=false;var r=this.state,a=r.selectedChannelValues,n=r.selectedRadioValue,i=r.lfsInputValue;var s=this.props.singleChannel;this.isChannelInputRequired()&&(s?t=0===a.length:"specific-channels"===n&&(t=0===a.length||i.length>0));return t}},{key:"isLastStep",value:function e(){var t=this.state.step;var r=this.props.needSecondStep;if(this.noWorkspaceScopesUsed())return true;return!r||1===t}},{key:"maybeRenderBackButton",value:function e(){var t=this.props.needSecondStep;var r=this.state.step;if(t&&1===r)return n.a.createElement(E["a"],{className:"p-oauth_flow__nav_anchor margin_left_100 margin_top_25 position_relative",onClick:this.onBackClick},n.a.createElement(A["b"],{type:"arrow-large-left",className:"position_relative p-oauth_flow__nav_back_arrow"}));return false}},{key:"maybeRenderTeamPicker",value:function e(){var t=this.props,r=t.needTeamPicker,a=t.initialSelectedTeamID,i=t.teamsList,s=t.signInUrl,o=t.switchTeamUrlPathAndQuery;var l=this.state.step;if(r&&0===l){var u=i;o&&(u=Object(_["map"])(i,function(e){return c()({},e,{href:window.location.protocol+"//"+window.location.hostname+o+"&switch_to_team="+e.teamId})}));return n.a.createElement("div",{"data-qa":"team_switcher",className:"p-oauth_flow__team_switcher position_relative"},n.a.createElement(R["a"],{initialSelectedTeamID:a,teamsList:u,signInUrl:s}))}return false}},{key:"renderAlert",value:function e(){var t=this.props,r=t.appDevelopmentTeamName,a=t.appIsInternalIntegration,i=t.appIsReviewed,s=t.orgName,o=t.teamName;if(i)return null;var l=void 0;l=a?r?q.t("This app was created by a member of {teamName}, another workspace in {orgName}.",{orgName:Object(O["o"])(s),teamName:Object(O["o"])(r)}):q.t("This app was created by a member of your workspace, {teamName}.",{teamName:Object(O["o"])(o)}):q.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>.",null,function(e){var t=e.key,r=e.text;return n.a.createElement(N["a"],{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",rel:"noopener noreferrer"},r)});return n.a.createElement(j["a"],{type:a?"neutral":"warning",showCloseButton:false,isFixedPosition:false},l)}},{key:"renderConfirmTitle",value:function e(){var t=this.props,r=t.appIsInstalled,a=t.appName,n=t.needSecondStep,i=t.singleChannel,s=t.teamName;var o=this.state.step;var l=void 0;l=1===o?i?q.rt("{appName} would like to do the following in the <strong>selected channel:</strong>",{appName:a}):r?q.rt("{appName} would like to do the following in the <strong>all channels it\u2018s a member of:</strong>",{appName:a}):q.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:a}):r?this.noWorkspaceScopesUsed()?n?i?q.rt("{appName} is already installed on {teamName}, and would now also like to do the following in the <strong>selected channel:</strong>",{appName:a,teamName:s}):q.rt("{appName} is already installed on {teamName}, and would now also like to do the following in <strong>all channels it\u2019s a member of:</strong>",{appName:a,teamName:s}):this.noChannelScopesUsed()?q.t("{appName} is already installed on {teamName}.",{teamName:Object(O["o"])(s),appName:Object(O["o"])(a)}):q.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(O["o"])(s),appName:Object(O["o"])(a)}):q.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(O["o"])(s),appName:Object(O["o"])(a)}):q.t("On {teamName}, {appName} would like to:",{teamName:Object(O["o"])(s),appName:Object(O["o"])(a)});return l}},{key:"renderContinueOrInstallButton",value:function e(){var t=this.state.step;var r=this.props,a=r.needSecondStep,i=r.appIsInstalled,s=r.appId,o=r.appType,l=r.singleChannel;var c=this.isRequiredChannelMissing();var u=void 0;var d=void 0;var p=void 0;var v=void 0;var m=q.t("Allow");var h=q.t("Continue");var f=q.t("Install");if(0===t&&a&&!this.noWorkspaceScopesUsed()){u=h;d=this.onContinueClick;p="button"}else{u=i?this.noWorkspaceScopesUsed()&&this.noChannelScopesUsed()?h:m:f;d=function e(){window.dataLayer.push({event:"AppDirectoryApp_Authorize",is_installed:i,app_id:s,app_type:o})};p="submit"}c&&(v=l?q.t("Select channel"):q.t("Select channels"));return n.a.createElement(k["d"],{"data-qa":"oauth_flow_button_next",className:"p-oauth_flow__button",htmlType:p,onClick:d,disabled:c},u,v&&n.a.createElement(P["c"],{tip:v},n.a.createElement("div",{className:"p-oauth_flow__button_tooltip_target"})))}},{key:"renderChannelSelections",value:function e(){var t=this.state,r=t.selectedChannelValues,a=t.selectedRadioValue;var i=this.props,s=i.channelItems,o=i.appName;var l=q.t("Select channels");var c=q.t("All Public Channels");var u=q.t("Any channel accessible to full members of your team.");var d=q.t("Specific channels");var p=q.t("Search for channels");var v=q.t("No channels");var m=q.t("{app_name} will still be able to access a private conversation with you",{app_name:o});var h=Q(s,r);var f=r.map(function(e){return'"'+e.id+'"'}).join(",");return n.a.createElement("div",{className:"margin_auto no_right_padding"},n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},l),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(C["a"],{text:c,htmlFor:"all-channels",type:"inline",subtext:u,cursor:"pointer"},n.a.createElement(T["a"],{name:"channels",id:"all-channels",value:"['*']",checked:"all-channels"===a,onChange:this.changeRadioButtonCheck}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("label",{htmlFor:"specific-channels",className:"c-label c-label--inline c-label--pointer margin_bottom_100"},n.a.createElement("div",{className:"c-label__text full_width"},n.a.createElement("span",{className:"bold"},d)),n.a.createElement("input",{id:"specific-channels",className:"c-input_radio",type:"radio",name:"channels",value:"["+f+"]",checked:"specific-channels"===a,onChange:this.changeRadioButtonCheck})),n.a.createElement("div",{className:"margin_left_150 margin_top_50 p-oauth_flow__lazy-filter-select-container"},n.a.createElement(w["a"],{ref:this.setLfsRef,items:h,scrollThreshold:V,placeholderText:p,onKeyUp:this.onInputKeyUp,onValueChange:this.updateSpecificChannelsValues,listItemClass:K}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(C["a"],{text:v,htmlFor:"no-channels",type:"inline",subtext:m,cursor:"pointer"},n.a.createElement(T["a"],{name:"channels",id:"no-channels",value:"[]",checked:"no-channels"===a,onChange:this.changeRadioButtonCheck})))))}},{key:"renderSingleChannelPicker",value:function e(){var t=this.props,r=t.channelItems,a=t.needSecondStep;var i=this.state.selectedChannelValues;var s=i.map(function(e){return e.id});var o=Q(r,i);var l=q.t("Post to");var c=q.t("Select Channel");var u=n.a.createElement(w["a"],{ref:this.setLfsRef,items:o,scrollThreshold:V,placeholderText:c,onValueChange:this.updateSpecificChannelsValues,listItemClass:K,single:true});return a?n.a.createElement("div",{className:"margin_top_200"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},q.t("Select a channel")),n.a.createElement("div",{className:"p-oauth_flow__lazy-filter-select-container"},u),n.a.createElement("input",{type:"hidden",name:"channel",value:s})):n.a.createElement("div",{className:"p-oauth_flow__single_channel_picker display_flex align_items_center"},n.a.createElement("span",{className:"margin_right_50"},l),n.a.createElement("div",{className:"flex_one p-oauth_flow__lazy-filter-select-container"},u),n.a.createElement("input",{type:"hidden",name:"channel",value:s}))}},{key:"renderSingleChannelOrChannelSelections",value:function e(){var t=this.state.step;var r=this.props,a=r.appIsInstalled,n=r.singleChannel,i=r.needSecondStep,s=r.channelItems;if(Object(_["isEmpty"])(s)||this.noChannelScopesUsed())return null;if(1===t){if(!n&&a)return null}else if(i&&!this.noWorkspaceScopesUsed())return null;return n?this.renderSingleChannelPicker():this.renderChannelSelections()}},{key:"render",value:function e(){var t=this.state.step;var r=this.props,a=r.appIcon,i=r.appName,s=r.teamIcon,o=r.teamName,l=r.safeTeamScopeInfo,c=r.dangerousTeamScopeInfo,u=r.safeChannelScopeInfo,d=r.dangerousChannelScopeInfo,p=r.authRowIdentifier,v=r.crumbKey,m=r.denyUrl,h=r.needSecondStep;var f={appIcon:a,appName:i,teamIcon:s,teamName:o};var b=void 0;b=0!==t||this.noWorkspaceScopesUsed()&&h?u.concat(d):Object(_["compact"])(l.concat(c));var g=q.t("Cancel");return n.a.createElement("div",null,this.renderAlert(),n.a.createElement("header",{className:"p-oauth_flow__nav"},n.a.createElement("div",{className:"p-oauth_flow__nav_back"},this.maybeRenderBackButton()),n.a.createElement("div",{className:"p-oauth_flow__nav_back clearfix"},this.maybeRenderTeamPicker())),n.a.createElement("section",{className:"p-oauth_flow__header align_center"},n.a.createElement(B,f),n.a.createElement("h3",{className:"p-oauth_flow__title normal","data-qa":"oauth_page_title"},this.renderConfirmTitle())),n.a.createElement("section",{className:"p-oauth_flow__body"},n.a.createElement("form",{id:"oauth_authorize_confirm_form",name:"oauth-confirm",action:"/oauth/"+p,method:"post","accept-encoding":"UTF-8"},n.a.createElement("input",{type:"hidden",name:"create_authorization",value:"1"}),n.a.createElement("input",{type:"hidden",name:"crumb",value:v}),n.a.createElement("div",{className:"p-oauth_flow__scopes_container"},n.a.createElement(I["a"],{scopeInfo:b}),this.renderSingleChannelOrChannelSelections(),n.a.createElement("div",{className:"p-oauth_flow__buttons_container"},n.a.createElement(k["d"],{type:"outline",onClick:this.onDenyClick,href:m,className:"p-oauth_flow__button",target:"_self"},g),this.renderContinueOrInstallButton())))))}}]);return t}(a["PureComponent"]);J.displayName="OAuthConfirm";J.defaultProps=W;J.displayName="OAuthConfirm";var X=J;var Z=r(163);var $=function e(t,r,a){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(Z["a"],null,n.a.createElement(X,a))),r)};var ee=$;var te=r(44);Object(te["a"])("interop.mountOAuthConfirm",ee)},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){"use strict";r.r(t);var a=r(3952);var n=r(44);Object(n["a"])("interop.mountTeamCreatorOnboardingDialog",a["a"]);Object(n["a"])("interop.unmountTeamCreatorOnboardingDialog",a["b"])},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(150);var s=r(1448);var o=r(44);Object(o["a"])("interop.mountToast",function(e){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"],e)}))})},function(e,t,r){},,,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(113);var n=r(11);var i=r(44);Object(i["a"])("interop.mpims",{convertToPrivateChannel:a["a"],makeNameForMpim:function e(t){return Object(n["makeNameForMpim"])(TS.redux.getState(),t)},getMembersInDisplayOrder:function e(t){return Object(n["getMembersInDisplayOrder"])(TS.redux.getState(),t)}})},function(e,t,r){"use strict";r.d(t,"d",function(){return i});r.d(t,"f",function(){return s});r.d(t,"b",function(){return o});r.d(t,"a",function(){return l});r.d(t,"g",function(){return c});r.d(t,"e",function(){return u});r.d(t,"c",function(){return d});var a=r(0);var n=r(18);var i=Object(n["b"])("Set loaded channel messages");i.propTypes=a["b"].shape({channelId:a["b"].string.isRequired,messages:a["b"].object.isRequired});var s=Object(n["b"])("Set welcome place onboarding data");s.propTypes=a["b"].object;var o=Object(n["b"])("Mark welcome place as opened from sonic boot");o.propTypes=null;var l=Object(n["b"])("Hide the coachmark from a workflow action");l.propTypes=null;var c=Object(n["b"])("Hide the coachmark from a workflow action");c.propTypes=null;var u=Object(n["b"])("Set Welcome Place page entry point");u.propTypes=a["b"].string;var d=Object(n["b"])("Regenerate Welcome Place page viewing session ID");d.propTypes=null},function(e,t,r){"use strict";r.r(t);var a=r(1301);var n=r(44);Object(n["a"])("interop.openAppManagementModal",a["a"])},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(386);Object(a["a"])("interop.pages",{isValidPagePath:n["g"],isValidPageId:n["f"],isPageEnabled:n["d"],isPageEnabledById:n["e"],getAllPages:n["a"],getPageById:n["b"],getPageByPath:n["c"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(695);Object(a["a"])("interop.presenceManager",{addMemberToPresenceSubscription:n["a"],removeMemberFromPresenceSubscription:n["c"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1188);var i=r(1362);Object(a["a"])("interop.reactions",{fetchReactions:n["a"],getApiArgsFromReactionKey:n["b"],submitAddOrRemoveReaction:n["d"],maybeReactToLastMessageInChannel:i["a"]})},function(e,t,r){var a={"./accessibility-store.js":683,"./activity-store.js":803,"./all-threads-store.js":361,"./all-unreads-store.js":326,"./apps-in-channels-store.js":1083,"./boot-data-store.js":4,"./can-interact-store.js":4608,"./cfm-store.js":756,"./channel-browser-store.js":4600,"./channel-loading-store.js":533,"./channel-prefixes-store.js":1298,"./channel-sidebar-folders-store.js":787,"./channel-sidebar-store.js":796,"./composer-ui-store.js":4400,"./consistency-store.js":302,"./custom-emoji-store.js":1195,"./deleted-messages-store.js":911,"./desktop-store.js":193,"./dnd-store.js":180,"./drafts-store.js":684,"./ekm-changes-store.js":1197,"./email-render-store.js":1512,"./enable-popups-banner-store.js":1443,"./ephemeral-messages-store.js":455,"./expandables-store.js":340,"./experiments-store.js":122,"./file-refresh-store.js":437,"./file-upload-store.js":236,"./files-flexpane-store.js":760,"./flannel-url-store.js":1199,"./global-nav-store.js":1080,"./help-store.js":912,"./highlights-store.js":4203,"./imports-store.js":177,"./inbox-store.js":4408,"./incremental-boot-store.js":547,"./inline-file-previews-store.js":1169,"./invites-store.js":1256,"./last-used-slash-command-store.js":1254,"./member-directory-flexpane-store.js":576,"./message-edit-store.js":358,"./message-pane-banner-store.js":530,"./modal-store.js":48,"./navigation-history-store.js":410,"./noop-store.js":1198,"./open-popovers-count-ui-store.js":4278,"./pending-files-store.js":564,"./pending-open-channel-store.js":917,"./persisted-api-calls-store.js":1081,"./pins-store.js":234,"./presence-store.js":309,"./reactions-toast-store.js":913,"./search-autocomplete-store.js":198,"./search-channels-users-store.js":1514,"./search-in-product-education-store.js":858,"./search-input-box-store.js":273,"./search-results-store.js":173,"./search-session-store.js":434,"./socket-store.js":52,"./stars-store.js":759,"./team-creation-store.js":232,"./thread-sub-store.js":351,"./threads-flexpane-store.js":385,"./toast-store.js":150,"./typing-store.js":452,"./ui-serialization-store.js":856,"./unfurls-store.js":1432,"./unread-counts-store.js":188,"./user-groups-flexpane-store.js":692,"./users-counts-store.js":1515,"./whats-new-store.js":1343};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=3317},function(e,t,r){var a={"./admin-members-store.js":237,"./app-permissions-store.js":295,"./app-profiles-store.js":363,"./apps-store.js":182,"./blocks-store.js":1082,"./bots-store.js":199,"./customize-emoji-store.js":411,"./developer-actions-store.js":581,"./developer-apps-store.js":1685,"./environment-store.js":1079,"./idp-groups-store.js":914,"./last-network-send-store.js":1196,"./member-counts-store.js":241,"./membership-ordered-store.js":1516,"./membership-store.js":251,"./messages-meta-store.js":329,"./notifications-store.js":1194,"./paid-features-store.js":857,"./reactions-store.js":318,"./telemetry-store.js":1574,"./user-group-membership-store.js":291,"./window-store.js":209};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=3318},function(e,t,r){var a={"./checkout-flow-store/index.js":184,"./pricing-plans-store/index.js":146,"./search-ui-store/index.js":1259};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=3319},function(e,t,r){var a={"./channel-history-store/index.js":103,"./files-store/index.js":85,"./persistence-hashes-store/index.js":4014};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=3320},function(e,t,r){"use strict";r.r(t);var a=r(1291);var n=r(44);Object(n["a"])("interop.removeAppFromChannel",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1844);var s=r(11);var o=r(541);var l=r(77);var c=r(124);var u=r(1157);var d=r(17);var p=r(41);var v=r(577);var m=r(31);var h=r(109);var f=r(908);var b=r(93);var g=r(99);var _=r(44);Object(_["a"])("interop.rules",{channels:n()({},s,{shouldSuppressOrgChannel:o["a"],canThread:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["canThread"].apply(s,[TS.redux.getState()].concat(r))},isReadOnly:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["isReadOnly"].apply(s,[TS.redux.getState()].concat(r))},isThreadOnly:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["isThreadOnly"].apply(s,[TS.redux.getState()].concat(r))},getHasReadOnlyDraft:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["getHasReadOnlyDraft"].apply(s,[TS.redux.getState()].concat(r))},shouldStopChannelMentions:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["shouldStopChannelMentions"].apply(s,[TS.redux.getState()].concat(r))},getDisplayNameForChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["getDisplayNameForChannel"].apply(s,[TS.redux.getState()].concat(r))},isYou:function e(t){return s["isYou"](TS.model.user.id,t)},shouldShowAtChannelWarning:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["shouldShowAtChannelWarning"].apply(s,[TS.redux.getState()].concat(r))},checkForBlockedAtChannelKeyword:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["checkForBlockedAtChannelKeyword"].apply(s,[TS.redux.getState()].concat(r))}}),messages:n()({isAutomatedSubtype:v["a"]},p),files:{extendFileWithPinnedInfo:l["extendFileWithPinnedInfo"],getFileType:l["getFileType"]},user:{canLeaveChannel:b["l"],canNonAdminsAtMentionEveryoneBySettings:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["q"].apply(void 0,[TS.redux.getState()].concat(r))},canNonAdminsAtChannelOrGroupBySettings:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["p"].apply(void 0,[TS.redux.getState()].concat(r))},canAtMentionEveryone:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["e"].apply(void 0,[TS.redux.getState()].concat(r))},canAtChannelOrGroup:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["d"].apply(void 0,[TS.redux.getState()].concat(r))},canPostInGeneral:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["t"].apply(void 0,[TS.redux.getState()].concat(r))},canPostInChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["s"].apply(void 0,[TS.redux.getState()].concat(r))},canUserArchiveChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["C"].apply(void 0,[TS.redux.getState()].concat(r))},canUserSeeArchiveChannelOption:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["Q"].apply(void 0,[TS.redux.getState()].concat(r))},canUserManagePostingPermissions:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["M"].apply(void 0,[TS.redux.getState()].concat(r))},canSetPurposeForChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["y"].apply(void 0,[TS.redux.getState()].concat(r))},canSetTopicForChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["z"].apply(void 0,[TS.redux.getState()].concat(r))},canUserCreatePrivateChannels:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["F"].apply(void 0,[TS.redux.getState()].concat(r))},canUserCreatePublicChannels:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["G"].apply(void 0,[TS.redux.getState()].concat(r))},canTriggerCustomResponses:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["A"].apply(void 0,[TS.redux.getState()].concat(r))},canKickFromPublicChannels:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["k"].apply(void 0,[TS.redux.getState()].concat(r))},canKickFromPrivateChannels:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["j"].apply(void 0,[TS.redux.getState()].concat(r))},canKickFromChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["h"].apply(void 0,[TS.redux.getState()].concat(r))},canJoinChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["g"].apply(void 0,[TS.redux.getState()].concat(r))},canUserConvertChannelToPrivate:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["E"].apply(void 0,[TS.redux.getState()].concat(r))},canUserDeleteChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["I"].apply(void 0,[TS.redux.getState()].concat(r))},canUserSetDataRetentionForChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["R"].apply(void 0,[TS.redux.getState()].concat(r))},canUserManageTeamAccessToChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["N"].apply(void 0,[TS.redux.getState()].concat(r))},canUserRequestSharedChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["P"].apply(void 0,[TS.redux.getState()].concat(r))},canUserCreateSharedChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["H"].apply(void 0,[TS.redux.getState()].concat(r))},canUserExportMessageHistory:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["K"].apply(void 0,[TS.redux.getState()].concat(r))},canUserInviteToChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["L"].apply(void 0,[TS.redux.getState()].concat(r))},canManageParticipationInSharedChannelsOpenBeta:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["n"].apply(void 0,[TS.redux.getState()].concat(r))},canSeeDisconnectChannelOption:function e(){return b["w"].apply(void 0,arguments)},canDisconnectSharedChannels:function e(){return b["f"].apply(void 0,arguments)},canUserRenameChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return b["O"].apply(void 0,[TS.redux.getState()].concat(r))}},unreads:n()({},f),user_groups:{isUnknownOrNonExistent:function e(){return g["s"].apply(void 0,arguments)},isNonExistent:g["q"],isUnknown:g["r"]},emoji:{getEmojiMode:function e(t){return c["h"](TS.redux.getState(),t)},shouldRenderEmojiAsText:function e(){return c["n"](TS.redux.getState())},getEmojiUrlPrefix:c["i"],isEmojiNameSafe:c["j"]},teams:n()({},m),members:n()({},d),admin:n()({},i),invites:n()({},u),threads:n()({},h)})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(23);var s=r(254);var o=r(479);var l=r(77);var c=r(253);var u=r(44);var d=r(1691);var p=r(1860);function v(e){var t=TS.redux.getState();var r=Object(i["b"])(t);Object(o["q"])(r,e)}function m(e){var t=TS.redux.getState();var r=Object(i["b"])(t);return Object(o["p"])(r,e)}Object(u["a"])("interop.files",n()({},l,{processFileForUpserting:function e(t){return Object(s["b"])(TS.redux.getState(),t)},fetchAndUpsertFileById:c["e"],fetchAndUpsertFilesById:c["f"],getFileMetaTemplate:d["b"],markObjectsAsFresh:v,isObjectFresh:m,deleteFile:function e(){return TS.redux.dispatch(c["c"].apply(void 0,arguments))},openDeleteFileDialog:function e(){return TS.redux.dispatch(p["a"].apply(void 0,arguments))}}))},function(e,t,r){"use strict";r.r(t);var a=r(239);var n=r(162);var i=r(901);var s=r(44);Object(s["a"])("interop.notifications",{shouldShowNotificationForChannelMessage:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["o"].apply(void 0,[TS.redux.getState()].concat(r))},shouldShowNotificationForDirectMessage:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["q"].apply(void 0,[TS.redux.getState()].concat(r))},shouldShowNotificationForDesktopNotification:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["p"].apply(void 0,[TS.redux.getState()].concat(r))},showNotification:function e(t,r){return TS.redux.dispatch(Object(i["e"])({message:t,modelObject:r}))},messageForSuppressedNotification:n["b"],getCalculatedDesktopNotifySetting:a["g"],getCalculatedMobileNotifySetting:a["h"],getDefaultDesktopNotifySetting:a["j"],getDefaultMobileNotifySetting:a["k"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(23);Object(a["a"])("interop.selfTeamIds",{getEnterpriseId:n["a"],getTeamId:n["b"],getTopLevelTeamId:n["c"]})},function(e,t,r){"use strict";r.r(t);var a=r(505);var n=r(44);Object(n["a"])("interop.sendMessage.resolveMessage",a["c"])},function(e,t,r){"use strict";r.r(t);var a=r(356);var n=r.n(a);var i=r(44);Object(i["a"])("interop.setAppElementForReactModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#client-ui";n.a.setAppElement(e)})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1748);var i=r(1750);var s=r(1525);var o=r(1324);var l=r(1754);var c=r(39);var u=c["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND;Object(a["a"])("interop.slashCommand",{UNKNOWN_COMMAND:u,looksLikeSlashCommand:s["a"],parseEditLastMessageCommand:i["a"],parseArgs:n["a"],loadSlashCommands:o["b"],executeCommand:o["a"],slackDebugLagCommand:l["default"]})},function(e,t,r){"use strict";r.r(t);var a=r(542);var n=r(44);Object(n["a"])("interop.useGantryCallsInLegacySlack",function(){return Object(a["f"])(TS.redux.getState())})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(759);function i(e){return TS.redux.dispatch(Object(n["fetchStarsList"])(e))}Object(a["a"])("interop.stars",{getStarsList:i})},function(e,t,r){"use strict";r.r(t);var a=r(859);var n=r(23);var i=r(35);var s=r(331);var o=r(233);var l=r(1140);var c=r(380);var u=r(44);var d=r(1037);function p(e){var t=TS.redux.getState();var r=Object(n["b"])(t);Object(a["a"])(r,e)}function v(){return Object(a["c"])()}function m(e){return TS.redux.dispatch(Object(d["c"])(e))}function h(e,t){return TS.redux.dispatch(Object(s["g"])({teamId:e,fields:t}))}function f(e,t){var r=TS.redux.getState();return Object(i["j"])(r,e,t)}function b(){var e=TS.redux.getState();return Object(i["c"])(e)}function g(){var e=TS.redux.getState();return Object(i["d"])(e)}function _(){var e=TS.redux.getState();return Object(i["e"])(e)}function y(e){var t=TS.redux.getState();return Object(i["i"])(t,e)}function O(){return TS.redux.dispatch(s["c"].apply(void 0,arguments))}function k(){return TS.redux.dispatch(l["c"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(c["c"].apply(void 0,arguments))}function j(){return TS.redux.dispatch(s["h"].apply(void 0,arguments))}Object(u["a"])("interop.teams",{getTeamById:f,getAllTeams:b,getCurrentTeam:g,getCurrentTopLevelTeam:_,getTeamByDomain:y,getSelfEnterpriseTeam:i["h"],getSelfEnterpriseOrgName:i["f"],getSelfEnterpriseOrgUrl:i["g"],getAllExternalTeams:i["b"],ensureEnterpriseTeamIsKnown:O,removeTeam:k,upsertTeam:E,markObjectsAsFresh:p,pauseRefetch:v,fetchAndUpsertTeamsWithQuery:m,reorderTeamProfileFields:h,updateSelfEnterpriseName:s["h"],legacyUpdateSelfEnterpriseName:j,upsertSelfTeam:s["n"],fetchAndUpsertEnterpriseOrgInfo:o["a"],getPotentiallyUnknownEnterprise:o["b"],upsertSelfEnterprise:s["m"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(515);var i=r(136);var s=r(382);var o=r(860);var l=r(393);var c=r(1755);var u=r(1040);var d=r(1749);var p=r(1336);var v=r(1524);var m=r(1461);var h=r(543);var f=r(793);var b=r(1320);var g=r(1463);var _=r(1751);var y=r(1465);var O=r(1526);var k=r(1345);Object(a["a"])("interop.texty",{Delta:n["Delta"],PlainClipboardModule:n["PlainClipboardModule"],Quill:n["Quill"],SlackKeyboardModule:n["SlackKeyboardModule"],TabCompleteModule:n["TabCompleteModule"],TextyClass:n["TextyClass"],isRangeInCode:i["j"],convertContentsStringToContents:s["b"],convertContentsToString:o["a"],convertContentsToStringForDisplay:l["a"],getMemberAsContentsString:c["a"],shouldHighlightMention:u["a"],convertContentsStringForSlashCommands:d["b"],convertContentsStringForEncodedMembers:p["a"],CONTENTS_STRING_MENTION_REGEX:s["a"],convertContentsStringToDisplayString:v["a"],TRAILING_PUNCTUATION_CHARACTERS:i["b"],getBroadcastMatch:h["a"],getDisplayTextForSearchResult:f["a"],trimAllowedMatchPrefix:b["a"],getContentsFromClipboard:m["a"],detachInvalidMentionsFromContents:g["a"],replacePotentialMentionsSynchronously:_["a"],shouldInsertNewline:y["a"],getBroadcastKeywordsFromContents:O["a"],getDefaultComposerConfig:k["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(252);var n=r(44);function i(){return TS.redux.dispatch(Object(a["b"])())}Object(n["a"])("interop.topics",{resynced:i})},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);var i=r(44);var s=r(452);var o=r(24);var l=r(17);function c(e){var t=TS.redux.getState();var r=Object(a["map"])(Object(s["getTyperIdsInChannel"])(t,e),function(e){return Object(o["d"])(t,e)});r.sort(function(e,r){return TS.interop.i18n.sorter(Object(l["getPrefCompliantMemberNameLowerCase"])(t,e),Object(l["getPrefCompliantMemberNameLowerCase"])(t,r))});return r}Object(i["a"])("interop.typing",{currentUserStartedTyping:s["currentUserStartedTyping"],currentUserEndedTyping:s["currentUserEndedTyping"],getTypersInChannel:c,memberStartedTyping:s["memberStartedTyping"],memberEndedTyping:s["memberEndedTyping"]})},function(e,t,r){"use strict";r.r(t);var a=r(231);var n=r(151);var i=r(271);var s=r(99);var o=r(692);var l=r(291);var c=r(4);var u=r(44);function d(e){var t=TS.redux.getState();var r=Object(n["e"])(t,e);if(!r)return null;return r}function p(e){return TS.redux.dispatch(Object(i["h"])({ids:[e]})).catch(function(){return{userGroups:[]}}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userGroups,r=void 0===t?[]:t;TS.redux.dispatch(Object(a["p"])({userGroups:r}));return r&&r[0]})}function v(e){return TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyPromiseToGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.users;var n=d(e);if(!n||Object(s["s"])(n))return;TS.redux.dispatch(Object(a["d"])({groupId:e,users:r}))}).then(function(){return d(e)})}function m(e,t){TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.users;var n=d(e);if(!n||Object(s["s"])(n))return;TS.redux.dispatch(Object(a["d"])({groupId:e,users:r}))}).then(function(){var r=d(e);r&&t&&t(r)})}function h(e){var t=TS.redux.getState();TS.redux.dispatch(Object(l["upsertUserGroupMembership"])({groupId:e,isMember:true}));var r=d(e);if(r&&!Object(s["s"])(r)&&Object(s["t"])(r)){var n=Object(c["getCurrentUserId"])(t);TS.redux.dispatch(Object(a["b"])({groupId:e,memberId:n}))}}function f(e){var t=TS.redux.getState();var r=Object(n["a"])(t,e);return r}function b(e){return TS.redux.dispatch(Object(a["o"])({userGroup:e}))}function g(e){return TS.redux.dispatch(Object(a["p"])({userGroups:e}))}function _(e){return TS.redux.dispatch(Object(i["f"])(e))}function y(){return Object(l["getCurrentMemberUserGroupMembership"])(TS.redux.getState())}function O(e){return Object(n["j"])(TS.redux.getState(),e)}function k(){return Object(n["c"])(TS.redux.getState())}Object(u["a"])("interop.userGroups",{getUserGroupById:d,fetchUserGroupById:p,getActiveUserGroups:f,getKnownUserGroups:k,getUserGroupMembers:m,promiseToGetUserGroupMembers:v,upsertSelfUserGroup:h,upsertUserGroup:b,upsertUserGroups:g,getCurrentMemberUserGroupMembership:y,isUserGroupFromAnotherTeam:O,createUserGroup:i["a"],bulkAddGroups:a["c"],updateUserGroup:i["k"],updateMembersOfUserGroup:i["j"],enableUserGroup:i["d"],disableUserGroup:i["c"],deleteUserGroup:i["b"],getAllUserGroups:function e(){return Object(n["b"])(TS.redux.getState())},USER_GROUP_MSG_REGEX:s["a"],isUserGroupActive:s["t"],searchLocalUserGroups:function e(){return TS.redux.dispatch(Object(o["searchLocalUserGroups"])())},getSearchQuery:function e(){return Object(o["getSearchQuery"])(TS.redux.getState())},setSearchQuery:function e(t){return TS.redux.dispatch(Object(o["setSearchQuery"])(t))},bulkAddUserGroupMembership:function e(t){return TS.redux.dispatch(Object(l["bulkAddUserGroupMembership"])(t))},fetchAndUpsertUserGroupsWithQuery:_,canEditUserGroups:function e(){return Object(s["c"])(TS.redux.getState())},canCreateAndDeleteUserGroups:function e(){return Object(s["b"])(TS.redux.getState())},clearAllUserGroupMembership:function e(){return TS.redux.dispatch(Object(l["clearAllUserGroupMembership"])())},isUserGroupMember:function e(t){return Object(l["isUserGroupMember"])(TS.redux.getState(),t)}})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(39);var l=r(299);var c=r(44);function u(){return Object(i["map"])(o["BROADCAST_KEYWORDS"],function(e,t){return n()({alias:"BKchannel"===t?"group":null},Object(l["a"])(t))})}function d(e,t){return Object(i["map"])(Object(l["c"])(e,t),function(e){return n()({id:e.id,alias:"BKchannel"===e.id?"group":null},e)})}Object(c["a"])("interop.broadcast_keywords",{getAllBroadcastKeywords:u,getBroadcastKeywordsForUser:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return d.apply(void 0,[TS.redux.getState()].concat(r))}})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(44);var s=r(332);Object(i["a"])("interop.client_action_token",n()({},s["a"]))},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(276);Object(a["a"])("interop.clipboard",n)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(21);Object(a["a"])("interop.clogTypes",{EventId:n["l"],UiAction:n["w"],UiStep:n["A"],ElementType:n["k"],CoreKeys:n["d"],FileUploadType:n["o"],FileUploadAction:n["m"],FileUploadSrc:n["n"]})},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);var i=r(44);var s=r(45);var o=r(12);var l=r(227);var c=null;function u(e){var t=e.userId,r=e.teamId,a=e.enterpriseId,n=e.locale;if(null!==c)return c;c=Object(s["a"])({userId:t,teamId:r,enterpriseId:a,locale:n});return c}function d(){Object(l["a"])()||Object(o["b"])("CLOG SETUP").error("You must call TS.interop.clog.setup() before attempting to track clogs");return a["noop"]}Object(i["a"])("interop.clog",{setup:u,getInstance:function e(){return c},track:function e(){if(c){var t;return(t=c).track.apply(t,arguments)}return d()},trackClick:function e(){if(c){var t;return(t=c).trackClick.apply(t,arguments)}return d()},trackClickWithContext:function e(){if(c){var t;return(t=c).trackClickWithContext.apply(t,arguments)}return d()},trackForm:function e(){if(c){var t;return(t=c).trackForm.apply(t,arguments)}return d()}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(381);Object(a["a"])("interop.currency",{formatCurrency:n["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(125);var i=r(772);var s=r(220);var o=r(1426);var l=r(1423);var c=r(1428);var u=r(1149);var d=r(394);var p=r(1427);var v=r(562);var m=r(1418);var h=r(770);var f=r(1145);var b=r(1146);var g=r(1147);var _=r(337);var y=r(1421);var O=r(1148);var k=r(786);var E=r(1425);var j=r(1419);var C=r(189);var S=r(773);var w=r(1422);var I=r(1424);var T=r(834);var A=r(1144);var N=r(529);var P=r(1417);var R=r(1253);var M=r(563);var x=r(1420);var D=r(890);var F=r(771);var L=r(357);var B=r(702);var U=r(89);Object(a["a"])("interop.datetime",{toDateObject:n["a"],toDate:i["a"],toTime:s["a"],toHourAmount:o["a"],toDayAmount:l["a"],toWeekAmount:c["a"],toTimeAmount:u["a"],timeDurationConverter:d["a"],toTimeDuration:p["a"],dateDifference:v["a"],distanceInDays:m["a"],distanceInMinutes:h["a"],distanceInSeconds:f["a"],isToday:b["a"],isYesterday:g["a"],isSameDay:_["a"],sameHour:y["a"],shouldExcludeYear:O["a"],toDayOfTheWeek:k["a"],toHour:E["a"],getActivityDayStamp:j["a"],toCalendarDate:C["a"],toCalendarDateOrNamedDay:S["a"],toCalendarDateIfYesterdayOrToday:w["a"],toFilenameFriendlyDate:I["a"],toHumanReadableDateAndTime:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return T["a"].apply(void 0,[TS.redux.getState()].concat(r))},convertISOtoUTCReadableDate:A["a"],toTimeAgo:N["a"],addDays:P["a"],daysToYearsPretty:R["a"],maybeGetRelativeDay:M["a"],millisecondsToPrettifiedTime:x["a"],prettifyDateString:D["a"],makeTsStamp:F["a"],formatDate:L["a"],memberLocalTime:B["a"],setLocale:U["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(44);var s=r(30);var o=s["desktopVersionFields"](),l=o.windowsAppVersion,c=o.windowsAppVersionMinor,u=o.macAppVersion,d=o.macAppVersionMinor,p=o.linuxAppVersion,v=o.linuxAppVersionMinor,m=o.desktopAppVersion;Object(i["a"])("interop.environment",n()({},s,{win_ssb_version:l,win_ssb_version_minor:c,mac_ssb_version:u,mac_ssb_version_minor:d,lin_ssb_version:p,lin_ssb_version_minor:v,desktop_app_version:m}))},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(44);var s=r(10);var o=r(30);var l=r(57);var c=r(249);var u=r(226);var d=new s["b"]("ns");var p={defaultNamespace:"ns",t:d.t};var v=[];var m=function e(t,r){var a=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p.t(t,n()({},a,{ns:r}))};o["isDev"]&&(a.toString=function(){var e=r+"."+t;if(v.indexOf(e)>=0)return"";v.push(e);var a="Dev-only alert: tried to use an i18n function as a string!\nSee console for stack trace.\n\n\t\t\tNamespace: "+r+"\n\t\t\tString: "+t;alert(a);return""});return a};Object(i["a"])("interop.i18n",{t:m,number:s["l"],percent:s["m"],deburr:s["a"],listify:s["g"],possessive:s["n"],fullPossessiveString:s["c"],safeString:s["o"],sorter:s["p"],mappedSorter:s["i"],localesEnabled:l["e"],supportedKeyboards:c["f"],keyCodeEquivalent:c["c"],keyEquivalent:c["d"],getReverseKeyCodeMap:c["b"],normalizeKeyboardFromDesktop:c["e"],locale:Object(l["f"])(),isPseudoLocale:l["d"],isLocaleCJK:l["c"],zdLocale:l["a"],number_abbreviations:u["d"],locales_number_formatting:u["c"],DEFAULT_LOCALE:s["b"].DEFAULT_LOCALE})},function(e,t){},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(852);var i=r(94);var s=r(546);var o=r(1692);var l=r(1227);var c=r(1705);var u=r(23);Object(a["a"])("interop.search_autocomplete",{suggestions:n["c"],AutocompleteQuerySuggestion:s["f"],AutocompleteSuggestionType:i["b"],warmQuerySuggestionCache:function e(){var t=Object(u["b"])(TS.redux.getState());var r=Object(c["a"])(t);r.get()},clearQueryHistoryCache:function e(){var t=Object(u["b"])(TS.redux.getState());var r=Object(l["b"])(t);r.flushAll()},warmFileSuggestionCache:function e(){var t=Object(u["b"])(TS.redux.getState());var r=Object(o["a"])(t);r.get()}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1338);Object(a["a"])("interop.search_conversions",{convertContentsStringForEncodedChannels:n["a"]})},function(e,t,r){"use strict";r.r(t);var a=r(109);var n=r(1456);var i=r(208);var s=r(39);var o=r(44);Object(o["a"])("interop.threads",{getThreadKey:a["getThreadKey"],populateThreadInputs:n["a"],populateReplyInput:function e(t,r,a){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:r,threadTs:a});n&&n.setText(t)},clearHistory:function e(t,r){var a=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:r});a&&a.clearHistory()},focus:function e(t,r){var a=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:r});a&&a.focus()},setBroadcast:function e(t,r,a){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:r});n&&n.setBroadcast(a)},getBroadcast:function e(t,r){var a=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:r});return a&&a.getBroadcast()},getText:function e(t,r){var a=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:r});return a&&a.getText()}})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(44);var s=r(60);var o=r(536);var l=r(1747);Object(i["a"])("interop.url",n()({buildWorkspaceUrl:o["b"],getFileIdFromUrlWithState:l["a"]},s))},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(255);Object(a["a"])("interop.versions",n)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(73);var i=r(316);var s=r(285);Object(a["a"])("interop.workspace",{getPrimaryView:function e(){return Object(n["a"])(TS.redux.getState())},setSecondaryView:function e(){return TS.redux.dispatch(s["a"].apply(void 0,arguments))},setPrimaryView:function e(){return TS.redux.dispatch(i["a"].apply(void 0,arguments))}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"e",function(){return n});r.d(t,"f",function(){return i});r.d(t,"g",function(){return s});r.d(t,"d",function(){return l});r.d(t,"c",function(){return c});r.d(t,"b",function(){return u});r.d(t,"a",function(){return d});var a=r(14);var n=Object(a["b"])(function(e){return e&&e.onboarding&&e.onboarding.inCreatorOnboarding});var i=Object(a["b"])(function(e){return e&&e.onboarding&&e.onboarding.inJoinerOnboarding});var s=Object(a["b"])(function(e){return n(e)||i(e)});var o=Object(a["b"])(function(e){return e&&e.onboarding&&e.onboarding.onboardingChannelId});var l=Object(a["b"])(function(e){return e&&e.onboarding&&e.onboarding.welcomeModel||{}});var c=Object(a["b"])(function(e){return e&&e.onboarding&&e.onboarding.tractorMessageCoachmarkVisible});var u=Object(a["b"])(function(e){return e&&e.onboarding&&e.onboarding.tractorFilesCoachmarkVisible});var d=Object(a["b"])(function(e){return e&&e.onboarding&&e.onboarding.joinerLandingPlaceCoachmarkVisible})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(3);var d=r.n(u);var p=r(6);var v=r.n(p);var m=r(7);var h=r.n(m);var f=r(8);var b=r.n(f);var g=r(9);var _=r.n(g);var y=r(0);var O=r(16);var k=r.n(O);var E=r(10);var j=r(707);var C=r(2);var S=r(138);var w=r(22);var I={action:y["b"].node.isRequired};var T=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(a["PureComponent"]);T.displayName="AppProfileHeaderActionItem";var A=T;var N=r(3037);var P={appName:y["b"].string.isRequired,appImageSrc:y["b"].string.isRequired,appByline:y["b"].string,headerActions:y["b"].array,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired};var R={appByline:"",headerActions:[]};var M=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBackClick=r.onBackClick.bind(r);return r}h()(t,[{key:"onBackClick",value:function e(){var t=this.props,r=t.actions,a=t.dispatch;a(r.router.navigateTo("/organization/apps"));a(r.apps.setAppDetailViewOpen(false))}},{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var r=Object(C["map"])(t,function(e,t){return n.a.createElement(A,{key:t,action:e})});return r}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.appName,i=r.appImageSrc,s=r.appByline;return n.a.createElement("div",{className:"p-app_profile_header margin_bottom_150 display_flex align_items_center justify_content_between"},n.a.createElement("div",{className:"display_flex justify_content_start align_items_center"},n.a.createElement(w["a"],{onClick:function e(){return t.onBackClick()},type:"chevron_medium_left",className:"p-app_profile_header__back_arrow position_absolute"}),n.a.createElement("img",{className:"p-app_profile_header__app_image margin_right_100 margin_left_100",src:i,alt:a}),n.a.createElement("div",{className:"display_flex flex_direction_column"},n.a.createElement("h3",{className:"black"},a),n.a.createElement("span",{className:"p-app_profile_header__app_byline sk_dark_grey"},s))),n.a.createElement("div",{className:"display_flex"},this.renderActionItems()))}}]);return t}(a["PureComponent"]);M.displayName="AppProfileHeader";M.defaultProps=R;var x=M;var D=x;var F=r(58);var L=r.n(F);var B=r(1757);var U=r(48);var q=r(28);var G=r(66);var H=r(1056);var W=r(355);var V=r(54);var K=r(211);var z=new E["b"]("enterprise_dashboard");var Q={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,channelScopeInfo:y["b"].arrayOf(W["a"]),featureWtaOrgLevelApps:y["b"].bool,installOnAllWorkspaces:y["b"].bool,onCancel:y["b"].func,onGo:y["b"].func.isRequired,workspaceName:y["b"].string,workspaceScopeInfo:y["b"].arrayOf(W["a"]).isRequired,workspacesToInstallOnCount:y["b"].number};var Y={channelScopeInfo:[],featureWtaOrgLevelApps:false,installOnAllWorkspaces:false,onCancel:C["noop"],workspaceName:void 0,workspacesToInstallOnCount:1};var J=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={step:0,wildcardEnabled:true};Object(B["a"])(r,["handleGoClick","handleRadioButtonChange"]);return r}h()(t,[{key:"handleGoClick",value:function e(){var t=this.state.wildcardEnabled;if(this.shouldGoToNextStep()){this.setState(function(){return{step:1}});return}this.props.onGo({wildcardEnabled:t})}},{key:"handleRadioButtonChange",value:function e(){this.setState(function(e){var t=e.wildcardEnabled;return{wildcardEnabled:!t}})}},{key:"shouldGoToNextStep",value:function e(){return 0===this.state.step&&this.props.channelScopeInfo.length>0}},{key:"renderScopeInfo",value:function e(){var t=this.props,r=t.channelScopeInfo,a=t.workspaceScopeInfo;if(1===this.state.step)return r;return a}},{key:"renderTitle",value:function e(){var t=this.props,r=t.appName,a=t.featureWtaOrgLevelApps,n=t.installOnAllWorkspaces,i=t.workspaceName,s=t.workspacesToInstallOnCount;if(!a)return"";if(1===this.state.step)return z.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:r});if(n)return z.t("On all workspaces, {appName} would like to:",{appName:Object(E["o"])(r)});if(s>1)return z.t("On {workspacesToInstallOnCount} workspaces, {appName} would like to:",{appName:Object(E["o"])(r),workspacesToInstallOnCount:s});return z.t("On {workspaceName}, {appName} would like to:",{appName:Object(E["o"])(r),workspaceName:Object(E["o"])(i)})}},{key:"renderGoButtonText",value:function e(){if(!this.props.featureWtaOrgLevelApps)return"";return this.shouldGoToNextStep()?"Continue":"Install"}},{key:"renderRadioButtons",value:function e(){var t=this.props,r=t.featureWtaOrgLevelApps,a=t.appName,i=t.installOnAllWorkspaces,s=t.workspaceName,o=t.workspacesToInstallOnCount;var l=this.state,c=l.step,u=l.wildcardEnabled;if(!r||0===c)return null;var d=void 0;d=i?z.t("Any channel accessible to full members on all workspaces."):o>1?z.t("Any channel accessible to full members on {workspacesToInstallOnCount} workspaces.",{workspacesToInstallOnCount:o}):z.t("Any channel accessible to full members on {workspaceName}.",{workspaceName:Object(E["o"])(s)});return n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"bold"},z.t("Select channels")),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(V["a"],{text:z.t("All Public Channels"),htmlFor:"all-channels",type:"inline",subtext:d,cursor:"pointer"},n.a.createElement(K["a"],{name:"channels",id:"all-channels",checked:u,onChange:this.handleRadioButtonChange}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(V["a"],{text:z.t("No channels"),htmlFor:"no-channels",type:"inline",subtext:z.t("{app_name} will still be able to access a private conversation with you.",{app_name:Object(E["o"])(a)}),cursor:"pointer"},n.a.createElement(K["a"],{name:"channels",id:"no-channels",checked:!u,onChange:this.handleRadioButtonChange}))))}},{key:"render",value:function e(){var t=this.props,r=t.appIcon,a=t.onCancel;return n.a.createElement(H["b"],{appIcon:r,goButtonText:this.renderGoButtonText(),onDismiss:a,onAuthorize:this.handleGoClick,scopeInfo:this.renderScopeInfo(),shouldCloseOnGo:!this.shouldGoToNextStep(),title:this.renderTitle()},this.renderRadioButtons())}}]);return t}(a["PureComponent"]);J.displayName="OrgAppInstallDialog";J.defaultProps=Y;var X=J;var Z=Object(S["a"])("feature_wta_org_level_apps")(J);var $=Z;var ee=r(1494);var te=new E["b"]("enterprise_dashboard");var re={appName:y["b"].string.isRequired,appIcon:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,onCancel:y["b"].func,onGo:y["b"].func.isRequired,uninstallFromAllWorkspaces:y["b"].bool,workspaceName:y["b"].string,workspacesToUninstallFromCount:y["b"].number};var ae={featureWtaOrgLevelApps:false,onCancel:C["noop"],uninstallFromAllWorkspaces:false,workspaceName:void 0,workspacesToUninstallFromCount:1};var ne=function e(t){var r=t.appName,a=t.appIcon,i=t.featureWtaOrgLevelApps,s=t.onCancel,o=t.onGo,l=t.uninstallFromAllWorkspaces,c=t.workspaceName,u=t.workspacesToUninstallFromCount;var d=void 0;var p=void 0;var v=void 0;if(i)if(l){d=te.t("Uninstall {appName} from all workspaces?",{appName:Object(E["o"])(r)});p=te.rt("I understand that members of <strong>all workspaces</strong> will no longer be able to use {appName}.",{appName:r});v=te.rt("I understand that {appName} will lose <strong>all access</strong> to all workspaces, including access to channels.",{appName:r})}else if(u>1){d=te.t("Uninstall {appName} from {workspacesToUninstallFromCount} workspaces?",{appName:Object(E["o"])(r),workspacesToUninstallFromCount:u});p=te.rt("I understand that members of <strong>{workspacesToUninstallFromCount} workspaces</strong> will no longer be able to use {appName}.",{appName:r,workspacesToUninstallFromCount:u});v=te.rt("I understand that {appName} will lose <strong>all access</strong> to {workspacesToUninstallFromCount} workspaces, including access to channels.",{appName:r,workspacesToUninstallFromCount:u})}else v=te.rt("I understand that {appName} will lose <strong>all access</strong> to {workspaceName}, including access to channels.",{appName:r,workspaceName:c});var m={appName:r,appIcon:a,workspaceName:c,title:d,workspaceAccessCheckboxText:p,channelAccessCheckboxText:v,onGo:o,onCancel:s};return n.a.createElement(ee["a"],m)};ne.displayName="OrgAppUninstallDialog";ne.defaultProps=ae;var ie=ne;var se=Object(S["a"])("feature_wta_org_level_apps")(ne);var oe=se;var le=new E["b"]("enterprise_dashboard");var ce={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,isInstalledEverywhere:y["b"].bool,openModal:y["b"].func,scopes:y["b"].arrayOf(y["b"].object)};var ue={featureWtaOrgLevelApps:false,isInstalledEverywhere:false,openModal:C["noop"],scopes:[]};var de=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(B["a"])(r,["showInstallDialog","showUninstallDialog","renderMenu"]);return r}h()(t,[{key:"showInstallDialog",value:function e(){var t=this.props,r=t.appIcon,a=t.appName,i=t.scopes;var s=Object(C["partition"])(i.map(function(e){return d()({},e,{scopes:[e.scope]})}),["is_channel_scope",true]),o=L()(s,2),l=o[0],c=o[1];var u={appIcon:r,appName:a,channelScopeInfo:l,installOnAllWorkspaces:true,onGo:C["noop"],workspaceScopeInfo:c};this.props.openModal({element:n.a.createElement($,u)})}},{key:"showUninstallDialog",value:function e(){var t=this.props,r=t.appIcon,a=t.appName;var i={appIcon:r,appName:a,onGo:C["noop"],uninstallFromAllWorkspaces:true};this.props.openModal({element:n.a.createElement(oe,i)})}},{key:"renderMenu",value:function e(t){var r=this.props,a=r.isInstalledEverywhere,i=r.featureWtaOrgLevelApps;if(!i)return null;return n.a.createElement(G["f"],t,!a&&n.a.createElement(G["b"],{"data-qa":"ent_app_profile_install_everywhere",onSelected:this.showInstallDialog,label:le.t("Install on all workspaces")}),n.a.createElement(G["b"],{"data-qa":"ent_app_profile_uninstall_everywhere",onSelected:this.showUninstallDialog,danger:true,label:le.t("Uninstall on all workspaces")}))}},{key:"render",value:function e(){var t=this.props,r=t.isInstalledEverywhere,a=t.featureWtaOrgLevelApps;if(!a)return null;return n.a.createElement("div",{className:"p-app_profile_header__install_menu"},!r&&n.a.createElement(q["d"],{"data-qa":"ent_app_profile_install",className:"margin_right_75",type:"outline",onClick:C["noop"]},le.t("Install")),n.a.createElement(G["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(q["d"],{"data-qa":"ent_app_profile_install_menu",className:"p-app_profile_header__install_menu_trigger",type:"outline",icon:"ellipsis"})))}}]);return t}(a["PureComponent"]);de.displayName="AppProfileHeaderInstallMenu";de.defaultProps=ue;var pe=de;var ve={openModal:U["openModal"]};var me=Object(o["connect"])(null,ve)(de);var he=r(37);var fe=r.n(he);var be=r(1707);var ge=r(920);var _e=r(1213);var ye=new E["b"]("enterprise_dashboard");var Oe={appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,headerItemOnClick:y["b"].func,pageSize:y["b"].number,sortBy:y["b"].string,sortDir:y["b"].string,searchQuery:y["b"].string,rowHeaderItemClassName:y["b"].string,rowClassName:y["b"].string,columns:y["b"].array.isRequired,actions:y["b"].object.isRequired,isSelectionBarShowing:y["b"].bool};var ke={appId:null,workspacesByApp:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null,workspacesByAppLoading:false,headerItemOnClick:C["noop"],pageSize:50,sortBy:"team_name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",isSelectionBarShowing:false};var Ee="asc";var je="desc";var Ce="caret_down";var Se="caret_up";var we={};we[Ee]=Ce;we[je]=Se;var Ie=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.sortBy,s=a.sortDir;r.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null,paddingBottom:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=ye.rt("No workspaces were found matching <b>{query}</b>",{query:r});return n.a.createElement("div",{className:"align_center"},a)}}]};return r}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.workspacesByApp,a=t.sortBy,n=t.actions;var i=this.state.offset;r.length?this.updateRowListItemsData(i):n.setWorkspacesByAppLoading(true);n.setWorkspacesByAppSortBy(a)}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t){t.isSelectionBarShowing!==this.props.isSelectionBarShowing&&this.refreshTableHeightPolitely();this.maybeUpdateListRowItems(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.workspacesByApp,n=r.workspacesByAppApiTotal;if(n&&a.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props,a=r.appId,n=r.workspacesByAppLoading;var i=n&&!t.workspacesByAppLoading;var s=a&&a!==t.appId;a&&(i||s)&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props,a=r.searchQuery,n=r.actions;if(t.searchQuery!==a){this.resetWorkspacesByAppsState();n.setWorkspacesByAppLoading(true)}}},{key:"maybeUpdateListRowItems",value:function e(t){var r=this.state.offset;var a=this.props,n=a.searchQuery,i=a.workspacesByApp,s=a.workspacesByAppLoading,o=a.columns;t.workspacesByApp===i&&t.searchQuery===n&&t.workspacesByAppLoading===s&&t.columns===o||this.updateRowListItemsData(r)}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.appId,s=n.pageSize,o=n.searchQuery,l=n.workspacesByAppApiCursor,c=n.actions;if(!i)return;var u={limit:s,app:i};r&&(u.sort=r);a&&(u.sort_dir=a);null!==o&&void 0!==o&&Object(C["trim"])(o).length&&(u.query=o);l&&(u.cursor=l);c.getWorkspacesByApp(u)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var s=this.props,e=s.headerItemOnClick,o=s.actions;var l=n;var c=i;if(t.id===n){c=i&&i!==Ee?Ee:je;o.setWorkspacesByAppSortDir(c)}else{l=t.id;c=t.defaultSortType?t.defaultSortType===Ee?je:Ee:je;o.setWorkspacesByAppSortDir(c);o.setWorkspacesByAppSortBy(l)}var u={sortBy:l,sortDir:c};this.setState(function(){return u},function(){r.resetWorkspacesByAppsState();e&&e(t);o.setWorkspacesByAppLoading(true)})}},{key:"resetWorkspacesByAppsState",value:function e(){var t=this.props.actions;t.setWorkspacesByApp([]);t.setWorkspacesByAppApiCursor(null);t.setWorkspacesByAppLoading(false);t.setWorkspacesByAppApiTotal(null)}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=this.props.isSelectionBarShowing?_e["a"]:1;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px",paddingBottom:n};this.setState(l)}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.header.value,className:t.header.className,"data-qa":t.header["data-qa"]};if(t.header.sortable){r.iconType=this.determineSortState(r.id,t.header);r.onClick=this.headerItemOnClick;t.header.defaultSortType&&(r.defaultSortType=t.header.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;return t.map(function(e){return r.makeHeader(e)})}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||Ee;var o=we[s];if(!n||n!==t)return o;var l=void 0;l=i?i===Ee?Ce:Se:we[s];return l}},{key:"updateRowListItemsData",value:function e(){var t=this.props,r=t.workspacesByApp,a=t.workspacesByAppLoading,n=t.columns;var i=[];if(r&&r.length)i=r.map(function(e){var t=e.team_id;return{id:"row_"+t,items:n.map(function(r){return{id:"row_"+t+"_col_"+r.id,value:r.rowTemplate.value(e),className:r.rowTemplate.className}})}});else if(!a){var s=this.props.searchQuery;if(null===s||void 0===s||!s.length){this.setState(function(){return{rowListItems:i}});return}i=[{id:"row_search_query",items:[{id:"row_search_query_col",value:this.emptyRowTemplate.items[0].value({searchQuery:s})}]}]}this.setState(function(){return{rowListItems:i}})}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,i=r.sortDir,s=r.height,o=r.rowListItems,l=r.offset,c=r.paddingBottom;var u=this.props,d=u.rowHeaderItemClassName,p=u.rowClassName,v=u.workspacesByAppLoading,m=u.columns;var h=this.makeHeaders(m);return n.a.createElement("div",{style:{paddingBottom:c}},n.a.createElement(ge["a"],{rows:o,headers:h,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:i,height:s,isLoading:v,newQuery:!l,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(a["PureComponent"]);Ie.displayName="WorkspacesByAppList";Ie.defaultProps=ke;var Te=Ie;var Ae=r(152);var Ne=r(1454);var Pe=r(1071);var Re=r(1852);var Me=r(2396);var xe=new E["b"]("enterprise_dashboard");var De={orgName:y["b"].string};var Fe={orgName:""};var Le=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.orgName;var r=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var a=xe.t("This app hasn\u2019t been installed on {orgName}.",{orgName:t});return n.a.createElement("div",{className:"p-app_profile_empty_state_container"},n.a.createElement("img",{src:r,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a))}}]);return t}(a["PureComponent"]);Le.displayName="AppProfileInstallationsEmptyState";Le.defaultProps=Fe;var Be=Le;var Ue=new E["b"]("enterprise_dashboard");var qe={orgName:y["b"].string,appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectCount:y["b"].number,undoSearchSelectionState:y["b"].object,columns:y["b"].array.isRequired,actions:y["b"].object.isRequired,featureWtaOrgLevelApps:y["b"].bool,toggleAllWorkspacesByApp:y["b"].func};var Ge={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:void 0,workspacesByAppApiTotal:void 0,workspacesByAppLoading:void 0,workspacesByAppSortBy:void 0,workspacesByAppSortDir:void 0,selectCount:0,undoSearchSelectionState:void 0,searchQuery:"",featureWtaOrgLevelApps:false,toggleAllWorkspacesByApp:void 0};var He=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.undoFilterAndSelection=r.undoFilterAndSelection.bind(r);return r}h()(t,[{key:"getWorkspacesByAppListProps",value:function e(){var t=this.props,r=t.columns,a=t.appId,n=t.workspacesByApp,i=t.workspacesByAppApiCursor,s=t.workspacesByAppApiTotal,o=t.workspacesByAppLoading,l=t.searchQuery,c=t.actions,u=t.selectCount;return{columns:r,appId:a,workspacesByApp:n,workspacesByAppApiCursor:i,workspacesByAppApiTotal:s,workspacesByAppLoading:o,searchQuery:l,actions:c,isSelectionBarShowing:u>0}}},{key:"undoFilterAndSelection",value:function e(){var t=this.props,r=t.actions,a=t.undoSearchSelectionState;a&&r.undoWorkspacesByAppSearchSelection(a)}},{key:"renderAppFilterInput",value:function e(){var t=this.props,r=t.searchQuery,a=t.workspacesByAppLoading,i=t.actions;var s=Ue.t("Filter by name...");var o=!!(r&&a);return n.a.createElement(Ne["a"],{placeholder:s,icon:"search",autoFocus:false,isLoading:o,onChange:i.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,"data-qa":"ent-app-profile-installations-filter"})}},{key:"renderUndoFilterAndSelectionAlert",value:function e(t,r){if(null===r)return null;var a=void 0;if(t){var i=r.workspaces_by_app_search_query;a=i?Ue.t('Restore previous selection for filter "{filter}".',{filter:i}):Ue.t("Restore previous selection and clear filter.")}return n.a.createElement(Ae["d"],{className:"p-app_management_workspaces_by_app_alert",level:"warning"},n.a.createElement(Pe["a"],{onClick:this.undoFilterAndSelection},a))}},{key:"renderSelectionBar",value:function e(t){var r=t.featureWtaOrgLevelApps,a=t.workspacesByApp,i=t.workspacesByAppFullCount,s=t.selectCount,o=t.toggleAllWorkspacesByApp;if(!r)return null;var l=[{id:"uninstall",label:Ue.t("Uninstall"),disabled:0===s,isDanger:true}];return n.a.createElement(Re["a"],{position:"absolute",availableCount:i,selectedCount:s,items:a,actions:l,onToggleSelect:o,onToggleShowingSelection:C["noop"],onAction:C["noop"]})}},{key:"render",value:function e(){var t=[this.renderAppFilterInput()];var r=this.props,a=r.orgName,i=r.searchQuery,s=r.workspacesByAppApiTotal,o=r.workspacesByAppLoading,l=r.workspacesByAppApiCursor,c=r.undoSearchSelectionState,u=r.featureWtaOrgLevelApps;var d=this.getWorkspacesByAppListProps();var p=null===s||isNaN(s)?null:parseInt(s,10);var v=Ue.t("{total, plural, =0 {Workspace Installations} =1 {# Workspace Installation} other {# Workspace Installations}}",{total:p});if(0===s&&!i&&!o&&l)return n.a.createElement("div",null,n.a.createElement(be["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:v,actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(Be,{orgName:a})));return n.a.createElement("div",{className:"c-selection_bar_container c-selection_bar_container--position_relative"},n.a.createElement(be["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:v,actions:t}),this.renderUndoFilterAndSelectionAlert(u,c),n.a.createElement("div",{className:"c-app_management_indent_half p-app_management_workspaces_by_app_list"},n.a.createElement(Te,d)),this.renderSelectionBar(this.props))}}]);return t}(a["PureComponent"]);He.displayName="AppManageWorkspaces";He.defaultProps=Ge;var We=He;var Ve=r(292);var Ke=r(128);var ze=r(126);var Qe=new E["b"]("enterprise_dashboard");function Ye(e){var t=e.toggleAllWorkspacesByApp,r=e.toggleWorkspacesByApp,a=e.onWorkspaceNameClick,n=e.workspacesByApp,i=e.selectionState,s=e.showOrgLevelAppsUI;var o=[Ze({onWorkspaceNameClick:a}),$e()];var l=s?[Xe({selectionState:i,workspacesByApp:n,toggleAllWorkspacesByApp:t,toggleWorkspacesByApp:r})].concat(o):o.concat(et());return{columns:l,toggleAllWorkspacesByApp:t}}function Je(e,t){var r=t.actions,a=t.dispatch;var n=r.apps;var i=333;var s=Object(Ve["bindActionCreators"])(n[e],a);var o=Object(C["debounce"])(function(e){var t=null!==e&&void 0!==e&&e.length?e:"";s.setWorkspacesByAppSearchQuery(t);s.resetWorkspacesByAppApiCursor()},i,{trailing:true});function l(e){var t=e.target.value;o(t)}return d()({},s,{onSearchInputChange:l})}function Xe(e){var t=e.selectionState,r=e.workspacesByApp,a=void 0===r?[]:r,i=e.toggleAllWorkspacesByApp,s=e.toggleWorkspacesByApp;var o=function e(){return i("NONE"===t||"SOME"===t)};var l=function e(t){return s(!!t.target.checked,t.target.value)};var c=a.map(function(e){return e.team_id}).join(" ");return{id:"checkbox",header:{value:n.a.createElement(ze["a"],{checked:"ALL"===t,indeterminate:"SOME"===t,"aria-controls":c,onChange:o,className:"p-app_management_workspaces_by_app_checkbox"}),sortable:false,"data-qa":"ent-app-profile-installations-header-name",className:"p-app_management_workspaces_by_app_checkbox_col"},rowTemplate:{value:function e(t){return n.a.createElement(ze["a"],{id:t.team_id,checked:!!t.isSelected,value:t.team_id,onChange:l,className:"p-app_management_workspaces_by_app_checkbox"})},className:"p-app_management_workspaces_by_app_checkbox_col"}}}function Ze(e){var t=e.onWorkspaceNameClick;return{id:"team_name",header:{value:Qe.t("Workspace"),sortable:true,"data-qa":"ent-app-profile-installations-header-name"},rowTemplate:{value:function e(r){var a=r&&r.icons&&r.icons.image_68;return n.a.createElement(Ke["a"],{className:"p-app_management_table_view_workspace_name","data-qa":"ent-app-profile-installations-row-name",onClick:function e(){return t(r.team_id)}},a&&n.a.createElement("img",{src:a,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:r.name}),n.a.createElement("span",{className:"bold"},r.team_name))}}}}function $e(){return{id:"installed_on",header:{value:Qe.t("Installed On"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_on"},rowTemplate:{value:function e(t){var r=t.installed_by&&t.installed_by&&t.installed_by.first_installation&&t.installed_by&&t.installed_by.first_installation.date;var a=new Date(1e3*r).toLocaleDateString();return n.a.createElement("div",null,a)}}}}function et(){return{id:"installed_by",header:{value:Qe.t("Installed By"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_by"},rowTemplate:{value:function e(t){var r=t.installed_by&&t.installed_by.count||1;var a=Qe.t("{userCount, plural, =1 {# user} other {# users}}",{userCount:r});return n.a.createElement("div",null,a)}}}}var tt={orgName:y["b"].string,appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectionState:y["b"].string,selectCount:y["b"].number,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired,featureWtaOrgLevelApps:y["b"].bool,showOrgLevelAppsUI:y["b"].bool,undoSearchSelectionState:y["b"].object};var rt={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,featureWtaOrgLevelApps:false,showOrgLevelAppsUI:false,undoSearchSelectionState:null};var at=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.actions,n=e.dispatch;r.actions=Je("installations",{actions:a,dispatch:n});r.generateAppsCSV=r.generateAppsCSV.bind(r);r.onWorkspaceNameClick=r.onWorkspaceNameClick.bind(r);r.toggleAllWorkspacesByApp=r.toggleAllWorkspacesByApp.bind(r);r.toggleWorkspacesByApp=r.toggleWorkspacesByApp.bind(r);return r}h()(t,[{key:"onWorkspaceNameClick",value:function e(t){var r=this.props,a=r.actions,n=r.dispatch;return n(a.router.navigateTo("/organization/teams/"+t))}},{key:"toggleAllWorkspacesByApp",value:function e(t){var r=this.props,a=r.workspacesByAppApiTotal,n=r.searchQuery;this.actions.toggleAllWorkspacesByApp({select:t,searchQuery:n,count:a})}},{key:"toggleWorkspacesByApp",value:function e(t,r){this.actions.toggleWorkspacesByApp({select:t,workspaces:[r]})}},{key:"generateAppsCSV",value:function e(){var t=this.props,r=t.searchQuery,a=t.workspacesByAppSortBy,n=t.workspacesByAppSortDir,i=t.appId,s=t.actions,o=t.dispatch;var l={type:"teams_by_app",app_id:i};r&&(l.query=r);if(a){l.sort_prefix=a;n&&(l.sort_dir=n)}o(s.apps.generateAppsCSVForSlackbotDM(l))}},{key:"render",value:function e(){var t=this.props,r=t.actions,a=t.dispatch,i=t.showOrgLevelAppsUI,s=fe()(t,["actions","dispatch","showOrgLevelAppsUI"]);var o=Ye({selectionState:s.selectionState,workspacesByApp:s.workspacesByApp,toggleAllWorkspacesByApp:this.toggleAllWorkspacesByApp,toggleWorkspacesByApp:this.toggleWorkspacesByApp,onWorkspaceNameClick:this.onWorkspaceNameClick,showOrgLevelAppsUI:i});return n.a.createElement(We,d()({},o,s,{actions:this.actions}))}}]);return t}(a["PureComponent"]);at.displayName="AppProfileInstallations";at.defaultProps=rt;var nt=at;var it=r(578);var st=new E["b"]("enterprise_dashboard");var ot=function e(){var t=cdn_url+"/7bba7/img/enterprise/empty_apps_state_restricted.png";var r=st.t("Permissions can\u2019t be shown for this app");var a=st.rt("This app was not installed via the App Directory, which means Slack has not reviewed this app and can\u2019t confirm the permissions it requests.");var i=st.rt("If you have questions about the type of data this app can access, reach out to the person who installed it.");return n.a.createElement("div",{className:"p-app_profile_empty_state_container p-app_profile_permissions_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100 margin_top_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},a),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},i))};ot.displayName="AppProfilePermissionsEmptyState";var lt=ot;var ct=new E["b"]("enterprise_dashboard");var ut={permissionsItems:y["b"].array,isDirectoryPublished:y["b"].bool,isXoxaApp:y["b"].bool,appId:y["b"].string};var dt={permissionsItems:[],isDirectoryPublished:false,isXoxaApp:false,appId:""};var pt=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={permissions:[],channelScopePermissions:[]};r.formatPermissions=r.formatPermissions.bind(r);return r}h()(t,[{key:"componentDidMount",value:function e(){this.formatPermissions(this.props.permissionsItems)}},{key:"componentWillReceiveProps",value:function e(t){this.props.permissionsItems!==t.permissionsItems&&this.formatPermissions(t.permissionsItems)}},{key:"formatPermissions",value:function e(t){var r=0;function a(){r+=1;return"scope_"+r+"_row"}var n=[];var i=[];t.forEach(function(e){if(!e.short_description&&!e.long_description)return;var t=a();e.is_channel_scope?i.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous}):n.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous})});var s={permissions:n,channelScopePermissions:i};this.setState(s)}},{key:"render",value:function e(){var t=this.props.isXoxaApp;var r=this.state,a=r.channelScopePermissions,i=r.permissions;if(!this.props.isDirectoryPublished&&"A02"!==this.props.appId)return n.a.createElement(lt,null);var s=void 0;s=t?ct.t("On workspaces, this app will be able to:"):ct.t("This app will be able to:");var o=ct.t("When added to a channel, this app will also be able to:");if(a.length)return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_250 padding_bottom_100 padding_left_100"},s),n.a.createElement(it["a"],{scopeInfo:i,key:"permissions"}),n.a.createElement("h2",{className:"padding_top_400 padding_bottom_100 padding_left_100"},o),n.a.createElement(it["a"],{scopeInfo:a,key:"channelScopePermissions"}));return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_150 padding_bottom_100 padding_left_100"},s),n.a.createElement(it["a"],{scopeInfo:i}))}}]);return t}(a["PureComponent"]);pt.displayName="AppProfilePermissions";pt.defaultProps=dt;var vt=pt;var mt=r(1831);var ht=r(95);var ft=r(84);var bt=new E["b"]("enterprise_dashboard");var gt={appName:y["b"].string.isRequired,appIcon:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,onDisable:y["b"].func,onEnable:y["b"].func,orgName:y["b"].string.isRequired};var _t={onDisable:C["noop"],onEnable:C["noop"],featureWtaOrgLevelApps:false};var yt=function e(t){var r=t.appIcon,a=t.appName,i=t.featureWtaOrgLevelApps,s=t.onEnable,o=t.onDisable,l=t.orgName;if(!i)return null;var c=bt.t("Automatically install {appName} on new workspaces?",{appName:Object(E["o"])(a)});var u=bt.t("{appName} will be automatically installed on newly created workspaces and workspaces that are migrated into {orgName}. You can change this policy later",{appName:Object(E["o"])(a),orgName:Object(E["o"])(l)});return n.a.createElement(ft["a"],{cancelText:bt.t("No"),contentLabel:c,"data-qa":"app_automatic_install_dialog",goButtonText:bt.t("Yes"),onCancel:o,onGo:s,showCancelButton:true,title:c,titleImage:r,truncateTitle:false},u)};yt.displayName="AppAutomaticInstallDialog";yt.defaultProps=_t;var Ot=Object(ht["pure"])(yt);var kt=new E["b"]("enterprise_dashboard");var Et={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,automaticInstallEnabled:y["b"].bool,featureWtaOrgLevelApps:y["b"].bool,orgName:y["b"].string.isRequired,openModal:y["b"].func};var jt={automaticInstallEnabled:false,featureWtaOrgLevelApps:false,openModal:C["noop"]};var Ct=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.showAutomaticInstallDialog=r.showAutomaticInstallDialog.bind(r);return r}h()(t,[{key:"showAutomaticInstallDialog",value:function e(){var t=this.props,r=t.appIcon,a=t.appName,i=t.featureWtaOrgLevelApps,s=t.orgName;var o={appIcon:r,appName:a,featureWtaOrgLevelApps:i,orgName:s};this.props.openModal({element:n.a.createElement(Ot,o)})}},{key:"render",value:function e(){var t=this.props,r=t.appName,a=t.automaticInstallEnabled,i=t.featureWtaOrgLevelApps,s=t.orgName;if(!i)return null;var o={className:"no_border",control:{editOnly:true,onEdit:this.showAutomaticInstallDialog,type:"button"},description:kt.t("Set whether {appName} will be automatically installed on newly created workspaces and any workspaces migrated into {orgName}.",{appName:Object(E["o"])(r),orgName:Object(E["o"])(s)}),label:kt.t("Automatic Installation"),onClick:this.showAutomaticInstallDialog,state:a?kt.t("Enabled"):kt.t("Disabled"),type:""};return n.a.createElement("div",{className:"c-app_management_indent_half border_top"},n.a.createElement(mt["a"],o))}}]);return t}(a["PureComponent"]);Ct.displayName="AppProfilePolicies";Ct.defaultProps=jt;var St=Ct;var wt={openModal:U["openModal"]};var It=Object(o["connect"])(null,wt)(Ct);var Tt=new E["b"]("enterprise_dashboard");var At=y["b"].shape({workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectionState:y["b"].string,selectCount:y["b"].number,undoSearchSelectionState:y["b"].object});var Nt={appName:y["b"].string.isRequired,appId:y["b"].string,appImageSrc:y["b"].string.isRequired,appImageSrcLarge:y["b"].string,appByline:y["b"].string,appScope:y["b"].oneOfType([y["b"].object,y["b"].string,y["b"].array]),automaticInstallEnabled:y["b"].bool,userIsCreationTeamMember:y["b"].bool,headerActions:y["b"].array,isOpen:y["b"].bool,isDirectoryPublished:y["b"].bool,isInstalledEverywhere:y["b"].bool,isSlackIntegration:y["b"].bool,orgName:y["b"].string,installations:At,appsDetailViewSelectedTab:y["b"].string,appsDetailViewWorkspaceContext:y["b"].string,appsDetailViewWorkspaceDomain:y["b"].string,currentUserTeams:y["b"].array,rootURL:y["b"].string.isRequired,isXoxaApp:y["b"].bool,isDistributedApp:y["b"].bool,orgTeams:y["b"].array,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired,featureWtaOrgLevelApps:y["b"].bool};var Pt={appId:"",appByline:"",appImageSrcLarge:void 0,appScope:[],automaticInstallEnabled:false,userIsCreationTeamMember:false,headerActions:[],isOpen:true,isDirectoryPublished:false,isInstalledEverywhere:false,isSlackIntegration:false,orgName:"",installations:{workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,undoSearchSelectionState:null},appsDetailViewSelectedTab:"installations",appsDetailViewWorkspaceDomain:null,appsDetailViewWorkspaceContext:null,currentUserTeams:[],isXoxaApp:false,isDistributedApp:true,orgTeams:null,featureWtaOrgLevelApps:false};var Rt=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.navigateToProfileTab=r.navigateToProfileTab.bind(r);r.navigateToAppDirectory=r.navigateToAppDirectory.bind(r);return r}h()(t,[{key:"navigateToProfileTab",value:function e(t){var r=this.props,a=r.actions,n=r.dispatch;return n(a.router.navigateTo("/organization/apps/profile/"+this.props.appId+"/"+t))}},{key:"navigateToAppDirectory",value:function e(){var t=this.props,r=t.appsDetailViewWorkspaceContext,a=t.appsDetailViewWorkspaceDomain,n=t.userIsCreationTeamMember,i=t.currentUserTeams,s=t.rootURL,o=t.orgTeams;var l=void 0;if(r&&i&&Object(C["includes"])(i,r)){var c="https://"+(a||"my")+"."+s.replace(/(http:\/\/|https:\/\/)/,"");l=c+"apps/"+this.props.appId+"?from_org_dashboard=1"}else if(n)l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";else if(i&&i.length){var u=Object(C["find"])(o,function(e){return e.id===i[0]});l="https://"+u.domain+"."+s.replace(/(http:\/\/|https:\/\/)/,"")+"apps/"+this.props.appId+"?from_org_dashboard=1"}else l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";window.open(l,"_blank")}},{key:"renderInstallationsContent",value:function e(){var t=this.props,r=t.installations,a=t.orgName,i=t.appId,s=t.isXoxaApp,o=t.actions,l=t.dispatch,c=t.featureWtaOrgLevelApps;return n.a.createElement(nt,d()({},r,{orgName:a,appId:i,actions:o,dispatch:l,featureWtaOrgLevelApps:c,showOrgLevelAppsUI:s&&c}))}},{key:"renderPermissionsContent",value:function e(){return n.a.createElement(vt,{permissionsItems:this.props.appScope,isDirectoryPublished:this.props.isDirectoryPublished,isXoxaApp:this.props.isXoxaApp,appId:this.props.appId})}},{key:"renderPoliciesContent",value:function e(){var t=this.props,r=t.appImageSrc,a=t.appName,i=t.automaticInstallEnabled,s=t.featureWtaOrgLevelApps,o=t.orgName;return n.a.createElement(It,{appIcon:r,appName:a,automaticInstallEnabled:i,featureWtaOrgLevelApps:s,orgName:o})}},{key:"renderHeaderActions",value:function e(){var t=this.props,r=t.appImageSrcLarge,a=t.appName,i=t.appScope,s=t.featureWtaOrgLevelApps,o=t.headerActions,l=t.isInstalledEverywhere,c=t.isXoxaApp;return s&&c?o.concat(n.a.createElement(me,{appName:a,appIcon:r,featureWtaOrgLevelApps:s,isInstalledEverywhere:l,scopes:i})):o}},{key:"render",value:function e(){var t=this.props,r=t.actions,a=t.appByline,i=t.appImageSrc,s=t.appName,o=t.currentUserTeams,l=t.dispatch,c=t.featureWtaOrgLevelApps,u=t.isDistributedApp,d=t.isOpen,p=t.isSlackIntegration,v=t.isXoxaApp,m=t.userIsCreationTeamMember;var h=u&&o&&o.length||m;var f=[{title:Tt.t("Installations"),id:"installations",content:this.renderInstallationsContent(),onClick:this.navigateToProfileTab}];p||f.push({title:Tt.t("Permissions"),id:"permissions",content:this.renderPermissionsContent(),onClick:this.navigateToProfileTab});c&&v&&f.push({title:Tt.t("Policies"),id:"policies",content:this.renderPoliciesContent(),onClick:this.navigateToProfileTab});h&&f.push({title:Tt.t("App Details"),icon:"external-link",id:"details",content:"",isExternalLink:true,onClick:this.navigateToAppDirectory});var b={actions:r,appByline:a,appImageSrc:i,appName:s,dispatch:l,headerActions:this.renderHeaderActions(),isOpen:d};return n.a.createElement("div",{className:"p-app_profile","data-qa":"ent-app-profile"},n.a.createElement(D,b),n.a.createElement(j["a"],{tabs:f,defaultTabId:this.props.appsDetailViewSelectedTab}))}}]);return t}(a["PureComponent"]);Rt.displayName="BaseAppProfile";Rt.defaultProps=Pt;var Mt=Object(S["a"])("feature_wta_org_level_apps")(Rt);var xt=new E["b"]("enterprise_dashboard");var Dt=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=xt.t("Apps");return n.a.createElement("div",{className:"c-app_management_indent"},n.a.createElement("h1",null,t))}}]);return t}(a["Component"]);Dt.displayName="AppManagementHeader";var Ft=Dt;var Lt=r(159);var Bt=r(1321);var Ut=r(392);var qt=r(2397);var Gt={isOpen:y["b"].bool.isRequired,title:y["b"].string.isRequired,subtext:y["b"].string.isRequired,contextButtonLabel:y["b"].string.isRequired,onDownloadClick:y["b"].func,contextCaption:y["b"].string,onContextBlur:y["b"].func};var Ht={onDownloadClick:C["noop"],contextCaption:"",onContextBlur:C["noop"]};var Wt=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleOnContextUnfocus=r.handleOnContextUnfocus.bind(r);return r}h()(t,[{key:"componentWillReceiveProps",value:function e(t){t.isOpen?document.addEventListener("click",this.handleOnContextUnfocus,false):document.removeEventListener("click",this.handleOnContextUnfocus,false)}},{key:"handleOnContextUnfocus",value:function e(t){this.props.onContextBlur(t,this.node)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.isOpen,i=r.title,s=r.subtext,o=r.contextButtonLabel,l=r.onDownloadClick,c=r.contextCaption;var u=k()("p-export_csv_context","menu",{"p-export_csv_context--hidden":!a});return n.a.createElement("div",{className:u,ref:function e(r){t.node=r}},n.a.createElement("div",{className:"p-export_csv_context_subtext"},n.a.createElement("h4",{className:"black"},i),n.a.createElement("p",{className:"break_word"},s),n.a.createElement(q["d"],{onClick:l,className:"p-export_csv_context_button"},o)),c&&n.a.createElement("div",{className:"p-export_csv_context_caption"},c))}}]);return t}(a["PureComponent"]);Wt.displayName="ExportContext";Wt.defaultProps=Ht;var Vt=Wt;var Kt=new E["b"]("enterprise_dashboard");var zt={title:y["b"].string.isRequired,subtext:y["b"].string.isRequired,contextButtonLabel:y["b"].string.isRequired,onDownloadClick:y["b"].func,contextCaption:y["b"].string,buttonSize:y["b"].string};var Qt={onDownloadClick:C["noop"],contextCaption:"",buttonSize:"medium"};var Yt=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onButtonClick=r.onButtonClick.bind(r);r.onDownloadButtonClick=r.onDownloadButtonClick.bind(r);r.onContextBlur=r.onContextBlur.bind(r);r.state={contextIsOpen:false};return r}h()(t,[{key:"onButtonClick",value:function e(){this.setState(function(e){return{contextIsOpen:!e.contextIsOpen}})}},{key:"onContextBlur",value:function e(t,r){r.contains(t.target)||this.state.contextIsOpen&&this.setState(function(){return{contextIsOpen:false}})}},{key:"onDownloadButtonClick",value:function e(){this.props.onDownloadClick();this.onButtonClick()}},{key:"render",value:function e(){var t=this.props,r=t.title,a=t.subtext,i=t.contextButtonLabel,s=t.contextCaption,o=t.buttonSize;var l=Kt.t("Export CSV");return n.a.createElement("div",null,n.a.createElement(q["d"],{type:"outline",onClick:this.onButtonClick,size:o,className:"p-export_csv_button"},l,n.a.createElement(w["a"],{type:"caret_down",className:"p-export_csv_button_caret"})),n.a.createElement(Vt,{isOpen:this.state.contextIsOpen,title:r,subtext:a,contextButtonLabel:i,onDownloadClick:this.onDownloadButtonClick,contextCaption:s,onContextBlur:this.onContextBlur}))}}]);return t}(a["PureComponent"]);Yt.displayName="ExportCSVButton";Yt.defaultProps=Qt;var Jt=Yt;var Xt=Jt;var Zt=new E["b"]("enterprise_dashboard");var $t={title:y["b"].string.isRequired,onDownloadClick:y["b"].func,buttonSize:y["b"].string};var er={onDownloadClick:C["noop"],buttonSize:"small"};var tr=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.buttonSize;var r=Zt.t("Your CSV may take a bit of time to generate. It\u2019ll be sent to you in Slack as soon as it\u2019s ready.");var a=Zt.t("Includes everything");var i=Zt.t("Generate CSV");return n.a.createElement(Xt,{onDownloadClick:this.props.onDownloadClick,title:this.props.title,subtext:a,contextButtonLabel:i,contextCaption:r,buttonSize:t})}}]);return t}(a["PureComponent"]);tr.displayName="AppManagementCSVPopup";tr.defaultProps=er;var rr=tr;var ar=rr;var nr=new E["b"]("enterprise_dashboard");var ir={orgName:y["b"].string};var sr={orgName:""};var or=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var r=Object(E["o"])(this.props.orgName);var a=nr.t("{orgName} has no apps installed.",{orgName:r});return n.a.createElement("div",{className:"p-app_management_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a))}}]);return t}(a["PureComponent"]);or.displayName="InstalledAppsEmptyState";or.defaultProps=sr;var lr=or;var cr=r(50);var ur=r(12);var dr=new E["b"]("enterprise_dashboard");var pr={orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsLoading:y["b"].bool,orgAppsApiTotal:y["b"].number,headerItemOnClick:y["b"].func,pageSize:y["b"].number,sortBy:y["b"].string,sortDir:y["b"].string,searchQuery:y["b"].string,rowHeaderItemClassName:y["b"].string,rowClassName:y["b"].string,featureEntAppManagementRestriction:y["b"].bool,featureWtaOrgLevelApps:y["b"].bool};var vr={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,headerItemOnClick:C["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureEntAppManagementRestriction:false,featureWtaOrgLevelApps:false};var mr="asc";var hr="desc";var fr="caret_down";var br="caret_up";var gr={};gr[mr]=fr;gr[hr]=br;var _r=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.sortBy,s=a.sortDir;r.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,activeMenuForAppId:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onToggleMenuClick=r.onToggleMenuClick.bind(r);r.maybeHideMenu=r.maybeHideMenu.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.nodeHasClass=r.nodeHasClass.bind(r);r.nodeIsChildOfClassName=r.nodeIsChildOfClassName.bind(r);r.appSources={internal:dr.t("Internal"),"app directory":dr.t("App Directory"),unknown:dr.t("Unknown")};r.sourceTooltipStrings={"app directory":dr.t("This app has been installed from the Slack App Directory."),internal:dr.t("This app was created by someone within your organization."),unknown:dr.t("This app was installed from an unknown external source.")};r.rowTemplate={items:[{value:function e(t){var a=t&&t.icons&&t.icons.image_72;return n.a.createElement(Ke["a"],{className:"p-app_management_table_view_app_name","data-qa":"ent-apps-installed-row-name",onClick:function e(){return r.onAppNameClick(t.id)}},a&&n.a.createElement("img",{src:a,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var r=t.teams_installed_on&&t.teams_installed_on.count||0;return dr.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:r})}},{value:function e(t){var a=r.sourceTooltipStrings[t.source];var i=r.appSources[t.source]||r.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(cr["c"],{tip:a,position:"top"},n.a.createElement("span",null,i)))},className:"c-table_view_row_item_source"}]};r.props.featureWtaOrgLevelApps&&r.rowTemplate.items.push({value:function e(t){return t.automatic_install_enabled?dr.t("Yes"):dr.t("No")}});r.props.featureEntAppManagementRestriction&&r.rowTemplate.items.push({value:function e(t){var a=r.state.activeMenuForAppId;var i={width:"15rem",kbNavActive:true,stripTerminalSeparators:true};var s=void 0;if(a&&a===t.id){var o=n.a.createElement("span",null,"Restrict this app...");var l=n.a.createElement("span",null,"View in App Directory ",n.a.createElement(w["b"],{type:"external-link",size:"inherit"}));s=n.a.createElement("div",{className:"c-app_management_menu_container"},n.a.createElement(G["f"],i,n.a.createElement(G["b"],{key:"org_app_menu_1",label:o,onSelected:function e(){r.onRestrictAppClick(t.id)}}),n.a.createElement(G["d"],{key:"org_app_menu_separator"}),n.a.createElement(G["b"],{key:"org_app_menu_2",label:l,href:"https://example.com",target:"_blank"})))}return n.a.createElement("div",null,n.a.createElement(Ke["a"],{className:"c-app_management_menu_trigger",onClick:r.onToggleMenuClick,"data-app-id":t.id},"\u2026"),s)},className:"p-app_management_table_menu"});r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=dr.rt("No apps were found matching <b>{query}</b>",{query:r});return n.a.createElement("div",{className:"align_center"},a)}}]};r.headerData=[{id:"name",value:dr.t("Name"),sortable:true,className:"p-app_management_table_header_name"},{id:"num_installed",value:dr.t("Installed On"),sortable:true,className:"p-app_management_table_header_installed_on"},{id:"source",value:dr.t("Source"),sortable:true,className:"p-app_management_table_header_source"}];r.props.featureWtaOrgLevelApps&&r.headerData.push({id:"automatic_install_enabled",value:dr.t("Automatic Install"),sortable:true});r.props.featureEntAppManagementRestriction&&r.headerData.push({id:"menu",value:"",noHover:true,className:"p-app_management_table_header_menu"});return r}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.orgApps,a=t.sortBy;var n=this.state.offset;if(r.length){this.updateRowListItemsData(n);Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsLoading(false))}else Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsLoading(true));Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsSortBy(a))}},{key:"componentDidMount",value:function e(){this.props.featureEntAppManagementRestriction&&window.addEventListener("click",this.maybeHideMenu)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t,r){this.maybeUpdateListRowItems(t,r);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("click",this.maybeHideMenu)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.orgApps,n=r.orgAppsApiTotal;if(n&&a.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onRestrictAppClick",value:function e(t){Object(ur["b"])().warn("onRestrictAppClick",t);this.hideMenu()}},{key:"onAppNameClick",value:function e(t){return Object(Lt["b"])(Object(Lt["a"])().router.navigateTo("/organization/apps/profile/"+t))}},{key:"onToggleMenuClick",value:function e(t){var r=t.target.getAttribute("data-app-id");var a=this.state.activeMenuForAppId;var n=r===a?null:r;var i={activeMenuForAppId:n};this.setState(i)}},{key:"maybeHideMenu",value:function e(t){if(!t)return false;var r=this.state.activeMenuForAppId;if(!r)return false;var a=t&&t.target;if(!a)return false;var n=this.nodeIsChildOfClassName(a,"c-app_management_menu_trigger")||this.nodeIsChildOfClassName(a,"c-menu");if(n)return false;this.hideMenu();return true}},{key:"hideMenu",value:function e(){var t={activeMenuForAppId:null};this.setState(t)}},{key:"nodeHasClass",value:function e(t,r){if(!t||void 0===r||!r.length)return false;if(t&&t.classList&&t.classList.contains)return t.classList.contains(r);return!!(t.className&&t.className.length&&t.className.split(" ").includes(r))}},{key:"nodeIsChildOfClassName",value:function e(t,r){var a=t;if(!a||!r)return false;if(this.nodeHasClass(a,r))return true;if(!a.parentNode)return false;while(!this.nodeHasClass(a,r)&&a.parentNode)a=a.parentNode;return this.nodeHasClass(a,r)}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props.orgAppsLoading;r&&!t.orgAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsSearchQuery(t.searchQuery));this.resetOrgAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t,r){var a=this.state,n=a.offset,i=a.activeMenuForAppId;var s=this.props,o=s.searchQuery,l=s.orgApps,c=s.orgAppsLoading;t.orgApps===l&&t.searchQuery===o&&t.orgAppsLoading===c&&r.activeMenuForAppId===i||this.updateRowListItemsData(n)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==mr?mr:hr;Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===mr?hr:mr:hr;Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsSortDir(o));Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){r.resetOrgAppsState();e&&e(t)})}},{key:"resetOrgAppsState",value:function e(){Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsApiTotal(null));Object(Lt["b"])(Object(Lt["a"])().apps.resetOrgAppsApiCursor());Object(Lt["b"])(Object(Lt["a"])().apps.resetOrgApps());Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsLoading(true))}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.value,noHover:t.noHover,className:t.className};if(t.sortable){r.iconType=this.determineSortState(t.id,t);r.onClick=this.headerItemOnClick;t.defaultSortType&&(r.defaultSortType=t.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||mr;var o=gr[s];if(!n||n!==t)return o;var l=void 0;l=i?i===mr?fr:br:gr[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.orgAppsApiCursor;var l={limit:i};r&&(l.sort=r);a&&(l.sort_dir=a);null!==s&&void 0!==s&&Object(C["trim"])(s).length&&(l.query=s);o&&(l.cursor=o);Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsLoading(true));Object(Lt["b"])(Object(Lt["a"])().apps.getOrgApps(l))}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=[];var n=t||0;var i=0;var s=this.props,o=s.orgApps,l=s.orgAppsLoading;var c={rowListItems:a};function u(){i+=1;return"row_"+n+"_item"+i}function d(e,t){var r={id:"row_"+n,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:u()};t.className&&(a.className=t.className);r.items.push(a)});n+=1;return r}if(o&&o.length)o.forEach(function(e){a.push(d(e,r.rowTemplate))});else if(!l){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var v=[{searchQuery:p}];v.forEach(function(e){a.push(d(e,r.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,i=r.sortDir,s=r.rowListItems,o=r.offset;var l=this.props,c=l.orgAppsLoading,u=l.searchQuery,d=l.rowHeaderItemClassName,p=l.rowClassName;var v=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(ge["a"],{autoHeight:true,rows:s,headers:v,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:i,searchQuery:u,isLoading:c,newQuery:!o,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(a["PureComponent"]);_r.displayName="OrgAppsList";_r.defaultProps=vr;var yr=Object(S["a"])("feature_wta_org_level_apps")(_r);var Or=r(2125);var kr=new E["b"]("enterprise_dashboard");var Er=333;var jr={orgName:y["b"].string.isRequired,orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsApiTotal:y["b"].number,orgAppsLoading:y["b"].bool,orgAppsSortDir:y["b"].string,orgAppsSortBy:y["b"].string,searchQuery:y["b"].string,featureEntAppManagementRestriction:y["b"].bool};var Cr={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false};var Sr=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSearchInputChange=r.onSearchInputChange.bind(r);r.onSearchInputChangeDelayed=Object(C["debounce"])(r.onSearchInputChangeDelayed,Er,{trailing:true}).bind(r);r.generateAppsCSV=r.generateAppsCSV.bind(r);return r}h()(t,[{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.onSearchInputChangeDelayed(r)}},{key:"onSearchInputChangeDelayed",value:function e(t){var r=null!==t&&void 0!==t&&t.length?t:null;Object(Lt["b"])(Object(Lt["a"])().apps.setOrgAppsSearchQuery(r));Object(Lt["b"])(Object(Lt["a"])().apps.resetOrgAppsApiCursor())}},{key:"getOrgAppsListProps",value:function e(){var t={orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"formatTitleString",value:function e(t){if(null!==t&&!Number.isNaN(t)&&t>0)return kr.t("{orgAppsApiTotal, plural, =1 {# Installed App} other {# Installed Apps}}",{orgAppsApiTotal:t});return kr.t("Installed Apps")}},{key:"generateAppsCSV",value:function e(){var t=this.props,r=t.orgAppsSortDir,a=t.orgAppsSortBy,n=t.searchQuery;var i={type:"apps"};n&&(i.query=n);if(a){i.sort_prefix=a;r&&(i.sort_dir=r)}Object(Lt["b"])(Object(Lt["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"renderExportButton",value:function e(){var t=this.props.orgAppsApiTotal;var r=kr.t("Installed Apps");if(!t)return null;return n.a.createElement(ar,{title:r,query:this.props.searchQuery,onDownloadClick:this.generateAppsCSV})}},{key:"renderAppFilterInput",value:function e(){var t=kr.t("Filter by name...");return n.a.createElement("div",null,n.a.createElement(Ut["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.orgAppsLoading,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,size:"small"}))}},{key:"render",value:function e(){var t=this.props,r=t.orgAppsApiTotal,a=t.orgAppsLoading,i=t.searchQuery,s=t.orgAppsApiCursor;var o=[this.renderExportButton(),this.renderAppFilterInput()];var l=this.getOrgAppsListProps();if(0===r&&!i&&!a&&s)return n.a.createElement("div",{className:"p-app_management_installed_apps"},n.a.createElement(Bt["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(r),actions:o}),n.a.createElement(lr,{orgName:this.props.orgName}));return n.a.createElement("div",{className:"p-app_management_installed_apps"},n.a.createElement(Bt["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(r),actions:o}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(yr,l)))}}]);return t}(a["PureComponent"]);Sr.displayName="AppManagementInstalledApps";Sr.defaultProps=Cr;var wr=Sr;var Ir=wr;var Tr=r(3052);var Ar={};var Nr=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={};return r}h()(t,[{key:"render",value:function e(){var t="This data set is large, so your CSV will take some time to generate. We'll send it to you in Slack as soon as it's ready.";return n.a.createElement(Xt,{title:"Restricted Apps",subtext:"Includes everything",contextButtonLabel:"Generate CSV",contextCaption:t,buttonSize:"small"})}}]);return t}(a["PureComponent"]);Nr.displayName="RestrictedAppsExportCSV";var Pr=Nr;var Rr="desc";var Mr=[{id:"name",value:"Name",sortable:true},{id:"restricted_on",value:"Restricted On",sortable:true,defaultSortType:Rr},{id:"restricted_by",value:"Restricted By"},{id:"exceptions",value:"Exceptions"},{id:"existing",value:"Existing Installations"}];function xr(e){var t=new Date(e||parseInt(Math.random()*(new Date).getTime(),10));return t.toDateString()}var Dr={items:[{value:function e(t){var r=void 0;t.profile?r=t.profile.image_48:t.icon&&(r=t.icon.image_34);if(r)return n.a.createElement("span",null,n.a.createElement("img",{src:r,style:{width:"24px",height:"24px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),n.a.createElement("b",null,t.name));return n.a.createElement("b",null,t.name)}},{value:function e(t){return xr(1e3*t.updated)}},{value:function e(t){return t.name}},{value:function e(){var t=parseInt(10*Math.random(),10);var r=void 0;r=0===t?"None":t+" "+(1===t?"exception":"exceptions");return r}},{value:function e(){var t=parseInt(1024*Math.random(),10);var r=1===t?"workspace":"workspaces";return t+" "+r}}]};var Fr=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onIconClick=r.onIconClick.bind(r);r.onCoachmarkSkip=r.onCoachmarkSkip.bind(r);r.onCoachmarkContinue=r.onCoachmarkContinue.bind(r);r.onSearchInputChange=r.onSearchInputChange.bind(r);r.state={showCoachmark:true,isSearching:false};return r}h()(t,[{key:"onIconClick",value:function e(){this.setState(function(){return{showCoachmark:true}})}},{key:"onCoachmarkSkip",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onCoachmarkContinue",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onSearchInputChange",value:function e(t){var r={searchQuery:t.target.value};this.setState(function(){return r})}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir,n=t.searchQuery;var i={headerData:Mr,rowTemplate:Dr,sortBy:r,sortDir:a,searchQuery:n};return i}},{key:"renderExportButton",value:function e(){return n.a.createElement(Pr,null)}},{key:"renderRestrictionButton",value:function e(){return n.a.createElement(q["d"],{size:"small",type:"outline"},"Export")}},{key:"renderAppFilterInput",value:function e(){return n.a.createElement(Ut["a"],{placeholder:"Filter by name...",icon:"search",autoFocus:false,isLoading:this.state.isSearching,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",size:"small"})}},{key:"renderRestrictedTitle",value:function e(){var t=k()("p-app_management_restricted_apps__info_icon","margin_left_50",{"p-app_management_restricted_apps__info_icon--active":this.state.showCoachmark});return n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement("span",null,"Restricted Apps"),n.a.createElement(Tr["a"],{hasCloseButton:true,content:"By restricting an app for the organization, members will no longer be allowed to install them on any workspace. Existing installations will not be automatically removed. To learn more about restricted apps, visit out help center.",shouldShow:this.state.showCoachmark,position:"right",onSkip:this.onCoachmarkSkip,hasSkipLink:false,onContinue:this.onCoachmarkContinue},n.a.createElement(w["a"],{type:"question_circle",onClick:this.onIconClick,className:t})))}},{key:"render",value:function e(){var t=[this.renderExportButton(),this.renderRestrictionButton(),this.renderAppFilterInput()];var r=this.getOrgAppsListProps();return n.a.createElement("div",{className:"p-app_management_restricted_apps"},n.a.createElement(Bt["a"],{title:this.renderRestrictedTitle(),actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(yr,r)))}}]);return t}(a["PureComponent"]);Fr.displayName="AppManagementRestrictedApps";var Lr=Fr;var Br=Lr;var Ur=new E["b"]("enterprise_dashboard");var qr={orgName:y["b"].string.isRequired,actions:y["b"].object.isRequired,defaultTabId:y["b"].string,profileIsOpen:y["b"].bool,orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsApiTotal:y["b"].number,orgAppsSortDir:y["b"].string,orgAppsSortBy:y["b"].string,orgAppsLoading:y["b"].bool,searchQuery:y["b"].string,featureEntAppManagementRestriction:y["b"].bool,appProfile:y["b"].object};var Gr={defaultTabId:"",profileIsOpen:false,orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false,appProfile:null};var Hr=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.tabActionOnClick=function(t){return e.actions.router.navigateTo("/organization/apps/"+t)};return r}h()(t,[{key:"getAppProps",value:function e(){var t={orgName:this.props.orgName,orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,orgAppsSortDir:this.props.orgAppsSortDir,orgAppsSortBy:this.props.orgAppsSortBy,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"renderInstalledAppsContent",value:function e(){var t=this.getAppProps();return n.a.createElement("div",null,n.a.createElement(Ir,t))}},{key:"renderRestrictedAppsContent",value:function e(){return n.a.createElement(Br,null)}},{key:"render",value:function e(){var t=this.tabActionOnClick;var r=this.props,a=r.defaultTabId,i=r.appProfile,s=r.actions;var o=[{title:Ur.t("Installed Apps"),id:"installed",content:this.renderInstalledAppsContent(),onClick:t}];this.props.featureEntAppManagementRestriction&&o.push({title:Ur.t("Restricted Apps"),id:"restricted",content:this.renderRestrictedAppsContent(),onClick:t});var l=k()("p-app-panel",{open:this.props.profileIsOpen});return n.a.createElement("div",{className:"p-app_management padding_top_200"},n.a.createElement(Ft,null),n.a.createElement(j["a"],{tabs:o,defaultTabId:a}),n.a.createElement("div",{className:l},i?n.a.createElement(Mt,d()({},i,{actions:s})):null))}}]);return t}(a["PureComponent"]);Hr.displayName="AppManagement";Hr.defaultProps=Gr;var Wr=Hr;var Vr=Wr;Object(c["a"])("interop.appManagement",{render:function e(t,r,a){if(!t)throw new Error("appManagement render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Vr,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return b});r.d(t,"b",function(){return g});var a=r(37);var n=r.n(a);var i=r(0);var s=r(1);var o=r.n(s);var l=r(95);var c=r(16);var u=r.n(c);var d=r(357);var p=r(1761);var v={date:i["b"].number.isRequired,isUnread:i["b"].bool,ghost:i["b"].bool};var m={isUnread:false,ghost:false};function h(e){var t=e.isUnread,r=n()(e,["isUnread"]);var a=t?o.a.createElement(p["a"],{ghost:r.ghost}):o.a.createElement("hr",{className:"c-message_list__day_divider__line"});return o.a.createElement("div",{className:"c-message_list__day_divider"},a)}h.displayName="DayDivider";h.defaultProps=m;function f(e){var t=e.date,r=e.sticky;var a=t/1e3;var n=Object(d["a"])(a,"{day_divider_pretty}");var i=u()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!r});return o.a.createElement("div",{className:i},o.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},n))}f.displayName="DayDividerLabel";f.defaultProps={sticky:true};var b=Object(l["pure"])(h);var g=Object(l["pure"])(f)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(3);var d=r.n(u);var p=r(6);var v=r.n(p);var m=r(7);var h=r.n(m);var f=r(8);var b=r.n(f);var g=r(9);var _=r.n(g);var y=r(0);var O=r(2);var k=r(10);var E=r(707);var j=r(26);var C=r.n(j);var S=r(5);var w=r.n(S);var I=r(1321);var T=r(927);var A=r(22);var N=r(96);var P=r(51);var R=r(157);var M=r(701);var x=r(258);var D=r(37);var F=r.n(D);var L=r(126);var B=r(3082);var U={id:y["b"].string.isRequired,headers:y["b"].array,rows:y["b"].arrayOf(y["b"].shape({id:y["b"].string.isRequired,items:y["b"].array,selectable:y["b"].bool})),selectedRows:y["b"].array,onSelect:y["b"].func,getCheckboxId:y["b"].func};var q={headers:[],rows:[],selectedRows:[],onSelect:O["noop"],getCheckboxId:null};var G=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getCheckboxId=r.getCheckboxId.bind(r);return r}h()(t,[{key:"getValidSelectedRows",value:function e(t){return Object(O["map"])(this.props.rows,"id").filter(function(e){return t.includes(e)})}},{key:"getCheckboxId",value:function e(t){var r=void 0;r=this.props.getCheckboxId?this.props.getCheckboxId(t.id):this.props.id+"-"+t.id+"-checkbox";return r}},{key:"getHeaders",value:function e(t){var r=this.props,a=r.id,i=r.headers,s=r.rows,o=r.onSelect;var l=s.filter(function(e){return false!==e.selectable});var c=l.length>0;var u=c&&t.length===l.length;return[{id:a+"-select-all-checkbox",value:n.a.createElement(L["a"],{checked:u,disabled:!c,indeterminate:t.length>0&&t.length<l.length,onChange:function e(){return o(u?[]:Object(O["map"])(l,"id"))},"aria-controls":l.map(this.getCheckboxId).join(" "),className:"p-ent_multi_select_table__checkbox"}),noHover:true,className:"p-ent_multi_select_table__checkbox_item"}].concat(C()(i))}},{key:"getRows",value:function e(t){var r=this;var a=this.props,i=a.rows,s=a.onSelect;return i.map(function(e){var a=t.includes(e.id);var i=r.getCheckboxId(e);return d()({},e,{selected:a,items:[{id:i+"-item",value:n.a.createElement(L["a"],{id:i,checked:a,disabled:false===e.selectable,value:e.id,onChange:function r(){return s(a?Object(O["without"])(t,e.id):[].concat(C()(t),[e.id]),e.id)},className:"p-ent_multi_select_table__checkbox"}),className:"p-ent_multi_select_table__checkbox_item"}].concat(C()(e.items))})})}},{key:"render",value:function e(){var t=this.props,r=t.selectedRows,a=t.onSelect,i=F()(t,["selectedRows","onSelect"]);var s=this.getValidSelectedRows(r);return n.a.createElement(T["b"],d()({},i,{headers:this.getHeaders(s),rows:this.getRows(s)}))}}]);return t}(a["PureComponent"]);G.displayName="MultiSelectTable";G.defaultProps=q;var H=G;var W=H;var V=r(1852);var K=r(1213);var z=r(1785);var Q=z["a"];var Y=r(536);var J=r(4);var X=r(150);var Z=r(48);var $=r(189);var ee=r(220);var te=function e(t){var r=t.date;return n.a.createElement(a["Fragment"],null,Object($["a"])(r),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_dark_gray"},Object(ee["a"])(r)))};te.displayName="MigrationTableDate";var re=te;var ae=re;var ne=r(28);var ie=r(50);var se=new k["b"]("migration_table");var oe={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onApprove:y["b"].func,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var le={statusPageURL:null,isOrgOwner:false,disableActions:false,onApprove:O["noop"],onDecline:O["noop"]};var ce=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderStatusLink",value:function e(){var t=this.props,r=t.statusPageURL,a=t.featureMigrationOrgApprovals;var i=void 0;i=a?n.a.createElement(P["a"],{href:r},se.t("View status")):n.a.createElement("div",{className:"p-migration_table__link"},n.a.createElement(P["a"],{href:r},n.a.createElement("span",null,se.t("View Migration Status"))),n.a.createElement(A["b"],{type:"chevron-right"}));return i}},{key:"renderPendingResponse",value:function e(){var t=this.props,r=t.isOrgOwner,i=t.disableActions,s=t.onApprove,o=t.onDecline,l=t.migrationInfo,c=t.featureMigrationOrgApprovals;if(!c)return null;var u=null;u=r?n.a.createElement("div",{className:"p-migration_table__buttons"},n.a.createElement(ne["d"],{type:"outline",size:"small",disabled:i,onClick:function e(){return o(l.id)}},se.t("Decline")),n.a.createElement(ne["d"],{type:"primary",size:"small",disabled:i,onClick:function e(){return s(l.id)},className:"margin_left_50"},se.t("Approve"))):n.a.createElement(a["Fragment"],null,se.t("Pending approval")," ",n.a.createElement(ie["c"],{tip:se.t("Migrations can only be approved by an Organization Owner"),position:"top"},n.a.createElement(A["b"],{type:"question-circle",inline:true,className:"sk_light_gray"})));return u}},{key:"renderInviteResponse",value:function e(){var t=this.props,r=t.migrationInfo,a=t.featureMigrationOrgApprovals;var i=null;a&&(r.date_declined?i=n.a.createElement("span",{className:"sk_warning_red"},se.t("Declined")):r.date_approved&&r.approver&&(i=se.rt("Approved <div>by {name}</div>",{name:r.approver.real_name},function(e){var t=e.key,r=e.text;return n.a.createElement("div",{key:t,className:"sk_dark_grey"},r)})));return i}},{key:"renderScheduled",value:function e(){var t=(new Date).getTime()/1e3;var r=t+28800;var i=this.props,s=i.migrationInfo,o=i.featureMigrationOrgApprovals;var l=null;l=s.date_approved||s.date_declined?s.date_scheduled>t&&s.date_scheduled<=r?o?n.a.createElement(a["Fragment"],null,se.t("Starting soon"),n.a.createElement("br",null),this.renderStatusLink()):this.renderStatusLink():this.renderInviteResponse():s.date_scheduled<=t&&o?n.a.createElement(a["Fragment"],null,n.a.createElement("span",{className:"sk_warning_red"},se.t("Canceled")),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_dark_grey"},se.t("Contact Slack to reschedule"))):this.renderPendingResponse();return l}},{key:"renderInProgress",value:function e(){var t=void 0;t=this.props.featureMigrationOrgApprovals?n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(N["a"],{color:"blue",size:"large"}),n.a.createElement("div",null,se.rt("In progress"),n.a.createElement("br",null),this.renderStatusLink())):this.renderStatusLink();return t}},{key:"render",value:function e(){var t=this.props.migrationInfo;var r=null;switch(t.status){case"scheduled":r=this.renderScheduled();break;case"in_progress":r=this.renderInProgress();break;case"complete":case"invite_rejected":r=this.renderInviteResponse();break;default:break}return r}}]);return t}(a["PureComponent"]);ce.displayName="MigrationStatusRowItem";ce.defaultProps=le;var ue=ce;var de=ue;var pe=r(66);var ve=new k["b"]("migration_table");var me={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var he={statusPageURL:null,isOrgOwner:false,disableActions:false,onDecline:O["noop"]};var fe=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}h()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.migrationInfo,i=r.statusPageURL,s=r.isOrgOwner,o=r.onDecline,l=r.disableActions;return n.a.createElement(pe["f"],d()({},t,{width:"auto"}),n.a.createElement(pe["b"],{label:ve.t("View status"),href:i,disabled:l}),s?n.a.createElement(pe["b"],{danger:true,label:ve.t("Decline"),onSelected:function e(){return o(a.id)},disabled:l}):null)}},{key:"renderMenuTrigger",value:function e(){var t=this.props.disableActions;return n.a.createElement(pe["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(ne["c"],{disabled:t},n.a.createElement(A["b"],{type:"ellipsis"})))}},{key:"render",value:function e(){var t=this.props,r=t.migrationInfo,a=t.featureMigrationOrgApprovals;if(!a)return null;var n=null;"scheduled"!==r.status||!r.date_approved||(n=this.renderMenuTrigger());return n}}]);return t}(a["PureComponent"]);fe.displayName="MigrationTableRowMenu";fe.defaultProps=he;var be=fe;var ge=be;var _e=r(84);var ye=r(444);var Oe=r(3084);var ke=new k["b"]("migration_table");var Ee="approve";var je="decline";var Ce={action:y["b"].oneOf([Ee,je]).isRequired,migrations:y["b"].array.isRequired,onSubmit:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var Se={onSubmit:O["noop"]};var we=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isPending:false};r.handleSubmit=r.handleSubmit.bind(r);return r}h()(t,[{key:"getTextTitle",value:function e(){var t=this.props,r=t.migrations,a=t.action,n=t.featureMigrationOrgApprovals;if(!n)return null;var i=null;i=a===Ee?ke.t("{count, plural, =1 {Approve migration?} other {Approve # migrations?}}",{count:r.length}):ke.t("{count, plural, =1 {Decline migration?} other {Decline # migrations?}}",{count:r.length});return i}},{key:"getBulkConfirmTableRows",value:function e(t){var r=this.props.migrations;var a={workspace:function e(t){return n.a.createElement(Q,{team:t.team})},date:function e(t){return n.a.createElement(ae,{date:t.migration_info.date_scheduled})}};return r.map(function(e){return{id:"mig-"+e.migration_info.id,items:t.map(function(t){var r=t.id,n=t.className;return{id:r,className:n,value:a[r]&&a[r](e)}})}})}},{key:"handleSubmit",value:function e(){var t=this;this.setState(function(){return{isPending:true}});return this.props.onSubmit().finally(function(){return t.setState(function(){return{isPending:false}})})}},{key:"renderTitle",value:function e(){var t=this.props,r=t.migrations,a=t.featureMigrationOrgApprovals;if(!a)return null;var i=this.getTextTitle();1===r.length&&(i=n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement(ye["a"],{entityType:"workspace",dimension:24,entityData:r[0].team,customClasses:"margin_right_75"}),i));return i}},{key:"renderBulkConfirmList",value:function e(){if(!this.props.featureMigrationOrgApprovals)return null;var t=[{id:"workspace",value:ke.t("Workspace"),className:"p-migration_response_confirm_dialog__workspace_item",noHover:true},{id:"date",value:ke.t("Scheduled for"),className:"p-migration_response_confirm_dialog__date_item",noHover:true}];return n.a.createElement("div",{className:"p-migration_response_confirm_dialog__table"},n.a.createElement(T["b"],{headers:t,rows:this.getBulkConfirmTableRows(t),disableHover:true,height:"35vh"}))}},{key:"renderContent",value:function e(){var t=this.props,r=t.migrations,i=t.action,s=t.featureMigrationOrgApprovals;if(!s)return null;var o=null;if(r.length>1)o=n.a.createElement(a["Fragment"],null,i===Ee?ke.t("Would you like to approve these migrations?"):ke.t("If you decline these migrations, you'll need to contact Slack to reschedule them."),this.renderBulkConfirmList());else{var l=r[0];o=i===Ee?ke.rt("Approve the migration of the workspace <strong>{name}</strong> for <strong>{date} at {time}</strong>?",{name:l.team.name,date:Object($["a"])(l.migration_info.date_scheduled),time:Object(ee["a"])(l.migration_info.date_scheduled)}):ke.rt("If you decline this migration of <strong>{name}</strong>, you\u2019ll need to contact Slack to reschedule it.",{name:l.team.name})}return o}},{key:"render",value:function e(){var t=this.props,r=t.action,a=t.featureMigrationOrgApprovals;if(!a)return null;return n.a.createElement(_e["a"],{cancelText:ke.t("Cancel"),goButtonText:r===Ee?ke.t("Approve"):ke.t("Decline"),goButtonType:r===Ee?"primary":"danger",goButtonIsPending:this.state.isPending,goButtonIsDisabled:this.state.isPending,onGo:this.handleSubmit,title:this.renderTitle(),titleAria:this.getTextTitle(),useSlackScrollbar:false},this.renderContent())}}]);return t}(a["PureComponent"]);we.displayName="MigrationResponseConfirmDialog";we.defaultProps=Se;var Ie=we;var Te=Ie;var Ae=new k["b"]("migration_table");var Ne={enterpriseName:y["b"].string.isRequired,orgURL:y["b"].string,scheduled:y["b"].bool,isOrgOwner:y["b"].bool,fetchCompletedMigrations:y["b"].func.isRequired,fetchScheduledMigrations:y["b"].func.isRequired,approveMigrations:y["b"].func.isRequired,declineMigrations:y["b"].func.isRequired,enqueueToast:y["b"].func,openModal:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var Pe={enqueueToast:O["noop"],openModal:O["noop"],scheduled:false,isOrgOwner:false,orgURL:null};var Re="approve";var Me="decline";function xe(e){return"mig-"+e}function De(e){return"migration-table-"+e+"-checkbox"}function Fe(e){var t=(new Date).getTime()/1e3;var r=e.migration_info;return"scheduled"===r.status&&r.date_scheduled>t}function Le(e){var t=(new Date).getTime()/1e3;var r=e.migration_info;var a="invite_rejected"===r.status;var n="scheduled"===r.status&&r.date_scheduled<=t&&!r.date_approved&&!r.date_declined;return a||n}var Be=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={selectedRows:[],completedMigrations:[],scheduledMigrations:[],pendingUpdates:[],recentlyUpdated:[],isCompletedLoading:true,isScheduledLoading:true,errorAlert:false,tableHeight:null,tablePaddingBottom:0,showingSelection:false};r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);return r}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props.scheduled;if(t)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t,r){var a=this.state.selectedRows;var n=this.props.scheduled;var i=a.length>0;var s=r&&r.selectedRows&&r.selectedRows.length>0;i!==s&&this.refreshTableHeightPolitely();if(n!==t.scheduled){if(n)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}return O["noop"]}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"getStatusPageURL",value:function e(t){return this.props.orgURL+"/migrations/"+t+"/status"}},{key:"fetchScheduledMigrations",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props.featureMigrationOrgApprovals;r||this.setState(function(){return{isScheduledLoading:true}});return this.props.fetchScheduledMigrations().then(function(e){var r=Object(O["sortBy"])(e,[function(e){var t=void 0;t=!a||e.migration_info.date_approved||e.migration_info.date_declined?["in_progress","scheduled","invite_rejected"].indexOf(e.migration_info.status):-Infinity;return t},function(e){return e.migration_info.date_scheduled}]);t.setState(function(){return{scheduledMigrations:r,isScheduledLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isScheduledLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"fetchCompletedMigrations",value:function e(){var t=this;this.setState(function(){return{isCompletedLoading:true}});return this.props.fetchCompletedMigrations().then(function(e){var r=Object(O["sortBy"])(e,[function(e){return-e.migration_info.date_finished}]);t.setState(function(){return{completedMigrations:r,isCompletedLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isCompletedLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"showResponseConfirmDialog",value:function e(t,r){var a=this;this.props.openModal({element:n.a.createElement(Te,{migrations:t,action:r,onSubmit:function e(){return a.respondToInvite(t,r)},featureMigrationOrgApprovals:this.props.featureMigrationOrgApprovals})})}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=this.state.selectedRows;var r=window.innerHeight;if(!this.tableViewRef)return;var a=this.tableViewRef.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var n=a.getBoundingClientRect();var i=t.length>0?K["a"]:0;var s=r-(n&&n.top);var o=64;var l=Math.max(o,s-i);this.setState(function(){return{tableHeight:l,tablePaddingBottom:i}})}},{key:"respondToInvite",value:function e(t,r){var a,i=this;if(!this.props.featureMigrationOrgApprovals)return null;var s=(a={},w()(a,Re,this.props.approveMigrations),w()(a,Me,this.props.declineMigrations),a)[r];var o=t.map(function(e){return e.migration_info.id});this.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:Object(O["union"])(t,o)}});return s({migrationIds:o}).then(function(){return i.fetchScheduledMigrations(true)}).then(function(){var e=null;e=r===Re?Ae.t("{count, plural, =1 {Migration approved} other {# migrations approved}}",{count:o.length}):Ae.t("{count, plural, =1 {Migration declined} other {# migrations declined}}",{count:o.length});i.props.enqueueToast({element:n.a.createElement(R["b"],null,e)});i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:Object(O["union"])(t,o),selectedRows:[],showingSelection:false}});setTimeout(function(){i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:O["without"].apply(void 0,[t].concat(C()(o)))}})},T["b"].HIGHLIGHT_DURATION)}).catch(function(){i.props.enqueueToast({element:n.a.createElement(R["b"],null,Ae.t("Something\u2019s gone wrong. Mind trying again in a moment?"))})}).finally(function(){return i.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:O["without"].apply(void 0,[t].concat(C()(o)))}})})}},{key:"createHeaders",value:function e(){var t=this.props,r=t.featureMigrationOrgApprovals,a=t.scheduled;var n=a?Ae.t("Scheduled for"):Ae.t("Completed on");var i="";r&&(i=a?Ae.t("Status"):Ae.t("Approved by"));var s=[{id:"workspace",value:Ae.t("Workspace"),className:"p-migration_table__workspace",noHover:true},{id:"date",value:n,className:"p-migration_table__date",noHover:true},{id:"status",value:i,className:"p-migration_table__status",noHover:true}];r&&a&&s.push({id:"contextMenu",value:"",className:"p-migration_table__context_menu",noHover:true});return s}},{key:"makeTableRows",value:function e(t,r){var a=this;var i=this.props,s=i.isOrgOwner,o=i.featureMigrationOrgApprovals;var l=this.state,c=l.pendingUpdates,u=l.recentlyUpdated,d=l.selectedRows,p=l.showingSelection;var v={workspace:function e(t){return n.a.createElement(Q,{team:t.team,inactive:Le(t)})},date:function e(t){return a.renderDateRow(t.migration_info)},status:function e(t){return a.renderStatusRow(t)},contextMenu:function e(t){return n.a.createElement(ge,{statusPageURL:a.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:c.includes(t.migration_info.id),onDecline:function e(){return a.showResponseConfirmDialog([t],Me)}})}};var m=t;p&&(m=m.filter(function(e){return d.includes(xe(e.migration_info.id))}));return m.map(function(e){return{id:xe(e.migration_info.id),highlight:u.includes(e.migration_info.id),selectable:Fe(e),inactive:Le(e),items:r.map(function(t){var r=t.id,a=t.className;return{id:r,className:a,value:v[r]&&v[r](e)}})}})}},{key:"displayErrorAlert",value:function e(){return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-table-error-alert"},n.a.createElement("span",{className:"p-migration_table__empty_state_icon"},n.a.createElement(A["b"],{type:"warning-filled"})),n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("Unable to load past migrations")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("Something went wrong that prevented past migrations from loading. If you continue to have trouble loading this page, please <a>contact us</a>.",null,function(e){var t=e.key,r=e.text;return n.a.createElement(P["a"],{key:t,href:"https://slack.com/help/contact"},r)})))}},{key:"renderMigrationCount",value:function e(t){var r=Ae.t("{count, plural, =1 {# scheduled migration} other {# scheduled migrations}}",{count:t});return r}},{key:"renderSelectionBar",value:function e(t){var r=this;var a=this.props.featureMigrationOrgApprovals;if(!a)return null;var i=this.state,s=i.selectedRows,o=i.pendingUpdates,l=i.showingSelection;var c=t.filter(Fe);var u=t.filter(function(e){return s.includes(xe(e.migration_info.id))&&!e.migration_info.date_approved});return n.a.createElement(V["b"],{position:"absolute",items:c,itemMapper:function e(t){return{selectionElementId:De(xe(t.migration_info.id)),previewText:t.team.name,isSelected:s.includes(xe(t.migration_info.id))}},actions:[{id:Me,label:Ae.t("Decline"),disabled:o.length>0},{id:Re,label:Ae.t("Approve"),isPrimary:true,disabled:o.length>0||0===u.length,appliesToCount:u.length!==s.length?u.length:void 0}],titleFormatter:function e(t){return Ae.t("{count, plural, =1 {# migration selected} other {# migrations selected}}",{count:t})},showingSelection:l,onToggleSelect:function e(t){return r.setState(function(e){var r=e.showingSelection;return{selectedRows:t?c.map(function(e){return xe(e.migration_info.id)}):[],showingSelection:!!t&&r}})},onAction:function e(t){r.showResponseConfirmDialog(u,t)},onToggleShowingSelection:function e(t){return r.setState(function(){return{showingSelection:t}})},"data-qa":"migration-table-selection-bar"})}},{key:"renderTable",value:function e(t){var r=this;var a=this.props,i=a.scheduled,s=a.isOrgOwner,o=a.featureMigrationOrgApprovals;var l=this.state,c=l.tableHeight,u=l.selectedRows,p=l.tablePaddingBottom;var v=this.createHeaders();var m=this.makeTableRows(t,v);var h={headers:v,rows:m,height:c+"px","data-qa":"migration-table-rows"};return n.a.createElement("div",{className:"p-migration_table__table_view_container",ref:function e(t){r.tableViewRef=t}},i&&s&&o?n.a.createElement("div",{style:{paddingBottom:p}},n.a.createElement(W,d()({},h,{id:"migration-table",selectedRows:u,onSelect:function e(t){return r.setState(function(e){var r=e.showingSelection;return{selectedRows:t,showingSelection:t.length>0&&r}})},getCheckboxId:De})),this.renderSelectionBar(t)):n.a.createElement(T["b"],h))}},{key:"renderDateRow",value:function e(t){var r=this.props.featureMigrationOrgApprovals;var a=void 0;switch(t.status){case"in_progress":a=r?n.a.createElement(ae,{date:t.date_scheduled}):n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(N["a"],{color:"blue",size:"large"}),n.a.createElement("b",null,Ae.rt("In Progress")));break;case"scheduled":a=n.a.createElement(ae,{date:t.date_scheduled});break;case"complete":a=n.a.createElement(ae,{date:t.date_finished});break;default:break}return a}},{key:"renderStatusRow",value:function e(t){var r=this;var a=this.props,i=a.scheduled,s=a.isOrgOwner,o=a.featureMigrationOrgApprovals;var l=this.state.pendingUpdates;var c=null;c=i?n.a.createElement(de,{statusPageURL:this.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:l.includes(t.migration_info.id),onApprove:function e(){return r.showResponseConfirmDialog([t],Re)},onDecline:function e(){return r.showResponseConfirmDialog([t],Me)}}):t.migration_info.approver?t.migration_info.approver.real_name:null;return c}},{key:"renderLoadingState",value:function e(){return n.a.createElement("div",{className:"p-migration_table__loading"},n.a.createElement(N["a"],{color:"blue",size:"jumbo","data-qa":"migration-loading-spinner"}))}},{key:"renderScheduled",value:function e(){var t=this.state,r=t.isScheduledLoading,i=t.scheduledMigrations;if(!r){var s=0===i.length?this.renderEmptyScheduled():n.a.createElement(a["Fragment"],null,n.a.createElement(I["a"],{title:this.renderMigrationCount(i.length),"data-qa":"migration-count-action-bar"}),this.renderTable(i));return s}return this.renderLoadingState()}},{key:"renderCompleted",value:function e(){var t=this.state,r=t.isCompletedLoading,a=t.completedMigrations;if(!r){var n=0===a.length?this.renderEmptyCompleted():this.renderTable(a);return n}return this.renderLoadingState()}},{key:"renderEmptyScheduled",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-scheduled"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("No scheduled migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("When new workspace migrations are scheduled for <b>{enterpriseName}</b>, you'll see them here.",{enterpriseName:t})))}},{key:"renderEmptyCompleted",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-completed"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("No past migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("There aren't any completed workspace migrations for <b>{enterpriseName}</b> yet, but when there are, you'll find them here.",{enterpriseName:t})))}},{key:"render",value:function e(){var t=this.props.scheduled;var r=this.state.errorAlert;if(r)return this.displayErrorAlert();return n.a.createElement(a["Fragment"],null,t?this.renderScheduled():this.renderCompleted(),n.a.createElement(M["a"],null))}}]);return t}(a["PureComponent"]);Be.displayName="MigrationTableView";Be.defaultProps=Pe;var Ue=function e(t,r){var a=r.enterpriseDomain;return{orgURL:Object(Y["a"])(t,a),featureMigrationOrgApprovals:Object(J["isFeatureEnabled"])(t,"feature_migration_org_approvals")}};var qe={enqueueToast:X["enqueueToast"],openModal:Z["openModal"],fetchCompletedMigrations:x["i"],fetchScheduledMigrations:x["m"],approveMigrations:x["a"],declineMigrations:x["g"]};var Ge=Be;var He=Object(o["connect"])(Ue,qe)(Be);var We=He;var Ve=r(3086);var Ke=new k["b"]("migration_table");var ze={enterpriseName:y["b"].string.isRequired,enterpriseDomain:y["b"].string.isRequired,isOrgOwner:y["b"].bool,tabActionOnClick:y["b"].func,defaultTabId:y["b"].string};var Qe={isOrgOwner:false,tabActionOnClick:O["noop"],defaultTabId:""};var Ye=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderHeader",value:function e(){var t=Ke.t("Migrations");return n.a.createElement("div",{className:"p-migration_table_indent","data-qa":"migration-header"},n.a.createElement("h1",null,t))}},{key:"render",value:function e(){var t=this.props,r=t.tabActionOnClick,a=t.defaultTabId;var i=[{title:Ke.t("Scheduled Migrations"),id:"scheduled",content:n.a.createElement(We,d()({},this.props,{scheduled:true})),onClick:r,"data-qa":"migration-tab-scheduled"},{title:Ke.t("Past Migrations"),id:"past",content:n.a.createElement(We,this.props),onClick:r,"data-qa":"migration-tab-completed"}];return n.a.createElement("div",{className:"p-migration_table","data-qa":"migration-page"},this.renderHeader(),n.a.createElement("div",{className:"p-migration_table_migrations"},n.a.createElement(E["a"],{"data-qa":"migration-tabs",tabs:i,defaultTabId:a,fullHeight:true})))}}]);return t}(a["PureComponent"]);Ye.displayName="MigrationTable";Ye.defaultProps=Qe;var Je=Ye;var Xe=Je;Object(c["a"])("interop.migrationTable",{render:function e(t,r,a){if(!t)throw new Error("migrationTable render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Xe,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(58);var c=r.n(l);var u=r(37);var d=r.n(u);var p=r(3);var v=r.n(p);var m=r(6);var h=r.n(m);var f=r(8);var b=r.n(f);var g=r(7);var _=r.n(g);var y=r(9);var O=r.n(y);var k=r(0);var E=r(2);var j=r(209);var C=r(103);var S=r(19);var w=r(217);var I=r(85);var T=r(67);var A=r(4);var N=r(108);var P=r(73);var R=r(385);var M=r(351);var x=r(326);var D=r(188);var F=r(1352);var L=r(101);var B=r(1547);var U=r(856);var q=r(841);var G=r(15);var H=r(361);var W=r(109);var V=r(274);var K=r(12);var z=Object(G["b"])("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs;var i=Object(W["getThreadKey"])(a,n);var s=Object(K["a"])({getState:t,label:"MAYBE-JUMP-THREAD"});var o=t();var l=Object(P["a"])(t());var c=Object(N["j"])(t())||!Object(N["f"])(t());if(l!==V["a"].allThreads||!c){s.info("All Threads not open");return false}var u=Object(H["getThreads"])(o);if(!u){s.info("No threads");return false}var d=Object(E["find"])(u,{threadKey:i});if(!d){s.info("Thread not found");return false}s.info("Requesting "+i);e(Object(H["setFocusRequestedThreadKey"])(i));return true});z.propTypes={channelId:k["b"].string,threadTs:k["b"].string};var Q=z;var Y=r(195);var J=r(168);var X=r(178);var Z=r(41);var $=r(11);var ee=r(38);var te=r(181);var re=r(10);var ae=r(57);var ne=r(45);var ie=r(39);var se=r(1068);var oe=r(208);var le=r(1348);var ce=r(66);var ue=r(1808);var de=r(906);var pe=r(780);var ve=r(1067);var me=250;var he={oldest:k["b"].string,latest:k["b"].string,timestamps:k["b"].arrayOf(k["b"].string).isRequired,listRenderer:k["b"].func.isRequired,startTs:k["b"].string,startTsOffset:k["b"].number,highlightKey:k["b"].string,requestHistory:k["b"].func,reachedStart:k["b"].bool,reachedEnd:k["b"].bool,layout:k["b"].object,isFileExpanding:k["b"].bool};var fe={oldest:void 0,latest:void 0,startTs:void 0,startTsOffset:0,highlightKey:void 0,requestHistory:E["noop"],reachedStart:true,reachedEnd:true,layout:void 0,isFileExpanding:false};var be=function(e){O()(t,e);function t(e){h()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onScroll=r.onScroll.bind(r);r.setListRef=r.setListRef.bind(r);r.loadAround=r.loadAround.bind(r);r.loadPre=r.loadPre.bind(r);r.loadPost=r.loadPost.bind(r);r.focus=r.focus.bind(r);r.list=null;r.layout=e.layout||new ve["a"];r.layout.setAnchor(e.startTs||false);e.startTsOffset&&(r.layout.anchorOffset=e.startTsOffset);r.layout.setStickToBottom(e.reachedEnd);r.state={isLoading:false};return r}_()(t,[{key:"componentWillReceiveProps",value:function e(t){if(!this.list)throw new Error("MessageList needs a ref to List");(t.startTs!==this.props.startTs||t.highlightKey&&t.highlightKey!==this.props.highlightKey)&&(t.timestamps===this.props.timestamps?this.list.scrollToKey(t.startTs,{lazy:true}):this.layout.setAnchor(t.startTs))}},{key:"componentDidUpdate",value:function e(t){!t.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(false);var r=!!t.isFileExpanding&&!this.props.isFileExpanding;r?this.layout.setStickToBottom(false):this.layout.setStickToBottom(this.props.reachedEnd)}},{key:"onScroll",value:function e(){this.layout.setAnchor(false)}},{key:"getScrollmark",value:function e(){if(!this.list)return null;var t=this.list.getScrollTop();var r=this.layout.shouldStickToBottom(t);var a=this.props.timestamps;var n=this.layout.findAnchor(a,a,t);var i=this.layout.getTop(n)-t;return{mark:n,offset:i,stickToBottom:r}}},{key:"setListRef",value:function e(t){this.list=t}},{key:"loadAround",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.oldest,n=r.latest,i=r.reachedStart,s=r.reachedEnd,o=r.timestamps,l=r.startTs;if(s)return this.loadPre();if(i)return this.loadPost();var c=n||Object(E["first"])(o)||l;var u=a||Object(E["last"])(o)||l;var d=this.props.requestHistory({latest:c,oldest:u});if(d){d.finally(function(){return Promise.delay(me)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"around"}})}return d}},{key:"loadPre",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.oldest,n=r.reachedStart,i=r.timestamps,s=r.startTs;if(n)return false;var o=a||Object(E["first"])(i)||s;var l=this.props.requestHistory({latest:o});if(l){l.finally(function(){return Promise.delay(me)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"loadPost",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.latest,n=r.reachedEnd,i=r.timestamps,s=r.startTs;if(n)return false;this.isLoading=true;var o=a||Object(E["last"])(i)||s;var l=this.props.requestHistory({oldest:o});if(l){l.finally(function(){return Promise.delay(me)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"focus",value:function e(){this.list&&this.list.focus()}},{key:"render",value:function e(){var t=this.props,r=t.reachedStart,a=t.reachedEnd,n=t.timestamps;return this.props.listRenderer({reachedStart:r,reachedEnd:a,keys:n,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]);return t}(a["PureComponent"]);be.displayName="MessageList";var ge=be;be.defaultProps=fe;var _e=r(1813);var ye=r(537);var Oe=r(1814);var ke=r(1540);var Ee=r(26);var je=r.n(Ee);var Ce=r(16);var Se=r.n(Ce);var we=r(68);var Ie=r(1700);var Te=r(23);var Ae=r(1216);var Ne=r(93);var Pe=r(1843);var Re=r(1552);var Me=r(384);var xe=r(21);var De=r(863);var Fe=r(3269);var Le={MESSAGE_PANE:"message_pane",THREAD:"thread"};var Be={location:k["b"].oneOf(Object(E["values"])(Le)).isRequired,children:k["b"].node,channelId:k["b"].string.isRequired,threadTs:k["b"].string,viewContext:k["b"].string,className:k["b"].string,elementProps:k["b"].object,disableFileUploadsPref:k["b"].string,featureAnnounceOnly:k["b"].bool,userCanPostInChannel:k["b"].bool,teamId:k["b"].string,openFileUploadDialog:k["b"].func,filterFilesForUpload:k["b"].func};var Ue={children:void 0,threadTs:void 0,viewContext:void 0,className:void 0,elementProps:void 0,disableFileUploadsPref:void 0,featureAnnounceOnly:false,userCanPostInChannel:true,teamId:void 0,openFileUploadDialog:E["noop"],filterFilesForUpload:function e(){return Promise.resolve([])}};var qe=function(e){O()(t,e);function t(e){h()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={dragging:false};r.activeElements=new Set;r.containerRef=n.a.createRef();r.onDrop=r.onDrop.bind(r);return r}_()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.containerRef.current;r.addEventListener("dragenter",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault();t.activeElements.add(e.target);1===t.activeElements.size&&t.setState(function(e){return v()({},e,{dragging:true})})});r.addEventListener("dragleave",function(e){e.preventDefault();t.activeElements.delete(e.target);0===t.activeElements.size&&t.setState(function(e){return v()({},e,{dragging:false})})});r.addEventListener("dragover",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault()});r.addEventListener("dragend",function(){t.setState(function(e){return v()({},e,{dragging:false})});t.activeElements.clear()});r.addEventListener("drop",this.onDrop)}},{key:"onDrop",value:function e(t){var r=this.props,a=r.channelId,n=r.threadTs,i=r.viewContext,s=r.teamId,o=r.userCanPostInChannel,l=r.featureAnnounceOnly;t.preventDefault();this.setState(function(e){return v()({},e,{dragging:false})});this.activeElements.clear();if(l&&!o)return;var c=t.dataTransfer.files;var u=Object(oe["a"])({viewContext:i,channelId:a,threadTs:n});var d={fileUploadAction:xe["m"].DRAG_AND_DROP,fileUploadSrc:xe["n"].LOCAL};t.shiftKey?this.props.filterFilesForUpload({selectedFiles:[].concat(je()(c)),channelId:a,threadTs:n}).then(function(e){if(!e||!e.length)return;var t=Object(De["a"])(s);t.uploadFiles({files:e,shareData:{channelId:a,threadTs:n,metadata:d}})}):this.props.openFileUploadDialog({files:[].concat(je()(c)),threadTs:n,initialChannelId:a,inputProxy:u,metadata:d})}},{key:"shouldPreventDrag",value:function e(t){var r=this.props,a=r.disableFileUploadsPref,n=r.featureAnnounceOnly,i=r.userCanPostInChannel;var s=Object(E["get"])(t,"dataTransfer.types");if(!Object(E["includes"])(s.map(function(e){return e.toLowerCase()}),"files"))return true;if("disable_all"===a)return true;if(!n&&!i)return true;return false}},{key:"maybeRenderOverlay",value:function e(){if(!this.state.dragging)return null;var t=this.props.channelId;switch(this.props.location){case Le.MESSAGE_PANE:return n.a.createElement(Pe["a"],{channelId:t});case Le.THREAD:return n.a.createElement(Re["a"],null);default:return null}}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.className,i=t.elementProps;return n.a.createElement("div",v()({className:Se()("p-file_drag_drop__container",a),ref:this.containerRef},i),r,this.maybeRenderOverlay())}}]);return t}(a["Component"]);qe.displayName="FileDragDrop";qe.defaultProps=Ue;var Ge=function e(t,r){var a=r.channelId;return{featureAnnounceOnly:Object(A["isFeatureEnabled"])(t,"feature_announce_only"),disableFileUploadsPref:Object(we["a"])(t,"disable_file_uploads"),userCanPostInChannel:Object(Ne["s"])(t,a),teamId:Object(Te["b"])(t)}};var He=function e(t){return{openFileUploadDialog:function e(){return t(Ie["a"].apply(void 0,arguments))},filterFilesForUpload:function e(){return t(Ae["a"].apply(void 0,arguments))}}};var We=Object(Me["b"])(Object(i["connect"])(Ge,He)(qe));var Ve=r(921);var Ke=r(899);var ze=r(55);var Qe=r(1092);var Ye=r(925);var Je=r(926);var Xe=r(1093);var Ze=r(1066);var $e=r(1224);var et=r(762);var tt=r(1225);var rt=r(1353);var at=r(922);var nt=r(1095);var it=r(1215);var st=r(1354);var ot=r(1214);var lt=r(1347);var ct=r(1355);var ut=r(1356);var dt=r(2407);var pt=r(2408);var vt=new re["b"]("message_kit");var mt={msg:k["b"].object.isRequired,className:k["b"].string,highlight:k["b"].bool,clearHighlight:k["b"].func,focused:k["b"].bool,renderActionsOffscreen:k["b"].bool};var ht={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false};var ft=function(e){O()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}_()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen;var l=Se()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return n.a.createElement(rt["a"],{msg:r},n.a.createElement(at["a"],{msg:r,className:l,highlight:a,clearHighlight:i},n.a.createElement(nt["a"],{hovered:s},n.a.createElement(it["a"],{msg:r,showComment:false,showShare:false,showJump:true,messageContainerType:ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,position:"inside",renderOffscreen:o},n.a.createElement(lt["a"],{msg:r},n.a.createElement(st["a"],{msg:r},n.a.createElement(ot["a"],{light:n.a.createElement(Qe["a"],{msg:r})},n.a.createElement(ct["a"],{msg:r},n.a.createElement(Ye["a"],{msg:r}),"\xa0",n.a.createElement(Je["a"],{msg:r,full:true,clickable:true},vt.t("Open in channel")),n.a.createElement("br",null),n.a.createElement(ut["a"],null,n.a.createElement(Xe["a"],{msg:r}),n.a.createElement(Ze["a"],{msg:r,blocksContainerContext:ze["a"].threads_flexpane}),n.a.createElement(et["b"],{msg:r}),n.a.createElement($e["a"],{msg:r,blocksContainerContext:ze["a"].threads_flexpane}),n.a.createElement(tt["a"],{msg:r}))))))))))}}]);return t}(a["PureComponent"]);ft.displayName="ThreadRootMessage";var bt=ft;ft.defaultProps=ht;var gt=r(1699);var _t={msg:k["b"].object.isRequired,className:k["b"].string,highlight:k["b"].bool,clearHighlight:k["b"].func,focused:k["b"].bool,renderActionsOffscreen:k["b"].bool};var yt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false};var Ot=function(e){O()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}_()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen;var l=Se()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return n.a.createElement(rt["a"],{msg:r},n.a.createElement(at["a"],{msg:r,className:l,highlight:a,clearHighlight:i},n.a.createElement(nt["a"],{hovered:s},n.a.createElement(it["a"],{msg:r,showComment:false,showShare:false,messageContainerType:ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o},n.a.createElement(st["a"],{msg:r,showBroadcast:true},n.a.createElement(ot["a"],{light:n.a.createElement(Qe["a"],{msg:r})},n.a.createElement(ct["a"],{msg:r},n.a.createElement(Ye["a"],{msg:r}),"\xa0\xa0",n.a.createElement(Je["a"],{msg:r,relative:true}),n.a.createElement("br",null),n.a.createElement(ut["a"],null,n.a.createElement(gt["a"],{msg:r},n.a.createElement(Xe["a"],{msg:r}),n.a.createElement(Ze["a"],{msg:r,blocksContainerContext:ze["a"].threads_flexpane}),n.a.createElement(et["b"],{msg:r}),n.a.createElement($e["a"],{msg:r,blocksContainerContext:ze["a"].threads_flexpane})),n.a.createElement(tt["a"],{msg:r})))))))))}}]);return t}(a["PureComponent"]);Ot.displayName="ThreadReplyMessage";var kt=Ot;Ot.defaultProps=yt;var Et=r(1368);var jt=r(1793);var Ct=r(1559);var St=r(138);var wt=r(3283);var It=new re["b"]("flexpane");var Tt={featureReactThreads:k["b"].bool};var At={featureReactThreads:false};function Nt(e){var t=e.featureReactThreads;if(!t)return null;var r=cdn_url+"/4f28/img/loading_hash_animation_@2x.gif";var a=cdn_url+"/4f28/img/loading_hash_animation.gif";var i=It.t("loading\u2026");var s=a+" 1x, "+r+" 2x";return n.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},n.a.createElement("img",{className:"p-flexpane_loading__spinner",src:r,alt:i,srcSet:s}),n.a.createElement("br",null),i)}Nt.displayName="FlexpaneLoading";Nt.defaultProps=At;var Pt=Object(St["a"])("feature_react_threads")(Nt);var Rt=r(1851);var Mt=r(1826);var xt=r(2280);var Dt=r(2279);var Ft=r(1169);var Lt=r(245);var Bt=r(139);var Ut=r(51);var qt=r(50);var Gt=r(3289);var Ht=new re["b"]("threads");var Wt={channelId:k["b"].string,threadTs:k["b"].string,isMpim:k["b"].bool,numMpimMembers:k["b"].number,mpimName:k["b"].string};var Vt={channelId:void 0,threadTs:void 0,isMpim:false,numMpimMembers:0,mpimName:void 0};function Kt(e){var t=e.channelId,r=e.threadTs,a=e.isMpim,i=e.numMpimMembers,s=e.mpimName;var o=void 0;o=a?n.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},n.a.createElement(qt["c"],{tip:s},n.a.createElement("span",null,Ht.t("Direct message with {count} others",{count:i})))):n.a.createElement(Bt["a"],{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:true,iconProps:{inherit:true}});return n.a.createElement(Ut["a"],{className:"p-threads_flexpane__header_permalink",href:Object(Z["constructMsgPermalink"])(t,r)},o)}Kt.displayName="Header";Kt.defaultProps=Vt;function zt(e,t){var r=t.channelId;var a=Object(S["d"])(e,r);var n={};if(a&&"mpim"===Object($["getChannelType"])(a)){n.isMpim=true;var i=Object($["getMemberIdsFromMpim"])(a)||[];n.numMpimMembers=i.length-1;n.mpimName=Object($["getDisplayNameForChannel"])(e,a)}return n}var Qt=Object(i["connect"])(zt)(Kt);var Yt=r(3291);var Jt=new re["b"]("threads");var Xt={replyCount:k["b"].number};var Zt={replyCount:0};function $t(e){var t=e.replyCount;var r=Math.max(1,t);var a=Jt.t("{count, plural, =1 {# reply} other {# replies}}",{count:r,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return n.a.createElement("div",{className:"p-threads_flexpane__separator"},n.a.createElement("span",{className:"p-threads_flexpane__separator_count"},a),n.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}$t.displayName="Separator";$t.defaultProps=Zt;function er(e,t){var r=t.channelId,a=t.threadTs;var n=Object(T["a"])(e,r,a);return{replyCount:Object(Z["getReplyCount"])(n)}}var tr=Object(i["connect"])(er)($t);var rr=r(28);var ar=r(81);var nr=r(2409);var ir=new re["b"]("threads");var sr={tryAgain:k["b"].func,featureReactThreads:k["b"].bool};var or={tryAgain:E["noop"],featureReactThreads:true};function lr(e){var t=e.tryAgain,r=e.featureReactThreads;if(!r)return null;return n.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},n.a.createElement("div",{className:"p-threads_flexpane__error_contents"},n.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},n.a.createElement(ar["b"],{text:":mag:",emojiSize:ar["a"].LARGE})),n.a.createElement("p",{className:"p-threads_flexpane__error_header"},ir.t("Couldn't load thread")),n.a.createElement("p",{className:"p-threads_flexpane__error_body"},ir.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,r=e.key;return n.a.createElement(Ut["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:r},t)})),n.a.createElement(rr["d"],{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},ir.t("Try Again"))))}lr.displayName="ThreadsError";lr.defaultProps=or;var cr=function e(t){var r=Object(A["isFeatureEnabled"])(t,"feature_react_threads");return{featureReactThreads:r}};var ur=Object(i["connect"])(cr)(lr);var dr=r(1817);var pr=function(){function e(){h()(this,e);this.historyRequests={}}_()(e,[{key:"reset",value:function e(){this.historyRequests={}}},{key:"logHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=r+"_"+a;var o=this.historyRequests[s];if(!o){o={count:0,time:0};this.historyRequests[s]=o}if(i-1e4>o.time){o.count=1;o.time=i}else o.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[r+"_"+a];if(!s)return false;if(s.count<=3)return false;if(s.time<i-1e4)return false;return true}}]);return e}();var vr=pr;var mr=new re["b"]("threads");var hr=Object(Et["b"])(bt);var fr=Object(Et["b"])(kt);var br={threadTs:k["b"].string,channelId:k["b"].string,subscribed:k["b"].bool,lastRead:k["b"].string,maxMarkableTs:k["b"].string,oldest:k["b"].string,latest:k["b"].string,timestamps:k["b"].arrayOf(k["b"].string),reachedStart:k["b"].bool,reachedEnd:k["b"].bool,prevReachedEnd:k["b"].bool,userHasUnreadThreads:k["b"].bool,fileId:k["b"].string,comments:k["b"].array,messages:k["b"].object,startTs:k["b"].string,highlightTs:k["b"].string,highlightKey:k["b"].string,showDragOverlay:k["b"].bool,scrollMarkTs:k["b"].string,scrollMarkOffset:k["b"].number,serializationKey:k["b"].string,clearSerializedDataForKey:k["b"].func,requestHistory:k["b"].func,clearHighlight:k["b"].func,markThread:k["b"].func,useGlobalNav:k["b"].bool,primaryView:k["b"].string,windowFocused:k["b"].bool,userAttention:k["b"].string,featureReactThreads:k["b"].bool,featureReactAllUnreads:k["b"].bool,featureAriaApplicationMode:k["b"].bool,logInfo:k["b"].func,logError:k["b"].func,clogger:k["b"].object,jumpToMessage:k["b"].func,setFocusRequestedTs:k["b"].func,focusRequested:k["b"].string,setFocusRequested:k["b"].func,maybeFocusThreadInAllThreads:k["b"].func,maybeFocusThreadInAllUnreads:k["b"].func,featureReactAllThreads:k["b"].bool,focusInput:k["b"].string,setFocusInput:k["b"].func,makeMessageSummary:k["b"].func,channel:k["b"].object,channelIsYou:k["b"].bool,channelIsMuted:k["b"].bool,channelHasDraft:k["b"].bool,channelBadgeCount:k["b"].number,isChannelUnavailable:k["b"].bool,unavailableTeamId:k["b"].string,readOnly:k["b"].bool,featureAnnounceOnly:k["b"].bool,isFileExpanding:k["b"].bool,featureOfflineMode:k["b"].bool,isOffline:k["b"].bool,truncateThreadHistory:k["b"].func};var gr={threadTs:void 0,channelId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,userHasUnreadThreads:false,fileId:void 0,comments:[],messages:{},startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:false,scrollMarkTs:void 0,scrollMarkOffset:0,serializationKey:void 0,clearSerializedDataForKey:E["noop"],requestHistory:E["noop"],clearHighlight:E["noop"],markThread:E["noop"],useGlobalNav:false,primaryView:void 0,windowFocused:false,userAttention:"",featureReactThreads:true,featureReactAllUnreads:false,featureAriaApplicationMode:false,logInfo:E["noop"],logError:E["noop"],clogger:{track:E["noop"]},jumpToMessage:E["noop"],setFocusRequestedTs:E["noop"],focusRequested:void 0,setFocusRequested:E["noop"],maybeFocusThreadInAllThreads:function e(){return false},maybeFocusThreadInAllUnreads:E["noop"],featureReactAllThreads:false,focusInput:null,setFocusInput:E["noop"],makeMessageSummary:E["noop"],channel:void 0,channelIsYou:false,channelIsMuted:false,channelHasDraft:false,channelBadgeCount:0,isChannelUnavailable:false,unavailableTeamId:"",readOnly:false,featureAnnounceOnly:false,isFileExpanding:false,featureOfflineMode:false,isOffline:false,truncateThreadHistory:E["noop"]};var _r="THREAD-FLEXPANE";var yr=function(e){O()(t,e);_()(t,null,[{key:"getRowsAndKeys",value:function e(t,r){var a=t.threadTs,n=t.reachedStart,i=t.reachedEnd,s=t.prevReachedEnd,o=t.timestamps,l=t.comments,c=t.messages;var u=r.commentsExpanded,d=r.degraded;var p=[];var v=[];if(Object(E["isEmpty"])(o))return{rows:v,keys:p};var m=Object(E["first"])(o)===a;var h=Object(E["without"])(o,a);if(!n&&!d){p.push("loading-start-"+Object(E["first"])(h));v.push({type:"loading"})}if(m){p.push(a);v.push({type:"root",ts:a});if(!Object(E["isEmpty"])(l)){p.push("comments-toggle");v.push({type:"comments-toggle"});u&&l.forEach(function(e){p.push(e.id);v.push({type:"comment",comment:e})})}if(h.length){p.push("separator");v.push({type:"separator"})}}h.forEach(function(e,t){var r=c[e];if(Object(Z["isHiddenInThread"])(r))return;p.push(e);v.push({type:"reply",ts:e,prevTs:h[t-1]})});if(i||s){p.push("input");v.push({type:"input"})}else if(!d){p.push("loading-end");v.push({type:"loading"})}return{rows:v,keys:p}}}]);function t(e){h()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.requestHistory=r.requestHistory.bind(r);r.renderRow=r.renderRow.bind(r);r.renderList=r.renderList.bind(r);r.tryAgain=r.tryAgain.bind(r);r.toggleComments=r.toggleComments.bind(r);r.isFocusableItem=r.isFocusableItem.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.clogThreadEvent=r.clogThreadEvent.bind(r);r.onArrowKeyLeft=r.onArrowKeyLeft.bind(r);r.shouldIgnoreArrowKeys=r.shouldIgnoreArrowKeys.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.getAriaLabelForRow=r.getAriaLabelForRow.bind(r);r.renderBody=r.renderBody.bind(r);r.renderSubtitle=r.renderSubtitle.bind(r);r.focus=r.focus.bind(r);r.blur=r.blur.bind(r);r.onItemTabWithin=r.onItemTabWithin.bind(r);r.keys=null;r.rows=null;r.historyRateLimiter=new vr;r.listRef=n.a.createRef();r.flexpane=n.a.createRef();r.state={degraded:Object(Oe["a"])(),commentsExpanded:false,hasKeyboardFocus:false,errored:false};e.scrollMarkTs||e.scrollMarkOffset?r.initialScrollMark={mark:e.scrollMarkTs,offset:e.scrollMarkOffset}:r.initialScrollMark={};return r}_()(t,[{key:"componentDidMount",value:function e(){this.checkUnreads();Object(ee["a"])()&&this.maybeFocus();var t=this.props,r=t.scrollMarkTs,a=t.scrollMarkOffset,n=t.serializationKey;(r||a)&&n&&this.props.clearSerializedDataForKey(n)}},{key:"componentWillReceiveProps",value:function e(t){var r=Object(W["getThreadKey"])(this.props.channelId,this.props.threadTs);var a=Object(W["getThreadKey"])(t.channelId,t.threadTs);this.state.errored&&r!==a&&this.setState(function(e){return v()({},e,{errored:false})})}},{key:"shouldComponentUpdate",value:function e(t,r){if(!Object(Lt["a"])(this.state,r))return true;var a=this.props,n=a.messages,i=d()(a,["messages"]);var s=t.messages,o=d()(t,["messages"]);if(!Object(Lt["a"])(i,o))return true;return false}},{key:"componentDidUpdate",value:function e(t){this.checkUnreads();var r=this.props,a=r.threadTs,n=r.channelId;var i=Object(W["getThreadKey"])(n,a);var s=t.threadTs,o=t.channelId;var l=Object(W["getThreadKey"])(o,s);i!==l&&this.historyRateLimiter.reset();l&&i!==l&&this.props.truncateThreadHistory({threadKey:l});this.maybeFocus()}},{key:"componentWillUnmount",value:function e(){var t=this.props,r=t.focusInput,a=t.channelId,n=t.threadTs;r===Object(W["getThreadKey"])(a,n)&&this.props.setFocusInput(null);this.props.truncateThreadHistory({threadKey:Object(W["getThreadKey"])(a,n)})}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onArrowKeyLeft",value:function e(){var t=this;var r=this.props,a=r.featureReactAllThreads,n=r.featureReactAllUnreads,i=r.channelId,s=r.threadTs,o=r.primaryView;if(n&&Object(E["includes"])([de["a"].allUnreads,"Punreads"],o)){this.props.maybeFocusThreadInAllUnreads(Object(W["getThreadKey"])(i,s));return Promise.resolve()}if(a&&o===de["a"].allThreads){var l=this.props.maybeFocusThreadInAllThreads({channelId:i,threadTs:s});if(l)return Promise.resolve()}return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(function(){t.props.setFocusRequestedTs(t.props.threadTs)})}},{key:"onKeyDown",value:function e(t){var r=this;if(!Object(ue["a"])({e:t,isMenuVisible:Object(ce["g"])()}))return;var a=Object(oe["a"])({viewContext:ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(a){var n=function e(){r.blur();a.focus()};Object(ae["c"])()?setTimeout(n,0):n()}}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var r=this.rows[t];if(!r||!r.type)return null;if("root"!==r.type&&"reply"!==r.type)return null;return this.props.makeMessageSummary({channelId:this.props.channelId,ts:r.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:r.ts,isFirstDay:false,isLastDay:false},viewContext:ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object(se["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;return!this.state.hasKeyboardFocus}},{key:"checkUserAttentionIsOnChat",value:function e(){if(Object(ee["a"])())return this.props.userAttention===X["a"].MESSAGE_PANE;return Object(J["f"])()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logError(_r,"ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",t)}},{key:"maybeFocus",value:function e(){var t=this.props,r=t.focusRequested,a=t.timestamps,n=t.channelId,i=t.threadTs;if(r===Object(W["getThreadKey"])(n,i)&&!Object(E["isEmpty"])(a)){this.focus();this.props.setFocusRequested(null)}}},{key:"focus",value:function e(){var t=this.listRef.current&&this.listRef.current.list;if(!t)return;var r=t.getInitialActiveItem();if(r){t.scrollToKey(r);t.setActiveItem(r);return}t.focus()}},{key:"blur",value:function e(){var t=this.listRef.current&&this.listRef.current.list;t&&t.blur()}},{key:"checkUnreads",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.subscribed,i=t.lastRead,s=t.reachedEnd,o=t.maxMarkableTs,l=t.userAttention,c=t.userHasUnreadThreads,u=t.logInfo;if(!n||!s||!o)return;var d=Object(W["getThreadKey"])(r,a);if(!i||i<o){if(Object(ee["a"])()){if(l!==X["a"].MESSAGE_PANE){u(_r,"Not marking "+d+" to "+o+" because "+l);return}}else if(!Object(J["f"])()){u(_r,"Not marking "+d+" to "+o+" because "+Object(J["c"])());return}if(!c){u(_r,"Not marking "+d+" to "+o+" because no unread threads yet");return}u(_r,"Marking "+Object(W["getThreadKey"])(r,a)+": "+o);this.props.markThread({channelId:r,ts:a,lastRead:o,reason:"mark-thread-as-read-from-flexpane"})}}},{key:"requestHistory",value:function e(t){var r=this;var a=t.oldest,n=t.latest;var i=this.props,s=i.channelId,o=i.threadTs,e=i.requestHistory,l=i.logError;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:a,latest:n})){l(_r,"Rate-limited thread: "+Object(W["getThreadKey"])(s,o));return false}var c=e({oldest:a,latest:n,channelId:s,threadTs:o});c&&this.historyRateLimiter.logHistoryRequest({oldest:a,latest:n});return c.then(function(e){r.setState(function(e){return v()({},e,{errored:false})});return e}).catch(function(e){r.setState(function(e){return v()({},e,{errored:true})});return Promise.reject(e)})}},{key:"tryAgain",value:function e(){this.setState(function(e){return v()({},e,{errored:false})})}},{key:"toggleComments",value:function e(){var t=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!t}})}},{key:"isFocusableItem",value:function e(t){var r=t.index;var a=this.rows[r];if(!a)return false;if("loading"===a.type)return false;if("separator"===a.type)return false;if("input"===a.type)return false;return true}},{key:"isListScrollable",value:function e(){var t=this.listRef.current&&this.listRef.current.list;var r=t&&t.layout.getHeightValidity("input");return!r||t.getContentHeight()>t.getContainerHeight()}},{key:"clogThreadEvent",value:function e(t){var r=t.event,a=t.metadata;var n=this.props,i=n.channelId,s=n.threadTs,o=n.clogger;o.track(r,v()({parent_message_id:s,channel_id:i,is_threads_view:0,is_flexpane:1},a))}},{key:"renderRow",value:function e(t,r){var a=r.hasFocus;var i=this.props,s=i.channelId,o=i.highlightTs,l=i.threadTs,c=i.comments,u=i.fileId,d=i.featureReactThreads,p=i.focusInput,v=i.featureOfflineMode,m=i.isOffline;if(!d)return null;var h=this.state.commentsExpanded;var f=this.rows[t];if(!f)return null;var b=this.state.hasKeyboardFocus;switch(f.type){case"separator":return n.a.createElement(tr,{channelId:s,threadTs:l});case"root":return n.a.createElement(hr,{channelId:s,ts:f.ts,highlight:f.ts===o,clearHighlight:this.props.clearHighlight,focused:a,renderActionsOffscreen:b});case"reply":return n.a.createElement(fr,{channelId:s,ts:f.ts,highlight:f.ts===o,clearHighlight:this.props.clearHighlight,focused:a,renderActionsOffscreen:b});case"input":return n.a.createElement(Rt["a"],{channelId:s,threadTs:l,focusInputOnMount:p===Object(W["getThreadKey"])(s,l)&&!this.isListScrollable(),viewContext:ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent,onFocus:this.onItemTabWithin});case"comments-toggle":return n.a.createElement(jt["a"],{commentCount:c.length,expanded:h,toggleList:this.toggleComments});case"comment":return n.a.createElement(Ct["a"],{comment:f.comment,fileId:u});case"loading":if(v&&m)return n.a.createElement(Dt["a"],null);return n.a.createElement("div",{className:"p-threads_flexpane__loading"},mr.t("Loading messages..."));default:return null}}},{key:"renderList",value:function e(r){var a=this;var i=t.getRowsAndKeys(this.props,this.state),s=i.rows,o=i.keys;this.rows=s;this.keys=o;var l=this.state.degraded?_e["a"]:ye["a"];var c=this.props,u=c.reachedEnd,d=c.reachedStart,p=c.featureAriaApplicationMode,m=c.channel,h=c.channelId,f=c.channelIsYou,b=c.channelIsMuted,g=c.channelHasDraft,_=c.channelBadgeCount,y=c.threadTs,O=c.readOnly,k=c.featureAnnounceOnly,E=c.featureOfflineMode,j=c.isOffline;var C=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}];var S=Object(le["a"])({type:Object($["getChannelType"])(m),displayName:Object($["getDisplayName"])(m),isShared:Object($["isExternallySharedChannel"])(m),isOrgShared:Object($["isOrgShared"])(m),hasUnreads:!!Object($["getUnreadCount"])(m),isArchived:Object($["isArchived"])(m),unreadCount:Object($["getUnreadCount"])(m),isYou:f,isMuted:b,hasDraft:g,badgeCount:_,isSelected:false,userActive:false,isTyping:false,isThread:true,canPost:!O,featureAnnounceOnly:k});var w=function(){if(!a.rows.length)return null;var e=a.rows.filter(function(e){return"reply"===e.type});var t=e[0];return t?t.ts:y}();var I=Object(W["makeIdForThreadList"])(Object(W["getThreadKey"])(h,y));return n.a.createElement(Ke["a"],null,function(e){var t=e.measureRef,i=e.width,s=e.height;return n.a.createElement("div",{className:"flex_one no_min_height",ref:t},n.a.createElement(l,v()({},r,{id:I,keys:o,width:i,height:s,rowRenderer:a.renderRow,isFocusableItem:a.isFocusableItem,initialActiveItem:w,onFocusEnter:a.onFocusEnter,onItemTabWithin:a.onItemTabWithin,onFocusLeave:a.onFocusLeave,reachedEnd:u,reachedStart:d,ariaLabel:S,getAriaLabelForRow:a.getAriaLabelForRow,persistentKeys:["input"],keyCommands:C,useAriaApplicationMode:p,featureOfflineMode:E,isOffline:j})))})}},{key:"renderMessageList",value:function e(){if(this.props.isChannelUnavailable){var t=this.props,r=t.unavailableTeamId,a=t.channelId;return n.a.createElement(Mt["a"],{unavailableTeamId:r,channelId:a,isThread:true})}var i=this.props,s=i.channelId,o=i.threadTs,l=i.oldest,c=i.latest,u=i.timestamps,d=i.startTs,p=i.highlightTs,m=i.highlightKey,h=i.reachedStart,f=i.reachedEnd,b=i.comments;if(!s||!o)return null;var g=this.state.commentsExpanded;var _={comments:b,commentsExpanded:g,highlightTs:p,highlightKey:m};var y=this.initialScrollMark,O=y.mark,k=y.offset;return n.a.createElement(ge,v()({oldest:l,latest:c,timestamps:u,listRenderer:this.renderList,startTs:O||d,startTsOffset:k,highlightKey:m,requestHistory:this.requestHistory,reachedStart:h,reachedEnd:f,isFileExpanding:this.props.isFileExpanding,ref:this.listRef},_,{key:Object(W["getThreadKey"])(s,o)}))}},{key:"renderBody",value:function e(){var t=this.props,r=t.channelId,i=t.threadTs,s=t.timestamps,o=t.showDragOverlay,l=t.featureOfflineMode,c=t.isOffline;var u=this.state.errored;if(l&&c&&Object(E["isEmpty"])(s))return n.a.createElement("div",{className:"p-threads_flexpane"},n.a.createElement(xt["a"],null));if(u)return n.a.createElement("div",{className:"p-threads_flexpane"},n.a.createElement(ur,{tryAgain:this.tryAgain}));var d=n.a.createElement(a["Fragment"],null,this.renderMessageList(),Object(E["isEmpty"])(s)&&n.a.createElement(Pt,null),o&&n.a.createElement(Re["a"],null));return Object(ee["a"])()?n.a.createElement(We,{location:Le.THREAD,channelId:r,threadTs:i,className:"p-threads_flexpane",viewContext:ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},d):n.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},d)}},{key:"renderSubtitle",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;return n.a.createElement(Qt,{channelId:r,threadTs:a})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;if(!r||!a)return null;var i=Object(ee["a"])()?E["noop"]:this.focus;var s=Object(ee["a"])()?E["noop"]:this.blur;return n.a.createElement(Ve["a"],{ref:this.flexpane,focus:this.focus,title:mr.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,flexName:"convo",viewId:ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,kbNavOrder:Object(ee["a"])()?void 0:4,bodyClassName:"p-threads_flexpane_container",onFocus:i,onBlur:s})}}]);return t}(a["Component"]);yr.displayName="ThreadsFlexpane";yr.defaultProps=gr;var Or=Object(pe["a"])(yr,{getStateToSerialize:E["noop"],getDerivedProps:function e(t){var r=t.instance;if(!r.listRef||!r.listRef.current)return{};var a=r.listRef.current.getScrollmark(),n=a.mark,i=a.offset,s=a.stickToBottom;return{scrollMarkTs:s?"input":n,scrollMarkOffset:s?0:i}}});var kr=function e(t,r){var a=Object(N["e"])(t)[0];var n=(a||"").split("-"),i=c()(n,2),s=i[0],o=i[1];var l=r.threadTs||o;var u=r.channelId||s;var d=Object(S["d"])(t,u);if(!l||!u)return{};var p=Object(R["getStartTs"])(t)||l;var m=Object(R["getHighlight"])(t),h=m.highlightTs,f=m.highlightKey;var b=Object(W["getThreadKey"])(u,l);var g=Object(C["getPotentiallyOutdatedTimestamps"])(t,b,p),_=g.start,y=g.end,O=g.timestamps,k=g.reachedStart,E=g.reachedEnd,F=g.prevReachedEnd;var L=Object(M["getSubscriptionState"])(t,{channelId:u,ts:l});var B=void 0;var U=void 0;var q=Object(T["a"])(t,u,l);if(q&&q.files&&1===q.files.length){U=q.files[0];var G=Object(I["getFileById"])(t,U);G&&(B=G.comments)}var H={};Object(ee["a"])()?H.userAttention=Object(X["c"])(t):H.windowFocused=Object(j["isWindowFocused"])(t);var V=Object(K["a"])({state:t});var z=Object(ne["a"])({state:t});var Q=Object(Ft["isAnyFileExpanding"])(t);return v()({isFileExpanding:Q,threadTs:l,channelId:u,channel:d,subscribed:L&&L.subscribed,lastRead:L&&L.lastRead,maxMarkableTs:Object(dr["a"])(t,u,O),oldest:_,latest:y,timestamps:O,reachedStart:k,reachedEnd:E,prevReachedEnd:F,userHasUnreadThreads:Object(A["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(D["hasUnreadThreads"])(t):Object(x["hasUnreadThreads"])(t),fileId:U,comments:B,messages:Object(T["b"])(t,u)||{},startTs:p,highlightTs:h,highlightKey:f,showDragOverlay:Object(R["getShowDragOverlay"])(t),useGlobalNav:Object(te["b"])(t),primaryView:Object(P["a"])(t)},H,{featureReactThreads:Object(A["isFeatureEnabled"])(t,"feature_react_threads"),featureAriaApplicationMode:Object(A["isFeatureEnabled"])(t,"feature_aria_application_mode"),logInfo:V.info,logError:V.error,clogger:z,featureReactAllThreads:Object(A["isFeatureEnabled"])(t,"feature_react_all_threads"),featureReactAllUnreads:Object(A["isFeatureEnabled"])(t,"feature_react_all_unreads"),channelIsYou:Object($["isYou"])(t,d),channelIsMuted:Object(w["isChannelMutedById"])(t,u),channelHasDraft:Object($["getHasDraft"])(t,u),channelBadgeCount:Object(S["c"])(t,d),focusRequested:Object(R["getFocusRequested"])(t),focusInput:Object(R["getFocusInput"])(t),isChannelUnavailable:Object($["isUnavailable"])(t,d),unavailableTeamId:Object($["getUnavailableTeamId"])(t,d),readOnly:Object($["isReadOnly"])(t,d),featureAnnounceOnly:Object(A["isFeatureEnabled"])(t,"feature_announce_only"),featureOfflineMode:Object(A["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(Y["c"])(t)})};function Er(e){return{requestHistory:function t(){return e(R["requestReplies"].apply(void 0,arguments))},clearHighlight:function t(){return e(R["clearHighlight"].apply(void 0,arguments))},markThread:function t(){return e(M["markThread"].apply(void 0,arguments))},jumpToMessage:function t(){return e(q["a"].apply(void 0,arguments))},setFocusRequestedTs:function t(){return e(L["h"].apply(void 0,arguments))},setFocusRequested:function t(){return e(R["setFocusRequested"].apply(void 0,arguments))},setFocusInput:function t(){return e(R["setFocusInput"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(F["a"].apply(void 0,arguments))},maybeFocusThreadInAllThreads:function t(){return e(Q.apply(void 0,arguments))},maybeFocusThreadInAllUnreads:function t(){return e(B["c"].apply(void 0,arguments))},clearSerializedDataForKey:function t(){return e(U["clearSerializedDataForKey"].apply(void 0,arguments))},truncateThreadHistory:function t(){return e(R["truncateThreadHistory"].apply(void 0,arguments))}}}var jr=Object(ke["a"])(Or,{alwaysFetchOnMount:true});var Cr=Object(i["connect"])(kr,Er)(jr);var Sr=Cr;var wr=r(163);var Ir=function e(t,r){if(!t)throw new Error("mountThreadsFlexpane must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(wr["a"],null,n.a.createElement(Sr,null))),r)};var Tr=Ir;var Ar=r(44);Object(Ar["a"])("interop.mountThreadsFlexpane",Tr)},,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(16);var y=r.n(_);var O=r(2);var k=r.n(O);var E=r(28);var j=r(3062);var C={name:g["b"].string,avatar:g["b"].string,onClick:g["b"].oneOfType([g["b"].func,g["b"].string]).isRequired,scrollTop:g["b"].bool};var S={name:"",avatar:"",scrollTop:false};var w=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this;var r=y()("p-ent_nav_header",{"p-ent_nav_header__scroll_border":this.props.scrollTop});var a={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement("div",{className:r},n.a.createElement(E["c"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_header__org_img",alt:"org avatar",style:a,type:"link"}),n.a.createElement("div",{className:"p-ent_nav_header__org_name"},this.props.name))}}]);return t}(a["PureComponent"]);w.displayName="DashboardNavHeader";w.defaultProps=S;var I=w;var T=I;var A=r(5);var N=r.n(A);var P=r(22);var R=r(3064);var M={isOpen:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired};var x={isOpen:false};var D=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t,r=this;var a=y()("p-ent_nav_item_primary","p-ent_nav_item_primary--"+this.props.iconColor,(t={},N()(t,"p-ent_nav_item_primary--expanded_"+this.props.iconColor,this.props.isOpen),N()(t,"p-ent_nav_item_primary--expanded",this.props.isOpen),t));var i="ent-nav-"+Object(O["camelCase"])(this.props.name);return n.a.createElement(E["c"],{onClick:function e(){return r.props.onClick(r.props.name)},className:a,"data-qa":i},n.a.createElement(P["a"],{type:this.props.icon}),n.a.createElement("div",{className:"p-ent_nav_item_primary__header"},this.props.name))}}]);return t}(a["PureComponent"]);D.displayName="DashboardNavItemPrimary";D.defaultProps=x;var F=D;var L=F;var B=r(3066);var U={subItems:g["b"].array.isRequired,animateClose:g["b"].bool};var q={animateClose:false};var G=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSecondaryItems=r.renderSecondaryItems.bind(r);return r}v()(t,[{key:"renderSecondaryItems",value:function e(){var t=k.a.map(this.props.subItems,function(e){var t=y()("p-ent_nav_item_secondary__item",{"p-ent_nav_item_secondary__item--selected":e.selected});var r="ent-nav-"+k.a.camelCase(e.name);return n.a.createElement(E["c"],{key:e.id,onClick:function t(){return e.onClick(e.id)},className:t,"data-qa":r},e.name," ",n.a.createElement(P["a"],{className:"p-ent_nav_item_secondary__icon",type:e.icon}))});return t}},{key:"render",value:function e(){var t=y()("p-ent_nav_item_secondary__container",{"p-ent_nav_item_secondary__container--collapse":this.props.animateClose});return n.a.createElement("div",{className:t},this.renderSecondaryItems())}}]);return t}(a["PureComponent"]);G.displayName="DashboardNavItemSecondary";G.defaultProps=q;var H=G;var W=H;var V=r(3068);var K={isOpen:g["b"].bool,animateClose:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired,subItems:g["b"].array};var z={isOpen:false,animateClose:false,subItems:null};var Q=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggleAnimation=r.toggleAnimation.bind(r);r.shouldAnimateClosed=r.shouldAnimateClosed.bind(r);return r}v()(t,[{key:"componentDidMount",value:function e(){var t=this.element;t&&(t.style.maxHeight=k.a.head(t.children).offsetHeight+"px")}},{key:"componentDidUpdate",value:function e(){(this.props.animateClose||this.props.isOpen)&&this.toggleAnimation()}},{key:"toggleAnimation",value:function e(){var t=this.element;if(t){var r=k.a.map(t.children,function(e){return e.offsetHeight});this.props.animateClose&&(t.style.maxHeight=k.a.head(r)+"px");this.props.isOpen&&(t.style.maxHeight=k.a.sum(r)+"px")}}},{key:"shouldAnimateClosed",value:function e(){var t=this.element;if(this.props.animateClose&&t){var r=k.a.head(t.children).offsetHeight;var a=1;var n=r-a;var i=r+a;if(t.style.maxHeight>=n+"px"&&t.style.maxHeight<=i+"px")return false;return true}return false}},{key:"render",value:function e(){var t=this;var r=N()({"p-ent_nav_item--expanded":this.props.isOpen,"p-ent_nav_item--collapse":this.shouldAnimateClosed(),"p-ent_nav_item--sub_items":this.props.subItems&&this.props.isOpen},"p-ent_nav_item--expanded_"+this.props.iconColor,this.props.isOpen||this.shouldAnimateClosed());var a=y()("p-ent_nav_item",r);var i=null;this.props.subItems&&(this.props.isOpen||this.props.animateClose)&&(i=n.a.createElement(W,{subItems:this.props.subItems,animateClose:this.props.animateClose}));return n.a.createElement("div",{ref:function e(r){t.element=r},className:a},n.a.createElement(L,{isOpen:this.props.isOpen,icon:this.props.icon,iconColor:this.props.iconColor,name:this.props.name,onClick:this.props.onClick}),n.a.createElement("div",null,i))}}]);return t}(a["PureComponent"]);Q.displayName="DashboardNavItem";Q.defaultProps=z;var Y=Q;var J=Y;var X=r(128);var Z=r(3070);var $={avatar:g["b"].string,name:g["b"].string,onClick:g["b"].func.isRequired};var ee={name:"",avatar:""};var te=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this;var r={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement(X["a"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_user_menu","data-qa":"ent-nav-user_menu","data-popover-trigger":"user_menu"},n.a.createElement("div",{className:"p-ent_nav_user_menu__avatar",alt:"user menu avatar",style:r}),n.a.createElement("div",{className:"p-ent_nav_user_menu__name"},this.props.name),n.a.createElement(P["a"],{type:"chevron-down"}))}}]);return t}(a["PureComponent"]);te.displayName="DashboardNavUserMenu";te.defaultProps=ee;var re=te;var ae=re;var ne=r(3072);var ie={header:g["b"].shape({name:g["b"].string,avatar:g["b"].string,onClick:g["b"].oneOfType([g["b"].func,g["b"].string]).isRequired,scrollTop:g["b"].bool}).isRequired,navItems:g["b"].arrayOf(g["b"].shape({isOpen:g["b"].bool,toClose:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired,subItems:g["b"].array})).isRequired,userMenu:g["b"].shape({avatar:g["b"].string,name:g["b"].string,onClick:g["b"].func.isRequired}).isRequired};var se=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderNavItems=r.renderNavItems.bind(r);r.makeScrollable=r.makeScrollable.bind(r);r.onWindowResize=r.onWindowResize.bind(r);r.state={scrollTop:false,scrollBottom:false};return r}v()(t,[{key:"componentDidMount",value:function e(){this.makeScrollable();window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function e(){this.makeScrollable()}},{key:"makeScrollable",value:function e(){var t=this.element;if(t){var r=t.scrollHeight-t.scrollTop;this.setState(function(){return{scrollTop:0!==t.scrollTop,scrollBottom:!(r===t.offsetHeight)}})}}},{key:"renderNavItems",value:function e(){var t=k.a.map(this.props.navItems,function(e){return n.a.createElement(J,{key:e.id,isOpen:e.isOpen,animateClose:e.animateClose,icon:e.icon,iconColor:e.iconColor,name:e.name,onClick:e.onClick,subItems:e.subItems})});return t}},{key:"render",value:function e(){var t=this;var r=this.props.header,a=r.name,i=r.avatar,s=r.onClick;var o=y()("p-ent_nav_item__wrapper",{"p-ent_nav_item__scroll_border":this.state.scrollBottom});return n.a.createElement("div",{className:"p-ent_nav"},n.a.createElement(T,{name:a,avatar:i,onClick:s,scrollTop:this.state.scrollTop}),n.a.createElement("div",{ref:function e(r){t.element=r},onScroll:this.makeScrollable,className:o},this.renderNavItems()),n.a.createElement(ae,{avatar:this.props.userMenu.avatar,name:this.props.userMenu.name,onClick:this.props.userMenu.onClick}))}}]);return t}(a["PureComponent"]);se.displayName="DashboardNav";var oe=se;var le=oe;Object(c["a"])("interop.dashboardNav",{render:function e(t,r,a){if(!t)throw new Error("dashboardNav render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(le,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(13);var _=r(16);var y=r.n(_);var O=r(207);var k=r(2);var E=r(692);var j=r(151);var C=r(4);var S=r(10);var w=r(181);var I=r(71);var T=new S["b"]("a11y");function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.handle,a=e.purpose,n=e.isDeactivated,i=e.memberCount,s=void 0===i?void 0:i;if(!t)return"";var o=!Object(k["isUndefined"])(s);if(r&&a&&n&&!o)return T.t("{name}, @{handle}, {purpose} (deactivated)",{name:t,handle:r,purpose:a});if(r&&a&&n&&o)return T.t("{name}, @{handle}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:r,purpose:a,memberCount:s});if(r&&a&&!n&&o)return T.t("{name}, @{handle}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:r,purpose:a,memberCount:s});if(r&&!a&&!n&&o)return T.t("{name}, @{handle} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:r,memberCount:s});if(!r&&a&&!n&&o)return T.t("{name}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:a,memberCount:s});if(!r&&a&&n&&o)return T.t("{name}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:a,memberCount:s});if(!r&&a&&n&&!o)return T.t("{name}, {purpose} (deactivated)",{name:t,purpose:a});if(!r&&a&&!n&&!o)return T.t("{name}, {purpose}",{name:t,purpose:a});if(!r&&!a&&n&&o)return T.t("{name} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s});if(!r&&!a&&n&&!o)return T.t("{name} (deactivated)",{name:t});if(r&&!a&&n&&!o)return T.t("{name}, @{handle} (deactivated)",{name:t,handle:r});if(r&&!a&&n&&o)return T.t("{name}, @{handle} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:r,memberCount:s});if(!r&&!a&&!n&&!o)return t;if(r&&!a&&!n&&!o)return T.t("{name}, @{handle}",{name:t,handle:r});if(r&&a&&!n&&!o)return T.t("{name}, @{handle}, {purpose}",{name:t,handle:r,purpose:a});if(!r&&!a&&!n&&o)return T.t("{name} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s});return t}var N=r(99);var P=r(899);var R=r(2845);var M={children:b["b"].func.isRequired};function x(e){var t=e.children;return f.a.createElement(P["a"],null,function(e){var r=e.width,a=e.height,n=e.measureRef;return f.a.createElement("div",{ref:n,className:"c-measure_container"},t({width:r,height:a}))})}x.displayName="MeasureContainer";var D=x;var F=r(537);var L=r(1067);var B=r(296);var U=r(96);var q=r(801);var G=r(1818);var H=r(897);var W=r(128);var V=r(40);var K=r.n(V);var z=r(783);var Q=r(11);var Y=r(19);var J=r(17);var X=r(50);var Z=r(28);var $=r(187);var ee=r(245);var te=new S["b"]("user_groups");var re={userGroup:b["b"].object,defaultChannelNames:b["b"].arrayOf(b["b"].string),showToggle:b["b"].bool,creator:b["b"].string};var ae={userGroup:{},defaultChannelNames:void 0,showToggle:false,creator:void 0};var ne=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onButtonClick=r.onButtonClick.bind(r);return r}u()(t,[{key:"onButtonClick",value:function e(t,r){var a=this.props.userGroup;Object(z["c"])({action:r,userGroup:a})}},{key:"maybeRenderDescription",value:function e(t){var r=this.props.userGroup;var a=Object(N["e"])(r);if(!a)return null;return f.a.createElement("p",{className:t},a)}},{key:"maybeRenderHandle",value:function e(){var t=this.props.userGroup;var r=Object(N["f"])(t,{includeAtSign:true});if(!r)return null;return f.a.createElement("span",{className:"subtle_silver"},r)}},{key:"maybeRenderToggle",value:function e(){var t=this;var r=this.props.showToggle;if(!r)return null;return f.a.createElement(f.a.Fragment,null,f.a.createElement(X["c"],{position:"left",zIndex:"above_fs",tip:te.t("Enable group")},f.a.createElement($["a"],{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function e(r){return t.onButtonClick(r,"enable")},"aria-label":te.t("Enable group")},f.a.createElement("i",{className:"ts_icon ts_icon_power_off"}))))}},{key:"maybeRenderDefaultChannels",value:function e(){var t=this.props.defaultChannelNames;if(!t||!t.length)return null;var r=Object(S["g"])(t,{react:true,noEscape:true}).join("");return f.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},f.a.createElement("span",{className:"bold"},te.t("Default channels: {channels}",{channels:r})))}},{key:"maybeRenderCreatedBy",value:function e(){var t=this.props,r=t.userGroup,a=t.creator;if(!r&&(!r.created_by||!r.date_create))return null;var n=te.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:a,creationDate:K()(1e3*r.date_create).format("MMMM Do, YYYY")});return f.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},n)}},{key:"maybeRenderDisableButton",value:function e(){var t=this;var r=this.props.showToggle;if(!r)return null;return f.a.createElement(X["c"],{position:"bottom",zIndex:"above_fs",tip:te.t("Disable group")},f.a.createElement(Z["d"],{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+te.t("Disable"),"data-action":"disable_user_group",onClick:function e(r){return t.onButtonClick(r,"disable")}}))}},{key:"renderDeactivatedRow",value:function e(){var t=this.props.userGroup;var r=Object(N["h"])(t);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},f.a.createElement("p",{className:"no_bottom_margin subtle_silver"},f.a.createElement("span",{className:"bold"},r),te.t("(Disabled)"))),f.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderCount",value:function e(){var t=this.props.userGroup;var r=t.isExternal||Object(N["m"])(t)?f.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return f.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},r,f.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(N["l"])(t))}},{key:"renderSettingsButton",value:function e(){var t=this;return f.a.createElement(X["c"],{position:"bottom",tip:te.t("Edit group info"),zIndex:"above_fs"},f.a.createElement(Z["d"],{size:"large",type:"outline",icon:"cog_o",title:""+te.t("Settings"),"data-action":"open_form",onClick:function e(r){return t.onButtonClick(r,"editInfo")}}))}},{key:"renderMemberButton",value:function e(){var t=this;var r=this.props.userGroup;var a=void 0;a=Object(N["m"])(r||r.is_external)?te.t("View group members"):te.t("Edit group members");return f.a.createElement(X["c"],{position:"bottom",tip:a,zIndex:"above_fs"},f.a.createElement(Z["d"],{size:"large",type:"outline",icon:"user",title:""+te.t("Members"),"data-action":"edit_members",onClick:function e(r){return t.onButtonClick(r,"editMembers")}}))}},{key:"render",value:function e(){var t=this.props.userGroup;var r=Object(N["t"])(this.props.userGroup);if(!r)return this.renderDeactivatedRow();var a=Object(N["h"])(t);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},f.a.createElement("p",{className:"bold no_bottom_margin"},a," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),f.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),f.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]);return t}(h["Component"]);ne.displayName="LegacyUserGroupBrowserListItem";ne.defaultProps=ae;var ie=function e(t,r){var a=r.id;var n=Object(j["e"])(t,a);var i=Object(N["d"])(t,n,{includePrivateChannels:false});var s=i.map(function(e){if(!e)return null;var r=Object(Y["d"])(t,e);if(!r)return null;var a=Object(Q["getName"])(r);if(!a)return null;return"#"+a});s=Object(k["filter"])(s);var o=Object(J["getPrefCompliantMemberNameById"])(t,n.created_by);return{userGroup:n,defaultChannels:i,defaultChannelNames:s,creator:o,showDelete:!Object(N["m"])(n)&&!n.is_external,showToggle:Object(N["b"])(t)}};var se=Object(g["connect"])(ie,null,null,{areStatePropsEqual:function e(t,r){return Object(ee["a"])(t,r,2)}})(ne);var oe=new S["b"]("user_groups");var le={id:b["b"].string.isRequired,userGroup:b["b"].object,onClick:b["b"].func,isUserGroupBrowser:b["b"].bool};var ce={userGroup:{},onClick:k["noop"],isUserGroupBrowser:false};var ue=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}u()(t,[{key:"onClick",value:function e(t){this.props.onClick(t,this.props.id);return Object(H["d"])(t,this.props.id)}},{key:"maybeRenderDescription",value:function e(){var t=this.props.userGroup;var r=Object(N["e"])(t);if(!r)return null;return f.a.createElement("p",null,r)}},{key:"maybeRenderCountOrHandle",value:function e(){var t=this.props.userGroup;var r=Object(N["l"])(t);var a=Object(N["f"])(t,{includeAtSign:false});if(!(r||a))return null;var n=oe.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:r});a&&(n=n+" - "+Object(N["f"])(t));return f.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},n)}},{key:"renderRow",value:function e(){var t=this.props,r=t.userGroup,a=t.id,n=t.isUserGroupBrowser;if(n)return f.a.createElement(se,{id:a});return f.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},f.a.createElement(W["a"],{"data-user-group-id":""+a,onClick:this.onClick},f.a.createElement("h4",null,Object(N["h"])(r)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function e(){var t=this.props.id;return f.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+t},this.renderRow())}}]);return t}(h["Component"]);ue.displayName="LegacyUserGroupListItem";ue.defaultProps=ce;var de=function e(t,r){var a=r.id;return{userGroup:Object(j["e"])(t,a)}};var pe=Object(g["connect"])(de)(ue);var ve=r(299);var me=new S["b"]("user_groups");var he={isFlexpane:b["b"].bool,featureSonicUserGroups:b["b"].bool};var fe={isFlexpane:false,featureSonicUserGroups:false};var be=function(e){m()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"computeAtLabel",value:function e(t){var r=t;"group"===r&&(r="channel");var a=Object(ve["b"])({ms_name:r});return"@"+a}},{key:"renderContent",value:function e(){var t=this.props.isFlexpane;var r=t?null:y()("col","span_3_of_4");var a=y()("normal_padding",{dull_grey:t});var n=me.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"});var i=me.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return f.a.createElement("div",{className:r},f.a.createElement("div",{className:a},f.a.createElement("p",{className:"user_groups_tip"},n),f.a.createElement("p",{className:"user_groups_tip"},i)))}},{key:"render",value:function e(){var t=this.props,r=t.isFlexpane,a=t.featureSonicUserGroups;if(a)return null;var n=r?f.a.createElement("div",null,f.a.createElement("span",{className:"user_groups_img"})):null;var i=r?null:f.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},f.a.createElement("span",{className:"user_groups_img"}));return f.a.createElement(h["Fragment"],null,n,this.renderContent(),i)}}]);return t}(h["PureComponent"]);be.displayName="LegacyUserGroupEmptyState";be.defaultProps=fe;var ge=function e(t,r){var a=r.id;return{userGroup:Object(j["e"])(t,a),featureSonicUserGroups:Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var _e=Object(g["connect"])(ge)(be);var ye=r(2411);var Oe=new S["b"]("user_groups");var ke={userGroups:b["b"].arrayOf(b["b"].object),scrollmark:b["b"].shape({key:b["b"].string,offset:b["b"].number}),searchQuery:b["b"].string,setCursorMark:b["b"].func,fetchUserGroupsPost:b["b"].func,fetchDeactivatedUserGroupsPost:b["b"].func,saveScrollmark:b["b"].func,onItemClick:b["b"].func,onCreateUserGroup:b["b"].func,onClearSearch:b["b"].func,isLegacy:b["b"].bool,telemeter:b["b"].object.isRequired,includeDeactivated:b["b"].bool,isUserGroupBrowser:b["b"].bool,featureSonicUserGroups:b["b"].bool,onItemTabWithin:b["b"].func};var Ee={userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:k["noop"],fetchUserGroupsPost:k["noop"],fetchDeactivatedUserGroupsPost:k["noop"],saveScrollmark:k["noop"],onItemClick:k["noop"],onCreateUserGroup:k["noop"],onClearSearch:k["noop"],isLegacy:false,includeDeactivated:false,isUserGroupBrowser:false,featureSonicUserGroups:false,onItemTabWithin:k["noop"]};var je=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGroupClick=r.onGroupClick.bind(r);r.onScroll=r.onScroll.bind(r);r.setListRef=r.setListRef.bind(r);r.fetchPost=r.fetchPost.bind(r);r.handleFetchDeactivatedGroupsResponse=r.handleFetchDeactivatedGroupsResponse.bind(r);r.handleFetchActiveGroupsResponse=r.handleFetchActiveGroupsResponse.bind(r);r.fetchAround=r.fetchAround.bind(r);r.renderRow=r.renderRow.bind(r);r.maybeRenderList=r.maybeRenderList.bind(r);r.focus=r.focus.bind(r);r.getAriaLabelForRow=r.getAriaLabelForRow.bind(r);r.isFocusableItem=r.isFocusableItem.bind(r);r.requestPost=null;r.keys=null;r.list=null;r.layout=new L["a"];r.layout.heightCache.DEFAULT_HEIGHT=90;r.totalGroups=0;r.isFirstFetch=!e.userGroups.length&&!e.searchQuery;r.state={reachedEnd:false,fetchingDeactivatedGroups:false};return r}u()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,r=t.key,a=t.offset;this.layout.setAnchor(r,a);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){this.setState(function(){return{reachedEnd:false,fetchingDeactivatedGroups:false}});this.requestPost&&this.requestPost.cancel();this.requestPost=null;this.totalGroups=0;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){if(this.requestPost){this.requestPost.cancel();this.requestPost=null}}},{key:"onGroupClick",value:function e(t,r){if(!this.list)return;if(!r)return;this.props.saveScrollmark({key:r,offset:this.layout.getOffsetForKey(r)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"getAriaLabelForRow",value:function e(t){if(!this.keys)return null;var r=this.props.userGroups;var a=r[t];var n=false;return A({name:Object(N["i"])(a),handle:Object(N["f"])(a,n),purpose:Object(N["e"])(a),isDeactivated:!Object(N["t"])(a),memberCount:Object(N["l"])(a)})}},{key:"focus",value:function e(){this.list&&this.list.focus()}},{key:"handleFetchActiveGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.items,a=t.num_found;this.totalGroups=a;if(this.props.userGroups.length>=this.totalGroups||!r.length)if(this.props.includeDeactivated){this.props.setCursorMark(null);this.setState(function(){return{fetchingDeactivatedGroups:true}})}else this.setState(function(){return{reachedEnd:true}})}},{key:"handleFetchDeactivatedGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.items,a=t.num_found;var n=this.totalGroups+a;(this.props.userGroups.length>=n||!r.length)&&this.setState(function(){return{reachedEnd:true}})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups();this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show");return this.requestPost.bind(this).finally(function(){t.requestPost=null;if(t.isFirstFetch){t.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy");t.isFirstFetch=false}})}},{key:"fetchDeactivatedGroups",value:function e(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}},{key:"fetchActiveGroups",value:function e(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.fetchPost()}},{key:"maybeRenderList",value:function e(t){var r=this;if(!t.length&&this.state.reachedEnd)return this.renderEmptyListView();if(!this.state.reachedEnd){this.loadingIndicatorKey="Loading"+t.length;t.push(this.loadingIndicatorKey)}return f.a.createElement(D,null,function(e){var a=e.width,n=e.height;return f.a.createElement(F["a"],{width:a,height:n,keys:t,layout:r.layout,rowRenderer:r.renderRow,onScroll:r.onScroll,onItemClick:r.props.onItemClick,ref:r.setListRef,loadAround:r.fetchAround,loadPost:r.fetchPost,isFocusableItem:r.isFocusableItem,onItemTabWithin:r.props.onItemTabWithin,ariaLabel:Oe.t("User Groups"),getAriaLabelForRow:r.getAriaLabelForRow})})}},{key:"isFocusableItem",value:function e(t){var r=t.key;return r!==this.loadingIndicatorKey}},{key:"renderRow",value:function e(t){var r=this.keys[t];if(!r)return null;if(r===this.loadingIndicatorKey)return f.a.createElement("div",{className:"margin_top_200"},f.a.createElement(U["a"],{color:"blue"}));return this.renderUserGroup(t)}},{key:"renderUserGroup",value:function e(t){var r=this.props,a=r.userGroups,n=r.isLegacy,i=r.isUserGroupBrowser;var s=a[t].id;if(!s)return null;if(n)return f.a.createElement(pe,{id:s,isUserGroupBrowser:i,onClick:this.onGroupClick});return f.a.createElement(G["a"],{id:s,onClick:this.onGroupClick})}},{key:"renderEmptyListView",value:function e(){var t=this.props,r=t.featureSonicUserGroups,a=t.searchQuery,n=t.onClearSearch,i=t.onCreateUserGroup,s=t.isLegacy,o=t.isUserGroupBrowser;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p=!!a.length;if(p){c=Oe.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:a});u=Oe.t("Clear Search");d=n}else{if(s&&!r)return f.a.createElement(_e,{isFlexpane:!o});if(Object(q["a"])()){l=Oe.t("Organize your team");u=Oe.t("Create a User Group");d=i}else l=Oe.t("No user groups yet");c=Oe.t("User groups make it easy to get the attention of many members at once.")}var v=y()({"p-user_group_list__empty_list":!p,"p-user_group_list__empty_search_results":p});return f.a.createElement("div",{className:v,"data-qa":"searchable_ug_list_empty_state"},f.a.createElement(B["a"],{title:l,description:c,primaryActionText:u,onClickPrimaryAction:d}))}},{key:"render",value:function e(){var t=this.props.userGroups;this.keys=this.props.includeDeactivated?t.map(function(e){return e.id}):t.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id});return f.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}]);return t}(h["PureComponent"]);je.displayName="SearchableUserGroupsList";je.defaultProps=Ee;var Ce=function e(t,r){var a=r.map(function(e){var r=t[e];if(!r)return null;return{id:r.id,isDeactivated:!!r.date_delete,name:r.name,handle:r.handle,user_count:r.user_count}}).filter(function(e){return e});return a};var Se=Object(O["createSelector"])([j["b"],E["getFlexpaneUserGroups"]],Ce);var we={getUserGroups:Se};var Ie=function e(t){return{userGroups:Se(t),scrollmark:Object(E["getScrollmark"])(t),searchQuery:Object(E["getSearchQuery"])(t),featureSonicUserGroups:Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups"),useGlobalNav:Object(w["b"])(t),telemeter:Object(I["c"])({state:t})}};var Te={fetchUserGroupsPost:E["fetchUserGroupsPost"],saveScrollmark:E["saveScrollmark"],setSearchQuery:E["setSearchQuery"],setCursorMark:E["setCursorMark"],fetchDeactivatedUserGroupsPost:E["fetchDeactivatedUserGroupsPost"]};var Ae=Object(g["connect"])(Ie,Te)(function(e){var t=e.forwardedRef,r=s()(e,["forwardedRef"]);return f.a.createElement(je,n()({ref:t},r))});var Ne=t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(Ae,n()({forwardedRef:t},e))})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(0);var c=r(29);var u=r(25);var d=Object(u["a"])("Fetches org retention settings",function(e,t,r){return e(Object(c["a"])({method:"mc.enterprise.retention.get",args:{enterprise:r}}))});d.propTypes=l["b"].string.isRequired;var p=Object(u["a"])("Submits retention request to API",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.type,n=r.requestData;return e(Object(c["a"])({method:"newRequest"===a?"mc.enterprise.retention.requestChange":"mc.enterprise.retention.cancelRequest",args:n}))});p.propTypes={type:l["b"].string.isRequired,requestData:l["b"].object};var v=r(281);var m=r(5);var h=r.n(m);var f=r(3);var b=r.n(f);var g=r(6);var _=r.n(g);var y=r(7);var O=r.n(y);var k=r(8);var E=r.n(k);var j=r(9);var C=r.n(j);var S=r(2);var w=r.n(S);var I=r(10);var T=r(28);var A=r(138);var N=r(16);var P=r.n(N);var R=r(22);var M=r(772);var x=new I["b"]("policy-retention");function D(e){return{channels:x.t("Channel Retention"),private_channels:x.t("Private Channel Retention"),dms:x.t("Direct Message Retention"),allow_override:e?x.t("Member & Admin Override"):x.t("Direct Message and Private Channel Override"),files:x.t("File Retention")}}function F(e){return{channels:[{value:4,label:e?x.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):x.t("No policy; teams can modify their own retention settings")},{value:0,label:e?x.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):x.t("Retain all messages")},{value:1,label:e?x.t("Keep all messages, including revision history"):x.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?x.t("Delete messages and their revisions after a set number of days"):x.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):x.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],private_channels:[{value:4,label:e?x.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):x.t("No policy; teams can modify their own retention settings")},{value:0,label:e?x.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):x.t("Retain all messages")},{value:1,label:e?x.t("Keep all messages, including revision history"):x.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?x.t("Delete messages and their revisions after a set number of days"):x.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):x.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],dms:[{value:0,label:e?x.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):x.t("Retain all messages")},{value:1,label:e?x.t("Keep all messages, including revision history"):x.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?x.t("Delete messages and their revisions after a set number of days"):x.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):x.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],allow_override:[{value:4,label:e?x.t("No org-wide policy \u2014 Workspace Owners can set the override policy for their workspace"):x.t("No policy; teams can set their own override policy")},{value:0,label:e?x.t("Don\u2019t allow channel and DM overrides"):x.t("Don\u2019t allow team members to override team-wide retention policies for DMs and private channels")},{value:1,label:e?x.t("Always allow channel and DM overrides"):x.t("Allow team members to override team-wide retention policies for DMs and private channels")}],files:[{value:0,label:e?x.t("Keep files"):x.t("Retain all files")},{value:1,label:e?x.t("Keep files, but only for a set number of days"):x.t("Retain all files for only a specific number of days"),showDuration:true}]}}function L(e){var t=e.policyType,r=e.featureGdprExports;var a=D(r);return a[t]}function B(e){var t=e.policyType,r=e.featureGdprExports;var a=F(r);return a[t]}function U(e){return w.a.includes(["channels","private_channels","allow_override"],e)}function q(e){var t=e.policyType,r=e.retentionType,a=e.featureGdprExports;var n=B({policyType:t,featureGdprExports:a});return w.a.get(w.a.find(n,function(e){return e.value===r}),"showDuration",false)}function G(e){var t=e.policyType,r=e.retentionType,a=e.policyDurationValue,n=e.featureGdprExports;if(w.a.isUndefined(t)||w.a.isUndefined(r))return"";var i=q({policyType:t,retentionType:r,featureGdprExports:n});var s=i?a:0;if(0===w.a.parseInt(s)||4===w.a.parseInt(r)){var o=B({policyType:t,featureGdprExports:n});var l=w.a.find(o,function(e){return e.value===r}),c=l.label;return c}if("files"===t)return n?x.t("Keep files for {policyDurationValue} days",{policyDurationValue:a}):x.t("Retain all files for only {policyDurationValue} days",{policyDurationValue:a});switch(w.a.parseInt(r)){case 2:return n?x.t("Delete messages and their revisions after {policyDurationValue} days",{policyDurationValue:a}):x.t("Retain all messages and logs for only {policyDurationValue} days",{policyDurationValue:a});case 3:return n?x.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)",{policyDurationValue:a}):x.t("Retain all messages for only {policyDurationValue} days (but keep logs for compliance exports)",{policyDurationValue:a});default:return""}}function H(e){var t=e.policyType,r=e.settingValues,a=e.featureGdprExports;var n=r.retention_type;if(4===n){if("allow_override"===t)return{retention_type:1,is_locked:false};return{retention_type:0,retention_duration:0,is_locked:false}}var i=b()({},r,{is_locked:true});if(!q({policyType:t,retentionType:n,featureGdprExports:a}))return b()({},i,{retention_duration:0});return i}var W=new I["b"]("policy-retention");var V={orgName:l["b"].string.isRequired,requesterName:l["b"].string.isRequired,onConfirm:l["b"].func.isRequired,onCancel:l["b"].func.isRequired,requestedPolicies:l["b"].object,currentPolicies:l["b"].object,requestDate:l["b"].string,cancelRequest:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var K={cancelRequest:false,requestDate:"",currentPolicies:{},requestedPolicies:{}};var z=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickCloseOrCancelButton=r.onClickCloseOrCancelButton.bind(r);r.onClickSubmitButton=r.onClickSubmitButton.bind(r);return r}O()(t,[{key:"onClickCloseOrCancelButton",value:function e(){this.props.onCancel()}},{key:"onClickSubmitButton",value:function e(){this.props.onConfirm()}},{key:"buildRequestModalContent",value:function e(){var t=this.props,r=t.requesterName,a=t.orgName;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-org_retention_request__modal_sectionp-org_retention_request__modal_section--lead"},n.a.createElement("p",{className:"p-org_retention_request--font_bump"},n.a.createElement("strong",null,r,"\u2019s")," ","requested changes are listed below. Once you\u2019ve clicked"," ",n.a.createElement("strong",null,"Confirm with Customer"),", a Slackbot message will be sent to the Primary Org Owner of ",a," to confirm the change."),n.a.createElement("p",null,n.a.createElement("strong",null,"Your name will be included with this request."))),n.a.createElement("div",null,this.renderRequestedPolicies()))}},{key:"buildCancelModalContent",value:function e(){var t=Object(M["a"])(this.props.requestDate,{omitTime:true,dateFormat:"MMMM Do, YYYY"});return n.a.createElement("div",null,n.a.createElement("h2",{className:"margin_bottom_150"},W.t("Are you sure you\u2019d like to cancel the retention policy update request?")),n.a.createElement("div",{className:"p-org_retention_request--font_bump margin_bottom_300"},"Once you\u2019ve clicked ",n.a.createElement("strong",null,"Confirm Cancellation"),", Slackbot mark the approval request sent to ",this.props.orgName," on",n.a.createElement("strong",null,t)," as expired."))}},{key:"renderRequestedPolicies",value:function e(){var t=this;var r=this.props.featureGdprExports;return w.a.map(this.props.requestedPolicies,function(e,a){var i=e.retention_type,s=e.retention_duration,o=e.is_locked;var l=0!==i&&"allow_override"!==a||o?i:4;var c=w.a.get(t.props.currentPolicies,a);var u=c.retention_type,d=c.retention_duration,p=c.is_locked;var v=0!==u&&"allow_override"!==a||p?u:4;return n.a.createElement("div",{key:a,className:"p-org_retention_request__modal_section"},n.a.createElement("div",{className:"bold margin_bottom_50 p-org_retention_request--font_bump"},L({policyType:a,featureGdprExports:r})),n.a.createElement("div",null,n.a.createElement("div",{className:"bold"}," ","\ud83d\udc49\ud83c\udffe"," ",n.a.createElement("span",{className:"margin_left_50"},W.t("New:")," ",G({policyType:a,retentionType:l,policyDurationValue:s,featureGdprExports:r}))),n.a.createElement("div",null," ","\ud83d\udc74\ud83c\udffb"," ",n.a.createElement("span",{className:"margin_left_50"},W.t("Old:")," ",G({policyType:a,retentionType:v,policyDurationValue:d,featureGdprExports:r})))))})}},{key:"render",value:function e(){var t=this.props.cancelRequest?"":W.t("Ready to confirm with {orgName}?",{orgName:this.props.orgName});var r=this.props.cancelRequest?this.buildCancelModalContent():this.buildRequestModalContent();var a=this.props.cancelRequest?W.t("Confirm Cancellation"):W.t("Confirm with Customer");var i=P()("btn",{btn_danger:this.props.cancelRequest});return n.a.createElement("div",{className:"c-modal c-modal--active"},n.a.createElement("div",{className:"c-modal__background"}),n.a.createElement("div",{className:"c-modal__contents c-modal__contents--active p-org_retention_request__modal"},n.a.createElement(R["a"],{type:"times",onClick:this.onClickCloseOrCancelButton,className:"c-modal__close"}),n.a.createElement("div",{className:"c-modal__header"},n.a.createElement("h2",{className:"margin_bottom_0"},t)),n.a.createElement("div",{className:"c-modal__body p-org_retention_request__modal_content"},r,n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement(T["d"],{type:"outline",className:"margin_right_75",onClick:this.onClickCloseOrCancelButton},W.t("Cancel")),n.a.createElement(T["d"],{className:i,onClick:this.onClickSubmitButton},a)))))}}]);return t}(n.a.PureComponent);z.displayName="PolicyRequestModal";z.defaultProps=K;var Q=Object(A["a"])("feature_gdpr_exports")(z);var Y=r(95);var J=new I["b"]("policy-retention");var X=function e(t){var r=Object(M["a"])(t.requestTimestamp,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var a=J.t("{requesterName} requested the following policy updates on {displayDate}",{requesterName:t.requesterName,displayDate:r});var i=J.t("If you need to modify this request, please cancel it and initiate a new one. ");return n.a.createElement("div",{className:"alert alert_info p-org_retention_request--font_bump padding_top_150 padding_bottom_150 margin_bottom_200"},n.a.createElement("ts-icon",{class:"ts_icon_info_circle"}),n.a.createElement("strong",null,a),n.a.createElement("p",{className:"no_margin"},i))};X.displayName="PendingRequestAlert";var Z=Object(Y["pure"])(X);var $=new I["b"]("policy-retention");var ee={users:l["b"].object.isRequired,onUpdateUserSelection:l["b"].func,currentSelectionValue:l["b"].string,isFormPending:l["b"].bool};var te={onUpdateUserSelection:w.a.noop,currentSelectionValue:"",isFormPending:false};var re=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onOptionSelection=r.onOptionSelection.bind(r);return r}O()(t,[{key:"onOptionSelection",value:function e(t){var r=t.target[t.target.selectedIndex].getAttribute("data-name");this.props.onUpdateUserSelection({id:t.target.value,name:r})}},{key:"renderOptions",value:function e(){return w.a.map(this.props.users,function(e){return n.a.createElement("option",{value:e.id,key:e.id,"data-name":e.name},e.name)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy-requester"},$.t("Requester")),n.a.createElement("div",{className:"p-org_retention_request__select_wrapper"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isFormPending,className:"p-org_retention_request__select",id:"policy-requester"},n.a.createElement("option",{value:"",disabled:true},$.t("Choose an Organization Owner")),this.renderOptions())))}}]);return t}(n.a.Component);re.displayName="RequesterSelect";re.defaultProps=te;var ae=re;var ne=new I["b"]("policy-retention");var ie={onUpdateUserInput:l["b"].func,currentUserValue:l["b"].string,placeholder:l["b"].string,isDisabled:l["b"].bool};var se={onUpdateUserInput:w.a.noop,currentUserValue:"",placeholder:"",isDisabled:false};var oe=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUpdateInput=r.onUpdateInput.bind(r);return r}O()(t,[{key:"onUpdateInput",value:function e(t){this.props.onUpdateUserInput(t.target.value)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"mc-user"},ne.t("Your Full Name")),n.a.createElement("div",{className:"p-org_retention_request__requester_input",id:"mc-user"},n.a.createElement("input",{type:"text",value:this.props.currentUserValue,placeholder:this.props.placeholder,onChange:this.onUpdateInput,disabled:this.props.isDisabled?"disabled":""})))}}]);return t}(n.a.Component);oe.displayName="McUserInput";oe.defaultProps=se;var le=oe;var ce=new I["b"]("policy-retention");var ue={options:l["b"].array.isRequired,onUpdatePolicySelection:l["b"].func,currentSelectionValue:l["b"].number,currentDurationValue:l["b"].oneOfType([l["b"].string,l["b"].number]),isDeactivated:l["b"].bool};var de={onUpdatePolicySelection:w.a.noop,currentSelectionValue:0,currentDurationValue:0,isDeactivated:false};var pe=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onTextInput=r.onTextInput.bind(r);r.onOptionSelection=r.onOptionSelection.bind(r);return r}O()(t,[{key:"onOptionSelection",value:function e(t){var r=t.target.value;var a=4!==w.a.parseInt(r);this.props.onUpdatePolicySelection({retention_type:w.a.parseInt(r),is_locked:a})}},{key:"onTextInput",value:function e(t){var r=w.a.parseInt(t.target.value)||"";this.props.onUpdatePolicySelection({retention_duration:r})}},{key:"maybeRenderDuration",value:function e(){var t=this;var r=w.a.find(this.props.options,function(e){return e.value===w.a.parseInt(t.props.currentSelectionValue)}),a=r.showDuration;if(a)return n.a.createElement("div",{className:"p-org_retention_request__duration_group "},n.a.createElement("span",{className:"p-org_retention_request__duration_label"},ce.t("Duration")),n.a.createElement("input",{className:"p-org_retention_request__duration_input",type:"text",value:this.props.currentDurationValue,onChange:this.onTextInput,disabled:this.props.isDeactivated}),n.a.createElement("span",{className:"p-org_retention_request__duration_label--secondary margin_left_50"},"days"));return null}},{key:"renderOptions",value:function e(){return w.a.map(this.props.options,function(e){return n.a.createElement("option",{value:e.value,key:e.value},e.label)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_select_group"},n.a.createElement("div",{className:"p-org_retention_request__select_wrapper margin_right_150"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isDeactivated,className:"p-org_retention_request__select margin_right_200"},this.renderOptions())),this.maybeRenderDuration())}}]);return t}(n.a.Component);pe.displayName="PolicySelect";pe.defaultProps=de;var ve=pe;var me=new I["b"]("policy-retention");var he={displaySettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].oneOfType([l["b"].string,l["b"].number]),retention_type:l["b"].number}).isRequired,policyType:l["b"].oneOf(["channels","private_channels","dms","allow_override","files"]).isRequired,policyLabel:l["b"].string.isRequired,currentSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),onUpdatePolicy:l["b"].func,pendingSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),isFormPending:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var fe={pendingSettings:{},currentSettings:{},onUpdatePolicy:w.a.noop,isFormPending:false};var be=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUpdatePolicy=r.onUpdatePolicy.bind(r);return r}O()(t,[{key:"onUpdatePolicy",value:function e(t){this.props.onUpdatePolicy({data:t,policyType:this.props.policyType})}},{key:"maybeRenderCurrentPolicyText",value:function e(){var t=this.props,r=t.featureGdprExports,a=t.policyType;if(!w.a.isEmpty(this.props.pendingSettings)){var i=this.props.currentSettings,s=i.retention_type,o=i.retention_duration,l=i.is_locked;var c=0!==s&&"allow_override"!==this.props.policyType||l?s:4;var u=G({policyType:a,retentionType:c,policyDurationValue:o,featureGdprExports:r});var d=me.t("Current:");return n.a.createElement("p",null,d," ",u)}return null}},{key:"renderPolicyItem",value:function e(){var t=this.props,r=t.isFormPending,a=t.policyType,i=t.featureGdprExports;var s=B({policyType:a,featureGdprExports:i});var o=this.props.displaySettings;!w.a.isEmpty(this.props.pendingSettings)&&r&&(o=this.props.pendingSettings);var l=o,c=l.is_locked,u=l.retention_duration,d=l.retention_type;var p="allow_override"===a&&!c||0===d&&!c&&U(a)?4:d;return n.a.createElement(ve,{id:"policy_select_"+this.props.policyType,options:s,currentSelectionValue:p,currentDurationValue:u,isDeactivated:r,onUpdatePolicySelection:this.onUpdatePolicy})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_item margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy_select_"+this.props.policyType,className:"inline_block"},this.props.policyLabel),this.renderPolicyItem(),this.maybeRenderCurrentPolicyText())}}]);return t}(n.a.Component);be.displayName="PolicyItem";be.defaultProps=fe;var ge=Object(A["a"])("feature_gdpr_exports")(be);var _e=r(3244);var ye=new I["b"]("policy-retention");var Oe={orgId:l["b"].string.isRequired,hasPermission:l["b"].bool.isRequired,orgName:l["b"].string.isRequired,orgOwners:l["b"].object.isRequired,currentSettings:l["b"].object.isRequired,submitRequest:l["b"].func.isRequired,pendingData:l["b"].object,featureGdprExports:l["b"].bool.isRequired};var ke={pendingData:{}};var Ee=function(e){C()(t,e);function t(e){_()(this,t);var r=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={requestedSettings:{},mcUser:"",requester:{},modalOpen:false};r.onUpdatePolicySelect=r.onUpdatePolicySelect.bind(r);r.onUpdateRequesterSelect=r.onUpdateRequesterSelect.bind(r);r.onMcUserInput=r.onMcUserInput.bind(r);r.onSubmitRequest=r.onSubmitRequest.bind(r);r.onCancelRequest=r.onCancelRequest.bind(r);r.onCloseModal=r.onCloseModal.bind(r);r.onOpenModal=r.onOpenModal.bind(r);return r}O()(t,[{key:"onUpdatePolicySelect",value:function e(t){var r=t.policyType,a=t.data;var n=this.props.featureGdprExports;var i=this.state.requestedSettings;var s=i[r]||{};var o=this.props.currentSettings[r];var l=b()({},o,s,a);var c=void 0;var u=H({policyType:r,settingValues:l,featureGdprExports:n});c=w.a.isEqual(o,u)?w.a.omit(i,r):b()({},this.state.requestedSettings,h()({},r,l));this.setState(function(){return{requestedSettings:c}})}},{key:"onUpdateRequesterSelect",value:function e(t){this.setState(function(){return{requester:t}})}},{key:"onMcUserInput",value:function e(t){this.setState(function(){return{mcUser:t}})}},{key:"onSubmitRequest",value:function e(){var t=this;var r=this.formatSettings();this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("newRequest",r)})}},{key:"onCancelRequest",value:function e(){var t=this;var r={enterprise:this.props.orgId};this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("cancelRequest",r)})}},{key:"onCloseModal",value:function e(){this.setState(function(){return{modalOpen:false}})}},{key:"onOpenModal",value:function e(){this.setState(function(){return{modalOpen:true}})}},{key:"formatSettings",value:function e(){var t=this.props.featureGdprExports;var r=this.state,a=r.requestedSettings,n=r.mcUser,i=r.requester;var s=w.a.reduce(a,function(e,r,a){e[a]=H({policyType:a,settingValues:r,featureGdprExports:t});return e},{});return{mc_user:n,enterprise:this.props.orgId,requester:i.id,requested_settings:JSON.stringify(s)}}},{key:"isFormDataValid",value:function e(){var t=this.props.featureGdprExports;var r=this.state.requestedSettings;return w.a.every(r,function(e,r){var a=e.retention_duration,n=e.retention_type;return!(q({policyType:r,retentionType:n,featureGdprExports:t})&&(0===a||""===a))})}},{key:"isFormSubmittable",value:function e(){var t=this.state,r=t.requestedSettings,a=t.mcUser,n=t.requester;return this.isFormDataValid()&&!w.a.isEmpty(r)&&!w.a.isUndefined(a)&&!w.a.isEmpty(a)&&!w.a.isUndefined(n)&&!w.a.isEmpty(n)}},{key:"maybeRenderPendingAlert",value:function e(t,r,a){if(t)return n.a.createElement(Z,{requestTimestamp:w.a.parseInt(a),requesterName:r});return null}},{key:"maybeRenderModal",value:function e(){if(!this.state.modalOpen)return"";var t=void 0;var r=!w.a.isEmpty(this.props.pendingData);var a=this.props.pendingData,i=a.date_create,s=a.requester;if(r){var o=s.name;t=n.a.createElement(Q,{orgName:this.props.orgName,requestDate:i,requesterName:o,onConfirm:this.onCancelRequest,onCancel:this.onCloseModal,cancelRequest:true})}else{var l=this.state.requester.name;t=n.a.createElement(Q,{orgName:this.props.orgName,currentPolicies:this.props.currentSettings,requestedPolicies:this.state.requestedSettings,requesterName:l,onConfirm:this.onSubmitRequest,onCancel:this.onCloseModal})}return t}},{key:"renderPolicyItem",value:function e(t,r,a){var i=this.props.featureGdprExports;return n.a.createElement(ge,{displaySettings:w.a.get(this.state.requestedSettings,t)||w.a.get(this.props.currentSettings,t),currentSettings:a?w.a.get(this.props.currentSettings,t):{},pendingSettings:w.a.get(r,t),onUpdatePolicy:this.onUpdatePolicySelect,policyType:t,policyLabel:L({policyType:t,featureGdprExports:i}),isFormPending:a})}},{key:"renderButtons",value:function e(){var t=!w.a.isEmpty(this.props.pendingData);var r=this.isFormSubmittable();var a=void 0;a=t?n.a.createElement("div",null,n.a.createElement(T["d"],{type:"outline",className:"margin_right_75",disabled:true},ye.t("Request Submitted")),n.a.createElement(T["d"],{type:"outline",onClick:this.onOpenModal},ye.t("Cancel"))):r?n.a.createElement("div",null,n.a.createElement(T["d"],{onClick:this.onOpenModal},ye.t("Continue"))):n.a.createElement("div",null,n.a.createElement(T["d"],{type:"outline",disabled:true},ye.t("Continue")));return a}},{key:"render",value:function e(){var t=!w.a.isEmpty(this.props.pendingData)||!this.props.hasPermission;var r=this.props.pendingData,a=r.requested_settings,i=r.mc_user,s=r.requester,o=r.date_create;return n.a.createElement("div",{className:"p-org_retention_request"},this.maybeRenderModal(),n.a.createElement("div",null,this.maybeRenderPendingAlert(!w.a.isEmpty(this.props.pendingData),i,o),n.a.createElement("div",{className:"p-org_retention_request__section_header"},ye.t("Message Retention")),n.a.createElement("div",null,this.renderPolicyItem("channels",a,t)),n.a.createElement("div",null,this.renderPolicyItem("private_channels",a,t)),n.a.createElement("div",null,this.renderPolicyItem("dms",a,t)),n.a.createElement("div",null,this.renderPolicyItem("allow_override",a,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header"},ye.t("File Retention")),n.a.createElement("div",null,this.renderPolicyItem("files",a,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header margin_bottom_100"},ye.t("Authorization")),n.a.createElement("p",{className:"margin_bottom_200"},ye.t("Please include information about who is requesting this update, and your name.")),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(ae,{users:this.props.orgOwners,currentSelectionValue:w.a.get(this.state.requester,"id")||w.a.get(s,"id"),onUpdateUserSelection:this.onUpdateRequesterSelect,isFormPending:t}))),n.a.createElement(le,{currentUserValue:this.state.mcUser||i,isDisabled:t,placeholder:ye.t("Please enter your full name"),onUpdateUserInput:this.onMcUserInput}),this.renderButtons()))}}]);return t}(n.a.Component);Ee.displayName="OrgRetentionRequest";Ee.defaultProps=ke;var je=Object(A["a"])("feature_gdpr_exports")(Ee);var Ce=je;var Se=r(163);var we=function e(t,r,a,l){if(!t)throw new Error("mountOrgRetentionRequest must be called with a teamId parameter");var c=Object(o["d"])(t);var u=function n(i,s){Object(o["a"])(t,p({type:i,requestData:s})).then(function(){e(t,r,a,l)}).catch(function(e){return Object(v["e"])("Failed to submit retention request:",e)})};Object(o["a"])(t,d(a)).then(function(e){var t=e.id,a=e.has_permission,o=e.all_org_owners,d=e.current_settings,p=e.pending;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(Se["a"],null,n.a.createElement(Ce,{submitRequest:u,orgId:t,orgName:l,hasPermission:a,orgOwners:o,currentSettings:d,pendingData:p}))),r)}).catch(function(e){return Object(v["e"])("Failed to fetch retention settings:",e)})};var Ie=we;var Te=r(44);Object(Te["a"])("interop.mountOrgRetentionRequest",Ie)},,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(2414);var b=r(0);var g=r(782);var _=r(363);var y=r(205);var O=r(3);var k=r.n(O);var E=r(292);var j=r(24);var C=r(903);var S=r(61);var w=r(17);function I(e,t){return{appProfile:e,appId:Object(y["l"])(e),botId:Object(y["p"])(e),isPublished:Object(y["F"])(e),customIntegrationType:Object(y["e"])(e),dateCreated:Object(y["f"])(e),isUserRestricted:Object(w["isRestricted"])(t)||Object(w["isUltraRestricted"])(t),installedUserId:Object(y["w"])(e),commands:Object(y["d"])(e),description:Object(y["g"])(e),formattedDescription:Object(y["i"])(e),hideDescriptionExpansion:Object(y["I"])(e)}}var T=r(168);var A=r(430);var N=r(10);var P=r(58);var R=r.n(P);var M=r(16);var x=r.n(M);var D=r(2);var F=r(1757);var L=r(21);var B=r(45);var U=r(311);var q=r(28);var G=r(1451);var H=r(66);var W=r(4);var V=r(23);var K=r(35);var z=r(31);var Q=r(48);var Y=r(2221);var J=new N["b"]("app_profile");function X(e){var t=e.appId,r=e.serviceId,a=e.appHomepageUrl,i=e.supportUrl,s=e.isSlackIntegration,l=e.dispatch,c=e.currentTeamId,u=e.currentUserId,d=e.locale,p=e.currentEnterpriseId;var v=Object(B["a"])({userId:u,teamId:c,locale:d,enterpriseId:p});var m=Object(K["d"])(Object(o["c"])(c));var h={app_id:t,bot_id:r};var f=function e(){return v.track(L["l"].USER_PROFILE_CLICK,h)};var b=[{key:"app_homepage",label:J.t("App Homepage"),href:a,click:function e(){f();v.track(L["l"].APP_CLICK_APP_HOMEPAGE_IN_USER_PROFILE,{contexts:{ui_context:{step:L["A"].USER_PROFILE,action:L["w"].CLICK,ui_element:L["z"].APP_HOMEPAGE}}})},show:!!a,dataQa:"app_profile_overflow_homepage"},{key:"app_directory_page",label:J.t("View in App Directory"),href:Object(z["getTeamUrl"])(m,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_profile-click"),click:function e(){f();v.track(L["l"].APP_CLICK_LINK_APP_DIRECTORY_IN_USER_PROFILE,{contexts:{ui_context:{step:L["A"].USER_PROFILE,action:L["w"].CLICK,ui_element:L["z"].LINK_APP_DIRECTORY}}})},show:true,dataQA:"app_profile_app_directory_page"},{key:"support",label:J.t("Support for this app"),href:i||void 0,click:function e(){f();v.track(L["l"].APP_CLICK_LINK_APP_SUPPORT_IN_USER_PROFILE,{contexts:{ui_context:{step:L["A"].USER_PROFILE,action:L["w"].CLICK,ui_element:L["z"].LINK_APP_SUPPORT}}});s&&l(Object(Q["openModal"])({element:n.a.createElement(Y["a"],{trigger:"app_support_profile_button"})}))},show:true}];return b.filter(function(e){return e.show})}var Z=X;var $={isDistributed:b["b"].bool.isRequired,customIntegrationType:b["b"].string,appProfile:b["b"].object,dispatch:b["b"].func,currentTeamId:b["b"].string,currentUserId:b["b"].string,currentEnterpriseId:b["b"].string};var ee={customIntegrationType:"",appProfile:void 0,dispatch:b["b"].noop,currentTeamId:"",currentUserId:"",currentEnterpriseId:""};var te=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(F["a"])(r,["renderMenu"]);return r}d()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.dispatch,i=r.appProfile,s=r.currentTeamId,o=r.currentUserId,l=r.currentEnterpriseId;var c=Z({appId:Object(y["l"])(i),serviceId:Object(y["p"])(i),appHomepageUrl:Object(y["k"])(i),supportUrl:Object(y["q"])(i),isSlackIntegration:Object(y["G"])(i),dispatch:a,currentTeamId:s,currentUserId:o,locale:Object(N["q"])(),currentEnterpriseId:l});if(!c.length)return null;return n.a.createElement(H["a"],{template:c,stripTerminalSeparators:true,onMenuItemSelected:t.onMenuItemSelected})}},{key:"render",value:function e(){if(this.props.isDistributed&&!this.props.customIntegrationType)return n.a.createElement(H["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(q["d"],{"data-qa":"app_header_overflow_menu_button",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",icon:"chevron-large-down",size:"large"}));return null}}]);return t}(a["Component"]);te.displayName="AppProfileOverflowMenuButton";te.defaultProps=ee;var re=function e(t,r){var a=r.appProfile;return{isDistributed:Object(y["D"])(a),customIntegrationType:Object(y["e"])(a),currentTeamId:Object(V["b"])(t),currentUserId:Object(W["getCurrentUserId"])(t),currentEnterpriseId:Object(W["pageNeedsEnterprise"])(t)?Object(K["h"])(t).id:void 0}};var ae=Object(i["connect"])(re)(te);var ne=r(3128);var ie=new N["b"]("app_card");var se={isAvatarEmoji:b["b"].bool,isExternal:b["b"].bool.isRequired,isUserRestricted:b["b"].bool.isRequired,appProfile:b["b"].object,color:b["b"].string,name:b["b"].string,tagline:b["b"].string,settingsUrl:b["b"].string,avatarUrl:b["b"].string.isRequired,clogger:b["b"].object,externalTeam:b["b"].object};var oe={appProfile:void 0,color:"",name:"",tagline:"",settingsUrl:"",clogger:{track:D["noop"]},externalTeam:void 0,isAvatarEmoji:false};var le=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(F["a"])(r,["calculateStyle","renderSettingsButton","onSettingsButtonClick"]);return r}d()(t,[{key:"onSettingsButtonClick",value:function e(){this.props.clogger.track(L["l"].APP_CLICK_LINK_APP_SETTINGS_IN_USER_PROFILE,{contexts:{ui_context:{step:L["A"].USER_PROFILE,action:L["w"].CLICK,ui_element:L["z"].LINK_APP_SETTINGS}}})}},{key:"calculateStyle",value:function e(){var t=this.props.color;var r=Object(U["f"])(t);if(r&&t){var a=R()(r,3),n=a[0],i=a[1],s=a[2];return{background:"linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, "+t+" 0%, rgba("+n+","+i+","+s+",0.75) 100%)",backgroundColor:t}}return}},{key:"renderSettingsButton",value:function e(){var t=this.props,r=t.isExternal,a=t.isUserRestricted,i=t.settingsUrl;if(!r&&!a&&i)return n.a.createElement(q["d"],{"data-qa":"app_header_settings_button",href:i+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_profile-click",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",onClick:this.onSettingsButtonClick},ie.t("Settings"));return null}},{key:"render",value:function e(){var t=this.props,r=t.avatarUrl,a=t.isAvatarEmoji,i=t.color,s=t.isExternal,o=t.name,l=t.tagline,c=t.appProfile,u=t.externalTeam;return n.a.createElement("div",{className:x()({"p-app_profile_flexpane_header":!s,"p-app_profile_flexpane_header--external":s}),style:this.calculateStyle(i)},!!s&&n.a.createElement(G["a"],{externalTeam:u}),n.a.createElement("img",{className:x()("p-app_profile_flexpane_header__icon rounded",{"p-app_profile_flexpane_header__icon--emoji":a}),alt:"app avatar","data-qa":"app_header_icon",src:r}),n.a.createElement("div",{className:"p-app_profile_flexpane_header__text"},n.a.createElement("div",{className:"p-app_profile_flexpane_header__row"},n.a.createElement("span",{className:"p-app_profile_flexpane_header__app_name","data-qa":"app_header_name"},o),n.a.createElement("div",null,n.a.createElement("span",{className:"p-app_profile_flexpane_header__app_label rounded","data-qa":"app_header_app_label"},ie.t("APP")))),!!l&&n.a.createElement("div",{className:"p-app_profile_flexpane_header__tagline overflow_hidden","data-qa":"app_header_tagline"},l),n.a.createElement("div",{className:"p-app_profile_flexpane_header__button_container"},this.renderSettingsButton(),n.a.createElement(ae,{appProfile:c}))))}}]);return t}(a["Component"]);le.displayName="AppProfileHeader";le.defaultProps=oe;var ce=function e(t,r){var a=r.appProfile;var n=Object(y["h"])(a);var i=Object(y["b"])(t,a);return{clogger:Object(B["a"])({state:t}),avatarUrl:i,isAvatarEmoji:!!n,customIntegrationType:Object(y["e"])(a),color:Object(y["c"])(a),tagline:Object(y["r"])(a),isExternal:Object(y["E"])(t,a),isDistributed:Object(y["D"])(a),isUserRestricted:Object(w["isRestricted"])(self)||Object(w["isUltraRestricted"])(self),settingsUrl:Object(y["z"])(t,a),name:Object(y["n"])(a),externalTeam:Object(y["v"])(t,a)}};var ue=Object(i["connect"])(ce)(le);var de=r(95);var pe=r(22);var ve=r(3130);var me=r(1789);var he=new N["b"]("app_profile");var fe={formattedDescription:b["b"].string,hideExpandButton:b["b"].bool};var be={formattedDescription:"",hideExpandButton:false};function ge(e){var t=e.formattedDescription,r=e.hideExpandButton;var i=Object(a["useState"])(false),s=R()(i,2),o=s[0],l=s[1];if(!t)return null;return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_how_to_use"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},he.t("How to use this app")),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},n.a.createElement("div",{className:x()("p-app_profile_flexpane__description",{"p-app_profile_flexpane__description--collapse":!r&&!o})},n.a.createElement(me["a"],{formattedDescription:t}),!r&&n.a.createElement(a["Fragment"],null,!o&&n.a.createElement("div",{className:"p-app_profile_flexpane__description__fade"}),n.a.createElement(q["c"],{className:x()("p-app_profile_flexpane__description__button",{"p-app_profile_flexpane__description__button--expand":!o,"p-app_profile_flexpane__description__button--collapse":o}),onClick:function e(){l(!o)}},o?he.t("Collapse"):he.t("Expand"),n.a.createElement(pe["b"],{type:o?"arrow-up-medium":"arrow-down-medium"}))))))}ge.displayName="AppProfileDescription";ge.defaultProps=be;var _e=Object(de["pure"])(ge);var ye=r(710);var Oe={appId:b["b"].string.isRequired,command:b["b"].shape({name:b["b"].string,usage:b["b"].string,description:b["b"].string}).isRequired,autoFillSlashCommand:b["b"].func,clogger:b["b"].object.isRequired};var ke={autoFillSlashCommand:D["noop"]};var Ee=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"autoFillSlashCommand",value:function e(t){this.props.autoFillSlashCommand({commandName:t});var r=this.props,a=r.appId,n=r.clogger;n.track(L["l"].APP_PROFILE_SLASH_COMMAND_CLICK,{app_id:a,contexts:{core:{app_id:a}}})}},{key:"render",value:function e(){var t=this;var r=this.props.command,a=r.name,i=r.usage,s=r.description;return n.a.createElement(q["c"],{type:"outline","data-qa":a,onClick:function e(){return t.autoFillSlashCommand(a)},className:"p-app_profile_flexpane__slash_command"},n.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__title overflow_ellipsis"},n.a.createElement("span",{className:"bold"},a)," ",n.a.createElement("span",null,i)),n.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__description overflow_ellipsis"},s))}}]);return t}(a["PureComponent"]);Ee.displayName="AppProfileSlashCommandItem";Ee.defaultProps=ke;var je=function e(t){return{clogger:Object(B["a"])({state:t})}};var Ce=function e(t){return Object(E["bindActionCreators"])({autoFillSlashCommand:ye["a"]},t)};var Se=Object(i["connect"])(je,Ce)(Ee);var we=new N["b"]("app_profile");var Ie={isPublished:b["b"].bool,installedUserId:b["b"].string,appProfile:b["b"].object,appId:b["b"].string,botId:b["b"].string,customIntegrationType:b["b"].string,isUserRestricted:b["b"].bool,dateCreated:b["b"].number,commands:b["b"].arrayOf(b["b"].object),formattedDescription:b["b"].string,hideDescriptionExpansion:b["b"].bool,showSettingsSection:b["b"].bool};var Te={isPublished:false,installedUserId:"",appProfile:void 0,appId:"",botId:"",customIntegrationType:"",isUserRestricted:false,dateCreated:void 0,commands:[],formattedDescription:"",hideDescriptionExpansion:false,showSettingsSection:false};var Ae=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getSectionHeaderText",value:function e(){var t=this.props.customIntegrationType;switch(t){case"incoming-webhook":return we.t("About this Incoming Webhook");case"outgoing-webhook":return we.t("About this Outgoing Webhook");case"bot":return we.t("How to use this Bot");case"slash-commands":return we.t("How to use this Slash Command");default:return null}}},{key:"getSectionText",value:function e(){var t=this.props.customIntegrationType;switch(t){case"outgoing-webhook":return null;case"bot":return we.t("You can message bots and invite them to channels like other members.");case"slash-commands":return we.t("Slash commands take actions when you post them in a conversation.");default:return null}}},{key:"renderAboutSection",value:function e(){var t=this.props,r=t.customIntegrationType,a=t.dateCreated,i=t.isUserRestricted,s=t.installedUserId;if(r){var o=n.a.createElement(A["a"],{id:s,onClick:function e(t){t.preventDefault();Object(T["i"])(s)}});return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_about"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},this.getSectionHeaderText(r)),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},this.getSectionText(r)," ",!i&&we.rt("Created by {custom_integration_creator} on {date_created, date, long}.",{custom_integration_creator:o,date_created:1e3*a})))}return null}},{key:"renderSettingsSection",value:function e(){var t=this.props,r=t.appProfile,a=t.customIntegrationType,i=t.showSettingsSection;var s=Object(y["m"])(r);var o=Object(y["a"])(r);var l=o&&o.length>0;var c=s>0;if(i&&(l||c)){var u=a?we.t("This bot is in {bot_user_channel_count, plural, =1 {# channel} other {# channels} }.",{bot_user_channel_count:s}):we.t("This app is in {bot_user_channel_count, plural, =1 {# channel} other {# channels} }.",{bot_user_channel_count:s});return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_settings"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},we.t("Settings")),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},!!l&&n.a.createElement("div",{className:"bottom_margin"},we.t("{name} can:",{name:Object(y["n"])(r),__react:true}),n.a.createElement("ul",null,o.map(function(e){return n.a.createElement("li",{key:e},e)}))),!!c&&n.a.createElement("div",null,u)))}return null}},{key:"renderCommandsSection",value:function e(){var t=this.props,r=t.appId,a=t.commands;if(a&&a.length)return n.a.createElement("section",{"data-qa":"app_profile_commands",className:"p-app_profile_flexpane__section"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},we.t("Responds to\u2026",{note:"Refers to slash commands the app responds to."})),a.map(function(e){return n.a.createElement(Se,{key:e.name,command:e,appId:r})}));return null}},{key:"renderMetaSection",value:function e(){if(!this.props.isPublished)return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_meta"},n.a.createElement("p",null,n.a.createElement("i",{className:"sk_dark_grey"},we.t("This app has not been reviewed by Slack."))));return null}},{key:"render",value:function e(){var t=this.props,r=t.appProfile,a=t.appId,i=t.botId,s=t.formattedDescription,o=t.hideDescriptionExpansion;if(!r||Object(S["e"])(r))return null;return n.a.createElement("div",{className:"p-app_profile_flexpane__container","data-qa":"app_profile_container","data-app_id":a,"data-bot_id":i},n.a.createElement(ue,{appProfile:r}),n.a.createElement("div",{className:"sk_black large_bottom_margin"},this.renderAboutSection(),n.a.createElement(_e,{formattedDescription:s,hideExpandButton:o}),this.renderCommandsSection(),this.renderSettingsSection(),this.renderMetaSection()))}}]);return t}(a["Component"]);Ae.displayName="BaseAppProfile";Ae.defaultProps=Te;var Ne=function e(t,r){var a=r.serviceId;var n=Object(_["getAppProfileByIds"])(t,{serviceId:a,showAuthSummary:true});return k()({},I(n,Object(j["b"])(t)),{showSettingsSection:Object(y["A"])(t,n)})};var Pe=Object(i["connect"])(Ne)(Ae);var Re={appId:b["b"].string,currentMember:b["b"].object.isRequired,fetchLegacyAppProfile:b["b"].func};var Me={appId:"",fetchLegacyAppProfile:void 0};var xe=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={appProfile:void 0};r.getAppProfileProps=r.getAppProfileProps.bind(r);return r}d()(t,[{key:"componentDidMount",value:function e(){this.props.appId&&this.fetchAppProfile()}},{key:"componentDidUpdate",value:function e(t){this.props.appId!==t.appId&&this.fetchAppProfile()}},{key:"getAppProfileProps",value:function e(){var t=this.state.appProfile;var r=this.props.currentMember;return k()({},I(t,r),{showSettingsSection:false})}},{key:"fetchAppProfile",value:function e(){var t=this;this.props.fetchLegacyAppProfile({appId:this.props.appId}).then(function(e){t.setState(function(){return{appProfile:Object(ye["c"])(null,e)}})})}},{key:"render",value:function e(){return n.a.createElement(Ae,this.getAppProfileProps())}}]);return t}(a["Component"]);xe.displayName="GenericAppProfile";xe.defaultProps=Me;var De=function e(t){return{currentMember:Object(j["b"])(t)}};var Fe=function e(t){return Object(E["bindActionCreators"])({fetchLegacyAppProfile:C["b"]},t)};var Le=Object(i["connect"])(De,Fe)(xe);var Be=r(38);var Ue=r(921);var qe=r(3136);var Ge=new N["b"]("app_profile");var He={serviceId:b["b"].string,appId:b["b"].string,customIntegrationType:b["b"].string};var We={serviceId:void 0,appId:void 0,customIntegrationType:""};var Ve=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this;var r={"incoming-webhook":Ge.t("About this Incoming Webhook"),"outgoing-webhook":Ge.t("About this Outgoing Webhook"),bot:Ge.t("About this Bot"),"slash-commands":Ge.t("About this Slash Command")};var a=Ge.t("About this app");var i=r[this.props.customIntegrationType]||a;return n.a.createElement(Ue["a"],{className:"p-app_profile_flexpane",dataQa:"app_profile_pane",title:i,viewId:"app-profile-flepane",kbNavOrder:Object(Be["a"])()?void 0:4.7,renderBody:function e(){return n.a.createElement(f["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(g["b"],{width:r,height:a,fade:true},t.props.serviceId?n.a.createElement(Pe,{serviceId:t.props.serviceId}):n.a.createElement(Le,{appId:t.props.appId}))})}})}}]);return t}(a["PureComponent"]);Ve.displayName="AppProfilePane";Ve.defaultProps=We;var Ke=function e(t,r){var a=r.serviceId;var n=a?Object(_["getAppProfileByIds"])(t,{serviceId:a}):void 0;return{customIntegrationType:Object(y["e"])(n)}};var ze=Object(i["connect"])(Ke)(Ve);var Qe=ze;var Ye=r(163);var Je=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("mountAppProfileFlexpane must be called with a teamId parameter");var l=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(Ye["a"],null,n.a.createElement(Qe,a))),r)};var Xe=Je;var Ze=r(44);Object(Ze["a"])("interop.mountAppProfileFlexpane",Xe)},,function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(125);function n(e){if(!e)return;var t=Object(a["a"])(e);var r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r.getTime().toString()}},function(e,t,r){"use strict";r.r(t);var a=r(1446);var n=r(44);Object(n["a"])("interop.openAppsBrowserModal",function(){return TS.redux.dispatch(a["a"].apply(void 0,arguments))})},function(e,t,r){"use strict";var a=r(2);var n=r.n(a);var i=r(12);var s=false;var o=function e(t){if(!t)return;var r="";var a=t.srcElement||t.target;var n=i["b"]&&Object(i["b"])();if(a&&a.nodeName)if("SCRIPT"===a.nodeName){var s=a.src;var o=t.type||"error";r="["+o+"] from script at "+s+" (failed to load?)"}else if("IMG"===a.nodeName){var c=a.src||a.currentSrc||"unknown";n.warn("<img> fired error with url = "+c);return}t.error&&t.error.stack&&(r+=" "+t.error.stack);if(t.filename){var u=t.filename;var d=t.lineno;var p=t.colno;r+=" from "+u;d&&(r+=" @ line "+d+", col "+p)}var v=void 0;v=t.error&&t.error.stack?r:(t.message||"")+" "+r;v&&v.replace&&(v=v.replace(/\s+/g," ").trim());if(!v||!v.length)if(a){var m=a.nodeName||"unknown";v="error event from node of "+m+", no message provided?"}else v="error event fired, no relevant message or node found";v="\ud83d\udc1e "+v;var h="js_runtime_error";l({error:t.error||t,msg:v,subtype:h})};function l(e){var t=e.error,r=e.msg,a=e.subtype;var n={subtype:a};Object(i["b"])().error(t,r,n)}var c=function e(){if(s)return;var t=true;var r=Object(a["throttle"])(o,1e4);window.addEventListener("error",r,t);s=true};t["a"]=c;var u={globalErrorHandler:o};Object.defineProperty(u,"logError",{get:function e(){return l},set:function e(t){l=t}});Object.defineProperty(u,"hasRegisteredGlobalErrorHandler",{get:function e(){return s},set:function e(t){s=t}})},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(0);var c=r(2);var u=r(363);var d=r(73);var p=r(61);var v=r(1790);var m=r(284);var h=r(1332);var f=r(205);var b=r(45);var g=r(28);var _=r(10);var y=r(310);var O={appProfile:l["b"].object};var k={appProfile:void 0};function E(e){var t=e.appProfile;if(!t)return null;var r=Object(y["a"])(t.profile,512);return n.a.createElement("div",{className:"p-app_space_profile__side__avatar"},n.a.createElement("img",{className:"rounded",src:r,alt:"app avatar","data-qa":"app_profile_avatar"}))}E.displayName="AppSpaceProfileSideAvatar";E.defaultProps=k;var j=E;var C=r(6);var S=r.n(C);var w=r(7);var I=r.n(w);var T=r(8);var A=r.n(T);var N=r(9);var P=r.n(N);var R=r(21);var M=r(1301);var x=new _["b"]("app_space");var D={showSettingsUrl:l["b"].bool.isRequired,settingsUrl:l["b"].string,homepageUrl:l["b"].string,openAppManagementModal:l["b"].func,appProfile:l["b"].object,clogger:l["b"].object};var F={settingsUrl:void 0,homepageUrl:void 0,openAppManagementModal:c["noop"],appProfile:void 0,clogger:{track:c["noop"]}};var L=function(e){P()(t,e);function t(e){S()(this,t);var r=A()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSettingsButtonClick=r.onSettingsButtonClick.bind(r);r.onWebsiteButtonClick=r.onWebsiteButtonClick.bind(r);return r}I()(t,[{key:"onWebsiteButtonClick",value:function e(){this.props.clogger.track(R["l"].APP_CLICK_LINK_APP_HOMEPAGE_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:R["A"].APP_SPACE_ABOUT_TAB,action:R["w"].CLICK,ui_element:R["z"].LINK_APP_HOMEPAGE}}})}},{key:"onSettingsButtonClick",value:function e(t){var r=this.props.appProfile;this.props.clogger.track(R["l"].APP_CLICK_LINK_APP_SETTINGS_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:R["A"].APP_SPACE_ABOUT_TAB,action:R["w"].CLICK,ui_element:R["z"].LINK_APP_SETTINGS}}});if(Object(f["H"])(r)){t.preventDefault();this.props.openAppManagementModal({serviceId:Object(f["p"])(r),referringEventId:"APP_SPACE_ABOUT_OPEN"})}}},{key:"renderSettingsButton",value:function e(){var t=this.props,r=t.showSettingsUrl,a=t.settingsUrl,i=t.appProfile;var s=x.t("Settings",{fallbackHash:"c7f73bb54d928922c3838bb789ee9fb8a5b1eb37",fallbackHashNs:"app_profile"});if(r)return n.a.createElement(g["d"],{type:"outline",size:"medium",href:Object(f["H"])(i)?void 0:a,"data-qa":"app_profile_settings_link",onClick:this.onSettingsButtonClick,className:"p-app_space_profile__side_link",title:s},s);return null}},{key:"renderWebsiteUrl",value:function e(){var t=this.props.homepageUrl;var r=x.t("App Homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f",fallbackHashNs:"app_profile"});if(t)return n.a.createElement(g["d"],{type:"outline",size:"medium",href:t,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:r,onClick:this.onWebsiteButtonClick},r);return null}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-app_space_profile__side__links"},this.renderSettingsButton(),this.renderWebsiteUrl())}}]);return t}(a["PureComponent"]);L.displayName="BaseAppSpaceProfileSideLinks";L.defaultProps=F;var B=function e(t,r){var a=r.appProfile;return{clogger:Object(b["a"])({state:t}),showSettingsUrl:Object(f["A"])(t,a),settingsUrl:Object(f["z"])(t,a),homepageUrl:Object(f["k"])(a)}};var U={openAppManagementModal:M["a"]};var q=Object(i["connect"])(B,U)(L);var G=r(58);var H=r.n(G);var W=r(95);var V=r(795);var K=r(51);var z=r(1789);var Q=r(1168);var Y=r(23);var J=new _["b"]("app_space");var X={appProfile:l["b"].object,truncatedDescription:l["b"].string,formattedDescription:l["b"].string};var Z={appProfile:void 0,truncatedDescription:"",formattedDescription:""};function $(e){var t=e.appProfile,r=e.formattedDescription,i=e.truncatedDescription;var s=Object(a["useState"])(false),o=H()(s,2),l=o[0],c=o[1];if(!t||!r)return null;var u=Object(f["I"])(t);var d=n.a.createElement(z["a"],{formattedDescription:r});return n.a.createElement("section",null,n.a.createElement("div",{className:"p-app_space_profile__description","data-qa":"app_profile_desc"},u?d:n.a.createElement(a["Fragment"],null,n.a.createElement("span",{className:"p-app_space_profile__description__collapsed"},l?d:n.a.createElement(V["a"],{emoji:true,text:i}))," ",n.a.createElement(K["a"],{onClick:function e(){return c(!l)},"data-qa":"toggle-app-description-expansion"},l?J.t("Show less"):J.t("Read more")))))}$.displayName="AppSpaceProfileDescription";$.defaultProps=Z;var ee=function e(t,r){var a=r.appProfile;return{truncatedDescription:Object(Q["a"])(t,{messageText:Object(f["s"])(a),teamId:Object(Y["b"])(t)}),formattedDescription:Object(f["i"])(a)}};var te=Object(i["connect"])(ee)(Object(W["pure"])($));var re=r(1452);var ae=r(4);var ne=r(4399);var ie=new _["b"]("app_space");var se={isWorkflowApp:l["b"].bool,isPublished:l["b"].bool,isDistributed:l["b"].bool,appType:l["b"].string,installedUserId:l["b"].string,installerIsYou:l["b"].bool,appName:l["b"].string,appHomeTeamDisplayName:l["b"].string,featureAddAppHomeTeamName:l["b"].bool};var oe={isWorkflowApp:false,isPublished:false,isDistributed:false,appType:"",installedUserId:"",installerIsYou:false,appName:"",appHomeTeamDisplayName:"",featureAddAppHomeTeamName:false};function le(e){var t=e.isWorkflowApp,r=e.isPublished,i=e.isDistributed,s=e.appType,o=e.installedUserId,l=e.installerIsYou,c=e.appName,u=e.appHomeTeamDisplayName,d=e.featureAddAppHomeTeamName;if(!r)return n.a.createElement("section",null,n.a.createElement("div",{className:"p-app_space_profile__disclaimer","data-qa":"app_space_profile_disclaimer"},i?n.a.createElement(a["Fragment"],null,ie.t("This app has not been reviewed or approved by Slack.")," ",n.a.createElement(K["a"],{href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team"},ie.t("Learn more")),"."):n.a.createElement(re["a"],{isWorkflowApp:t,isError:false,appType:s,memberId:o,installerIsYou:l,appName:c,appHomeTeamDisplayName:u,featureAddAppHomeTeamName:d})));return null}le.defaultProps=oe;function ce(e,t){var r=t.appProfile;return{isPublished:Object(f["F"])(r),isDistributed:Object(f["D"])(r),isWorkflowApp:Object(ne["b"])(r),appType:Object(f["t"])(r),installedUserId:Object(f["w"])(r),installerIsYou:Object(f["x"])(e,r),appName:Object(f["n"])(r),appHomeTeamDisplayName:Object(f["j"])(e,r),featureAddAppHomeTeamName:Object(ae["isFeatureEnabled"])(e,"feature_add_app_home_team_name")}}var ue=Object(i["connect"])(ce)(le);var de=new _["b"]("app_space");var pe={appProfile:l["b"].object.isRequired,appName:l["b"].string,isCustomIntegration:l["b"].bool,manageUrl:l["b"].string};var ve={appName:"",isCustomIntegration:false,manageUrl:""};function me(e){var t=e.appProfile,r=e.appName,a=e.isCustomIntegration,i=e.manageUrl;return n.a.createElement("div",{className:"p-app_space_profile__info"},n.a.createElement("div",{className:"p-app_space_profile__side"},n.a.createElement(j,{appProfile:t}),n.a.createElement(q,{appProfile:t})),n.a.createElement("div",{className:"p-app_space_profile__about"},!!r&&n.a.createElement("h2",{className:"p-app_space__header","data-qa":"app_profile_name"},r),n.a.createElement(te,{appProfile:t}),n.a.createElement(ue,{appProfile:t}),a&&n.a.createElement(g["d"],{type:"outline",href:i},de.t("Manage",{note:"Manage permissions"}))))}me.displayName="AppSpaceProfileInfo";me.defaultProps=ve;var he=function e(t,r){var a=r.appProfile;return{appName:Object(f["n"])(a),isCustomIntegration:Object(f["C"])(a),manageUrl:Object(f["y"])(t,a)}};var fe=Object(i["connect"])(he)(me);var be=r(1329);var ge=r(168);var _e=r(22);var ye=new _["b"]("app_space");var Oe={appName:l["b"].string,appIcon:l["b"].string,appScreenshots:l["b"].array,youtubeUrl:l["b"].string,featureReactFileViewer:l["b"].bool,openFileViewer:l["b"].func};var ke={appName:"",appIcon:"",appScreenshots:[],youtubeUrl:"",featureReactFileViewer:false,openFileViewer:c["noop"]};var Ee=function(e){P()(t,e);function t(e){S()(this,t);var r=A()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleYoutubeClick=r.handleYoutubeClick.bind(r);r.handleImageClick=r.handleImageClick.bind(r);return r}I()(t,[{key:"handleYoutubeClick",value:function e(){var t=this.props,r=t.appName,a=t.appScreenshots,n=t.appIcon,i=t.youtubeUrl,s=t.featureReactFileViewer;if(s)this.props.openFileViewer({title:r,youtube:{src:i}});else{var o=Object(f["B"])(i);Object(ge["g"])({youtubeId:o,screenshots:a,appName:r,appIcon:n},0)}}},{key:"handleImageClick",value:function e(t){var r=this.props,a=r.appName,n=r.appScreenshots,i=r.appIcon,s=r.youtubeUrl,o=r.featureReactFileViewer;if(o)this.props.openFileViewer({title:a,image:{src:n[t].image_1600,altText:a,thumbnailUrl:n[t].image_440,height:400,width:600}});else{var l=Object(f["B"])(s);var c=s?t+1:t;Object(ge["g"])({youtubeId:l,screenshots:n,appName:a,appIcon:i},c)}}},{key:"generateThumbnailUrl",value:function e(t){var r=Object(f["B"])(t);if(""===r)return false;return"https://i.ytimg.com/vi/"+r+"/hqdefault.jpg"}},{key:"renderYoutubeVideo",value:function e(){var t=this.props,r=t.youtubeUrl,a=t.appName;if(!r)return null;var i=this.generateThumbnailUrl(r);if(!i)return null;var s=ye.t("Video of {appName}",{note:"Alt text for a screenreader to play a video about an app",appName:a});return n.a.createElement(g["c"],{onClick:this.handleYoutubeClick,className:"p-app_space_profile__screenshots_item"},n.a.createElement("img",{src:i,alt:s,className:"p-app_space_profile__youtube_thumbnail"}),n.a.createElement("div",{className:"p-app_space_profile__youtube_play_button"},n.a.createElement(_e["b"],{type:"play",size:"inherit"})))}},{key:"renderScreenshots",value:function e(){var t=this;var r=this.props,a=r.appScreenshots,i=r.appName;if(!a||!a.length)return null;var s=ye.t("Screenshot of {appName}",{note:"Alt text for screenshots of an app in the full screen modal.",appName:i});return a.map(function(e,r){return n.a.createElement(g["c"],{key:e.id,onClick:function e(){return t.handleImageClick(r)},className:"p-app_space_profile__screenshots_item"},n.a.createElement("img",{src:e.image_440,alt:s}))})}},{key:"render",value:function e(){var t=this.props,r=t.youtubeUrl,a=t.appScreenshots;if((!a||!a.length)&&(!r||""===r))return null;return n.a.createElement("div",{className:"p-app_space__screenshots"},n.a.createElement("h3",{className:"p-app_space__subheader"},ye.t("Screenshots",{note:"Heading for screenshots of an app in the app profile."})),n.a.createElement("div",{className:"p-app_space_profile__screenshots","data-qa":"app_profile_screenshots"},this.renderYoutubeVideo(),this.renderScreenshots()))}}]);return t}(a["PureComponent"]);Ee.displayName="AppSpaceScreenshots";Ee.defaultProps=ke;Ee.displayName="AppSpaceScreenshots";var je=Ee;function Ce(e,t){var r=t.appProfile;return{youtubeUrl:Object(f["u"])(r),appScreenshots:Object(f["o"])(r),appName:Object(f["n"])(r),appIcon:Object(y["a"])(r.profile,512),featureReactFileViewer:Object(ae["isFeatureEnabled"])(e,"feature_react_file_viewer")}}var Se=function e(t){return{openFileViewer:function e(r){return t(Object(be["a"])(r))}}};var we=Object(i["connect"])(Ce,Se)(je);var Ie=r(399);var Te=r(710);var Ae=new _["b"]("app_space");var Ne={autoFillSlashCommand:l["b"].func,clogger:l["b"].object,command:l["b"].shape({name:l["b"].string.isRequired,usage:l["b"].string.isRequired,description:l["b"].string.isRequired}).isRequired,appId:l["b"].string,botId:l["b"].string};var Pe={autoFillSlashCommand:c["noop"],clogger:{track:c["noop"]},appId:"",botId:""};function Re(e){var t=e.autoFillSlashCommand,r=e.clogger,i=e.appId,s=e.botId,o=e.command;var l=Object(Ie["g"])(o);var c=Object(Ie["i"])(o);var u=Object(Ie["e"])(o);var d=Object(a["useCallback"])(function(){t({commandName:l});r.track(R["l"].APP_SPACE_ABOUT_SLASH_COMMAND_CLICK,{app_id:i,bot_id:s,contexts:{core:{app_id:i,bot_id:s}}})},[t,l,r,i,s]);return n.a.createElement("div",{className:"p-app_space_profile__slash_command","data-qa":"app_space_profile_slash_command"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("strong",null,l),n.a.createElement("span",null,c)),n.a.createElement("div",{className:"p-app_space_profile__slash_command_desc"},u)),n.a.createElement("div",null,n.a.createElement(g["d"],{type:"outline","data-qa":l,onClick:d},Ae.t("Start command"))))}Re.displayName="AppSpaceSlashCommand";Re.defaultProps=Pe;var Me=function e(t){return{clogger:Object(b["a"])({state:t})}};var xe={autoFillSlashCommand:function e(){return Te["a"].apply(void 0,arguments)}};var De=Object(i["connect"])(Me,xe)(Re);var Fe=new _["b"]("app_space");var Le={appProfile:l["b"].object.isRequired};function Be(e){var t=e.appProfile;var r=Object(f["d"])(t);var i=Object(f["l"])(t);var s=Object(f["p"])(t);if(!r||!r.length)return null;return n.a.createElement(a["Fragment"],null,n.a.createElement("h3",{className:"p-app_space__subheader"},n.a.createElement("span",null,Fe.t("Commands",{note:"Slash commands the app responds to"})),n.a.createElement("span",{className:"p-app_space__subheader__helper"},Fe.t("Use / to start commands in any conversation",{note:"How to use slash commands helper text"}))),n.a.createElement("div",{className:"p-app_space_profile__slash_commands"},n.a.createElement("section",null,r.map(function(e){return n.a.createElement(De,{key:e.name,command:e,appId:i,botId:s})}))))}Be.displayName="AppSpaceSlashCommands";var Ue=n.a.memo(Be);var qe=r(3138);var Ge={appProfile:l["b"].object,clogger:l["b"].object};var He={appProfile:void 0,clogger:{track:c["noop"]}};function We(e){var t=e.clogger,r=e.appProfile;var i=Object(f["l"])(r);var s=Object(f["p"])(r);var o=Object(a["useCallback"])(function(){t.track("APP_SPACE_ABOUT_OPEN",{app_id:i,bot_id:s,contexts:{core:{app_id:i,bot_id:s}}})},[t,i,s]);var l=Object(a["useCallback"])(function(){return Object(h["b"])(r,s)},[r,s]);Object(a["useEffect"])(function(){if(i&&s){l();o()}},[i,s,o,l]);if(!r||Object(p["e"])(r))return null;return n.a.createElement("div",{className:"p-app_space_profile","data-qa":"app_space_profile"},n.a.createElement(fe,{appProfile:r}),n.a.createElement(we,{appProfile:r}),n.a.createElement(Ue,{appProfile:r}))}We.displayName="BaseAppSpace";We.defaultProps=He;var Ve=function e(t){var r=Object(d["a"])(t);var a=Object(v["a"])(t,r);if(!a||!Object(m["n"])(t))return{};return{appProfile:Object(u["getAppProfileByChannelId"])(t,r),clogger:Object(b["a"])({state:t})}};var Ke=Object(i["connect"])(Ve)(We);var ze=r(163);var Qe=function e(t,r){if(!t)throw new Error("mountAppSpace must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(ze["a"],null,n.a.createElement(Ke,null))),r)};var Ye=Qe;var Je=r(44);Object(Je["a"])("interop.mountAppSpace",Ye)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(2);var y=r(10);var O=r(159);var k=r(392);var E=r(28);var j=r(50);var C=r(22);var S=r(16);var w=r.n(S);var I={headerAction:g["b"].node};var T={headerAction:null};var A=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.headerAction)}}]);return t}(a["PureComponent"]);A.displayName="OrgDashboardHeaderItem";A.defaultProps=T;var N=A;var P={title:g["b"].node.isRequired,headerActions:g["b"].array,headerClassName:g["b"].string};var R={headerActions:[],headerClassName:""};var M=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var r=Object(_["map"])(t,function(e,t){return n.a.createElement(N,{key:t,headerAction:e})});return r}},{key:"render",value:function e(){var t=this.props.headerClassName;var r=w()("margin_left_75","display_flex","justify_content_between",""+t);return n.a.createElement("div",{className:r},n.a.createElement("h1",null,this.props.title),n.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(a["PureComponent"]);M.displayName="OrgDashboardHeader";M.defaultProps=R;var x=M;var D=x;var F=r(3080);var L=new y["b"]("enterprise_dashboard");var B={pageHeader:g["b"].string};var U={pageHeader:""};var q=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var r=L.t("No apps have been installed on this workspace.");return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200 full_height full_width position_relative"},n.a.createElement(D,{title:this.props.pageHeader,headerClassName:"margin_bottom_150"}),n.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_absolute p-team_apps_empty_content"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r)))}}]);return t}(a["PureComponent"]);q.displayName="TeamAppsEmptyState";q.defaultProps=U;var G=q;var H=r(128);var W=r(920);var V=r(138);var K=new y["b"]("enterprise_dashboard");var z={teamApps:g["b"].array,teamId:g["b"].string.isRequired,teamAppsApiCursor:g["b"].string,teamAppsApiTotal:g["b"].number,teamAppsLoading:g["b"].bool,headerItemOnClick:g["b"].func,pageSize:g["b"].number,sortBy:g["b"].string,sortDir:g["b"].string,searchQuery:g["b"].string,rowHeaderItemClassName:g["b"].string,rowClassName:g["b"].string,featureWtaOrgLevelApps:g["b"].bool};var Q={teamApps:[],headerItemOnClick:_["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsLoading:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureWtaOrgLevelApps:false};var Y="asc";var J="desc";var X="caret_down";var Z="caret_up";var $={};$[Y]=X;$[J]=Z;var ee=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.featureWtaOrgLevelApps,s=a.sortBy,o=a.sortDir;r.state={rowListItems:[],sortBy:s,sortDir:o,offset:0};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.appSources={internal:K.t("Internal"),"app directory":K.t("App Directory"),unknown:K.t("Unknown")};r.sourceTooltipStrings={"app directory":K.t("This app has been installed from the Slack App Directory."),internal:K.t("This app was created by someone within your organization."),unknown:K.t("This app was installed from an unknown external source.")};r.rowTemplate={items:[{value:function e(t){var a=t&&t.icons&&t.icons.image_72;return n.a.createElement(H["a"],{className:"p-app_management_table_view_app_name",onClick:function e(){return r.onAppNameClick(t.id)}},a&&n.a.createElement("img",{src:a,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var r=t.installed_by&&t.installed_by.count;return K.t("{installCount, plural, =1 {# member} other {# members}}",{installCount:r})}},{value:function e(t){var r=t.installed_by&&t.installed_by.first_installation&&t.installed_by.first_installation.date;var a=new Date(1e3*r).toLocaleDateString();return""+a}},{value:function e(t){var a=r.sourceTooltipStrings[t.source];var i=r.appSources[t.source]||r.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(j["c"],{tip:a,position:"top"},n.a.createElement("span",null,i)))}}]};r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=K.rt("No apps were found matching <b>{query}</b>",{query:r});return n.a.createElement("div",{className:"align_center"},a)}}]};r.headerData=[{id:"name",value:K.t("Name"),sortable:true},{id:"installed_by",value:i?K.t("Authorized By"):K.t("Installed By"),sortable:true},{id:"installed_on",value:i?K.t("Authorized On"):K.t("Installed On"),sortable:true},{id:"source",value:K.t("Source"),sortable:true}];return r}v()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.teamApps,a=t.sortBy;var n=this.state.offset;r.length?this.updateRowListItemsData(n):Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(a))}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeUpdateSearchQuery(t);this.maybeFetchNextPage(t)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.teamApps,n=r.teamAppsApiTotal;if(n&&a.length>=n)return;var i={offset:t};this.setState(function(){return i},function(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))})}},{key:"onAppNameClick",value:function e(t){return Object(O["b"])(Object(O["a"])().router.navigateTo("/organization/apps/profile/"+t+"/"+this.props.teamId))}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props.teamAppsLoading;r&&!t.teamAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(r));this.resetTeamAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t){var r=this.state.offset;var a=this.props,n=a.searchQuery,i=a.teamApps,s=a.teamAppsLoading;t.teamApps===i&&t.searchQuery===n&&t.teamAppsLoading===s||this.updateRowListItemsData(r)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==Y?Y:J;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===Y?J:Y:J;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(o));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){r.resetTeamAppsState();e&&e(t)})}},{key:"resetTeamAppsState",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiTotal(null));Object(O["b"])(Object(O["a"])().teams.resetTeamAppsApiCursor());Object(O["b"])(Object(O["a"])().teams.resetTeamApps());Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.value};if(t.sortable){r.iconType=this.determineSortState(t.id,t);r.onClick=this.headerItemOnClick;t.defaultSortType&&(r.defaultSortType=t.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||Y;var o=$[s];if(!n||n!==t)return o;var l=void 0;l=i?i===Y?X:Z:$[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.teamAppsApiCursor,l=n.teamId;var c={limit:i};r&&(c.sort=r);a&&(c.sort_dir=a);null!==s&&void 0!==s&&Object(_["trim"])(s).length&&(c.query=s);o&&(c.cursor=o);c.team=l;Object(O["b"])(Object(O["a"])().teams.getAppsByWorkspace(l,c))}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=this.props,n=a.teamApps,i=a.teamAppsLoading;var s=[];var o=t||0;var l=0;var c={rowListItems:s};function u(){l+=1;return"row_"+o+"_item"+l}function d(e,t){var r={id:"row_"+o,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:u()};t.className&&(a.className=t.className);r.items.push(a)});o+=1;return r}if(n&&n.length)n.forEach(function(e){s.push(d(e,r.rowTemplate))});else if(!i){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var v=[{searchQuery:p}];v.forEach(function(e){s.push(d(e,r.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,i=r.sortDir,s=r.rowListItems,o=r.offset;var l=this.props,c=l.rowHeaderItemClassName,u=l.rowClassName,d=l.searchQuery,p=l.teamAppsLoading;var v=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(W["a"],{autoHeight:true,rows:s,headers:v,rowHeaderItemClassName:c,rowClassName:u,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:i,searchQuery:d,isLoading:p,newQuery:!o,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(a["PureComponent"]);ee.displayName="TeamAppsList";ee.defaultProps=Q;var te=Object(V["a"])("feature_wta_org_level_apps")(ee);var re=new y["b"]("enterprise_dashboard");var ae={teamId:g["b"].string.isRequired,teamApps:g["b"].array,teamAppsApiCursor:g["b"].string,teamAppsApiTotal:g["b"].number,teamAppsCount:g["b"].number,teamAppsLoading:g["b"].bool,teamAppsSearchQuery:g["b"].string,teamAppsTeamUrl:g["b"].string,teamAppsSortBy:g["b"].string,teamAppsSortDir:g["b"].string};var ne={teamApps:[],teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsCount:0,teamAppsLoading:false,teamAppsSearchQuery:"",teamAppsTeamUrl:null,teamAppsSortBy:null,teamAppsSortDir:null};var ie=333;var se=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSearchInputChange=Object(_["debounce"])(r.onSearchInputChange,ie,{trailing:true}).bind(r);r.generateTeamsForAppCSV=r.generateTeamsForAppCSV.bind(r);return r}v()(t,[{key:"onSearchInputChange",value:function e(t){t.persist();var r=Object(_["get"])(t,"target.value","");Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(r))}},{key:"getTeamAppListProps",value:function e(){return{teamId:this.props.teamId,teamApps:this.props.teamApps,teamAppsApiCursor:this.props.teamAppsApiCursor,teamAppsApiTotal:this.props.teamAppsApiTotal,teamAppsLoading:this.props.teamAppsLoading,searchQuery:this.props.teamAppsSearchQuery,isLoading:this.props.teamAppsLoading}}},{key:"formatHeader",value:function e(){var t=parseInt(this.props.teamAppsCount,10);if(!Number.isNaN(t))return re.t("{count} Apps",{count:this.props.teamAppsCount});return re.t("Apps")}},{key:"generateTeamsForAppCSV",value:function e(){var t={type:"apps",team_id:this.props.teamId};this.props.teamAppsSearchQuery&&(t.query=this.props.teamAppsSearchQuery);if(this.props.teamAppsSortBy){t.sort_prefix=this.props.teamAppsSortBy;this.props.teamAppsSortDir&&(t.sort_dir=this.props.teamAppsSortDir)}Object(O["b"])(Object(O["a"])().apps.generateAppsCSVForSlackbotDM(t))}},{key:"renderManageAppsButton",value:function e(){var t=this.props.teamAppsTeamUrl;var r=t&&t+"apps/manage"||null;var a=re.t("Manage Apps");if(r)return n.a.createElement(E["d"],{href:r,target:"_blank",rel:"noopener noreferrer",type:"outline"},a,n.a.createElement(C["a"],{type:"external_link",className:"p-export_csv_button_caret"}));var i=re.t("You must join this workspace to manage its apps.");return n.a.createElement(j["c"],{tip:i,position:"top"},n.a.createElement("div",null,n.a.createElement(E["d"],{type:"outline",disabled:true},a,n.a.createElement(C["a"],{type:"external_link",className:"p-export_csv_button_caret"}))))}},{key:"renderAppFilterInput",value:function e(){var t=re.t("Filter by name...");return n.a.createElement(k["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.teamAppsLoading,onChange:this.onSearchInputChange,value:this.props.teamAppsSearchQuery})}},{key:"render",value:function e(){var t=[this.renderManageAppsButton()];if(0===this.props.teamAppsCount&&this.props.teamAppsApiCursor&&Object(_["isNull"])(this.props.teamAppsSearchQuery)){var r=re.t("Apps");return n.a.createElement(G,{pageHeader:r})}var a=this.getTeamAppListProps();return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200"},n.a.createElement(D,{title:this.formatHeader(),headerActions:t,headerClassName:"margin_bottom_150"}),this.renderAppFilterInput(),n.a.createElement("div",{className:"p-app_management_team_apps_list"},n.a.createElement(te,a)))}}]);return t}(a["PureComponent"]);se.displayName="TeamApps";se.defaultProps=ne;var oe=se;var le=oe;Object(c["a"])("interop.teamApps",{render:function e(t,r,a){if(!t)throw new Error("Team Apps render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(le,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.d(t,"a",function(){return f});r.d(t,"b",function(){return b});var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(119);var u=r(2);var d=r.n(u);var p=r(13);var v=r(27);var m=r(2276);var h=r(163);var f=function e(t,r,a){var i=Object(v["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(c["a"])(s.a.createElement(p["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({onClose:o},a)))),r)};var b=function e(t){l.a.unmountComponentAtNode(t)}},,,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(134);var i=r(156);var s=r(145);var o=r(567);var l=r(504);var c=r(1153);var u=r(426);var d=r(526);var p=r(471);var v=r(1315);var m=r(1189);var h=r(579);var f=r(2);var b=r(60);function g(e){var t=e.bot_id?[e.bot_id]:[];Object(f["values"])(e).forEach(function(e){if(Object(f["isObject"])(e)){t.push(g(e));return}if(!Object(f["isString"])(e))return;var r=Object(f["compact"])(Object(b["findUrlsInString"])(e).map(d["a"]));t.push(r)});return Object(f["uniq"])(Object(f["flatten"])(t))}var _=r(63);var y=r.n(_);var O=r(478);function k(e){var t=[];var r=[];function a(e){return["user","inviter","accepted_user","created_by"].indexOf(e)>=0}function n(e){if(!Object(f["isObject"])(e))return;r.push(e);var s=void 0;Object.keys(e).forEach(function(r){s=e[r];if("string"!==typeof s)return;if(!a(r)){Object(O["b"])(s).m_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)});return}if(!Object(i["a"])(s))return;if(Object(f["includes"])(t,s))return;t.push(s)});Object.keys(e).forEach(function(a){s=e[a];if("object"!==("undefined"===typeof s?"undefined":y()(s)))return;if(-1!==r.indexOf(s))return;if(!Object(f["isArray"])(s)||"members"!==a&&"users"!==a){n(s);return}s.forEach(function(e){if(!Object(i["a"])(e)&&e&&"object"===("undefined"===typeof e?"undefined":y()(e))&&e.id){Object(i["a"])(e.id)&&!Object(f["includes"])(t,e.id)&&t.push(e.id);return}if(!Object(i["a"])(e))return;if(Object(f["includes"])(t,e))return;t.push(e)})})}n(e);return Object(f["uniq"])(t)}function E(e){var t=[];var r=[];function a(e,t){if("channel"===e||"channel_id"===e)return true;if("id"===e&&"channel"===t)return true;return false}function i(e,s){if("object"!==("undefined"===typeof e?"undefined":y()(e)))return;r.push(e);Object(f["forOwn"])(e,function(e,r){if("string"!==typeof e)return;a(r,s)?Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e):Object(O["b"])(e).c_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)})});Object(f["forOwn"])(e,function(e,a){if("object"!==("undefined"===typeof e?"undefined":y()(e)))return;if("previous_message"===a)return;if(-1!==r.indexOf(e))return;!Object(f["isArray"])(e)||"string"!==typeof e[0]||"channels"!==a&&"ims"!==a&&"groups"!==a?i(e,a):e.forEach(function(e){Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e)})})}i(e);return t}function j(e){var t=[];Object(f["forOwn"])(e,function(e,r){Object(f["isArray"])(e)?"messages"!==r&&"teams"!==r&&"users"!==r&&"channels"!==r||e.forEach(function(e){t.push(j(e))}):Object(f["isObject"])(e)?t.push(j(e)):Object(f["isString"])(e)&&("team"!==r&&"source_team"!==r&&"user_team"!==r&&"team_id"!==r||Object(s["a"])(e)&&t.push(e))});return Object(f["uniq"])(Object(f["flatten"])(t))}var C=r(924);function S(){return["Build Something People Want","We know that we have built something which is genuinely useful: almost any team which adopts Slack as their central application for communication would be significantly better off than they were before.","That means we have something people want.","However, almost all of them have no idea that they want Slack.","How could they?","They\u2019ve never heard of it.","And only a vanishingly small number will have imagined it on their own.","They think they want something different (if they think they want anything at all).","They definitely are not looking for Slack.","(But then no-one was looking for Post-it notes or GUIs either.)","Just as much as our job is to build something genuinely useful, something which really does make people\u2019s working lives simpler, more pleasant and more productive, our job is also to understand what people think they want and then translate the value of Slack into their terms.","A good part of that is \u201cjust marketing,\u201d but even the best slogans, ads, landing pages, PR campaigns, etc., will fall down if they are not supported by the experience people have when they hit our site, when they sign up for an account, when they first begin using the product and when they start using it day in, day out.","Therefore, \u201cunderstanding what people think they want and then translating the value of Slack into their terms\u201d is something we all work on.","It is the sum of the exercise of all our crafts.","We do it with copy accompanying signup forms, with fast-loading pages, with good welcome emails, with comprehensive and accurate search, with purposeful loading screens, and with thoughtfully implemented and well-functioning features of all kinds.","Marketing from Both Ends","Much has been written about \u201cproduct-market fit\u201d in the last few years, probably as a result of the popularity of the lean startup movement (though the idea has been around much longer).","The term refers to the degree to which a product could be successful, given sufficient promotion, appropriate pricing, adequate customer support and so on (before you find that fit, all the pushing in the world won\u2019t get you up the hill).","In this classic post on Marc Andreessen\u2019s old blog, he calls getting to product-market fit the \u201conly thing that matters\u201d for startups and offers a way of thinking about the life of the startup that divides it into two distinct phases: before product-market fit and after.","Once the product fits the market, a company is able to step on the gas, spending to promote a product that will actually sell.","The things you need to do before are very different from the things you need to do after (generally test & iterate vs scale & optimize).","We are right in the middle of that first phase.","It seems we are doing well and there are many encouraging signs, but we\u2019re definitely still in the first phase and it is very, very hard to tell how far we have to go to cross over into the promised land (the last 10% is 90% of the work, etc.)","So, we should be working carefully from both the product end and the market end:","Doing a better and better job of providing what people want (whether they know it or not)","Communicating the above more and more effectively (so that they know they want it)","In the best case, there is a dialectic at play here: the product itself and the way people use it should suggest new ways of articulating the value\u200a\u2014\u200aand refinements to how we communicate the value should lead to principles which clarify decision-making around product features and design.","Our position is different than the one many new companies find themselves in: we are not battling it out in a large, well-defined market with clear incumbents (which is why we can\u2019t get away with \u201cOther group chat products are poisonous. Slack is toasted.\u201d).","Despite the fact that there are a handful of direct competitors and a muddled history of superficially similar tools, we are setting out to define a new market.","And that means we can\u2019t limit ourselves to tweaking the product; we need to tweak the market too.","Sell the innovation, not the product","The best\u200a\u2014\u200amaybe the only?\u200a\u2014\u200areal, direct measure of \u201cinnovation\u201d is change in human behaviour.","In fact, it is useful to take this way of thinking as definitional: innovation is the sum of change across the whole system, not a thing which causes a change in how people behave.","No small innovation ever caused a large shift in how people spend their time and no large one has ever failed to do so.","By that measure, Slack is a real and large innovation.","It is not as eye-catching as self-driving cars or implantable chips\u200a\u2014\u200ait is not basic research-y kind of stuff.","But, for organizations that adopt it, there will be a dramatic shift in how time is spent, how communication happens, and how the team\u2019s archives are utilized.","There will be changes in how team members relate to one another and, hopefully, significant changes in productivity.","We are unlikely to be able to sell \u201ca group chat system\u201d very well: there are just not enough people shopping for group chat system (and, as pointed out elsewhere, our current fax machine works fine).","That\u2019s why what we\u2019re selling is organizational transformation.","What we are selling is not the software product\u200a\u2014\u200athe set of all the features, in their specific implementation\u200a\u2014\u200abecause there are just not many buyers for this software product.","(People buy \u201csoftware\u201d to address a need they already know they have or perform some specific task they need to perform, whether that is tracking sales contacts or editing video.)","However, if we are selling \u201ca reduction in the cost of communication\u201d or \u201czero effort knowledge management\u201d or \u201cmaking better decisions, faster\u201d or \u201call your team communication, instantly searchable, available wherever you go\u201d or \u201c75% less email\u201d or some other valuable result of adopting Slack, we will find many more buyers.","That\u2019s why what we\u2019re selling is organizational transformation.","The software just happens to be the part we\u2019re able to build & ship (and the means for us to get our cut).","We\u2019re selling a reduction in information overload, relief from stress, and a new ability to extract the enormous value of hitherto useless corporate archives.","We\u2019re selling better organizations, better teams.","That\u2019s a good thing for people to buy and it is a much better thing for us to sell in the long run.","We will be successful to the extent that we create better teams.","To see why, consider the hypothetical Acme Saddle Company.","They could just sell saddles, and if so, they\u2019d probably be selling on the basis of things like the quality of the leather they use or the fancy adornments their saddles include; they could be selling on the range of styles and sizes available, or on durability, or on price.","Or, they could sell horseback riding.","Being successful at selling horseback riding means they grow the market for their product while giving the perfect context for talking about their saddles.","It lets them position themselves as the leader and affords them different kinds of marketing and promotion opportunities (e.g., sponsoring school programs to promote riding to kids, working on land conservation or trail maps).","It lets them think big and potentially be big.","Because the best possible way to find product-market fit is to define your own market.","This isn\u2019t a new idea.","There are many brands whose marketing activities or positioning has them selling something other than (and usually larger than) their product: Harley Davidson sells motorcycle riding, but it especially sells freedom and independence.","Most luxury brands sell something that comes down to \u201cbeing better than you are\u201d (richer, better looking, more attractive to those you find desirable, etc.)","My favorite recent example is Lululemon: when they started, there was not a large market for yoga-specific athletic wear and accessories.","They sold yoga like crazy: helping people find yoga studios near their homes, hosting free classes, sponsorships and scholarships, local ambassadors and training, etc.","And as a result, they sold just under $1.4 billion worth of yoga-specific athletic wear and accessories in their most recent fiscal year.","But going back to the Acme Saddle Company, the better analogy to what we are doing now is to imagine them selling horseback riding \u2026 about 4,000 years ago.","It is almost inevitable that centralized internal communication systems will gradually replace email for most organizations over the next 10-20 years and we should do what we can to accelerate the trend and \u201cown it\u201d.","We are at the beginning of a transition.","We have an opportunity to both define the category and push hard for the whole market\u2019s growth.","We\u2019d be crazy not to take it, because the best possible way to find product-market fit is to define your own market."]}var w=r(1770);var I=r(1322);var T=r(66);var A=r(84);var N=r(514);var P=r(354);var R=r(869);var M=r(1292);var x=r(1313);var D=r(391);var F=r(470);var L=r(688);var B=r(1168);var U=r(158);var q=r(210);var G=function e(t){if(!Object(f["isString"])(t))return null;var r=Object(U["e"])();return t.replace(r,function(e){var t=Object(U["a"])(e);var r=Object(q["getEmojiNameFromUnicodeString"])(t);if(r)return":"+r+":";return e})};var H=G;var W=r(428);var V=r(181);var K=r(580);var z=r(1809);var Q=r(1068);var Y=r(319);var J=r(1745);var X=r(39);function Z(e){if(!e)return Promise.resolve();return new Promise(function(t,r){e.then(t).catch(r)})}var $=r(12);var ee=r(1342);var te=r(274);var re=r(569);var ae=r(204);var ne=r(57);var ie=r(689);Object(a["a"])("interop.utility",{addJitter:F["a"],looksLikeChannelId:n["a"],looksLikeMemberId:i["a"],looksLikeTeamId:s["a"],looksLikeEnterpriseTeamId:s["b"],looksLikeFileId:o["a"],looksLikeGlobalActionFrecencyId:x["c"],extractAllBotIds:g,extractAllMemberIds:k,extractAllModelObIds:E,extractAllTeamIds:j,formatThemeColorsArray:function e(t){return Object(K["c"])(Object(V["b"])(TS.redux.getState()),t)},getGlobalNavTheme:V["a"],getStringLength:c["a"],getIconSizeToFit:u["a"],getBotIdFromUrl:d["a"],getEKMRevokedMessageTitle:ee["a"],getHelpCenterUrl:ae["b"],getZendeskLocale:ne["a"],getLogger:$["a"],looksLikeBotId:p["a"],looksLikeUserGroupId:l["a"],isVisible:v["a"],ipsum:S,isFileSubtype:N["b"],inTabFlow:m["a"],firstFocusableChild:h["b"],lastFocusableChild:h["c"],snakeCaseKeys:C["a"],isMenuVisible:T["g"],isDialogVisible:A["b"],isFSModalVisible:P["b"],normalize:I["a"],cleanChannelName:J["a"],convertFilesize:R["a"],getSystemTextPreferences:M["a"],decodeGlobalActionFrecencyId:x["a"],getGlobalActionForFrecency:x["b"],FILE_SUBTYPES:N["a"],PRIMARY_VIEWS:te["a"],uuidv4:D["a"],formatNumberWithAbbreviation:L["a"],isCmdKey:W["a"],getColonsRx:U["c"],getEmoticonsRx:U["d"],getNativeEmojiRx:U["e"],emojiTranslation:{addTranslationMap:Y["b"],getLocalizedEmojiName:Y["g"],getCanonicalEmojiName:Y["e"],convertEmojiInStringToLocalized:Y["d"],convertEmojiInStringToCanonical:Y["c"],testEmojiTranslations:Y["j"]},replaceEmoticonsWithColons:U["h"],replaceTextEmojiWithNative:function e(t){return Object(B["a"])(TS.redux.getState(),{messageText:t,teamId:TS.model.team.id})},replaceNativeEmojiWithText:function e(t){return H(t)},getEmoticonMap:function e(){return X["EMOTICON_MAP"]},setCachedRefererPolicy:ie["d"],getRefererHidingWhiteList:ie["a"],getRefererPolicy:ie["b"],urlNeedsRefererHiding:ie["e"],isInputElement:function e(t){var r=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object(Q["a"])(r)},isContentEditableElement:function e(t){var r=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object(z["a"])(r)},getImgProxyUrl:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return re["a"].apply(void 0,[TS.redux.getState()].concat(r))},makeSafeForTimeout:Z,isModelObjectExternal:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return w["a"].apply(void 0,[TS.redux.getState()].concat(r))}})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(3);var d=r.n(u);var p=r(26);var v=r.n(p);var m=r(5);var h=r.n(m);var f=r(6);var b=r.n(f);var g=r(7);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(9);var E=r.n(k);var j=r(0);var C=r(2);var S=r(28);var w=r(24);var I=r(281);function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(r,a){var n=Object(I["i"])(r.email).error_key;if(!n&&("invite"===r.mapping||"create"===r.mapping)){var i=e.some(function(e,t){return t!==a&&e.email===r.email});var s=!i&&t.some(function(e){return e.profile.email===r.email});var o=i||s;n=o?"duped":n}return d()({},r,{email_state:n||"ok"})})}function A(e){return{label:e.profile.real_name+" "+e.name,lfs_id:e.id,id:e.id,member:e,value:e.id}}var N={makeUserLFSItem:A,validateEmails:T};var P=r(22);var R=r(893);var M=r(10);var x=r(1544);function D(e){if(e.member)return n.a.createElement(x["a"],{item:e});return e.label}var F=r(1545);function L(e){if(e.member)return n.a.createElement(F["a"],{item:e});return e.label}var B=r(2406);var U=new M["b"]("imports");var q={userMapping:j["b"].shape({id:j["b"].oneOfType([j["b"].string,j["b"].number]).isRequired,name:j["b"].string.isRequired,import_email:j["b"].string.isRequired,email:j["b"].string.isRequired,email_state:j["b"].string.isRequired,mapping:j["b"].string.isRequired}).isRequired,allMembers:j["b"].object.isRequired,onUserMappingChange:j["b"].func};var G={onUserMappingChange:C["noop"]};function H(e){var t=[{label:U.t("Choose one:"),value:"-",id:"-"},{label:U.t("Create & invite user"),value:"invite",id:"invite"},{label:U.t("Create a disabled user, without inviting them"),value:"create",id:"create"},{label:U.t("Do not create a user, just import messages"),value:"bot",id:"bot"},{label:U.t("Skip user completely, importing no messages"),value:"0",id:"0"}];return[].concat(t,v()(Object.values(e.allMembers).map(A))).map(function(t){return t.value===e.userMapping.mapping?d()({},t,{preselected:true}):t})}function W(e){return-1===["-","invite","create","bot","0"].indexOf(e)}var V=function(e){E()(t,e);function t(e){b()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onEmailChange=r.onEmailChange.bind(r);r.onMappingChange=r.onMappingChange.bind(r);return r}_()(t,[{key:"componentWillReceiveProps",value:function e(t){t.userMapping.mapping!==this.props.userMapping.mapping&&this.lazyFilterSelect&&this.lazyFilterSelect.processItems(H(t))}},{key:"onEmailChange",value:function e(t){this.props.onUserMappingChange(d()({},this.props.userMapping,{email:t}))}},{key:"onMappingChange",value:function e(t){var r=void 0;var a=this.props.allMembers[t];r=a&&a.profile&&a.profile.email?a.profile.email:this.props.userMapping.import_email;this.props.onUserMappingChange(d()({},this.props.userMapping,{mapping:t,email:r}))}},{key:"maybeRenderEmailInput",value:function e(){var t=this;var r=this.props.userMapping,a=r.mapping,i=r.email,s=r.email_state,o=r.import_email,l=r.id;if(i===o&&"ok"===s)return null;if(i===o&&"create"!==a&&"invite"!==a)return null;if(W(a))return null;return n.a.createElement("input",{type:"email",name:"email_"+l,defaultValue:i,onChange:function e(r){return t.onEmailChange(r.target.value)},placeholder:Object(I["a"])(),className:"small small_top_margin"})}},{key:"renderErrors",value:function e(){var t=void 0;switch(this.props.userMapping.email_state){case"duped":t=U.t("Another user has this email.");break;case"empty":t=U.t("An email address is required.");break;case"invalid":t=U.t("This address is invalid.");break;case"ok":default:break}var r=["control-group","small_top_margin",{error:!W(this.props.userMapping.mapping)&&"ok"!==this.props.userMapping.email_state}];return n.a.createElement("div",{className:r},t&&n.a.createElement("span",{className:"small_left_margin help-inline"},n.a.createElement(P["a"],{type:"warning",className:"moscow_red"})," ",t),this.maybeRenderEmailInput())}},{key:"renderUserSelect",value:function e(){var t=this;return n.a.createElement(R["a"],{ref:function e(r){t.lazyFilterSelect=r},items:H(this.props),template:D,tokenTemplate:L,onValueChange:function e(r){return t.onMappingChange(r[0].value)},single:true})}},{key:"renderAction",value:function e(){return n.a.createElement("div",{className:"col span_3_of_6"},this.renderUserSelect(),this.renderErrors())}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form--user-mapping-row"},n.a.createElement("div",{className:"col span_3_of_6 break_all"},this.props.userMapping.import_email||U.t("no email")),this.renderAction())}}]);return t}(a["PureComponent"]);V.displayName="ServiceImportUserMapping";V.defaultProps=G;var K=V;var z={service:j["b"].string.isRequired,crumb:j["b"].string.isRequired,allMembers:j["b"].object.isRequired,initialUserMappings:j["b"].arrayOf(j["b"].shape({id:j["b"].oneOfType([j["b"].string,j["b"].number]).isRequired,name:j["b"].string.isRequired,import_email:j["b"].string.isRequired,email:j["b"].string.isRequired,email_state:j["b"].string.isRequired,mapping:j["b"].string.isRequired})).isRequired,initialChannelMappings:j["b"].array.isRequired};var Q={};var Y=function(e){E()(t,e);function t(e){b()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={batchUserAction:"-",userMappings:e.initialUserMappings};r.onUserMappingChange=r.onUserMappingChange.bind(r);r.onChange=r.onChange.bind(r);r.renderUserMapping=r.renderUserMapping.bind(r);r.onApplyBatchUserActionToAll=r.onApplyBatchUserActionToAll.bind(r);r.onApplyBatchUserActionToUnmapped=r.onApplyBatchUserActionToUnmapped.bind(r);return r}_()(t,[{key:"onChange",value:function e(t,r){this.setState(function(){return h()({},t,r)})}},{key:"onUserMappingChange",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!r.id)return;var a=this.state.userMappings;var n=Object(C["findIndex"])(a,function(e){return e.id===r.id});if(-1===n)return;var i=[].concat(v()(a.slice(0,n)),[r],v()(a.slice(n+1)));this.setState(function(){return{userMappings:T(i,Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToAll",value:function e(){var t=this;this.setState(function(e){return{userMappings:T(e.userMappings.map(function(r,a){return d()({},r,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[a].mapping:e.batchUserAction,email:r.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToUnmapped",value:function e(){var t=this;this.setState(function(e){return{userMappings:T(e.userMappings.map(function(r,a){return W(r.mapping)?r:d()({},r,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[a].mapping:e.batchUserAction,email:r.import_email})}),Object.values(t.props.allMembers))}})}},{key:"renderUserMapping",value:function e(t){return n.a.createElement(K,{key:t,userMapping:this.state.userMappings[t],allMembers:this.props.allMembers,onUserMappingChange:this.onUserMappingChange})}},{key:"renderFormInputs",value:function e(){var t=JSON.stringify(this.state.userMappings);var r=JSON.stringify(this.props.initialChannelMappings);var a=this.state.userMappings.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("input",{type:"hidden",value:e.mapping,name:"user_"+e.id}),n.a.createElement("input",{type:"hidden",value:e.email,name:"email_"+e.id}))});var i=this.props.initialChannelMappings.map(function(e){return n.a.createElement("input",{key:e.id,type:"hidden",value:e.mapping,name:"channel_"+e.id})});return n.a.createElement("div",null,n.a.createElement("input",{type:"hidden",value:this.props.crumb,name:"crumb"}),n.a.createElement("input",{type:"hidden",value:"mapping",name:"step"}),a,i,n.a.createElement("input",{type:"hidden",value:t,name:"user_list"}),n.a.createElement("input",{type:"hidden",value:r,name:"channel_list"}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form large_bottom_margin"},n.a.createElement("form",{method:"post",action:"/services/import/"+this.props.service},this.renderFormInputs(),n.a.createElement(S["d"],{htmlType:"submit",size:"large"},"Save Changes")))}}]);return t}(a["PureComponent"]);Y.displayName="ServiceImportMappingForm";Y.defaultProps=Q;function J(e){var t=Object(w["a"])(e);return{allMembers:t}}var X=Object(o["connect"])(J)(Y);var Z=X;var $=r(163);var ee=function e(t,r,a){if(!t)throw new Error("mountServiceImportMappingForm must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement($["a"],null,n.a.createElement(Z,a))),r)};var te=s.a.unmountComponentAtNode;var re={mountServiceImportMappingForm:ee,unmountServiceImportMappingForm:te};var ae=r(44);Object(ae["a"])("interop.mountServiceImportMappingForm",ee);Object(ae["a"])("interop.unmountServiceImportMappingForm",te)},function(e,t,r){"use strict";var a=r(160);var n=Object(a["a"])("(noop) Open the edit profile modal via side-effect");n.propTypes=null;t["a"]=n},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(2);var o=r.n(s);var l=r(119);var c=r(27);var u=r(207);var d=r(108);var p=r(193);var v=r(3);var m=r.n(v);var h=r(282);function f(e,t){var r=t||Object(h["e"])(e.id)||{};return m()({},e,{fileName:r.name,imageSource:r.thumb_160||r.thumb_80,fileType:r.filetype,prettyType:r.pretty_type,fileSize:r.size})}var b=r(6);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(7);var k=r.n(O);var E=r(9);var j=r.n(E);var C=r(1757);var S=r(0);var w=r(10);var I=r(28);var T=r(38);var A=r(921);var N=r(37);var P=r.n(N);var R=r(2414);var M=r(1181);var x=r(16);var D=r.n(x);var F=r(89);var L=r(1311);var B=r(22);var U=r(187);var q=r(693);var G=r(30);var H=r(869);var W=r(1521);var V=r(3166);var K=new w["b"]("downloads");var z={id:S["b"].string.isRequired,downloadPath:S["b"].string,downloadState:S["b"].string,startTime:S["b"].number,progress:S["b"].number,fileName:S["b"].string,imageSource:S["b"].string,fileType:S["b"].string,prettyType:S["b"].string,fileSize:S["b"].number,highlight:S["b"].bool,showDownload:S["b"].func,cancelDownload:S["b"].func,retryDownload:S["b"].func,removeDownload:S["b"].func,pauseDownload:S["b"].func,resumeDownload:S["b"].func,hasKeyboardFocusWithin:S["b"].bool,onFocus:S["b"].func,onBlur:S["b"].func};var Q={downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:false,showDownload:s["noop"],cancelDownload:s["noop"],retryDownload:s["noop"],removeDownload:s["noop"],pauseDownload:s["noop"],resumeDownload:s["noop"],hasKeyboardFocusWithin:false,onFocus:s["noop"],onBlur:s["noop"]};var Y=function(e){j()(t,e);k()(t,null,[{key:"getEstimatedTimeRemaining",value:function e(t){var r=t.downloadState,a=t.progress,n=t.startTime;if(!["progressing","paused"].includes(r))return"";if(a>=1)return"";if(-1===a)return"";if(!a)return"";var i=Date.now()-n;var s=i*(1/a);var o=s-i;return K.t("{duration} remaining",{duration:F["a"].duration(o,"milliseconds").humanize()})}}]);function t(e){g()(this,t);var r=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(r,["onShowClick","onCancel","onRetry","onRemove","onPause","onResume"]);return r}k()(t,[{key:"onShowClick",value:function e(t){t.stopPropagation();this.props.showDownload(this.props.id)}},{key:"onCancel",value:function e(t){t.stopPropagation();this.props.cancelDownload(this.props.id)}},{key:"onRetry",value:function e(t){t.stopPropagation();this.props.retryDownload(this.props.id)}},{key:"onRemove",value:function e(t){t.stopPropagation();this.props.removeDownload(this.props.id)}},{key:"onPause",value:function e(t){t.stopPropagation();this.props.pauseDownload(this.props.id)}},{key:"onResume",value:function e(t){t.stopPropagation();this.props.resumeDownload(this.props.id)}},{key:"renderDownloadIcon",value:function e(){var t=this.props,r=t.fileType,a=t.imageSource;var i=function e(){return n.a.createElement(B["b"],{type:r,file:true})};if(a)return n.a.createElement(L["a"],{src:a,renderPending:i,width:"32",height:"32",className:"p-download_item__image",alt:""});return i()}},{key:"renderExtraActions",value:function e(){var t="paused"===this.props.downloadState?n.a.createElement(U["a"],{className:"p-download_item__link--resume",onClick:this.onResume},K.t("Resume")):n.a.createElement(U["a"],{className:"p-download_item__link--pause",onClick:this.onPause},K.t("Pause"));return n.a.createElement("span",{className:"p-download_item__extra_actions"},t,n.a.createElement(U["a"],{className:"p-download_item__link--cancel",onClick:this.onCancel},K.t("Cancel")))}},{key:"render",value:function e(){var r=this.props,a=r.downloadPath,i=r.downloadState,s=r.fileName,o=r.imageSource,l=r.fileType,c=r.prettyType,u=r.fileSize,d=r.highlight,p=r.hasKeyboardFocusWithin;var v=Math.max(this.props.progress,0);var m=s||a.split(/\/|\\/).reverse()[0];var h="completed"===i?100:100*v;var f=["progressing","paused"].includes(i)&&v?v*u:void 0;var b=void 0;b=f?K.t("{partialSize} of {size} {prettyType}",{partialSize:Object(H["a"])(f,{decimalPlaces:2}),size:Object(H["a"])(u),prettyType:c}):Object(H["a"])(u)+" "+c;var g=t.getEstimatedTimeRemaining(this.props);var _=D()("p-download_item",i,{highlight:d,"p-download_item--focus-within":p});var y=D()({"p-download_item__action_icon":true,"p-download_item__action_icon--image":!!o,fileType:l});var O=Object(G["isMac"])()?K.t("Show in Finder"):K.t("Open containing folder");var k={width:h+"%"};var E=K.t("Remove {file}",{file:m,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return n.a.createElement("div",{role:"presentation",className:_,onFocus:this.props.onFocus,onBlur:this.props.onBlur},n.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),n.a.createElement(B["b"],{className:y})),n.a.createElement("div",{className:"p-download_item__container"},n.a.createElement("div",{className:"p-download_item__name_row"},n.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},m),this.renderExtraActions()),n.a.createElement("div",{className:"p-download_item__size_row"},n.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},n.a.createElement("span",{className:"p-download_item__partial_size"},b)),n.a.createElement("span",{className:"p-download_item__actions"},n.a.createElement(U["a"],{className:"p-download_item__link--show",onClick:this.onShowClick},O),n.a.createElement(U["a"],{className:"p-download_item__link--retry",onClick:this.onRetry},K.t("Retry"))),n.a.createElement("span",{className:"p-download_item__time_remaining"},g)),n.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},n.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:k}))),n.a.createElement(q["a"],{"aria-label":E,icon:"times_circle",className:"p-download_item__link--remove",onClick:this.onRemove}))}}]);return t}(n.a.Component);Y.displayName="DownloadItem";Y.defaultProps=Q;var J={showDownload:p["showDesktopDownload"],cancelDownload:p["cancelDesktopDownload"],retryDownload:p["retryDesktopDownload"],removeDownload:p["removeDesktopDownload"],pauseDownload:p["pauseDesktopDownload"],resumeDownload:p["resumeDesktopDownload"]};var X=Object(W["a"])(Object(i["connect"])(null,J)(Y));var Z=new w["b"]("page_client");var $={items:S["b"].arrayOf(S["b"].object.isRequired),onItemTabWithin:S["b"].func,openDownload:S["b"].func,retryDownload:S["b"].func};var ee={items:void 0,onItemTabWithin:s["noop"],openDownload:s["noop"],retryDownload:s["noop"]};var te=function(e){j()(t,e);function t(e){g()(this,t);var r=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(r,["renderItem","onFileClick","focus"]);r.list=n.a.createRef();return r}k()(t,[{key:"onFileClick",value:function e(t){var r=t.id;var a=this.getItemKeys();var n=Object(s["indexOf"])(a,r);var i=this.props.items[n];if(!i)return;var o=i.downloadState;if("completed"===o){this.props.openDownload(r);return}"cancelled"!==o&&"interrupted"!==o||this.props.retryDownload(r)}},{key:"getItemKeys",value:function e(){return this.props.items.map(function(e){return e.id})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderItem",value:function e(t){var r=this.props.items[t];return n.a.createElement(X,m()({key:r.id},r))}},{key:"render",value:function e(){var t=this;var r=this.getItemKeys();return n.a.createElement(R["a"],null,function(e){var a=e.width,i=e.height;return n.a.createElement(M["a"],{ref:t.list,width:a,height:i,keys:r,rowRenderer:t.renderItem,animateOnScroll:false,ariaLabel:Z.t("Downloads"),onItemTabWithin:t.props.onItemTabWithin,onItemClick:t.onFileClick})})}}]);return t}(a["PureComponent"]);te.displayName="DownloadsList";te.defaultProps=ee;var re={openDownload:p["openDesktopDownload"],retryDownload:p["retryDesktopDownload"]};var ae=Object(i["connect"])(null,re)(function(e){var t=e.forwardedRef,r=P()(e,["forwardedRef"]);return n.a.createElement(te,m()({ref:t},r))});var ne=n.a.forwardRef(function(e,t){return n.a.createElement(ae,m()({forwardedRef:t},e))});var ie=r(3168);var se={downloads:S["b"].array.isRequired,fileIdsToFetch:S["b"].array.isRequired,fetchFileInfo:S["b"].func.isRequired,isShowing:S["b"].bool,clearDownloads:S["b"].func};var oe={clearDownloads:s["noop"],isShowing:true};var le=new w["b"]("page_client");var ce=function(e){j()(t,e);k()(t,null,[{key:"renderClearAllButton",value:function e(t){return n.a.createElement(I["c"],{className:"p-downloads__clear_all",onClick:t},le.t("Clear all"))}}]);function t(e){g()(this,t);var r=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(r,["renderBody","focus","onItemTabWithin"]);r.list=n.a.createRef();r.flexpane=n.a.createRef();return r}k()(t,[{key:"componentWillUpdate",value:function e(t){var r=t.fileIdsToFetch;if(this.props.fileIdsToFetch===r)return;if(0===r.length)return;if(Object(s["isEqual"])(this.props.fileIdsToFetch,r))return;this.props.fetchFileInfo({ids:r})}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderBody",value:function e(){var t=this.props,r=t.isShowing,a=t.downloads;if(!r)return null;if(0===a.length)return null;return n.a.createElement(ne,{ref:this.list,ariaLabel:le.t("Downloads"),items:a,onItemTabWithin:this.onItemTabWithin})}},{key:"renderTitle",value:function e(){var r=this.props,a=r.downloads,i=r.clearDownloads;var s=a.length>=2?t.renderClearAllButton(i):null;return n.a.createElement("div",{className:"p-downloads__header_items"},n.a.createElement("span",null,le.t("Downloads")),s)}},{key:"render",value:function e(){return n.a.createElement(A["a"],{isEmpty:Object(s["isEmpty"])(this.props.downloads),ref:this.flexpane,focus:this.focus,className:"p-downloads_list",title:this.renderTitle(),renderBody:this.renderBody,viewId:"downloads-list",kbNavOrder:Object(T["a"])()?void 0:6})}}]);return t}(n.a.Component);ce.displayName="DownloadsFlexpane";ce.defaultProps=oe;var ue=ce;var de=function e(t){return t.files};var pe=function e(t,r){return r.startTime-t.startTime};var ve=Object(u["createSelector"])([p["getTeamDownloads"],de],function(e,t){return e.map(function(e){return f(e,t[e.id])}).sort(pe)});var me=Object(u["createSelector"])([p["getTeamDownloadIds"],de],function(e,t){return e.filter(function(e){return!t[e]})});var he=function e(t){var r=Object(d["i"])(t);return{downloads:ve(t),fileIdsToFetch:me(t),isShowing:"downloads"===r}};var fe={fetchFileInfo:p["fetchFileInfo"],clearDownloads:p["clearTeamDesktopDownloads"]};var be=Object(i["connect"])(he,fe)(ue);var ge=be;var _e=r(163);var ye=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.noop;if(!t)throw new Error("mountDownloadsView must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(_e["a"],null,n.a.createElement(ge,null))),r,a)};var Oe=ye;var ke=r(44);Object(ke["a"])("interop.mountDownloadsView",Oe)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(0);var b=r(1848);var g=r(2);var _=r(12);var y=r(245);var O={href:f["b"].string.isRequired,sizes:f["b"].string,type:f["b"].string,logger:f["b"].object.isRequired};var k={sizes:"16x16 32x32 48x48",type:"image/png"};var E=0;var j=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.originalFavicon=r.findFavicon();return r}d()(t,[{key:"componentDidMount",value:function e(){E&&this.props.logger.error("Multiple Favicons mounted");E+=1;this.updateFavicon()}},{key:"componentDidUpdate",value:function e(t){Object(y["a"])(this.getFaviconProps(t),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function e(){E-=1;this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function e(t){return{rel:"shortcut icon",href:t.href,sizes:t.sizes,type:t.type}}},{key:"setOrRemoveFavicon",value:function e(t){var r=document.querySelector("head");if(!r){this.logger.error("<head> not found");return}var a=this.findFavicon();a?t?r.replaceChild(t,a):a.remove():t&&r.appendChild(t)}},{key:"findFavicon",value:function e(){var t=document.querySelectorAll("head > link");return Object(g["find"])(t,function(e){var t=e.getAttribute("rel");if(t&&t.split(" ").includes("icon"))return true;return false})}},{key:"updateFavicon",value:function e(){var t=document.createElement("link");Object(g["forEach"])(this.getFaviconProps(this.props),function(e,r){t.setAttribute(r,e)});this.setOrRemoveFavicon(t)}},{key:"render",value:function e(){return null}}]);return t}(a["PureComponent"]);j.displayName="Favicon";j.defaultProps=k;var C=function e(t){return{logger:Object(_["a"])({state:t})}};var S=Object(i["connect"])(C)(j);var w=S;var I=r(195);var T=r(188);var A=r(473);var N={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABNVBMVEVKFEz///9NGE+EX4VLFU3w7PD9/f1SH1Tb0Nv59/n18/W4orhZKFt2TnhwRXF2TXdpPGqghKFMFk7FtMZTIFVhMmNxR3PHt8hfL2F6U3xpPWt/WYD+/v5nOWhWI1edgJ7z8POBW4LIuMhySHS6pruHZIl/WoGJZopuQ3CObI/Vydba0NtsQW7ArcHw6/DEs8VYJlqojqnx7fH8/PyfgqDGtcbg1+Du6e7e1N5kN2Z8VX2fg6BbKlxOGVBxRnJ4T3ljNWV6UnuDXoSLaIyih6NMF07az9qWd5f8+/zUx9Ts5+zj2+Pv6u/t5+13Tni1n7WYeZlTH1XYzdn49vjLu8uIZYm5pLpmOGipkKqMaY2UdJXr5euZe5prP2xsQG2JZovTxtSnjahOGlDSxdOQcJKHY4hXJVnkajHYAAABJUlEQVR4Xr3PNXbFMBCF4Tvmx8wYZmZmZmaG/S8hHke2UuikfF9xp9DfCC3V4YQzUeB01umDStYkogKS5EpCIUGukLHOZwMKRYsLrYv3EyqTljqQcm26DmWQXen2HNsIgrNEUf7PJGGm1w/yJlkLEBwK9PvBgLtWTgRhGQxD53OHCT5rIpiSwRCe+QyCt1kXQbQQIk9oZBQYGz9sAETV6RgChuaBpGlpSHPzlcoilpZLqwDikXZPZtOG0CCXvrXt7g7iu+TbM0Sw7wUx3gNESCqL4IiDfA9vGCck1USQIqLztAjKF+S7hO/qOmVDBLi57fRE7jX8FQRqMugienj8P3A9QeGLg+bveYFCjYNXxPiUoPJWJTOOd4foQ4OSHeUH47uO1voBEO4eo1Zt+vMAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAC9UlEQVR4AdSVA4wfXxDH/7H/rm3bttvzVWfbtm3btm3bVnC27Wk23dvu/VxPvsGbTOaz7w32j5f/v6ZKz/97mXSQoeIIM4WiGvDsvxeFh5l+H4Dsc/m26raZqZmC+MIPx9kQQNaZ998GwLyfdXx4fO2zFSUVg1PwplAZs/y3ASi+UVrD2MLcwqstb7TYtCuNXL8NgOscz8rKCpbxZju9Pq9he2lVxTHWb1MDL11vLAMABnxGY2NjRTwa36yLeC7y6bDp6nMZgOBoxG+ysLBQl1tUDqWmFgBVVaZX0fqog5MSnTLTPhYIQABwJ7hEga13xVEWKgDQkdiewdnowKjkI2kEAMelpaWurq58NatyygHQ72skraGkEQWsrq7CQ3V0dBg/4S84zEgRAKaJNGB8aBzCoBLIEWGoc2g8++d2HocK9BUZQGFCIWlAdkQOhInfl0A9wBC9J/7k32f19fXZkXG5apZF9NLFN7gLjzDBOkk8SO+779UGADYBzCpM0+bU4MyPK3h/9CMSGWwZMjEyMTY45qHtCccX/72Cq0DZ4cXiI+LZbrNf++sG6MZfN2/9fQffpjCr0Ow4kW1liHm9je7llk/LHJYVKjh+AeC/JqjOqqH1QRvEdpIdPHQ7GGSeyqoyq/NdEUDDpJ/IJPsmFycX4wQL0dfID21oRBsAuO8axqCY8FGtVa2ox1HJCcm+vLRMolT1RfXwDAQAw33DOIAinTLW09XWBWHw7WvkTOSOGAHASN8INkjmmZyJoCnWA30MYQleCWQBQjeECQC89X3QiOaKltdb6QgC4OvmZ+dJZC9LKyNcA5CxgEmKfyqQkEIRBIAErwuHWIemBqbhBK9nL++A6zoS25QwgFpRDUB2EdhQz5CLmut3BCAmdk+cdoARnzE219T41GaniaAZ7QDoNmyuusJ6cOKGA4acdgAoyCIYViYkgn8RzDB46HYyoH+O2oI6sptqfYTrZGCSBRa0YIMQBWK4amSYcjiFqYgwGhkWAAA494XLYBFPegAAAABJRU5ErkJggg==",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABSlBMVEVKFEyScpNLFU1iNGSMao17VH2Qb5FZKFtNGE9hMmPGJFKObZCOb4+EX4WRcZJjNWVHE0lcK15sQG2Iaol2TXdIE0pQHFJaKVxVIlfMJVNwRXHMJVRdLV98VX1WI1dsQW5WJFhOGVA3DzlMFk5PG1FfL2GLaIzNJVOBW4J3Tnh9Vn5gMGGIXXu6JlKPcJCaRWdYJ1pbK11TIFV+Yn9zKE/FJFFSH1SCXINTI1WzNFxYJlpWJVhFEke3IlB3T2uTP2CwMlq+K1a2Ik+WP2FHETylNlyNa46MaY1/Y39sT21HIUheMGA5Dzo7ED1JFEtgM2JeLmBZMFpRHVNhM2N5UXunN11UIVZgMWJ5XnptQm9pPGqBWHbIKFSHZImiH0uQcZF1THaMR2dJE0uDXoR9V392TniBZYJnOmmKZ4tpPWtXJVmObI9vRHFOGlBSjo4eAAABPUlEQVR4Xr3QNWPrQBCF0TtiMzNTmJmZmZnh8fv/bVYrGWRbKVLka+c0c9FcZL7TUgvwO78OYh6XHIW/3w4UJCLKYGraDgwTS8HuoB2YID3hsC9lAxDk4DR0bgcwculwQHTf3rWAQqCXF9AA8TH0nGgCMYnMNocg0sCP1YQVeKjWJANe9+jYuAW46kCCg5g4XltPNQC5Ds4wQ0zMzl0tLC4tO50rD2BFM4oBFLkMJDekIF7coa3tnWJxbx9GAg/1BBxE/KwIB/GjSuUEJTV9AUAN9/Dka80yoUPQn7mB6qVqXTDr4CCgs3uEqV6+EcR8OnDhqQFkTZBj4FUwQV6pgTdU873nNJgA8WQ3L/xTgCUT2GcCkejX788B6w9aMy5/DeBrB7LGNnyONNr1j0hSUfIwJqBtWpQfyv/xvX0AvdA4SuBm2+sAAAAASUVORK5CYII=",posts:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC"};var P={store:f["b"].shape({getState:f["b"].func.isRequired,subscribeImmediate:f["b"].func,subscribe:f["b"].func.isRequired}).isRequired};var R=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderWithState=r.renderWithState.bind(r);return r}d()(t,[{key:"renderWithState",value:function e(t){var r=Object(I["d"])(t);var a=!!Object(T["getTotalUnreadHighlights"])(t);var i=Object(T["teamHasUnreads"])(t);var s=void 0;if(r)s=a?N.onlineMentions:i?N.onlineUnreads:Object(A["a"])()?N.posts:N.online;else{s=N.offline;s=a?N.offlineMentions:i?N.offlineUnreads:N.offline}return n.a.createElement(w,{href:s})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(a["Component"]);R.displayName="WorkspaceFavicon";var M=R;var x=M;var D=function e(t,r){if(!t)throw new Error("mountFavicon must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(x,{store:a})),r)};var F=D;var L=r(44);Object(L["a"])("interop.mountFavicon",F)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(0);var b=r(1848);var g=r(19);var _=r(35);var y=r(209);var O=r(188);var k=r(73);var E=r(11);var j=r(274);var C=r(10);var S=r(12);var w=new C["b"]("view");var I={title:f["b"].string.isRequired,totalUnreadHighlights:f["b"].number,logger:f["b"].object.isRequired};var T={totalUnreadHighlights:null};var A=0;var N=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){A&&this.props.logger.error("Multiple DocumentTitles mounted");A+=1;this.originalTitle=document.title;this.updateTitle()}},{key:"componentDidUpdate",value:function e(t){t.title===this.props.title&&t.totalUnreadHighlights===this.props.totalUnreadHighlights||this.updateTitle()}},{key:"componentWillUnmount",value:function e(){A-=1;document.title=this.originalTitle}},{key:"updateTitle",value:function e(){var t=this.props.totalUnreadHighlights;var r=this.props.title||w.t("Slack",{fallbackHash:"430b38bf6daa7f9164b164b2ffd540b5a3afe2fd",fallbackHashNs:"migration_status_page"});document.title=t?r+" | "+this.unreadHighlightsCountString():r}},{key:"unreadHighlightsCountString",value:function e(){return w.t("{totalUnreadHighlights, plural, =1 {# new item} other {# new items}}",{totalUnreadHighlights:this.props.totalUnreadHighlights})}},{key:"render",value:function e(){return null}}]);return t}(a["PureComponent"]);N.displayName="DocumentTitle";N.defaultProps=T;var P=function e(t){return{logger:Object(S["a"])({state:t}),totalUnreadHighlights:Object(O["getTotalUnreadHighlights"])(t)}};var R=Object(i["connect"])(P)(N);var M=R;var x={viewName:f["b"].string,teamName:f["b"].string,isWindowFocused:f["b"].bool.isRequired,highlightCount:f["b"].number.isRequired,unreadCount:f["b"].number.isRequired};var D={viewName:"",teamName:""};var F=function(e){h()(t,e);d()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,r){var a=!t.isWindowFocused&&(r.showHighlights||t.highlightCount>r.highlightCount);var n=!t.isWindowFocused&&(r.showUnreads||t.unreadCount>r.unreadCount);return{highlightCount:t.highlightCount,unreadCount:t.unreadCount,showHighlights:a,showUnreads:n}}}]);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={highlightCount:0,unreadCount:0,showHighlights:false,showUnreads:false};return r}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.viewName,a=t.teamName;if(!a)return null;var i=r?r+" | "+a:a;this.state.showHighlights?i="! "+i:this.state.showUnreads&&(i="* "+i);return n.a.createElement(M,{title:i})}}]);return t}(a["PureComponent"]);F.displayName="WorkspaceDocumentTitle";F.defaultProps=D;var L=F;var B=new C["b"]("view");var U=new C["b"]("welcome_place");var q={store:f["b"].shape({getState:f["b"].func.isRequired,subscribeImmediate:f["b"].func,subscribe:f["b"].func.isRequired}).isRequired};var G=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderWithState=r.renderWithState.bind(r);return r}d()(t,[{key:"renderWithState",value:function e(t){var r=Object(k["a"])(t);var a=Object(g["d"])(t,r);var i=Object(_["d"])(t);var s="";r===j["a"].allUnreads||"Punreads"===r?s=B.t("Unread Messages"):r===j["a"].allThreads?s=B.t("Threads"):"Pwelcome"===r?s=U.t("Get Started"):a&&(s=Object(E["getDisplayNameForChannel"])(t,a,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}));return n.a.createElement(L,{viewName:s,teamName:i&&i.name,isWindowFocused:!!Object(y["isWindowFocused"])(t),highlightCount:Object(O["getTotalUnreadHighlights"])(t),unreadCount:Object(O["getTotalUnreads"])(t)})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(a["Component"]);G.displayName="ConnectedWorkspaceDocumentTitle";var H=G;var W=H;var V=function e(t,r){if(!t)throw new Error("mountDocumentTitle must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(W,{store:a})),r)};var K=V;var z=r(44);Object(z["a"])("interop.mountDocumentTitle",K)},,,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(0);var d=r(4);var p=r(6);var v=r.n(p);var m=r(7);var h=r.n(m);var f=r(8);var b=r.n(f);var g=r(9);var _=r.n(g);var y=r(40);var O=r.n(y);var k=r(10);var E=r(150);var j=r(764);var C=r(28);var S=r(157);var w=r(701);var I=r(135);var T=r(1681);var A=r(1474);var N=r(3058);var P=new k["b"]("enterprise_dashboard");var R={enqueueToast:u["b"].func.isRequired,orgName:u["b"].string,configured:u["b"].bool,featureEKMPhase2:u["b"].bool,getClearCacheTs:u["b"].func.isRequired,setClearCacheTs:u["b"].func.isRequired,lastCacheClearTs:u["b"].number};var M={orgName:"",configured:false,featureEKMPhase2:false,lastCacheClearTs:0};var x=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPushClick=r.onPushClick.bind(r);r.state={lastCacheClearTs:e.lastCacheClearTs};return r}h()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.configured&&this.props.getClearCacheTs().then(function(e){var r=e.timestamp;t.setState(function(){return{lastCacheClearTs:r}})})}},{key:"onPushClick",value:function e(){var t=this;var r=this.props.featureEKMPhase2;this.props.setClearCacheTs({timestamp:O()().unix(),reason:"EKMPurchasedView_setClearCacheTs"}).then(function(e){var a=e.timestamp;t.setState(function(){return{lastCacheClearTs:a}});t.props.enqueueToast({element:n.a.createElement(S["b"],{position:"bottom-right"},n.a.createElement("div",null,r?P.rt("<b>Caches cleared.</b> Key changes will be reflected across all clients in a few minutes."):P.rt("Policy changes pushed to {teamName}.",{teamName:t.props.orgName})))})})}},{key:"renderCacheClearControls",value:function e(){var t=this.props.featureEKMPhase2;return n.a.createElement("div",null,n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("div",null,n.a.createElement("h2",{className:"p-ekm_purchased_view__subtitle"},P.t("Made key policy changes in AWS?")),n.a.createElement("div",{className:"sk_dark_gray margin_bottom_100"},n.a.createElement("span",{className:"bold"},t?P.t("Last Cleared: "):P.t("Last Push: ")),n.a.createElement("span",null,n.a.createElement(A["a"],{timestamp:this.state.lastCacheClearTs})))),n.a.createElement("div",null,n.a.createElement(C["d"],{type:"primary",onClick:this.onPushClick},t?P.t("Clear Cache"):P.t("Push to Slack")))),n.a.createElement("p",null,t?P.t("Clearing client caches is recommended when making any key changes in AWS as different Slack clients cache data for varying amounts of time. This will ensure key changes are reflected across all clients within 24 hours. Any offline devices will update the next time they\u2019re online."):P.rt("Pushing key policy changes made in AWS will force all clients to reload, ensuring those changes are reflected in Slack. This may take <b>up to 24 hours.</b> Offline devices will update when they\u2019re next online.")),n.a.createElement(w["a"],null))}},{key:"renderUnconfiguredMessage",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement(I["a"],{type:"boxed",level:"info",icon:"info-circle",align:"left",className:"margin_bottom_100"},n.a.createElement("span",{className:"bold"},P.t("Contact your Slack Customer Success Manager to enable EKM")),n.a.createElement("div",null,P.t("To start encrypting all data using your own keys, you\u2019ll need to enable EKM by providing the ARN for your key family.")))}},{key:"render",value:function e(){var t=this.props,r=t.featureEKMPhase2,a=t.configured,i=t.orgName;return n.a.createElement("div",{className:"p-ekm_purchased_view"},n.a.createElement("h1",{className:"p-ekm_purchased_view__title"},P.t("Enterprise Key Management")),r?n.a.createElement("p",null,P.t("Enterprise Key Management (EKM) encrypts all messages and files in your organization using your keys managed through AWS Key Management Service. These keys are never visible to Slack.")):n.a.createElement("p",null,P.t("EKM encrypts all messages and files in your organization using your keys managed through AWS Key Management Service. These keys are never visible to Slack.")),!a&&this.renderUnconfiguredMessage(),r&&a&&n.a.createElement("hr",null),n.a.createElement(T["a"],{orgName:i}),a&&n.a.createElement("hr",null),a&&this.renderCacheClearControls())}}]);return t}(a["PureComponent"]);x.displayName="EKMPurchasedView";x.defaultProps=M;var D=function e(t){return{featureEKMPhase2:Object(d["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var F=function e(t){return{enqueueToast:function e(r){return t(Object(E["enqueueToast"])(r))},getClearCacheTs:function e(){return t(Object(j["c"])({reason:"EKMPurchasedView_getClearCacheTs"}))},setClearCacheTs:function e(r){return t(Object(j["i"])(r))}}};var L=Object(o["connect"])(D,F)(x);var B=L;var U=r(3060);var q=new k["b"]("enterprise_dashboard");var G={orgName:u["b"].string,featureEKMPhase2:u["b"].bool};var H={orgName:"",featureEKMPhase2:false};var W="https://slack.com/enterprise-key-management";var V=function(e){_()(t,e);function t(){v()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,r=t.orgName,a=t.featureEKMPhase2;if(!a)return null;return n.a.createElement("div",{className:"p-ekm_status_view__not_purchased display_flex flex_direction_column align_items_center"},n.a.createElement("div",{className:"p-ekm_status_view__not_purchased_img"}),n.a.createElement("h2",{className:"p-ekm_status_view__title"},q.t("Enterprise Key Management")),n.a.createElement("p",{className:"p-ekm_status_view__not_purchased_text align_center"},q.rt("Adding Enterprise Key Management (EKM) to <strong>{orgName}</strong> allows you to encrypt all messages and files in your organization using your own encryption keys, giving you complete control of your data in Slack.",{orgName:r})),n.a.createElement(C["d"],{href:W,className:"no_underline"},q.t("Learn More")))}}]);return t}(a["PureComponent"]);V.displayName="EKMNotPurchasedView";V.defaultProps=H;var K=V;var z=K;var Q={purchased:u["b"].bool,featureEKMPhase2:u["b"].bool};var Y={purchased:false,featureEKMPhase2:false};function J(e){var t=e.featureEKMPhase2,r=e.purchased;if(t&&!r)return n.a.createElement(z,e);return n.a.createElement(B,e)}J.displayName="EKMView";J.defaultProps=Y;var X=function e(t){return{featureEKMPhase2:Object(d["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var Z=Object(o["connect"])(X)(J);var $=Z;Object(c["a"])("interop.ekmStatus",{render:function e(t,r,a){if(!t)throw new Error("ekmStatus render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement($,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(3);var d=r.n(u);var p=r(6);var v=r.n(p);var m=r(7);var h=r.n(m);var f=r(8);var b=r.n(f);var g=r(9);var _=r.n(g);var y=r(0);var O=r(2);var k=r(1757);var E=r(16);var j=r.n(E);var C=r(159);var S=r(10);var w=r(1562);function I(e){var t=e.workspaceName,r=e.workspaceDomain,a=e.workspaceDesc,n=e.accessSetting;var i={name:t,domain:r};if(a||n)return d()({},i,{description:a,access_setting:n});return i}var T=r(37);var A=r.n(T);var N=r(5);var P=r.n(N);var R=r(54);var M=r(179);var x=r(687);var D=r(321);var F=new S["b"]("enterprise_dashboard");var L=/^[a-z0-9-]+$/i;var B=/[a-z]+/i;var U=/^[a-z0-9]/i;var q=/[a-z0-9]$/i;var G=void 0;function H(){G={empty_domain:F.t("Please fill in a workspace domain."),invalid_domain_characters:F.t("Your domain can only have letters, numbers, and dashes."),domain_no_start_end_dash:F.t("Your domain can\u2019t start or end with a dash."),domain_minimum_one_letter:F.t("Your domain needs at least one letter in it."),maximum_domain_length_reached:Object(D["b"])(ne),empty_name:F.t("Please fill in a name."),maximum_workspace_name_length_reached:Object(D["b"])(ie),empty_description:F.t("Please fill in a workspace description."),maximum_description_length_reached:Object(D["b"])(se)};return null}function W(e){return q.test(e)}function V(e){return e.length<=ne}function K(e){return e.length<=ie}function z(e){return e.length<=se}function Q(e){return U.test(e)}function Y(e){return e.trim().length>0}function J(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e))return G.empty_name;if(!K(e))return G.maximum_workspace_name_length_reached;return""}function X(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e)||"organization"===e)return G.empty_domain;if(!V(e))return G.maximum_domain_length_reached;if(!L.test(e))return G.invalid_domain_characters;if(!B.test(e))return G.domain_minimum_one_letter;if(!Q(e)||!W(e))return G.domain_no_start_end_dash;return""}function Z(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e))return G.empty_description;if(!z(e))return G.maximum_description_length_reached;return""}function $(e){H();var t=e.workspaceName,r=e.workspaceDomain,a=e.workspaceDesc;var n=J(t);var i=X(r);var s=Z(a);if(!n&&!i&&!s)return{};return{workspaceName:n,workspaceDomain:i,workspaceDesc:s}}var ee={};Object.defineProperty(ee,"isValidWorkspaceName",{get:function e(){return J},set:function e(t){J=t}});Object.defineProperty(ee,"isValidWorkspaceDomain",{get:function e(){return X},set:function e(t){X=t}});Object.defineProperty(ee,"isValidWorkspaceDescription",{get:function e(){return Z},set:function e(t){Z=t}});var te=new S["b"]("enterprise_dashboard");var re={workspaceName:y["b"].string,workspaceDomain:y["b"].string,workspaceDesc:y["b"].string,errors:y["b"].object,onSubmit:y["b"].func.isRequired};var ae={workspaceName:null,workspaceDomain:null,workspaceDesc:null,errors:null};var ne=21;var ie=255;var se=255;var oe=function e(t){Object(C["b"])(Object(C["a"])().teams.setCreateTeamErrors(t))};var le=function e(t,r){Object(C["b"])(Object(C["a"])().teams.setCreateTeamError(t,r))};var ce=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={values:{workspaceDomain:r.props.workspaceDomain,workspaceName:r.props.workspaceName,workspaceDesc:r.props.workspaceDesc},errors:r.props.errors};return r}h()(t,[{key:"onInputChanged",value:function e(t,r){this.setFormValue(t,r);le(t,"")}},{key:"setFormValue",value:function e(t,r){this.setState(function(e){return{values:d()({},e.values,P()({},t,r))}})}},{key:"bindArgs",value:function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return t.bind.apply(t,[this].concat(a))}},{key:"submit",value:function e(t){var r=$(this.state.values);if(!Object(O["isEmpty"])(r)){oe(r);return}this.props.onSubmit(this.state.values,t)}},{key:"renderTextInput",value:function e(t){var r=t.suffix,a=t.name,i=A()(t,["suffix","name"]);return n.a.createElement(M["a"],d()({},i,{name:a,suffix:r,onChange:this.bindArgs(this.onInputChanged,a)}))}},{key:"renderNameInput",value:function e(){var t=this.state.values.workspaceName;var r=Object(O["get"])(this.props.errors,"workspaceName");var a="workspace_input_name";var n={name:"workspaceName",inputLabel:te.t("Workspace Name"),maxCharacterLimit:ie,value:t,id:a,labelId:a+"_label"};r&&(n=d()({},n,{errorText:r}));return this.renderTextElement(n)}},{key:"renderDomainInput",value:function e(){var t=this.state.values.workspaceDomain;var r=Object(O["get"])(this.props.errors,"workspaceDomain");var a="workspace_input_domain";var n={name:"workspaceDomain",inputLabel:te.t("Workspace Domain"),hintText:te.t("Letters, numbers, and hyphens only."),maxCharacterLimit:ne,suffix:te.t(".slack.com"),placeholder:te.t("workspace-url"),value:t,id:a,labelId:a+"_label"};r&&(n=d()({},n,{errorText:r}));return this.renderTextElement(n)}},{key:"renderDescriptionInput",value:function e(){var t=this.state.values.workspaceDesc;var r=Object(O["get"])(this.props.errors,"workspaceDesc");var a="workspace_input_description";var n={name:"workspaceDesc",inputLabel:te.t("Workspace Description"),hintText:te.t("A detailed description can help members of your organization decide whether they should join this workspace."),maxCharacterLimit:se,value:t,id:a,labelId:a+"_label"};r&&(n=d()({},n,{errorText:r}));return this.renderTextareaElement(n)}},{key:"renderTextareaElement",value:function e(t){var r=t.labelId,a=t.inputLabel,i=t.sublabelText,s=t.id,o=t.name,l=A()(t,["labelId","inputLabel","sublabelText","id","name"]);return n.a.createElement(R["a"],{id:r,htmlFor:s,className:"p-ent_workspace_create__label",text:a,subtext:i},n.a.createElement(x["a"],d()({},l,{id:s,name:o,onChange:this.bindArgs(this.onInputChanged,o),resize:"none"})))}},{key:"renderTextElement",value:function e(t){var r=t.inputLabel,a=t.labelId,i=t.sublabelText,s=t.id,o=A()(t,["inputLabel","labelId","sublabelText","id"]);return n.a.createElement(R["a"],{id:a,htmlFor:s,className:"p-ent_workspace_create__label",text:r,subtext:i},this.renderTextInput(d()({id:s},o)))}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderNameInput(),this.renderDomainInput(),this.renderDescriptionInput())}}]);return t}(a["Component"]);ce.displayName="CreateWorkspaceModalNameForm";ce.defaultProps=ae;var ue=ce;var de=r(211);var pe=r(364);var ve=new S["b"]("enterprise_dashboard");var me={accessSetting:y["b"].string,onSubmit:y["b"].func.isRequired};var he={accessSetting:null};var fe=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={accessSetting:r.props.accessSetting};Object(k["a"])(r,["renderAccessSettingRadio","handleAccessSettingChange"]);return r}h()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnAccessSettingChange(t)}},{key:"getAccessSetting",value:function e(){return this.state.accessSetting}},{key:"setAccessSetting",value:function e(t){this.setState(function(){return{accessSetting:t}})}},{key:"updateOnAccessSettingChange",value:function e(t){var r=t.accessSetting!==this.props.accessSetting;r&&this.setAccessSetting(t.accessSetting)}},{key:"submit",value:function e(t){var r=this.getAccessSetting();this.props.onSubmit(r,t)}},{key:"handleAccessSettingChange",value:function e(t){t.persist();this.setAccessSetting(t.target.value)}},{key:"renderAccessSettingRadio",value:function e(t){var r=this.state.accessSetting;var a=t.accessType,i=t.accessName,s=t.descriptionText;return n.a.createElement("div",{key:a},n.a.createElement(R["a"],{id:a,htmlFor:"workspace_access_type_"+a,type:"inline",cursor:"pointer",className:"p-ent_workspace_create__label p-ent_workspace_create__label--radio",text:i,subtext:s},n.a.createElement(de["a"],{id:"workspace_access_type_"+a,value:a,onChange:this.handleAccessSettingChange,checked:a===r})))}},{key:"renderAccessSettingForm",value:function e(){var t=[{accessType:"open",accessName:ve.t("Open"),descriptionText:ve.t("Anyone in your organization will be able to join this workspace.")},{accessType:"closed",accessName:ve.t("By Request"),descriptionText:ve.t("Members can request to join this workspace.")},{accessType:"invite_only",accessName:ve.t("Invite Only"),descriptionText:ve.t("Members must be invited by a Workspace Owner or Admin.")},{accessType:"unlisted",accessName:ve.t("Hidden"),descriptionText:ve.t("This workspace will be hidden from the rest of your organization. Members must be invited by a Workspace Owner or Admin.")}];var r=t.map(this.renderAccessSettingRadio);return n.a.createElement(pe["a"],{field:"workspaceAccessSetting",noTouch:true},r)}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderAccessSettingForm())}}]);return t}(a["Component"]);fe.displayName="CreateWorkspaceModalAccessForm";fe.defaultProps=he;var be=fe;var ge=r(3034);var _e=new S["b"]("enterprise_dashboard");var ye={workspaceName:y["b"].string,workspaceDomain:y["b"].string,accessSetting:y["b"].string,workspaceDesc:y["b"].string,apiCallCount:y["b"].number,errors:y["b"].object,ui:y["b"].object,open:y["b"].bool,onSubmit:y["b"].func.isRequired,onCancel:y["b"].func.isRequired};var Oe={workspaceName:"",workspaceDomain:"",accessSetting:"closed",workspaceDesc:"",apiCallCount:null,errors:{},ui:{},open:true};var ke=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={workspaceName:r.props.workspaceName,workspaceDomain:r.props.workspaceDomain,workspaceDesc:r.props.workspaceDesc,accessSetting:r.props.accessSetting,isPending:false};Object(k["a"])(r,["renderChooseNamePane","renderAccessSettingPane","setWorkspaceInfo","setAccessSetting","getWorkspaceInfo"]);return r}h()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnApiCountChange(t);this.updateOnModalClose(t)}},{key:"getWorkspaceInfo",value:function e(){return{workspaceName:this.state.workspaceName,workspaceDomain:this.state.workspaceDomain,accessSetting:this.state.accessSetting,workspaceDesc:this.state.workspaceDesc}}},{key:"setWorkspaceInfo",value:function e(t,r){this.setState(function(){return{workspaceName:t.workspaceName,workspaceDomain:t.workspaceDomain,workspaceDesc:t.workspaceDesc}},r)}},{key:"setAccessSetting",value:function e(t,r){this.setState(function(){return{accessSetting:t}},r)}},{key:"setPendingState",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"updateOnApiCountChange",value:function e(t){var r=t.apiCallCount!==this.props.apiCallCount;if(r){var a=t.apiCallCount>0;this.setPendingState(a)}}},{key:"updateOnModalClose",value:function e(t){var r=this.props.open&&!t.open;r&&this.reset()}},{key:"reset",value:function e(){var t=Oe.workspaceName,r=Oe.workspaceDomain,a=Oe.workspaceDesc,n=Oe.accessSetting;this.setWorkspaceInfo({workspaceName:t,workspaceDomain:r,workspaceDesc:a},O["noop"]);this.setAccessSetting(n);this.setPendingState(Oe.isPending)}},{key:"isPending",value:function e(){return this.state.isPending}},{key:"submit",value:function e(t){this.props.onSubmit(t)}},{key:"buildModalSteps",value:function e(){var t=this;var r=function e(){var r={header:_e.t("Set up your workspace"),subtitle:_e.t("Choose a name and domain for your workspace, and give it a description. You can always change these later."),renderInnerPane:t.renderChooseNamePane};return t.renderModalPane(r)};var a=function e(){var r={header:_e.t("Set access for this workspace"),subtitle:_e.t("Choose how members in your organization can join this workspace."),renderInnerPane:t.renderAccessSettingPane};return t.renderModalPane(r)};var n=function e(){var r=function e(){var r=t.state,a=r.workspaceName,n=r.workspaceDomain;Object(C["b"])(Object(C["a"])().teams.getWorkspaceInfoAvailability({workspaceName:a,workspaceDomain:n}))};t.chooseNameForm.submit(r)};var i=function e(){var r=t.getWorkspaceInfo();t.setPendingState(true);t.submit(I(r));t.createWorkspaceModalRef.goToNextStep()};var s=function e(){t.accessSettingForm.submit(i);t.createWorkspaceModalRef.goToNextStep()};var o=[{children:r,goButtonText:_e.t("Next"),title:_e.t("Choose Name"),withFooter:true,withBreadcrumbHeader:true,showBackButton:false,goButtonIsPending:this.isPending(),showCancelButton:true,onGo:n,onCancel:this.props.onCancel},{children:a,goButtonText:_e.t("Create Workspace"),title:_e.t("Set Access"),withFooter:true,withBreadcrumbHeader:true,showBackButton:true,goButtonIsPending:this.isPending(),showCancelButton:true,onBack:function e(){Object(C["b"])(Object(C["a"])().ui.updateModalStepIndex(0))},onGo:s,cancelText:_e.t("Cancel"),onCancel:this.props.onCancel}];return o}},{key:"renderSubtitle",value:function e(t){if(t)return n.a.createElement("p",{className:"p-ent_workspace_create__subtitle"},t);return null}},{key:"renderChooseNamePane",value:function e(){var t=this;var r=this.state,a=r.workspaceName,i=r.workspaceDomain,s=r.workspaceDesc;var o=this.props.errors;return n.a.createElement(ue,{workspaceName:a,workspaceDomain:i,workspaceDesc:s,errors:o,onSubmit:this.setWorkspaceInfo,ref:function e(r){t.chooseNameForm=r}})}},{key:"renderAccessSettingPane",value:function e(){var t=this;var r=this.state.accessSetting;return n.a.createElement(be,{accessSetting:r,onSubmit:this.setAccessSetting,ref:function e(r){t.accessSettingForm=r}})}},{key:"renderModalPane",value:function e(t){var r=t.header,a=t.subtitle,i=t.renderInnerPane;var s=j()("p-ent_workspace_create__header",{"p-ent_workspace_create__header--with_subtitle":a});return n.a.createElement("div",{className:"p-ent_workspace_create","data-enterprise-teams-create":true},n.a.createElement("div",{className:"p-ent_workspace_create__pane"},n.a.createElement("div",{className:"p-ent_workspace_create__form"},n.a.createElement("h3",{className:s},r),this.renderSubtitle(a),i())))}},{key:"render",value:function e(){var t=this;var r=_e.t("Set up");var a=_e.t("Set access");var i=[r,a];var s={steps:this.buildModalSteps(),breadcrumbTitles:i,onCancel:this.props.onCancel,stepIndex:this.props.ui.modal_step_index,isOpen:this.props.open,position:"fixed"};return n.a.createElement(w["a"],d()({},s,{ref:function e(r){t.createWorkspaceModalRef=r}}))}}]);return t}(a["Component"]);ke.displayName="CreateWorkspaceModal";ke.defaultProps=Oe;var Ee=ke;var je=Ee;Object(c["a"])("interop.createWorkspaceModal",{render:function e(t,r,a){if(!t)throw new Error("createWorkspaceModal render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(je,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(0);var d=r(73);var p=r(4);var v=r(386);var m=r(4631);var h={id:u["b"].string.isRequired,isEnabled:u["b"].bool.isRequired,featurePages:u["b"].bool};var f={featurePages:false};var b=function e(t){var r=t.id,a=t.isEnabled,n=t.featurePages;if(!r||!n||!a)return null;var i=Object(m["a"])(r);return i.view(r)};b.propTypes=h;b.defaultProps=f;var g=function e(t){var r=Object(d["a"])(t);return{id:r,isEnabled:Object(v["e"])(t,r),featurePages:Object(p["isFeatureEnabled"])(t,"feature_pages")}};var _=Object(o["connect"])(g)(b);var y=r(163);var O=function e(t,r){if(!t)throw new Error("mountPageView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(y["a"],null,n.a.createElement(_,null))),r)};var k=function e(t){s.a.unmountComponentAtNode(t)};var E=r(1824);var j=r(16);var C=r.n(j);var S=r(4392);var w={id:u["b"].string.isRequired,className:u["b"].string,legacy:u["b"].bool,featurePages:u["b"].bool};var I={className:void 0,legacy:false,featurePages:false};var T=function e(t){var r=t.id,a=t.className,i=t.legacy,s=t.featurePages;if(!r||!s)return null;var o=Object(m["a"])(r);if(o.header)return o.header({className:a});var l=C()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":i},a);return n.a.createElement("div",{className:l},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},o.label()),n.a.createElement(S["a"],{regionId:"main",flex:true}))};T.displayName="PageHeader";T.defaultProps=I;var A=function e(t){return{featurePages:Object(p["isFeatureEnabled"])(t,"feature_pages")}};var N=Object(o["connect"])(A)(T);var P=r(3246);var R=r(3248);var M={id:u["b"].string.isRequired,isEnabled:u["b"].bool.isRequired,featurePages:u["b"].bool};var x={featurePages:false};var D=function e(t){var r=t.id,i=t.isEnabled,s=t.featurePages;Object(a["useEffect"])(function(){Object(E["b"])()},[]);if(!r||!s||!i)return null;return n.a.createElement("div",{className:"p-pages__legacy_page_header"},n.a.createElement(N,{id:r,legacy:true}))};D.displayName="LegacyPageHeader";D.defaultProps=x;var F=function e(t){var r=Object(d["a"])(t);return{id:r,isEnabled:Object(v["e"])(t,r),featurePages:Object(p["isFeatureEnabled"])(t,"feature_pages")}};var L=Object(o["connect"])(F)(D);var B=function e(t,r){if(!t)throw new Error("mountPageHeader must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(y["a"],null,n.a.createElement(L,null))),r)};var U=function e(t){s.a.unmountComponentAtNode(t)};var q=r(44);Object(q["a"])("interop.mountPageView",O);Object(q["a"])("interop.unmountPageView",k);Object(q["a"])("interop.mountPageHeader",B);Object(q["a"])("interop.unmountPageHeader",U)},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(119);var d=r(27);var p=r(3);var v=r.n(p);var m=r(6);var h=r.n(m);var f=r(7);var b=r.n(f);var g=r(8);var _=r.n(g);var y=r(9);var O=r.n(y);var k=r(0);var E=r(56);var j=r(15);var C=r(18);var S=r(14);var w=r(36);var I=r(250);var T=r(1757);var A=r(16);var N=r.n(A);var P=r(172);var R=r(354);var M=r(128);var x=r(392);var D=r(22);var F=r(707);var L={};L.SelectorInfo=k["b"].shape({selector:k["b"].func.isRequired,name:k["b"].string.isRequired,file:k["b"].string.isRequired,usageCount:k["b"].number.isRequired,reducers:k["b"].arrayOf(k["b"].string)});L.ActionOrThunkInfo=k["b"].shape({action:k["b"].func,thunk:k["b"].func,name:k["b"].string.isRequired,description:k["b"].string.isRequired,file:k["b"].string.isRequired,usageCount:k["b"].number.isRequired,sideEffectsCount:k["b"].number,props:k["b"].arrayOf(k["b"].string),reducers:k["b"].arrayOf(k["b"].string),isThunk:k["b"].bool.isRequired,isFetcher:k["b"].bool.isRequired});L.ReducerInfo=k["b"].shape({reducer:k["b"].func.isRequired,name:k["b"].string.isRequired,file:k["b"].string.isRequired,actions:k["b"].arrayOf(k["b"].string).isRequired,selectors:k["b"].arrayOf(k["b"].string).isRequired});L.MiddlewareInfo=k["b"].shape({middleware:k["b"].func.isRequired,name:k["b"].string.isRequired,file:k["b"].string.isRequired,description:k["b"].string.isRequired});var B=L;var U=r(3250);var q=B.ActionOrThunkInfo,G=B.SelectorInfo,H=B.ReducerInfo,W=B.MiddlewareInfo;var V={actions:k["b"].arrayOf(q).isRequired,selectors:k["b"].arrayOf(G).isRequired,reducers:k["b"].arrayOf(H).isRequired,middlewares:k["b"].arrayOf(W).isRequired,onClose:k["b"].func};var K={onClose:n.a.noop};var z={name:"asc",usageCount:"desc",reducers:"asc",actions:"asc",selectors:"asc",file:"asc",isThunk:"desc",isFetcher:"desc",sideEffectsCount:"desc"};var Q=function(e){O()(t,e);function t(){h()(this,t);var e=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(T["a"])(e,["renderReducers","renderSelectors","renderMiddlewares","renderActionsAndThunks","onSearchTermChange","renderSearchInput","filterResults","changeToTabAndUpdateSearch","onTabChange","sortCollection","updateSort","renderColumnHeader"]);e.state={searchTerm:"",defaultTabId:"selectors",sort:{selectors:{direction:"desc",key:"usageCount"},actionsAndThunks:{direction:"desc",key:"usageCount"},reducers:{direction:"asc",key:"name"},middlewares:{direction:"asc",key:"name"}}};return e}b()(t,[{key:"onSearchTermChange",value:function e(t){t.preventDefault();var r=t.target.value;this.setState(function(){return{searchTerm:r}})}},{key:"onTabChange",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"updateSort",value:function e(t,r){this.setState(function(e){var a=v()({},e.sort);if(a[t].key===r)a[t].direction="asc"===a[t].direction?"desc":"asc";else{a[t].key=r;a[t].direction=z[r]||"asc"}return{sort:a}})}},{key:"sortCollection",value:function e(t,r){var a=this.state.sort;var i=n.a.sortBy(t,a[r].key);"desc"===a[r].direction&&i.reverse();return i}},{key:"changeToTabAndUpdateSearch",value:function e(t,r){var a=this;this.setState(function(){return{defaultTabId:null}},function(){a.setState(function(){return{defaultTabId:t}},function(){a.setState(function(){return{searchTerm:r}})})})}},{key:"filterResults",value:function e(t,r,a){if(!t)return r;var i=t.toLowerCase();var s=r.filter(function(e){var t=false;a.forEach(function(r){var a=e&&e[r];n.a.isArray(a)&&(a=a.join(","));a.toLowerCase().indexOf(i)>=0&&(t=true)});return t});return s}},{key:"renderSearchInput",value:function e(){var t=this.state.searchTerm;return s.a.createElement(x["a"],{className:"p-redox__search_input margin_top_150 margin_bottom_150",value:t,onChange:this.onSearchTermChange,placeholder:"search"})}},{key:"renderColumnHeader",value:function e(t,r,a){var n=this;var i=this.state.sort;var o={};var l=void 0;var c=false;if(r&&a){c=true;o.onClick=function(){n.updateSort(r,a)};i[r].key===a&&(l="asc"===i[r].direction?s.a.createElement(D["b"],{className:"nudge_top_2",inline:true,type:"caret-up"}):s.a.createElement(D["b"],{className:"nudge_top_2",inline:true,type:"caret-down"}))}var u=N()("p-redox__table_cell","p-redox__table_column_header","p-redox__table_column_header--"+a,{"p-redox__table_column_header--sortable":c});return s.a.createElement("td",v()({className:u},o),t,l)}},{key:"renderReducers",value:function e(){var t=this;var r=this.props.reducers;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","file","actions","selectors"]);var i=this.sortCollection(n,"reducers");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","reducers","name"),this.renderColumnHeader("Actions"),this.renderColumnHeader("Selectors"),this.renderColumnHeader("File","reducers","file"),this.renderColumnHeader("Persistence Enabled?")),i.map(function(e,r){return s.a.createElement(X,{key:""+e.name+r,reducer:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderMiddlewares",value:function e(){var t=this.props.middlewares;var r=this.state.searchTerm;var a=this.filterResults(r,t,["name","description","file"]);var n=this.sortCollection(a,"middlewares");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","middlewares","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("File","middlewares","file")),n.map(function(e,t){return s.a.createElement(Z,{key:""+e.name+t,middleware:e})}))))}},{key:"renderSelectors",value:function e(){var t=this;var r=this.props.selectors;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","file"]);var i=this.sortCollection(n,"selectors");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","selectors","name"),this.renderColumnHeader("Usage Count","selectors","usageCount"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("File","selectors","file")),i.map(function(e,r){return s.a.createElement(J,{key:""+e.name+r,selector:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderActionsAndThunks",value:function e(){var t=this;var r=this.props.actions;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","description","file"]);var i=this.sortCollection(n,"actionsAndThunks");var o=s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","actionsAndThunks","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("Usage Count","actionsAndThunks","usageCount"),this.renderColumnHeader("Thunk?","actionsAndThunks","isThunk"),this.renderColumnHeader("Fetcher?","actionsAndThunks","isFetcher"),this.renderColumnHeader("Props"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("# Side Effects","actionsAndThunks","sideEffectsCount"),this.renderColumnHeader("File","actionsAndThunks","file"));return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,i.map(function(e,r){return s.a.createElement(s.a.Fragment,{key:""+e.name+r},r%30===0?o:null,s.a.createElement(Y,{action:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch}))}))))}},{key:"render",value:function e(){var t=this.state.defaultTabId;var r=[{title:"Selectors",id:"selectors",content:this.renderSelectors()},{title:"Actions and Thunks",id:"actionsAndThunks",content:this.renderActionsAndThunks()},{title:"Reducers",id:"reducers",content:this.renderReducers()},{title:"Middleware",id:"middlewares",content:this.renderMiddlewares()}];return s.a.createElement(R["a"],{modalClasses:"p-redox_modal",title:"Redox",showCancelButton:false,showGoButton:false,onCancel:this.props.onClose},s.a.createElement(F["a"],{defaultTabId:t,tabs:r,onTabChange:this.onTabChange}))}}]);return t}(i["Component"]);Q.displayName="Redox";Q.defaultProps=K;var Y=function e(t){var r=t.action,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.isThunk)n=s.a.createElement("td",{className:"p-redox__table_cell"},"n/a");else if(r.reducers&&r.reducers.length){var i=r.reducers;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e){return s.a.createElement(M["a"],{key:e,className:"p-redox__search_term_link",onClick:function t(){a("reducers",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),s.a.createElement("td",{className:"p-redox__table_cell"},r.description),s.a.createElement("td",{className:"p-redox__table_cell"},r.usageCount),s.a.createElement("td",{className:"p-redox__table_cell"},r.isThunk?"x":""),s.a.createElement("td",{className:"p-redox__table_cell"},r.isFetcher?"x":""),s.a.createElement("td",{className:"p-redox__table_cell"},r.props.map(function(e){return s.a.createElement("div",{key:e},e)})),n,s.a.createElement("td",{className:"p-redox__table_cell"},r.sideEffectsCount),s.a.createElement("td",{className:"p-redox__table_cell"},r.file))};Y.displayName="ActionThunkRow";var J=function e(t){var r=t.selector,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.reducers&&r.reducers.length){var i=r.reducers;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return s.a.createElement(M["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("reducers",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),s.a.createElement("td",{className:"p-redox__table_cell"},r.usageCount),n,s.a.createElement("td",{className:"p-redox__table_cell"},r.file))};J.displayName="SelectorRow";var X=function e(t){var r=t.reducer,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.actions&&r.actions.length){var i=r.actions;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return s.a.createElement(M["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("actionsAndThunks",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});var o=void 0;if(r.selectors&&r.selectors.length){var l=r.selectors;o=s.a.createElement("td",{className:"p-redox__table_cell"},l.map(function(e,t){return s.a.createElement(M["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("selectors",e)}},e)}))}else o=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),n,o,s.a.createElement("td",{className:"p-redox__table_cell"},r.file),s.a.createElement("td",{className:"p-redox__table_cell"},Object(P["m"])(r.reducer)?"x":""))};X.displayName="ReducerRow";var Z=function e(t){var r=t.middleware;return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},r.name),s.a.createElement("td",{className:"p-redox__table_cell"},r.description),s.a.createElement("td",{className:"p-redox__table_cell"},r.file))};Z.displayName="MiddlewareRow";var $=Q;var ee=Object(C["a"])();var te=Object(j["a"])();var re=Object(S["a"])();var ae=Object(w["a"])();var ne=Object(I["a"])();var ie={onClose:k["b"].func};var se={onClose:n.a.noop};var oe=function(e){O()(t,e);function t(){h()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"componentDidMount",value:function e(){var t=this;this.interval=setInterval(function(){t.forceUpdate()},1e3)}},{key:"componentWillUnmount",value:function e(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function e(){var t=ve();return s.a.createElement($,v()({onClose:this.props.onClose},t))}}]);return t}(i["Component"]);oe.displayName="ConnectedRedox";oe.defaultProps=se;function le(e){if(!e)return["(no props)"];if(!n.a.isFunction(e)&&n.a.isObject(e))return Object.keys(e);return["(single unnamed payload)"]}function ce(e){var t=[];ae.forEach(function(r){r&&r.has&&r.has(e)&&t.push(r&&r.meta&&r.meta.name)});return t}function ue(e){var t=n.a.values(ee);if(e&&e.has){var r=t.filter(function(t){return e.has(t)});return r.map(function(e){return e.meta.name})}return[]}function de(e){if(e&&e.meta&&e.meta.file){var t=e.meta.file.replace(/-store.*/,"");var r=re.filter(function(e){var r=e&&e.meta&&e.meta.file&&e.meta.file.replace(/-store.*/,"");return r&&r===t});return r.map(function(e){return e.meta.name})}return[]}function pe(e){if(!e||!e.meta||!e.meta.file)return"";var t=[];var r=e.meta.file.replace(/-store.*/,"");ae.forEach(function(e){if(e&&e.meta&&e.meta.file){var a=e.meta.file.replace(/-store.*/,"");r===a&&t.push(e&&e.meta&&e.meta.name)}});return t}function ve(){var e=n.a.map(ee,function(e){var t=e.meta,r=t.name,a=t.description,n=t.file,i=t.usageCount;return{action:e,name:r,description:a,file:n,usageCount:i||0,isThunk:false,isFetcher:false,props:le(e.propTypes),reducers:ce(e),sideEffectsCount:E["e"][e]?E["e"][e].length:0}});var t=n.a.map(te,function(e){var t=e.meta,r=t.name,a=t.description,n=t.file,i=t.usageCount;return{thunk:e,name:r,description:a,file:n,usageCount:i||0,isThunk:true,isFetcher:!!e.isFetcherCreator,props:le(e.propTypes),sideEffectsCount:0}});var r=n.a.map(re,function(e){var t=e.meta,r=t.name,a=t.file,n=t.usageCount;return{selector:e,name:r,file:a,reducers:pe(e),usageCount:n||0}});var a=n.a.map(ae,function(e){var t=e.meta||{},r=t.name,a=t.file;return{reducer:e,name:r||"",file:a||"",actions:ue(e),selectors:de(e)}});var i=n.a.map(ne,function(e){var t=e.meta||{},r=t.name,a=t.file,n=t.description;return{middleware:e,name:r||"",file:a||"",description:n||""}});return{actions:e.concat(t),selectors:r,reducers:a,middlewares:i}}var me=oe;var he=me;var fe=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.a.noop;if(!t)throw new Error("mountRedox must be called with a teamId parameter");var i=Object(d["d"])(t);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(he,{onClose:a})),r)};var be=function e(t){l.a.unmountComponentAtNode(t)};var ge={mountRedox:fe,unmountRedox:be};var _e=r(30);var ye=r(12);var Oe=r(44);var ke=r(65);var Ee="redox-container";var je=false;var Ce=Object(ye["b"])();function Se(){if(je)return;if(!_e["isDev"]&&!_e["isJsPath"]){Ce.warn("Redox only works in a development environment");return}var e=document.getElementById(Ee);if(!e){e=document.createElement("div");e.id=Ee;document.body.appendChild(e)}je=true;fe(TS.boot_data.team_id,e,we)}function we(){if(!_e["isDev"]&&!_e["isJsPath"]){Ce.warn("Redox only works in a development environment");return}je=false;be(document.getElementById(Ee))}Object(Oe["a"])("interop.mountRedox",Se);Object(Oe["a"])("interop.unmountRedox",we);Object(ke["exportToGlobalDebugger"])("redox",Se);Object(ke["exportToGlobalDebugger"])("unmountRedox",we)},function(e,t){e.exports={}},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(26);var d=r.n(u);var p=r(3);var v=r.n(p);var m=r(58);var h=r.n(m);var f=r(6);var b=r.n(f);var g=r(7);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(9);var E=r.n(k);var j=r(0);var C=r(2);var S=r(4);var w=r(29);var I=r(25);var T=r(12);var A=Object(I["a"])("Get payment company info",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason;return e(Object(w["a"])({reason:a,method:"enterprise.payments.companyGet"})).catch(function(e){var r="failed to get payment company info";Object(T["a"])({getState:t}).error("payments",r);throw e})});A.propTypes={reason:j["b"].string.isRequired};var N=Object(I["a"])("Get payments contact list",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason;return e(Object(w["a"])({reason:a,method:"enterprise.payments.contactsList"})).catch(function(e){var r="failed to get payment contact list";Object(T["a"])({getState:t}).error("payments",r);throw e})});N.propTypes={reason:j["b"].string.isRequired};var P=r(1060);var R=r(159);var M=r(357);var x=r(216);var D=r(22);var F=r(16);var L=r.n(F);var B=r(10);var U=r(96);var q=r(3054);var G={loading:j["b"].bool};var H={loading:false};function W(e){var t=e.loading;if(!t)return null;return n.a.createElement("div",{className:"p-billing_loading"},n.a.createElement("div",{className:"p-billing_loading__overlay"}),n.a.createElement("div",{className:"p-billing_loading__content"},n.a.createElement(U["a"],null)))}W.displayName="LoadingState";W.defaultProps=H;var V=W;var K=V;var z=r(3056);var Q={getTeamPaidFeatures:j["b"].func.isRequired,getPaymentsCompany:j["b"].func.isRequired,getPaymentsContacts:j["b"].func.isRequired,setOrgError:j["b"].func.isRequired,featureEKMPhase2:j["b"].bool,orgName:j["b"].string};var Y={featureEKMPhase2:false,orgName:void 0};var J=new B["b"]("enterprise_dashboard");var X=function(e){E()(t,e);function t(e){b()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={billingOverviewLoading:true};return r}_()(t,[{key:"componentDidMount",value:function e(){if(!this.props.featureEKMPhase2)return;this.getBillingOverview()}},{key:"getBillingOverview",value:function e(){var t=this;if(!this.props.featureEKMPhase2)return;var r=this.props,a=r.getTeamPaidFeatures,n=r.getPaymentsCompany,i=r.getPaymentsContacts,s=r.setOrgError;this.setState(function(){return{billingOverviewLoading:true}});var o={reason:"enterprise-billing-dashboard"};Promise.all([a(o),n(o),i(o)]).then(function(e){var r=h()(e,3),a=r[0],n=r[1],i=r[2];t.setState(function(){return{billingOverviewLoading:false,billingCompanyName:n.billing_company_name,billingCompanyAddress:v()({},n.address_fields),billingContacts:i.billing_contacts,paidFeatures:a}})}).catch(function(){s({message:J.t("We couldn\u2019t load your organization\u2019s billing information."),retryAction:function e(){return t.getBillingOverview()},retry_message:J.t("Try again")});t.setState(function(){return{billingOverviewLoading:false}})})}},{key:"getMemberType",value:function e(t){if(t.is_primary_owner)return J.t("Primary Org Owner");if(t.is_owner)return J.t("Org Owner");if(t.is_admin)return J.t("Org Admin");if(t.profile)return J.t("Member");return J.t("Not In Organization")}},{key:"hasELA",value:function e(){var t=this.state.paidFeatures,r=void 0===t?{}:t;return r.is_ela}},{key:"renderNoELAMessage",value:function e(){if(!this.props.featureEKMPhase2)return null;if(this.state.billingOverviewLoading)return null;var t=this.props.orgName;var r=void 0;r=t?J.rt("No ELA information available for <strong>{orgName}</strong>",{orgName:t}):J.t("No ELA information available for your organization.");return n.a.createElement("div",{className:"licensing_table_row--no_ela"},r)}},{key:"renderLicensingTable",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.hasELA();return n.a.createElement("div",{className:"p-billing_overview__licensing_table"},n.a.createElement("div",{className:"licensing_table_row licensing_table_header"},n.a.createElement("div",{className:"licensing_table_cell"},J.t("Annual license")),t&&n.a.createElement("div",{className:"licensing_table_cell"},J.t("Renewal date"))),t?this.renderLicensingTableRows():this.renderNoELAMessage())}},{key:"renderLicensingTableRows",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.state,r=t.billingOverviewLoading,a=t.paidFeatures;a=void 0===a?{}:a;var i=a.level,s=a.add_ons;if(r)return null;var o=[v()({},i,{typeName:J.t("Enterprise License Agreement")})].concat(d()(s.map(function(e){return v()({},e,{typeName:J.t("Add-on")})})));return o.map(function(e){return n.a.createElement("div",{key:Object(C["uniqueId"])(e.feature_id+"_"),className:"licensing_table_row"},n.a.createElement("div",{className:"licensing_table_cell"},n.a.createElement("div",{className:"bold"},e.name),n.a.createElement("div",{className:"sk_dark_gray"},e.typeName)),n.a.createElement("div",{className:"licensing_table_cell"},Object(M["a"])(e.term.end_ts,"{date}")))})}},{key:"renderBillingCompanyInfo",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.state,r=t.billingOverviewLoading,a=t.billingCompanyName,i=t.billingCompanyAddress;if(r)return null;if(!a&&Object(C["isEmpty"])(i))return n.a.createElement("div",null,J.t("No company information"));return n.a.createElement("div",null,a&&n.a.createElement("div",{className:"bold"},a),i.street1&&n.a.createElement("div",{className:"sk_dark_gray"},i.street1),i.street2&&n.a.createElement("div",{className:"sk_dark_gray"},i.street2),(i.city||i.state)&&n.a.createElement("div",{className:"sk_dark_gray"},i.city&&i.city,i.city&&i.state&&", ",i.state&&i.state),i.zip&&n.a.createElement("div",{className:"sk_dark_gray"},i.zip),i.country&&n.a.createElement("div",{className:"sk_dark_gray"},i.country),i.vat_id&&n.a.createElement("div",{className:"sk_dark_gray"},"VAT ID: "+i.vat_id),i.abn_id&&n.a.createElement("div",{className:"sk_dark_gray"},"ABN ID: "+i.abn_id))}},{key:"renderAvatar",value:function e(t){var r=t.profile;var a=r&&r.image_48;var i=L()("p-biling_overview__billing_contact_avatar",{"p-biling_overview__billing_contact_avatar--no_profile":!a});if(a)return n.a.createElement("div",{className:i},n.a.createElement(x["a"],{size:36,imageUrl:r.image_48}));return n.a.createElement("div",{className:i},n.a.createElement(D["b"],{type:"user"}))}},{key:"renderBillingContact",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=t.real_name;var a=t.profile&&t.profile.email||t.email;return n.a.createElement("div",{key:t.id,className:"p-biling_overview__billing_contact"},this.renderAvatar(t),n.a.createElement("div",null,r&&n.a.createElement("div",{className:"bold"},r),a&&n.a.createElement("div",{className:"sk_dark_gray"},a),n.a.createElement("div",{className:"sk_dark_gray bold"},this.getMemberType(t))))}},{key:"renderBillingContacts",value:function e(){var t=this;if(!this.props.featureEKMPhase2)return null;var r=this.state,a=r.billingOverviewLoading,i=r.billingContacts,s=void 0===i?[]:i;if(a)return null;if(!s.length)return n.a.createElement("div",{className:"p-biling_overview__billing_contact--none"},J.t("No billing contacts"));return s.map(function(e){return t.renderBillingContact(e)})}},{key:"renderBillingInfo",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-biling_overview__billing_info_titles"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},J.t("Company")),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},J.t("Billing contacts"))),n.a.createElement("div",{className:"p-biling_overview__billing_info_content"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingCompanyInfo()),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingContacts())))}},{key:"render",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement("div",{className:"p-billing_overview","data-enterprise-billing-overview":true,"data-name":"enterprise_billing_overview"},n.a.createElement("h1",{className:"p-billing_overview__title"},J.t("Billing Overview")),n.a.createElement("p",{className:"p-billing_overview__title_description"},J.t("Below is a summary of your billing information. Upon renewal of your Enterprise License Agreement, we\u2019ll review any increased usage or add-on products to calculate a new rate. For additional invoicing information, please reach out to your Account Executive.")),n.a.createElement("div",{className:"p-billing_overview__container"},n.a.createElement("div",{className:"p-billing_overview__content"},n.a.createElement("div",{className:"p-billing_overview__licensing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},J.t("Licensing")),this.renderLicensingTable()),n.a.createElement("div",{className:"p-billing_overview__billing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},J.t("Billing Information")),this.renderBillingInfo())),n.a.createElement(K,{loading:this.state.billingOverviewLoading})))}}]);return t}(a["PureComponent"]);X.displayName="BillingOverview";X.defaultProps=Y;var Z=function e(t){return{featureEKMPhase2:Object(S["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var $=function e(t){return{getTeamPaidFeatures:function e(r){return t(Object(P["c"])(r))},getPaymentsCompany:function e(r){return t(A(r))},getPaymentsContacts:function e(r){return t(N(r))},setOrgError:function e(r){return t(Object(R["a"])().org.setOrgError(r))}}};var ee=Object(o["connect"])(Z,$)(X);var te=ee;Object(c["a"])("interop.billingOverview",{render:function e(t,r,a){if(!t)throw new Error("billingOverview render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(te,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(3);var i=r.n(n);function s(e,t){return e.map(function(e){return i()({},e,{items:e.items.map(function(e){return{label:t[e],value:e}})})})}var o=r(2);function l(e){return Object(o["flatten"])(e.map(function(e){return e.items}))}function c(e,t){return e.map(function(e){return i()({},e,{items:Object(o["difference"])(e.items,t)})}).filter(function(e){var t=e.items;return t&&t.length})}function u(e,t,r){var a=Object(o["intersection"])(l(e),t);return a.map(function(e){return{label:r[e]}})}var d="interop.enterpriseAnalytics";Object(a["a"])(d+".addLabelAndValueToGroupItems",s);Object(a["a"])(d+".getItemKeysFromGroups",l);Object(a["a"])(d+".filterGroups",c);Object(a["a"])(d+".formatDisabledOptions",u)},,,,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(10);var i=new n["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.isCurrent,a=e.hasNotifications,n=e.isStarred,s=e.isMuted,o=e.hasDraft;var l=function(){if(r&&a&&s&&n&&o)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!r&&a&&s&&n&&o)return i.t("has notifications, muted, starred, has a draft message");if(r&&!a&&s&&n&&o)return i.t("current conversation, muted, starred, has a draft message");if(!r&&!a&&s&&n&&o)return i.t("muted, starred, has a draft message");if(r&&a&&!s&&n&&o)return i.t("current conversation, has notifications, starred, has a draft message");if(!r&&a&&!s&&n&&o)return i.t("has notifications, starred, has a draft message");if(r&&!a&&!s&&n&&o)return i.t("current conversation, starred, has a draft message");if(!r&&!a&&!s&&n&&o)return i.t("starred, has a draft message");if(r&&a&&s&&!n&&o)return i.t("current conversation, has notifications, muted, has a draft message");if(!r&&a&&s&&!n&&o)return i.t("has notifications, muted, has a draft message");if(r&&!a&&s&&!n&&o)return i.t("current conversation, muted, has a draft message");if(!r&&!a&&s&&!n&&o)return i.t("muted, has a draft message");if(r&&a&&!s&&!n&&o)return i.t("current conversation, has notifications, has a draft message");if(!r&&a&&!s&&!n&&o)return i.t("has notifications, has a draft message");if(r&&!a&&!s&&!n&&o)return i.t("current conversation, has a draft message");if(!r&&!a&&!s&&!n&&o)return i.t("has a draft message");if(r&&a&&s&&n&&!o)return i.t("current conversation, has notifications, muted, starred");if(!r&&a&&s&&n&&!o)return i.t("has notifications, muted, starred");if(r&&!a&&s&&n&&!o)return i.t("current conversation, muted, starred");if(!r&&!a&&s&&n&&!o)return i.t("muted, starred");if(r&&a&&!s&&n&&!o)return i.t("current conversation, has notifications, starred");if(!r&&a&&!s&&n&&!o)return i.t("has notifications, starred");if(r&&!a&&!s&&n&&!o)return i.t("current conversation, starred");if(!r&&!a&&!s&&n&&!o)return i.t("starred");if(r&&a&&s&&!n&&!o)return i.t("current conversation, has notifications, muted");if(!r&&a&&s&&!n&&!o)return i.t("has notifications, muted");if(r&&!a&&s&&!n&&!o)return i.t("current conversation, muted");if(!r&&!a&&s&&!n&&!o)return i.t("muted");if(r&&a&&!s&&!n&&!o)return i.t("current conversation, has notifications");if(!r&&a&&!s&&!n&&!o)return i.t("has notifications");if(r&&!a&&!s&&!n&&!o)return i.t("current conversation");return""}();if(t&&l)return i.t("{name} ({context})",{name:t,context:l});if(t)return t;return""}var o=r(1782);var l=r(1827);var c=r(42);var u=r(900);Object(a["a"])("interop.a11y",{makeAriaLabelForMPIM:s,makeAriaLabelForChannel:o["a"],makeAriaLabelForMember:l["a"],isScreenReaderEnabled:c["isScreenReaderEnabled"],focusableSectionManager:u["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(4);var _=r(0);var y=r(10);var O=r(39);var k=r(384);var E=r(900);var j=r(1349);var C=r(1350);var S=r(3301);var w=new y["b"]("calendar");var I={featureCalendarSimpleAgendaView:_["b"].bool,isGlobalNavEnabled:_["b"].bool,isLoading:_["b"].bool};var T={featureCalendarSimpleAgendaView:true,isGlobalNavEnabled:false,isLoading:true};var A=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"focus",value:function e(){return null}},{key:"blur",value:function e(){return null}},{key:"renderBody",value:function e(){var t=this.props,r=t.isLoading,a=t.featureCalendarSimpleAgendaView;if(!a)return null;if(r)return n.a.createElement("div",{className:"p-calendar_flexpane__loading"},w.t("Loading\u2026"));return n.a.createElement("div",null," This is user calendar ")}},{key:"render",value:function e(){var t=this.props,r=t.featureCalendarSimpleAgendaView,a=t.isGlobalNavEnabled;if(!r)return null;return n.a.createElement(E["a"],{component:this,order:4},n.a.createElement(k["a"],{id:O["MESSAGE_CONTAINERS"].ACTIVITY_FLEXPANE},n.a.createElement("div",{className:"p-calendar_flexpane"},!a&&n.a.createElement(j["a"],null,n.a.createElement(C["a"],{size:"medium"}),n.a.createElement("div",null,w.t("Your calendar"))),this.renderBody())))}}]);return t}(n.a.Component);A.displayName="CalendarFlexpane";A.defaultProps=T;var N=function e(t){return{featureCalendarSimpleAgendaView:Object(g["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view")}};var P={};var R=Object(o["connect"])(N,P)(A);var M=R;var x=function e(t,r){if(!t)throw new Error("mountUserCalendar must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(M,null)),r)};var D=function e(t){s.a.unmountComponentAtNode(t)};var F={mountUserCalendarFlexPane:x,unmountUserCalendarFlexPane:D};var L=r(44);Object(L["a"])("interop.mountUserCalendarFlexPane",x);Object(L["a"])("interop.unMountUserCalendarFlexPane",D)},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(2);var d=r(119);var p=r(27);var v=r(6);var m=r.n(v);var h=r(7);var f=r.n(h);var b=r(8);var g=r.n(b);var _=r(9);var y=r.n(_);var O=r(0);var k=r(1757);var E=r(10);var j=r(4);var C=r(805);var S=r(927);var w=r(19);var I=r(706);var T=r(17);var A=r(11);var N=r(22);var P=r(28);var R=r(317);var M=r(139);var x=r(3122);var D={invite:O["b"].object.isRequired,approveRequest:O["b"].func.isRequired,denyRequest:O["b"].func.isRequired,removeRow:O["b"].func.isRequired,featureRequestToInvite:O["b"].bool,featureRequestToInvitePolish:O["b"].bool,channels:O["b"].array,requesterNames:O["b"].array};var F={featureRequestToInvite:false,featureRequestToInvitePolish:false,channels:[],requesterNames:[]};var L=new E["b"]("admin");var B=1e3;var U=200;var q=function(e){y()(t,e);function t(e){m()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["onClickApprove","onClickDeny","onDeleteAnimationTick","onDeleteAnimationEnd","setRef","startDeleteAnimation"]);r.rowRef=null;r.deleteAnimation=null;r.rollupRequestsCutoff=4;r.state={isApproving:false,isApproved:false,isDenying:false,isDenied:false,height:null,opacity:1};return r}f()(t,[{key:"componentWillUnmount",value:function e(){if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onClickApprove",value:function e(){var t=this;var r=this.props,a=r.invite,n=r.approveRequest;var i=this.state,s=i.isApproving,o=i.isDenying;if(s||o)return;this.setState(function(){return{isApproving:true}});n(a).then(function(){t.setState(function(){return{isApproving:false,isApproved:true}});setTimeout(t.startDeleteAnimation,B)})}},{key:"onClickDeny",value:function e(){var t=this;var r=this.props,a=r.invite,n=r.denyRequest;var i=this.state,s=i.isApproving,o=i.isDenying;if(s||o)return;this.setState(function(){return{isDenying:true}});n(a).then(function(){t.setState(function(){return{isDenying:false,isDenied:true}});setTimeout(t.startDeleteAnimation,B)})}},{key:"onDeleteAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;if(!this.rowRef)return;this.setState(function(){return{height:r,opacity:.01*r}},a)}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props.invite;this.props.removeRow(t);this.deleteAnimation=null}},{key:"setRef",value:function e(t){this.rowRef=t}},{key:"startDeleteAnimation",value:function e(){if(!this.rowRef)return;var t=this.rowRef.clientHeight;this.deleteAnimation=Object(I["a"])({fromValue:t,toValue:0,duration:U,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"renderInviteInfo",value:function e(){var t=this.props,r=t.featureRequestToInvite,a=t.invite;if(!r)return null;var n=s.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},s.a.createElement("span",{className:"bold"},a.email));a.real_name&&(n=s.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},s.a.createElement("span",{className:"bold"},a.real_name)," ",s.a.createElement("span",null,"(",a.email,")")));return s.a.createElement("div",{className:"p-admin_invites_row__info"},n,s.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderMemberTypeAndChannels()),s.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderInviters()))}},{key:"renderMemberTypeAndChannels",value:function e(){var t=this.props,r=t.featureRequestToInvite,a=t.invite,n=t.channels;if(!r)return null;if("restricted"!==a.invite_type&&"ultra_restricted"!==a.invite_type)return L.t("Full Member");if(!n||!n.length)return null;var i=Object(u["filter"])(n,function(e){return Object(A["isUnknownOrNonExistent"])(e)});if(i.length){if("ultra_restricted"===a.invite_type)return L.rt("Single-Channel Guest: 1 private channel");var o=Object(u["filter"])(n,function(e){return!Object(A["isUnknownOrNonExistent"])(e)});var l=Object(E["g"])(o.map(function(e){return s.a.createElement(M["a"],{channel:e,inline:true})}),{react:true,noConj:true});if(0===o.length)return L.rt("Multi-Channel Guest: {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{hiddenPrivateChannelsCount:i.length});if(1===o.length)return L.rt("Multi-Channel Guest: {knownChannel} and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannel:l,hiddenPrivateChannelsCount:i.length});return L.rt("Multi-Channel Guest: {knownChannels}, and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannels:l,hiddenPrivateChannelsCount:i.length})}var c=Object(E["g"])(n.map(function(e){return s.a.createElement(M["a"],{channel:e,inline:true})},{react:true}));if("restricted"===a.invite_type)return L.rt("Multi-Channel Guest: {channels}",{channels:c});if("ultra_restricted"===a.invite_type)return L.rt("Single-Channel Guest: {channel}",{channel:c});return null}},{key:"renderInviters",value:function e(){var t=this.props,r=t.featureRequestToInvite,a=t.featureRequestToInvitePolish,n=t.requesterNames,i=t.invite;if(!r)return null;var o=void 0;(!a||n.length<this.rollupRequestsCutoff)&&(o=Object(E["g"])(n.map(function(e,t){var r=i.inviters[t];return s.a.createElement(R["a"],{href:"/team/"+r,target:"_blank",rel:"noopener noreferrer"},e)}),{react:true,noEscape:true}));return!a||n.length<this.rollupRequestsCutoff?L.rt("Requested by {users}",{users:o}):L.rt("Requested by {user} and {numOtherRequesters} others",{user:s.a.createElement(R["a"],{href:"/team/"+i.inviters[0],target:"_blank",rel:"noopener noreferrer"},n[0]),numOtherRequesters:n.length-1})}},{key:"renderInviteActions",value:function e(){var t=this.props.featureRequestToInvite;var r=this.state,a=r.isApproving,n=r.isDenying,i=r.isApproved,o=r.isDenied;if(!t)return null;if(a||i)return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(P["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:a&&!i,disabled:true},i?s.a.createElement(N["b"],{type:"check-small",inline:true}):null,i?L.t("Invitation sent"):L.t("Sending")));if(n||o)return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(P["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:n&&!o,disabled:true},o?L.t("Denied"):L.t("Denying")));return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(P["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickApprove,size:"small"},L.t("Send Invitation")),s.a.createElement(P["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickDeny,size:"small"},L.t("Deny")))}},{key:"render",value:function e(){var t=this.props.featureRequestToInvite;var r=this.state,a=r.height,n=r.opacity;if(!t)return null;var i={};null!==a&&(i={height:a,opacity:n});return s.a.createElement("div",{className:"p-admin_invites_row",ref:this.setRef,style:i},this.renderInviteInfo(),this.renderInviteActions())}}]);return t}(i["Component"]);q.displayName="AdminInvitesRow";q.defaultProps=F;function G(e,t){var r=t.invite;var a=r.channels;"restricted"!==r.invite_type&&"ultra_restricted"!==r.invite_type||(a=r.channels.map(function(t){return Object(w["d"])(e,t)}));var n=r.inviters.map(function(t){return Object(T["getPrefCompliantMemberNameById"])(e,t)});return{featureRequestToInvite:Object(j["isFeatureEnabled"])(e,"feature_request_to_invite"),featureRequestToInvitePolish:Object(j["isFeatureEnabled"])(e,"feature_request_to_invite_polish"),channels:a,requesterNames:n}}var H=Object(c["connect"])(G)(q);var W=r(3954);var V=r(20);var K=Object(V["b"])("TS.web.admin.onApproveInviteRequest",function(){return null});var z=Object(V["b"])("TS.web.admin.decrementInviteRequestsCount",function(){return null});var Q=r(3124);var Y=new E["b"]("admin");var J={featureRequestToInvite:O["b"].bool,featureRequestToInvitePolish:O["b"].bool,fetchInviteRequests:O["b"].func.isRequired,submitApproveInviteRequest:O["b"].func.isRequired,submitDenyInviteRequest:O["b"].func.isRequired};var X={featureRequestToInvite:false,featureRequestToInvitePolish:false};var Z={EMPTY_STATE:"empty-state"};var $=function(e){y()(t,e);function t(e){m()(this,t);var r=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["approveRequest","denyRequest","removeRow"]);r.headers=[{id:"invite_request",value:null,noHover:true}];r.state={invitesData:null};return r}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.fetchInviteRequests().then(function(e){t.setState(function(){return{invitesData:e.requests}})})}},{key:"getHeight",value:function e(t){if(!t||0===t.length)return null;return(t.length<7?100*t.length:700)+"px"}},{key:"getRows",value:function e(){var t=this;var r=this.state.invitesData;if(!r)return null;return r.map(function(e){return{id:"inviteRequest-"+e.id,items:[{id:"invite_request",value:s.a.createElement(H,{invite:e,approveRequest:t.approveRequest,denyRequest:t.denyRequest,removeRow:t.removeRow})}]}})}},{key:"approveRequest",value:function e(t){if(!this.props.featureRequestToInvite)return null;return this.props.submitApproveInviteRequest({requestId:t.id}).then(function(e){var t=e.successful_requests[0];K(t)})}},{key:"denyRequest",value:function e(t){if(!this.props.featureRequestToInvite)return null;return this.props.submitDenyInviteRequest({requestId:t.id}).then(function(){z()})}},{key:"removeRow",value:function e(t){this.setState(function(e){var r=Object(u["reject"])(e.invitesData,{id:t.id});return{invitesData:r}})}},{key:"renderEmptyState",value:function e(){if(!this.props.featureRequestToInvitePolish)return null;return s.a.createElement("div",{className:"p-admin_invites_table_empty_state","data-qa":Z.EMPTY_STATE},s.a.createElement(W["b"],{text:":tada:",emojiSize:W["a"].LARGE})," ",s.a.createElement(W["b"],{text:":confetti_ball:",emojiSize:W["a"].LARGE})," ",s.a.createElement(W["b"],{text:":tada:",emojiSize:W["a"].LARGE}),s.a.createElement("div",{className:"p-admin_invites_table_empty_state_subtitle"},Y.t("Done and Done")),s.a.createElement("div",{className:"p-admin_invites_table_empty_state_text"},Y.t("One way or another, you\u2019ve answered all the requests. What\u2019s next?")))}},{key:"render",value:function e(){if(!this.props.featureRequestToInvite)return null;var t=this.getRows();var r=this.getHeight(t);return s.a.createElement("div",{className:"p-admin_invites_table","data-qa":"admin_invites_table"},t&&0===t.length&&this.props.featureRequestToInvitePolish?this.renderEmptyState():s.a.createElement(S["b"],{height:r,useKeyboardNavigableTable:true,headers:this.headers,rows:t,rowClassName:"p-admin_invites_table__row",disableHover:true}))}}]);return t}(i["Component"]);$.displayName="AdminInvitesTable";$.defaultProps=X;function ee(e){return{featureRequestToInvite:Object(j["isFeatureEnabled"])(e,"feature_request_to_invite"),featureRequestToInvitePolish:Object(j["isFeatureEnabled"])(e,"feature_request_to_invite_polish")}}var te=function e(t){return{fetchInviteRequests:function e(r){return t(Object(C["e"])(r))},submitApproveInviteRequest:function e(r){return t(Object(C["i"])(r))},submitDenyInviteRequest:function e(r){return t(Object(C["k"])(r))}}};var re=Object(c["connect"])(ee,te)($);var ae=function e(t,r){var a=document.getElementById("admin_invites_table_mount_point");if(!a||!t)return;var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(re,n()({},r,{onClose:o}))),a)};var ne={mountAdminInvitesTable:ae};var ie=r(44);Object(ie["a"])("interop.mountAdminInvitesTable",ae)},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(2);var s=r(29);var o=r(44);var l=r(1484);var c=["activity.mentions","channels.history","channels.insights","channels.listShared","channels.replies","chat.command","conversations.history","files.info","files.list","groups.history","groups.listShared","groups.replies","highlights.briefing","im.history","im.replies","mpim.history","pins.list","search.files","search.messages","stars.list","subscriptions.thread.getView","subteams.list","subteams.users.list","unread.history"];function u(e){return c.includes(e)}var d=c;var p=["activity.mentions","channels.history","conversations.history","groups.history","im.history","mpim.history","pins.list","unread.history"];function v(e){return p.includes(e)}var m=p;var h=["activity.mentions","conversations.history","conversations.info","unread.history","pins.list"];function f(e){return h.includes(e)}var b=h;function g(e){var t=e.data,r=e.method,a=e.args;var i=n()({},t,{args:null});var s=false===r.startsWith("bots.")&&TS.bots.legacyEnsureBotsInDataArePresent(i,r,a&&a.channel);var o=false===r.startsWith("users.")&&false===v(r)&&TS.members.legacyEnsureMembersInDataArePresent(i,r);var l=false===r.startsWith("teams.")&&TS.teams.ensureTeamsInDataArePresent(i,"api/ensureModelForLegacy for method: "+r);var c=false===f(r)&&TS.shared.legacyEnsureModelObsInDataArePresent(i,r);return TS.ensureFullyBooted().then(function(){return c}).then(function(){return Promise.join(s,o,l)}).catch(TS.error)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reason||e._x_reason||"legacy_no_reason_provided"}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expedited,r=void 0!==t&&t;return function(e,t,a,i){var o={method:e,args:t,reason:_(t),EXPEDITED:r,SET_ACTIVE:!TS.client&&!i};var l=function r(a){return{ok:a.ok,request_id:a.request_id,data:a,method:e,args:t}};var c=TS.redux.dispatch(Object(s["a"])(o)).then(l).tap(u(e)&&g).catch(function(e){e.args=n()({_attempts:e.attempts},e.args);throw e});"function"===typeof a&&(c=c.then(function(e){return a(true,e.data,t)}).catch(function(e){return a(false,e.data,t)}));return c}}function O(){return Object(l["b"])(TS.redux.getState())}function k(){return O().isPaused()}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i["noop"];O().awaitEmptyQ().then(e)}var j=y();var C=y({expedited:true});Object(o["a"])("interop.api",{call:j,callExpedited:C,callImmediately:C,getQueue:O,isPaused:k,callFuncWhenApiQisEmpty:E})},,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(284);var i=r(101);var s=r(1274);function o(){return Object(s["a"])({channelId:null,startTs:null})}var l=r(0);var c=r(15);var u=r(73);var d=Object(c["b"])("Switch to a channel if it is not currently active",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=Object(u["a"])(t());n!==a&&e(Object(s["a"])({channelId:a}))});d.propTypes={channelId:l["b"].string};var p=d;var v=r(1441);var m=r(23);var h=r(4);function f(e,t,r){if(!e)return null;if(!t)return null;if(!r)return null;var a=Date.now();return e+"-"+t+"-"+r+"-"+a+"000"}var b=Object(c["b"])("Update the active channel session id",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=t();var s=Object(m["b"])(n);var o=Object(h["getCurrentUserId"])(n);var l=f(s,o,a);e(Object(i["f"])(l))});b.propTypes={channelId:l["b"].string};var g=b;function _(){return Object(n["b"])(TS.redux.getState())}function y(){return Object(n["k"])(TS.redux.getState())}function O(){return TS.redux.dispatch(o())}function k(){return TS.redux.dispatch(i["g"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(i["c"].apply(void 0,arguments))}function j(){return TS.redux.dispatch(i["m"].apply(void 0,arguments))}function C(){return TS.redux.dispatch(p.apply(void 0,arguments))}function S(){return Object(n["h"])(TS.redux.getState())}function w(){return TS.redux.dispatch(i["i"].apply(void 0,arguments))}function I(){return TS.redux.dispatch(i["j"].apply(void 0,arguments))}function T(){return TS.redux.dispatch(i["l"].apply(void 0,arguments))}function A(){return TS.redux.dispatch(v["a"].apply(void 0,arguments))}function N(){return TS.redux.dispatch(g.apply(void 0,arguments))}function P(){return Object(n["c"])(TS.redux.getState())}Object(a["a"])("interop.messagePane",{getChannelSessionId:_,getPrevChannelId:y,hideMessagePane:O,setAppSpaceOpen:k,jumpToTimestamp:E,setOverlayVisible:j,switchToChannelIfNotActive:C,getMessagePaneStartTs:S,setGhostLastRead:w,setHighlightsBackButtonVisible:I,setNewxpOnboardingStep:T,deprecatedMaybeAnimateDeleteMessage:A,updateActiveChannelSessionId:N,getFocusRequestedTs:P})},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(0);var b=r(16);var g=r.n(b);var _=r(28);var y=r(22);var O=r(10);var k=r(3238);var E=new O["b"]("migration_blocker_page");var j={enterpriseName:f["b"].string,sendEmail:f["b"].bool,teamName:f["b"].string,migrationID:f["b"].string,isOrgOwner:f["b"].bool,isWorkspaceOwner:f["b"].bool,isOrgAdmin:f["b"].bool,isWorkspaceAdmin:f["b"].bool,teamURL:f["b"].string};var C={isOrgOwner:false,isWorkspaceOwner:false,isOrgAdmin:false,isWorkspaceAdmin:false,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:false,teamName:null};var S=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderMigrationTitle",value:function e(){var t=this.props,r=t.teamName,a=t.enterpriseName;return n.a.createElement("h3",{className:"p-migration_blocker_page__title"},E.t("The {teamName} workspace is joining {enterpriseName}!",{teamName:r,enterpriseName:a}))}},{key:"renderMigrationMessage",value:function e(){var t=this.props,r=t.enterpriseName,a=t.sendEmail;var i=E.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:r,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return n.a.createElement("div",{className:"p-migration_blocker_page__description"},i,a?E.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationButton",value:function e(){var t=this.props,r=t.migrationID,a=t.isOrgOwner,i=t.isWorkspaceOwner,s=t.isOrgAdmin,o=t.isWorkspaceAdmin,l=t.teamURL;if(!a&&!i&&!s&&!o)return null;return n.a.createElement(_["c"],{className:"p-migration_blocker_page__button",href:l+"migrations/"+r+"/status"},n.a.createElement("div",{className:"p-migration_blocker_page__button__text"},n.a.createElement("span",{className:"p-migration_blocker_page__button__title"},E.t("View migration status")),n.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},E.t("Migration status is only visible to owners and admins."))),n.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},n.a.createElement(y["b"],{type:"chevron-large-right"})))}},{key:"render",value:function e(){var t=g()("p-migration_blocker_page","p-migration_blocker_page--large");return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-migration_blocker_text"},n.a.createElement("div",{className:"p-migration_blocker_icon"}),this.renderMigrationTitle(),this.renderMigrationMessage()),this.renderMigrationButton())}}]);return t}(a["Component"]);S.displayName="MigrationBlockerPage";S.defaultProps=C;var w={};var I=S;var T=I;var A=r(163);var N=function e(t,r,a){if(!t)throw new Error("mountMigrationBlocker must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(A["a"],null,n.a.createElement(T,a))),r)};var P=N;var R=r(44);Object(R["a"])("interop.mountMigrationBlocker",P)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(2414);var c=r(0);var u=r(17);var d=r(4608);var p=r(31);var v=r(24);var m=r(35);var h=r(4);var f=r(66);var b=r(22);var g=r(28);var _=r(782);var y=r(532);var O=r(1455);var k=r(1490);var E=r(1457);var j=r(1458);var C=r(1459);var S=r(1316);var w=r(3);var I=r.n(w);var T=r(2);var A=r(10);var N=r(93);var P=r(276);var R=r(309);var M=r(794);var x=r(100);var D=r(1416);var F=new A["b"]("member_profile");var L={isPresenceActive:c["b"].bool,member:c["b"].object.isRequired,menuProps:c["b"].object.isRequired,openPrefsModal:c["b"].func,showFileList:c["b"].func,team:c["b"].object.isRequired,toggleUserPresence:c["b"].func,userCanEditCustomResponses:c["b"].bool};var B={isPresenceActive:false,openPrefsModal:T["noop"],showFileList:T["noop"],toggleUserPresence:T["noop"],userCanEditCustomResponses:false};function U(e){var t=e.isPresenceActive,r=e.member,a=e.menuProps,i=e.openPrefsModal,s=e.showFileList,o=e.team,l=e.toggleUserPresence,c=e.userCanEditCustomResponses;var d=Object(y["a"])(),v=d.featureModernProfileFlexpane;if(!v)return null;var m=void 0;if(Object(u["isSelf"])(r)){var h=void 0;h=t?F.t("Set yourself away"):F.t("[AWAY] Set yourself active");m=[{label:F.t("View preferences"),click:function e(){return i()}},{label:F.t("Account settings"),href:Object(p["getTeamUrl"])(o,"/account/settings")},{type:"separator"},{label:F.t("View your files"),click:function e(){return s({user:r.id})}},{label:h,click:function e(){return l()}}]}else{m=[{label:F.t("View files"),click:function e(){return s({user:r.id})}}];Object(u["isSlackbot"])(r)&&c&&m.push({label:F.t("Create/edit Slackbot responses"),href:Object(p["getTeamUrl"])(o,"/customize/slackbot")})}if(Object(P["canWriteText"])()){m.push({type:"separator"});m.push({label:F.t("Copy member ID"),description:r.id,click:function e(){return Object(P["writeText"])(r.id)}})}return n.a.createElement(D["a"],I()({},a,{template:m}))}U.displayName="MemberProfileOverflowMenu";U.defaultProps=B;function q(e,t){var r=t.member;return{isPresenceActive:Object(R["getPresenceByMemberId"])(e,r.id)===R["PRESENCE_ACTIVE"],userCanEditCustomResponses:Object(N["J"])(e)}}var G={openPrefsModal:function e(){return M["a"].apply(void 0,arguments)},showFileList:function e(){return x["g"].apply(void 0,arguments)},toggleUserPresence:function e(){return R["toggleUserPresence"].apply(void 0,arguments)}};var H=Object(i["connect"])(q,G)(U);var W=r(807);var V=r(1711);var K={currentMemberId:c["b"].string,member:c["b"].object,memberTeam:c["b"].object,team:c["b"].object,canInteract:c["b"].bool};var z={currentMemberId:void 0,member:void 0,memberTeam:void 0,team:void 0,canInteract:true};function Q(e){var t=e.currentMemberId,r=e.member,i=e.memberTeam,s=e.team,o=e.canInteract;var c=Object(a["useMemo"])(function(){var e=[W["a"].STATUS,W["a"].NAME,W["a"].TIME,W["a"].PHONE,W["a"].EMAIL,W["a"].CUSTOM,W["a"].GUEST,W["a"].SHARED_CHANNELS];r.id!==t&&e.push(W["a"].SHARED_WORKSPACES);return e},[t,r]);var u=Object(y["a"])(),d=u.featureEscGridMigrationsClient,v=u.featureModernProfileFlexpane;if(!v)return null;var m=n.a.createElement(O["a"],{className:"p-member_profile__picture",member:r});var h=n.a.createElement(E["a"],{className:"p-member_profile__restriction",member:r,team:i});var w=n.a.createElement(S["a"],{className:"p-member_profile__name",member:r,canInteract:o});if(d&&Object(p["isUnavailable"])(i))return n.a.createElement(n.a.Fragment,null,m,h,w,n.a.createElement(j["a"],{memberTeam:i}));if(!o)return n.a.createElement(n.a.Fragment,null,m,h,w,n.a.createElement(C["a"],{member:r}));return n.a.createElement(l["a"],null,function(e){var t=e.width,a=e.height;return n.a.createElement(_["b"],{width:t,height:a,fade:true},m,h,n.a.createElement(k["a"],{className:"p-member_profile__buttons",includeOverflow:true,member:r,showCallButton:true},n.a.createElement(f["e"],{offsetY:8,position:"bottom-right",renderMenu:function e(t){return n.a.createElement(H,{member:r,menuProps:t,team:i})}},n.a.createElement(g["d"],{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},n.a.createElement(b["b"],{type:"ellipsis"})))),w,n.a.createElement(W["b"],{member:r,team:s,types:c}))})}Q.displayName="MemberProfileDetails";Q.defaultProps=z;function Y(e,t){var r=t.memberId;var a=Object(v["d"])(e,r);if(!a)return{};var n=Object(h["isFeatureEnabled"])(e,"feature_stranger_danger")?Object(d["canMemberInteractById"])(e,r):!Object(u["isStranger"])(a);return{currentMemberId:Object(h["getCurrentUserId"])(e),member:a,memberTeam:Object(m["j"])(e,Object(u["getMemberTeamId"])(a)),team:Object(m["d"])(e),canInteract:n}}var J=Object(i["connect"])(Y)(Q);var X=r(163);var Z=function e(t,r,a){if(!t)throw new Error("mountProfileFlexpane must be called with a teamId parameter");var l=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(X["a"],null,n.a.createElement(J,a))),r)};var $=Z;var ee=r(44);Object(ee["a"])("interop.mountProfileFlexpane",$)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(1830);var d=r(5);var p=r.n(d);var v=r(3);var m=r.n(v);var h=r(6);var f=r.n(h);var b=r(7);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(9);var k=r.n(O);var E=r(0);var j=r(4);var C=r(68);var S=r(1823);var w=r(142);var I=r(1520);var T=r(2112);var A={dndDays:E["b"].string.isRequired,dndEnabledDays:E["b"].objectOf(E["b"].string).isRequired,dndBeforeDays:E["b"].objectOf(E["b"].string).isRequired,dndAfterDays:E["b"].objectOf(E["b"].string).isRequired,dndBaseBeforeTime:E["b"].string.isRequired,dndBaseAfterTime:E["b"].string.isRequired,featureGranularDnd:E["b"].bool};var N={featureGranularDnd:false};var P=function(e){k()(t,e);function t(e){f()(this,t);var r=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.dndDays,n=e.dndEnabledDays,i=e.dndBeforeDays,s=e.dndAfterDays,o=e.dndBaseBeforeTime,l=e.dndBaseAfterTime;r.state={dndDays:a,dndEnabledDays:n,dndBeforeDays:i,dndAfterDays:s,dndBaseBeforeTime:o,dndBaseAfterTime:l};r.handleDndDaysChange=r.handleDndDaysChange.bind(r);r.handleTimeChange=r.handleTimeChange.bind(r);r.handleAllDayChange=r.handleAllDayChange.bind(r);r.handleDayChange=r.handleDayChange.bind(r);return r}g()(t,[{key:"getDayOfTheWeek",value:function e(t){if(!t)return null;return t.split("_")[2]}},{key:"handleDndDaysChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value;var a=this.state,n=a.dndBaseBeforeTime,i=a.dndBaseAfterTime,s=a.dndEnabledDays;if(r===w["a"].CUSTOM){this.setState(function(){return{dndDays:r}});return}var o=Object(I["a"])({dndDays:r,dndEnabledDays:s});var l=o?w["b"].DISABLED:w["b"].PARTIAL;var c=r===w["a"].WEEKDAYS;this.setState(function(){return{dndDays:r,dndBeforeDays:{monday:n,tuesday:n,wednesday:n,thursday:n,friday:n,saturday:n,sunday:n},dndAfterDays:{monday:i,tuesday:i,wednesday:i,thursday:i,friday:i,saturday:i,sunday:i},dndEnabledDays:{monday:l,tuesday:l,wednesday:l,thursday:l,friday:l,saturday:c?w["b"].ALL_DAY:l,sunday:c?w["b"].ALL_DAY:l}}})}},{key:"handleTimeChange",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.value,n=r.type,i=r.pref;var s=this.state.dndDays;var o="dndBeforeDays";var l="dndBaseBeforeTime";if("AFTER"===n){o="dndAfterDays";l="dndBaseAfterTime"}if(s===w["a"].CUSTOM){this.setState(function(e){return p()({},o,m()({},e[o],p()({},t.getDayOfTheWeek(i),a)))});return}this.setState(function(){var e;return e={},p()(e,o,{monday:a,tuesday:a,wednesday:a,thursday:a,friday:a,saturday:a,sunday:a}),p()(e,l,a),e})}},{key:"handleAllDayChange",value:function e(t){var r=this;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.pref;var i=this.state.dndDays;var s=t.target.checked?w["b"].DISABLED:w["b"].PARTIAL;if(i===w["a"].CUSTOM){this.setState(function(e){return{dndEnabledDays:m()({},e.dndEnabledDays,p()({},r.getDayOfTheWeek(n),s))}});return}var o=i===w["a"].WEEKDAYS;this.setState(function(){return{dndEnabledDays:{monday:s,tuesday:s,wednesday:s,thursday:s,friday:s,saturday:o?w["b"].ALL_DAY:s,sunday:o?w["b"].ALL_DAY:s}}})}},{key:"handleDayChange",value:function e(t){var r=this;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.pref;var i=t.target.checked?w["b"].PARTIAL:w["b"].ALL_DAY;this.setState(function(e){return{dndEnabledDays:m()({},e.dndEnabledDays,p()({},r.getDayOfTheWeek(n),i))}})}},{key:"render",value:function e(){var t=this.props.featureGranularDnd;var r=this.state,i=r.dndDays,s=r.dndEnabledDays,o=r.dndBeforeDays,l=r.dndAfterDays,c=r.dndBaseBeforeTime,u=r.dndBaseAfterTime;if(!t)return null;return n.a.createElement(a["Fragment"],null,n.a.createElement(S["a"],{dndDays:i,dndEnabledDays:s,dndBeforeDays:o,dndAfterDays:l,dndBaseBeforeTime:c,dndBaseAfterTime:u,handleDndDaysChange:this.handleDndDaysChange,handleTimeChange:this.handleTimeChange,handleAllDayChange:this.handleAllDayChange,handleDayChange:this.handleDayChange,featureGranularDnd:t}))}}]);return t}(a["Component"]);P.displayName="DndAdminPreferences";P.defaultProps=N;var R=function e(t){return{featureGranularDnd:Object(j["isFeatureEnabled"])(t,"feature_granular_dnd"),dndDays:Object(C["a"])(t,"dnd_days"),dndEnabledDays:{monday:Object(C["a"])(t,"dnd_enabled_monday"),tuesday:Object(C["a"])(t,"dnd_enabled_tuesday"),wednesday:Object(C["a"])(t,"dnd_enabled_wednesday"),thursday:Object(C["a"])(t,"dnd_enabled_thursday"),friday:Object(C["a"])(t,"dnd_enabled_friday"),saturday:Object(C["a"])(t,"dnd_enabled_saturday"),sunday:Object(C["a"])(t,"dnd_enabled_sunday")},dndBeforeDays:{monday:Object(C["a"])(t,"dnd_before_monday"),tuesday:Object(C["a"])(t,"dnd_before_tuesday"),wednesday:Object(C["a"])(t,"dnd_before_wednesday"),thursday:Object(C["a"])(t,"dnd_before_thursday"),friday:Object(C["a"])(t,"dnd_before_friday"),saturday:Object(C["a"])(t,"dnd_before_saturday"),sunday:Object(C["a"])(t,"dnd_before_sunday")},dndAfterDays:{monday:Object(C["a"])(t,"dnd_after_monday"),tuesday:Object(C["a"])(t,"dnd_after_tuesday"),wednesday:Object(C["a"])(t,"dnd_after_wednesday"),thursday:Object(C["a"])(t,"dnd_after_thursday"),friday:Object(C["a"])(t,"dnd_after_friday"),saturday:Object(C["a"])(t,"dnd_after_saturday"),sunday:Object(C["a"])(t,"dnd_after_sunday")},dndBaseBeforeTime:Object(C["a"])(t,"dnd_before_monday"),dndBaseAfterTime:Object(C["a"])(t,"dnd_after_monday")}};var M=Object(o["connect"])(R)(P);var x=r(163);var D=function e(t,r){if(!t)throw new Error("mountDndPreferences must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(x["a"],null,n.a.createElement(u["a"],null))),r)};var F=function e(t){s.a.unmountComponentAtNode(t)};var L=function e(t,r){if(!r)throw new Error("mountDndAdminPreferences needs a valid reactRoot to mount to");if(!t)throw new Error("mountDndAdminPreferences must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(x["a"],null,n.a.createElement(M,null))),r)};var B=r(44);Object(B["a"])("interop.mountDndPreferences",D);Object(B["a"])("interop.unmountDndPreferences",F);Object(B["a"])("interop.mountDndAdminPreferences",L)},,function(e,t,r){"use strict";r.r(t);var a={};r.r(a);r.d(a,"hydrateStartData",function(){return _});r.d(a,"getStartData",function(){return y});var n=r(26);var i=r.n(n);var s=r(3);var o=r.n(s);var l=r(43);var c=r(2);var u=r.n(c);var d=r(15);var p=r(0);var v=r(11);var m=r(37);var h=r.n(m);var f=r(25);var b=r(29);var g=Object(f["a"])("Fetch start data",function(e,t,r){var a=r.reason,n=h()(r,["reason"]);var i=o()({flannel_api_ver:4,only_self_subteams:1},n);return e(Object(b["b"])({method:"client.boot",args:i,reason:a}))});g.propTypes={reason:p["b"].string.isRequired,only_self_subteams:p["b"].oneOf([0,1])};var _=Object(d["b"])("Hydrate start data by fetching any required objects",function(){var e=Object(l["method"])(function(e,t,r){var a=r.startData;var n=o()({},a.rtm_start);var s=u.a.get(a,"self",u.a.get(n,"self"));var l=[].concat(i()(n.channels||[]),i()(n.ims||[]),i()(n.mpims||[]));var c=n.channels_latest;var d=[];if(l&&c){var p=n.last_read,m=void 0===p?{}:p,h=n.channels_priority,f=void 0===h?{}:h,b=n.is_open,g=void 0===b?[]:b,_=n.starred,y=void 0===_?[]:_;var O=g.reduce(function(e,t){e[t]=true;return e},{});var k=y.reduce(function(e,t){e[t]=true;return e},{});var E=l.length;for(var j=0;j<E;j++){var C=l[j];var S=C.id;var w=c[S];var I=Object(v["isIm"])(C)||Object(v["isMpim"])(C)||!!w;var T=m[S];var A=f[S];var N=!!k[S];var P=!!O[S];var R=Object(v["isIm"])(C)||Object(v["isMpim"])(C)?o()({},C,{is_member:I,latest:w,last_read:T,priority:A,is_starred:N,is_open:P}):o()({},C,{is_member:I,latest:w,last_read:T,priority:A,is_starred:N});d.push(R)}}delete n.users;delete n.updated_users;delete n.updated_bots;n.channels=d;n.bots=[];n.users=[s];return Promise.resolve(n)});return function(t,r,a){return e.apply(this,arguments)}}());_.propTypes={startData:p["b"].object.isRequired};var y=Object(d["b"])("Fetch start data",function(){var e=Object(l["method"])(function(e){return e(g({reason:"fetch-legacy-start-data"})).then(function(t){return e(_({startData:{rtm_start:t}}))})});return function(t){return e.apply(this,arguments)}}());y.propTypes={};var O=r(44);Object(O["a"])("interop.boot",{data:a})},function(e,t,r){"use strict";r.r(t);var a=r(71);var n=r(44);var i=r(848);var s=r(58);var o=r.n(s);var l=r(2);var c=r(12);var u=r(42);var d=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];var p=["B","kB","MB","GB","TB","PB","EB","ZB","YB"];var v=function e(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===t)return 0;if(r===a)return parseFloat(t.toFixed(n));var s=i?1024:1e3;var o=i?d:p;var l=o.findIndex(function(e){return e.toLowerCase()===r.toLowerCase()});var c=o.findIndex(function(e){return e.toLowerCase()===a.toLowerCase()});if(-1===l)throw new Error("Unknown currentType '"+r+"' passed to convertToSize");if(-1===c)throw new Error("Unknown desiredType '"+a+"' passed to convertToSize");if(l<c)return parseFloat((t/Math.pow(s,c-l)).toFixed(n));return parseFloat((t*Math.pow(s,l-c)).toFixed(n))};var m=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B";var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(0===t)return{size:0,type:"B"};var i=n?1024:1e3;var s=n?d:p;var o=Math.log(t)/Math.log(i);o<1&&(o=-Math.floor(Math.log(Math.abs(o))/Math.log(10)+1));var l=s.findIndex(function(e){return e.toLowerCase()===r.toLowerCase()});var c=Math.max(Math.min(l+Math.floor(o),s.length-1),0);if(-1===l)throw new Error("Unknown currentType '"+r+"' passed to convertToSize");return{size:v(t,r,s[c],a,n),type:s[c]}};var h=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return v(t,"B","KB",r,false)};var f=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return v(t,"B","MB",r,false)};var b=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return v(t,"B","GB",r,false)};var g=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return v(t,"KB","MB",r,false)};var _=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return v(t,"KB","GB",r,false)};var y=r(65);var O=r(30);var k=r(38);var E=Object(c["b"])();var j=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.desktop;var a=r.stats;var n=a.getMemoryUsage();var i=a.getAppMetrics();var s=a.getAppMemoryUsage?a.getAppMemoryUsage():Promise.resolve();return Promise.all([n,i,s]).then(function(e){var r=o()(e,3),n=r[0],i=r[1],c=r[2];var u={};if(navigator&&navigator.hardwareConcurrency){var d=Object(l["sumBy"])(i,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});u["cpu_v4_app_"+t+"_teams"]=d.toFixed(2)}if(Object(O["isElectronAndAtLeastVersion"])("4.0.0"))if(c){n&&(u.memory_v4_mb_full_client=Math.ceil(g(n.private)));var p=Object(l["sumBy"])(c,function(e){return e.memory.private});var v=Object(l["sumBy"])(c,function(e){return e.memory.shared});var m=p+v;var h=Math.ceil(g(p));var b=Math.ceil(g(m));u["memory_v4_app_mb_"+t+"_teams"]=b;u["memory_v4_app_private_mb_"+t+"_teams"]=h}else E.error("STATS","No memory stats collected stats.getAppMemoryUsage:"+a.getAppMemoryUsage+" appMemoryMetricsUsage:"+s,{subtype:"stats_no_memory"});else{n&&(u.memory_v4_mb_full_client=Math.ceil(g(n.privateBytes)));var _=Object(l["sumBy"])(i,function(e){return e.memory.privateBytes});var y=Object(l["sumBy"])(i,function(e){return e.memory.workingSetSize});var k=Math.ceil(g(_));var j=Math.ceil(g(y));u["memory_v4_app_mb_"+t+"_teams"]=j;u["memory_v4_app_private_mb_"+t+"_teams"]=k}if(window.performance&&window.performance.memory){u["heap_v4_used_mb_"+t+"_teams"]=f(performance.memory.usedJSHeapSize);u["heap_v4_total_mb_"+t+"_teams"]=f(performance.memory.totalJSHeapSize)}return u}).catch(function(e){return E.warn("metrics: Invalid data returned by desktop.stats",e.message)})};var C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;var r=t.stats;var a=r.getMemoryUsage();var n=r.getAppMetrics();var i=r.getAppMemoryUsage?r.getAppMemoryUsage():Promise.resolve();return Promise.all([a,n,i]).then(function(e){var t=o()(e,3),r=t[0],a=t[1],n=t[2];var i={};var s=a.filter(function(e){return"Tab"===e.type});var c=s.length-1;if(navigator&&navigator.hardwareConcurrency){var u=Object(l["sumBy"])(a,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});i["cpu_v3_app_"+c+"_teams"]=u.toFixed(2)}if(Object(O["isElectronAndAtLeastVersion"])("4.0.0")){if(n){r&&(i.memory_v3_team_mb_full_client=Math.ceil(g(r.private)));var d=Object(l["sumBy"])(n,function(e){return e.memory.private});var p=Object(l["sumBy"])(n,function(e){return e.memory.shared});var v=d+p;var m=Math.ceil(g(d));var h=Math.ceil(g(v));i["memory_v3_app_mb_"+c+"_teams"]=h;i["memory_v3_app_private_mb_"+c+"_teams"]=m}}else{r&&(i.memory_v3_team_mb_full_client=Math.ceil(g(r.privateBytes)));var f=Object(l["sumBy"])(a,function(e){return e.memory.privateBytes});var b=Object(l["sumBy"])(a,function(e){return e.memory.workingSetSize});var _=Math.ceil(g(f));var y=Math.ceil(g(b));i["memory_v3_app_mb_"+c+"_teams"]=y;i["memory_v3_app_private_mb_"+c+"_teams"]=_}return i}).catch(function(e){return E.warn("metrics: Invalid data returned by desktop.stats",e.message)})};var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;var r=t.stats;var a=r.getTeamsMemoryUsage();var n=r.getCombinedMemoryUsage();return Promise.all([a,n]).then(function(e){var t=o()(e,2),r=t[0],a=t[1];var n={};if(!r)throw r;if(!a)throw a;Object(l["forOwn"])(r,function(e){n["memory_v2_team_mb_"+e.state]=g(e.memory.privateBytes)});var i=a.numTeams;var s=Math.ceil(g(a.memory.sharedBytes));var c=Math.ceil(g(a.memory.privateBytes));n["memory_v2_app_mb_"+i+"_teams"]=s+c;n["memory_v2_app_shared_mb_"+i+"_teams"]=s;n["memory_v2_app_private_mb_"+i+"_teams"]=c;return n}).catch(function(e){return E.warn("metrics: Invalid data returned by desktop.stats",e.message)})};var w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;var r=t.stats;var a=r.getMemoryUsage();var n=r.getCombinedMemoryUsage();return Promise.all([a,n]).then(function(e){var t=o()(e,2),r=t[0],a=t[1];var n={};var i=r.memory.privateBytes+r.memory.sharedBytes;n.memory_v1_usage_team_mb=g(i,3);if(a&&a.memory){var s=a.memory.privateBytes+a.memory.sharedBytes;var l=s/a.numTeams;n.memory_v1_usage_all_mb=g(s,3);n.memory_v1_usage_all_per_team_mb=g(l,3)}else E.warn("Unexpected results from call to getCombinedMemoryUsage()",a);return n}).catch(function(e){return E.warn("Error logging combined memory stats",e.message)})};var I=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;if(!t||!t.stats||!Object(u["canRequestMetrics"])())return Promise.resolve(null);var r=t.stats;if(r.getAppMetrics)return C(t);if(r.getTeamsMemoryUsage&&r.getCombinedMemoryUsage)return S(t);if(r.getMemoryUsage)return w(t);return Promise.resolve(null)};function T(e){var t=e.state;if(!Object(u["canRequestMetrics"])()||!Object(u["isSelectedTeam"])()||Object(k["a"])())return null;return I().then(function(e){if(!e)return null;var r=t?Object(a["c"])({state:t}):Object(a["a"])();var n=Object.keys(e);n.forEach(function(t){return r.store(t,e[t])});return e})}var A={fetchMemoryStatsV1:w,fetchMemoryStatsV2:S,fetchMemoryStatsV3:C,fetchMemoryStatsV4:j};Object(y["exportToGlobalDebugger"])("ssbMetrics",{fetchMemoryStatsV3:C,fetchMemoryStatsV4:j});var N=36e5;var P=6e5;var R=false;function M(e){var t=N+Math.floor(Math.random()*P);if(!e||R)return;R=true;setInterval(function(){T({state:TS.redux.getState()})},t)}Object(n["a"])("interop.getTelemeter",function(){return Object(a["c"])({state:TS.redux.getState()})});Object(n["a"])("interop.telemeter",{start:function e(){return i["a"].start()},sendDataAndEmptyQueue:function e(){return i["a"].sendDataAndEmptyQueue()},startMemoryStatsLogging:M})},,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(16);var h=r.n(m);var f=r(13);var b=r(196);var g=r(531);var _=r(38);var y=r(384);var O=r(39);var k=r(3);var E=r.n(k);var j=r(2);var C=r.n(j);var S=r(1757);var w=r(183);var I=r(1076);var T=r(12);var A=r(4);var N=r(116);var P=r(792);var R=r(15);var M=r(436);var x=r(132);var D=r(312);var F=r(127);var L="IMPROVED_SEARCH";var B="search_sort";var U=Object(R["b"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.messageSort;Object(T["a"])({getState:t}).info(L,"Set message sort method. messageSort: "+a);e(Object(x["d"])({pref:B,value:a}));e(Object(D["d"])({module:"messages"}));e(Object(M["i"])({method:"set_sort_"+(a===F["d"].relevantMessages?"score":"timestamp")}))});U.propTypes={method:v["b"].string};var q=r(35);var G=r(173);var H=r(122);var W=r(308);var V=r(758);var K=r(100);var z=r(1533);var Q=r(42);var Y=r(31);var J=r(10);var X=r(66);var Z=r(28);var $=r(22);var ee=r(51);var te=r(276);var re=r(802);var ae=r(1759);var ne=r(164);function ie(e,t){var r=e[0]&&e[0].ts;if(!r)return"";var a=Object(ne["n"])(r,{returnMoment:true});return Object(ne["k"])(a,{shortenMonth:t,excludeYear:Object(ne["i"])(r)})}var se=r(1207);var oe=r(800);var le=r(34);var ce=r(220);var ue=r(145);var de=r(11);var pe=r(19);function ve(e,t){if("string"===typeof t)return Object(pe["d"])(e,t,true);if(Object(de["isMpim"])(t))return Object(pe["d"])(e,t.id,true);t&&t.id&&Object(pe["d"])(e,t.id,true);return t}var me=new J["b"]("search");var he=/[\ue000\ue001]/g;function fe(e,t){if(!t)return null;var r=t.team;var a=ve(e,t.channel);var n=t.messages||[];var i=Object(q["d"])(e);var s=null;if(r&&Object(ue["a"])(r)&&i.id!==r){var o=Object(q["j"])(e,r||i.id);s=Object(Y["getTeamDisplayName"])(o)}var l=void 0;var c=Object(de["getDisplayNameForChannel"])(e,a,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var u=ie(n);var d=n.length;var p=i&&i.id!==r&&Object(ue["a"])(r);l=Object(de["isIm"])(a)?me.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(de["isMpim"])(a)?me.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(de["isPendingExternallySharedChannel"])(a)?me.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a pending shared channel, on {date}:",{conversationName:c,date:u,count:d,fallbackHash:"24663e65e2ac4dc269e630e2237e65674bc121fd"}):Object(de["isExternallySharedChannel"])(a)?me.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):p?me.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:c,date:u,count:d,workspaceName:s}):Object(de["isOrgShared"])(a)?me.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):me.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:c,date:u,count:d});l=Object(j["unescape"])(l);var v=n.map(function(t){return Object(ae["a"])({day:{ts:t.ts,isFirstDay:false,isLastDay:false},name:Object(se["a"])(e,{userId:t.user}),time:Object(ce["a"])(t.ts,{do24hrTime:Object(le["g"])(e,"time24"),includeSeconds:false}),text:Object(oe["a"])(e,t.text.replace(he,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:false,isFirstMsgForDay:false,isLastMsgForDay:false,isFirstUnreadMsg:false})});var m=v.join(". ");return l+" "+m+"."}var be=r(683);var ge=r(398);var _e=r(23);var ye=r(331);var Oe=r(694);var ke=r(27);var Ee=r(281);var je=Object(R["b"])("Jump to message by permalink either in this or another workspace",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.permalink;var n=Object(_e["b"])(t());var i=Object(q["j"])(t(),n);var s=i&&i.domain;var o=Object(A["pageNeedsEnterprise"])(t());var l=Object(ge["e"])(a);var c=l.team;var u=c;if(n&&Object(ge["d"])(n,a))return Promise.resolve();if(o&&s&&u!==s){var d=Object(ge["c"])(a);if(!n)return Promise.reject();var p=Object(ke["c"])(n);var v=Object(ge["b"])(p,d);if(!v||Object(de["isNonExistent"])(v)||Object(de["isFromAnotherTeam"])(v)){var m=Object(q["i"])(p,u);if(!m||!m.discoverable)return e(Object(ye["c"])({additionalOptions:{domain:u}})).then(function(e){if(!e){if(Object(ge["d"])(n,a))return Promise.resolve();Object(Ee["f"])(a,"blank");return Promise.resolve()}Object(Oe["b"])(c,a);return Promise.resolve()});Object(Oe["b"])(m,a);return Promise.resolve()}if(Object(ge["d"])(n,a))return Promise.resolve();return Promise.reject()}return Promise.reject()});je.propTypes={permalink:v["b"].string.isRequired};var Ce=je;var Se=r(3584);var we=r(71);var Ie=r(37);var Te=r.n(Ie);var Ae=r(216);var Ne=r(923);var Pe=r(423);var Re=r(2383);var Me=new J["b"]("search");var xe={featureTinyspeck:v["b"].bool,theme:v["b"].string};var De={featureTinyspeck:false,theme:"light"};function Fe(e){var t=e.theme,r=e.featureTinyspeck;if(r)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-message_group"},p.a.createElement("div",{className:"c-search_message c-search_message--"+t},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(Ae["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Ne["a"],{userId:"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_dark_gray"},Me.t("There was an error displaying this message.")))))}Fe.displayName="ErrorSearchMessage";Fe.defaultProps=De;var Le=function e(t){var r="";var a=false;try{r=Object(Pe["a"])(t);a=Object(A["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:r,featureTinyspeck:a}};var Be=Object(f["connect"])(Le)(Fe);var Ue=r(548);var qe=r(245);var Ge=r(139);var He=r(128);var We=new J["b"]("search");var Ve={featureTinyspeck:v["b"].bool,ts:v["b"].string,channel:v["b"].object,user:v["b"].string,theme:v["b"].string};var Ke={featureTinyspeck:false,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};function ze(e){var t=e.user,r=e.theme,a=e.ts,n=e.channel,i=e.featureTinyspeck;if(i)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message ",a," in ",n.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-search_message c-search_message--"+r},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(Ae["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Ne["a"],{userId:t||"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_dark_gray"},We.t("There was an error displaying this message."))))}ze.displayName="ErrorSearchMessage";ze.defaultProps=Ke;var Qe=function e(t){var r="";var a=false;try{r=Object(Pe["a"])(t);a=Object(A["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:r,featureTinyspeck:a}};var Ye=Object(f["connect"])(Qe)(ze);var Je=r(1339);var Xe=r(60);var Ze=r(1760);var $e=function e(t,r){var a=r.bot_id,n=r.bot_profile,i=r.thread_ts,s=r.teamId,o=r.ts,l=r.channel,c=r.replies,u=r.permalink,d=r.blocks,p=r.attachments;var v=Object(Pe["a"])(t);var m=Object(q["d"])(t);var h=void 0;m&&(h=m.domain);var f=C.a.some(r.extracts,function(e){return e.truncated_head||e.truncated_tail});var b=r.text.length>200;var g=!!(r.attachments&&r.attachments.length);var _=!!r.text;var y=f&&b||g&&_;(d||C.a.some(p,"blocks"))&&(y=false);var O=Object(q["d"])(t).id!==s;var k="";if(c&&c.length){var E=c[0].ts;var j=Object(Xe["parseUrl"])(u),S=j.hostname;k="https://"+S+Object(ge["a"])({channelId:l.id,ts:E,threadTs:o})}return{logger:Object(T["a"])({state:t}),hasText:_,isCrossWorkspace:O,botId:a,botProfile:n,threadTs:i,theme:v,permalinkToMessageThread:k,hasAdHocSender:Object(Je["a"])(r),featureTinyspeck:Object(A["isFeatureEnabled"])(t,"feature_tinyspeck"),canBeTruncated:y,teamDomain:h,channelName:Object(de["getDisplayNameForChannel"])(t,l)}};var et=null;var tt=Object(f["connect"])($e,et)(Ze["a"]);var rt="IMPROVED_SEARCH";var at={logger:v["b"].object.isRequired};var nt=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,r){this.props.logger.error(rt,"Error caught by ProtectedSearchMessage "+r.componentStack);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError)return p.a.createElement(Ye,this.props);return p.a.createElement(tt,this.props)}}]);return t}(d["PureComponent"]);nt.displayName="ProtectedSearchMessage";var it=function e(t){return{logger:Object(T["a"])({state:t})}};var st=Object(f["connect"])(it)(nt);var ot=st;var lt=r(2988);var ct=new J["b"]("search");var ut={close:v["b"].func.isRequired,messages:v["b"].arrayOf(v["b"].shape({iid:v["b"].string.isRequired,user:v["b"].string.isRequired,ts:v["b"].string.isRequired,extracts:v["b"].array})).isRequired,channel:v["b"].shape({id:v["b"].string.isRequired,name:v["b"].string.isRequired}).isRequired,team:v["b"].string.isRequired,workspaceName:v["b"].string,currentTeam:v["b"].object.isRequired,isEnterpriseOrg:v["b"].bool.isRequired,onMessageJump:v["b"].func.isRequired,onFileJump:v["b"].func.isRequired,onRepliesClick:v["b"].func.isRequired,clogSearchMessageClick:v["b"].func,clogMessageClick:v["b"].func};var dt={workspaceName:"",clogSearchMessageClick:j["noop"],clogMessageClick:j["noop"]};var pt=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isExpanded:false,isHoveringOnExpandLinks:false};Object(S["a"])(r,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"]);return r}s()(t,[{key:"onChannelClick",value:function e(){var t=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();t[0]&&this.onMessageJump({iid:t[0].iid,permalink:t[0].permalink,ts:t[0].ts,channelId:this.props.channel.id,userId:t[0].user,botId:t[0].botId})}},{key:"onLinkClick",value:function e(t,r){this.props.clogSearchMessageClick({iid:r.iid,ts:r.ts,channelId:r.channelId,botId:r.botId,userId:r.userId,type:r.type});"copy_link"===r.type?this.props.clogMessageClick({msg:t,payload:r}):"channel"===r.type&&this.props.close()}},{key:"onMessageJump",value:function e(t){var r=t.iid,a=t.permalink,n=t.ts,i=t.channelId,s=t.userId,o=t.botId;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:a});this.props.clogSearchMessageClick({type:"message_jump",iid:r,ts:n,channelId:i,userId:s,botId:o})}},{key:"onFileJump",value:function e(t,r){var a=r.file,n=r.iid,i=r.ts,s=r.channelId,o=r.userId,l=r.botId;this.props.onFileJump(t,{file:a,iid:n,ts:i,channelId:s,userId:o,botId:l})}},{key:"onRepliesClick",value:function e(t){this.props.onRepliesClick(t);this.props.clogSearchMessageClick({type:"message_jump",iid:t.iid,ts:t.ts,channelId:t.channelId,userId:t.userId,botId:t.botId})}},{key:"onExpandHoverStart",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:true}})}},{key:"onExpandHoverEnd",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:false}})}},{key:"getCondensedMessageArray",value:function e(){var t=this.props.messages;return Object(j["reduce"])(t,function(e,t){var r=e.length&&e[e.length-1].collapsedStub;t.stub&&(!t.text||t.text.length>200||r)?r?e[e.length-1].count+=1:e.push({collapsedStub:true,count:1}):e.push(t);return e},[])}},{key:"expand",value:function e(t){var r=t.iid,a=t.ts,n=t.channelId,i=t.userId,s=t.botId;this.setState(function(){return{isExpanded:true}});this.props.clogSearchMessageClick({type:"expand",iid:r,ts:a,channelId:n,userId:i,botId:s})}},{key:"formatHeaderDate",value:function e(){return ie(this.props.messages,true)}},{key:"renderHeader",value:function e(){var t=this.props.channel;if(!t)return null;var r=this.formatHeaderDate();return p.a.createElement(ee["a"],{className:"c-message_group__header",onClick:this.onChannelClick,"data-qa":"search_message_group_header"},p.a.createElement(Ge["a"],{channel:t,teamIconSize:"14",showPresence:true,inline:true,showTeamIconForXwsChannels:true}),p.a.createElement("span",null,"\u2013"),p.a.createElement("span",{className:"c-message_group__header_date"},r),p.a.createElement("span",{className:"c-message_group__header_view_label"},ct.t("View in channel")))}},{key:"renderMessages",value:function e(){var t=this;var r=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return Object(j["map"])(r,function(e,r){if(e.collapsedStub&&!t.state.isExpanded)return p.a.createElement(He["a"],{key:r,className:"c-message_group__divider",onClick:t.expand},p.a.createElement("hr",{className:"c-message_group__divider_rule"}),p.a.createElement("div",{className:"c-message_group__divider_text"},ct.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count})));return p.a.createElement(ot,E()({key:e.ts},e,{teamId:t.props.team,channel:t.props.channel,expanded:t.state.isExpanded,onExpand:t.expand,onClick:t.onMessageJump,onLinkClick:function r(a){t.onLinkClick(e,a)},onFileClick:t.onFileJump,onRepliesClick:t.onRepliesClick,onExpandHoverStart:t.onExpandHoverStart,onExpandHoverEnd:t.onExpandHoverEnd}))})}},{key:"render",value:function e(){var t=h()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return p.a.createElement("div",{className:t,"data-qa":"search_message_group"},this.renderHeader(),this.renderMessages())}}]);return t}(d["PureComponent"]);pt.displayName="SearchMessageGroup";pt.defaultProps=dt;var vt=function e(t,r){var a=r.channel,n=r.team;var i=Object(q["d"])(t);var s=Object(q["j"])(t,n||i.id);var o=Object(Y["getTeamDisplayName"])(s);var l=ve(t,a);return{channel:E()({},l,{team_id:n}),isEnterpriseOrg:!!(i&&i.enterprise_id),workspaceName:o,currentTeam:i}};var mt={clogSearchMessageClick:function e(){return M["h"].apply(void 0,arguments)},clogMessageClick:function e(){return Ue["a"].apply(void 0,arguments)},close:function e(){return V["a"].apply(void 0,arguments)}};var ht=Object(f["connect"])(vt,mt,null,{areStatePropsEqual:function e(t,r){return Object(qe["a"])(t,r,2)}})(pt);var ft="IMPROVED_SEARCH";var bt={logger:v["b"].object.isRequired};var gt=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,r){this.props.logger.error(ft,"Error caught by ProtectedMessageGroup "+r.componentStack);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){var t=this.props,r=t.logger,a=Te()(t,["logger"]);if(this.state.hasError)return p.a.createElement(Be,a);return p.a.createElement(ht,a)}}]);return t}(d["PureComponent"]);gt.displayName="ProtectedMessageGroup";var _t=function e(t){return{logger:Object(T["a"])({state:t})}};var yt=Object(f["connect"])(_t)(gt);var Ot=r(226);var kt=r(1850);var Et={visible:v["b"].bool,currentPageOffset:v["b"].number.isRequired,totalPageCount:v["b"].number.isRequired,onBack:v["b"].func.isRequired,onForward:v["b"].func.isRequired,onFeedbackClick:v["b"].func.isRequired};var jt={visible:true};var Ct=new J["b"]("search");function St(e){var t=e.visible,r=e.currentPageOffset,a=e.totalPageCount,n=e.onBack,i=e.onForward,s=e.onFeedbackClick;if(!t)return null;var o=1===r;var l=r===a;var c="";var u={currentPageOffset:Object(Ot["a"])(r),totalPageCount:Object(Ot["a"])(a)};c=Ct.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"});var d=p.a.createElement(ee["a"],{className:"c-search__pager__button_forward",onClick:i,disabled:l,"data-qa":"search_pager_forward_button"},o&&Ct.t("See more")||Ct.t("Next"),p.a.createElement($["b"],{type:"chevron-medium-right",size:"inherit"}));var v=p.a.createElement(ee["a"],{className:"c-search__pager__button__back",onClick:n,disabled:o,"data-qa":"search_pager_back_button"},p.a.createElement($["b"],{type:"chevron-medium-left",size:"inherit"}),Ct.t("Previous"));var m=p.a.createElement(kt["a"],{short:true,className:"c-search__pager_feedback",onClick:s});return p.a.createElement("div",{className:"c-search__pager"},o||v,p.a.createElement("div",null,p.a.createElement("span",{className:"c-search__pager__details"},c),m),l||d)}St.displayName="Pager";St.defaultProps=jt;var wt=St;var It=r(5);var Tt=r.n(It);var At=r(24);var Nt=r(26);var Pt=r.n(Nt);var Rt=r(1070);var Mt=r(1337);function xt(e,t){var r=Object(G["getRequest"])(t());var a=r?r.query:"";e(Object(G["clearResponse"])());e(Object(Rt["a"])());return e(Object(D["a"])({query:a,fetchSuggesions:false}))}var Dt=Object(R["b"])("Message/file search: exclude bots checkbox changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.value;e(Object(P["i"])({value:a}));xt(e,t)});Dt.propTypes={value:v["b"].bool.isRequired};var Ft=Object(R["b"])("Message/file search: only my channels checkbox changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.value;e(Object(P["j"])({value:a}));xt(e,t)});Ft.propTypes={value:v["b"].bool.isRequired};var Lt=Object(R["b"])("Channel search: hide member channels flag changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.value,n=r.refetch,i=void 0===n||n;e(Object(P["g"])({value:a}));i&&xt(e,t)});Lt.propTypes={value:v["b"].bool.isRequired};var Bt=Object(R["b"])("File search: sort changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.sort;e(Object(Mt["b"])({sort:a}));e(Object(D["d"])({module:"files"}))});Bt.propTypes={sort:v["b"].oneOf(Object(j["values"])(F["c"])).isRequired};var Ut=Object(R["b"])("Channel search: sort changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.sort;e(Object(P["h"])({sort:a}));e(Object(D["d"])({module:"channels"}))});Ut.propTypes={sort:v["b"].oneOf(Object(j["values"])(F["b"])).isRequired};var qt=Object(R["b"])("People search: sort changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.sort;e(Object(P["l"])({sort:a}));e(Object(D["d"])({module:"people"}))});qt.propTypes={sort:v["b"].oneOf(Object(j["values"])(F["b"])).isRequired};var Gt=Object(R["b"])("Channel search: filter type changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.type;e(Object(N["h"])({type:a}));xt(e,t)});Gt.propTypes={type:v["b"].oneOf(Object(j["values"])(F["a"])).isRequired};var Ht=Object(R["b"])("All of search: search only current workspace changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.value,n=r.refetch,i=void 0===n||n;e(Object(P["m"])({value:a}));i&&xt(e,t)});Ht.propTypes={value:v["b"].bool.isRequired};var Wt=Object(R["b"])("Channel search: update an external org filter",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.value;var i=t();var s=[].concat(Pt()(Object(b["e"])(i)));var o=Object(b["d"])(i);n?s.push(a):s=s.filter(function(e){return e!==a});e(Object(N["i"])({teamIds:Array.from(new Set([].concat(Pt()(o),[a])))}));e(Object(N["j"])({orgFilters:s}));xt(e,t)});Wt.propTypes={teamId:v["b"].string.isRequired,value:v["b"].bool.isRequired};var Vt=Object(R["b"])("People search: update an external org filter",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.value;var i=t();var s=[].concat(Pt()(Object(b["m"])(i)));var o=Object(b["l"])(i);n?s.push(a):s=s.filter(function(e){return e!==a});e(Object(N["v"])({teamIds:Array.from(new Set([].concat(Pt()(o),[a])))}));e(Object(N["w"])({orgFilters:s}));xt(e,t)});Vt.propTypes={teamId:v["b"].string.isRequired,value:v["b"].bool.isRequired};var Kt=Object(R["b"])("People search: filter type changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.type,n=r.teamId,i=r.refetch,s=void 0===i||i;e(Object(N["u"])({type:a,teamId:n}));s&&xt(e,t)});Kt.propTypes={type:v["b"].oneOf(Object(j["values"])(F["f"])).isRequired,teamId:v["b"].string};var zt=Object(R["b"])("People search: custom filter changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.id,n=r.value,i=r.checked;e(Object(N["t"])({id:a,value:n,checked:i}));xt(e,t)});zt.propTypes={id:v["b"].string.isRequired,value:v["b"].string.isRequired,checked:v["b"].bool.isRequired};var Qt=Object(R["b"])("People search: hide deactivated users pref changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.value,n=r.refetch,i=void 0===n||n;e(Object(P["k"])({value:a}));i&&xt(e,t)});Qt.propTypes={value:v["b"].bool.isRequired};var Yt=Object(R["b"])("People search: timezone filter changed",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.label,n=r.value,i=r.checked;e(Object(N["A"])({label:a,value:n,checked:i}));xt(e,t)});Yt.propTypes={label:v["b"].string.isRequired,value:v["b"].string.isRequired,checked:v["b"].bool.isRequired};var Jt=r(156);var Xt=r(134);var Zt=r(1192);var $t=r(290);function er(e){if(!e||Object(j["isEmpty"])(e))return true;if(e.in&&e.in.length)return false;if(e.from&&e.from.length)return false;if(e.to&&e.to.length)return false;if(e.before||e.after)return false;if(e.has_star||e.has_pin||e.has_link||e.has_rxn)return false;return true}var tr=r(17);var rr=r(2288);var ar=r(1175);var nr=r(1071);var ir=r(4528);var sr=new J["b"]("search");var or={showMoreOptions:v["b"].bool,showMoreOptionsAriaLabel:v["b"].string.isRequired,placeholderText:v["b"].string.isRequired,checkboxName:v["b"].string.isRequired,visibleOptions:v["b"].arrayOf(v["b"].shape({value:v["b"].string.isRequired,label:v["b"].node,checked:v["b"].bool.isRequired})).isRequired,loadOptions:v["b"].func.isRequired,filterOptions:v["b"].func,renderVisibleOption:v["b"].func,renderOption:v["b"].func,onOptionChange:v["b"].func,onOptionAdd:v["b"].func};var lr={onOptionChange:j["noop"],onOptionAdd:j["noop"],renderVisibleOption:void 0,renderOption:void 0,filterOptions:function e(t,r){return r},showMoreOptions:true};var cr={};var ur=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.initialState={isSelectVisible:false,isLoading:false,emptyMessage:cr,activeRowIndex:null,filterQuery:"",options:[],selectId:"search-multi-select-filter-"+e.checkboxName,isExpanded:false,isInvalid:false,isDisabled:false};r.state=r.initialState;Object(S["a"])(r,["onShowSelectClick","setSelectState","renderOption","emptyStateMessage"]);r.loadOptionsPromise=null;r.inputRef=p.a.createRef();return r}s()(t,[{key:"componentDidMount",value:function e(){this.reloadOptions("")}},{key:"componentWillUnmount",value:function e(){this.loadOptionsPromise&&this.loadOptionsPromise.cancel()}},{key:"onShowSelectClick",value:function e(){var t=this;this.setState(function(){return{isSelectVisible:true}},function(){t.inputRef.current.focus()})}},{key:"setSelectState",value:function e(t,r){var a=this;var n=false;this.setState(function(e){var r=t();var i=r.activeRowIndex,s=void 0===i?e.activeRowIndex:i,o=r.filterQuery,l=void 0===o?e.filterQuery:o,c=r.isExpanded,u=void 0===c?e.isExpanded:c,d=r.isInvalid,p=void 0===d?e.isInvalid:d,v=r.isDisabled,m=void 0===v?e.isDisabled:v,h=r.options,f=void 0===h?e.options:h,b=r.selectId,g=void 0===b?e.selectId:b;void 0!==l&&l!==e.filterQuery&&(n=true);var _=Object(j["unionBy"])(f,e.options,"value").length;_===f.length&&_===e.options.length||(n=true);return{activeRowIndex:s,filterQuery:l,isExpanded:u,isInvalid:p,isDisabled:m,options:a.props.filterOptions(l,f),selectId:g}},function(){n&&a.reloadOptions(a.state.filterQuery);r&&r()})}},{key:"refilterOptions",value:function e(){var t=this;this.setState(function(e){return{options:t.props.filterOptions(e.filterQuery,e.options)}})}},{key:"reloadOptions",value:function e(t){var r=this;this.loadOptionsPromise&&this.loadOptionsPromise.cancel();this.setState(function(){return{isLoading:true}});this.loadOptionsPromise=this.props.loadOptions(t).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,a=e.emptyMessage,n=void 0===a?cr:a;r.setState(function(e){return{options:r.props.filterOptions(e.filterQuery,t),emptyMessage:n}})}).catch(j["noop"]).finally(function(){r.loadOptionsPromise.isCancelled()||r.setState(function(){return{isLoading:false}})})}},{key:"emptyStateMessage",value:function e(){return this.state.emptyMessage===cr?sr.t("Nothing found",{fallbackHash:"f4e12416c6b8d6a75b8a34fc79a221e1a43d1120",fallbackHashNs:"select"}):this.state.emptyMessage}},{key:"renderOption",value:function e(t,r){var a=r.isActive,n=r.isSelected;return p.a.createElement("div",{className:h()("p-search_filter__option p-search_filter__option--suggestion",{"p-search_filter__option--active":a,"p-search_filter__option--selected":n})},this.props.renderOption?this.props.renderOption(t,r):p.a.createElement("span",{className:"p-search_filter__option_label"},t.label))}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.checkboxName,n=r.visibleOptions,i=r.placeholderText,s=r.onOptionChange,o=r.onOptionAdd,l=r.renderVisibleOption,c=r.showMoreOptions,u=r.showMoreOptionsAriaLabel;var d=this.state.isSelectVisible;var v=0===n.length;return p.a.createElement("div",null,n.map(function(e){return p.a.createElement("label",{key:e.value,htmlFor:"search-filter-"+a+"-"+e.value,className:h()("p-search_filter__visible_option",{"p-search_filter__visible_option--selected":e.checked}),"data-qa":"search_filter_suggestion"},l?l(e):p.a.createElement("span",{className:"p-search_filter__option_label"},e.label),p.a.createElement("span",{className:"p-search_filter__visible_checkbox"},p.a.createElement("input",{id:"search-filter-"+a+"-"+e.value,type:"checkbox",name:a,value:e.value,checked:e.checked,onChange:function r(a){s(e,a.target.checked);t.refilterOptions()}})))}),c&&(d?p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(ar["b"],{width:"100%",inputRef:this.inputRef,selectId:"search-multi-select-filter-"+a,placeholderText:i,emptyStateMessage:this.emptyStateMessage,options:this.state.options,isLoading:this.state.isLoading,setSelectState:this.setSelectState,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,selectState:{activeRowIndex:this.state.activeRowIndex,filterQuery:this.state.filterQuery,options:this.state.options,selectId:this.state.selectId,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,isInvalid:this.state.isInvalid,isDisabled:this.state.isDisabled},onOptionSelected:function e(){t.setState(function(e){return E()({},t.initialState,{options:e.options})});o.apply(void 0,arguments)},renderOption:this.renderOption})):p.a.createElement(nr["a"],{className:v?"p-search_filter__empty_more_link":"p-search_filter__more_link","data-qa":"search_filter_multi_select__more_link",onClick:this.onShowSelectClick,"aria-label":u,"aria-expanded":"false"},sr.t("More\u2026"))))}}]);return t}(d["Component"]);ur.displayName="SearchFilterMultiSelect";ur.defaultProps=lr;var dr=ur;var pr=r(1781);var vr=r(270);var mr=r(2265);var hr=r(383);var fr=r(40);var br=r.n(fr);var gr=r(1228);var _r=r(4420);var yr=function e(t){return p.a.createElement("div",{className:"c-search_filter_section"},p.a.createElement("h3",{className:"c-search_filter_section__title"},t.title),t.children)};yr.displayName="SearchFilterSection";yr.defaultProps={children:null};var Or=yr;var kr=r(867);var Er={onDateChange:v["b"].func.isRequired,isDateDisabled:v["b"].func.isRequired,date:v["b"].string,disableDatesAfter:v["b"].string,disableDatesBefore:v["b"].string,dateLabel:v["b"].string.isRequired,dateAriaLabel:v["b"].string.isRequired,removeAriaLabel:v["b"].string.isRequired,qaLabel:v["b"].string};var jr={date:null,disableDatesBefore:null,disableDatesAfter:null,qaLabel:""};var Cr=-364;var Sr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onClearDateChange"]);return r}s()(t,[{key:"onClearDateChange",value:function e(){this.props.onDateChange(null)}},{key:"render",value:function e(){var t=this.props,r=t.onDateChange,a=t.date,n=t.isDateDisabled,i=t.disableDatesBefore,s=t.disableDatesAfter,o=t.dateLabel,l=t.dateAriaLabel,c=t.removeAriaLabel,u=t.qaLabel;var d="es-ES"===Object(J["q"])()||"es-LA"===Object(J["q"])();var v=a?Object(ne["k"])(br()(a),{shortenMonth:d,shortenDay:d}):"";var m=h()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!a});return p.a.createElement("div",{className:"p-search_filter__date","data-qa":u},p.a.createElement(kr["c"],{position:"bottom",offsetY:Cr,selectedDate:a,dateFormat:"YYYY-MM-DD",onDateChange:r,isDateDisabled:n,disableDatesBefore:i,disableDatesAfter:s},p.a.createElement(He["a"],{className:m,"aria-label":a?void 0:l,"data-qa":u+"_button"},p.a.createElement("div",{className:"p-search_filter__date_label"},o),p.a.createElement("div",{className:"p-search_filter__date_readout"},v),a?null:p.a.createElement($["b"],{type:"calendar",className:"p-search_filter__calendar_icon"}))),a?p.a.createElement(He["a"],{"aria-label":c,className:"p-search_filter__date_close",onClick:this.onClearDateChange,"data-qa":u+"_close"},p.a.createElement($["b"],{type:" c-icon--times-small"})):null)}}]);return t}(d["PureComponent"]);Sr.displayName="DateSelector";Sr.defaultProps=jr;var wr=Sr;var Ir=new J["b"]("search");var Tr={onStartDateChange:v["b"].func.isRequired,onEndDateChange:v["b"].func.isRequired,startDate:v["b"].string,endDate:v["b"].string};var Ar={startDate:null,endDate:null};var Nr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["isDateDisabledStart","isDateDisabledEnd"]);return r}s()(t,[{key:"isDateDisabledStart",value:function e(t){var r=this.props.endDate;if(r)return t.isAfter(r)||t.isAfter(br()());return t.isAfter(br()())}},{key:"isDateDisabledEnd",value:function e(t){var r=this.props.startDate;if(r)return t.isBefore(r)||t.isAfter(br()());return t.isAfter(br()())}},{key:"render",value:function e(){var t=this.props,r=t.onStartDateChange,a=t.onEndDateChange,n=t.endDate,i=t.startDate;return p.a.createElement(Or,{title:Ir.t("Date")},p.a.createElement("div",{className:"p-search_filter__dates"},p.a.createElement(wr,{date:i,onDateChange:function e(t){r(t?br()(t):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:n||br()().format("YYYY-MM-DD"),dateLabel:Ir.t("Starting"),dateAriaLabel:Ir.t("Starting date"),removeAriaLabel:Ir.t("Remove starting date"),qaLabel:"search_starting_date"}),p.a.createElement(wr,{date:n,onDateChange:function e(t){a(t?br()(t):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:i,disableDatesAfter:br()().format("YYYY-MM-DD"),dateLabel:Ir.t("Ending"),dateAriaLabel:Ir.t("Ending date"),removeAriaLabel:Ir.t("Remove ending date"),qaLabel:"search_ending_date"})))}}]);return t}(d["PureComponent"]);Nr.displayName="DateRangeFilter";Nr.defaultProps=Ar;var Pr=Nr;var Rr={variation:v["b"].number.isRequired,includeAvatar:v["b"].bool};var Mr={includeAvatar:false};function xr(e){var t=e.variation,r=e.includeAvatar;return p.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},r?p.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,p.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--"+t}))}xr.displayName="PlaceholderSuggestion";xr.defaultProps=Mr;var Dr=xr;var Fr=r(2992);var Lr=new J["b"]("search");var Br="IMPROVED_SEARCH";var Ur={showOnlyActiveFilters:v["b"].bool,showFileFilters:v["b"].bool,filters:v["b"].object.isRequired,suggestions:v["b"].object.isRequired,fileSuggestions:v["b"].object.isRequired,toggleEditableRequestQueryFilterFromItem:v["b"].func.isRequired,toggleEditableRequestQueryFilterInItem:v["b"].func.isRequired,currentTeam:v["b"].object.isRequired,isEnterpriseOrg:v["b"].bool.isRequired,setEditableRequestQueryFilterAfter:v["b"].func.isRequired,setEditableRequestQueryFilterBefore:v["b"].func.isRequired,setEditableRequestQueryFilterFileType:v["b"].func.isRequired,searchOnlySearchWorkspaceChanged:v["b"].func.isRequired,messageAndFileSearchExcludeBotsChanged:v["b"].func.isRequired,messageAndFileSearchOnlyMyChannelsChanged:v["b"].func.isRequired,searchPrefs:v["b"].shape({searchOnlyCurrentTeam:v["b"].bool.isRequired,searchExcludeBots:v["b"].bool.isRequired,searchOnlyMyChannels:v["b"].bool.isRequired}).isRequired,setEditableRequestChannelObjects:v["b"].func.isRequired,channelObjects:v["b"].object.isRequired,imToUserMap:v["b"].object.isRequired,loading:v["b"].bool.isRequired,loadingFileSuggestions:v["b"].bool.isRequired,logInfo:v["b"].func,search:v["b"].func.isRequired,showDebugOption:v["b"].bool.isRequired,isDebugInfoVisible:v["b"].bool.isRequired,toggleDebugInfoVisible:v["b"].func.isRequired,clogSearchFilterAdded:v["b"].func,clogSearchFilterRemoved:v["b"].func};var qr={showOnlyActiveFilters:false,showFileFilters:false,logInfo:j["noop"],clogSearchFilterAdded:j["noop"],clogSearchFilterRemoved:j["noop"]};var Gr=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onChannelSelect","onMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange","loadInFilterOptions","loadFromFilterOptions"]);r.itemsFromChannelSearch={};r.onStartDateSelect=r.onStartDateSelect.bind(r);r.onEndDateSelect=r.onEndDateSelect.bind(r);return r}s()(t,[{key:"onChannelSelect",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.offset;if(!t)return;var n={filter_in:true,filter_position:a};Object(Jt["a"])(t)?n.click_user_id=t:n.click_channel_id=t;this.props.filters.in.indexOf(t)>-1?this.props.clogSearchFilterRemoved(n):this.props.clogSearchFilterAdded(n);this.itemsFromChannelSearch[t]&&this.props.setEditableRequestChannelObjects({channels:E()({},this.props.channelObjects,Tt()({},t,this.itemsFromChannelSearch[t]))});var i=t;this.props.imToUserMap[t]&&(i=this.props.imToUserMap[t]);this.props.toggleEditableRequestQueryFilterInItem({channelId:i});this.itemsFromChannelSearch={}}},{key:"onMemberSelect",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.offset;if(!t)return;this.props.filters.from.indexOf(t)>-1?this.props.clogSearchFilterRemoved({click_user_id:t,filter_from:true,filter_position:a}):this.props.clogSearchFilterAdded({click_user_id:t,filter_from:true,filter_position:a});this.props.toggleEditableRequestQueryFilterFromItem({memberId:t})}},{key:"onEndDateSelect",value:function e(t){var r=t&&t.add(1,"days").format(gr["a"]);r?this.props.clogSearchFilterAdded({filter_before:r}):this.props.clogSearchFilterRemoved({filter_before:""});this.props.setEditableRequestQueryFilterBefore({dateString:r})}},{key:"onStartDateSelect",value:function e(t){var r=t&&t.subtract(1,"days").format(gr["a"]);r?this.props.clogSearchFilterAdded({filter_after:r}):this.props.clogSearchFilterRemoved({filter_after:""});this.props.setEditableRequestQueryFilterAfter({dateString:r})}},{key:"onSearchPrefChange",value:function e(t){var r=this.props.searchPrefs,a=r.searchOnlyCurrentTeam,n=r.searchExcludeBots,i=r.searchOnlyMyChannels;this.props.logInfo(Br,"Changing search pref. pref: "+t);var s=void 0;switch(t){case F["l"]:s=!a;this.props.searchOnlySearchWorkspaceChanged({value:s});break;case F["i"]:s=!n;this.props.messageAndFileSearchExcludeBotsChanged({value:s});break;case F["m"]:s=!i;this.props.messageAndFileSearchOnlyMyChannelsChanged({value:s});break;default:return}s?this.props.clogSearchFilterAdded({filter_other:t}):this.props.clogSearchFilterRemoved({filter_other:t})}},{key:"onFileTypeChange",value:function e(t){this.props.clogSearchFilterAdded({filter_file_type:t});this.props.setEditableRequestQueryFilterFileType({fileType:t})}},{key:"loadInFilterOptions",value:function e(t){var r=this;if(!t||t.length<=1)return Promise.resolve({options:[],emptyMessage:null});return this.props.search({query:t,options:{limit:150,entities:{channels:{includeArchived:true,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:!this.props.searchPrefs.searchOnlyCurrentTeam,includeMpims:true},members:{includeSelf:true,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:true}}}}).then(function(e){var t=e.filter(function(e){var t=Object(j["findIndex"])(r.props.suggestions.in,function(t){return t.id===e.id});return-1===t});r.itemsFromChannelSearch=Object(j["keyBy"])(t,"id");var a={};r.props.suggestions.in.forEach(function(e){a[e.name]=(a[e.name]||0)+1});t.forEach(function(e){a[e.name]=(a[e.name]||0)+1});return{options:t.map(function(e){return{label:null,model:e,member:Object(tr["isMember"])(e)&&e,mpim:Object(de["isMpim"])(e)&&e,channel:Object(de["isChannel"])(e)&&e,value:e.id}})}})}},{key:"loadFromFilterOptions",value:function e(t){var r=this;if(!t||t.length<=1)return Promise.resolve({options:[],emptyMessage:null});return this.props.search({query:t,options:{entities:{members:{includeSelf:true,includeSlackbot:true,includeBots:true,includeDeleted:true}}}}).then(function(e){var t=e.filter(function(e){return-1===r.props.suggestions.from.indexOf(e.id)});return{options:t.map(function(e){return{label:null,model:e,member:Object(tr["isMember"])(e)&&e,mpim:Object(de["isMpim"])(e)&&e,channel:Object(de["isChannel"])(e)&&e,value:e.id}})}})}},{key:"shouldRenderDateFilter",value:function e(){var t=this.props,r=t.filters,a=t.showOnlyActiveFilters;if(er(r)&&a)return false;return!a||r.before&&r.after}},{key:"renderInFilter",value:function e(){var t=this;var r=this.props,a=r.filters,n=r.suggestions,i=r.fileSuggestions,s=r.loading,o=r.loadingFileSuggestions,l=r.showFileFilters;if(s&&!l||o&&l)return this.renderInPlaceholder();var c=l?i:n;var u=c.in;var d={};u.forEach(function(e){d[e.name]=(d[e.name]||0)+1});Object.keys(this.itemsFromChannelSearch).forEach(function(e){var r=t.itemsFromChannelSearch[e];d[r.name]=(d[r.name]||0)+1});var v=[];var m={};u.forEach(function(e){var t=a.in.indexOf(e.id)>-1;t&&(m[e.id]=true);v.push({label:null,model:e,member:Object(tr["isMember"])(e)&&e,mpim:Object(de["isMpim"])(e)&&e,channel:Object(de["isChannel"])(e)&&e,value:e.id,checked:t})});return p.a.createElement(Or,{title:Lr.t("Channels & direct messages")},p.a.createElement(dr,{checkboxName:"in_filter",placeholderText:Lr.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),showMoreOptionsAriaLabel:Lr.t("More channels or direct messages to filter by"),loadOptions:this.loadInFilterOptions,renderVisibleOption:function e(t){return p.a.createElement(Ge["a"],{className:"p-search_filter__in_channel",channel:t.model,showTeamIconForLocalChannels:d[t.model.name]>1,showTeamIconForXwsChannels:true})},renderOption:function e(t){return t.member?p.a.createElement(hr["a"],{className:"p-search_filter__in_member",id:t.member.id}):p.a.createElement(Ge["a"],{className:"p-search_filter__in_channel",channel:t.model,teamIconSize:18,showTeamIconForLocalChannels:d[t.model.name]>1,showTeamIconForXwsChannels:true})},visibleOptions:v,onOptionChange:function e(r){t.onChannelSelect(r.value,{offset:v.indexOf(r)})},onOptionAdd:function e(r){t.onChannelSelect(r.value,{offset:null})},filterOptions:function e(t,r){return r.filter(function(e){return!m[e.value]})}}))}},{key:"renderInPlaceholder",value:function e(){return p.a.createElement(Or,{title:Lr.t("Channels & direct messages")},p.a.createElement(Dr,{variation:0}),p.a.createElement(Dr,{variation:1}),p.a.createElement(ee["a"],{className:"p-search_filter__more_link",disabled:true,"aria-label":Lr.t("More channels or direct messages to filter by"),"aria-expanded":"false"},Lr.t("More\u2026")))}},{key:"renderFromFilter",value:function e(){var t=this;var r=this.props,a=r.filters,n=r.suggestions,i=r.fileSuggestions,s=r.loading,o=r.loadingFileSuggestions,l=r.showFileFilters;if(s&&!l||o&&l)return this.renderFromPlaceholder();var c=l?i:n;var u=[];var v={};c.from.forEach(function(e){var t=a.from.indexOf(e.id)>-1;t&&(v[e.id]=true);u.push({label:null,model:e,member:Object(tr["isMember"])(e)&&e,mpim:Object(de["isMpim"])(e)&&e,channel:Object(de["isChannel"])(e)&&e,value:e.id,checked:t})});return p.a.createElement(Or,{title:Lr.t("People")},p.a.createElement(dr,{checkboxName:"from_filter",placeholderText:Lr.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),showMoreOptionsAriaLabel:Lr.t("More people to filter by"),loadOptions:this.loadFromFilterOptions,renderVisibleOption:function e(t){return p.a.createElement(d["Fragment"],null,p.a.createElement(Ae["b"],{className:"p-search_filter__from_avatar",userId:t.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:false}),p.a.createElement(hr["a"],{className:"p-search_filter__from_name",id:t.model.id}))},renderOption:function e(t){return p.a.createElement(d["Fragment"],null,p.a.createElement(Ae["b"],{className:"p-search_filter__from_avatar",userId:t.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:false}),p.a.createElement(hr["a"],{className:"p-search_filter__from_name",id:t.model.id}))},visibleOptions:u,onOptionChange:function e(r){t.onMemberSelect(r.value,{offset:u.indexOf(r)})},onOptionAdd:function e(r){t.onMemberSelect(r.value,{offset:null})},filterOptions:function e(t,r){return r.filter(function(e){return!v[e.value]})}}))}},{key:"renderFromPlaceholder",value:function e(){return p.a.createElement(Or,{title:Lr.t("People")},p.a.createElement(Dr,{includeAvatar:true,variation:0}),p.a.createElement(Dr,{includeAvatar:true,variation:1}),p.a.createElement(ee["a"],{className:"p-search_filter__more_link",disabled:true,"aria-label":Lr.t("More people to filter by"),"aria-expanded":"false"},Lr.t("More\u2026")))}},{key:"renderFileTypeFilter",value:function e(){var t=this.props,r=t.filters,a=t.showOnlyActiveFilters,n=t.showFileFilters;if(!n||a&&!r.fileType)return null;return p.a.createElement(Or,{title:Lr.t("File type")},p.a.createElement(pr["a"],{filetype:r.fileType,onChange:this.onFileTypeChange}))}},{key:"renderPrefs",value:function e(){var t=this;var r=this.props,a=r.showOnlyActiveFilters,n=r.isEnterpriseOrg,i=r.showDebugOption,s=r.isDebugInfoVisible,o=r.currentTeam;var l=this.props.searchPrefs,c=l.searchOnlyCurrentTeam,u=l.searchExcludeBots,v=l.searchOnlyMyChannels;if(a)return null;return p.a.createElement(Or,{title:Lr.t("More options")},n&&p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":c}),htmlFor:"search_only_current_team"},Lr.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d["Fragment"],null,p.a.createElement(vr["b"],{className:"p-search_filter__workspace_only_team_icon",team:o,size:18})," ",p.a.createElement(mr["a"],{id:o.id,bold:c}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_current_team",checked:c,onChange:function e(){return t.onSearchPrefChange(F["l"])}})),p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":v}),htmlFor:"search_only_my_channels"},Lr.t("Only search my channels")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_my_channels",checked:v,onChange:function e(){return t.onSearchPrefChange(F["m"])}})),p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":u}),htmlFor:"search_exclude_bots"},Lr.t("Hide apps and bots")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_exclude_bots",checked:u,onChange:function e(){return t.onSearchPrefChange(F["i"])}})),i&&p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":s}),htmlFor:"search_show_debug_info"},"[DEBUG] Show solr debug info"," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_show_debug_info",checked:s,onChange:function e(){return t.props.toggleDebugInfoVisible()}})))}},{key:"render",value:function e(){var t=this.props.filters.after&&br()(this.props.filters.after,gr["a"]).add(1,"days").format(gr["a"]);var r=this.props.filters.before&&br()(this.props.filters.before,gr["a"]).subtract(1,"days").format(gr["a"]);return p.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),p.a.createElement(Pr,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:t,endDate:r}),this.renderPrefs())}}]);return t}(d["PureComponent"]);Gr.displayName="MessagesFilterUIBase";Gr.defaultProps=qr;var Hr=function e(t){var r=Object(G["getEditableRequestQueryFilter"])(t)||rr["b"];var a=Object(G["getEditableRequestChannelObjects"])(t)||rr["b"];var n=Object(G["getFilterSuggestions"])(t)||rr["b"];var i=Object(G["getFilterSuggestionsForFiles"])(t)||rr["b"];var s=Object(A["getCurrentUserId"])(t);var o=Object(q["d"])(t);var l=!!o.enterprise_id;var c=Vr(t,r.in);var u=Object(b["i"])(t,"suggestions")||rr["b"];var d=u.loading;var p=Object(b["i"])(t,"suggestionsForFiles")||{loading:false};var v=p.loading;var m="solr_rank_debug"===Object(H["getGroupForUser"])(t,"solr_rank_debug");var h={searchOnlyCurrentTeam:Object(le["g"])(t,F["l"]),searchExcludeBots:Object(le["g"])(t,F["i"]),searchOnlyMyChannels:Object(le["g"])(t,F["m"])};return{suggestions:{in:(n.in||rr["a"]).map(function(e){return a[e]||Wr(t,e)}).filter(function(e){return!!e}),from:(n.from||rr["a"]).map(function(e){return Wr(t,e)})},fileSuggestions:{in:(i.in||rr["a"]).map(function(e){return a[e]||Wr(t,e)}).filter(function(e){return!!e}),from:(i.from||rr["a"]).map(function(e){return Wr(t,e)})},currentTeam:o,isEnterpriseOrg:l,myUserId:s,filters:{in:r.in||rr["a"],from:r.from||rr["a"],before:r.before,after:r.after,fileType:r.fileType},channelObjects:a,imToUserMap:c,searchPrefs:h,loading:d,loadingFileSuggestions:v,logInfo:Object(T["a"])({state:t}).info,isDebugInfoVisible:Object(b["g"])(t),showDebugOption:m}};function Wr(e,t){if(Object(Xt["a"])(t)){var r=Object(Zt["a"])(e,t)||Object(pe["d"])(e,t);if(Object(de["isUnknownOrNonExistent"])(r))return null;return r}if(Object(Jt["a"])(t))return Object(At["d"])(e,t);return null}function Vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(t,r){if(Object(Jt["a"])(r)){var a=Object(pe["k"])(e,r);a&&(t[a]=r)}return t},{})}var Kr={setEditableRequestQueryFilterAfter:function e(){return G["setEditableRequestQueryFilterAfter"].apply(void 0,arguments)},setEditableRequestQueryFilterBefore:function e(){return G["setEditableRequestQueryFilterBefore"].apply(void 0,arguments)},setEditableRequestChannelObjects:function e(){return G["setEditableRequestChannelObjects"].apply(void 0,arguments)},setEditableRequestQueryFilterFileType:function e(){return G["setEditableRequestQueryFilterFileType"].apply(void 0,arguments)},toggleEditableRequestQueryFilterFromItem:function e(){return G["toggleEditableRequestQueryFilterFromItem"].apply(void 0,arguments)},toggleEditableRequestQueryFilterInItem:function e(){return G["toggleEditableRequestQueryFilterInItem"].apply(void 0,arguments)},search:function e(){return $t["e"].apply(void 0,arguments)},toggleDebugInfoVisible:function e(){return N["L"].apply(void 0,arguments)},clogSearchFilterAdded:function e(){return M["f"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return M["g"].apply(void 0,arguments)},searchOnlySearchWorkspaceChanged:function e(){return Ht.apply(void 0,arguments)},messageAndFileSearchExcludeBotsChanged:function e(){return Dt.apply(void 0,arguments)},messageAndFileSearchOnlyMyChannelsChanged:function e(){return Ft.apply(void 0,arguments)}};var zr=Object(f["connect"])(Hr,Kr,null,{areStatePropsEqual:function e(t,r){return Object(qe["a"])(t,r,2)}})(Gr);var Qr=r(21);var Yr=r(45);var Jr=Object(R["b"])("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.uiElement,n=r.uiAction;var i=Object(Yr["a"])({state:t()});i.track("GROWTH_PRICING",{contexts:{ui_context:{step:"search_pane",action:n,ui_element:a}}})});Jr.propTypes={uiElement:v["b"].number.isRequired};var Xr=Jr;var Zr=r(2994);var $r=new J["b"]("search");var ea={type:v["b"].oneOf(["messages","files"]).isRequired,overMessageLimit:v["b"].bool.isRequired,overStorageLimit:v["b"].bool.isRequired,clogLimitBannerInteraction:v["b"].func.isRequired};var ta=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clogLinkClick=r.clogLinkClick.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){this.isVisible()&&this.props.clogLimitBannerInteraction({uiAction:Qr["w"].IMPRESSION,uiElement:this.getClogUIElement()})}},{key:"getClogUIElement",value:function e(){return this.props.overStorageLimit?Qr["z"].FILE_SEARCH_PRICING_LINK:Qr["z"].MESSAGE_SEARCH_LINK_TOP}},{key:"clogLinkClick",value:function e(){this.props.clogLimitBannerInteraction({uiAction:Qr["w"].CLICK,uiElement:this.getClogUIElement()})}},{key:"isVisible",value:function e(){var t=this.props,r=t.overMessageLimit,a=t.overStorageLimit,n=t.type;return r||a&&"files"===n}},{key:"render",value:function e(){if(!this.isVisible())return null;var t=this.props,r=t.type,a=t.overStorageLimit;var n=void 0;var i=void 0;if(a&&"files"===r){n=$r.t("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit.");i=$r.t("See paid plans")}else{n="messages"===r?$r.t("Some older messages may not be shown because your workspace has over 10,000 messages."):$r.t("Some older files may not be shown because your workspace has over 10,000 messages.");i=$r.t("Learn more")}return p.a.createElement("div",{className:"p-message_limit_banner"},p.a.createElement("div",{className:"p-message_limit_banner__graphic"},p.a.createElement($["b"],{type:"eye-closed"})),p.a.createElement("div",{className:"p-message_limit_banner__content"},n,"\xa0",p.a.createElement(ee["a"],{href:"/pricing?ui_step="+Qr["A"].SEARCH_PANE+"&ui_element="+this.getClogUIElement(),onClick:this.clogLinkClick,target:"new","data-qa":"message-limit-banner_pricing-link"},i)))}}]);return t}(d["PureComponent"]);ta.displayName="MessageLimitBanner";var ra=function e(t){var r=Object(q["d"])(t);return{overMessageLimit:Object(Y["isOverMessageLimit"])(r),overStorageLimit:Object(Y["isOverStorageLimit"])(r)}};var aa={clogLimitBannerInteraction:Xr};var na=Object(f["connect"])(ra,aa)(ta);var ia=r(431);var sa=r(186);var oa=r(540);var la={id:v["b"].any.isRequired,focused:v["b"].bool.isRequired,onFocusEnter:v["b"].func.isRequired,onFocusLeave:v["b"].func.isRequired,onSelect:v["b"].func.isRequired,ariaLabel:v["b"].string.isRequired,children:v["b"].any.isRequired};var ca=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(S["a"])(e,["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]);e.focusedAfterUpdate=false;return e}s()(t,[{key:"componentDidUpdate",value:function e(t){if(!t.focused&&this.props.focused&&this.container){this.focusedAfterUpdate=true;this.container.focus()}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;if(r&&"mousedown"===r.type)return;this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate});this.focusedAfterUpdate&&(this.focusedAfterUpdate=false)}},{key:"onFocusLeave",value:function e(){this.props.onFocusLeave({id:this.props.id})}},{key:"onKeyDown",value:function e(t){t.keyCode===oa["codes"].enter&&t.target===this.container&&this.props.onSelect(t,this.props.id)}},{key:"setContainerRef",value:function e(t){this.container=t}},{key:"focus",value:function e(){this.container&&this.container.focus()}},{key:"render",value:function e(){var t=this.props,r=t.ariaLabel,a=t.focused,n=t.children;return p.a.createElement(ia["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},p.a.createElement("div",{tabIndex:"-1",className:h()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":a}),ref:this.setContainerRef,role:"listitem","aria-label":r,onKeyDown:this.onKeyDown},n))}}]);return t}(d["PureComponent"]);ca.displayName="FocusManagedListItem";var ua=ca;function da(e,t,r,a){if(0===e.length)return null;if(null===t&&null!==r)return r;var n=e.indexOf(t);var i=n+a;i>=e.length?i=e.length-1:-1===n&&a<0?i=e.length-1:i<0&&(i=0);return e[i]}var pa=r(2996);var va={ids:v["b"].array.isRequired,renderItem:v["b"].func.isRequired,itemAriaLabel:v["b"].func.isRequired,onSelectItem:v["b"].func};var ma={onSelectItem:j["noop"]};var ha=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]);r.state={activeItem:null};r.inferredActiveItem=null;r.containerRef=null;r.keyCommands=null;r.itemRefs={};return r}s()(t,[{key:"onArrowKeyDown",value:function e(t){var r=this;t.preventDefault();var a=0;t.keyCode===oa["codes"].up&&(a=-1);t.keyCode===oa["codes"].down&&(a=1);0!==a&&this.setState(function(e){return{activeItem:da(r.props.ids,e.activeItem,r.inferredActiveItem,a)}})}},{key:"onItemFocusEnter",value:function e(t){var r=t.id,a=t.isLifeCycleUpdate;if(a)return;this.inferredActiveItem=r;this.setState(function(){return{activeItem:null}})}},{key:"onItemFocusLeave",value:function e(t){var r=t.id;this.setState(function(e){var t=e.activeItem;return{activeItem:t===r?null:t}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{activeItem:null}});this.inferredActiveItem=null}},{key:"setContainerRef",value:function e(t){this.containerRef=t;if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}if(this.containerRef){var r=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:true}];this.keyCommands=new sa["a"](this.containerRef);this.keyCommands.bindAll(r)}}},{key:"setItemRef",value:function e(t,r){this.itemRefs[t]=r}},{key:"focus",value:function e(){this.containerRef&&this.containerRef.focus()}},{key:"focusItem",value:function e(t){if(this.itemRefs[t]){this.itemRefs[t].focus();this.inferredActiveItem=t}}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.ids,n=r.itemAriaLabel,i=r.renderItem,s=r.onSelectItem;return p.a.createElement(ia["a"],{onFocusLeave:this.onFocusLeave},p.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},a.map(function(e){return p.a.createElement(ua,{ref:function r(a){return t.setItemRef(e,a)},key:e,id:e,ariaLabel:n(e),focused:t.state.activeItem===e,onFocusEnter:t.onItemFocusEnter,onFocusLeave:t.onItemFocusLeave,onSelect:s},i(e))})))}}]);return t}(d["PureComponent"]);ha.displayName="FocusManagedList";ha.defaultProps=ma;var fa=ha;var ba=fa;var ga=r(688);var _a=r(96);var ya=r(108);var Oa=new J["b"]("search");var ka={onClick:v["b"].func.isRequired};function Ea(e){return p.a.createElement("div",{className:"c-search__back_to_filters"},p.a.createElement(Z["d"],{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},p.a.createElement($["b"],{type:"arrow-up-medium"}),"\xa0",Oa.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))}Ea.displayName="BackToFiltersButton";var ja=Ea;var Ca=new J["b"]("search");var Sa="IMPROVED_SEARCH";var wa=300;var Ia=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isScrolledTop:e.scrollPosition<wa,scrollPosition:r.props.scrollPosition};r.wrapperRef=p.a.createRef();r.topScrollElementRef=p.a.createRef();Object(S["a"])(r,["onScroll","scrollTop"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.scrollPosition&&(this.wrapperRef.current.scrollTop=this.props.scrollPosition)}},{key:"componentWillUnmount",value:function e(){this.props.setScrollPosition(this.state.scrollPosition)}},{key:"onScroll",value:function e(){this.updateScrollPosition(this.wrapperRef.current.scrollTop)}},{key:"getToastOffset",value:function e(){var t=window.innerWidth;var r=window.innerHeight;var a=this.wrapperRef.current?this.wrapperRef.current.getBoundingClientRect():{right:t,top:r};return{offsetX:24+t-a.right,offsetY:24+r-a.bottom}}},{key:"scrollTop",value:function e(){this.props.logInfo(Sa,"Scrolling to top of results page");if(this.topScrollElementRef.current){this.updateScrollPosition(0);this.wrapperRef.current.scrollTop=0}}},{key:"updateScrollPosition",value:function e(t){this.setState(function(){return{isScrolledTop:t<wa,scrollPosition:t}})}},{key:"render",value:function e(){var t=this.props,r=t.errorType,a=t.loading,n=t.filterUI,i=t.id,s=t.children,o=t.emptyResultsTitle,l=t.numResults,c=t.sortDropdown,u=t.onClickRefreshSearch,d=t.alertHeader;var v=this.state.isScrolledTop;var m=!this.props.usePrimarySearch||!this.props.secondaryView;var f=l?Ca.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:l,totalItemCountStr:l>=1e4?Object(ga["a"])(l,{precision:4,decimal_places:0,lowercase:true}):Object(Ot["a"])(l)}):null;var b=!a&&r===F["e"].NoQuery;var g=!a&&!b&&r!==F["e"].None;var _=!a&&!b&&!g&&!l;var y=!a&&!b&&!g&&l>0;return p.a.createElement("div",{className:"c-search__results",onScroll:this.onScroll,ref:this.wrapperRef},d,p.a.createElement("div",{className:h()("c-search__view",{"c-search__view--hide_filters":!m}),id:i,role:"tabpanel"},p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement("h4",{className:"c-search__section_header"},b&&Ca.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),g&&Ca.t("Something went wrong"),_&&o,y&&f,p.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},c)),a&&p.a.createElement(_a["a"],{size:"large"}),b&&p.a.createElement("p",null,Ca.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"})),g&&p.a.createElement("p",null,Ca.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",p.a.createElement(ee["a"],{"data-qa":"search-retry",onClick:u},Ca.t("Try again"))),_&&s,y&&s),m&&p.a.createElement("div",{className:"c-search__extras",ref:this.topScrollElementRef},p.a.createElement("div",{className:"c-search__section"},p.a.createElement("h4",{className:"c-search__section_header"},Ca.t("Filter by")),n)),!v&&p.a.createElement(ja,{onClick:this.scrollTop})))}}]);return t}(d["Component"]);Ia.displayName="SearchResultsContainerBase";Ia.defaultProps={id:void 0,children:void 0,filterUI:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:void 0,alertHeader:void 0,loading:false,errorType:F["e"].None,secondaryView:void 0,setScrollPosition:j["noop"],onClickRefreshSearch:j["noop"],scrollPosition:0,logInfo:j["noop"],usePrimarySearch:false};var Ta=function e(t){return{logInfo:Object(T["a"])({state:t}).info,usePrimarySearch:Object(g["a"])(t),secondaryView:Object(ya["i"])(t)}};var Aa=Object(f["connect"])(Ta,null,null,{withRef:true})(Ia);var Na=r(58);var Pa=r.n(Na);var Ra=r(92);var Ma=new J["b"]("search");var xa={featurePersSearchMsgLimitWarningI18N:v["b"].bool,goToPricingPlans:v["b"].func.isRequired,hiddenMessagesCount:v["b"].number,hiddenUsers:v["b"].arrayOf(v["b"].shape({id:v["b"].number}).isRequired),currentUser:v["b"].shape({id:v["b"].number})};var Da={featurePersSearchMsgLimitWarningI18N:false,hiddenMessagesCount:0,hiddenUsers:[],currentUser:{}};var Fa=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getBannerMessageData=r.getBannerMessageData.bind(r);return r}s()(t,[{key:"getBannerMessageData",value:function e(){var t=this.props,r=t.hiddenUsers,a=t.currentUser;var n=Object(j["filter"])(r,function(e){return e.id!==a.id});var i=n.length<r.length;return{hiddenUsersWithoutCurrentUser:n,isCurrentUserIncludedInHiddenUsers:i}}},{key:"renderBannerMessage",value:function e(){var t=this.props,r=t.featurePersSearchMsgLimitWarningI18N,a=t.goToPricingPlans,n=t.hiddenMessagesCount,i=t.hiddenUsers;if(!r)return null;var s=this.getBannerMessageData(),o=s.hiddenUsersWithoutCurrentUser,l=s.isCurrentUserIncludedInHiddenUsers;var c=Pa()(o,3),u=c[0];u=void 0===u?{}:u;var d=u.handle,v=c[1];v=void 0===v?{}:v;var m=v.handle,h=c[2];h=void 0===h?{}:h;var f=h.handle;var b=p.a.createElement(ee["a"],{onClick:a},Ma.t("Upgrade to a paid plan"));switch(i.length){case 1:return l?Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> that match your search.",{upgradeLink:b,hiddenMessagesCount:n}):Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> from {user1Handle} that match your search.",{upgradeLink:b,hiddenMessagesCount:n,user1Handle:d});case 2:return l?Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> that match your search, from {user1Handle} and yourself.",{upgradeLink:b,hiddenMessagesCount:n,user1Handle:d}):Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> that match your search, from {user1Handle} and {user2Handle}.",{upgradeLink:b,hiddenMessagesCount:n,user1Handle:d,user2Handle:m});case 3:return l?Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> that match your search, from {user1Handle}, {user2Handle}, and yourself.",{upgradeLink:b,hiddenMessagesCount:n,user1Handle:d,user2Handle:m}):Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> that match your search, from {user1Handle}, {user2Handle}, and {user3Handle}.",{upgradeLink:b,hiddenMessagesCount:n,user1Handle:d,user2Handle:m,user3Handle:f});default:return l?Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> that match your search, from {user1Handle}, {user2Handle}, yourself, and other teammates.",{upgradeLink:b,hiddenMessagesCount:n,user1Handle:d,user2Handle:m}):Ma.rt("{upgradeLink} to see <strong>{hiddenMessagesCount} additional messages</strong> that match your search, from {user1Handle}, {user2Handle}, {user3Handle}, and other teammates.",{upgradeLink:b,hiddenMessagesCount:n,user1Handle:d,user2Handle:m,user3Handle:f})}}},{key:"render",value:function e(){if(!this.props.hiddenUsers.length)return null;return p.a.createElement("div",null,this.renderBannerMessage())}}]);return t}(d["PureComponent"]);Fa.displayName="HiddenMessagesBanner";Fa.defaultProps=Da;var La=function e(t){return{featurePersSearchMsgLimitWarningI18N:Object(A["isFeatureEnabled"])(t,"feature_pers_search_msg_limit_warning_i18n"),goToPricingPlans:function e(){return Object(Y["openAuthenticatedUrlInBrowser"])(Object(q["d"])(t),Ra["f"])}}};var Ba=Object(f["connect"])(La)(Fa);var Ua=new J["b"]("search");var qa="IMPROVED_SEARCH";var Ga={close:v["b"].func.isRequired,clogSearchFileClick:v["b"].func.isRequired,getMessageResultSummary:v["b"].func.isRequired,previewFile:v["b"].func.isRequired,currentTeam:v["b"].object.isRequired,results:v["b"].object,uiState:v["b"].object,setPageForModule:v["b"].func.isRequired,fetchSearchResultsByModule:v["b"].func.isRequired,displayModelOrViewById:v["b"].func.isRequired,messageSort:v["b"].string.isRequired,setMessageSort:v["b"].func.isRequired,scrollPosition:v["b"].number.isRequired,setViewScrollPosition:v["b"].func.isRequired,showThread:v["b"].func.isRequired,onClickRefreshSearch:v["b"].func.isRequired,numOfFileResults:v["b"].number,logInfo:v["b"].func,jumpToPermalink:v["b"].func.isRequired,openPermalink:v["b"].func.isRequired,isDebugInfoVisible:v["b"].bool.isRequired,setTab:v["b"].func,featureOpenPermalink:v["b"].bool.isRequired,telemeter:v["b"].object,openSearchFeedbackDialog:v["b"].func,shouldRenderHiddenMessagesBanner:v["b"].bool,featureSteepleChurch:v["b"].bool};var Ha={results:{},uiState:{},numOfFileResults:void 0,logInfo:j["noop"],setTab:j["noop"],telemeter:we["d"],openSearchFeedbackDialog:j["noop"],shouldRenderHiddenMessagesBanner:false,featureSteepleChurch:false};var Wa=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","onSeeFilesClick","setListRef","renderSortToggleMenu","onFeedbackClick","setScrollPosition"]);r.searchResultsContainerRef=p.a.createRef();r.markSearchModuleRenderStart=Object(j["throttle"])(function(){var t=r.props.results;Object(re["f"])("messages","messages",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:true});return r}s()(t,[{key:"onRepliesClick",value:function e(t){var r=t.channelId,a=t.ts;this.props.logInfo(qa,"Jumping to message replies. channel: "+r+" ts: "+a);this.props.showThread({channelId:r,threadTs:a});this.props.close()}},{key:"onSelectItem",value:function e(t,r){var a=this.getVisibleMessages()[r];if(a&&a.messages&&a.messages.length){var n=a.messages[0];this.jumpToMessage({permalink:n.permalink,teamId:this.props.currentTeam.id})}}},{key:"onSeeFilesClick",value:function e(){this.props.setTab({tab:"files"})}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"messages"})}},{key:"getVisibleMessages",value:function e(){return this.props.results.items[this.props.uiState.page]}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"messages",position:t})}},{key:"jumpToMessage",value:function e(t){var r=this;var a=t.teamId,n=t.permalink;this.props.logInfo(qa,"Jumping to message. team: "+a+" permalink: "+n);this.props.featureOpenPermalink&&this.props.openPermalink({permalink:n}).then(function(){return r.props.close()}).catch(function(){return r.props.logInfo(qa,"FAILED:(")});this.props.jumpToPermalink({permalink:n}).then(function(){return r.props.close()}).catch(function(){return r.props.logInfo(qa,"FAILED:(")})}},{key:"jumpToFile",value:function e(t,r){var a=r.file,n=r.iid,i=r.ts,s=r.channelId,o=r.userId,l=r.botId;this.props.logInfo(qa,"Jumping to file. file: "+a.id);this.props.clogSearchFileClick({iid:n,ts:i,channelId:s,userId:o,botId:l,fileId:a.id});this.props.previewFile({fileId:a.id});this.props.close()}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(qa,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(qa,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.props,a=r.results,n=r.uiState;var i=Math.max(n.page+t,1);if(a.items[i])this.props.setPageForModule({moduleType:"messages",page:i});else{this.props.logInfo(qa,"Fetching more results to display on next page");this.props.fetchSearchResultsByModule({module:"messages",page:i})}}},{key:"renderResults",value:function e(){var t=this;var r=this.props.uiState;var a=[];var n=[];if(!r.loading){a=this.getVisibleMessages();n=Object(j["map"])(a,function(e,t){return t})||[]}return p.a.createElement(ba,{ref:this.setListRef,ids:n,onSelectItem:this.onSelectItem,itemAriaLabel:function e(r){return t.props.getMessageResultSummary(a[r])},renderItem:function e(r){return p.a.createElement(yt,E()({key:a[r].iid},a[r],{onMessageJump:t.jumpToMessage,onFileJump:t.jumpToFile,onRepliesClick:t.onRepliesClick}))}})}},{key:"renderSortToggleMenu",value:function e(t){var r=this;return p.a.createElement(X["f"],t,p.a.createElement(X["b"],{key:"recent",label:Ua.t("Most recent"),onSelected:function e(){return r.props.setMessageSort({messageSort:F["d"].recentMessages})}}),p.a.createElement(X["b"],{key:"relevant",label:Ua.t("Most relevant"),onSelected:function e(){return r.props.setMessageSort({messageSort:F["d"].relevantMessages})}}))}},{key:"renderSortToggle",value:function e(){var t=this.props.messageSort;var r=t===F["d"].recentMessages?Ua.t("Most recent"):Ua.t("Most relevant");return p.a.createElement(X["e"],{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(Z["c"],null,r,p.a.createElement($["b"],{type:"chevron-down",inline:true})))}},{key:"renderMessageLimitBanner",value:function e(){var t=this.props.uiState;if(t.loading)return null;if(this.props.shouldRenderHiddenMessagesBanner)return p.a.createElement(Ba,null);return p.a.createElement(na,{type:"messages"})}},{key:"renderDebug",value:function e(){var t=this.props,r=t.isDebugInfoVisible,a=t.results;var n=r&&a.debug;var i=n&&JSON.stringify(a.debug,null,2);return n&&p.a.createElement("div",{className:"c-search__debug"},p.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),p.a.createElement("pre",{className:"c-search__debug_json"},i),p.a.createElement(Z["d"],{className:"c-search__debug_copy",size:"small",type:"outline",onClick:function e(){return Object(te["writeText"])(i)}},"Copy to clipboard"))}},{key:"renderSearchResults",value:function e(){var t=this.props,r=t.results,a=t.uiState,n=t.numOfFileResults,i=t.featureSteepleChurch;var s=r&&r.pagination&&r.pagination.total_count||0;var o=Object(j["isNumber"])(n)&&n>0;var l=r&&r.pagination&&r.pagination.page_count||0;var c=l>1&&!a.loading;var u=a.page||1;return p.a.createElement(d["Fragment"],null,this.renderDebug(),this.renderMessageLimitBanner(),s>0&&this.renderResults(),i&&s<=0&&p.a.createElement(w["a"],{enabled:["feature_steeple_church"]},p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,Ua.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,Ua.t("Using different keywords.")),p.a.createElement("li",null,Ua.t("Checking for typos.")),p.a.createElement("li",null,Ua.t("Adjusting your filters."))))),!i&&s<=0&&o&&p.a.createElement("p",null,Ua.t("However, there {numOfFileResults, plural, =1 {is one file} other {are several files}} related to your search.",{numOfFileResults:n}),"\xa0",p.a.createElement(ee["a"],{onClick:this.onSeeFilesClick},Ua.t("See files"))),!i&&s<=0&&!o&&p.a.createElement("p",null,Ua.t("Slack couldn\u2019t find any results related to your search.")),!c&&p.a.createElement(kt["a"],{className:s>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(wt,{visible:c,currentPageOffset:u,totalPageCount:l,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function e(){var t=this.props,r=t.results,a=t.uiState,n=t.scrollPosition;a.loading||this.markSearchModuleRenderStart();var i=r&&r.pagination&&r.pagination.total_count||0;return p.a.createElement(Aa,{id:"c-search__tab__messages",scrollPosition:n,loading:a.loading,errorType:a.error,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(zr,null),numResults:i,emptyResultsTitle:Ua.t("No results",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"}),sortDropdown:this.renderSortToggle(),onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef},this.renderSearchResults())}}]);return t}(d["PureComponent"]);Wa.displayName="MessageView";Wa.defaultProps=Ha;var Va=function e(t){var r=Object(q["d"])(t);var a=Object(G["getResponseModule"])(t,{module:"messages"})||{items:{}};var n=Object(b["i"])(t,"messages");var i=Object(P["c"])(t);var s=Object(G["getResponseModule"])(t,{module:"files"})||{items:{}};var o=s.pagination&&s.pagination.total_count;var l=Object(be["isScreenReaderEnabled"])(t);var c=function e(r){if(!l)return null;return fe(t,r)};var u=Object(Y["isOverMessageLimit"])(r)&&!Object(Q["isAppStoreBuild"])()&&"treatment"===Object(H["getGroupForUser"])(t,"pers_search_msg_limit_warning");return{results:a,uiState:n,messageSort:i,currentTeam:r,numOfFileResults:o,getMessageResultSummary:c,logInfo:Object(T["a"])({state:t}).info,isDebugInfoVisible:Object(b["g"])(t),scrollPosition:Object(b["p"])(t).messages,featureOpenPermalink:Object(A["isFeatureEnabled"])(t,"feature_open_permalink"),telemeter:Object(we["c"])({state:t}),shouldRenderHiddenMessagesBanner:u,featureSteepleChurch:Object(I["a"])(t)}};var Ka={clogSearchFileClick:function e(){return M["e"].apply(void 0,arguments)},jumpToPermalink:Ce,previewFile:function e(){return K["c"].apply(void 0,arguments)},displayModelOrViewById:W["a"],fetchSearchResultsByModule:function e(){return D["d"].apply(void 0,arguments)},setMessageSort:U,setPageForModule:function e(){return N["s"].apply(void 0,arguments)},setViewScrollPosition:function e(){return N["K"].apply(void 0,arguments)},showThread:function e(){return K["l"].apply(void 0,arguments)},setTab:z["a"],close:function e(){return V["a"].apply(void 0,arguments)},openPermalink:function e(){return Se["a"].apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return D["n"].apply(void 0,arguments)}};var za=Object(f["connect"])(Va,Ka)(Wa);var Qa=r(918);var Ya=r(1695);var Ja=new J["b"]("search");var Xa=/[\ue000\ue001]/g;function Za(e,t){if(!t)return null;var r=t.pretty_type,a=t.name,n=t.timestamp,i=t.user;var s=Object(ne["k"])(Object(ne["n"])(n,{returnMoment:true}),{shortenMonth:false,excludeYear:Object(ne["i"])(n)});return Object(j["unescape"])(Ja.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:r,fileName:a.replace(Xa,""),user:Object(se["a"])(e,{userId:i}),date:s}))}var $a=new J["b"]("search");var en="IMPROVED_SEARCH";var tn={clogFileClick:v["b"].func,clogSearchFileClick:v["b"].func,close:v["b"].func,error:v["b"].string,fetchSearchResultsByModule:v["b"].func,fileResults:v["b"].object,fileSearchSortChanged:v["b"].func,fileSort:v["b"].oneOf(Object(j["values"])(F["c"])),fileState:v["b"].object,getFileResultSummary:v["b"].func,loading:v["b"].bool,logInfo:v["b"].func,numOfMessageResults:v["b"].number,onClickRefreshSearch:v["b"].func,previewFile:v["b"].func,scrollPosition:v["b"].number,setPageForModule:v["b"].func,setTab:v["b"].func,setViewScrollPosition:v["b"].func,telemeter:v["b"].object,openSearchFeedbackDialog:v["b"].func,featureSteepleChurch:v["b"].bool};var rn={clogFileClick:j["noop"],clogSearchFileClick:j["noop"],close:j["noop"],error:"",fetchSearchResultsByModule:j["noop"],fileResults:{},fileSearchSortChanged:j["noop"],fileSort:F["c"].relevant,fileState:{},getFileResultSummary:j["noop"],loading:false,logInfo:j["noop"],numOfMessageResults:void 0,onClickRefreshSearch:j["noop"],previewFile:j["noop"],scrollPosition:0,setPageForModule:j["noop"],setTab:j["noop"],setViewScrollPosition:j["noop"],telemeter:we["d"],openSearchFeedbackDialog:j["noop"],featureSteepleChurch:false};var an=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["pageForward","pageBack","pageSearchResults","setListRef","onFileClick","onSelectItem","onSeeMessagesClick","setScrollPosition","clogLinkClick","onFeedbackClick"]);r.searchResultsContainerRef=p.a.createRef();r.markSearchModuleRenderStart=Object(j["throttle"])(function(){var t=r.props.fileResults;Object(re["f"])("files","score",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:true});return r}s()(t,[{key:"onFileClick",value:function e(t,r){var a=r.file,n=r.index;this.props.logInfo(en,"Jumping to file. file: "+a.id);this.props.clogSearchFileClick({iid:a.iid,userId:a.user,fileId:a.id,position:n});this.props.previewFile({fileId:a.id});this.props.close()}},{key:"onSelectItem",value:function e(t,r){var a=this.getVisibleFiles()[r];this.onFileClick(t,{file:a,index:r})}},{key:"onSeeMessagesClick",value:function e(){this.props.setTab({tab:"messages"})}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"files"})}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"files",position:t})}},{key:"getVisibleFiles",value:function e(){return this.props.fileResults.items[this.props.fileState.page]||[]}},{key:"clogLinkClick",value:function e(t,r){this.props.clogFileClick({file:t,payload:r})}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(en,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(en,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.props,a=r.fileState,n=r.fileResults;var i=Math.max(a.page+t,1);n.items[i]?this.props.setPageForModule({moduleType:"files",page:i}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",page:i})}},{key:"renderFiles",value:function e(){var t=this;var r=this.props,a=r.fileState,n=r.fileResults;var i=[];var s=[];if(n.items[a.page||1]){this.markSearchModuleRenderStart();i=this.getVisibleFiles();s=i.map(function(e,t){return t})}return p.a.createElement(ba,{ref:this.setListRef,ids:s,onSelectItem:this.onSelectItem,renderItem:function e(r){return p.a.createElement(Ya["a"],{key:i[r].id,index:r,file:i[r],onClick:t.onFileClick,clogLinkClick:function e(r){t.clogLinkClick(i[0],r)}})},itemAriaLabel:function e(r){return t.props.getFileResultSummary(i[r])}})}},{key:"renderSearchResults",value:function e(){var t=this.props,r=t.featureSteepleChurch,a=t.fileState,n=t.fileResults,i=t.numOfMessageResults,s=t.loading;var o=Object(j["isNumber"])(i)&&i>0;var l=n&&n.pagination&&n.pagination.total_count||0;var c=n&&n.pagination&&n.pagination.page_count||0;var u=c>1&&!this.props.loading;var v=a.page||1;return p.a.createElement(d["Fragment"],null,!s&&p.a.createElement(na,{type:"files"}),l>0&&this.renderFiles(),r&&l<=0&&p.a.createElement(w["a"],{enabled:["feature_steeple_church"]},p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,$a.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,$a.t("Using different keywords.")),p.a.createElement("li",null,$a.t("Checking for typos.")),p.a.createElement("li",null,$a.t("Adjusting your filters."))))),!r&&l<=0&&o&&p.a.createElement("p",null,$a.t("However, there {numOfMessageResults, plural, =1 {is one message} other {are several messages}} related to your search.",{numOfMessageResults:i}),"\xa0",p.a.createElement(ee["a"],{onClick:this.onSeeMessagesClick},$a.t("See messages"))),!r&&l<=0&&!o&&p.a.createElement("p",null,$a.t("Slack couldn\u2019t find any results related to your search.")),p.a.createElement(wt,{visible:u,currentPageOffset:v,totalPageCount:c,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function e(){var t=this;this.props.loading||this.markSearchModuleRenderStart();var r=this.props,a=r.scrollPosition,n=r.loading,i=r.fileResults,s=r.fileSort;var o=i&&i.pagination&&i.pagination.total_count||0;return p.a.createElement(Aa,{id:"c-search__tab_file",scrollPosition:a,loading:n,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(zr,{showFileFilters:true}),numResults:o,emptyResultsTitle:$a.t("No results",{fallbackHash:"7cded9ea830e64e87819b27ea57209379f4858af"}),errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef,sortDropdown:p.a.createElement(X["e"],{"data-qa":"file_sort_toggle",renderMenu:function e(r){var a=r.onTriggerClose;return p.a.createElement(X["f"],null,p.a.createElement(X["b"],{"data-qa-sort":F["c"].recent,onSelected:function e(){t.props.fileSearchSortChanged({sort:F["c"].recent});a()}},$a.t("Most recent")),p.a.createElement(X["b"],{"data-qa-sort":F["c"].relevant,onSelected:function e(){t.props.fileSearchSortChanged({sort:F["c"].relevant});a()}},$a.t("Most relevant")))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(Z["c"],{"data-qa":"file_sort_selection"},s===F["c"].recent&&$a.t("Most recent"),s===F["c"].relevant&&$a.t("Most relevant"),p.a.createElement($["b"],{type:"chevron-down",inline:true})))},this.renderSearchResults())}}]);return t}(d["PureComponent"]);an.displayName="FileViewBase";an.defaultProps=rn;var nn=function e(t){var r=Object(G["getResponseModule"])(t,{module:"files"})||{items:[]};var a=Object(b["i"])(t,"files");var n=Object(G["getResponseModule"])(t,{module:"messages"})||{items:{}};var i=n.pagination&&n.pagination.total_count;var s=Object(be["isScreenReaderEnabled"])(t);var o=function e(r){if(!s)return null;return Za(t,r)};return{fileResults:r,fileState:a,numOfMessageResults:i,getFileResultSummary:o,scrollPosition:Object(b["p"])(t).files,loading:a&&a.loading,error:a&&a.error,logInfo:Object(T["a"])({state:t}).info,fileSort:Object(Mt["a"])(t),telemeter:Object(we["c"])({state:t}),featureSteepleChurch:Object(I["a"])(t)}};var sn={setPageForModule:function e(){return N["s"].apply(void 0,arguments)},setViewScrollPosition:function e(){return N["K"].apply(void 0,arguments)},setTab:function e(){return z["a"].apply(void 0,arguments)},fetchSearchResultsByModule:function e(){return D["d"].apply(void 0,arguments)},clogSearchFileClick:function e(){return M["e"].apply(void 0,arguments)},clogFileClick:function e(){return Qa["a"].apply(void 0,arguments)},previewFile:function e(){return K["c"].apply(void 0,arguments)},close:function e(){return V["a"].apply(void 0,arguments)},fileSearchSortChanged:function e(){return Bt.apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return D["n"].apply(void 0,arguments)}};var on=Object(f["connect"])(nn,sn)(an);var ln=r(65);var cn=r(187);var un=r(157);var dn=r(93);var pn=r(150);var vn=r(316);var mn=r(1694);var hn=r(1782);var fn=new J["b"]("search");function bn(e,t){var r=Object(pe["d"])(e,t.id);var a=Object(q["j"])(e,Object(de["isFromAnotherTeam"])(r)?Object(de["teamIdForChannelFromAnotherTeam"])(e,r):r.team_id);var n=Object(Y["getTeamDisplayName"])(a);var i=Object(Y["isEnterpriseTeam"])(a)?Object(q["f"])(e):null;var s=Object(de["getDisplayNameForChannel"])(e,r,{publicChannelIncludeHashSign:false});var o=Object(hn["a"])({channelName:s,workspaceName:n,orgName:i,isOrgGlobalSharedPublicOrPrivateChannel:Object(de["isOrgGlobalSharedPublicOrPrivateChannel"])(r),isOrgSharedPublicOrPrivateChannel:Object(de["isOrgSharedPublicOrPrivateChannel"])(r),isExternallySharedChannel:Object(de["isExternallySharedChannel"])(r),isArchived:Object(de["isArchived"])(r),isPrivate:Object(de["isPrivateChannel"])(r),isNotMember:!Object(de["isMemberOfChannel"])(r)});var l=Object(oe["a"])(e,Object(de["getPurpose"])(r));return fn.t("{channelDescription}, {memberCount, plural, =1 {# member} other {# members}}, {channelPurpose}",{channelDescription:o,memberCount:t.member_count,channelPurpose:l})}var gn=r(49);var _n=r(795);var yn=r(50);var On=r(81);var kn=r(1058);var En=r(4359);var jn=r(1050);var Cn=r(3e3);var Sn=new J["b"]("search");var wn={channel:v["b"].object.isRequired,channelName:v["b"].string.isRequired,channelPreviousName:v["b"].string,channelTeamName:v["b"].string.isRequired,joinState:v["b"].string,leaveState:v["b"].string,memberCount:v["b"].number.isRequired,justification:v["b"].string,onClickLeave:v["b"].func,onClickJoin:v["b"].func,onClickChannel:v["b"].func,canJoinChannel:v["b"].bool,canLeaveChannel:v["b"].bool,canLeaveChannelReason:v["b"].string,useChannelEntity:v["b"].bool,iid:v["b"].string,logger:v["b"].object,telemeter:v["b"].object};var In={joinState:"",leaveState:"",justification:null,onClickLeave:j["noop"],onClickJoin:j["noop"],onClickChannel:j["noop"],canJoinChannel:true,canLeaveChannel:true,canLeaveChannelReason:"",channelPreviousName:null,useChannelEntity:false,iid:"unknown",logger:{error:j["noop"]},telemeter:{count:j["noop"]}};var Tn=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onFocus","onBlur","onClickJoin","onClickLeave","onActionButtonFocus","onActionButtonBlur","onActionsMouseEnter","onActionsMouseLeave","onInteractionButtonClick","onInteractionButtonFocus","onInteractionButtonBlur"]);r.state={hasFocus:false,hasActionFocus:false,hasActionHover:false};r.interactionTooltipRef=p.a.createRef();r.rootRef=p.a.createRef();r.hasRenderedNonexistentChannel=false;return r}s()(t,[{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onBlur",value:function e(){this.setState(function(){return{hasFocus:false}})}},{key:"onInteractionButtonClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onInteractionButtonFocus",value:function e(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.showTip()}},{key:"onInteractionButtonBlur",value:function e(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.hideTip()}},{key:"onActionButtonFocus",value:function e(t){this.setState(function(){return{hasActionFocus:true}});t.target.parentNode.scrollTop=0}},{key:"onActionButtonBlur",value:function e(){this.setState(function(){return{hasActionFocus:false}})}},{key:"onActionsMouseEnter",value:function e(){this.setState(function(){return{hasActionHover:true}})}},{key:"onActionsMouseLeave",value:function e(){this.setState(function(){return{hasActionHover:false}})}},{key:"onClickJoin",value:function e(t){var r=this;this.props.onClickJoin(t).then(function(){r.updateFocusState()})}},{key:"onClickLeave",value:function e(t){var r=this;this.props.onClickLeave(t).then(function(){r.updateFocusState()})}},{key:"updateFocusState",value:function e(){var t=this;this.rootRef&&this.rootRef.current&&this.setState(function(){return{hasFocus:t.rootRef.current.contains(document.activeElement)}})}},{key:"trackNonExistentChannelRender",value:function e(){if(this.hasRenderedNonexistentChannel)return;this.hasRenderedNonexistentChannel=true;this.props.telemeter.count("search_channels_nonexistent_channel_rendered",1);this.props.logger.error("Channel search displayed nonexistent channel",{channelId:this.props.channel.id,iid:this.props.iid},{subtype:"search_channels"})}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.channelTeamName,n=t.channelPreviousName,i=t.memberCount,s=t.joinState,o=t.leaveState,l=t.justification,c=t.onClickChannel,u=t.useChannelEntity;var d=Sn.t("Required");var v=Sn.t("Archived");var m=Sn.t("Can\u2019t leave");var f=Sn.t("Another workspace");var b=Sn.t("Can\u2019t leave");var g=Sn.t("Your organization requires everyone to be in this channel.");var _=Sn.t("You can\u2019t join an archived channel, but you can view and search its contents.");var y=Sn.t("To join this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:a});var O=Sn.t("To leave this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:a});var k=Sn.t("For some reason, you can\u2019t currently change your membership for {channelName}.",{channelName:this.props.channelName});var E=Sn.t("As a guest, you can\u2019t leave the channel you were invited to.");var j=Sn.t("As a guest, you need to be in at least one channel.");var C=Object(de["isMemberOfChannel"])(r);var S="loading"===s;var w="loading"===o;var I=C&&this.props.canLeaveChannel;var T=null;var A=null;if(C&&!I){switch(this.props.canLeaveChannelReason){case dn["b"].LAST_MEMBER:break;case dn["b"].USER_IS_RESTRICTED:T=m;A=E;break;case dn["b"].USER_IS_RESTRICTED_LAST_CHANNEL:case dn["b"].USER_IS_ULTRA_RESTRICTED:T=m;A=j;break;case dn["b"].CANT_LEAVE_GENERAL:case dn["b"].CANT_LEAVE_MANDATORY_SHARED_CHANNEL:T=d;A=g;break;case dn["b"].USER_NOT_FOUND:case dn["b"].CHANNEL_NOT_FOUND:default:T=b;A=k}if(Object(de["isFromAnotherTeam"])(r)){T=f;A=O}}else if(Object(de["isArchived"])(r)){T=v;A=_}else if(Object(de["isFromAnotherTeam"])(r))if(C){T=f;A=O}else{T=f;A=y}else if(!C&&!this.props.canJoinChannel){T=b;A=k}var N=!Object(de["isUnknownOrNonExistent"])(r)&&T&&A;var P=!Object(de["isUnknownOrNonExistent"])(r)&&!(T&&A);var R=Object(de["isNonExistent"])(r);R&&this.trackNonExistentChannelRender();return p.a.createElement("div",{className:h()("c-channel_search_result",{"c-channel_search_result--focused":this.state.hasFocus,"c-channel_search_result--show_suffix":!(this.state.hasActionFocus||this.state.hasActionHover),"c-channel_search_result--can_leave":I}),ref:this.rootRef,onFocus:this.onFocus,onBlur:this.onBlur,"data-qa":"channel_search_result"},p.a.createElement("div",{role:"presentation",onClick:c},R&&p.a.createElement("div",{className:"c-channel_search_result__channel"},p.a.createElement("div",{className:"c-channel_search_result__name_error"},p.a.createElement(kn["a"],{type:"unknown"})),p.a.createElement("div",null,Sn.t("For some reason, Slack wasn\u2019t able to fetch info about this channel."))),!R&&(u?p.a.createElement(En["a"],{className:"c-channel_search_result__channel",channel:r,bestFormerName:n,onClick:c,inlineNameSuffix:Sn.t("View channel"),nameSuffix:N&&p.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},p.a.createElement(yn["c"],{tip:A,ref:this.interactionTooltipRef},p.a.createElement(Z["c"],{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},T," ",p.a.createElement($["b"],{type:"info-circle",size:"inherit"})))),showUnreadBadge:true,metadata:p.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Sn.t("{count, plural, =1 {# member} other {# members}}",{count:i}),l&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"c-channel_search_result__vline"}),p.a.createElement($["b"],{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",p.a.createElement(_n["a"],{className:"c-channel_search_result__justification",text:l,emojiSize:On["a"].MEDIUM,showTooltips:false})))}):p.a.createElement(jn["a"],{size:"medium",className:"c-channel_search_result__channel",channel:r,bestFormerName:n,onClick:c,inlineNameSuffix:Sn.t("View channel"),nameSuffix:N&&p.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},p.a.createElement(yn["c"],{tip:A,ref:this.interactionTooltipRef},p.a.createElement(Z["c"],{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},T," ",p.a.createElement($["b"],{type:"info-circle",size:"inherit"})))),showUnreadBadge:true,metadata:p.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Sn.t("{count, plural, =1 {# member} other {# members}}",{count:i}),l&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"c-channel_search_result__vline"}),p.a.createElement($["b"],{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",p.a.createElement(_n["a"],{className:"c-channel_search_result__justification",text:l,emojiSize:On["a"].MEDIUM,showTooltips:false})))}))),P&&p.a.createElement("div",{className:"c-channel_search_result__actions","data-qa":"channel_search_result_actions",onMouseEnter:this.onActionsMouseEnter,onMouseLeave:this.onActionsMouseLeave},p.a.createElement(Z["b"],{type:"danger",className:"c-channel_search_result__action_leave","data-qa":"leave-channel",loading:w,onClick:this.onClickLeave,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},w?Sn.t("Leaving..."):Sn.t("Leave")),p.a.createElement("div",{className:h()("c-button","c-button--medium","c-button--primary","c-channel_search_result__joined_indicator")},Sn.t("Joined")),p.a.createElement(Z["b"],{type:"outline-primary",className:"c-channel_search_result__action_join","data-qa":"join-channel",loading:S,onClick:this.onClickJoin,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},S?Sn.t("Joining..."):Sn.t("Join")),p.a.createElement("div",{className:"c-button c-button--medium c-button--primary c-channel_search_result__width_placeholder"},Sn.t("Joined")),p.a.createElement("div",{className:"c-button c-button--medium c-button--outline-primary c-channel_search_result__width_placeholder"},Sn.t("Join")),p.a.createElement("div",{className:"c-button c-button--medium c-button--danger c-channel_search_result__width_placeholder"},Sn.t("Leave")),p.a.createElement(Z["b"],{type:"danger",className:"c-channel_search_result__width_placeholder",loading:true,role:"presentation"},Sn.t("Leaving...")),p.a.createElement(Z["b"],{type:"outline-primary",className:"c-channel_search_result__width_placeholder",loading:true,role:"presentation"},Sn.t("Joining..."))))}}]);return t}(p.a.Component);Tn.displayName="ChannelSearchResult";Tn.defaultProps=In;var An=function e(t,r){var a=r.channel,n=r.channelData;var i=E()({},a,{name:n.name,purpose:n.purpose});var s=Object(dn["m"])(t,n.id);var o=Object(q["d"])(t);return{useChannelEntity:"channel_search_new_entity"===Object(H["getGroupForUser"])(t,"channel_search_new_entity"),channel:Object(de["isUnknownOrNonExistent"])(a)?a:i,channelName:Object(de["getDisplayNameForChannel"])(t,a),channelPreviousName:n.previous_name,channelTeamName:Object(Y["getTeamDisplayName"])(Object(de["isFromAnotherTeam"])(a)?Object(q["j"])(t,Object(de["teamIdForChannelFromAnotherTeam"])(t,a)):o),isMember:Object(de["isFromAnotherTeam"])(a)?Object(de["isMemberOfChannel"])(a):n.is_member,memberCount:n.member_count,justification:n.justification,joinState:Object(b["a"])(t,n.id),leaveState:Object(b["b"])(t,n.id),canJoinChannel:Object(dn["g"])(t,n.id),canLeaveChannel:s.ok,canLeaveChannelReason:s.reason,logger:Object(T["a"])({state:t}),telemeter:Object(we["c"])({state:t})}};var Nn=Object(f["connect"])(An)(Tn);var Pn=v["b"].shape({type:v["b"].oneOf(Object(j["values"])(F["a"])),teamId:v["b"].string,teamDisplayName:v["b"].string});var Rn=v["b"].shape({state:v["b"].oneOf(["ready","loading","error"]).isRequired,teams:v["b"].arrayOf(v["b"].shape({id:v["b"].string.isRequired,name:v["b"].string.isRequired})).isRequired});var Mn=v["b"].arrayOf(v["b"].string);var xn=v["b"].arrayOf(v["b"].string);var Dn=r(257);var Fn=r(113);var Ln=Object(R["b"])("Channel/people search: fetch shared teams",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason;var n=Object(b["q"])(t());var i=36e5;var s=3;var o="ready"===n.state&&n.refreshed<=Date.now()-i||"error"===n.state;if(o){e(Object(N["F"])());return e(Object(Fn["l"])({reason:a})).then(function(r){if(!r.ok)throw new Error(r);var a=Object(j["uniq"])(r.channels.map(function(e){return e.team.id}));var n=t();var i=Tt()({},Object(_e["b"])(n),true);if(Object(Dn["e"])(n)){i[Object(_e["a"])(n)]=true;Object(q["a"])(n).forEach(function(e){i[e.id]=true})}var o=a.filter(function(e){return!i[e]});e(Object(N["G"])({teamIds:o}));e(Object(N["i"])({teamIds:o.slice(0,s)}));e(Object(N["v"])({teamIds:o.slice(0,s)}))}).catch(function(){e(Object(N["E"])())})}return Promise.resolve()});Ln.propTypes={reason:v["b"].string};var Bn=Object(R["b"])("Channel search filter select is opened",function(e){return e(Ln({reason:"channel_search_open"}))});Bn.propTypes=null;var Un=r(476);var qn=new J["b"]("search");var Gn={sharedTeams:Rn,filters:Mn,filterSuggestions:xn,toggleSearchOrgFilter:v["b"].func.isRequired,clogSearchFilterAdded:v["b"].func,clogSearchFilterRemoved:v["b"].func};var Hn={sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:j["noop"],clogSearchFilterRemoved:j["noop"]};var Wn=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["loadOptions","filterOptions","renderOption"]);return r}s()(t,[{key:"onOrgFilterChange",value:function e(t,r){var a=this.props.filters;var n=!a.includes(t);n?this.props.clogSearchFilterAdded({filter_channel_team:t,filter_position:r}):this.props.clogSearchFilterRemoved({filter_channel_team:t,filter_position:r});this.props.toggleSearchOrgFilter({teamId:t,value:n})}},{key:"loadOptions",value:function e(t){var r=this.props.sharedTeams;var a=new Un["b"](t);return Promise.resolve({options:Object(j["sortBy"])(r.teams.map(function(e){return{value:e.id,score:0===t.length?0:a.normalizeAndScore(Object(Y["getTeamDisplayName"])(e))}}),"score")})}},{key:"filterOptions",value:function e(t,r){var a=this.props.filters;return r.filter(function(e){return isFinite(e.score)&&!a.includes(e.value)})}},{key:"renderOption",value:function e(t){var r=this.props.filters;var a=t.value;return p.a.createElement(d["Fragment"],null,p.a.createElement(vr["b"],{id:a,size:18,ariaHidden:"true",tabIndex:"-1"})," ",p.a.createElement("span",{className:"no_wrap overflow_ellipsis padding_left_50"},p.a.createElement(mr["a"],{bold:r.includes(a),id:a})))}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.sharedTeams,n=r.filters,i=r.filterSuggestions;var s="loading"===a.state;var o=a.teams&&a.teams.length>0;if(s||!o)return null;var l=i.map(function(e){return{value:e,checked:n.includes(e)}});return p.a.createElement(Or,{title:qn.t("External organizations")},p.a.createElement(dr,{checkboxName:"external_org",placeholderText:qn.t("Enter an external organization"),showMoreOptionsAriaLabel:qn.t("More external organizations to filter by"),loadOptions:this.loadOptions,renderVisibleOption:this.renderOption,renderOption:this.renderOption,visibleOptions:l,onOptionChange:function e(r){t.onOrgFilterChange(r.value,l.indexOf(r))},onOptionAdd:function e(r){t.onOrgFilterChange(r.value,null)},filterOptions:this.filterOptions}))}}]);return t}(d["PureComponent"]);Wn.displayName="SearchOrgFilter";var Vn=Wn;Wn.defaultProps=Hn;var Kn=r(1853);var zn=r(3002);var Qn=new J["b"]("search");var Yn=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onChange=e.onChange.bind(e);return e}s()(t,[{key:"onChange",value:function e(t){this.props.onChannelTypeChange({type:t.value})}},{key:"render",value:function e(){var t=this;var r=this.props.sharedTeams;var a="ready"===r.state&&r.teams.length>1;var n=["all","private","archived"];a&&n.push("shared");var i={all:Qn.t("All channels"),private:Qn.t("Private channels"),archived:Qn.t("Archived channels"),shared:Qn.t("Shared channels")};var s=n.map(function(e){return{label:i[e],value:e}});var o=s.find(function(e){return e.value===t.props.channelType.type});return p.a.createElement(Kn["a"],{width:"100%",selectId:"channel_filter_type",options:s,selectedOption:o,onOptionSelected:this.onChange})}}]);return t}(d["Component"]);Yn.displayName="ChannelsFilterChannelType";var Jn=Yn;Yn.defaultProps={channelType:{type:F["a"].all},sharedTeams:{state:"ready",teams:[]},onChannelTypeChange:j["noop"]};var Xn=new J["b"]("search");var Zn=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onOnlySearchWorkspaceChange","onHideMemberChannelsChange","onChannelTypeChange"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.onChannelSearchOpened()}},{key:"onChannelTypeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type;this.props.clogSearchFilterAdded({filter_channel_type:r});this.props.setChannelSearchFilterType({type:r})}},{key:"onOnlySearchWorkspaceChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"});this.props.setSearchOnlySearchWorkspace({value:t.target.checked})}},{key:"onHideMemberChannelsChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_my_channels"}):this.props.clogSearchFilterRemoved({filter_other:"hide_my_channels"});this.props.setChannelSearchHideMemberChannels({value:t.target.checked})}},{key:"renderPrefs",value:function e(){var t=this.props,r=t.showEnterpriseOptions,a=t.filterWorkspaceOnly,n=t.hideMemberChannels,i=t.currentTeam;return p.a.createElement(Or,{title:Xn.t("More options")},p.a.createElement("div",{className:"p-search_filter__select"},r&&p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":a}),htmlFor:"search-channel-filter-workspace-only"},Xn.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d["Fragment"],null,p.a.createElement(vr["b"],{className:"p-search_filter__workspace_only_team_icon",team:i,size:18})," ",p.a.createElement(mr["a"],{id:i.id,bold:a}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:a,onChange:this.onOnlySearchWorkspaceChange,id:"search-channel-filter-workspace-only"})),p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":n}),htmlFor:"search-channel-filter-hide-member-channels"},Xn.t("Hide my channels")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:n,onChange:this.onHideMemberChannelsChange,id:"search-channel-filter-hide-member-channels"}))))}},{key:"render",value:function e(){var t=this.props,r=t.channelType,a=t.sharedTeams,n=t.filters,i=t.filterSuggestions;var s="loading"===a.state;return p.a.createElement("div",{className:"p-search_filters"},p.a.createElement(Or,{title:Xn.t("Channel type")},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Jn,{isLoading:s,sharedTeams:a,channelType:r,onChannelTypeChange:this.onChannelTypeChange}))),a.teams.length>0&&p.a.createElement(Vn,{sharedTeams:a,filters:n,filterSuggestions:i,toggleSearchOrgFilter:this.props.toggleChannelSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved}),this.renderPrefs())}}]);return t}(d["Component"]);Zn.displayName="ChannelsFilterUIBase";Zn.defaultProps={channelType:{type:F["a"].all},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:j["noop"],clogSearchFilterRemoved:j["noop"]};var $n=function e(t){var r=Object(b["q"])(t);var a=Object(b["d"])(t);var n=Object(q["d"])(t);var i=Object(b["c"])(t),s=i.type,o=i.teamId;return{channelType:{type:s,teamId:o,teamDisplayName:o&&Object(Y["getTeamDisplayName"])(Object(q["j"])(t,o))},filters:Object(b["e"])(t),filterSuggestions:Object(q["k"])(t,a).map(function(e){return e.id}),currentTeam:n,showEnterpriseOptions:Object(Dn["e"])(t),filterWorkspaceOnly:Object(P["f"])(t),hideMemberChannels:Object(P["a"])(t),sharedTeams:{state:r.state,teams:Object(q["k"])(t,r.teamIds).map(function(e){return{id:e.id,name:Object(Y["getTeamDisplayName"])(e)}})}}};var ei={setChannelSearchFilterType:function e(){return Gt.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function e(){return Ht.apply(void 0,arguments)},setChannelSearchHideMemberChannels:function e(){return Lt.apply(void 0,arguments)},onChannelSearchOpened:function e(){return Bn.apply(void 0,arguments)},toggleChannelSearchOrgFilter:function e(){return Wt.apply(void 0,arguments)},clogSearchFilterAdded:function e(){return M["f"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return M["g"].apply(void 0,arguments)}};var ti=Object(f["connect"])($n,ei)(Zn);var ri=r(3004);var ai=new J["b"]("search");var ni="IMPROVED_SEARCH";function ii(e){var t=e.channelName,r=e.onRetry,a=Te()(e,["channelName","onRetry"]);return p.a.createElement(un["b"],E()({position:"bottom-right",icon:"warning",showCloseButton:true},a),p.a.createElement("span",null,p.a.createElement("strong",null,ai.rt("Couldn\u2019t join {channelName}.",{channelName:t}))," ",ai.t("This could be a connection issue, or just a little blip.")," ",p.a.createElement(cn["a"],{onClick:r},ai.t("Try again"))))}ii.displayName="ErrorToastCannotJoinBlip";function si(e){var t=e.channelName,r=Te()(e,["channelName"]);return p.a.createElement(un["b"],E()({position:"bottom-right",icon:"warning",showCloseButton:true},r),p.a.createElement("span",null,p.a.createElement("strong",null,ai.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",ai.t("Your organization requires everyone to be in it, so no one misses important info.")," "))}si.displayName="ErrorToastCannotLeaveRestricted";function oi(e){var t=e.channelName,r=e.onRetry,a=Te()(e,["channelName","onRetry"]);return p.a.createElement(un["b"],E()({position:"bottom-right",icon:"warning",showCloseButton:true},a),p.a.createElement("span",null,p.a.createElement("strong",null,ai.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",ai.t("This could be a connection issue, or just a little blip.")," ",p.a.createElement(cn["a"],{onClick:r},ai.t("Try again"))))}oi.displayName="ErrorToastCannotLeaveBlip";var li=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onFeedbackClick"]);r.searchResultsContainerRef=p.a.createRef();return r}s()(t,[{key:"componentWillUnmount",value:function e(){this.props.showNewChannelSearch&&this.props.markChannelSearchSeen()}},{key:"onNavigateChannel",value:function e(t){var r=this;this.props.clogSearchChannelClick({type:M["a"].channel,iid:this.props.iidMap[t.id],channelId:t.id});var a=void 0;if(Object(de["isFromAnotherTeam"])(t)){var n=this.props.teamIdForChannelFromAnotherTeam(t);a=Object(gn["a"])()?this.props.setPrimaryView({id:t.id,teamId:n}):this.props.openChannelFromAnotherTeam({channelId:t.id,teamId:n})}else a=this.props.setPrimaryView({id:t.id,teamId:t.team_id});return a.then(function(){return r.props.close()})}},{key:"onJoinChannelId",value:function e(t){var r=this;this.props.clogSearchChannelClick({type:M["a"].channelJoin,iid:this.props.iidMap[t],channelId:t});return this.props.joinChannelFromSearch({channelId:t}).then(function(){r.listEl&&r.listEl.focusItem(t)}).catch(function(){var e=r.props.getDisplayNameForChannel(r.props.flannelChannelMap[t]);r.props.enqueueToast({element:p.a.createElement(ii,E()({channelName:e,onRetry:function e(){return r.onJoinChannelId(t)}},r.getToastOffset()))})})}},{key:"onLeaveChannelId",value:function e(t){var r=this;this.props.clogSearchChannelClick({type:M["a"].channelLeave,iid:this.props.iidMap[t],channelId:t});return this.props.leaveChannelFromSearch({channelId:t}).then(function(){r.listEl&&r.listEl.focusItem(t)}).catch(function(){var e=r.props.getDisplayNameForChannel(r.props.flannelChannelMap[t]);var a=r.props.canLeaveChannelWithReason(t),n=a.ok,i=a.reason;var s=!n&&[dn["b"].CANT_LEAVE_GENERAL,dn["b"].CANT_LEAVE_MANDATORY_SHARED_CHANNEL].includes(i);r.props.enqueueToast({element:s?p.a.createElement(si,E()({channelName:e},r.getToastOffset())):p.a.createElement(oi,E()({channelName:e,onRetry:function e(){return r.onLeaveChannelId(t)}},r.getToastOffset()))})})}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"channels"})}},{key:"getToastOffset",value:function e(){if(this.searchResultsContainerRef.current){var t=this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset();return t}return{}}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"channels",position:t})}},{key:"pageForward",value:function e(){this.props.clogSearchChannelClick({type:M["a"].channelPageNext});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(ni,"Page forward in channel results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.props.clogSearchChannelClick({type:M["a"].channelPagePrev});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(ni,"Page backwards in channel results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.props,a=r.moduleState,n=r.channelsResponse,i=r.sort;var s=Math.max(a.page+t,1);n.items[s]?this.props.setPageForModule({moduleType:"channels",page:s}):this.props.fetchSearchResultsByModule({module:"channels",sort:i,page:s})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.sort,n=r.setSort,i=r.scrollPosition,s=r.moduleState,o=r.channelsResponse,l=r.channelSummaryLabels,c=r.flannelChannelMap,u=r.featureSteepleChurch;var v=[[F["b"].relevant,ai.t("Most relevant")],[F["b"].created,ai.t("Date created (newest to oldest)")],[F["b"].name,ai.t("Name (A to Z)")],[F["b"].memberCount,ai.t("Members (most to least)")]];var m=Object(j["fromPairs"])(v);var h=o.items[s.page||1]||[];var f=h.reduce(function(e,t){e[t.id]=t;return e},{});var b=o.pagination&&o.pagination.total_count;var g=b>0;o.debug&&Object(ln["exportToGlobalDebugger"])("channelSearchExplain",Object(j["sortBy"])(o.debug.features,function(e){return-e.total_score}));var _=o&&o.pagination&&o.pagination.page_count||0;var y=_>1&&!s.loading;var O=s.page||1;return p.a.createElement(Aa,{id:"c-search__tab_channel",loading:s.loading,errorType:s.error,scrollPosition:i,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(ti,null),numResults:b,emptyResultsTitle:ai.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:p.a.createElement(X["e"],{"data-qa":"channel_sort_toggle",renderMenu:function e(t){var r=t.onTriggerClose;return p.a.createElement(X["f"],null,v.map(function(e){var t=Pa()(e,2),a=t[0],i=t[1];return p.a.createElement(X["b"],{"data-qa-sort":a,key:a,onSelected:function e(){n({sort:a});r()}},i)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(Z["c"],{"data-qa":"channel_sort_selection"},m[a],p.a.createElement($["b"],{type:"chevron-down",inline:true}))),alertHeader:this.props.showNewChannelSearch&&p.a.createElement("div",{className:"c-channel_search__new_feature_alert"},p.a.createElement($["b"],{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),p.a.createElement("span",null,ai.rt("<b>Find just the right channels.</b> Now you can search for channels by name, description, or even topics of conversation.")))},g&&p.a.createElement(ba,{ref:this.setListRef,ids:h.map(function(e){return e.id}),onSelectItem:function e(r,a){return t.onNavigateChannel(c[a])},itemAriaLabel:function e(t){return l[t]},renderItem:function e(r){return p.a.createElement(Nn,{key:r,channel:c[r],channelData:f[r],iid:t.props.iidMap[r],onClickChannel:function e(a){var n=a.target;var i=false;while(n&&n!==a.currentTarget){"A"===n.tagName&&n.href&&(i=true);n=n.parentNode}if(i)t.props.clogSearchChannelClick({type:M["a"].channelPurposeLink,iid:t.props.iidMap[r],channelId:r});else{a.preventDefault();t.onNavigateChannel(c[r])}},onClickJoin:function e(a){a.preventDefault();return t.onJoinChannelId(r)},onClickLeave:function e(a){a.preventDefault();return t.onLeaveChannelId(r)}})}}),!g&&u&&p.a.createElement(w["a"],{enabled:["feature_steeple_church"]},p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,ai.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,ai.t("Using different keywords.")),p.a.createElement("li",null,ai.t("Checking for typos.")),p.a.createElement("li",null,ai.t("Adjusting your filters."))))),!g&&!u&&p.a.createElement("p",null,ai.t("Slack couldn\u2019t find any results related to your search.")),p.a.createElement(wt,{visible:y,currentPageOffset:O,totalPageCount:_,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(d["Component"]);li.displayName="ChannelViewBase";li.defaultProps={sort:F["b"].relevant,setSort:j["noop"],scrollPosition:0,setViewScrollPosition:j["noop"],moduleState:{},channelsResponse:{items:{}},setPageForModule:j["noop"],fetchSearchResultsByModule:j["noop"],logInfo:j["noop"],setPrimaryView:j["noop"],openChannelFromAnotherTeam:j["noop"],close:j["noop"],teamIdForChannelFromAnotherTeam:j["noop"],clogSearchChannelClick:j["noop"],channelSummaryLabels:{},iidMap:{},joinChannelFromSearch:j["noop"],leaveChannelFromSearch:j["noop"],flannelChannelMap:{},getDisplayNameForChannel:j["noop"],enqueueToast:j["noop"],canLeaveChannelWithReason:j["noop"],showNewChannelSearch:false,markChannelSearchSeen:j["noop"],onClickRefreshSearch:j["noop"],openSearchFeedbackDialog:j["noop"],featureSteepleChurch:false};var ci=function e(t){var r=Object(b["i"])(t,"channels")||{};var a=Object(G["getResponseModule"])(t,{module:"channels"})||{items:{}};var n=a.items[r.page||1]||[];var i={};var s={};var o={};n.forEach(function(e){s[e.id]=bn(t,e);var r=Object(pe["d"])(t,e.id);o[e.id]=r;i[e.id]=e.iid});return{sort:Object(P["b"])(t),scrollPosition:Object(b["p"])(t).channels,moduleState:r,channelsResponse:a,iidMap:i,channelSummaryLabels:s,flannelChannelMap:o,logInfo:Object(T["a"])({state:t}).info,teamIdForChannelFromAnotherTeam:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return de["teamIdForChannelFromAnotherTeam"].apply(void 0,[t].concat(a))},getDisplayNameForChannel:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return de["getDisplayNameForChannel"].apply(void 0,[t].concat(a))},canLeaveChannelWithReason:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return dn["m"].apply(void 0,[t].concat(a))},showNewChannelSearch:!Object(le["g"])(t,"seen_channel_search"),featureSteepleChurch:Object(I["a"])(t)}};var ui=function e(t){return{setSort:function e(){return t(Ut.apply(void 0,arguments))},setViewScrollPosition:function e(){return t(N["K"].apply(void 0,arguments))},setPageForModule:function e(){return t(N["s"].apply(void 0,arguments))},fetchSearchResultsByModule:function e(){return t(D["d"].apply(void 0,arguments))},setPrimaryView:function e(){return t(vn["a"].apply(void 0,arguments))},openChannelFromAnotherTeam:function e(){return t(mn["a"].apply(void 0,arguments))},close:function e(){return t(V["a"].apply(void 0,arguments))},clogSearchChannelClick:function e(){return t(M["c"].apply(void 0,arguments))},joinChannelFromSearch:function e(){return t(D["e"].apply(void 0,arguments))},leaveChannelFromSearch:function e(){return t(D["f"].apply(void 0,arguments))},enqueueToast:function e(){return t(pn["enqueueToast"].apply(void 0,arguments))},markChannelSearchSeen:function e(){return t(D["g"].apply(void 0,arguments))},openSearchFeedbackDialog:function e(){return t(D["n"].apply(void 0,arguments))}}};var di=Object(f["connect"])(ci,ui)(li);var pi=r(43);var vi=r(98);var mi=r(1660);var hi=r(763);var fi=r(4368);var bi=r(1504);var gi=r(565);var _i=r(506);var yi=r(373);var Oi=r(467);var ki=r(61);var Ei=r(273);var ji=r(1693);var Ci=r(1087);var Si=Object(R["b"])("People search result top terms clicked",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.member;var n=t();var i=Object(Ei["getSearchInputBoxDisplayQuery"])(n);var s=Object(ji["b"])(n,a);var o=i+" "+s;return e(Object(Ci["a"])({textyString:o,queryIsUserGenerated:false})).then(function(){e(Object(N["J"])({tab:"messages"}));return e(Object(G["setEditableRequestQueryThenRequest"])({query:o}))})});Si.propTypes={member:v["b"].object.isRequired};var wi=r(3006);var Ii=new J["b"]("member_profile");var Ti={featurePeopleSearch:v["b"].bool.isRequired,featureSteepleChurchLink:v["b"].bool.isRequired,featureReactMemberProfileCard:v["b"].bool.isRequired,iid:v["b"].string,member:v["b"].object.isRequired,memberWithHighlights:v["b"].object.isRequired,teamCustomProfileFields:v["b"].arrayOf(v["b"].shape({label:v["b"].string.isRequired,name:v["b"].string.isRequired,type:v["b"].string.isRequired})).isRequired,customProfileFieldMemberNamesById:v["b"].objectOf(v["b"].string).isRequired,displayQuery:v["b"].string,onClickMember:v["b"].func,clogSearchPeopleClick:v["b"].func,startImByMemberId:v["b"].func,closeSearch:v["b"].func,onClickTopTerms:v["b"].func,showMemberProfile:v["b"].func,onNavigateError:v["b"].func,onViewProfileError:v["b"].func};var Ai={iid:"",displayQuery:"",onClickMember:j["noop"],clogSearchPeopleClick:j["noop"],startImByMemberId:j["noop"],closeSearch:j["noop"],onClickTopTerms:j["noop"],showMemberProfile:j["noop"],onNavigateError:j["noop"],onViewProfileError:j["noop"]};var Ni=function e(t){return p.a.createElement(_n["a"],{text:t,noJumbomoji:true,noLinking:true,noSpecials:true,noEmojiText:true,noHexColors:true,noCode:true,noQuotes:true})};Ni.displayName="renderSearchHighlightText";var Pi=function e(){return/[\ue000\ue001]/g};var Ri=function e(t){return Pi().test(t)};var Mi=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onClickMemberName","onClickMember","onFocusResult","onBlurResult","onFocusPerson","onBlurPerson","onClickShowMore","onClickNavigate","onClickViewProfile","onInfoTooltipClick","onInfoTooltipFocus","onInfoTooltipBlur","onClickTopTerms"]);r.infoTooltipRef=p.a.createRef();r.state={resultHasFocus:false,personHasFocus:false,isExpanded:false};return r}s()(t,[{key:"shouldComponentUpdate",value:function e(t,r){return!Object(j["isEqual"])(this.props,t)||!Object(j["isEqual"])(this.state,r)}},{key:"onFocusResult",value:function e(){this.setState(function(){return{resultHasFocus:true}})}},{key:"onBlurResult",value:function e(){this.setState(function(){return{resultHasFocus:false}})}},{key:"onFocusPerson",value:function e(){this.setState(function(){return{personHasFocus:true}})}},{key:"onBlurPerson",value:function e(){this.setState(function(){return{personHasFocus:false}})}},{key:"onClickMember",value:function e(t){t.isDefaultPrevented()||this.props.onClickMember(t)}},{key:"onClickMemberName",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:M["b"].avatar,iid:this.props.iid,memberId:this.props.member.id});if(!this.props.featureReactMemberProfileCard){t.persist();Object(gi["a"])(t,this.props.member.id)}}},{key:"onClickShowMore",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:M["b"].showMore,iid:this.props.iid,memberId:this.props.member.id});this.setState(function(){return{isExpanded:true}})}},{key:"onClickNavigate",value:function e(t){var r=this;t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:M["b"].navigateToMessages,iid:this.props.iid,memberId:this.props.member.id});this.props.startImByMemberId({memberId:this.props.member.id}).then(function(){r.props.closeSearch()}).catch(function(e){r.props.onNavigateError(function(){return r.onClickNavigate(t)});throw e})}},{key:"onClickViewProfile",value:function e(t){var r=this;t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:M["b"].viewProfile,iid:this.props.iid,memberId:this.props.member.id});this.props.showMemberProfile({memberId:this.props.member.id}).then(function(){r.props.closeSearch()}).catch(function(e){r.props.onViewProfileError(function(){return r.onClickViewProfile(t)});throw e})}},{key:"onClickTopTerms",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:M["b"].topTerms,iid:this.props.iid,memberId:this.props.member.id});this.props.onClickTopTerms({member:this.props.member})}},{key:"onInfoTooltipClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onInfoTooltipFocus",value:function e(){this.infoTooltipRef.current&&this.infoTooltipRef.current.showTip()}},{key:"onInfoTooltipBlur",value:function e(){this.infoTooltipRef.current&&this.infoTooltipRef.current.hideTip()}},{key:"render",value:function e(){var t=this.props,r=t.member,a=t.memberWithHighlights,n=t.featureReactMemberProfileCard,i=t.teamCustomProfileFields,s=t.customProfileFieldMemberNamesById;if(!this.props.featurePeopleSearch)return null;var o=Object(tr["getMemberTeamId"])(r);var l=Object(tr["isAppOrBot"])(r);var c=Object(tr["isDeleted"])(r);var u=Object(tr["isSuspended"])(r);var d=Object(tr["isExternal"])(r);var v=Object(tr["isSelf"])(r);var m=Object(ki["c"])(r);var f=Object(ki["d"])(r);if(m)return p.a.createElement("div",{className:"p-people_search_result p-people_search_result--non_existent"},p.a.createElement("div",{className:"p-people_search_result__person"},p.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),p.a.createElement("div",{className:"p-people_search_result__body"},Ii.t("For some reason, Slack wasn\u2019t able to display this result."))));if(f)return p.a.createElement("div",{className:"p-people_search_result p-people_search_result--unknown"},p.a.createElement("div",{className:"p-people_search_result__person"},p.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),p.a.createElement("div",{className:"p-people_search_result__body"},p.a.createElement("div",{className:"p-people_search_result__row"},p.a.createElement(hi["b"],{size:"random"})),p.a.createElement("div",{className:"p-people_search_result__row"},p.a.createElement(hi["b"],{size:"random"})))));var b=!!a.top_terms;var g=Object(tr["getMemberRealName"])(a);var _=Object(tr["getMemberProfileFieldDisplayName"])(a);var y=Object(tr["getMemberTitle"])(a);var O=!!y;var k=Object(tr["getMemberEmail"])(a);var E=Object(tr["getMemberProfileFields"])(a);var C=Object(tr["getMemberProfile"])(a);var S=C&&C.status_emoji;var w=C&&C.status_text;var I=[];_&&g!==_&&Ri(_)&&I.push({className:null,key:"displayname",term:Ii.t("Display name",{ns:"member_profile"}),valueAsText:_,node:Ni(_)});k&&Ri(k)&&I.push({className:null,key:"email",term:Ii.t("Email address",{ns:"member_profile"}),valueAsText:k,node:Ni(k)});if(S&&Ri(S)||w&&Ri(w)){var T=[];S&&T.push(S);w&&T.push(w);var A=T.join(" ");I.push({className:null,key:"status",term:Ii.t("Status",{ns:"member_profile"}),valueAsText:A,node:Ni(A)})}i.forEach(function(e){var t=e.name;if(E&&E[t]&&E[t].value&&Pi().test(E[t].value))if("user"===e.type){var r=E[t].value.split(",");var a=Object(Oi["a"])(r.map(function(e){var t=Ri(e);var r=e.replace(Pi(),"");var a=t?"\ue000"+s[r]+"\ue001":s[r];return a}),{noConj:true}).join("");I.push({className:null,key:t,term:e.label,valueAsText:a,node:Ni(a)})}else"link"!==e.type&&I.push({className:null,key:t,term:e.label,valueAsText:E[t].value,node:Ni(E[t].value)})});b&&I.push({className:"p-people_search_result__row--top_terms",key:"top_terms",term:null,valueAsText:"top_terms",node:p.a.createElement("span",{className:"p-people_search_result__top_terms"},p.a.createElement($["b"],{className:"p-people_search_result__top_terms_sparkles",type:"sparkles_filled",inline:true,size:"inherit"}),this.props.featureSteepleChurchLink?p.a.createElement(nr["a"],{className:"p-people_search_result__top_terms_link","data-qa":"people_search_result__top_terms_link",onClick:this.onClickTopTerms},Ii.rt("Talks about \u201c{query}\u201d",{query:p.a.createElement(_n["a"],{className:"p-people_search_result__top_terms_term",text:this.props.displayQuery,noJumbomoji:true,noLinking:true,noSpecials:true,noHexColors:true,noCode:true,noQuotes:true})})):p.a.createElement("span",{className:"p-people_search_result__top_terms_link","data-qa":"people_search_result__top_terms_link"},Ii.rt("Talks about \u201c{query}\u201d",{query:p.a.createElement(_n["a"],{text:this.props.displayQuery,noJumbomoji:true,noLinking:true,noSpecials:true,noHexColors:true,noCode:true,noQuotes:true})})),p.a.createElement(yn["c"],{tip:Ii.t("Based on public channels and conversations with you"),ref:this.infoTooltipRef},p.a.createElement(He["a"],{"aria-disabled":"true",className:"p-people_search_result__top_terms_info",onClick:this.onInfoTooltipClick,onFocus:this.onInfoTooltipFocus,onBlur:this.onInfoTooltipBlur},p.a.createElement($["b"],{type:"info-circle",inline:true,size:"inherit"}))))});I=Object(j["uniqWith"])(I,function(e,t){return e.term===t.term&&e.valueAsText===t.valueAsText});var N=I.length>0;var P=O?I.length>1:I.length>2;var R=this.state.isExpanded?I.length:3;var M=!this.state.isExpanded&&I.length>R;var x=void 0;x=c||u?Ii.t("View History"):Ii.t("Message");return p.a.createElement("div",{className:h()("p-people_search_result",{"p-people_search_result--has-focus":this.state.resultHasFocus}),onFocus:this.onFocusResult,onBlur:this.onBlurResult},p.a.createElement("div",{role:"presentation",onClick:this.onClickMember},p.a.createElement("div",{className:h()("p-people_search_result__person",{"p-people_search_result__person--has-focus":this.state.personHasFocus,"p-people_search_result__person--deactivated":c}),onFocus:this.onFocusPerson,onBlur:this.onBlurPerson},p.a.createElement(mi["b"],{className:"p-people_search_result__avatar",size:70,user:r,userId:r.id,isExternal:d,teamId:o,isInteractive:true,showCard:true,showTooltip:true,showBadge:false,ariaHidden:"true",tabIndex:"-1"}),p.a.createElement("div",{className:h()("p-people_search_result__body",{"p-people_search_result__body--many_rows":P,"p-people_search_result__body--no_title":!O})},p.a.createElement("div",{className:"p-people_search_result__name","data-qa":"people_search_result__name"},n?p.a.createElement(_i["a"],{userId:r.id,onClick:this.onClickMemberName},p.a.createElement(He["a"],{className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},p.a.createElement(fi["a"],{"data-qa":"name",name:Ni(g),isAppOrBot:l,isDeleted:c,isSelf:v,isNonExistent:m,isUnknown:f}))):p.a.createElement(He["a"],{onClick:this.onClickMemberName,className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},p.a.createElement(fi["a"],{"data-qa":"name",name:Ni(g),isAppOrBot:l,isDeleted:c,isSelf:v,isNonExistent:m,isUnknown:f})),!c&&p.a.createElement(yi["a"],{memberId:r.id,"data-qa":"people_search_result__presence",className:"c-member__presence"})),O&&p.a.createElement("div",{className:"p-people_search_result__title","data-qa":"people_search_result__title"},Ni(y)),N&&p.a.createElement("div",{className:"p-people_search_result__rows","data-qa":"people_search_result__rows"},I.slice(0,R).map(function(e){return p.a.createElement("div",{key:e.key,className:h()("p-people_search_result__row",e.className),"data-qa":"people_search_result__row"},e.term&&p.a.createElement("b",{"data-qa":"people_search_result__term",className:"p-people_search_result__term"},e.term,":"," "),p.a.createElement("span",{"data-qa":"people_search_result__definition",className:"p-people_search_result__definition"},e.node))})),M&&!this.state.isExpanded&&p.a.createElement(nr["a"],{className:"p-people_search_result__show_more","data-qa":"people_search_result__show_more",onClick:this.onClickShowMore,"aria-expanded":"false"},Ii.t("Show more\u2026"))))),p.a.createElement("div",{className:"p-people_search_result__actions"},p.a.createElement(Z["d"],{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickNavigate},x),p.a.createElement(Z["d"],{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickViewProfile},Ii.t("View Profile"))))}}]);return t}(p.a.Component);Mi.displayName="PeopleSearchResult";Mi.defaultProps=Ai;var xi=function e(t,r){var a=r.memberWithHighlights;var n=Object(q["d"])(t);var i=Object(bi["a"])(n);var s=Object(tr["getMemberProfileFields"])(a);var o={};s&&i.forEach(function(e){if("user"===e.type){var r=s&&s[e.name];r&&r.value&&r.value.split(",").forEach(function(e){var r=e.replace(/[\ue000\ue001]/g,"");var a=Object(At["d"])(t,r);o[r]=Object(tr["getMemberRealName"])(a)})}});return{featurePeopleSearch:Object(I["a"])(t),featureSteepleChurchLink:Object(A["isFeatureEnabled"])(t,"feature_steeple_church_link"),featureReactMemberProfileCard:Object(A["isFeatureEnabled"])(t,"feature_react_member_profile_card"),teamCustomProfileFields:i,customProfileFieldMemberNamesById:o,displayQuery:Object(Ei["getSearchInputBoxDisplayQuery"])(t)}};var Di=function e(t){return{clogSearchPeopleClick:function e(){return t(M["j"].apply(void 0,arguments))},closeSearch:function e(){return t(V["a"].apply(void 0,arguments))},onClickTopTerms:function e(){return t(Si.apply(void 0,arguments))}}};var Fi=Object(f["connect"])(xi,Di)(Mi);var Li=r(138);var Bi=new J["b"]("search");var Ui=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onChange"]);return r}s()(t,[{key:"onChange",value:function e(t){this.props.onAccountTypeChange({type:t.value})}},{key:"render",value:function e(){var t=this;if(!this.props.featureSteepleChurch)return null;var r=[{value:F["f"].all,label:Bi.t("All types")},{value:F["f"].owners,label:Bi.t("Owners")},{value:F["f"].admins,label:Bi.t("Admins")},{value:F["f"].full,label:Bi.t("Full Members (includes owners and admins)")},{value:F["f"].guests,label:Bi.t("Guests")},{value:F["f"].deactivated,label:Bi.t("Deactivated accounts"),isDisabled:this.props.hideDeactivatedUsers}];var a=r.find(function(e){return e.value===t.props.accountType.type});var n=this.props.hideDeactivatedUsers?"deactivated-accounts-disabled":"deactivated-accounts-enabled";return p.a.createElement(Kn["a"],{key:n,width:"100%",options:r,ariaLabel:Bi.t("Select an account type to filter by"),className:"c-people_filter",selectedOption:a,onOptionSelected:this.onChange})}}]);return t}(d["Component"]);Ui.displayName="PeopleFilterAccountType";Ui.defaultProps={accountType:{type:F["f"].all},hideDeactivatedUsers:false,onAccountTypeChange:j["noop"]};var qi=Object(Li["a"])("feature_steeple_church")(Ui);var Gi=36e5;var Hi=Object(R["b"])("people search: tab opened, initializing data",function(e,t){var r=t();var a=Object(q["d"])(r);var n=Object(At["b"])(r);var i=Object(bi["a"])(a);var s=Object(tr["getMemberProfileFields"])(n);var o=Object(b["j"])(r);i.forEach(function(t){if(t.options&&t.options.length>1){var r=t.name;var a=[];if(s&&s[r]){var n=t.options.find(function(e){return e.value===s[r].value});n&&a.push(n.value)}a.push.apply(a,Pt()(t.options.slice(0,3).map(function(e){return e.value})));Object(j["uniq"])(a).slice(0,3).forEach(function(t){var a=o&&o[r]&&o[r].find(function(e){return e.value===t});e(Object(N["t"])({id:r,value:t,checked:!!a&&a.checked}))})}})});var Wi=Object(R["b"])("people search: tab opened, initializing data",function(e,t){var r=t();var a=Object(b["n"])(r);var n=!(a&&"ready"===a.state&&a.refreshed>=Date.now()-Gi);if(!n){e(Hi());return Promise.resolve()}e(Object(N["y"])());return e(Object(ye["e"])({reason:"people_search_open"})).then(function(){e(Hi());e(Object(N["z"])())}).catch(function(){e(Object(N["x"])())})});var Vi=Object(R["b"])("people search: tab opened, initializing data",function(e){return Promise.all([e(Ln({reason:"people_search_open"})),e(Wi())])});Vi.propTypes={};var Ki=Vi;var zi=r(4273);var Qi=r(1164);var Yi=Object(j["memoize"])(function(){var e=Object(zi["a"])(Object(Qi["a"])());var t={};e.forEach(function(e){var r=e[1];var a=e[0];t[r]=a});return t});function Ji(e){var t=Yi();var r=Object.values(Object(At["a"])(e));var a={};var n=void 0;for(var i=0;i<r.length;i++){var s=r[i];var o=Object(tr["getMemberTimezone"])(s);if(o){a[o]?a[o]+=1:a[o]=1;Object(tr["isSelf"])(s)&&(n=o)}}var l=Object.keys(a);l.sort(function(e,t){return a[e]<a[t]});Object(j["remove"])(l,function(e){return e===n});var c=[n].concat(Pt()(l.slice(0,2))).map(function(e){return{value:e,label:t[e],checked:false}});return c}var Xi=new J["b"]("search");var Zi={featurePeopleSearch:v["b"].bool,accountType:v["b"].shape({type:v["b"].oneOf(Object(j["values"])(F["f"]))}),peopleSearchOpened:v["b"].func,setPeopleSearchFilterType:v["b"].func.isRequired,currentTeam:v["b"].object.isRequired,visibleFilterState:v["b"].objectOf(v["b"].arrayOf(v["b"].shape({value:v["b"].string.isRequired,checked:v["b"].bool.isRequired}))),peopleSearchCustomFilterChanged:v["b"].func,sharedTeams:Rn,filters:Mn,filterSuggestions:xn,timezoneSuggestions:v["b"].array,togglePeopleSearchOrgFilter:v["b"].func.isRequired,clogSearchFilterAdded:v["b"].func,clogSearchFilterRemoved:v["b"].func,showEnterpriseOptions:v["b"].bool.isRequired,filterWorkspaceOnly:v["b"].bool.isRequired,hideDeactivatedUsers:v["b"].bool.isRequired,setSearchOnlySearchWorkspace:v["b"].func.isRequired,setPeopleSearchHideDeactivatedUsers:v["b"].func.isRequired,peopleSearchTimezoneFilterChanged:v["b"].func.isRequired,teamProfileState:v["b"].shape({state:v["b"].oneOf(["loading","error","ready"]),refreshed:v["b"].number})};var $i={featurePeopleSearch:false,accountType:{type:F["f"].all},visibleFilterState:{},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:j["noop"],clogSearchFilterRemoved:j["noop"],peopleSearchOpened:j["noop"],peopleSearchCustomFilterChanged:j["noop"],timezoneSuggestions:[],teamProfileState:{state:"ready",refreshed:0}};var es=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["onAccountTypeChange","onOnlySearchWorkspaceChange","onHideDeactivatedUsersChange"]);r.peopleSearchOpenedPromise=null;return r}s()(t,[{key:"componentDidMount",value:function e(){this.peopleSearchOpenedPromise=this.props.peopleSearchOpened()}},{key:"componentWillUnmount",value:function e(){this.peopleSearchOpenedPromise&&this.peopleSearchOpenedPromise.cancel()}},{key:"onAccountTypeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type;this.props.clogSearchFilterAdded({filter_account_type:r});this.props.setPeopleSearchFilterType({type:r})}},{key:"onOnlySearchWorkspaceChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"});this.props.setSearchOnlySearchWorkspace({value:t.target.checked})}},{key:"onHideDeactivatedUsersChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_deactivated_users"}):this.props.clogSearchFilterRemoved({filter_other:"hide_deactivated_users"});this.props.setPeopleSearchHideDeactivatedUsers({value:t.target.checked})}},{key:"loadOptions",value:function e(t,r){var a=new Un["b"](t);return Object(j["sortBy"])(r.map(function(e){return{value:e.value,label:e.label,score:0===t.length?0:a.normalizeAndScore(e.label)}}),"score")}},{key:"filterOptions",value:function e(t,r,a){return r.filter(function(e){return isFinite(e.score)&&!a.some(function(t){return t.checked&&t.value===e.value})})}},{key:"renderTimezoneFilter",value:function e(){var t=this;var r=this.props.timezoneSuggestions;var a=Yi();var n=Object.keys(a).map(function(e){return{value:e,label:a[e]}});var i=Xi.t("Choose another");return p.a.createElement(w["a"],{enabled:["feature_steeple_church"]},p.a.createElement(Or,{title:Xi.t("Time zone",{ns:"edit_profile"}),"data-qa":"search-filter-section-people-timezones"},p.a.createElement(dr,{checkboxName:"timezone",placeholderText:i,showMoreOptionsAriaLabel:i,loadOptions:function e(r){return Promise.resolve({options:t.loadOptions(r,n)})},visibleOptions:r,onOptionChange:function e(r,a){t.props.peopleSearchTimezoneFilterChanged({label:r.label,value:r.value,checked:a})},onOptionAdd:function e(a){var n=r&&r.find(function(e){return e.value===a.value});var i=n&&n.checked;t.props.peopleSearchTimezoneFilterChanged({label:a.label,value:a.value,checked:!i})},filterOptions:function e(a,n){return t.filterOptions(a,n,r)}})))}},{key:"renderPrefs",value:function e(){var t=this.props,r=t.showEnterpriseOptions,a=t.filterWorkspaceOnly,n=t.hideDeactivatedUsers,i=t.currentTeam,s=t.accountType;var o=s.type===F["f"].deactivated;return p.a.createElement(w["a"],{enabled:["feature_steeple_church"]},p.a.createElement(Or,{title:Xi.t("More options")},p.a.createElement("div",{className:"p-search_filter__select"},r&&p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":a}),htmlFor:"search-channel-filter-workspace-only"},Xi.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d["Fragment"],null,p.a.createElement(vr["b"],{className:"p-search_filter__workspace_only_team_icon",team:i,size:18})," ",p.a.createElement(mr["a"],{id:i.id,bold:a}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:a,onChange:this.onOnlySearchWorkspaceChange,id:"search-channel-filter-workspace-only"})),p.a.createElement("label",{className:h()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":n,"p-search_filter__checkbox_label--disabled":o}),htmlFor:"search-people-filter-hide-deactivated-users"},Xi.t("Hide deactivated accounts")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",disabled:o,checked:n,onChange:this.onHideDeactivatedUsersChange,id:"search-people-filter-hide-deactivated-users"})))))}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.accountType,n=r.currentTeam,i=r.visibleFilterState,s=r.sharedTeams,o=r.teamProfileState,l=r.filters,c=r.filterSuggestions,u=r.hideDeactivatedUsers;if(!this.props.featurePeopleSearch)return null;var d="loading"===o.state||"loading"===s.state;var v=Xi.t("Choose another");var m=Object(bi["a"])(n).filter(function(e){return e.options&&e.options.length>1});var h={};m.forEach(function(e){var t=e.name;var r={};e.options.forEach(function(e){r[e.value]=e});h[t]=i[t]?i[t].filter(function(e){return r[e.value]}).map(function(e){return{value:e.value,label:r[e.value].label,checked:e.checked}}):[]});return p.a.createElement(w["a"],{enabled:["feature_steeple_church"]},p.a.createElement(Or,{title:Xi.t("Account type")},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(qi,{accountType:a,hideDeactivatedUsers:u,onAccountTypeChange:this.onAccountTypeChange}))),!d&&s.teams.length>0&&p.a.createElement(Vn,{sharedTeams:s,filters:l,filterSuggestions:c,toggleSearchOrgFilter:this.props.togglePeopleSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved}),this.renderPrefs(),d?p.a.createElement("div",null,p.a.createElement(Dr,{variation:0}),p.a.createElement(Dr,{variation:1})):m.map(function(e){return p.a.createElement(Or,{key:e.name,title:e.label,"data-qa":"search-filter-section-people-custom"},p.a.createElement(dr,{checkboxName:e.name,visibleOptions:h[e.name],loadOptions:function r(a){return Promise.resolve({options:t.loadOptions(a,e.options)})},filterOptions:function r(a,n){return t.filterOptions(a,n,h[e.name])},onOptionChange:function r(a,n){t.props.peopleSearchCustomFilterChanged({id:e.name,value:a.value,checked:n})},onOptionAdd:function r(a){var n=i[e.name]&&i[e.name].find(function(e){return e.value===a.value});var s=n&&n.checked;t.props.peopleSearchCustomFilterChanged({id:e.name,value:a.value,checked:!s})},placeholderText:v,showMoreOptionsAriaLabel:v,showMoreOptions:e.options.length>h[e.name].length}))}))}}]);return t}(d["Component"]);es.displayName="PeopleFilterUIBase";es.defaultProps=$i;var ts=function e(t){var r=Object(b["k"])(t);var a=Object(b["q"])(t);var n=Object(b["l"])(t);return{featurePeopleSearch:Object(I["a"])(t),accountType:r,currentTeam:Object(q["d"])(t),visibleFilterState:Object(b["j"])(t),sharedTeams:{state:a.state,teams:Object(q["k"])(t,a.teamIds).map(function(e){return{id:e.id,name:Object(Y["getTeamDisplayName"])(e)}})},filters:Object(b["m"])(t),filterSuggestions:Object(q["k"])(t,n).map(function(e){return e.id}),showEnterpriseOptions:Object(Dn["e"])(t),filterWorkspaceOnly:Object(P["f"])(t),hideDeactivatedUsers:Object(P["d"])(t),timezoneSuggestions:Object(b["o"])(t),teamProfileState:Object(b["n"])(t)}};var rs={setPeopleSearchFilterType:function e(){return Kt.apply(void 0,arguments)},peopleSearchCustomFilterChanged:function e(){return zt.apply(void 0,arguments)},peopleSearchTimezoneFilterChanged:function e(){return Yt.apply(void 0,arguments)},clogSearchFilterAdded:function e(){return M["f"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return M["g"].apply(void 0,arguments)},peopleSearchOpened:function e(){return Ki.apply(void 0,arguments)},togglePeopleSearchOrgFilter:function e(){return Vt.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function e(){return Ht.apply(void 0,arguments)},setPeopleSearchHideDeactivatedUsers:function e(){return Qt.apply(void 0,arguments)}};var as=Object(f["connect"])(ts,rs)(es);var ns=r(3008);var is=new J["b"]("search");var ss="IMPROVED_SEARCH";var os={sort:v["b"].oneOf(Object(j["values"])(F["g"])),setSort:v["b"].func,featureSteepleChurch:v["b"].bool,scrollPosition:v["b"].number,setViewScrollPosition:v["b"].func,moduleState:v["b"].object,peopleResponse:v["b"].object,setPageForModule:v["b"].func,fetchSearchResultsByModule:v["b"].func,logInfo:v["b"].func,clogSearchPeopleClick:v["b"].func,memberSummaryLabels:v["b"].objectOf(v["b"].string),iidMap:v["b"].objectOf(v["b"].string),getMemberById:v["b"].func.isRequired,showNewPeopleSearch:v["b"].bool,markPeopleSearchSeen:v["b"].func,onClickRefreshSearch:v["b"].func,showMemberProfile:v["b"].func,closeSearch:v["b"].func,startImByMemberId:v["b"].func,enqueueToast:v["b"].func};var ls={sort:F["g"].relevant,setSort:j["noop"],featureSteepleChurch:false,scrollPosition:0,setViewScrollPosition:j["noop"],moduleState:{},peopleResponse:{items:{}},setPageForModule:j["noop"],fetchSearchResultsByModule:j["noop"],logInfo:j["noop"],clogSearchPeopleClick:j["noop"],memberSummaryLabels:{},iidMap:{},showNewPeopleSearch:false,markPeopleSearchSeen:j["noop"],onClickRefreshSearch:j["noop"],showMemberProfile:j["noop"],closeSearch:j["noop"],startImByMemberId:j["noop"],enqueueToast:j["noop"]};var cs=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["a"])(r,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onNavigateError","onViewProfileError"]);r.searchResultsContainerRef=p.a.createRef();return r}s()(t,[{key:"componentWillUnmount",value:function e(){this.props.showNewPeopleSearch&&this.props.markPeopleSearchSeen()}},{key:"onSelectItem",value:function(){var e=Object(pi["coroutine"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:this.props.clogSearchPeopleClick({type:M["b"].people,iid:this.props.iidMap[t.id],memberId:t.id});a.prev=1;a.next=4;return Object(pi["resolve"])(this.props.startImByMemberId({memberId:t.id}));case 4:a.next=10;break;case 6:a.prev=6;a.t0=a["catch"](1);this.onNavigateError(function(){return r.onSelectItem(t)});throw a.t0;case 10:a.prev=10;a.next=13;return Object(pi["resolve"])(this.props.showMemberProfile({memberId:t.id}));case 13:a.next=19;break;case 15:a.prev=15;a.t1=a["catch"](10);this.onViewProfileError(function(){return r.onSelectItem(t)});throw a.t1;case 19:this.props.closeSearch();case 20:case"end":return a.stop()}},e,this,[[1,6],[10,15]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onNavigateError",value:function e(t){if(!this.props.featureSteepleChurch)return;this.props.enqueueToast({element:p.a.createElement(un["b"],E()({position:"bottom-right",icon:"warning",showCloseButton:true},this.getToastOffset()),p.a.createElement("span",null,is.rt("<strong>Couldn\u2019t open conversation</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(e){var r=e.tag,a=e.key,n=e.text;switch(r){case"strong":return p.a.createElement("strong",{key:a},n);case"a":return p.a.createElement(ee["a"],{key:a,onClick:t},n);default:return null}})))})}},{key:"onViewProfileError",value:function e(t){if(!this.props.featureSteepleChurch)return;this.props.enqueueToast({element:p.a.createElement(un["b"],E()({position:"bottom-right",icon:"warning",showCloseButton:true},this.getToastOffset()),p.a.createElement("span",null,is.rt("<strong>Couldn\u2019t open profile</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(e){var r=e.tag,a=e.key,n=e.text;switch(r){case"strong":return p.a.createElement("strong",{key:a},n);case"a":return p.a.createElement(ee["a"],{key:a,onClick:t},n);default:return null}})))})}},{key:"getToastOffset",value:function e(){if(this.searchResultsContainerRef.current){var t=this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset();return t}return{}}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"people",position:t})}},{key:"pageForward",value:function e(){this.props.clogSearchPeopleClick({type:M["b"].peoplePageNext});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(ss,"Page forward in people results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.props.clogSearchPeopleClick({type:M["b"].peoplePagePrev});this.listEl&&this.listEl.focus();this.searchResultsContainerRef.current.getWrappedInstance().scrollTop();this.props.logInfo(ss,"Page backwards in people results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.props,a=r.moduleState,n=r.peopleResponse,i=r.sort;var s=Math.max(a.page+t,1);n.items[s]?this.props.setPageForModule({moduleType:"people",page:s}):this.props.fetchSearchResultsByModule({module:"people",sort:i,page:s})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.sort,n=r.setSort,i=r.featureSteepleChurch,s=r.scrollPosition,o=r.moduleState,l=r.peopleResponse,c=r.memberSummaryLabels;if(!i)return null;var u=[[F["g"].relevant,is.t("Most relevant")],[F["g"].name,is.t("Name (A to Z)")]];var v=Object(j["fromPairs"])(u);var m=l.items[o.page||1]||[];var h=m.reduce(function(e,t){e[t.id]=t;return e},{});var f=l.pagination&&l.pagination.total_count;var b=f>0;l.debug&&Object(ln["exportToGlobalDebugger"])("peopleSearchExplain",Object(j["sortBy"])(l.debug.features,function(e){return-e.total_score}));var g=l&&l.pagination&&l.pagination.page_count||0;var _=g>1&&!o.loading;var y=o.page||1;return p.a.createElement(Aa,{id:"c-search__tab_people",loading:o.loading,errorType:o.error,scrollPosition:s,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(as,null),numResults:f,emptyResultsTitle:is.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:p.a.createElement(X["e"],{"data-qa":"people_sort_toggle",renderMenu:function e(t){var r=t.onTriggerClose;return p.a.createElement(X["f"],null,u.map(function(e){var t=Pa()(e,2),a=t[0],i=t[1];return p.a.createElement(X["b"],{"data-qa-sort":a,key:a,onSelected:function e(){n({sort:a});r()}},i)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(Z["c"],{"data-qa":"people_sort_selection"},v[a],p.a.createElement($["b"],{type:"chevron-down",inline:true}))),alertHeader:this.props.showNewPeopleSearch&&p.a.createElement("div",{className:"c-channel_search__new_feature_alert"},p.a.createElement($["b"],{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),is.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"}))},b?p.a.createElement(ba,{ref:this.setListRef,ids:m.map(function(e){return e.id}),onSelectItem:function e(r,a){return t.onSelectItem(t.props.getMemberById(a))},itemAriaLabel:function e(t){return c[t]},renderItem:function e(r){return p.a.createElement(Fi,{key:r,iid:t.props.iidMap[r],member:t.props.getMemberById(r),memberWithHighlights:h[r],onClickMember:function e(a){a.preventDefault();t.onSelectItem(t.props.getMemberById(r))},startImByMemberId:t.props.startImByMemberId,showMemberProfile:t.props.showMemberProfile,onViewProfileError:t.onViewProfileError,onNavigateError:t.onNavigateError})}}):p.a.createElement(d["Fragment"],null,p.a.createElement("p",null,is.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,is.t("Using different keywords.")),p.a.createElement("li",null,is.t("Checking for typos.")),p.a.createElement("li",null,is.t("Adjusting your filters.")))),p.a.createElement(wt,{visible:_,currentPageOffset:y,totalPageCount:g,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(d["Component"]);cs.displayName="PeopleViewBase";cs.defaultProps=ls;var us=function e(t){var r=Object(b["i"])(t,"people")||{};var a=Object(G["getResponseModule"])(t,{module:"people"})||{items:{}};var n=a.items[r.page||1]||[];var i={};var s={};n.forEach(function(e){s[e.id]="TODO: aria-label copy for member";i[e.id]=e.iid});return{sort:Object(P["e"])(t),scrollPosition:Object(b["p"])(t).people,moduleState:r,peopleResponse:a,iidMap:i,memberSummaryLabels:s,getMemberById:function e(r){return Object(At["d"])(t,r)},featureSteepleChurch:Object(I["a"])(t),logInfo:Object(T["a"])({state:t}).info,showNewPeopleSearch:!Object(le["g"])(t,"seen_people_search")}};var ds=function e(t){return{setSort:function e(){return t(qt.apply(void 0,arguments))},setViewScrollPosition:function e(){return t(N["K"].apply(void 0,arguments))},setPageForModule:function e(){return t(N["s"].apply(void 0,arguments))},fetchSearchResultsByModule:function e(){return t(D["d"].apply(void 0,arguments))},clogSearchPeopleClick:function e(){return t(M["j"].apply(void 0,arguments))},markPeopleSearchSeen:function e(){return t(D["h"].apply(void 0,arguments))},showMemberProfile:function e(){return t(K["j"].apply(void 0,arguments))},closeSearch:function e(){return t(V["a"].apply(void 0,arguments))},startImByMemberId:function e(){return t(vi["startImByMemberId"].apply(void 0,arguments))},enqueueToast:function e(){return t(pn["enqueueToast"].apply(void 0,arguments))}}};var ps=Object(f["connect"])(us,ds)(cs);var vs=r(1783);var ms=r(2394);var hs={tab:v["b"].string.isRequired,onClickRefreshSearch:v["b"].func.isRequired,usePrimarySearch:v["b"].bool};var fs={usePrimarySearch:false};var bs=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderCurrentView",value:function e(){switch(this.props.tab){case"messages":return p.a.createElement(za,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return p.a.createElement(on,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"channels":return p.a.createElement(di,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"people":return p.a.createElement(ps,{onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}},{key:"render",value:function e(){var t=h()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(_["a"])(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(_["a"])()});return p.a.createElement(y["a"],{id:O["MESSAGE_CONTAINERS"].SEARCH},p.a.createElement("div",{className:t},p.a.createElement("div",{className:"c-search","data-qa":"search_view"},!this.props.usePrimarySearch&&p.a.createElement(vs["a"],null),this.renderCurrentView())))}}]);return t}(d["PureComponent"]);bs.displayName="SearchView";bs.defaultProps=fs;var gs=function e(t){return{tab:Object(b["s"])(t),usePrimarySearch:Object(g["a"])(t)}};var _s=t["a"]=Object(f["connect"])(gs)(bs)},function(e,t,r){"use strict";r.r(t);var a={};r.r(a);r.d(a,"supportsCallWindowStatus",function(){return R});r.d(a,"setCallWindowBusy",function(){return M});r.d(a,"isCallWindowBusy",function(){return x});r.d(a,"setCallWindowToken",function(){return D});r.d(a,"clearCallWindowToken",function(){return F});r.d(a,"getCallWindowToken",function(){return L});r.d(a,"setCallWindowTeamId",function(){return B});r.d(a,"clearCallWindowTeamId",function(){return U});r.d(a,"getCallWindowTeamId",function(){return q});r.d(a,"setCallWindowTeamName",function(){return G});r.d(a,"clearCallWindowTeamName",function(){return H});r.d(a,"getCallWindowTeamName",function(){return W});r.d(a,"setIncomingCallWindowBusy",function(){return V});r.d(a,"isIncomingCallWindowBusy",function(){return K});r.d(a,"setIncomingCallWindowToken",function(){return z});r.d(a,"clearIncomingCallWindowToken",function(){return Q});r.d(a,"getIncomingCallWindowToken",function(){return Y});r.d(a,"setIncomingCallWindowTeamId",function(){return J});r.d(a,"clearIncomingCallWindowTeamId",function(){return X});r.d(a,"getIncomingCallWindowTeamId",function(){return Z});r.d(a,"setIncomingCallWindowTeamName",function(){return $});r.d(a,"clearIncomingCallWindowTeamName",function(){return ee});r.d(a,"getIncomingCallWindowTeamName",function(){return te});var n=r(3);var i=r.n(n);var s=r(44);var o=r(42);var l=r(1845);var c=r(481);var u=r(4);var d=r(15);var p=r(23);var v=r(30);var m=r(12);var h=r(71);var f=r(27);var b=r(228);var g="lastBootSonicValue";var _="sonicDowngradeTs";var y=1728e5;var O=Object(d["b"])("Called when the client first mounts",function(e,t){Object(o["didFinishLoading"])();C(t);I();T(t);A(t);N(t);j(t);S(t)});var k=O;function E(e){return Object(o["getAppLogFiles"])().then(function(t){var r=t&&t.length>0?t[0]:null;if(!r)return Promise.resolve();var a=Object(f["c"])(e);var n=Object(u["getFromBootData"])(a,"api_token");if(!n)return Promise.resolve();return c["b"].fetch({method:"profiling.addLogging",httpMethod:"POST",args:{token:n,platform:"ssb",log_file:r},teamId:e})}).catch(function(t){Object(m["a"])({teamId:e}).error("Unable to upload app logs: "+t)})}function j(e){setTimeout(function(){var t=e();if(!Object(u["isFeatureEnabled"])(t,"feature_desktop_logs_upload"))return;var r="ssb";var a=Object(u["getFromBootData"])(t,"api_token");var n=Object(p["b"])(t);c["b"].fetch({method:"api.features",args:{token:a,platform:r},teamId:n}).then(function(e){e&&e.features&&e.features.desktop_diagnostics_timestamp&&E(n)})},6e4)}function C(e){if(!Object(u["isFeatureEnabled"])(e(),"feature_desktop_force_production_channel"))return;Object(o["setPreference"])({name:"releaseChannel",value:"prod"})}function S(e){if(!Object(o["canAccessLocalPreferences"])())return;if(!Object(v["isSSBAndAtLeastVersion"])("4.0.0"))return;var t=Object(o["getLocalPreference"])("bootSonic");var r=localStorage.getItem(g);if(t===r)return;var a=e();var n=Object(h["c"])({state:a});var i="beta"===Object(o["getReleaseChannel"])();Object(m["b"])().info("Decision to boot Sonic changed since last session: '"+r+"' -> '"+t+"'");try{localStorage.setItem(g,t)}catch(e){Object(m["b"])().error("Unable to set '"+g+"'",e)}switch(t){case"once":Object(o["setLocalPreference"])({name:"bootSonic",value:"always"});n.count(i?"sonic_rollout_upgrade_to_sonic_beta_3":"sonic_rollout_upgrade_to_sonic_3");break;case"never":w();n.count(i?"sonic_rollout_downgrade_to_legacy_beta_3":"sonic_rollout_downgrade_to_legacy_3");try{localStorage.setItem(_,Date.now())}catch(e){Object(m["b"])().error("Unable to set '"+_+"'",e)}!i&&Object(b["a"])(5)&&E(Object(p["b"])(a)).then(function(){n.count("sonic_rollout_downgrade_to_legacy_logs_available_3")});break;default:break}}function w(){var e=localStorage.getItem(_);if(null===e)return;var t=Date.now()-e;t>y&&Object(o["setLocalPreference"])({name:"bootSonic",value:"once"})}function I(){try{if(!Object(v["isWindows"])())return;if(!Object(v["isSSBAndAtLeastVersion"])("3.2"))return;if(Object(v["isSSBAndAtLeastVersion"])("3.3"))return;if(Object(o["getPreference"])("isOpenExternalShellForced"))return;Object(o["setPreference"])({name:"isOpenExternalShellForced",value:true})}catch(e){Object(m["b"])().error("Tried to set isOpenExternalShellForced, but failed",e)}}function T(e){try{if(!Object(u["isFeatureEnabled"])(e(),"feature_desktop_notifications_2018"))return;if(!Object(v["isSSBAndAtLeastVersion"])("3.3"))return;Object(o["setPreference"])({name:"notificationTimeout",value:6e3});Object(o["setPreference"])({name:"notificationAfterHoverTimeout",value:2e3});Object(o["setPreference"])({name:"notificationMaxItems",value:8});Object(o["setPreference"])({name:"notificationStyle",value:"2018"})}catch(e){Object(m["b"])().error("Tried to set notification style for 2018, but failed",e)}}function A(e){try{Object(u["isFeatureEnabled"])(e(),"feature_desktop_sandbox_signin")&&Object(o["setPreference"])({name:"sandboxSigninWindow",value:true})}catch(e){Object(m["b"])().error("Tried to set sandboxSignin, but failed",e);Object(m["b"])().error(e.message);Object(m["b"])().error(e.stack)}}function N(e){try{if(!Object(u["isFeatureEnabled"])(e(),"feature_tinyspeck"))return;if(!Object(v["isSSBAndAtLeastVersion"])("4.0.0"))return;if("v1"===Object(o["getPreference"])("spellCheckerVersion"))return;Object(o["setPreference"])({name:"spellCheckerVersion",value:"v1"})}catch(e){Object(m["b"])().error("Tried to set spellchecker v1, but failed",e);Object(m["b"])().error(e.message);Object(m["b"])().error(e.stack)}}var P=r(43);function R(){return Object(o["hasDeviceStorage"])()}function M(e){Object(o["setItem"])("isCallWindowBusy",e)}var x=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("isCallWindowBusy"));case 3:t=r.sent;return r.abrupt("return","true"===t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return",false);case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function D(e){Object(o["setItem"])("callWindowToken",e)}function F(){Object(o["removeItem"])("callWindowToken")}var L=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("callWindowToken"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function B(e){Object(o["setItem"])("callWindowTeamId",e)}function U(){Object(o["removeItem"])("callWindowTeamId")}var q=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("callWindowTeamId"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function G(e){Object(o["setItem"])("callWindowTeamName",e)}function H(){Object(o["removeItem"])("callWindowTeamName")}var W=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("callWindowTeamName"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function V(e){Object(o["setItem"])("isIncomingCallWindowBusy",e)}var K=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("isIncomingCallWindowBusy"));case 3:t=r.sent;return r.abrupt("return","true"===t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return",false);case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function z(e){Object(o["setItem"])("incomingCallWindowToken",e)}function Q(){Object(o["removeItem"])("incomingCallWindowToken")}var Y=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("incomingCallWindowToken"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function J(e){Object(o["setItem"])("incomingCallWindowTeamId",e)}function X(){Object(o["removeItem"])("incomingCallWindowTeamId")}var Z=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("incomingCallWindowTeamId"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function $(e){Object(o["setItem"])("incomingCallWindowTeamName",e)}function ee(){Object(o["removeItem"])("incomingCallWindowTeamName")}var te=function(){var e=Object(P["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(P["resolve"])(Object(o["getItem"])("incomingCallWindowTeamName"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();Object(s["a"])("interop.desktop",i()({},o,a,{getParsedNotificationWarnings:l["a"],onWebappBooted:k}))},function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(43);var n=r.n(a);var i=r(15);var s=r(132);var o=r(4402);var l=Object(i["b"])("Completes joiner onboarding",function(){var e=Object(a["method"])(function(e){e(Object(o["b"])(false));e(Object(o["c"])(false));e(Object(s["c"])({onboarding_complete:true,seen_welcome_2:true}))});return function(t){return e.apply(this,arguments)}}())},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(2);var y=r(138);var O=r(159);var k=r(54);var E=r(687);var j=r(126);var C=r(10);var S=new C["b"]("enterprise_moving_channels");var w=/\r?\n|\r/g;var I={onInputChange:g["b"].func,onCheckboxChange:g["b"].func,customMessageError:g["b"].string,featureDeleteMovedChannels:g["b"].bool.isRequired};var T={onInputChange:_["noop"],onCheckboxChange:_["noop"],customMessageError:null};var A=300;var N=void 0;var P=function e(t){return N[t]};var R=function e(t){t&&t.length>A?Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError("message_too_long")):Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError())};var M=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={includeCustomMessage:false,customMessage:""};r.onInputChange=r.onInputChange.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.onCheckboxChange=r.onCheckboxChange.bind(r);r.props.featureDeleteMovedChannels&&(N={message_too_long:S.t("That\u2019s a bit too long. Messages must be fewer than {maxlength} characters.",{maxlength:A}),message_empty:S.t("Please fill in a custom message.")});return r}v()(t,[{key:"onKeyDown",value:function e(t){13===t.keyCode&&t.preventDefault()}},{key:"onInputChange",value:function e(t){var r=t.replace(w," ");this.setCustomMessage(r);this.props.onInputChange(r);R(r)}},{key:"onCheckboxChange",value:function e(t){t.persist();var r=t.target.checked;this.setIncludeCustomMessage(r);this.props.onCheckboxChange(r);r?R(this.state.customMessage):Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError())}},{key:"setIncludeCustomMessage",value:function e(t){this.setState(function(){return{includeCustomMessage:t}})}},{key:"setCustomMessage",value:function e(t){this.setState(function(){return{customMessage:t}})}},{key:"renderCheckbox",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;var r=S.t("Add a custom message to channel members");var a=S.t("This message will appear within the Slackbot notification that each member will receive.");return n.a.createElement("div",null,n.a.createElement(k["a"],{htmlFor:"mvch_message_checkbox",className:"p-move_channels_msg__label",cursor:"pointer",text:r,subtext:a,type:"inline"},n.a.createElement(j["a"],{id:"mvch_message_checkbox",checked:t,onChange:this.onCheckboxChange,"data-qa":"mvch_message_checkbox"})))}},{key:"renderCustomMessageTextarea",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.customMessage;var r=this.props.customMessageError;var a=S.rt("<b>*bold*</b> <i>_italics_</i> and links are allowed. Line breaks aren\u2019t supported for this message.");return n.a.createElement("div",{className:"margin_left_150"},n.a.createElement(E["a"],{id:"ent_mvch_custom_message","data-qa":"ent_mvch_custom_message_input",resize:"none",name:"move_channels_custom_message_input",value:t,hintText:a,maxCharacterLimit:A,onChange:this.onInputChange,onKeyDown:this.onKeyDown,errorText:P(r)||r,errorLevel:"warning",isRequired:true}))}},{key:"render",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;return n.a.createElement("div",{"data-qa":"ent_mvch_custom_message"},this.renderCheckbox(),t&&this.renderCustomMessageTextarea())}}]);return t}(a["PureComponent"]);M.displayName="MoveChannelsCustomMessage";M.defaultProps=T;var x=Object(y["a"])("feature_delete_moved_channels")(M);var D=x;Object(c["a"])("interop.moveChannelsCustomMessage",{render:function e(t,r,a){if(!t)throw new Error("moveChannelsCustomMessage render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(D,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(2);var i=r(12);var s=r(71);var o="CDN-DOWNLOAD-TEST";var l="https://a.slack-edge.com/bv1-4/cdn-download-test.838a524ba45462f63be8.min.js";var c="[1][3262]";function u(){var e=Object(i["b"])({label:o});e.info("Running test");var t=Object(s["a"])();var r=(Date.now()*Math.random()).toString(36);var a=l+"?_x="+r;var u=function r(){var i=Object(n["snakeCase"])(o+" success");t.count(i);e.info(a+" SUCCESS")};var d=function r(){var i=Object(n["snakeCase"])(o+" failure");t.count(i);e.info(a+" FAILED");e.error(i,"CDN download test failed: "+a)};var p=document.createElement("script");p.setAttribute("type","text/javascript");p.setAttribute("src",a);p.onload=function(){try{Object(n["get"])(Object(n["find"])(window.webpackJsonp,c),c)()}catch(e){return}window.cdnDownloadTestWorked?u(a):d(a)};p.onerror=function(){d(a)};document.body.appendChild(p)}Object(a["a"])("interop.runCdnDownloadTest",u)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(2);var i=r.n(n);var s=r(4);var o=r(797);var l=r(45);var c=r(141);var u=0;var d=6e4;var p=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function v(e){if(!Object(s["isFeatureEnabled"])(e(),"feature_track_time_spent"))return i.a.noop;var t={capture:true,passive:true};var r=function t(){return h(e)};var a=setInterval(r,d);var n=i.a.throttle(function(){document.hasFocus&&document.hasFocus()&&Object(c["e"])(Object(c["c"])(e()))},5e3,{leading:true,trailing:true});p.forEach(function(e){window.addEventListener(e,n,t)});var o=function e(){p.forEach(function(e){window.removeEventListener(e,n,t)});clearInterval(a)};return o}function m(e){return{uid:e.id,timestamp_start:Object(o["a"])(e.startTime),timestamp_refresh:Object(o["a"])(e.lastActivity),version:u}}function h(e){var t=e();var r=Object(c["a"])(Object(c["c"])(t));var a=Object(l["a"])({state:t});i.a.each(r,function(e){null===e.lastLogged?a.track("SESSION_START",{client_session:m(e)}):e.isActive&&e.needsRefresh&&a.track("SESSION_REFRESH",{client_session:m(e)});e.isActive||a.track("SESSION_END",{client_session:m(e)})})}Object(a["a"])("interop.activity_session",{listenForUserEvents:function e(){return v(TS.redux.getState)},recordUserActivity:c["e"]})},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r(24);var i=r(259);var s=r(798);var o=r(1061);var l=r(1546);var c=r(447);var u=r(23);var d=r(34);var p=r(359);var v=r(1741);var m=r(230);var h=r(17);var f=r(1475);var b=r(1476);var g=r(242);var _=r(338);function y(e,t){var r=Object(_["e"])(e);var a=Object(_["e"])(t);return Object(g["a"])(r,a)}var O=r(44);function k(e){var t=TS.redux.getState();return Object(n["d"])(t,e)}function E(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var r=TS.redux.getState();var a=Object(n["d"])(r,t);if(!a)return null;if(a.isUnknown)return null;if(a.isNonExistent)return null;return a}function j(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var r=TS.redux.getState();var a=Object(n["i"])(r,t);if(!a)return null;if(a.isUnknown)return null;if(a.isNonExistent)return null;return a}function C(e){return Object(a["isString"])(e)?E(e):e}function S(e){return Object(s["b"])(TS.redux.getState(),e)}function w(e){return TS.redux.dispatch(Object(m["a"])(e))}function I(e){return TS.redux.dispatch(Object(m["d"])(e))}function T(e){return TS.redux.dispatch(Object(m["c"])(e))}function A(e){return TS.redux.dispatch(Object(l["a"])(e))}function N(e){return TS.redux.dispatch(Object(o["a"])(e))}function P(e){return TS.redux.dispatch(Object(i["c"])(e))}function R(e){return TS.redux.dispatch(Object(i["d"])(e))}function M(e){var t=TS.redux.getState();var r=Object(u["b"])(t);Object(c["b"])(r,e)}function x(e){var t=TS.redux.getState();var r=Object(u["b"])(t);return Object(c["a"])(r,e)}function D(){return Object(c["e"])()}function F(e,t){return TS.redux.dispatch(Object(f["a"])({teamId:e,fields:t}))}function L(e,t){return TS.redux.dispatch(Object(b["a"])({teamId:e,fieldsToDelete:t}))}Object(O["a"])("interop.members",{getMemberById:E,getPotentiallyUnknownMemberById:k,getRawMemberById:j,dangerouslyAddMember:P,dangerouslyBulkAddMembers:R,membersSelectorsTest:n["p"],shouldDisplayRealNames:function e(){return Object(d["h"])(TS.redux.getState())},getCurrentMember:function e(){return Object(n["b"])(TS.redux.getState())},getUserHighlightWords:function e(){return Object(p["a"])(TS.redux.getState())},getPrefCompliantMemberName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return h["getPrefCompliantMemberName"].apply(void 0,[TS.redux.getState()].concat(r))},getPrefCompliantMemberNameById:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return h["getPrefCompliantMemberNameById"].apply(void 0,[TS.redux.getState()].concat(r))},getPrefCompliantMemberNameLowerCase:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return h["getPrefCompliantMemberNameLowerCase"].apply(void 0,[TS.redux.getState()].concat(r))},getMemberByName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return n["e"].apply(void 0,[TS.redux.getState()].concat(r))},getMemberByEmail:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return n["c"].apply(void 0,[TS.redux.getState()].concat(r))},memberExistsWithName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return n["o"].apply(void 0,[TS.redux.getState()].concat(r))},hasMemberWithId:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return n["j"].apply(void 0,[TS.redux.getState()].concat(r))},getAllMembers:function e(){return Object(n["a"])(TS.redux.getState())},isAppmin:function e(){return Object(n["k"])(TS.redux.getState())},isExternal:h["isExternal"],isExternalById:function e(t){return Object(h["isExternalById"])(TS.redux.getState(),t)},isMember:h["isMember"],isMemberOnTeam:h["isMemberOnTeam"],fetchMemberProfileExtras:function e(t,r){return TS.redux.dispatch(Object(m["e"])({userId:t,keys:r}))},memberSorterByName:y,getMemberCurrentStatus:n["f"],getMemberMentionName:h["getMemberMentionName"],getMemberMentionRegExp:h["getMemberMentionRegExp"],getMemberRealName:function e(t){return Object(h["getMemberRealName"])(C(t))},getMemberRealNameLowerCase:function e(t){return Object(h["getMemberRealNameLowerCase"])(C(t))},getMemberProfileFieldDisplayName:function e(t){return Object(h["getMemberProfileFieldDisplayName"])(C(t))},getMemberProfileFieldDisplayNameLowerCase:function e(t){return Object(h["getMemberProfileFieldDisplayNameLowerCase"])(C(t))},getMemberSecondaryName:function e(t){return Object(h["getMemberSecondaryName"])(TS.redux.getState(),C(t))},ensureMembersArePresent:function e(t){return TS.redux.dispatch(Object(v["a"])({memberIds:t}))},processMemberForUpserting:S,fetchAndUpsertMembersById:w,fetchAndUpsertMembersWithQuery:I,fetchAndUpsertMembersFromFlannel:T,markObjectsAsFresh:M,isObjectFresh:x,pauseRefetch:D,updateCurrentMemberPresence:N,updateCurrentMemberProfile:A,updateProfileFields:F,deleteProfileFields:L,canMemberJoinChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return h["canMemberJoinChannel"].apply(void 0,[TS.redux.getState()].concat(r))},canMemberBeInvitedToChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return h["canMemberBeInvitedToChannel"].apply(void 0,[TS.redux.getState()].concat(r))}})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(88);var o=r.n(s);var l=r(119);var c=r(27);var u=r(3939);var d=r(163);var p=function e(t,r,a){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],a))),r)};var v=function e(t){o.a.unmountComponentAtNode(t)};var m=r(44);Object(m["a"])("interop.mountUserGroupsList",p);Object(m["a"])("interop.unmountUserGroupsList",v)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(1561);var d=r(163);function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountFileUploadBanner must be called with a teamId parameter");var a=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(d["a"],null,n.a.createElement(u["a"],r))),t)}function v(e){s.a.unmountComponentAtNode(e)}var m=r(44);Object(m["a"])("interop.mountFileUploadBanner",p);Object(m["a"])("interop.unmountFileUploadBanner",v)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(334);var i=r(2);var s=r(1269);var o=/[,\uff0c\u3001]/;function l(e){if(!Object(i["isString"])(e))return"";return Object(s["a"])(e).split(o).map(i["trim"]).filter(i["identity"]).join(",")}var c=r(132);var u=r(34);var d=r(333);var p=r(359);var v=r(1738);var m=r(305);var h=r(1206);var f=r(68);var b=r(1218);var g=r(1222);var _=r(1069);var y=r(1279);function O(){return TS.redux.dispatch(d["b"].apply(void 0,arguments))}function k(){return TS.redux.dispatch(d["c"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(d["a"].apply(void 0,arguments))}function j(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return m["d"].apply(void 0,[TS.redux.getState()].concat(t))}function C(){return Object(m["a"])(TS.redux.getState())}function S(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return m["c"].apply(void 0,[TS.redux.getState()].concat(t))}function w(){return TS.redux.dispatch(h["b"].apply(void 0,arguments))}function I(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return f["a"].apply(void 0,[TS.redux.getState()].concat(t))}function T(){return TS.redux.dispatch(b["b"].apply(void 0,arguments))}function A(){return TS.redux.dispatch(g["c"].apply(void 0,arguments))}function N(){return TS.redux.dispatch(_["b"].apply(void 0,arguments))}function P(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return u["g"].apply(void 0,[TS.redux.getState()].concat(t))}function R(e){return Object(y["a"])(TS.redux.getState(),e)}Object(a["a"])("interop.prefs",{setUserPref:O,setUserPrefs:k,setMultipleUserPrefs:E,getNotificationsGlobalPref:j,getAllNotificationOverrides:C,getNotificationsChannelPref:S,setChannelNotificationOverrideAndCallApi:w,getTeamPref:I,setTeamPrefs:A,setTeamPref:T,setEnterprisePrefs:N,getOrgPref:R,getHighlightWords:function e(){var t=TS.redux.getState();return Object(p["a"])(t)},getUserGroupHighlightById:n["d"],cleanHighlightWords:l,setUserPrefByApi:c["d"],getUserPref:P,getReadStateTrackingPref:function e(){return Object(v["a"])(TS.redux.getState())}})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(3);var i=r.n(n);var s=r(1);var o=r.n(s);var l=r(88);var c=r.n(l);var u=r(13);var d=r(2);var p=r(119);var v=r(27);var m=r(1485);var h=r(163);var f=function e(t,r){var a=document.getElementById("pricing_plans_modal_mount_point");if(!a)throw new Error("Could not find a valid pricing plans modal mount point.");if(!t)throw new Error("mountPricingPlansModal must be called with a valid teamId parameter.");var n=Object(v["d"])(t);var s=function e(){Object(d["defer"])(function(){c.a.unmountComponentAtNode(a)})};Object(p["a"])(o.a.createElement(u["Provider"],{store:n},o.a.createElement(h["a"],null,o.a.createElement(m["a"],i()({},r,{onClose:s})))),a)};var b={mountPricingPlansModal:f};Object(a["a"])("interop.mountPricingPlansModal",f)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(1098);var d=r(163);var p=function e(t,r){if(!t)throw new Error("mountModalContainer must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var m={mountModalContainer:p,unmountModalContainer:v};var h=r(44);Object(h["a"])("interop.modalContainer",{mountModalContainer:p,unmountModalContainer:v})},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(1843);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountMessagePaneDragOverlay must be called with a teamId parameter");var a=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function p(e){s.a.unmountComponentAtNode(e)}var v=r(44);Object(v["a"])("interop.mountMessagePaneDragOverlay",d);Object(v["a"])("interop.unmountMessagePaneDragOverlay",p)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(1689);var c=r(163);function u(e,t,r){if(!e)throw new Error("mountPricingCalculator must be called with a teamId parameter");var a=Object(o["d"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(c["a"],null,n.a.createElement(l["a"],r))),t)}var d=r(44);Object(d["a"])("interop.mountPricingCalculator",u)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(1842);var c=r(163);var u=function e(t,r,a){if(!t)throw new Error("mountNotificationBar must be called with a teamId parameter");var u=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:u},n.a.createElement(c["a"],null,n.a.createElement(l["a"],a))),r)};var d={mountNotificationBar:u};var p=r(44);Object(p["a"])("interop.mountNotificationBar",u)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1);var i=r.n(n);var s=r(13);var o=r(119);var l=r(27);var c=r(3053);var u=r(277);var d=r(163);function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isOpen:false};if(!e)throw new Error("mountMessageActionsMenu must be called with a teamId parameter");Object(o["a"])(i.a.createElement(s["Provider"],{store:Object(l["d"])(e)},i.a.createElement(d["a"],null,i.a.createElement(u["a"],a,a.isOpen?i.a.createElement(c["a"],r):i.a.createElement("span",null)))),t)}var v=p;var m=r(39);Object(a["a"])("interop.mountMessageActionsMenu",v);Object(a["a"])("interop.mountMessageActionsMenu.actionIds",m["SLACK_ACTION_IDS"])},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(1226);var d=r(71);var p=r(163);var v=function e(t,r,a){if(!t)throw new Error("mountCustomStatusInput must be called with a teamId parameter");var i=Object(c["d"])(t);var s=Object(d["c"])({state:i.getState()});var v="react_custom_status_input_render";s.mark(v+"_mark");Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(p["a"],null,n.a.createElement(u["c"],a))),r,function(){return s.measureAndClear(v+"_mark",v)})};var m=s.a.unmountComponentAtNode;var h=r(44);Object(h["a"])("interop.mountCustomStatusInput",v);Object(h["a"])("interop.unmountCustomStatusInput",m)},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(277);var d=r(3993);var p=r(71);var v=r(163);var m=function e(t,r,a,i){if(!t)throw new Error("mountEmojiPicker must be called with a teamId parameter");var m=Object(c["d"])(t);var h=Object(p["c"])({state:m.getState()});var f="react_emoji_menu_render";h.mark(f+"_mark");Object(l["a"])(s.a.createElement(o["Provider"],{store:m},s.a.createElement(v["a"],null,s.a.createElement(u["a"],n()({shouldFade:false},i),s.a.createElement(d["a"],a)))),r,function(){return h.measureAndClear(f+"_mark",f)})};var h=m;var f=r(44);Object(f["a"])("interop.mountEmojiPicker",h)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(846);var d=r(163);var p=function e(t,r){if(!t)throw new Error("mountBannerContainer must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var m=r(44);Object(m["a"])("interop.mountMessagePaneBanner",p);Object(m["a"])("interop.unmountMessagePaneBanner",v)},,function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r.n(a);function i(e){if(e._last_query!==e.query)return true;if(e._last_include_org!==e.include_org)return true;if(n.a.xor(e._last_org_team_ids,e.org_team_ids).length)return true;return false}var s=r(1314);var o=r(290);var l=r(443);var c=r(44);Object(c["a"])("interop.searcher",{isNewMemberSearch:i,emojiSkiplist:s["a"],search:o["e"],recordFrecencyEvent:l["c"]})},function(e,t,r){"use strict";r.r(t);var a=r(37);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(119);var d=r(27);var p=r(782);var v=function e(t,r,a){if(!t)throw new Error("mountScrollbar must be called with a teamId parameter");var i=Object(d["d"])(t);var o=a.safeHtml,l=n()(a,["safeHtml"]);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(p["b"],l,s.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),r)};var m=function e(t){l.a.unmountComponentAtNode(t)};var h={mountScrollbar:v,unmountScrollbar:m};var f=r(44);Object(f["a"])("interop.mountScrollbar",v);Object(f["a"])("interop.unmountScrollbar",m)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(893);var c=function e(t,r,a){if(!t)throw new Error("mountLazyFilterSelect must be called with a teamId parameter");var c=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(l["a"],a)),r)};var u=c;var d=r(44);Object(d["a"])("interop.mountLazyFilterSelect",u)},function(e,t,r){"use strict";r.r(t);var a=r(1481);var n=r(1155);var i=r(14);var s=Object(i["b"])(function(e){return e&&e.persistenceHashes});r.d(t,"setPersistenceHashes",function(){return n["a"]});r.d(t,"getPersistenceHashes",function(){return s});var o=t["default"]=a["a"]},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1086);var i=r(896);var s=r(1162);var o=r(2);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,r=e.prefix,a=e.suffix;if(!t)return t;var n=t;if(r&&!Object(o["startsWith"])(n,r)){var i=n.search(/\S/);n=i>0?n.slice(0,i)+r+n.slice(i):r+n}if(a&&!Object(o["endsWith"])(n,a)){var s=n.search(/\s+$/);s>0?n=n.slice(0,s)+a+n.slice(s):n+=a}return n};var c=r(1269);var u=r(352);Object(a["a"])("interop.format",{formatBroadcastCommand:n["a"],formatChannelName:i["a"],locateHighlightWords:s["a"],surroundTextWith:l,replaceUnicodeDoppelgangers:c["a"],cleanMessageTextWithState:u["b"]})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(2);var d=r(119);var p=r(27);var v=r(4539);var m=r(163);var h=function e(t,r){var a=document.getElementById("invite_modal_mount_point");if(!a)throw new Error("Could not find a valid invite modal mount point.");if(!t)throw new Error("mountInviteModal must be called with a valid teamId parameter.");var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(m["a"],null,s.a.createElement(v["a"],n()({},r,{onClose:o})))),a)};var f={mountInviteModal:h};var b=r(44);Object(b["a"])("interop.mountInviteModal",h)},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(1552);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountThreadDragOverlay must be called with a teamId parameter");var a=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function p(e){s.a.unmountComponentAtNode(e)}var v=r(44);Object(v["a"])("interop.mountThreadDragOverlay",d);Object(v["a"])("interop.unmountThreadDragOverlay",p)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(1822);var d=r(163);var p=function e(t,r,a){var i=a.image,s=a.onDidZoomLevelChange;if(!t)throw new Error("mountImageViewer must be called with a teamId parameter");var p=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:p},n.a.createElement(d["a"],null,n.a.createElement(u["a"],{image:i,onDidZoomLevelChange:s}))),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var m=r(44);Object(m["a"])("interop.mountImageViewer",p);Object(m["a"])("interop.unmountImageViewer",v)},,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(2);var d=r(119);var p=r(27);var v=r(2221);var m=r(163);var h=function e(t,r){var a=document.getElementById("help_modal_mount_point");if(!a)throw new Error("Could not find a valid help modal mount point.");if(!t)throw new Error("mountHelpModal must be called with a valid teamId parameter.");var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(m["a"],null,s.a.createElement(v["a"],n()({},r,{onClose:o})))),a)};var f={mountHelpModal:h};var b=r(44);Object(b["a"])("interop.mountHelpModal",h)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(88);var o=r.n(s);var l=r(119);var c=r(27);var u=r(1690);var d=r(163);var p=function e(t,r,a){if(!t)throw new Error("mountToast must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],a))),r)};var v=function e(t){o.a.unmountComponentAtNode(t)};var m={mountTermsOfService:p,unmountTermsOfService:v};var h=r(44);Object(h["a"])("interop.mountTermsOfService",p);Object(h["a"])("interop.unmountTermsOfService",v)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(855);var d=r(289);var p=function e(t,r,a,i){if(!t)throw new Error("mountTooltipTip must be called with a teamId parameter");var s=Object(c["d"])(t);a?Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i,n.a.createElement(d["b"],{id:a,size:"small",showAvatar:true,useDarkMode:true,showPresence:true,forcedPrimary:"real_name"}))),r):Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i)),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var m={mountTooltipTip:p,unmountTooltipTip:v};var h=r(44);Object(h["a"])("interop.mountTooltipTip",p);Object(h["a"])("interop.unmountTooltipTip",v)},function(e,t,r){"use strict";r.r(t);var a=r(2);var n=r(45);var i=r(12);var s=r(1507);var o=Object(i["b"])();function l(e,t){return new Promise(function(r){Object(s["a"])("experiments.getByInvite",{encoded_invite_id:e,domain:t},function(e,t){e&&t.assignments&&h(t.assignments);r(e)})})}function c(){return new Promise(function(e){Object(s["a"])("experiments.getByVisitor",{},function(t,r){t&&r.assignments&&h(r.assignments);e(t)})})}function u(e){if(void 0===e){o.warn("fetchLeadAssignments requires a leadId");return Promise.resolve(false)}return new Promise(function(t){Object(s["a"])("experiments.getByLead",{lead_id:e},function(e,r){e&&r.assignments&&h(r.assignments);t(e)})})}function d(e){if(void 0===e){o.warn("fetchUserAssignments requires a token");return Promise.resolve(false)}return new Promise(function(t){Object(s["a"])("experiments.getByUser",{token:e},function(e,r){e&&r.assignments&&h(r.assignments);t(e)})})}var p={};var v={};function m(e){var t=p[e];if(!t)return null;t.log_exposures&&f(e,t);return t.group}function h(e){Object(a["forEach"])(e,function(e,t){Object(a["isEqual"])(v[t],e)||(v[t]=null);p[t]=e})}function f(e,t){if(!Object(a["isEqual"])(v[e],t)){Object(n["a"])().track("EXPERIMENT_EXPOSURE",{experiment_name:e,experiment_type:t.type,experiment_id:t.experiment_id,experiment_group:t.group,experiment_trigger:t.trigger,exposure_id:t.exposure_id});v[e]=t}}var b=r(44);Object(b["a"])("interop.experiments_unauthed",{fetchInviteAssignments:l,fetchLeadAssignments:u,fetchVisitorAssignments:c,fetchUserAssignments:d,getGroup:m})},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(12);var i=Object(n["b"])();function s(){i.info("Greetings Earth!")}function o(){i.info("\ud83d\udc7d")}Object(a["a"])("interop.greetingsEarth",{greet:s,takeMeToYourLeader:o})},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(119);var d=r(27);var p=r(277);var v=r(66);var m=r(71);var h=r(163);var f=function e(t,r,a,i){if(!t)throw new Error("mountMenu must be called with a teamId parameter");var o=Object(d["d"])(t);var l=Object(m["c"])({state:o.getState()});var f=function e(){return r};var b="react_menu_render";l.mark(b+"_mark");Object(u["a"])(s.a.createElement(c["Provider"],{store:o},s.a.createElement(h["a"],null,s.a.createElement(p["a"],n()({},i,{parentSelector:f,shouldFade:false}),s.a.createElement(v["a"],a)))),r,function(){return l.measureAndClear(b+"_mark",b)})};var b=l.a.unmountComponentAtNode;var g={mountMenu:f,unmountMenu:b};var _=r(44);Object(_["a"])("interop.mountMenu",f);Object(_["a"])("interop.unmountMenu",b)},,function(e,t,r){"use strict";var a=r(15);var n=r(4);var i=r(796);var s=r(35);var o=r(68);var l=r(34);var c=r(3754);var u=r(31);var d=r(93);var p=Object(a["b"])("Maybe show the shared channels sidebar coachmark, depending on state",function(e,t){var r=t();if(!Object(n["isFeatureEnabled"])(r,"feature_sonic_esc_creation"))return;if(Object(u["isOnFreePlan"])(Object(s["d"])(r)))return;if(!Object(d["n"])(r))return;if(1!==Object(o["a"])(r,"enable_shared_channels"))return;if(Object(c["g"])(r))return;if(Object(l["g"])(r,"seen_shared_channels_coachmark"))return;e(Object(i["setSharedChannelsCoachmarkIsVisible"])(true))});p.propTypes=null;t["a"]=p},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(88);var o=r.n(s);var l=r(119);var c=r(27);var u=r(4512);var d=r(163);var p=function e(t,r){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(d["a"],null,n.a.createElement(u["f"],null))),r)};var v=function e(t){o.a.unmountComponentAtNode(t)};var m=r(44);Object(m["a"])("interop.mountUserGroupsFlexpane",p);Object(m["a"])("interop.unmountUserGroupsFlexpane",v)},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(2);var i=r(1034);var s=r(15);var o=r(4);var l=r(34);var c=r(132);var u=r(71);var d=r(12);var p=["wss-primary","wss-backup","wss-mobile"];var v="_CONNECTION_TEST_TOKEN_";var m="failover_proxy_check";var h=4;var f=1e4;var b=3e3;var g=JSON.stringify({ok:true});function _(e){return new Promise(function(t,r){var a=void 0;var i=setTimeout(function(){r(new Error("Socket open timed out"))},f);var s=new WebSocket("wss://"+e+".slack.com/?flannel=1&token="+v);s.onopen=function(){clearTimeout(i);a=setTimeout(function(){r(new Error("Message response timed out"));s.close()},b);s.send(g)};s.onmessage=function(e){clearTimeout(a);try{var i=JSON.parse(e.data);if(!i.ok)throw new Error("Message response is not ok");t();s.onclose=n["noop"];s.close()}catch(e){r(e)}};s.onclose=function(){r(new Error("Socket closed unexpectedly"))}})}function y(){var e={};return Promise.each(p,function(t,r){var a=1e3*Object(i["b"])({attempts:r});return Promise.delay(a).then(function(){return _(t)}).catch(function(r){e[t]=r.message})}).then(function(){return e})}var O=Object(s["b"])("Tests if Flannel socket can be opened and send/receive a message",function(e,t){var r=t();var a=Object(u["c"])({state:r});if(!Object(o["isFeatureEnabled"])(r,"feature_failover_proxy_check")||Object(l["g"])(r,"failover_proxy_check_completed")===h)return;y().then(function(r){if(Object.keys(r).length){a.count(m+"_failed_"+h);var n=new Error(JSON.stringify(Object.keys(r)));var i=JSON.stringify(r);var s=m;Object(d["a"])({getState:t}).error(n,i,{subtype:s})}else a.count(m+"_passed_"+h);e(Object(c["d"])({pref:"failover_proxy_check_completed",value:h}))})});Object(a["a"])("interop.failoverProxyCheck",function(){return TS.redux.dispatch(O())})},,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(3947);Object(a["a"])("interop.registerGlobalErrorHandler",function(){return Object(n["a"])()})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var a=r(4115),n=r(4117);function i(e,t,r){return a(n,e,t,r)}e.exports=i},function(e,t,r){var a=r(4083),n=r(1716);function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=a(e.prototype),i=e.apply(r,t);return n(i)?i:r}}e.exports=i},function(e,t,r){var a=r(1716);var n=Object.create;var i=function(){function e(){}return function(t){if(!a(t))return{};if(n)return n(t);e.prototype=t;var r=new e;e.prototype=void 0;return r}}();e.exports=i},function(e,t){function r(e,t){var r=-1,a=e.length;t||(t=Array(a));while(++r<a)t[r]=e[r];return t}e.exports=r},function(e,t,r){var a=r(2828),n=r(2114);function i(e,t,r,i){var s=!r;r||(r={});var o=-1,l=t.length;while(++o<l){var c=t[o];var u=i?i(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]);s?n(r,c,u):a(r,c,u)}return r}e.exports=i},function(e,t,r){var a=r(4096),n=r(4119),i=r(4120),s=r(4098),o=r(4129),l=r(4089),c=r(4130),u=r(4104),d=r(4105),p=r(4093);var v="Expected a function";var m=1,h=2,f=8,b=16,g=32,_=64;var y=Math.max;function O(e,t,r,O,k,E,j,C){var S=t&h;if(!S&&"function"!=typeof e)throw new TypeError(v);var w=O?O.length:0;if(!w){t&=~(g|_);O=k=void 0}j=void 0===j?j:y(p(j),0);C=void 0===C?C:p(C);w-=k?k.length:0;if(t&_){var I=O,T=k;O=k=void 0}var A=S?void 0:l(e);var N=[e,t,r,O,k,I,T,E,j,C];A&&c(N,A);e=N[0];t=N[1];r=N[2];O=N[3];k=N[4];C=N[9]=void 0===N[9]?S?0:e.length:y(N[9]-w,0);!C&&t&(f|b)&&(t&=~(f|b));if(t&&t!=m)P=t==f||t==b?i(e,t,C):t!=g&&t!=(m|g)||k.length?s.apply(void 0,N):o(e,t,r,O);else var P=n(e,t,r);var R=A?a:u;return d(R(P,N),e,t)}e.exports=O},function(e,t,r){var a=r(4083),n=r(4088);var i=4294967295;function s(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=i;this.__views__=[]}s.prototype=a(n.prototype);s.prototype.constructor=s;e.exports=s},function(e,t){function r(){}e.exports=r},function(e,t,r){var a=r(4097),n=r(2173);var i=a?function(e){return a.get(e)}:n;e.exports=i},function(e,t,r){var a=r(4083),n=r(4088);function i(e,t){this.__wrapped__=e;this.__actions__=[];this.__chain__=!!t;this.__index__=0;this.__values__=void 0}i.prototype=a(n.prototype);i.prototype.constructor=i;e.exports=i},function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length;while(++r<a)if(false===t(e[r],r,e))break;return e}e.exports=r},function(e,t){var r="__lodash_placeholder__";function a(e,t){var a=-1,n=e.length,i=0,s=[];while(++a<n){var o=e[a];if(o===t||o===r){e[a]=r;s[i++]=a}}return s}e.exports=a},function(e,t,r){var a=r(4131);function n(e){var t=a(e),r=t%1;return t===t?r?t-r:t:0}e.exports=n},function(e,t,r){var a=r(2189);function n(e){var t=new e.constructor(e.byteLength);new a(t).set(new a(e));return t}e.exports=n},function(e,t,r){var a=r(4081),n=a("join",r(4164));n.placeholder=r(3969);e.exports=n},function(e,t,r){var a=r(1233),n=r(4097);var i=n?function(e,t){n.set(e,t);return e}:a;e.exports=i},function(e,t,r){var a=r(2200);var n=a&&new a;e.exports=n},function(e,t,r){var a=r(4099),n=r(4100),i=r(4121),s=r(4082),o=r(4101),l=r(4106),c=r(4128),u=r(4092),d=r(524);var p=1,v=2,m=8,h=16,f=128,b=512;function g(e,t,r,_,y,O,k,E,j,C){var S=t&f,w=t&p,I=t&v,T=t&(m|h),A=t&b,N=I?void 0:s(e);function P(){var p=arguments.length,v=Array(p),m=p;while(m--)v[m]=arguments[m];if(T)var h=l(P),f=i(v,h);_&&(v=a(v,_,y,T));O&&(v=n(v,O,k,T));p-=f;if(T&&p<C){var b=u(v,h);return o(e,t,g,P.placeholder,r,v,b,E,j,C-p)}var R=w?r:this,M=I?R[e]:e;p=v.length;E?v=c(v,E):A&&p>1&&v.reverse();S&&j<p&&(v.length=j);this&&this!==d&&this instanceof P&&(M=N||s(M));return M.apply(R,v)}return P}e.exports=g},function(e,t){var r=Math.max;function a(e,t,a,n){var i=-1,s=e.length,o=a.length,l=-1,c=t.length,u=r(s-o,0),d=Array(c+u),p=!n;while(++l<c)d[l]=t[l];while(++i<o)(p||i<s)&&(d[a[i]]=e[i]);while(u--)d[l++]=e[i++];return d}e.exports=a},function(e,t){var r=Math.max;function a(e,t,a,n){var i=-1,s=e.length,o=-1,l=a.length,c=-1,u=t.length,d=r(s-l,0),p=Array(d+u),v=!n;while(++i<d)p[i]=e[i];var m=i;while(++c<u)p[m+c]=t[c];while(++o<l)(v||i<s)&&(p[m+a[o]]=e[i++]);return p}e.exports=a},function(e,t,r){var a=r(4102),n=r(4104),i=r(4105);var s=1,o=2,l=4,c=8,u=32,d=64;function p(e,t,r,p,v,m,h,f,b,g){var _=t&c,y=_?h:void 0,O=_?void 0:h,k=_?m:void 0,E=_?void 0:m;t|=_?u:d;t&=~(_?d:u);t&l||(t&=~(s|o));var j=[e,t,v,k,y,E,O,f,b,g];var C=r.apply(void 0,j);a(e)&&n(C,j);C.placeholder=p;return i(C,e,t)}e.exports=p},function(e,t,r){var a=r(4087),n=r(4089),i=r(4103),s=r(4123);function o(e){var t=i(e),r=s[t];if("function"!=typeof r||!(t in a.prototype))return false;if(e===r)return true;var o=n(r);return!!o&&e===o[0]}e.exports=o},function(e,t,r){var a=r(4122);var n=Object.prototype;var i=n.hasOwnProperty;function s(e){var t=e.name+"",r=a[t],n=i.call(a,t)?r.length:0;while(n--){var s=r[n],o=s.func;if(null==o||o==e)return s.name}return t}e.exports=s},function(e,t,r){var a=r(4096),n=r(2169);var i=n(a);e.exports=i},function(e,t,r){var a=r(4125),n=r(4126),i=r(2166),s=r(4127);function o(e,t,r){var o=t+"";return i(e,n(o,s(a(o),r)))}e.exports=o},function(e,t){function r(e){var t=e;return t.placeholder}e.exports=r},function(e,t,r){var a=r(4085),n=r(1640);function i(e,t){return e&&a(t,n(t),e)}e.exports=i},function(e,t,r){var a=r(1648),n=r(4091),i=r(2828),s=r(4107),o=r(4134),l=r(4137),c=r(4084),u=r(4138),d=r(4139),p=r(2192),v=r(4140),m=r(2197),h=r(4141),f=r(4142),b=r(4147),g=r(502),_=r(2118),y=r(4148),O=r(1716),k=r(4150),E=r(1640);var j=1,C=2,S=4;var w="[object Arguments]",I="[object Array]",T="[object Boolean]",A="[object Date]",N="[object Error]",P="[object Function]",R="[object GeneratorFunction]",M="[object Map]",x="[object Number]",D="[object Object]",F="[object RegExp]",L="[object Set]",B="[object String]",U="[object Symbol]",q="[object WeakMap]";var G="[object ArrayBuffer]",H="[object DataView]",W="[object Float32Array]",V="[object Float64Array]",K="[object Int8Array]",z="[object Int16Array]",Q="[object Int32Array]",Y="[object Uint8Array]",J="[object Uint8ClampedArray]",X="[object Uint16Array]",Z="[object Uint32Array]";var $={};$[w]=$[I]=$[G]=$[H]=$[T]=$[A]=$[W]=$[V]=$[K]=$[z]=$[Q]=$[M]=$[x]=$[D]=$[F]=$[L]=$[B]=$[U]=$[Y]=$[J]=$[X]=$[Z]=true;$[N]=$[P]=$[q]=false;function ee(e,t,r,I,T,A){var N,M=t&j,x=t&C,F=t&S;r&&(N=T?r(e,I,T,A):r(e));if(void 0!==N)return N;if(!O(e))return e;var L=g(e);if(L){N=h(e);if(!M)return c(e,N)}else{var B=m(e),U=B==P||B==R;if(_(e))return l(e,M);if(B==D||B==w||U&&!T){N=x||U?{}:b(e);if(!M)return x?d(e,o(N,e)):u(e,s(N,e))}else{if(!$[B])return T?e:{};N=f(e,B,M)}}A||(A=new a);var q=A.get(e);if(q)return q;A.set(e,N);if(k(e)){e.forEach(function(a){N.add(ee(a,t,r,a,e,A))});return N}if(y(e)){e.forEach(function(a,n){N.set(n,ee(a,t,r,n,e,A))});return N}var G=F?x?v:p:x?keysIn:E;var H=L?void 0:G(e);n(H||e,function(a,n){if(H){n=a;a=e[n]}i(N,n,ee(a,t,r,n,e,A))});return N}e.exports=ee},function(e,t,r){var a=r(2836),n=r(4135),i=r(2123);function s(e){return i(e)?a(e,true):n(e)}e.exports=s},function(e,t,r){var a=r(2113),n=r(2175),i=r(2194),s=r(2196);var o=Object.getOwnPropertySymbols;var l=o?function(e){var t=[];while(e){a(t,i(e));e=n(e)}return t}:s;e.exports=l},function(e,t,r){var a=r(1743),n=r(2164),i=r(2166);function s(e){return i(n(e,void 0,a),e+"")}e.exports=s},function(e,t,r){var a=r(4081),n=a("flow",r(4158));n.placeholder=r(3969);e.exports=n},function(e,t,r){var a=r(4081),n=a("map",r(4160));n.placeholder=r(3969);e.exports=n},function(e,t,r){var a=r(4081),n=a("slice",r(4165));n.placeholder=r(3969);e.exports=n},function(e,t,r){var a=r(4116),n=r(3969);var i=Array.prototype.push;function s(e,t){return 2==t?function(t,r){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function o(e,t){return 2==t?function(t,r){return e(t,r)}:function(t){return e(t)}}function l(e){var t=e?e.length:0,r=Array(t);while(t--)r[t]=e[t];return r}function c(e){return function(t){return e({},t)}}function u(e,t){return function(){var r=arguments.length,a=r-1,n=Array(r);while(r--)n[r]=arguments[r];var s=n[t],o=n.slice(0,t);s&&i.apply(o,s);t!=a&&i.apply(o,n.slice(t+1));return e.apply(this,o)}}function d(e,t){return function(){var r=arguments.length;if(!r)return;var a=Array(r);while(r--)a[r]=arguments[r];var n=a[0]=t.apply(void 0,a);e.apply(void 0,a);return n}}function p(e,t,r,i){var v="function"==typeof t,m=t===Object(t);if(m){i=r;r=t;t=void 0}if(null==r)throw new TypeError;i||(i={});var h={cap:!("cap"in i)||i.cap,curry:!("curry"in i)||i.curry,fixed:!("fixed"in i)||i.fixed,immutable:!("immutable"in i)||i.immutable,rearg:!("rearg"in i)||i.rearg};var f=v?r:n,b="curry"in i&&i.curry,g="fixed"in i&&i.fixed,_="rearg"in i&&i.rearg,y=v?r.runInContext():void 0;var O=v?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath};var k=O.ary,E=O.assign,j=O.clone,C=O.curry,S=O.forEach,w=O.isArray,I=O.isError,T=O.isFunction,A=O.isWeakMap,N=O.keys,P=O.rearg,R=O.toInteger,M=O.toPath;var x=N(a.aryMethod);var D={castArray:function(e){return function(){var t=arguments[0];return w(t)?e(l(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],r=arguments[1],a=e(t,r),n=a.length;if(h.cap&&"number"==typeof r){r=r>2?r-2:1;return n&&n<=r?a:o(a,r)}return a}},mixin:function(e){return function(t){var r=this;if(!T(r))return e(r,Object(t));var a=[];S(N(t),function(e){T(t[e])&&a.push([e,r.prototype[e]])});e(r,Object(t));S(a,function(e){var t=e[1];T(t)?r.prototype[e[0]]=t:delete r.prototype[e[0]]});return r}},nthArg:function(e){return function(t){var r=t<0?1:R(t)+1;return C(e(t),r)}},rearg:function(e){return function(t,r){var a=r?r.length:0;return C(e(t,r),a)}},runInContext:function(t){return function(r){return p(e,t(r),i)}}};function F(e,t){if(h.cap){var r=a.iterateeRearg[e];if(r)return V(t,r);var n=!v&&a.iterateeAry[e];if(n)return W(t,n)}return t}function L(e,t,r){return b||h.curry&&r>1?C(t,r):t}function B(e,t,r){if(h.fixed&&(g||!a.skipFixed[e])){var n=a.methodSpread[e],i=n&&n.start;return void 0===i?k(t,r):u(t,i)}return t}function U(e,t,r){return h.rearg&&r>1&&(_||!a.skipRearg[e])?P(t,a.methodRearg[e]||a.aryRearg[r]):t}function q(e,t){t=M(t);var r=-1,a=t.length,n=a-1,i=j(Object(e)),s=i;while(null!=s&&++r<a){var o=t[r],l=s[o];null==l||T(l)||I(l)||A(l)||(s[o]=j(r==n?l:Object(l)));s=s[o]}return i}function G(e){return Q.runInContext.convert(e)(void 0)}function H(e,t){var r=a.aliasToReal[e]||e,n=a.remap[r]||r,s=i;return function(e){var a=v?y:O,i=v?y[n]:t,o=E(E({},s),e);return p(a,r,i,o)}}function W(e,t){return K(e,function(e){return"function"==typeof e?o(e,t):e})}function V(e,t){return K(e,function(e){var r=t.length;return s(P(o(e,r),t),r)})}function K(e,t){return function(){var r=arguments.length;if(!r)return e();var a=Array(r);while(r--)a[r]=arguments[r];var n=h.rearg?0:r-1;a[n]=t(a[n]);return e.apply(void 0,a)}}function z(e,t,r){var n,i=a.aliasToReal[e]||e,s=t,o=D[i];o?s=o(t):h.immutable&&(a.mutate.array[i]?s=d(t,l):a.mutate.object[i]?s=d(t,c(t)):a.mutate.set[i]&&(s=d(t,q)));S(x,function(e){S(a.aryMethod[e],function(t){if(i==t){var r=a.methodSpread[i],o=r&&r.afterRearg;n=o?B(i,U(i,s,e),e):U(i,B(i,s,e),e);n=F(i,n);n=L(i,n,e);return false}});return!n});n||(n=s);n==t&&(n=b?C(n,1):function(){return t.apply(this,arguments)});n.convert=H(i,t);n.placeholder=t.placeholder=r;return n}if(!m)return z(t,r,f);var Q=r;var Y=[];S(x,function(e){S(a.aryMethod[e],function(e){var t=Q[a.remap[e]||e];t&&Y.push([e,z(e,t,Q)])})});S(N(Q),function(e){var t=Q[e];if("function"==typeof t){var r=Y.length;while(r--)if(Y[r][0]==e)return;t.convert=H(e,t);Y.push([e,t])}});S(Y,function(e){Q[e[0]]=e[1]});Q.convert=G;Q.placeholder=Q;S(N(Q),function(e){S(a.realToAlias[e]||[],function(t){Q[t]=Q[e]})});return Q}e.exports=p},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"};t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]};t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]};t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2};t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]};t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]};t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}};t.mutate={array:{fill:true,pull:true,pullAll:true,pullAllBy:true,pullAllWith:true,pullAt:true,remove:true,reverse:true},object:{assign:true,assignAll:true,assignAllWith:true,assignIn:true,assignInAll:true,assignInAllWith:true,assignInWith:true,assignWith:true,defaults:true,defaultsAll:true,defaultsDeep:true,defaultsDeepAll:true,merge:true,mergeAll:true,mergeAllWith:true,mergeWith:true},set:{set:true,setWith:true,unset:true,update:true,updateWith:true}};t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,r=t.aliasToReal,a={};for(var n in r){var i=r[n];e.call(a,i)?a[i].push(n):a[i]=[n]}return a}();t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"};t.skipFixed={castArray:true,flow:true,flowRight:true,iteratee:true,mixin:true,rearg:true,runInContext:true};t.skipRearg={add:true,assign:true,assignIn:true,bind:true,bindKey:true,concat:true,difference:true,divide:true,eq:true,gt:true,gte:true,isEqual:true,lt:true,lte:true,matchesProperty:true,merge:true,multiply:true,overArgs:true,partial:true,partialRight:true,propertyOf:true,random:true,range:true,rangeRight:true,subtract:true,zip:true,zipObject:true,zipObjectDeep:true}},function(e,t,r){e.exports={ary:r(4118),assign:r(4107),clone:r(4133),curry:r(4152),forEach:r(4091),isArray:r(502),isError:r(4153),isFunction:r(2382),isWeakMap:r(4154),iteratee:r(4155),keys:r(2841),rearg:r(4156),toInteger:r(4093),toPath:r(4157)}},function(e,t,r){var a=r(4086);var n=128;function i(e,t,r){t=r?void 0:t;t=e&&null==t?e.length:t;return a(e,n,void 0,void 0,void 0,void 0,t)}e.exports=i},function(e,t,r){var a=r(4082),n=r(524);var i=1;function s(e,t,r){var s=t&i,o=a(e);function l(){var t=this&&this!==n&&this instanceof l?o:e;return t.apply(s?r:this,arguments)}return l}e.exports=s},function(e,t,r){var a=r(2165),n=r(4082),i=r(4098),s=r(4101),o=r(4106),l=r(4092),c=r(524);function u(e,t,r){var u=n(e);function d(){var n=arguments.length,p=Array(n),v=n,m=o(d);while(v--)p[v]=arguments[v];var h=n<3&&p[0]!==m&&p[n-1]!==m?[]:l(p,m);n-=h.length;if(n<r)return s(e,t,i,d.placeholder,void 0,p,h,void 0,void 0,r-n);var f=this&&this!==c&&this instanceof d?u:e;return a(f,this,p)}return d}e.exports=u},function(e,t){function r(e,t){var r=e.length,a=0;while(r--)e[r]===t&&++a;return a}e.exports=r},function(e,t){var r={};e.exports=r},function(e,t,r){var a=r(4087),n=r(4090),i=r(4088),s=r(502),o=r(682),l=r(4124);var c=Object.prototype;var u=c.hasOwnProperty;function d(e){if(o(e)&&!s(e)&&!(e instanceof a)){if(e instanceof n)return e;if(u.call(e,"__wrapped__"))return l(e)}return new n(e)}d.prototype=i.prototype;d.prototype.constructor=d;e.exports=d},function(e,t,r){var a=r(4087),n=r(4090),i=r(4084);function s(e){if(e instanceof a)return e.clone();var t=new n(e.__wrapped__,e.__chain__);t.__actions__=i(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}e.exports=s},function(e,t){var r=/\{\n\/\* \[wrapped with (.+)\] \*/,a=/,? & /;function n(e){var t=e.match(r);return t?t[1].split(a):[]}e.exports=n},function(e,t){var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function a(e,t){var a=t.length;if(!a)return e;var n=a-1;t[n]=(a>1?"& ":"")+t[n];t=t.join(a>2?", ":" ");return e.replace(r,"{\n/* [wrapped with "+t+"] */\n")}e.exports=a},function(e,t,r){var a=r(4091),n=r(1642);var i=1,s=2,o=8,l=16,c=32,u=64,d=128,p=256,v=512;var m=[["ary",d],["bind",i],["bindKey",s],["curry",o],["curryRight",l],["flip",v],["partial",c],["partialRight",u],["rearg",p]];function h(e,t){a(m,function(r){var a="_."+r[0];t&r[1]&&!n(e,a)&&e.push(a)});return e.sort()}e.exports=h},function(e,t,r){var a=r(4084),n=r(2119);var i=Math.min;function s(e,t){var r=e.length,s=i(t.length,r),o=a(e);while(s--){var l=t[s];e[s]=n(l,r)?o[l]:void 0}return e}e.exports=s},function(e,t,r){var a=r(2165),n=r(4082),i=r(524);var s=1;function o(e,t,r,o){var l=t&s,c=n(e);function u(){var t=-1,n=arguments.length,s=-1,d=o.length,p=Array(d+n),v=this&&this!==i&&this instanceof u?c:e;while(++s<d)p[s]=o[s];while(n--)p[s++]=arguments[++t];return a(v,l?r:this,p)}return u}e.exports=o},function(e,t,r){var a=r(4099),n=r(4100),i=r(4092);var s="__lodash_placeholder__";var o=1,l=2,c=4,u=8,d=128,p=256;var v=Math.min;function m(e,t){var r=e[1],m=t[1],h=r|m,f=h<(o|l|d);var b=m==d&&r==u||m==d&&r==p&&e[7].length<=t[8]||m==(d|p)&&t[7].length<=t[8]&&r==u;if(!(f||b))return e;if(m&o){e[2]=t[2];h|=r&o?0:c}var g=t[3];if(g){var _=e[3];e[3]=_?a(_,g,t[4]):g;e[4]=_?i(e[3],s):t[4]}g=t[5];if(g){_=e[5];e[5]=_?n(_,g,t[6]):g;e[6]=_?i(e[5],s):t[6]}g=t[7];g&&(e[7]=g);m&d&&(e[8]=null==e[8]?t[8]:v(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0];e[1]=h;return e}e.exports=m},function(e,t,r){var a=r(4132);var n=1/0,i=1.7976931348623157e308;function s(e){if(!e)return 0===e?e:0;e=a(e);if(e===n||e===-n){var t=e<0?-1:1;return t*i}return e===e?e:0}e.exports=s},function(e,t,r){var a=r(1716),n=r(1405);var i=NaN;var s=/^\s+|\s+$/g;var o=/^[-+]0x[0-9a-f]+$/i;var l=/^0b[01]+$/i;var c=/^0o[0-7]+$/i;var u=parseInt;function d(e){if("number"==typeof e)return e;if(n(e))return i;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=l.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):o.test(e)?i:+e}e.exports=d},function(e,t,r){var a=r(4108);var n=4;function i(e){return a(e,n)}e.exports=i},function(e,t,r){var a=r(4085),n=r(4109);function i(e,t){return e&&a(t,n(t),e)}e.exports=i},function(e,t,r){var a=r(1716),n=r(2842),i=r(4136);var s=Object.prototype;var o=s.hasOwnProperty;function l(e){if(!a(e))return i(e);var t=n(e),r=[];for(var s in e)"constructor"==s&&(t||!o.call(e,s))||r.push(s);return r}e.exports=l},function(e,t){function r(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}e.exports=r},function(e,t,r){(function(e){var a=r(524);var n=(true,t)&&!t.nodeType&&t;var i=n&&"object"==typeof e&&e&&!e.nodeType&&e;var s=i&&i.exports===n;var o=s?a.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(e,t){if(t)return e.slice();var r=e.length,a=l?l(r):new e.constructor(r);e.copy(a);return a}e.exports=c}).call(this,r(325)(e))},function(e,t,r){var a=r(4085),n=r(2194);function i(e,t){return a(e,n(e),t)}e.exports=i},function(e,t,r){var a=r(4085),n=r(4110);function i(e,t){return a(e,n(e),t)}e.exports=i},function(e,t,r){var a=r(2193),n=r(4110),i=r(4109);function s(e){return a(e,i,n)}e.exports=s},function(e,t){var r=Object.prototype;var a=r.hasOwnProperty;function n(e){var t=e.length,r=new e.constructor(t);if(t&&"string"==typeof e[0]&&a.call(e,"index")){r.index=e.index;r.input=e.input}return r}e.exports=n},function(e,t,r){var a=r(4094),n=r(4143),i=r(4144),s=r(4145),o=r(4146);var l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",v="[object Set]",m="[object String]",h="[object Symbol]";var f="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",y="[object Int8Array]",O="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",j="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]";function w(e,t,r){var w=e.constructor;switch(t){case f:return a(e);case l:case c:return new w(+e);case b:return n(e,r);case g:case _:case y:case O:case k:case E:case j:case C:case S:return o(e,r);case u:return new w;case d:case m:return new w(e);case p:return i(e);case v:return new w;case h:return s(e)}}e.exports=w},function(e,t,r){var a=r(4094);function n(e,t){var r=t?a(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}e.exports=n},function(e,t){var r=/\w*$/;function a(e){var t=new e.constructor(e.source,r.exec(e));t.lastIndex=e.lastIndex;return t}e.exports=a},function(e,t,r){var a=r(681);var n=a?a.prototype:void 0,i=n?n.valueOf:void 0;function s(e){return i?Object(i.call(e)):{}}e.exports=s},function(e,t,r){var a=r(4094);function n(e,t){var r=t?a(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}e.exports=n},function(e,t,r){var a=r(4083),n=r(2175),i=r(2842);function s(e){return"function"!=typeof e.constructor||i(e)?{}:a(n(e))}e.exports=s},function(e,t,r){var a=r(4149),n=r(2121),i=r(2840);var s=i&&i.isMap;var o=s?n(s):a;e.exports=o},function(e,t,r){var a=r(2197),n=r(682);var i="[object Map]";function s(e){return n(e)&&a(e)==i}e.exports=s},function(e,t,r){var a=r(4151),n=r(2121),i=r(2840);var s=i&&i.isSet;var o=s?n(s):a;e.exports=o},function(e,t,r){var a=r(2197),n=r(682);var i="[object Set]";function s(e){return n(e)&&a(e)==i}e.exports=s},function(e,t,r){var a=r(4086);var n=8;function i(e,t,r){t=r?void 0:t;var s=a(e,n,void 0,void 0,void 0,void 0,void 0,t);s.placeholder=i.placeholder;return s}i.placeholder={};e.exports=i},function(e,t,r){var a=r(755),n=r(682),i=r(2174);var s="[object DOMException]",o="[object Error]";function l(e){if(!n(e))return false;var t=a(e);return t==o||t==s||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}e.exports=l},function(e,t,r){var a=r(2197),n=r(682);var i="[object WeakMap]";function s(e){return n(e)&&a(e)==i}e.exports=s},function(e,t,r){var a=r(4108),n=r(2178);var i=1;function s(e){return n("function"==typeof e?e:a(e,i))}e.exports=s},function(e,t,r){var a=r(4086),n=r(4111);var i=256;var s=n(function(e,t){return a(e,i,void 0,void 0,void 0,t)});e.exports=s},function(e,t,r){var a=r(1644),n=r(4084),i=r(502),s=r(1405),o=r(2204),l=r(1238),c=r(2207);function u(e){if(i(e))return a(e,l);return s(e)?[e]:n(o(c(e)))}e.exports=u},function(e,t,r){var a=r(4159);var n=a();e.exports=n},function(e,t,r){var a=r(4090),n=r(4111),i=r(4089),s=r(4103),o=r(502),l=r(4102);var c="Expected a function";var u=8,d=32,p=128,v=256;function m(e){return n(function(t){var r=t.length,n=r,m=a.prototype.thru;e&&t.reverse();while(n--){var h=t[n];if("function"!=typeof h)throw new TypeError(c);if(m&&!f&&"wrapper"==s(h))var f=new a([],true)}n=f?n:r;while(++n<r){h=t[n];var b=s(h),g="wrapper"==b?i(h):void 0;f=g&&l(g[0])&&g[1]==(p|u|d|v)&&!g[4].length&&1==g[9]?f[s(g[0])].apply(f,g[3]):1==h.length&&l(h)?f[b]():f.thru(h)}return function(){var e=arguments,a=e[0];if(f&&1==e.length&&o(a))return f.plant(a).value();var n=0,i=r?t[n].apply(this,e):a;while(++n<r)i=t[n].call(this,i);return i}})}e.exports=m},function(e,t,r){var a=r(1644),n=r(2178),i=r(4161),s=r(502);function o(e,t){var r=s(e)?a:i;return r(e,n(t,3))}e.exports=o},function(e,t,r){var a=r(4162),n=r(2123);function i(e,t){var r=-1,i=n(e)?Array(e.length):[];a(e,function(e,a,n){i[++r]=t(e,a,n)});return i}e.exports=i},function(e,t,r){var a=r(2117),n=r(4163);var i=n(a);e.exports=i},function(e,t,r){var a=r(2123);function n(e,t){return function(r,n){if(null==r)return r;if(!a(r))return e(r,n);var i=r.length,s=t?i:-1,o=Object(r);while(t?s--:++s<i)if(false===n(o[s],s,o))break;return r}}e.exports=n},function(e,t){var r=Array.prototype;var a=r.join;function n(e,t){return null==e?"":a.call(e,t)}e.exports=n},function(e,t,r){var a=r(4166),n=r(4167),i=r(4093);function s(e,t,r){var s=null==e?0:e.length;if(!s)return[];if(r&&"number"!=typeof r&&n(e,t,r)){t=0;r=s}else{t=null==t?0:i(t);r=void 0===r?s:i(r)}return a(e,t,r)}e.exports=s},function(e,t){function r(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t);r=r>n?n:r;r<0&&(r+=n);n=t>r?0:r-t>>>0;t>>>=0;var i=Array(n);while(++a<n)i[a]=e[a+t];return i}e.exports=r},function(e,t,r){var a=r(1639),n=r(2123),i=r(2119),s=r(1716);function o(e,t,r){if(!s(r))return false;var o=typeof t;if("number"==o?n(r)&&i(t,r.length):"string"==o&&t in r)return a(r[t],e);return false}e.exports=o},,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(2);var y=r(1757);var O=r(4);var k=r(24);var E=r(108);var j=r(35);var C=r(1158);var S=r(17);var w=r(31);var I=r(38);var T=r(10);var A=r(576);var N=r(392);var P=r(66);var R=r(693);var M=r(921);var x=r(3);var D=r.n(x);var F=r(37);var L=r.n(F);var B=r(850);var U=r(257);var q=r(45);var G=r(899);var H=r(537);var W=r(1067);var V=r(296);var K=r(1071);var z=r(1076);var Q=r(100);var Y=r(4513);var J={id:g["b"].string.isRequired,saveScrollmarkForKey:g["b"].func,clogger:g["b"].shape({track:g["b"].func.isRequired}).isRequired,showMemberProfile:g["b"].func};var X={showMemberProfile:_["noop"],saveScrollmarkForKey:_["noop"]};var Z=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}v()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.id,a=t.clogger;this.props.showMemberProfile({memberId:r});this.props.saveScrollmarkForKey(r);a.track("ORGANIZATION_DIRECTORY_CLICK",{})}},{key:"render",value:function e(){var t=this.props.id;return n.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":t,role:"presentation",onClick:this.onClick},n.a.createElement(Y["a"],{id:t}))}}]);return t}(a["Component"]);Z.displayName="SearchableMemberListMember";Z.defaultProps=X;var $=function e(t){return{clogger:Object(q["a"])({state:t})}};var ee={showMemberProfile:function e(){return Q["j"].apply(void 0,arguments)},saveScrollmark:function e(){return A["saveScrollmark"].apply(void 0,arguments)}};var te=Object(o["connect"])($,ee)(Z);var re=r(3194);var ae=new T["b"]("member_directory");var ne={memberIds:g["b"].arrayOf(g["b"].string),scrollmark:g["b"].shape({key:g["b"].string,offset:g["b"].number}),searchQuery:g["b"].string,setSearchQuery:g["b"].func,filter:g["b"].string,setFilter:g["b"].func,fetchMembersPost:g["b"].func,saveScrollmark:g["b"].func,nonExactMatchMemberIds:g["b"].arrayOf(g["b"].string),isEnterprise:g["b"].bool,isFreeTeamAdmin:g["b"].bool,ariaLabel:g["b"].string,clogger:g["b"].shape({track:g["b"].func.isRequired}).isRequired,openFromOrgDirectory:g["b"].func,featureSonicMemberDirectory:g["b"].bool,featureSteepleChurch:g["b"].bool,onItemTabWithin:g["b"].func};var ie={memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:_["noop"],filter:"people",setFilter:_["noop"],fetchMembersPost:_["noop"],saveScrollmark:_["noop"],nonExactMatchMemberIds:[],isEnterprise:false,isFreeTeamAdmin:false,ariaLabel:void 0,openFromOrgDirectory:_["noop"],featureSonicMemberDirectory:false,featureSteepleChurch:false,onItemTabWithin:_["noop"]};var se=100;var oe="SearchInProductEducation";var le=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(r,["onScroll","onClearSearch","onClickSearchInProductEducation","onViewMatchesClick","onPricingClick","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem","focus"]);r.requestPost=null;r.requestNonExactMatchMembers=null;r.keys=null;r.list=n.a.createRef();r.layout=new W["a"];r.layout.heightCache.DEFAULT_HEIGHT=60;r.state={reachedEnd:false};r.debouncedFetchPost=Object(_["debounce"])(r.fetchPost,se);return r}v()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,r=t.key,a=t.offset;this.layout.setAnchor(r,a);this.props.saveScrollmark(null)}},{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.searchQuery,n=r.filter,i=r.clogger;if(t.searchQuery===a&&t.filter===n)return;this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel();this.requestPost=null;this.requestNonExactMatchMembers=null;this.layout&&this.layout.setAnchor(false);this.setReachedEnd(false,this.fetchAround);t.searchQuery!==a&&i.track("ORGANIZATION_DIRECTORY_KEYPRESS",{});t.filter!==n&&i.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:n})}},{key:"componentWillUnmount",value:function e(){this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"onClearSearch",value:function e(){this.props.setSearchQuery("");this.props.setFilter("people")}},{key:"onClickSearchInProductEducation",value:function e(){this.props.openFromOrgDirectory({query:this.props.searchQuery})}},{key:"onViewMatchesClick",value:function e(){this.props.setFilter("people")}},{key:"onPricingClick",value:function e(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}},{key:"setReachedEnd",value:function e(t,r){this.setState(function(){return{reachedEnd:t}},r)}},{key:"getListKeys",value:function e(){return this.props.memberIds.filter(function(e){return"L"!==e[0]})}},{key:"getEmptyStateLabel",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,r=t.filter,a=t.searchQuery,i=t.isEnterprise;var s={query:n.a.createElement("strong",null,a)};switch(r){case"people":if(a)return ae.rt("No members found matching {query}",s);return ae.t("No members found");case"admins":if(a){if(i)return ae.rt("No workspace admins found matching {query}",s);return ae.rt("No admins found matching {query}",s)}if(i)return ae.t("No workspace admins found");return ae.t("No admins found");case"bots":if(a)return ae.rt("No bots found matching {query}",s);return ae.t("No bots found");case"org_members":if(a)return ae.rt("No members found matching {query}",s);return ae.t("No members found");case"org_admins":if(a)return ae.rt("No org admins found matching {query}",s);return ae.t("No org admins found");case"guests":if(a)return ae.rt("No guests found matching {query}",s);return ae.t("No guests found");case"deactivated":if(a)return ae.rt("No deactivated members found matching {query}",s);return ae.t("No deactivated members found");default:if(a)return ae.rt("No members found matching {query}",s);return ae.t("No members found")}}},{key:"getNonExactMatchEmptyStateLabel",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,r=t.filter,a=t.isEnterprise,i=t.searchQuery;var s={query:n.a.createElement("strong",null,i)};switch(r){case"admins":if(a)return ae.rt("No workspace admins match {query}, but there are other members who do.",s);return ae.rt("No admins match {query}, but there are other members who do.",s);case"bots":return ae.rt("No bots match {query}, but there are other members who do.",s);case"org_members":return ae.rt("No members match {query}, but there are other members who do.",s);case"org_admins":return ae.rt("No org admins match {query}, but there are other members who do.",s);case"guests":return ae.rt("No guests match {query}, but there are other members who do.",s);case"deactivated":return ae.rt("No deactivated members match {query}, but there are other members who do.",s);default:return ae.rt("No members match {query}, but there are other members who do.",s)}}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"saveScrollmarkForKey",value:function e(t){var r=this.list.current;if(!r)return;if(!t)return;this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-r.getScrollTop()})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.fetchMembers();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"shouldFetchNonExactMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var r=this.props,a=r.filter,n=r.searchQuery;return!Object(_["isEmpty"])(n)&&"people"!==a&&0===t.length}},{key:"fetchMembers",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:r}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.nextMarker,a=e.members;!t.props.searchQuery&&r||t.setReachedEnd(true);t.shouldFetchNonExactMembers(a)&&t.fetchNonExactMatchMembers()})}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.debouncedFetchPost()}},{key:"fetchNonExactMatchMembers",value:function e(){var t=this;if(this.requestNonExactMatchMembers)return false;var r=true;this.requestNonExactMatchMembers=this.fetchMembers(r);return this.requestNonExactMatchMembers.finally(function(){t.requestNonExactMatchMembers=null})}},{key:"isFocusableItem",value:function e(t){var r=t.key;return r!==this.loadingIndicatorKey&&r!==oe}},{key:"renderRow",value:function e(t){if(!this.props.featureSonicMemberDirectory)return null;var r=this.keys[t];if(!r)return null;if(r===this.loadingIndicatorKey)return n.a.createElement("div",{className:"p-member-directory__loading"},ae.t("Loading\u2026"));if(r===oe)return this.renderSearchInProductEducation();return this.renderMember(r)}},{key:"renderSearchInProductEducation",value:function e(){if(!this.props.featureSteepleChurch)return null;return n.a.createElement(V["a"],{"data-qa":"workspace-directory-search-in-product-education",className:"p-member-directory__empty_list",description:ae.t("No luck? You can also search for people based on the topics they talk about.",{ns:"search"}),primaryActionText:ae.t("Search by Topic",{ns:"search"}),onClickPrimaryAction:this.onClickSearchInProductEducation})}},{key:"renderMember",value:function e(t){return n.a.createElement(te,{id:t,saveScrollmarkForKey:this.saveScrollmarkForKey})}},{key:"renderEmptyListView",value:function e(){var t=this;if(!this.props.featureSonicMemberDirectory)return null;var r=this.props,a=r.searchQuery,i=r.nonExactMatchMemberIds,s=r.filter,o=r.isFreeTeamAdmin,l=r.clogger;var c=ae.t("Clear Search");var u=ae.t("View Matches");if(i.length)return n.a.createElement(V["a"],{className:"p-member-directory__empty_list",description:this.getNonExactMatchEmptyStateLabel(),primaryActionText:u,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:c,onClickSecondaryAction:this.onClearSearch});if(!a&&"guests"===s&&o){var d=ae.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,function(e){var r=e.key,a=e.text;return n.a.createElement(K["a"],{key:r,href:"/pricing?ui_step=86&ui_element=5",class:"no_underline",target:"_blank",onClick:t.onPricingClick},a)});l.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}});return n.a.createElement(V["a"],{className:"p-member-directory__empty_list",description:d,primaryActionText:c,onClickPrimaryAction:this.onClearSearch})}if(this.props.featureSteepleChurch)return this.renderSearchInProductEducation();return n.a.createElement(V["a"],{className:"p-member-directory__empty_list",description:this.getEmptyStateLabel(),primaryActionText:c,onClickPrimaryAction:this.onClearSearch})}},{key:"render",value:function e(){var t=this;this.keys=this.getListKeys();if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();if(this.state.reachedEnd)this.props.featureSteepleChurch&&this.keys.push(oe);else{this.loadingIndicatorKey="Loading"+this.keys.length;this.keys.push(this.loadingIndicatorKey)}return n.a.createElement(G["a"],null,function(e){var r=e.measureRef,a=e.width,i=e.height;return n.a.createElement("div",{className:"p-member_directory__member_list",ref:r},n.a.createElement(H["a"],{width:a,height:i,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPost:t.debouncedFetchPost,isFocusableItem:t.isFocusableItem,onItemTabWithin:t.props.onItemTabWithin,ariaLabel:t.props.ariaLabel}))})}}]);return t}(a["PureComponent"]);le.displayName="SearchableMemberList";le.defaultProps=ie;var ce=function e(t){return{scrollmark:Object(A["getScrollmark"])(t),searchQuery:Object(A["getSearchQuery"])(t),filter:Object(A["getFilter"])(t),memberIds:Object(A["getFlexpaneMemberIds"])(t),nonExactMatchMemberIds:Object(A["getFlexpaneNonExactMatchMemberIds"])(t),isEnterprise:Object(U["e"])(t),isFreeTeamAdmin:!Object(w["isPaidTeam"])(Object(j["d"])(t))&&Object(S["isAdmin"])(Object(k["b"])(t)),clogger:Object(q["a"])({state:t}),featureSonicMemberDirectory:Object(O["isFeatureEnabled"])(t,"feature_sonic_member_directory"),featureSteepleChurch:Object(z["a"])(t)}};var ue={fetchMembersPost:A["fetchMembersPost"],saveScrollmark:A["saveScrollmark"],setSearchQuery:A["setSearchQuery"],setFilter:A["setFilter"],openFromOrgDirectory:B["g"]};var de=Object(o["connect"])(ce,ue)(function(e){var t=e.forwardedRef,r=L()(e,["forwardedRef"]);return n.a.createElement(le,D()({ref:t},r))});var pe=n.a.forwardRef(function(e,t){return n.a.createElement(de,D()({forwardedRef:t},e))});var ve=r(26);var me=r.n(ve);var he=r(22);var fe=r(3196);var be=new T["b"]("member_directory");var ge={featureSonicMemberDirectory:g["b"].bool,isEnterprise:g["b"].bool,selectedFilter:g["b"].string,onMenuItemSelected:g["b"].func,workspaceName:g["b"].string,enterpriseOrgName:g["b"].string,externalWorkspaces:g["b"].array,menuProps:g["b"].object};var _e={featureSonicMemberDirectory:false,isEnterprise:false,selectedFilter:void 0,onMenuItemSelected:_["noop"],workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0};var ye={people:"people",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};var Oe=function(e){b()(t,e);v()(t,null,[{key:"menuSeparator",value:function e(){return{type:"separator"}}}]);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.memberDirectoryStrings=r.props.featureSonicMemberDirectory?{people:be.t("Everyone"),org_members:be.t("All Members"),org_admins:be.t("Org Admins"),members:be.t("All Members"),admins:r.props.isEnterprise?be.t("Workspace Admins"):be.t("Admins"),bots:be.t("Bots"),guests:be.t("Guests"),deactivated:be.t("Deactivated accounts")}:null;return r}v()(t,[{key:"getLabel",value:function e(t){return this.memberDirectoryStrings[t]}},{key:"getWorkspaceSectionLabel",value:function e(){var t=this.props,r=t.isEnterprise,a=t.externalWorkspaces,n=t.workspaceName,i=t.featureSonicMemberDirectory;if(!i)return null;var s=a.length>0;if(r)return be.t("{workspaceName} (current workspace)",{workspaceName:n});return s?n:""}},{key:"buildMenuItemTemplate",value:function e(t){var r=this.props,a=r.selectedFilter,i=r.onMenuItemSelected;var s=n.a.createElement(he["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var o="p-member_directory_menu--selected-item";return{label:this.getLabel(t),click:function e(){return i(t)},icon:a===t?s:null,className:a===t?o:""}}},{key:"maybeBuildOrgFilterSection",value:function e(){var r=this.props,a=r.isEnterprise,n=r.enterpriseOrgName;if(!a)return[];var i={type:"header",label:n};return[t.menuSeparator(),i,this.buildMenuItemTemplate(ye.orgMembers),this.buildMenuItemTemplate(ye.orgAdmins)]}},{key:"buildWorkspaceFilterSection",value:function e(){var r=this.getWorkspaceSectionLabel();var a={type:"header",label:r};return[t.menuSeparator(),a,this.buildMenuItemTemplate(ye.workspaceMembers),this.buildMenuItemTemplate(ye.workspaceAdmins),this.buildMenuItemTemplate(ye.guests),this.buildMenuItemTemplate(ye.bots)]}},{key:"maybeBuildExternalWorkspaceSection",value:function e(){var r=this.props,a=r.externalWorkspaces,i=r.selectedFilter,s=r.onMenuItemSelected,o=r.featureSonicMemberDirectory;if(!o)return null;var l=a.length>0;var c=n.a.createElement(he["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var u="p-member_directory_menu--selected-item";if(!l)return[];var d=be.t("External Organizations");var p={type:"header",label:d};var v=a.map(function(e){var t=Object(w["getTeamId"])(e);return{label:Object(w["getTeamDisplayName"])(e),click:function e(){return s(t)},icon:i===t?c:null,className:i===t?u:""}});return[t.menuSeparator(),p].concat(me()(v))}},{key:"render",value:function e(){var r=this.props,a=r.featureSonicMemberDirectory,i=r.menuProps;if(!a)return null;var s=[this.buildMenuItemTemplate(ye.people)].concat(me()(this.maybeBuildOrgFilterSection()),me()(this.buildWorkspaceFilterSection()),me()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(ye.deactivatedMembers)]);return n.a.createElement(P["a"],D()({},i,{template:s}))}}]);return t}(a["PureComponent"]);Oe.displayName="MemberDirectoryMenu";var ke=function e(t,r){var a=r.externalTeams;var n=Object(j["d"])(t);var i=Object(O["pageNeedsEnterprise"])(t);var s={featureSonicMemberDirectory:Object(O["isFeatureEnabled"])(t,"feature_sonic_member_directory"),workspaceName:Object(w["getTeamDisplayName"])(n),isEnterprise:i,externalWorkspaces:a.map(function(e){return Object(j["j"])(t,e)})};i&&(s.enterpriseOrgName=Object(j["f"])(t));return s};Oe.defaultProps=_e;var Ee=Object(o["connect"])(ke)(Oe);var je=r(3198);var Ce=new T["b"]("member_directory");var Se={isEnterprise:g["b"].bool,isAdmin:g["b"].bool,setSearchQuery:g["b"].func,searchQuery:g["b"].string,setFilter:g["b"].func,filter:g["b"].string,featureSonicMemberDirectory:g["b"].bool,isVisible:g["b"].bool,flexParams:g["b"].arrayOf(g["b"].string),teamUrl:g["b"].string,fetchMemberCountsForTeam:g["b"].func,isRestricted:g["b"].bool};var we={isEnterprise:false,isAdmin:false,isRestricted:false,setSearchQuery:_["noop"],setFilter:_["noop"],searchQuery:"",filter:"people",featureSonicMemberDirectory:false,isVisible:false,flexParams:[],teamUrl:"/",fetchMemberCountsForTeam:_["noop"]};var Ie=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(r,["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody","focus","onItemTabWithin"]);r.state={externalTeams:[]};r.list=n.a.createRef();r.flexpane=n.a.createRef();return r}v()(t,[{key:"componentDidMount",value:function e(){this.fetchExternalTeams()}},{key:"onSearchInputChange",value:function e(t){var r=t.target.value||"";this.props.setSearchQuery(r)}},{key:"onMenuItemSelected",value:function e(t){this.props.setFilter(t)}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"getTitle",value:function e(){var t=this.props,r=t.featureSonicMemberDirectory,a=t.isEnterprise;if(!r)return null;return a?Ce.t("Organization Directory"):Ce.t("Workspace Directory")}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"fetchExternalTeams",value:function e(){var t=this;this.props.fetchMemberCountsForTeam().then(function(e){if(!e||!e.external_teams)return;t.setState(function(){return{externalTeams:Object.keys(e.external_teams)}})})}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;return n.a.createElement("div",{className:"p-member_directory__search"},n.a.createElement(N["a"],{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:Ce.t("Search by name or title"),icon:"search",autoFocus:true,inputAriaLabel:Ce.t("Search members by name or title",{fallbackHash:"4be82cb9b1458f2d26a012d16010b3630c49c611"})}))}},{key:"renderMenu",value:function e(t){return n.a.createElement(Ee,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:t,externalTeams:this.state.externalTeams})}},{key:"renderFilterIconButton",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;if(this.props.isRestricted)return null;var t="people"!==this.props.filter;var r=t?Ce.t("Filter members (filter active)"):Ce.t("Filter members");return n.a.createElement(P["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(R["a"],{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:t,"aria-label":r}))}},{key:"renderBody",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),n.a.createElement(pe,{ref:this.list,onItemTabWithin:this.onItemTabWithin,ariaLabel:this.getTitle()}))}},{key:"render",value:function e(){var t=this.props,r=t.isVisible,a=t.flexParams,i=t.teamUrl,s=t.featureSonicMemberDirectory;if(!s)return null;if(!r)return null;if(a.length)return null;return n.a.createElement(M["a"],{ref:this.flexpane,focus:this.focus,title:this.getTitle(),renderBody:this.renderBody,kbNavOrder:Object(I["a"])()?void 0:5,viewId:"member-directory",headerProps:{optionsHref:this.props.isAdmin?i+"admin":void 0,optionsIconType:"cog-o",optionsTooltipText:Ce.t("Manage members")}})}}]);return t}(a["Component"]);Ie.displayName="MemberDirectoryFlexpane";Ie.defaultProps=we;var Te=function e(t){var r=Object(E["i"])(t);var a=!Object(I["a"])()&&"team"===r||"directory"===r;return{featureSonicMemberDirectory:Object(O["isFeatureEnabled"])(t,"feature_sonic_member_directory"),isEnterprise:Object(O["pageNeedsEnterprise"])(t),isAdmin:Object(S["isAdmin"])(Object(k["b"])(t)),isRestricted:Object(S["isRestricted"])(Object(k["b"])(t)),searchQuery:Object(A["getSearchQuery"])(t),filter:Object(A["getFilter"])(t),flexParams:Object(E["e"])(t),teamUrl:Object(w["getTeamUrl"])(Object(j["d"])(t)),isVisible:a}};var Ae={setSearchQuery:function e(){return A["setSearchQuery"].apply(void 0,arguments)},setFilter:function e(){return A["setFilter"].apply(void 0,arguments)},fetchMemberCountsForTeam:function e(){return C["b"].apply(void 0,arguments)}};var Ne=Object(o["connect"])(Te,Ae)(Ie);var Pe=Ne;var Re=r(163);var Me=function e(t,r){if(!t)throw new Error("mountMemberDirectoryFlexpane must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(Re["a"],null,n.a.createElement(Pe,null))),r)};var xe=function e(t){s.a.unmountComponentAtNode(t)};var De=r(44);Object(De["a"])("interop.mountMemberDirectoryFlexpane",Me);Object(De["a"])("interop.unmountMemberDirectoryFlexpane",xe)},,,function(e,t,r){"use strict";var a=r(2);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(0);var l=r(10);var c=r(28);var u=r(81);var d=r(3296);var p=r.n(d);var v=new l["b"]("threads");var m={tryAgain:o["b"].func,"data-qa":o["b"].string,children:o["b"].node};var h={tryAgain:a["noop"],"data-qa":"message_container_error",children:null};function f(e){var t=e.tryAgain,r=e["data-qa"],a=e.children;return s.a.createElement("div",{className:"p-message_container_error","data-qa":r},s.a.createElement("div",{className:"p-message_container_error__contents"},s.a.createElement("div",{className:"p-message_container_error__emoji"},s.a.createElement(u["b"],{text:":tropical_fish:",emojiSize:u["a"].LARGE})),s.a.createElement("p",{className:"p-message_container_error__msg"},a),s.a.createElement(c["d"],{type:"primary",onClick:t,"data-qa":r+"_try_again"},v.t("Try Again"))))}f.displayName="MessageContainerError";f.defaultProps=h;t["a"]=f},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(13);var h=r(16);var f=r.n(h);var b=r(2);var g=r.n(b);var _=r(67);var y=r(4);var O=r(41);var k=r(100);var E=r(10);var j=r(187);var C=new E["b"]("message");var S={ts:d["b"].string.isRequired,threadTs:d["b"].string.isRequired,channelId:d["b"].string.isRequired,latestReply:d["b"].string.isRequired,className:d["b"].string,showThread:d["b"].func,featureNewRepliesAfterBcast:d["b"].bool};var w={className:void 0,showThread:b["noop"],featureNewRepliesAfterBcast:false};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(t){var r=this.props,a=r.channelId,n=r.threadTs,i=r.ts;t.preventDefault();this.props.showThread({channelId:a,threadTs:n,highlightTs:i})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.latestReply,n=t.featureNewRepliesAfterBcast;if(!n||!a)return null;if(a<=r)return null;var i=f()("c-message__broadcast_footer",this.props.className);return v.a.createElement(j["a"],{className:i,onClick:this.onClick},C.t("View newer replies"))}}]);return t}(p["PureComponent"]);I.displayName="ThreadBroadcastFooter";I.defaultProps=w;var T=function e(t,r){var a=r.channelId,n=r.threadTs;var i=Object(_["a"])(t,a,n);return{latestReply:Object(O["getLatestReply"])(i),featureNewRepliesAfterBcast:Object(y["isFeatureEnabled"])(t,"feature_new_replies_after_bcast")}};t["a"]=Object(m["connect"])(T,{showThread:k["l"]})(I)},function(e,t,r){"use strict";var a=r(5);var n=r.n(a);var i=r(10);var s={default:{tada:cdn_url+"/69c58/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/69c58/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/69c58/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/69c58/img/unread/empty/default/1f680.png",octopus:cdn_url+"/69c58/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/69c58/img/unread/empty/default/1f64c.png",2:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/69c58/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/69c58/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/69c58/img/unread/empty/default/1f44d.png",2:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/69c58/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/69c58/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/69c58/img/unread/empty/default/1f44f.png",2:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/69c58/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/69c58/img/unread/empty/default/1f69c.png",pony:cdn_url+"/69c58/img/unread/empty/default/1f434.png",chick:cdn_url+"/69c58/img/unread/empty/default/1f423.png",growth:cdn_url+"/69c58/img/unread/empty/default/1f331.png",sun:cdn_url+"/69c58/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/69c58/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/69c58/img/unread/empty/default/1f360.png",leafs:cdn_url+"/69c58/img/unread/empty/default/1f343.png",owl:cdn_url+"/69c58/img/unread/empty/default/1f989.png",books:cdn_url+"/69c58/img/unread/empty/default/1f4da.png",island:cdn_url+"/69c58/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/69c58/img/unread/empty/default/2615.png",footprints:cdn_url+"/69c58/img/unread/empty/default/1f463.png",tea:cdn_url+"/69c58/img/unread/empty/default/1f375.png",croissant:cdn_url+"/69c58/img/unread/empty/default/1f950.png",art:cdn_url+"/69c58/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/69c58/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/69c58/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/69c58/img/unread/empty/default/26f5.png",ship:cdn_url+"/69c58/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/69c58/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/69c58/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/69c58/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/69c58/img/unread/empty/default/1f527.png",metro:cdn_url+"/69c58/img/unread/empty/default/1f687.png",soccer:cdn_url+"/69c58/img/unread/empty/default/26bd.png",trophy:cdn_url+"/69c58/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/69c58/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/69c58/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/69c58/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/69c58/img/unread/empty/default/1f60a.png",candy:cdn_url+"/69c58/img/unread/empty/default/1f36c.png",herb:cdn_url+"/69c58/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/69c58/img/unread/empty/default/2728.png",check_mark:cdn_url+"/69c58/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/69c58/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/69c58/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/69c58/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/69c58/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/69c58/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/69c58/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/69c58/img/unread/empty/default/1f4aa.png",2:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/7ff4/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/7ff4/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/7ff4/img/unread/empty/default/1f44b.png",2:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/7ff4/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/7ff4/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/7ff4/img/unread/empty/default/1f984.png",zap:cdn_url+"/7ff4/img/unread/empty/default/26a1.png",star:cdn_url+"/7ff4/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/69c58/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/69c58/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/69c58/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/69c58/img/unread/empty/google/1f680.png",octopus:cdn_url+"/69c58/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/69c58/img/unread/empty/google/1f64c.png",2:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/69c58/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/69c58/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/69c58/img/unread/empty/google/1f44d.png",2:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/69c58/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/69c58/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/69c58/img/unread/empty/google/1f44f.png",2:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/69c58/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/69c58/img/unread/empty/google/1f69c.png",pony:cdn_url+"/69c58/img/unread/empty/google/1f434.png",chick:cdn_url+"/69c58/img/unread/empty/google/1f423.png",growth:cdn_url+"/69c58/img/unread/empty/google/1f331.png",sun:cdn_url+"/69c58/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/69c58/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/69c58/img/unread/empty/google/1f360.png",leafs:cdn_url+"/69c58/img/unread/empty/google/1f343.png",owl:cdn_url+"/69c58/img/unread/empty/google/1f989.png",books:cdn_url+"/69c58/img/unread/empty/google/1f4da.png",island:cdn_url+"/69c58/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/69c58/img/unread/empty/google/2615.png",footprints:cdn_url+"/69c58/img/unread/empty/google/1f463.png",tea:cdn_url+"/69c58/img/unread/empty/google/1f375.png",croissant:cdn_url+"/69c58/img/unread/empty/google/1f950.png",art:cdn_url+"/69c58/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/69c58/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/69c58/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/69c58/img/unread/empty/google/26f5.png",ship:cdn_url+"/69c58/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/69c58/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/69c58/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/69c58/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/69c58/img/unread/empty/google/1f527.png",metro:cdn_url+"/69c58/img/unread/empty/google/1f687.png",soccer:cdn_url+"/69c58/img/unread/empty/google/26bd.png",trophy:cdn_url+"/69c58/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/69c58/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/69c58/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/69c58/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/69c58/img/unread/empty/google/1f60a.png",candy:cdn_url+"/69c58/img/unread/empty/google/1f36c.png",herb:cdn_url+"/69c58/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/69c58/img/unread/empty/google/2728.png",check_mark:cdn_url+"/69c58/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/69c58/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/69c58/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/69c58/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/69c58/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/69c58/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/69c58/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/69c58/img/unread/empty/google/1f4aa.png",2:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/7ff4/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/7ff4/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/7ff4/img/unread/empty/google/1f44b.png",2:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/7ff4/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/7ff4/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/7ff4/img/unread/empty/google/1f984.png",zap:cdn_url+"/7ff4/img/unread/empty/google/26a1.png",star:cdn_url+"/7ff4/img/unread/empty/google/2b50.png"}};var o=[{emoji:"airplane",skintone:false,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:false,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:false,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:false,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:false,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:false,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:false,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:true,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:false,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:false,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:false,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:false,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:true,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:false,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:true,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:false,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:false,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:false,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:false,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:false,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:false,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:true,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:true,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:false,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}];var l=[{emoji:"chocolate_bar",skintone:false,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:false,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:false,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:false,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:false,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:false,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:false,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:false,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:false,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:false,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}];var c=[{emoji:"apple",skintone:false,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:false,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:false,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:false,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:false,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:true,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}];var u=[{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:false,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:true,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:false,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:false,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:false,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:true,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:false,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:false,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}];var d=[{emoji:"apple",skintone:false,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:false,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:true,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:false,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:false,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:false,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:false,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:false,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:false,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:true,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}];var p=[{emoji:"balloon",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:false,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:false,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:true,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:true,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:false,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:false,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:false,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:true,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:true,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}];var v=[{emoji:"blush",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:false,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:false,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:false,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:false,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:false,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:true,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}];var m=[{emoji:"apple",skintone:false,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:false,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:false,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:true,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:true,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:false,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:false,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:true,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:true,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:false,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:true,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:false,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:false,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:false,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:true,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:true,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:true,lineOne:"Atualizado!",lineTwo:"E agora?"}];r.d(t,"a",function(){return b});var h;var f=(h={"de-DE":o,"en-GB":l},n()(h,i["b"].DEFAULT_LOCALE,c),n()(h,"es-ES",u),n()(h,"es-LA",d),n()(h,"fr-FR",p),n()(h,"ja-JP",v),n()(h,"pt-BR",m),h);function b(e){var t=e.locale,r=void 0===t?i["b"].DEFAULT_LOCALE:t,a=e.preferredSkintone,n=void 0===a?1:a,o=e.emojiMode,l=void 0===o?"default":o;var c="apple"===l?"default":l;var u=f[r]||f[i["b"].DEFAULT_LOCALE];var d=u[Math.floor(Math.random()*u.length)];var p=d.skintone?s[c][d.emoji][n]:s[c][d.emoji];d.emojiUrl=p;return d}},function(e,t,r){"use strict";var a=r(13);var n=r(2);var i=r.n(n);var s=r(423);var o=r(4);var l=r(67);var c=r(85);var u=r(23);var d=r(35);var p=r(41);var v=r(31);var m=r(100);var h=r(6);var f=r.n(h);var b=r(7);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(9);var k=r.n(O);var E=r(16);var j=r.n(E);var C=r(0);var S=r(1);var w=r.n(S);var I=r(442);var T=r(10);var A=r(795);var N=r(317);var P=r(1733);var R=r(1565);var M=new T["b"]("threads");var x={ts:C["b"].string.isRequired,threadTs:C["b"].string.isRequired,channelId:C["b"].string.isRequired,className:C["b"].string,rootText:C["b"].string,theme:C["b"].string,replyCount:C["b"].number,replyUsers:C["b"].arrayOf(C["b"].string),replyUsersCount:C["b"].number,teamDomain:C["b"].string.isRequired,showThread:C["b"].func,featureNewRepliesAfterBcast:C["b"].bool,hasBlocks:C["b"].bool};var D={className:null,rootText:null,theme:"light",replyCount:0,replyUsers:void 0,replyUsersCount:0,showThread:n["noop"],featureNewRepliesAfterBcast:false,hasBlocks:false};var F=function(e){k()(t,e);function t(e){f()(this,t);var r=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openThread=r.openThread.bind(r);return r}g()(t,[{key:"openThread",value:function e(t){var r=this.props,a=r.showThread,n=r.channelId,i=r.threadTs,s=r.ts;t.preventDefault();a({channelId:n,threadTs:i,highlightTs:s})}},{key:"renderRepliersSummary",value:function e(t){var r=this.props,a=r.replyCount,n=r.replyUsers,i=r.replyUsersCount,s=r.featureNewRepliesAfterBcast;if(!a||!i)return null;if(s)return null;return w.a.createElement("div",{className:"c-message__broadcast_repliers"},w.a.createElement(N["a"],{className:"c-message__broadcast_repliers_link",href:t,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},w.a.createElement(R["a"],{replyCount:a,replyUsers:n,replyUsersCount:i,prefixWithReplyCount:true,broadcastPreabmle:true})))}},{key:"render",value:function e(){var t=this;var r=Object(p["constructAbsoluteMsgPermalink"])({teamDomain:this.props.teamDomain,channelId:this.props.channelId,ts:this.props.ts,threadTs:this.props.threadTs});var a=j()("c-message__broadcast_preamble",this.props.className);var n=void 0;if(this.props.rootText&&!this.props.hasBlocks)n=w.a.createElement("div",{className:a},w.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(P["a"])()),w.a.createElement(N["a"],{className:"c-message__broadcast_preamble_link",href:r,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},w.a.createElement(A["a"],{text:this.props.rootText,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,customLineEnding:"\u2026",maxNewlines:1})));else{var i=M.rt("replied to <a>a thread</a>",null,function(e){var a=e.key,n=e.text;return w.a.createElement(N["a"],{className:"c-message__broadcast_preamble_link",key:a,href:r,target:"_blank",rel:"noopener noreferrer",onClick:t.openThread},n)});n=w.a.createElement("div",{className:a},i)}if("light"===this.props.theme)return w.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},n,this.renderRepliersSummary(r));return n}}]);return t}(I["a"]);F.displayName="ThreadBroadcastPreamble";F.propTypes=x;F.defaultProps=D;var L=F;function B(e,t){var r=t.threadTs,a=t.channelId;var n=Object(l["a"])(e,a,r);if(!n)return{};var m=n.blocks&&n.blocks.length;var h=n.reply_count;var f=n.replies||[];var b=void 0;b=n.reply_users?n.reply_users:i.a.uniq(i.a.map(f,"user"));var g=n.reply_users_count?n.reply_users_count:b.length;var _=Object(p["getMessageRootText"])(n);if(n.files&&n.files.length){var y=i.a.first(n.files);var O=Object(c["getFileById"])(e,y);_=Object(p["getMessageRootText"])(n,O)}var k=Object(p["getSourceTeamId"])(n)||Object(u["b"])(e);var E=Object(d["j"])(e,k);var j=Object(v["getTeamDomain"])(E);return{rootText:_,replyCount:h,replyUsers:b,replyUsersCount:g,teamDomain:j,theme:Object(s["a"])(e),featureNewRepliesAfterBcast:Object(o["isFeatureEnabled"])(e,"feature_new_replies_after_bcast"),hasBlocks:m}}var U={showThread:m["l"]};var q=t["a"]=Object(a["connect"])(B,U)(L)},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(2);var p=r.n(d);var v=r(0);var m=r(1);var h=r.n(m);var f=r(13);var b=r(16);var g=r.n(b);var _=r(4);var y=r(34);var O=r(10);var k=r(431);var E=r(220);var j=r(529);var C=r(337);var S=r(125);var w=new O["b"]("threads");function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,r=e.replyCount,a=e.do24hrTime;if(Object(C["a"])(Object(S["a"])(t),new Date)){if(1===r)return w.t("Today at {time}",{time:Object(E["a"])(t,{do24hrTime:a})});return w.t("Last reply today at {time}",{time:Object(E["a"])(t,{do24hrTime:a})})}if(1===r)return Object(j["a"])(t);return w.t("Last reply {time_ago}",{time_ago:Object(j["a"])(t)})}var T=r(216);var A=r(22);var N=r(317);var P=r(17);var R=r(268);var M=r(471);var x=new O["b"]("threads");var D={replies:v["b"].array,replyCount:v["b"].number.isRequired,replyUsers:v["b"].arrayOf(v["b"].string),replyUsersCount:v["b"].number,latestReply:v["b"].string,channelId:v["b"].string.isRequired,threadTs:v["b"].string.isRequired,do24hrTime:v["b"].bool,showThreadIfThreadable:v["b"].func,featureNewRepliesAfterBcast:v["b"].bool,isThreadExpanded:v["b"].bool,threadListId:v["b"].string,className:v["b"].string};var F={replies:null,do24hrTime:false,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:p.a.noop,featureNewRepliesAfterBcast:false,isThreadExpanded:void 0,threadListId:void 0,className:void 0};var L=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openThread=r.openThread.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.state={hasKeyboardFocus:false};return r}s()(t,[{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getLastReplyTs",value:function e(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var t=p.a.last(this.props.replies);if(t)return t.ts}return null}},{key:"openThread",value:function e(t){t.preventDefault();this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.state.hasKeyboardFocus})}},{key:"renderFaces",value:function e(){var t=this;var r=void 0;r=this.props.replyUsers&&this.props.replyUsers.length?p.a.reject(this.props.replyUsers,function(e){return"B00"===e}):p.a.uniq(p.a.reject(p.a.map(this.props.replies,"user"),function(e){return"B00"===e}));var a=this.props.replyUsersCount?this.props.replyUsersCount:r.length;if(r.length>5)return p.a.concat(p.a.map(p.a.take(r,4),function(e){return t.renderSingleAvatar(e)}),this.renderSingleAvatar(r[4],a-5));return p.a.map(r,function(e){return t.renderSingleAvatar(e)})}},{key:"renderSingleAvatar",value:function e(t,r){var a=Object(M["a"])(t);var n=!Object(P["isEKMAccessDenied"])({id:t});return h.a.createElement(T["b"],{key:t,userId:a?null:t,botId:a?t:null,size:24,additionalOverlay:r,showCard:true,isInteractive:n})}},{key:"render",value:function e(){var t=this.props,r=t.replyCount,a=t.channelId,n=t.threadTs,i=t.do24hrTime,s=t.featureNewRepliesAfterBcast,o=t.isThreadExpanded;var l=x.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:r});var c=Object(R["b"])(a,n);var u=this.getLastReplyTs();var d="";d=s?I({latestReply:u,replyCount:r,do24hrTime:i}):Object(C["a"])(Object(S["a"])(u),new Date)?1===r?x.t("Today at {time}",{time:Object(E["a"])(u,{do24hrTime:i})}):x.t("Last reply today at {time}",{time:Object(E["a"])(u,{do24hrTime:i})}):1===r?Object(j["a"])(u):x.t("Last reply {time_ago}",{time_ago:Object(j["a"])(u)});var p=g()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus":this.state.hasKeyboardFocus});var v=true===o?this.props.threadListId:void 0;return h.a.createElement(k["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},h.a.createElement("div",{role:"presentation",className:p,onClick:this.openThread,"data-qa":"reply_bar"},this.renderFaces(),h.a.createElement(N["a"],{className:"c-message__reply_count",href:c,target:"_blank",rel:"noopener noreferrer","aria-expanded":o,"aria-controls":v},l),h.a.createElement("div",{className:"c-message__reply_bar_description"},h.a.createElement("span",{className:"c-message__reply_bar_last_reply"},d),h.a.createElement("span",{className:"c-message__reply_bar_view_thread"},x.t("View thread"))),h.a.createElement(A["a"],{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":true})))}}]);return t}(h.a.PureComponent);L.displayName="ReplyBar";L.defaultProps=F;function B(e){return{do24hrTime:Object(y["g"])(e,"time24"),featureNewRepliesAfterBcast:Object(_["isFeatureEnabled"])(e,"feature_new_replies_after_bcast")}}var U=t["a"]=Object(f["connect"])(B)(L)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(4180);Object(a["a"])("interop.allUnreads",{getMessageForLocale:n["a"]})},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,function(e,t,r){},,,function(e,t,r){},function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(0);var p=r(1);var v=r.n(p);var m=r(10);var h=r(138);var f=r(3294);var b=r.n(f);var g=new m["b"]("unread");var _={featureReactAllThreads:d["b"].bool};var y={featureReactAllThreads:false};var O=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={slow:false};e.timer=null;return e}s()(t,[{key:"componentDidMount",value:function e(){var t=this;this.timer=setTimeout(function(){t.setState(function(){return{slow:true}})},5e3)}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.timer)}},{key:"render",value:function e(){var t=this.props.featureReactAllThreads;var r=t?g.t("Loading messages..."):"";var a=t?g.t("Still loading... sorry for the long wait!"):"";return v.a.createElement("div",{className:"p-message_container_loading","data-qa":"message_container_loading"},v.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?a:r))}}]);return t}(v.a.Component);O.displayName="MessageContainerLoading";O.defaultProps=y;t["a"]=Object(h["a"])("feature_react_all_threads")(O)},,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(26);var d=r.n(u);var p=r(5);var v=r.n(p);var m=r(37);var h=r.n(m);var f=r(3);var b=r.n(f);var g=r(6);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(7);var E=r.n(k);var j=r(9);var C=r.n(j);var S=r(2);var w=r(1757);var I=r(0);var T=r(2414);var A=r(16);var N=r.n(A);var P=r(10);var R=r(39);var M=r(45);var x=r(38);var D=r(361);var F=r(4);var L=r(385);var B=r(351);var U=r(19);var q=r(103);var G=r(67);var H=r(423);var W=r(720);var V=r(1352);var K=r(195);var z=r(4358);var Q=r(109);var Y=r(41);var J=r(11);var X=r(1817);var Z=r(12);var $=r(1068);var ee=r(1810);var te=r(208);var re=r(57);var ae=r(245);var ne=r(61);var ie=r(900);var se=r(384);var oe=r(537);var le=r(1561);var ce=r(1859);var ue=r(1646);var de=r(1368);var pe=r(51);var ve=r(4194);var me=r(4178);var he=r(1815);var fe=r(2280);var be=r(2279);var ge=r(178);var _e=100;var ye=8;function Oe(e){var t=e.timestamps;return Object(S["last"])(t)}function ke(e){var t=e.messages,r=e.timestamps,a=e.threadTs,n=e.lastRead,i=e.reachedStart;var s=t[a];if(!s)return"0000000000.000000";var o=Object(S["filter"])(r,function(e){return e!==a});if(Object(Y["getReplyCount"])(s)<=4)return"0000000000.000000";var l=Object(S["takeWhile"])(o,function(e){return e<=n});if(i&&l.length<=2)return"0000000000.000000";if(l.length===o.length)return Object(S["first"])(Object(S["takeRight"])(l,2));return Object(S["last"])(l)}var Ee=ke;function je(e){var t=e.threads,r=e.minimumVisibleTsByThread,a=e.maximumVisibleTsByThread,n=e.firstReadThreadKey,i=e.isDoingGlobalRefresh,s=e.currentUserId,o=e.initialLastReadByThread,l=e.hasMore,c=e.logError,u=void 0===c?S["noop"]:c;var d=[];var p=[];if(i){d.push("global-loading");p.push({type:"loading"})}var v=Object(S["dropWhile"])(t,function(e){return e.threadKey!==n});var m=v.some(function(e){return Object(S["values"])(e.messages).some(function(t){if(!t){u("Missing message in "+e.threadKey);return false}return t.ts>o[e.threadKey]&&t.user!==s})});t.forEach(function(e){var t=e.channelId,s=e.threadTs,l=e.timestamps,c=e.threadKey,u=e.messages,v=e.reachedStart;var h=r[c];var f=a[c];if(!i&&!m&&c===n){d.push("divider-"+c);p.push({type:"divider"})}var g={channelId:t,threadTs:s,threadKey:c};var _=l.some(function(e){return e>f});d.push("heading-"+c);p.push(b()({type:"heading"},g));d.push("root-"+c);p.push(b()({type:"root"},g));var y=!v||Object(S["some"])(l,function(e){return e!==s&&e<h});if(y){d.push("load_older-"+c);p.push(b()({type:"load_older",messages:u},g))}l.forEach(function(t){if(t===s)return;if(t<h)return;if(t>f)return;var r=u[t];if(Object(Y["isHiddenInThread"])(r))return;var a=o&&t>o[e.threadKey];d.push(c+"-"+t);p.push(b()({type:"reply",ts:t,isNewReply:a},g))});if(_){d.push("load_newer-"+c);p.push(b()({type:"load_newer"},g))}d.push("footer-"+c);p.push(b()({type:"footer"},g))});if(l&&t){var h=Object(S["last"])(t);var f=h&&h.threadKey;d.push("loading_more_threads-"+f);p.push({type:"loading_more_threads"})}return{keys:d,rows:p}}var Ce=je;function Se(e){var t=Object(S["filter"])(e,"subscribed");var r=Object(S["sortBy"])(t,function(e){var t=e.maxMarkableTs>e.lastRead;return(t?1:0)+"-"+e.maxMarkableTs});return r.reverse()}var we=r(139);var Ie=r(1565);var Te={channelId:I["b"].string,threadTs:I["b"].string,replyUsers:I["b"].array,replyUsersCount:I["b"].number,featureReactAllThreads:I["b"].bool,firstItem:I["b"].bool,clogLinkClick:I["b"].func};var Ae={channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,featureReactAllThreads:false,firstItem:false,clogLinkClick:S["noop"]};var Ne=function(e){C()(t,e);function t(e){_()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clogClick=r.clogClick.bind(r);return r}E()(t,[{key:"clogClick",value:function e(){var t=this.props.clogLinkClick;t("CLICK_CHANNEL_NAME")}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,i=t.replyUsers,s=t.replyUsersCount,o=t.featureReactAllThreads,l=t.firstItem;if(!o)return null;var c=Object(Y["constructMsgPermalink"])(r,a);var u=N()("p-threads_view_header",{"p-threads_view_header--first":l});return n.a.createElement("div",{className:u},n.a.createElement(pe["a"],{href:c,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},n.a.createElement(we["a"],{channelId:r,className:"p-threads_view_header__channel_name"})),n.a.createElement(Ie["a"],{replyUsers:i,replyUsersCount:s,className:"p-threads_view_header__participant_list"}))}}]);return t}(a["Component"]);Ne.displayName="Header";Ne.defaultProps=Ae;function Pe(e,t){var r=t.channelId,a=t.threadTs;var n=Object(G["a"])(e,r,a);if(!n)return null;var i=Object(Y["getReplyUsers"])(n);var s=Object(Y["getReplyUsersCount"])(n);if(n.replies){i=Object(S["map"])(n.replies,"user");n.user&&i.push(n.user);s=Object(S["uniq"])(i).length}else n.user&&i.push(n.user);return{replyUsers:i,replyUsersCount:s,featureReactAllThreads:Object(F["isFeatureEnabled"])(e,"feature_react_all_threads")}}var Re=Object(o["connect"])(Pe)(Ne);var Me=r(55);var xe=r(1224);var De=r(1092);var Fe=r(762);var Le=r(925);var Be=r(926);var Ue=r(1093);var qe=r(1066);var Ge=r(1225);var He=r(1353);var We=r(922);var Ve=r(1095);var Ke=r(1215);var ze=r(1214);var Qe=r(1347);var Ye=r(1354);var Je=r(1355);var Xe=r(1356);var Ze={first:I["b"].bool,last:I["b"].bool,children:I["b"].node};var $e={first:false,last:false,children:void 0};var et=function(e){C()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"render",value:function e(){var t=this.props,r=t.first,a=t.last;var i=N()("p-threads_view__default_background",{"p-threads_view__default_background--first":r,"p-threads_view__default_background--last":a});return n.a.createElement("div",{className:i},this.props.children)}}]);return t}(a["PureComponent"]);et.displayName="ThreadsDefaultBackground";et.defaultProps=$e;var tt=et;var rt=new P["b"]("message_kit");var at={msg:I["b"].object.isRequired,className:I["b"].string,theme:I["b"].oneOf(["light","dense"]),clogLinkClick:I["b"].func,clogThreadEvent:I["b"].func,focused:I["b"].bool,renderActionsOffscreen:I["b"].bool};var nt={className:void 0,theme:"light",clogLinkClick:S["noop"],clogThreadEvent:S["noop"],focused:false,renderActionsOffscreen:false};var it=function(e){C()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Le["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Be["a"],{msg:t,relative:true,clickable:true},rt.t("Open in channel")),n.a.createElement("br",null),n.a.createElement(Ue["a"],{msg:t}),n.a.createElement(qe["a"],{msg:t,blocksContainerContext:Me["a"].all_threads}),n.a.createElement(Fe["b"],{msg:t}),n.a.createElement(xe["a"],{msg:t}),n.a.createElement(Ge["a"],{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(Xe["a"],null,n.a.createElement(Le["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",n.a.createElement(Ue["a"],{msg:t}),n.a.createElement(qe["a"],{msg:t,blocksContainerContext:Me["a"].all_threads}),n.a.createElement(Fe["b"],{msg:t}),n.a.createElement(xe["a"],{msg:t}),n.a.createElement(Ge["a"],{msg:t}))}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.theme,i=t.clogLinkClick,s=t.focused,o=t.renderActionsOffscreen,l=t.clogThreadEvent;var c="dense"===a;var u=N()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);var d=c?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement(Be["a"],{msg:r,relative:true,compact:true,clickable:true},rt.t("Open in channel"))):null;var p=c?"above":"default";var v=c?this.getCompactMessageBody(r):this.getMessageBody(r);return n.a.createElement(He["a"],{msg:r},n.a.createElement(tt,{first:true},n.a.createElement(We["a"],{msg:r,className:u},n.a.createElement(Ve["a"],{hovered:s},n.a.createElement(Ke["a"],{msg:r,showComment:true,showShare:false,showJump:true,messageContainerType:R["MESSAGE_CONTAINERS"].THREADS_VIEW,renderOffscreen:o,position:p,clogLinkClick:i,clogThreadEvent:l},n.a.createElement(Qe["a"],{msg:r},n.a.createElement(Ye["a"],{msg:r},n.a.createElement(ze["a"],{light:n.a.createElement(De["a"],{msg:r}),compact:d},n.a.createElement(Je["a"],{msg:r},v)))))))))}}]);return t}(a["PureComponent"]);it.displayName="RootMessage";var st=it;it.defaultProps=nt;var ot=r(1699);var lt=new P["b"]("threads");var ct={msg:I["b"].object.isRequired,className:I["b"].string,highlight:I["b"].bool,clearHighlight:I["b"].func,focused:I["b"].bool,renderActionsOffscreen:I["b"].bool,isNewReply:I["b"].bool,theme:I["b"].oneOf(["light","dense"]),clogThreadEvent:I["b"].func};var ut={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,isNewReply:false,theme:"light",clogThreadEvent:S["noop"]};var dt=function(e){C()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Le["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Be["a"],{msg:t,relative:true,clickable:true},lt.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),n.a.createElement("br",null),n.a.createElement(ot["a"],{msg:t},n.a.createElement(Ue["a"],{msg:t}),n.a.createElement(qe["a"],{msg:t,blocksContainerContext:Me["a"].all_threads}),n.a.createElement(Fe["b"],{msg:t}),n.a.createElement(xe["a"],{msg:t})),n.a.createElement(Ge["a"],{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(Xe["a"],null,n.a.createElement(Le["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",n.a.createElement(ot["a"],{msg:t},n.a.createElement(Ue["a"],{msg:t}),n.a.createElement(qe["a"],{msg:t,blocksContainerContext:Me["a"].all_threads}),n.a.createElement(Fe["b"],{msg:t}),n.a.createElement(xe["a"],{msg:t})),n.a.createElement(Ge["a"],{msg:t}))}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.isNewReply,c=t.theme,u=t.clogThreadEvent;var d="dense"===c;var p=N()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":l},this.props.className);var v=d?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement(Be["a"],{msg:r,relative:true,compact:true,clickable:true},lt.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null;var m=d?"above":"default";var h=d?this.getCompactMessageBody(r):this.getMessageBody(r);return n.a.createElement(He["a"],{msg:r},n.a.createElement(tt,null,n.a.createElement(We["a"],{msg:r,className:p,highlight:a,clearHighlight:i},n.a.createElement(Ve["a"],{hovered:s},n.a.createElement(Ke["a"],{msg:r,showComment:false,showShare:false,messageContainerType:R["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o,position:m,clogThreadEvent:u},n.a.createElement(Ye["a"],{msg:r,showBroadcast:true},n.a.createElement(ze["a"],{light:n.a.createElement(De["a"],{msg:r}),compact:v},n.a.createElement(Je["a"],{msg:r},h))))))))}}]);return t}(a["PureComponent"]);dt.displayName="ReplyMessage";var pt=dt;dt.defaultProps=ut;var vt=r(96);var mt=new P["b"]("threads");var ht={channelId:I["b"].string,threadTs:I["b"].string,minimumVisibleTs:I["b"].string,rootMsg:I["b"].object,messages:I["b"].object,loadOlderReplies:I["b"].func,featureReactAllThreads:I["b"].bool,theme:I["b"].oneOf(["light","dense"])};var ft={channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:S["noop"],featureReactAllThreads:false,theme:"light"};var bt=function(e){C()(t,e);function t(e){_()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isLoading:false};r.onClick=r.onClick.bind(r);return r}E()(t,[{key:"onClick",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.threadTs,i=r.loadOlderReplies;if(!this.state.isLoading&&i){this.setState(function(){return{isLoading:true}});i(a,n).then(function(){t.setState(function(){return{isLoading:false}})})}}},{key:"render",value:function e(){var t=this.props,r=t.minimumVisibleTs,a=t.rootMsg,i=t.messages,s=t.featureReactAllThreads,o=t.theme;if(!s)return null;var l="dense"===o;var c=[];var u=Object(Y["getMessageTs"])(a);var d=Object(Y["getLatestReply"])(a);Object(S["each"])(i,function(e,t){!Object(Y["isEphemeral"])(e)&&!Object(Y["isTempMsg"])(e)&&t!==u&&t<=d&&c.push(t)});var p=Object(Y["getReplyCount"])(a);var v=p-c.length;var m=c.filter(function(e){return e<r});var h=Object(S["clamp"])(v+m.length,0,_e);if(!h)return null;var f=N()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":l});return n.a.createElement(tt,null,n.a.createElement("div",{className:f},n.a.createElement(pe["a"],{onClick:this.onClick},mt.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:h})),this.state.isLoading?n.a.createElement(vt["a"],{size:"medium",className:"margin_left_25",inline:true}):null))}}]);return t}(a["Component"]);bt.displayName="LoadOlderButton";bt.defaultProps=ft;function gt(e,t){var r=t.channelId,a=t.threadTs,n=t.messages;var i=Object(G["a"])(e,r,a);return{rootMsg:i,messages:n,featureReactAllThreads:Object(F["isFeatureEnabled"])(e,"feature_react_all_threads")}}var _t=Object(o["connect"])(gt)(bt);var yt=new P["b"]("threads");var Ot={channelId:I["b"].string,threadTs:I["b"].string,maximumVisibleTs:I["b"].string,timestamps:I["b"].arrayOf(I["b"].string),loadNewerReplies:I["b"].func,featureReactAllThreads:I["b"].bool,theme:I["b"].oneOf(["light","dense"])};var kt={channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:S["noop"],featureReactAllThreads:false,theme:"light"};var Et=function(e){C()(t,e);function t(e){_()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}E()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.loadNewerReplies;n(r,a)}},{key:"render",value:function e(){var t=this.props,r=t.maximumVisibleTs,a=t.timestamps,i=t.featureReactAllThreads,s=t.theme;if(!i)return null;var o="dense"===s;var l=a.filter(function(e){return e>r});if(!l.length)return null;var c=yt.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:l.length});var u=N()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":o});return n.a.createElement(tt,null,n.a.createElement("div",{className:u},n.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),n.a.createElement(pe["a"],{onClick:this.onClick},c)))}}]);return t}(a["Component"]);Et.displayName="LoadNewerButton";Et.defaultProps=kt;function jt(e,t){var r=t.channelId,a=t.threadTs;var n=Object(Q["getThreadKey"])(r,a);var i=Object(q["getTimestampsByChannelId"])(e,n)||{timestamps:[]},s=i.timestamps;return{timestamps:s,featureReactAllThreads:Object(F["isFeatureEnabled"])(e,"feature_react_all_threads")}}var Ct=Object(o["connect"])(jt)(Et);var St=r(1851);function wt(e){return n.a.createElement(tt,{last:true},n.a.createElement("div",{className:"p-threads_view__footer"},n.a.createElement(St["a"],e)))}wt.displayName="Footer";var It=wt;var Tt=r(204);var At=r(81);var Nt=new P["b"]("threads");var Pt={featureReactAllThreads:I["b"].bool};var Rt={featureReactAllThreads:true};function Mt(e){var t=e.featureReactAllThreads;if(!t)return null;var r=Object(re["a"])();var a="115000769927";var i=Object(Tt["b"])({zdLocale:r,articleId:a});return n.a.createElement("div",{className:"p-threads_view_empty"},n.a.createElement("div",{className:"p-threads_view_empty__contents"},n.a.createElement("div",{className:"p-threads_view_empty__emoji"},n.a.createElement(At["b"],{text:":seedling:",emojiSize:At["a"].LARGE})),n.a.createElement("p",{className:"p-threads_view_empty__header"},Nt.t("Tend to your threads")),n.a.createElement("p",{className:"p-threads_view_empty__message"},Nt.t("Threads you\u2019re involved in will be collected right here.")," ",n.a.createElement("br",null),n.a.createElement(pe["a"],{href:i},Nt.t("Learn about threads")))))}Mt.displayName="ThreadsEmptyState";Mt.defaultProps=Rt;var xt=function e(t){var r=Object(F["isFeatureEnabled"])(t,"feature_react_all_threads");return{featureReactAllThreads:r}};var Dt=Object(o["connect"])(xt)(Mt);var Ft={className:I["b"].string,label:I["b"].string,showSpinner:I["b"].bool};var Lt={className:void 0,label:void 0,showSpinner:false};var Bt=function(e){C()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"render",value:function e(){var t=this.props,r=t.className,a=t.label,i=t.showSpinner;return n.a.createElement("div",{className:r},n.a.createElement("div",{className:"p-threads_view__divider_line"}),n.a.createElement("div",{className:"p-threads_view__divider_label"},i&&n.a.createElement(vt["a"],{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),a))}}]);return t}(a["PureComponent"]);Bt.displayName="Divider";var Ut=Bt;Bt.defaultProps=Lt;var qt=new P["b"]("threads");var Gt={slowLoadingMore:I["b"].bool};var Ht={slowLoadingMore:false};var Wt=function(e){C()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"render",value:function e(){var t=this.props.slowLoadingMore;return n.a.createElement("div",{className:"p-threads_view__loading_more_threads"},t?qt.t("Still loading... sorry for the long wait!"):qt.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}]);return t}(a["PureComponent"]);Wt.displayName="LoadingMoreThreadsIndicator";var Vt=Wt;Wt.defaultProps=Ht;var Kt=r(326);var zt=r(188);var Qt=r(28);var Yt=new P["b"]("threads");var Jt={totalNewThreads:I["b"].number,userHasUnreadThreads:I["b"].bool,onClick:I["b"].func,featureReactAllThreads:I["b"].bool};var Xt={totalNewThreads:0,userHasUnreadThreads:false,onClick:S["noop"],featureReactAllThreads:false};var Zt=function(e){C()(t,e);function t(e){_()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}E()(t,[{key:"onClick",value:function e(){this.props.onClick()}},{key:"render",value:function e(){var t=this.props,r=t.totalNewThreads,a=t.userHasUnreadThreads,i=t.featureReactAllThreads;if(!i)return null;if(!r)return null;if(!a)return null;var s=Yt.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:r});return n.a.createElement(Qt["c"],{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},s)}}]);return t}(a["Component"]);Zt.displayName="NewThreadsBanner";Zt.defaultProps=Xt;function $t(e){return{totalNewThreads:Object(D["getTotalNewThreads"])(e),userHasUnreadThreads:Object(F["isFeatureEnabled"])(e,"feature_incremental_unread_counts")?Object(zt["hasUnreadThreads"])(e):Object(Kt["hasUnreadThreads"])(e),featureReactAllThreads:Object(F["isFeatureEnabled"])(e,"feature_react_all_threads")}}var er=Object(o["connect"])($t)(Zt);var tr=r(3298);var rr="THREADS-VIEW";var ar=new P["b"]("threads");var nr=Object(de["b"])(st);var ir=Object(de["b"])(pt);var sr={threadKey:I["b"].string,channelId:I["b"].string,threadTs:I["b"].string,reachedStart:I["b"].bool,timestamps:I["b"].arrayOf(I["b"].string),messages:I["b"].objectOf(I["b"].object),lastRead:I["b"].string,subscribed:I["b"].bool,maxMarkableTs:I["b"].string};var or={threads:I["b"].arrayOf(I["b"].shape(sr)),threadsPresent:I["b"].bool,hasMore:I["b"].bool,refreshId:I["b"].string,currentUserId:I["b"].string,cursorTs:I["b"].string,refreshThreads:I["b"].func,loadMoreThreads:I["b"].func,truncateThreads:I["b"].func,logger:I["b"].shape({error:I["b"].func,info:I["b"].func}),requestReplies:I["b"].func,markThread:I["b"].func,markAllThreads:I["b"].func,featureAriaApplicationMode:I["b"].bool,theme:I["b"].oneOf(["light","dense"]),makeMessageSummary:I["b"].func,clearTotalNewThreads:I["b"].func,clogger:I["b"].object,allThreadsRefreshCount:I["b"].number,showThreadOrRefresh:I["b"].func,focusRequestedThreadKey:I["b"].string,setFocusRequestedThreadKey:I["b"].func,totalUnreadReplies:I["b"].number,featureOfflineMode:I["b"].bool,isOffline:I["b"].bool,userAttentionIsOnChat:I["b"].bool,removeFromSectionNavigation:I["b"].func,addToSectionNavigation:I["b"].func,setInitialActiveSection:I["b"].func};var lr={threads:void 0,threadsPresent:false,hasMore:true,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:S["noop"],loadMoreThreads:S["noop"],truncateThreads:S["noop"],logger:{error:S["noop"],info:S["noop"]},requestReplies:S["noop"],markThread:S["noop"],markAllThreads:S["noop"],featureAriaApplicationMode:false,theme:"light",makeMessageSummary:S["noop"],clearTotalNewThreads:S["noop"],clogger:{track:S["noop"]},allThreadsRefreshCount:void 0,showThreadOrRefresh:S["noop"],focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:S["noop"],totalUnreadReplies:void 0,featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,removeFromSectionNavigation:S["noop"],addToSectionNavigation:S["noop"],setInitialActiveSection:S["noop"]};var cr=function(e){C()(t,e);E()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,r){var a=t.threads,n=t.currentUserId,i=t.refreshId,s=t.logger;var o=r.minimumVisibleTsByThread,l=r.maximumVisibleTsByThread,c=r.initialLastReadByThread,u=r.firstReadThreadKey,d=r.threadKeysOrdered;if(i!==r.currentRefreshId){o={};l={};c={};u=null;d=[]}if(Object(S["isEmpty"])(d)){var p=Se(a);d=Object(S["map"])(p,"threadKey");if(r.currentRefreshId){var v=Object(S["map"])(a,"threadKey");Object(S["isEqual"])(d,v)||s.error(rr,"Thread order different after refreshing: "+d+" - "+v)}}if(!u){var m=Object(S["keyBy"])(a,"threadKey");u=Object(S["find"])(d,function(e){return m[e].maxMarkableTs<=m[e].lastRead})}var h={};a.forEach(function(e){if(o[e.threadKey])return;var t=Ee(e);h[e.threadKey]=t});var f={};a.forEach(function(e){var t=l[e.threadKey];if(t){if(!e.messages[t]){t=Object(S["findLast"])(e.timestamps,function(e){return e<t});f[e.threadKey]=t}var r=Object(S["filter"])(e.timestamps,function(e){return e>t});var a=Object(S["some"])(r,function(t){var r=e.messages[t];return r&&r.user===n});var i=Object(S["some"])(r,function(t){var r=e.messages[t];return Object(Y["isEphemeral"])(r)});if(!a&&!i)return}var s=Oe(e);f[e.threadKey]=s});var g={};a.forEach(function(e){if(c[e.threadKey])return;g[e.threadKey]=e.lastRead});if(Object(S["isEmpty"])(h)&&Object(S["isEmpty"])(f)&&Object(S["isEmpty"])(g)&&i===r.currentRefreshId&&u===r.firstReadThreadKey&&(d===r.threadKeysOrdered||Object(S["isEqual"])(d,r.threadKeysOrdered)))return null;return b()({},r,{currentRefreshId:i,firstReadThreadKey:u,threadKeysOrdered:d,minimumVisibleTsByThread:b()({},o,h),maximumVisibleTsByThread:b()({},l,f),initialLastReadByThread:b()({},c,g)})}}]);function t(e){_()(this,t);var r=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["a"])(r,["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getAriaLabelForRow","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onArrowKeyRight","onItemTabWithin","shouldIgnoreArrowKeys","logError","logInfo","focus"]);r.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:true,slowLoadingMore:false,errored:false,hasKeyboardFocus:false};r.pendingPromises=[];r.threadsEventSeqId=0;r.initializedTime=Date.now();r.clogThreadCloseHasBeenCalled=false;r.listRef=n.a.createRef();return r}E()(t,[{key:"componentDidMount",value:function e(){this.logInfo("mounting");this.clogThreadEvent({event:"THREADS_VIEW_OPEN"});this.loadThreads()}},{key:"shouldComponentUpdate",value:function e(t,r){if(!Object(ae["a"])(this.state,r))return true;var a=this.props,n=a.threads,i=h()(a,["threads"]);var s=t.threads,o=h()(t,["threads"]);if(!Object(ae["a"])(i,o))return true;var l=3;if(!Object(ae["a"])(n,s,l))return true;return false}},{key:"componentDidUpdate",value:function e(t){!t.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation();!this.props.userAttentionIsOnChat&&t.userAttentionIsOnChat&&this.props.removeFromSectionNavigation();t.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&false===this.loading&&this.reloadThreads();if(t.refreshId!==this.props.refreshId&&Object(S["isNumber"])(this.nextScrollTop)){this.listRef.current.scrollToOffset(this.nextScrollTop);this.nextScrollTop=null}}},{key:"componentWillUnmount",value:function e(){this.logInfo("unmounting");this.clogThreadCloseEvent("OTHER");this.pendingPromises.forEach(function(e){return e.cancel()});this.props.truncateThreads()}},{key:"onFocusEnter",value:function e(t){var r=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){var e=r.props.focusRequestedThreadKey;var t=r.listRef.current;if(!t||!e)return;var a=t.getActiveItem();var n=r.threadKeyForListKey(a);if(e&&n===e){r.logInfo("Focused "+e);r.props.setFocusRequestedThreadKey(null)}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onKeyDown",value:function e(t){var r=this;if(Object($["a"])(document.activeElement))return;if(!Object(ee["a"])(t))return;var a=this.getKeyboardFocusedThreadKey();if(!a)return;var n=Object(Q["decodeThreadKey"])(a),i=n.channelId,s=n.threadTs;var o=Object(te["a"])({viewContext:R["MESSAGE_CONTAINERS"].THREADS_VIEW,channelId:i,threadTs:s});if(o){var l=function e(){r.blur();o.focus()};Object(re["c"])()?setTimeout(l,0):l()}}},{key:"onArrowKeyRight",value:function e(){var t=this.getKeyboardFocusedThreadKey();var r=Object(Q["decodeThreadKey"])(t),a=r.channelId,n=r.threadTs;if(!a||!n)return;this.props.showThreadOrRefresh({channelId:a,threadTs:n,requestFocus:true});this.blur()}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"getKeyboardFocusedThreadKey",value:function e(){var t=this.listRef.current;if(!t)return null;var r=t.getInitialActiveItem();var a=this.threadKeyForListKey(r);return a}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var r=this.rows[t];if(!r||!r.type)return null;if("root"!==r.type&&"reply"!==r.type)return null;var a="root"===r.type?r.threadTs:r.ts;return this.props.makeMessageSummary({channelId:r.channelId,ts:a,hasFocus:this.state.hasKeyboardFocus,day:{ts:a,isFirstDay:false,isLastDay:false},viewContext:R["MESSAGE_CONTAINERS"].THREADS_VIEW})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object($["a"])(t.target))return true;return!this.state.hasKeyboardFocus}},{key:"threadKeyForListKey",value:function e(t){if(!t)return null;var r=this.keys.indexOf(t);var a=this.rows[r];if(a)return a.threadKey;return null}},{key:"focus",value:function e(){var t=this.listRef.current;t&&t.focus()}},{key:"blur",value:function e(){var t=this.listRef.current;t&&t.blur()}},{key:"isFocusableItem",value:function e(t){var r=t.index;var a=this.rows[r];if(!a)return false;var n=["root","reply","heading","load_older","load_newer"];return Object(S["includes"])(n,a.type)}},{key:"clogThreadCloseEvent",value:function e(t){if(this.clogThreadCloseHasBeenCalled)return;var r={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:t};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:r});this.clogThreadCloseHasBeenCalled=true}},{key:"incrementTrackingSeqId",value:function e(){this.threadsEventSeqId+=1}},{key:"clogThreadEvent",value:function e(t){var r=t.event,a=t.metadata;var n=this.props.clogger;n.track(r,b()({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},a));this.incrementTrackingSeqId()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.logError("Threads view componentDidCatch");this.props.logger.error(rr,t,"threads_view_did_catch")}},{key:"loadThreads",value:function e(){var t=this;this.loading&&this.logError("Unexpectedly already loading");if(!this.props.refreshThreads)return;this.loading=true;var r=this.props.refreshThreads({limit:ye,refreshId:"threads-view-refresh-"+Date.now()}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.maxTs;t.listRef&&t.listRef.current&&(t.nextScrollTop=t.listRef.current.getScrollTop());if(r){t.logInfo("marking all: "+r);t.props.markAllThreads({maxTs:r})}else t.logInfo("no threads to mark");t.setState(function(){return{isDoingGlobalRefresh:false,errored:false}})}).catch(function(e){t.setState(function(){return{errored:true}});t.logError("refreshThreads caught error");t.props.logger.error(rr,e,"threads_view_loading_error")}).finally(function(){t.loading=false;Object(S["remove"])(t.pendingPromises,r)});this.pendingPromises.push(r)}},{key:"reloadThreads",value:function e(){var t=this;this.logInfo("Reloading threads");this.setState(function(){return{currentRefreshId:null}},function(){t.listRef&&t.listRef.current&&t.listRef.current.scrollToOffset(0);t.props.clearTotalNewThreads();t.loadThreads()})}},{key:"tryAgain",value:function e(){var t=this;this.setState(function(e){return b()({},e,{errored:false})},function(){return t.loadThreads()})}},{key:"loadOlderReplies",value:function e(t,r){var a=this;var n=Object(Q["getThreadKey"])(t,r);var i=Object(S["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadOlderReplies");return Promise.resolve()}this.logInfo("Loading older replies in "+n);var s=i.timestamps;var o=this.state.minimumVisibleTsByThread[i.threadKey];var l=Object(S["filter"])(s,function(e){return e<o&&e!==r});if(l.length>=_e){this.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,v()({},n,Object(S["first"])(Object(S["takeRight"])(l,_e))))})});return Promise.resolve()}if(i.reachedStart){this.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,v()({},n,"0000000000.000000"))})});return Promise.resolve()}var c=this.props.requestReplies({channelId:t,threadTs:r,latest:Object(S["first"])(s),limit:_e}).then(function(e){var t=e.msgs;var r=Object(S["first"])(Object(S["takeRight"])(t,_e-l.length));a.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,v()({},n,r.ts))})})}).finally(function(){Object(S["remove"])(a.pendingPromises,c)});this.pendingPromises.push(c);return c}},{key:"loadNewerReplies",value:function e(t,r){var a=this;var n=Object(Q["getThreadKey"])(t,r);var i=Object(S["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadNewerReplies");return}this.setState(function(e){return b()({},e,{maximumVisibleTsByThread:b()({},e.maximumVisibleTsByThread,v()({},n,Oe(i)))})},function(){a.logInfo("Marking "+n+" to "+i.maxMarkableTs);a.props.markThread({channelId:t,ts:r,lastRead:i.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})})}},{key:"fetchAround",value:function e(){return false}},{key:"fetchPre",value:function e(){return false}},{key:"fetchPost",value:function e(){var t=this;var r=this.props,a=r.threads,n=r.hasMore,i=r.cursorTs;if(this.loading||!n||!a||!a.length||!i)return false;var s=setTimeout(function(){t.setState(function(e){return b()({},e,{slowLoadingMore:true})})},R["SLOW_API_RESPONSE_TIME"]);this.loading=true;this.logInfo("Loading more from "+i);var o=this.props.loadMoreThreads({currentTs:i,limit:ye}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.threads;if(!a)return;t.setState(function(e){var t=Object(S["map"])(r,"threadKey");return{threadKeysOrdered:Object(S["uniq"])([].concat(d()(e.threadKeysOrdered),d()(t)))}})}).finally(function(){var e=t.state.slowLoadingMore;t.loading=false;Object(S["remove"])(t.pendingPromises,o);clearTimeout(s);e&&t.setState(function(e){return b()({},e,{slowLoadingMore:false})})});this.pendingPromises.push(o);return o}},{key:"determineFocusItemForRender",value:function e(t,r){var a=this.props.focusRequestedThreadKey;if(a)return"root-"+a;var n=this.listRef.current;if(!n)return null;var i=n.getInitialActiveItem();if(!i)return null;var s=Object(S["startsWith"])(i,"load_older-")||Object(S["startsWith"])(i,"load_newer-");if(s&&!Object(S["includes"])(r,i)){var o=t.indexOf(i);if(-1===o)return null;var l=t[o-1];var c=r.indexOf(l);if(-1===c)return null;var u=r[c+1];if(u)return u}return null}},{key:"logInfo",value:function e(t){this.props.logger.info(rr,t)}},{key:"logError",value:function e(t){this.props.logger.error(rr,t)}},{key:"renderRow",value:function e(t,r){var a=r.hasFocus;var i=this.rows[t];var s=this.state,o=s.minimumVisibleTsByThread,l=s.maximumVisibleTsByThread,c=s.slowLoadingMore,u=s.hasKeyboardFocus;var d=this.props,p=d.theme,v=d.featureOfflineMode,m=d.isOffline;var h=N()("p-threads_view__divider",{"p-threads_view__divider--first":0===t});var f=ar.t("Loading threads\u2026");switch(i.type){case"heading":return n.a.createElement(Re,{channelId:i.channelId,threadTs:i.threadTs,firstItem:0===t,clogLinkClick:this.clogThreadCloseEvent});case"root":return n.a.createElement(nr,{channelId:i.channelId,ts:i.threadTs,theme:p,clogLinkClick:this.clogThreadCloseEvent,focused:a,renderActionsOffscreen:u,clogThreadEvent:this.clogThreadEvent});case"load_older":return n.a.createElement(_t,{messages:i.messages,channelId:i.channelId,threadTs:i.threadTs,minimumVisibleTs:o[i.threadKey],loadOlderReplies:this.loadOlderReplies,theme:p});case"load_newer":return n.a.createElement(Ct,{channelId:i.channelId,threadTs:i.threadTs,maximumVisibleTs:l[i.threadKey],loadNewerReplies:this.loadNewerReplies,theme:p});case"reply":return n.a.createElement(ir,{channelId:i.channelId,ts:i.ts,minimumVisibleTs:o[i.threadKey],isNewReply:i.isNewReply,theme:p,focused:a,renderActionsOffscreen:u,clogThreadEvent:this.clogThreadEvent});case"divider":return n.a.createElement(Ut,{className:h,label:ar.t("You\u2019re up to date")});case"loading":return n.a.createElement(Ut,{className:h,label:f,showSpinner:true});case"footer":return n.a.createElement(It,{channelId:i.channelId,threadTs:i.threadTs,focusInputOnMount:false,viewContext:R["MESSAGE_CONTAINERS"].THREADS_VIEW,clogThreadEvent:this.clogThreadEvent});case"loading_more_threads":if(v&&m)return n.a.createElement(be["a"],{caption:ar.t("Go online to load more threads.")});return n.a.createElement(Vt,{slowLoadingMore:c});default:this.logError("Unknown row type "+i.type);return null}}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-threads_view__top_banners"},n.a.createElement(le["a"],null),n.a.createElement(ce["a"],null,n.a.createElement(ue["a"],null)),n.a.createElement(er,{onClick:this.reloadThreads})),n.a.createElement(he["a"],null))}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.threads,i=r.threadsPresent,s=r.currentUserId,o=r.hasMore,l=r.featureAriaApplicationMode,c=r.totalUnreadReplies,u=r.featureOfflineMode,d=r.isOffline;var p=this.state,v=p.minimumVisibleTsByThread,m=p.maximumVisibleTsByThread,h=p.firstReadThreadKey,f=p.threadKeysOrdered,b=p.isDoingGlobalRefresh,g=p.initialLastReadByThread,_=p.errored;if(_)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement("div",{className:"p-threads_view"},n.a.createElement(me["a"],{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},ar.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",n.a.createElement("br",null),ar.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(pe["a"],{href:"https://slack.com/help/contact"},t)}))));if(u&&d&&!i)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(fe["a"],{caption:ar.t("Go online to get the latest threads.")}));if(!i)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(ve["a"],null));var y=Object(S["keyBy"])(a,"threadKey");var O=Object(S["compact"])(Object(S["map"])(f,function(e){return y[e]}));var k=this.keys;var E=Ce({threads:O,minimumVisibleTsByThread:v,maximumVisibleTsByThread:m,firstReadThreadKey:h,isDoingGlobalRefresh:b,currentUserId:s,initialLastReadByThread:g,hasMore:o,logError:this.logError}),j=E.rows,C=E.keys;this.rows=j;this.keys=C;var w=this.determineFocusItemForRender(k,this.keys);if(0===O.length)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(Dt,null));var I=this.keys.filter(function(e){return Object(S["startsWith"])(e,"footer-")});var A=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}];var N=void 0;N=ar.t("Threads");Object(S["isNumber"])(c)&&(N=ar.t("Threads, {totalUnreadReplies, plural, =0 {no new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:c}));var P=n.a.createElement(se["a"],{id:R["MESSAGE_CONTAINERS"].THREADS_VIEW},n.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),n.a.createElement(T["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(oe["a"],{ref:t.listRef,width:r,height:a,keys:t.keys,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,persistentKeys:I,getAriaLabelForRow:t.getAriaLabelForRow,ariaLabel:N,useAriaApplicationMode:l,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onItemTabWithin:t.onItemTabWithin,keyCommands:A,activeItem:w})})));if(Object(x["a"])())return P;return n.a.createElement(ie["a"],{component:this,order:.1},P)}}]);return t}(a["Component"]);cr.displayName="ThreadsView";cr.defaultProps=lr;var ur=Object(x["a"])()?Object(z["a"])(cr,"ThreadsView",{index:0}):cr;function dr(e){var t=Object(Z["a"])({state:e});var r=Object(M["a"])({state:e});var a=Object(D["getThreads"])(e);var n=Object(S["compact"])(Object(S["map"])(a,function(r){var a=r.threadKey;var n=Object(Q["decodeThreadKey"])(a),i=n.channelId,s=n.threadTs;var o=Object(U["d"])(e,i);if(!o||Object(ne["e"])(o)){t.warn("Skipping "+a+" in unknown or non-existent channel");return null}if(Object(J["isPublicChannel"])(o)&&!Object(J["isMemberOfChannel"])(o)){t.warn("Skipping "+a+" in non-member public channel");return null}var l=Object(q["getPotentiallyOutdatedTimestamps"])(e,a)||{timestamps:[],reachedStart:true},c=l.timestamps,u=l.reachedStart;var d={};var p=Object(G["a"])(e,i,s);if(!p){t.warn("Skipping "+a+" with missing root message");return null}d[s]=p;c.forEach(function(t){var r=Object(G["a"])(e,i,t);r&&(d[t]=r)});var v=Object(B["getSubscriptionState"])(e,{channelId:i,ts:s});return{threadKey:a,channelId:i,threadTs:s,reachedStart:u,timestamps:c,messages:d,lastRead:v.lastRead,subscribed:v.subscribed,maxMarkableTs:Object(X["a"])(e,i,c)||s}}));return{logger:t,clogger:r,featureAriaApplicationMode:Object(F["isFeatureEnabled"])(e,"feature_aria_application_mode"),threadsPresent:void 0!==a,threads:n,hasMore:Object(D["getThreadsHasMore"])(e),refreshId:Object(D["getThreadsRefreshId"])(e),cursorTs:Object(D["getThreadsCursorTs"])(e),currentUserId:Object(F["getCurrentUserId"])(e),theme:Object(H["a"])(e),allThreadsRefreshCount:Object(D["getAllThreadsRefreshCounter"])(e),focusRequestedThreadKey:Object(D["getFocusRequestedThreadKey"])(e),totalUnreadReplies:Object(D["getTotalUnreadReplies"])(e),featureOfflineMode:Object(F["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(K["c"])(e),userAttentionIsOnChat:Object(ge["e"])(e)}}function pr(e){return{refreshThreads:function t(){return e(D["refreshThreads"].apply(void 0,arguments))},loadMoreThreads:function t(){return e(D["loadMoreThreads"].apply(void 0,arguments))},truncateThreads:function t(){return e(D["truncateThreads"].apply(void 0,arguments))},requestReplies:function t(){return e(L["requestReplies"].apply(void 0,arguments))},clearTotalNewThreads:function t(){return e(D["clearTotalNewThreads"].apply(void 0,arguments))},markThread:function t(){return e(B["markThread"].apply(void 0,arguments))},markAllThreads:function t(){return e(W["c"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(V["a"].apply(void 0,arguments))},showThreadOrRefresh:function t(){return e(L["showThreadOrRefresh"].apply(void 0,arguments))},setFocusRequestedThreadKey:function t(){return e(D["setFocusRequestedThreadKey"].apply(void 0,arguments))}}}var vr=Object(o["connect"])(dr,pr)(ur);var mr=vr;var hr=r(163);var fr=function e(t,r){if(!t)throw new Error("mountThreadsView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(hr["a"],null,n.a.createElement(mr,null))),r)};var br=function e(t){s.a.unmountComponentAtNode(t)};var gr=r(44);Object(gr["a"])("interop.mountThreadsView",fr);Object(gr["a"])("interop.unmountThreadsView",br)},,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(13);var h=r(2);var f=r(173);var b=r(12);var g=r(71);var _=r(16);var y=r.n(_);var O=r(1757);var k=r(196);var E=r(716);var j=r(273);var C=r(1087);var S=r(193);var w=r(277);var I=r(758);var T=r(22);var A=r(128);var N=r(42);var P=r(10);var R=r(312);var M=r(374);var x=r(1824);var D=r(1567);var F=r(66);var L=r(802);var B=r(20);var U=Object(B["b"])("TS.view.resize_sig.add",h["noop"],true);var q=Object(B["b"])("TS.view.resize_sig.remove",h["noop"],true);var G=r(30);var H=r(1858);var W=r(1855);var V=r(3990);var K=new P["b"]("search");var z=new P["b"]("jumper");var Q=new P["b"]("keys");var Y={close:v["b"].func.isRequired,interfaceMode:v["b"].string.isRequired,displayQuery:v["b"].string,searchAutocompleteSuggestionAccept:v["b"].func.isRequired,searchPrecache:v["b"].func.isRequired,setRequestFromEditableRequest:v["b"].func.isRequired,setSearchInputBoxUserQuery:v["b"].func.isRequired,userQuery:v["b"].string.isRequired,visible:v["b"].bool.isRequired,telemeter:v["b"].object,isCustomTitlebarShown:v["b"].bool,lastOpenMethod:v["b"].string};var J={displayQuery:"",telemeter:g["d"],isCustomTitlebarShown:false,lastOpenMethod:""};var X=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(r,["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchAutocompleteSuggestionDelete","onSearchInputBoxEscape","onClickRefreshSearch"]);r.state={appBannerHeightPx:r.getBannerHeight()};r.onSearchInputBoxFocus=Object(h["throttle"])(function(){return r.props.searchPrecache()},6e4);r.onResize=Object(h["throttle"])(r.onResize.bind(r),50);U(r.onResize);r.inputRef=p.a.createRef();return r}s()(t,[{key:"componentDidMount",value:function e(){Object(M["a"])()&&Object(N["areDragRegionsRequired"])()&&Object(h["get"])(window,"desktop.app.updateDragRegion")&&window.desktop.app.updateDragRegion([])}},{key:"componentWillUnmount",value:function e(){Object(M["a"])()&&Object(N["areDragRegionsRequired"])()&&Object(x["a"])();q(this.onResize)}},{key:"onResize",value:function e(){var t=this;this.setState(function(){return{appBannerHeightPx:t.getBannerHeight()}})}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(L["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchAutocompleteSuggestionDelete",value:function e(){this.inputRef.current&&this.inputRef.current.getWrappedInstance().focusTexty()}},{key:"onSearchInputBoxEscape",value:function e(){this.onSearchClose();return true}},{key:"onSearchClose",value:function e(){Object(F["g"])()||this.props.close()}},{key:"onClickRefreshSearch",value:function e(){this.props.setRequestFromEditableRequest({fetchSuggestions:true})}},{key:"getBannerHeight",value:function e(){var t=window.$&&window.$("#banner");return t&&t.height()||0}},{key:"clear",value:function e(){this.props.setSearchInputBoxUserQuery({textyString:""})}},{key:"renderMode",value:function e(){switch(this.props.interfaceMode){case E["a"].SEARCH_RESULTS:return this.renderSearchResults();case E["a"].EDIT:default:return this.renderQueryEdit()}}},{key:"renderSearchResults",value:function e(){return p.a.createElement(V["a"],{onClickRefreshSearch:this.onClickRefreshSearch})}},{key:"renderQueryEdit",value:function e(){return p.a.createElement("div",{className:"c-search-autocomplete","data-qa":"search_autocomplete"},p.a.createElement(H["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept,onDelete:this.onSearchAutocompleteSuggestionDelete}))}},{key:"renderCmdKHint",value:function e(){if("key_button"===this.props.lastOpenMethod){var t=Object(G["isMac"])()?Q.t("\u2318K"):Q.t("Ctrl+K");return p.a.createElement("div",{className:"c-search_modal__tip_wrapper"},p.a.createElement("div",{className:"c-search_modal__tip"},z.rt("<strong>Tip:</strong> Open this faster with {cmd_shortcut}",{cmd_shortcut:t})))}return null}},{key:"render",value:function e(){var t={top:0,left:0,bottom:0,right:0};var r=y()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===E["a"].EDIT,"c-search_modal--custom_titlebar":this.props.isCustomTitlebarShown});var a=K.t("Search");return p.a.createElement(w["a"],{ariaRole:"dialog",ariaLabel:a,isOpen:this.props.visible,position:"top-left",targetBounds:t,onClose:this.onSearchClose,shouldFade:false,overlayClassName:r,allowanceX:0,allowanceY:0,shouldFocusAfterRender:true,shouldReturnFocusAfterClose:false,contentStyle:{marginTop:this.state.appBannerHeightPx}},p.a.createElement("div",{className:"c-search__input_and_close"},p.a.createElement(W["a"],{autoFocus:true,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus,ref:this.inputRef}),p.a.createElement(A["a"],{className:"c-search__input_and_close__close",onClick:this.props.close,"aria-label":K.t("Cancel"),"data-qa":"search_input_close"},p.a.createElement(T["b"],{type:"times"}))),this.renderMode(),this.renderCmdKHint())}}]);return t}(d["PureComponent"]);X.displayName="Search";X.defaultProps=J;var Z=function e(t){return{interfaceMode:Object(k["f"])(t),displayQuery:Object(j["getSearchInputBoxDisplayQuery"])(t),userQuery:Object(j["getSearchInputBoxUserQuery"])(t),visible:Object(k["t"])(t),telemeter:Object(g["c"])({state:t}),isCustomTitlebarShown:Object(S["isCustomTitlebarShown"])(t),lastOpenMethod:Object(k["h"])(t)}};var $={searchAutocompleteSuggestionAccept:D["a"],searchPrecache:function e(){return R["o"].apply(void 0,arguments)},setRequestFromEditableRequest:function e(){return f["setRequestFromEditableRequest"].apply(void 0,arguments)},setSearchInputBoxUserQuery:function e(){return C["a"].apply(void 0,arguments)},close:function e(){return I["a"].apply(void 0,arguments)}};var ee=Object(m["connect"])(Z,$)(X);var te="IMPROVED_SEARCH";var re={logger:v["b"].object.isRequired,telemeter:v["b"].object.isRequired,resetSearchAfterUnknownUIError:v["b"].func.isRequired};var ae=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={hasError:false};r.retryRender=Object(h["throttle"])(r.retryRender.bind(r),100,{leading:false});return r}s()(t,[{key:"componentDidUpdate",value:function e(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function e(t,r){this.props.telemeter.count("search_full_render_fail",1);this.props.logger.error(te,"Error caught by ProtectedSearch "+r.componentStack,t,{subtype:"search"});this.setState(function(){return{hasError:true}});this.props.resetSearchAfterUnknownUIError()}},{key:"retryRender",value:function e(){this.setState(function(){return{hasError:false}})}},{key:"render",value:function e(){if(this.state.hasError)return null;return p.a.createElement(ee,null)}}]);return t}(d["PureComponent"]);ae.displayName="ProtectedSearch";var ne=function e(t){return{logger:Object(b["a"])({state:t}),telemeter:Object(g["c"])({state:t})}};var ie={resetSearchAfterUnknownUIError:function e(){return f["resetSearchAfterUnknownUIError"].apply(void 0,arguments)}};var se=Object(m["connect"])(ne,ie)(ae);var oe=t["a"]=se},,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(3981);Object(a["a"])("interop.openInviteMemberToChannelDialog",function(e){return TS.redux.dispatch(Object(n["a"])(e))})},,function(e,t,r){"use strict";r.r(t);r.d(t,"fetchHighlightsListForChannel",function(){return d});r.d(t,"fetchTopContributorsAndRelatedChannels",function(){return p});var a=r(2);var n=r.n(a);var i=r(0);var s=r(15);var o=r(12);var l=r(293);var c=r(123);var u=r(1042);var d=Object(s["b"])("Fetch highlights items list for channel",function(e,t,r){return e(Object(u["c"])(r)).then(function(t){var n=Object(a["get"])(t,"highlightMsgs.messages",[]);if(Object(a["isEmpty"])(n))return[];var i=e(Object(l["a"])({imsgs:n,channelId:r}));e(Object(c["a"])(i));return i}).catch(function(e){Object(o["a"])({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"});throw e})});d.propTypes={channelId:i["b"].string};var p=Object(s["b"])("Fetch highlights items list for channel",function(e,t,r){return e(Object(u["d"])(r)).then(function(e){var t=Object(a["get"])(e,"resp.top_contributors.users",[]);var r=Object(a["get"])(e,"resp.similar_channels.channels",[]);return{topContributors:t,similarChannels:r}}).catch(function(e){Object(o["a"])({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_top_contributors"});throw e})});p.propTypes={channelId:i["b"].string}},function(e,t,r){"use strict";var a=r(0);var n=r(15);var i=r(24);var s=r(17);var o=r(113);var l=r(1364);var c=Object(n["b"])("Adds app to channel by member id",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.channelId;if(!a||!n)return;var c=Object(i["d"])(t(),a);Object(s["isAppUser"])(c)?e(Object(l["a"])({appUserId:a,channelId:n,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}})):e(Object(o["K"])({channelId:n,users:a}))});c.propTypes={memberId:a["b"].string.isRequired,channelId:a["b"].string.isRequired};t["a"]=c},,,,,,,,function(e,t,r){"use strict";r.d(t,"a",function(){return a});function a(e){return!!(e&&"-"!==e)}},,,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(13);var l=r(88);var c=r.n(l);var u=r(163);var d=r(277);var p=r(119);var v=r(27);var m=r(4270);var h=function e(t,r,a,i){if(!t)throw new Error("unmountNewFileMenu must be called with a teamId parameter");var l=Object(v["d"])(t);var c=n()({onMenuItemSelected:a.onMenuItemSelected},i);Object(p["a"])(s.a.createElement(o["Provider"],{store:l},s.a.createElement(u["a"],null,s.a.createElement(d["a"],n()({shouldFade:false},i),s.a.createElement(m["a"],n()({menuProps:c},a))))),r)};var f=function e(t){c.a.unmountComponentAtNode(t)};var b={mountNewFileMenu:h,unmountNewFileMenu:f};var g=r(44);Object(g["a"])("interop.mountNewFileMenu",h)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(27);var d=r(44);var p=r(26);var v=r.n(p);var m=r(6);var h=r.n(m);var f=r(7);var b=r.n(f);var g=r(8);var _=r.n(g);var y=r(9);var O=r.n(y);var k=r(2);var E=r(0);var j=r(4);var C=r(48);var S=r(258);var w=r(150);var I=r(701);var T=r(10);var A=r(135);var N=r(51);var P=r(4371);var R=new T["b"]("external_shared_channels");var M={};var x=function(e){O()(t,e);function t(){h()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"renderBetaPill",value:function e(){return s.a.createElement(P["a"],{className:"p-shared_channels__beta_pill"},R.t("BETA"))}},{key:"renderBetaAlert",value:function e(){return s.a.createElement(A["a"],{level:"info",type:"inline",className:"margin_bottom_25 margin_top_75"},R.rt("Shared channels are currently in beta, and some features may not be supported. <a>Learn more</a>",null,function(e){var t=e.text;return s.a.createElement(N["a"],{href:"https://get.slack.help/hc/articles/115004152843?utm_medium=in-prod&utm_source=in-prod&utm_campaign=cd_in-prod_in-prod_all_en_Grid-dashboard_cr-open-beta_ym-201906",target:"_blank",rel:"noopener noreferrer"},t)}))}},{key:"render",value:function e(){return s.a.createElement("div",{className:"c-shared_channels_indent"},s.a.createElement("div",{className:"p-shared_channels__header"},s.a.createElement("h1",null,R.t("External Sharing")),this.renderBetaPill()),this.renderBetaAlert())}}]);return t}(s.a.Component);x.displayName="SharedChannelsHeader";var D=x;var F=r(1321);var L=r(392);var B=new T["b"]("external_shared_channels");var U={searchQuery:E["b"].string.isRequired,onSearchInputChange:E["b"].func.isRequired};var q={};var G=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=300;r.onInputChange=r.onInputChange.bind(r);r.onSearchInputChangeDebounced=Object(k["debounce"])(function(e){r.props.onSearchInputChange(e)},a);return r}b()(t,[{key:"onInputChange",value:function e(t){var r=t.target.value||"";this.onSearchInputChangeDebounced(r)}},{key:"render",value:function e(){var t=B.t("Search organizations...");return s.a.createElement("div",null,s.a.createElement(L["a"],{className:"p-app_management_filter_search_bar",placeholder:t,icon:"search",autoFocus:false,isLoading:false,onChange:this.onInputChange,value:this.props.searchQuery,size:"small"}))}}]);return t}(i["PureComponent"]);G.displayName="SharedChannelsSearch";G.defaultProps=q;var H=G;var W=new T["b"]("external_shared_channels");var V={orgsCount:E["b"].number.isRequired,searchQuery:E["b"].string.isRequired,onSearchInputChange:E["b"].func.isRequired};function K(e){var t=e.orgsCount,r=e.searchQuery,a=e.onSearchInputChange;var n=W.t("Organizations");t>0&&(n=W.t("{orgsCount, plural, =1 {# Organization} other {# Organizations}}",{orgsCount:t}));return s.a.createElement("div",{className:"p-shared_channels padding_top_100"},s.a.createElement(F["a"],{"data-qa":"shared-channels-action-bar",title:n,actions:[s.a.createElement(H,{searchQuery:r,onSearchInputChange:a})]}))}K.displayName="SharedChannelsActionBar";var z=K;var Q=r(920);var Y=r(1785);var J=new T["b"]("external_shared_channels");function X(){return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},J.rt("No Results")),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},J.rt("Slack couldn't find any organizations matching your search."))))}X.displayName="EmptySearchResults";var Z=X;var $=r(4112);var ee=r.n($);var te=r(4113);var re=r.n(te);var ae=r(4095);var ne=r.n(ae);var ie=r(4114);var se=r.n(ie);var oe=r(50);var le=new T["b"]("external_shared_channels");var ce={workspaces:E["b"].array.isRequired};var ue=function e(t,r){return ee()(re()(function(e){var t=e.workspace_name;return t}),se()(1,r))(t)};var de=function e(t){var r=t.length;var a=ue(t);if(r>50)return le.t("{rem, plural, =1 {{spaces}} other {{spaces} and # others...}}",{spaces:ne()(", ")(a),rem:r-51});if(3===r)return le.t("{secondWorkSpace} and {thirdWorkspace}",{secondWorkSpace:a[0],thirdWorkspace:a[1]});if(2===r)return a[0];return ne()(", ")(a)};var pe=function e(t,r){var a=le.t("{len, plural, =1 {# other} other {# others...}}",{len:t-1});return s.a.createElement(oe["c"],{tip:r},s.a.createElement("span",{className:"sk_black p-shared_channels__table_tooltip"},a))};pe.displayName="renderWorkspaces";var ve=function e(t){var r=t.workspaces;var a=r.length;var n=de(r);return s.a.createElement("div",null,s.a.createElement("span",{className:"sk_black"},r[0].workspace_name),a>=2&&le.rt("<span> {ampSym} </span>",{ampSym:"&"}),a>=2&&pe(a,n))};ve.displayName="SharedChannelTableWorkspaces";var me=ve;var he=r(22);var fe=r(28);var be=r(66);var ge=new T["b"]("external_shared_channels");var _e={teamName:E["b"].string.isRequired,onStopSharing:E["b"].func.isRequired};var ye=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}b()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.onStopSharing,i=r.teamName;return s.a.createElement(be["f"],n()({},t,{width:"auto"}),s.a.createElement(be["b"],{danger:true,label:ge.rt("Stop sharing with {teamName}",{teamName:i}),onSelected:function e(){return a()}}))}},{key:"render",value:function e(){return s.a.createElement(be["e"],{renderMenu:this.renderMenu,position:"bottom-right"},s.a.createElement(fe["c"],null,s.a.createElement(he["b"],{type:"ellipsis"})))}}]);return t}(i["PureComponent"]);ye.displayName="SharedChannelsRowMenu";var Oe=ye;var ke=new T["b"]("external_shared_channels");var Ee={isLoading:E["b"].bool,onSortChange:E["b"].func,organizations:E["b"].arrayOf(E["b"].object).isRequired,onStopSharing:E["b"].func,onRequestNextPage:E["b"].func};var je={isLoading:false,onStopSharing:k["noop"],onSortChange:k["noop"],onRequestNextPage:k["noop"]};var Ce="asc";var Se="desc";var we="caret_down";var Ie="caret_up";var Te={};Te[Ce]=we;Te[Se]=Ie;var Ae=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={headers:[],rowData:[],sortBy:"",sortDir:""};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);return r}b()(t,[{key:"componentDidMount",value:function e(){this.rebuildHeaders()}},{key:"componentWillReceiveProps",value:function e(t){var r=t.organizations;if(r&&r.length){var a={rowData:this.formatData(r)};this.setState(function(){return a})}}},{key:"rebuildHeaders",value:function e(){var t={headers:this.buildHeaders()};this.setState(function(){return t})}},{key:"buildHeaders",value:function e(){var t=this;var r=[{id:"header_organization",value:"Organization",className:"p-shared_channels__table__org",sortable:true},{id:"header_channels",value:"Channels",className:"p-shared_channels__table__channels"},{id:"header_workspaces",value:"Workspaces",className:"p-shared_channels__table__workspaces"},{id:"header_row_menu",value:"",className:"p-shared_channels__table__row_menu",noHover:true,sortable:false}].map(function(e){if(!e.sortable)return e;return n()({},e,{iconType:t.determineSortState(e.id,e),onClick:t.headerItemOnClick})});return r}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r&&r.defaultSortType||Ce;var o=Te[s];if(!n||n!==t)return o;var l=void 0;l=i?i===Ce?we:Ie:Te[s];return l}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var s=this.props.onSortChange;var o=n;var l=i;if(t.id===n)l=i&&i!==Ce?Ce:Se;else{o=t.id;l=t.defaultSortType?t.defaultSortType===Ce?Se:Ce:Se}var c=this.state.rowData;c.sort(function(e,t){var r=l===Se?1:-1;if(e.items[0].value>t.items[0].value)return-1*r;if(e.items[0].value<t.items[0].value)return 1*r;return 0});var u={rowData:c,sortBy:o,sortDir:l};this.setState(function(){return u},function(){s&&s(l);r.rebuildHeaders()})}},{key:"formatChannelValue",value:function e(t){var r=t.public_channel_count||0;var a=t.private_channel_count||0;var n=r+a;var i=void 0;i=a?ke.t("{totalCount, plural, =1 {# channel} other {# channels}} ({privateCount, plural, =1 {# private} other {# private}})",{totalCount:n,privateCount:a}):ke.t("{totalCount, plural, =1 {# channel} other {# channels}}",{totalCount:n});return s.a.createElement("span",null,i)}},{key:"formatData",value:function e(t){var r=this;if(!t)return[];var a=this.props.onStopSharing;var n=t.map(function(e){var t="row_"+e.team_id;return{id:t,items:[{value:s.a.createElement(Y["a"],{dimension:34,team:{name:e.team_name,domain:e.team_domain,icon:e.team_icon}}),className:"p-shared_channels__table__org",id:t+"_team_name"},{value:r.formatChannelValue(e),className:"p-shared_channels__table__channels",id:t+"_channels"},{value:s.a.createElement(me,{workspaces:e.connected_workspaces}),className:"p-shared_channels__table__workspaces",id:t+"_workspaces"},{value:s.a.createElement(Oe,{teamName:e.team_name,onStopSharing:function t(){return a(e)}}),className:"p-shared_channels__table__row_menu",id:t+"_row_menu"}]}});return n}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.headers,n=r.paddingBottom,i=r.rowData;var o=this.props,l=o.isLoading,c=o.organizations;if(!l&&!c.length)return s.a.createElement(Z,null);return s.a.createElement("div",{style:{paddingBottom:n},className:"c-shared_channels_table_indent"},s.a.createElement(Q["a"],{autoHeight:true,headers:a,isLoading:l,newQuery:l,onRequestNextPage:this.props.onRequestNextPage,rows:i,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(i["PureComponent"]);Ae.displayName="SharedChannelsTableView";Ae.defaultProps=je;var Ne=Ae;var Pe=r(84);var Re=r(126);var Me=r(54);var xe=new T["b"]("external_shared_channels");var De={onStopSharing:E["b"].func.isRequired,orgItem:E["b"].shape({team_id:E["b"].string.isRequired,team_name:E["b"].string.isRequired,private_channel_count:E["b"].number.isRequired,public_channel_count:E["b"].number.isRequired}).isRequired};var Fe={hasClickedStopSharing:false,isButtonDisabled:true,isCheckboxChecked:false};var Le=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state=n()({},Fe);r.onStopSharing=r.onStopSharing.bind(r);r.handleCheckboxChange=r.handleCheckboxChange.bind(r);return r}b()(t,[{key:"onStopSharing",value:function e(){this.setState(function(){return n()({},Fe,{hasClickedStopSharing:true})});this.props.onStopSharing()}},{key:"handleCheckboxChange",value:function e(t){var r=!!t.target.checked;this.setState(function(){return{isCheckboxChecked:r,isButtonDisabled:!r}})}},{key:"render",value:function e(){var t=this.state,r=t.hasClickedStopSharing,a=t.isButtonDisabled,n=t.isCheckboxChecked;var i=this.props.orgItem;var o=i.team_name;var l=xe.rt("Stop sharing with {teamName}",{teamName:o});var c=xe.t("Stop sharing with {teamName}",{teamName:o});var u=xe.rt("Yes, stop sharing with {teamName}",{teamName:o});var d=xe.rt("<strong>This can\u2019t be undone.</strong> You won\u2019t be able to reshare any of these channels.");var p=xe.rt(" This will not cancel any pending shared channel invitations.");return s.a.createElement(Pe["a"],{goButtonType:"danger",cancelText:xe.t("Cancel"),goButtonIsDisabled:a,goButtonIsPending:r,goButtonText:xe.t("Stop Sharing"),goOnEnterPressed:!a,onGo:this.onStopSharing,title:l,titleAria:c,useSlackScrollbar:false},s.a.createElement(A["a"],{level:"error",type:"inline",className:"margin_bottom_100"},d),s.a.createElement("p",{"data-qa":"stop_sharing_description"},xe.rt("This will disconnect all the channels you currently share with {teamName}. Members of the two organizations will no longer be able to direct message each other.",{teamName:o}),p),s.a.createElement("p",{className:"margin_bottom_25"},xe.t("You\u2019re disconnecting...")),s.a.createElement("ul",null,i.public_channel_count>0&&s.a.createElement("li",{"data-qa":"public_channel_count"},xe.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:i.public_channel_count})),i.private_channel_count>0&&s.a.createElement("li",{"data-qa":"private_channel_count"},xe.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:i.private_channel_count})),s.a.createElement("li",null,xe.t("All direct and group messages"))),s.a.createElement("p",null,xe.t("Note: each organization will keep separate copies of these channels, and can continue using their copies.")),s.a.createElement(Me["a"],{text:u,type:"inline",cursor:"pointer"},s.a.createElement(Re["a"],{"data-qa":"stop_sharing_confirm",checked:n,onChange:this.handleCheckboxChange})))}}]);return t}(s.a.Component);Le.displayName="StopSharingDialog";var Be=Le;var Ue=r(157);var qe=new T["b"]("external_shared_channels");var Ge={disconnectionStatus:E["b"].oneOf(["error","success"]).isRequired,teamName:E["b"].string,onCloseComplete:E["b"].func};var He={teamName:"[teamName]",onCloseComplete:k["noop"]};var We=function e(t){var r=t.disconnectionStatus,a=t.teamName,n=t.onCloseComplete;if(!r)return null;var i="";"error"===r&&(i=s.a.createElement("span",null,qe.t("Something\u2019s gone wrong. Mind trying again in a moment?")));"success"===r&&(i=s.a.createElement("span",null,qe.rt("Disconnecting all channels and conversations with {teamName}",{teamName:s.a.createElement("span",{className:"p-shared_channels__stopped_sharing_toast"},a)})));return s.a.createElement(Ue["b"],{position:"bottom-right",onCloseComplete:n,shouldAutoFade:true},i)};We.displayName="StopSharingToast";We.defaultProps=He;var Ve=We;var Ke=r(3078);var ze=r(1575);var Qe=new T["b"]("external_shared_channels");function Ye(e){var t=e.orgName;var r=s.a.createElement(ze["a"],{href:"https://get.slack.help/hc/en-us/articles/115004151203-create-shared-channels"},Qe.t("Learn more about shared channels"));return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},Qe.rt("{orgName} isn't sharing any channels",{orgName:t})),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},Qe.rt("When your organization shares a channel with another organization, you\u2019ll see that connection here. {learnMoreUrl}",{learnMoreUrl:r}))))}Ye.displayName="NoSharedChannels";var Je=Ye;var Xe={featureSharedChannels:E["b"].bool.isRequired,searchConnectedOrgs:E["b"].func.isRequired,disconnectSharedTeam:E["b"].func.isRequired,openModal:E["b"].func.isRequired,closeModal:E["b"].func.isRequired,enqueueToast:E["b"].func.isRequired,orgName:E["b"].string.isRequired};var Ze={};var $e="asc";var et=function(e){O()(t,e);function t(e){h()(this,t);var r=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={orgsCount:0,searchQuery:"",sortDir:$e,organizations:[],isLoading:false,nextPageId:"",initCount:null};r._isMounted=false;r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.handleRequestNextPage=r.handleRequestNextPage.bind(r);r.handleTableSortChange=r.handleTableSortChange.bind(r);r.openStopSharingDialog=r.openStopSharingDialog.bind(r);r.stopSharingWorkspace=r.stopSharingWorkspace.bind(r);return r}b()(t,[{key:"componentDidMount",value:function e(){if(!this.props.featureSharedChannels)return;this._isMounted=true;this.fetchSharedChannels()}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"handleSearchInputChange",value:function e(t){var r={searchQuery:t.trim(),nextPageId:""};this.setState(function(){return r},this.fetchSharedChannels)}},{key:"handleTableSortChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;this.setState(function(){return{sortDir:t}},this.fetchSharedChannels)}},{key:"fetchSharedChannels",value:function e(){var t=this;this.setState(function(){return{isLoading:true}},function(){var e=t.state,r=e.searchQuery,a=e.nextPageId,n=e.sortDir,i=e.initCount;var s={searchQuery:r,nextPageId:a,sortDir:n};t.props.searchConnectedOrgs(s).then(function(e){var r=e.organizations,a=e.nextCursor;if(t._isMounted){var n=r.length;t.setState(function(){return{organizations:r,nextPageId:a,orgsCount:n,isLoading:false,initCount:null===i?n:i}})}}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"handleRequestNextPage",value:function e(){var t=this;if(!this.state.nextPageId)return;this.setState(function(){return{isLoading:true}},function(){var e=t.state,r=e.searchQuery,a=e.nextPageId,n=e.sortDir;var i={searchQuery:r,nextPageId:a,sortDir:n};t.props.searchConnectedOrgs(i).then(function(e){var r=e.organizations,a=e.nextCursor;t._isMounted&&t.setState(function(e){return{organizations:[].concat(v()(e.organizations),v()(r)),orgsCount:e.organizations.length+r.length,nextPageId:a}})}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"removeOrg",value:function e(t){var r=this.state.organizations.filter(function(e){return e.team_id!==t});this._isMounted&&this.setState(function(){return{organizations:r,orgsCount:r.length}})}},{key:"showSharingStatusToast",value:function e(t,r){this.props.enqueueToast({element:s.a.createElement(Ve,{disconnectionStatus:r,teamName:t,onCloseComplete:k["noop"]})})}},{key:"stopSharingWorkspace",value:function e(t,r){var a=this;this.props.disconnectSharedTeam({teamId:t}).then(function(){a.props.closeModal();a.removeOrg(t);a.showSharingStatusToast(r,"success")}).catch(function(){console.log("error while stop sharing");a.showSharingStatusToast(r,"error")})}},{key:"openStopSharingDialog",value:function e(t){var r=this;var a=function e(){r.stopSharingWorkspace(t.team_id,t.team_name)};this.props.openModal({element:s.a.createElement(Be,{onStopSharing:a,orgItem:t,openModal:this.props.openModal})})}},{key:"renderTableView",value:function e(){var t=this.props.orgName;var r=this.state,a=r.orgsCount,n=r.searchQuery,o=r.initCount,l=r.organizations,c=r.isLoading;if(0===o)return s.a.createElement(Je,{orgName:t});return s.a.createElement(i["Fragment"],null,s.a.createElement(z,{onSearchInputChange:this.handleSearchInputChange,orgsCount:a,searchQuery:n}),s.a.createElement(Ne,{isLoading:c,onStopSharing:this.openStopSharingDialog,onRequestNextPage:this.handleRequestNextPage,onSortChange:this.handleTableSortChange,organizations:l}),s.a.createElement(I["a"],null))}},{key:"render",value:function e(){var t=this.props.featureSharedChannels;if(!t)return null;return s.a.createElement("div",{className:"p-shared_channels padding_top_200"},s.a.createElement(D,null),this.renderTableView())}}]);return t}(i["PureComponent"]);et.displayName="SharedChannels";et.defaultProps=Ze;var tt=function e(t){return{featureSharedChannels:!Object(j["isFeatureEnabled"])(t,"feature_shared_channels_block_large_orgs")}};var rt={openModal:C["openModal"],closeModal:C["closeModal"],enqueueToast:w["enqueueToast"],searchConnectedOrgs:S["q"],disconnectSharedTeam:S["h"]};var at=Object(c["connect"])(tt,rt)(et);Object(d["a"])("interop.sharedChannels",{render:function e(t,r,a){if(!t)throw new Error("sharedChannels render must be called with a teamId parameter");var i=Object(u["d"])(t);var o=a.org.enterprise.name;l.a.render(s.a.createElement(c["Provider"],{store:i},s.a.createElement(at,n()({},a,{orgName:o}))),r)},stop:function e(t){l.a.unmountComponentAtNode(t)}})},,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(0);var f=r(13);var b=r(2);var g=r(1757);var _=r(4);var y=r(68);var O=r(34);var k=r(195);var E=r(22);var j=r(66);var C=r(1045);var S=r(1513);var w=r(21);var I=r(20);var T=Object(I["b"])("TS.client.ui.files.backButtonOnClick");var A=Object(I["b"])("TS.client.ui.files.chooseFile");var N=r(10);var P=r(45);var R=r(12);var M=r(160);var x=r(134);var D=r(73);var F=r(864);var L=r(35);var B=r(31);var U=r(23);var q=Object(M["e"])("Opens the docs Gantry app in a new window",function(e,t){var r=t();var a=Object(D["a"])(r);var n=Object(L["d"])(r);var i=Object(B["getTeamId"])(n);var s=Object(U["a"])(r);if(!Object(x["a"])(a))return;var o={origin_team:s||i,origin_channel:a};e(Object(F["b"])({pathname:"/docs/"+i,queryStringParams:o}))});q.propTypes=h["b"].object;var G=r(1057);var H=r(1828);var W=r(15);var V=r(365);var K=r(138);var z=r(48);var Q=new N["b"]("file-upload");var Y={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink"};function J(e){var t=e.type,r=e.featureBoxContentPicker,a=e.proceedToNextDialog;var n=r?Q.t("Your file can\u2019t be added"):"";var i="";switch(t){case Y.SINGLE_LINK_MISSING:i=r?Q.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case Y.MULTIPLE_LINK_MISSING:i=r?Q.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case Y.WEBLINK:i=r?Q.t("Apologies! Links from Box can\u2019t be added this way yet."):"";break;default:return null}var s=a!==b["noop"]?function(){Object(b["defer"])(function(){a()})}:b["noop"];return m.a.createElement(V["a"],{title:n,onGo:s},m.a.createElement("p",null,i))}J.displayName="BoxLinkAlert";J.defaultProps={type:Y.SINGLE,proceedToNextDialog:b["noop"],featureBoxContentPicker:false};var X=Object(K["a"])("feature_box_content_picker")(J);var Z=Object(M["e"])("Display Box Link Alert error",function(e,t,r){return e(Object(z["openModal"])({element:m.a.createElement(X,r)}))});Z.propTypes={};var $=Z;var ee=r(282);var te=r(1700);var re=r(455);var ae=r(30);var ne={url:h["b"].string.isRequired,windowFeatures:h["b"].object,hidden:h["b"].bool,processEvent:h["b"].func};var ie={width:590,height:520};var se="REMOTE-FILE-PICKER";var oe="fp_";var le=function e(t,r){return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.resolve,i=a.reject;if(!Object(ae["isSSB"])()){if(e.source!==t)return;if(e.origin!==window.location.origin)return}if(!e.data||e.data._sourceId!==r)return;e.data.ok&&n(e.data);var s=new Error("Data not OK");s.data=e.data;i(s)}};var ce=function e(t){return new Promise(function(e,r,a){var n=void 0;var i=function a(i){var s=function t(r){e(r);n()};var o=function e(t){r(t);n()};try{t(i,{resolve:s,reject:o})}catch(e){o(e)}};n=function e(){return window.removeEventListener("message",i)};a(n);window.addEventListener("message",i)})};var ue=Object(W["b"])("Open third-party file picker window and handle callback",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.hidden,i=r.url,s=r.windowFeatures,o=r.processEvent;var l=Object(R["a"])({getState:t,label:se});var c=Object(U["b"])(t());var u=n()({},ie,s,{parentTeamId:c});Object(ae["isSSB"])()&&window.desktop&&(window.desktop.delegate.canOpenURLInWindow(i)||l.error(se,"Trying to open remote file picker URL in SSB but URL is not whitelisted: "+i));var d=Object(b["uniqueId"])(oe);var p=i+(i.includes("?")?"&":"?")+"source_id="+d;var v=void 0;var m=function e(){return v.cancel()};var h=void 0;var f=void 0;try{if(Object(ae["isSSB"])()){h=a?Object(F["c"])(p,{show:false,skipTaskbar:true,frame:false,opacity:0,transparent:true,focusable:false,parentTeamId:c}):Object(F["c"])(p,u);h.addListener("close",m)}else if(a){f=document.createElement("iframe");f.setAttribute("data-qa","picker-frame");f.src=p;f.style.cssText="display:none";document.body.appendChild(f);h=f.contentWindow}else{h=Object(F["c"])(p,u);h&&h.addEventListener("beforeunload",m)}if(!h)return Promise.reject(new Error("Unable to open window"))}catch(e){return Promise.reject(e)}v=ce(o||le(h,d));v.finally(function(){f?f.remove():h&&h.close()}).catch(b["noop"]);return v});ue.propTypes=ne;var de=ue;var pe=new N["b"]("files");var ve={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])})};var me=function e(t){if(!Object(b["isPlainObject"])(t))return false;if("file"!==t.type)return false;if(!Object(b["isString"])(t.name))return false;if(!Object(b["isPlainObject"])(t.shared_link))return false;if(!Object(b["isString"])(t.shared_link.url))return false;return true};var he=function e(t){var r=ae["isDev"]?"A06147X5W":"A0F82E57C";var a=Object(L["d"])(t);return Object(B["getTeamUrl"])(a,"/apps/"+r)};var fe=Object(W["b"])("Open a window to pick a Box file",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,i=r.metadata;var s=Object(_["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker");var o=Object(_["isFeatureEnabled"])(t(),"feature_box_content_picker");if(!s||!o)return Object(ee["k"])(a,n,i);var l=t();var c=Object(U["b"])(l);var u=location.origin+"/files/import/box?team="+c;return e(de({url:u,windowFeatures:{height:675,width:925}})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.chosen_files,s=void 0===r?[]:r;var o=[];var l=[];var c=[];s.forEach(function(e){e&&(me(e)?o.push({name:e.name,link:e.shared_link.url,is_box:true}):"web_link"===e.type?c.push({name:e.name,url:e.url}):l.push(e))});var u=o.length?function(){return e(Object(te["a"])({files:o,initialChannelId:a,threadTs:n,metadata:i}))}:b["noop"];var d=c.length?function(){return e($({type:Y.WEBLINK,proceedToNextDialog:u}))}:u;if(l.length>0)return e($({type:s.length>1?Y.MULTIPLE_LINK_MISSING:Y.SINGLE_LINK_MISSING,proceedToNextDialog:d}));if(c.length)return d();return u()}).catch(function(t){if(t&&t.data&&t.data.error)switch(t.data.error){case"no_access_token":case"unauthorized":e(Object(re["addOrFlashEphemeralBotMsg"])({ephemeralType:re["EphemeralTypes"].boxFilePickerError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:o?pe.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:he(l)}):""}}));break;default:break}throw t})});fe.propTypes=ve;var be=fe;var ge=r(63);var _e=r.n(ge);var ye={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])})};var Oe=function e(t){if(!t||"object"!==("undefined"===typeof t?"undefined":_e()(t)))return false;if("string"!==typeof t.name)return false;if("number"!==typeof t.bytes)return false;if("string"!==typeof t.link)return false;if(t.icon&&"string"!==typeof t.icon)return false;return true};var ke=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.resolve,n=r.reject;if("https://www.dropbox.com"!==t.origin)return;var i=void 0;try{i="string"===typeof t.data?JSON.parse(t.data):t.data}catch(e){return}if(!i||"object"!==("undefined"===typeof i?"undefined":_e()(i)))return;switch(i.method){case"files_selected":Object(b["isArray"])(i.params)&&Object(b["every"])(i.params,Oe)&&a({chosen_files:i.params});n(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":a({chosen_files:[]});break;default:break}};var Ee=void 0;var je=Object(W["b"])("Open a window to pick a Box file",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,i=r.metadata;if(!Object(_["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object(ee["l"])(a,n,i);var s=t();var o=Object(U["b"])(s);Ee&&Ee.isPending()&&Ee.cancel();var l=location.origin+"/files/import/dropbox?team="+o;Ee=e(de({url:l,processEvent:ke,windowFeatures:{height:552,width:640}}));return Ee.then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.chosen_files,s=void 0===r?[]:r;var o=s.map(function(e){return{name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:true}});if(o.length)return e(Object(te["a"])({files:o,initialChannelId:a,threadTs:n,metadata:i}));return null})});je.propTypes=ye;var Ce=je;var Se=r(5);var we=r.n(Se);var Ie=r(4492);var Te=r(253);var Ae=new N["b"]("files");var Ne={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])}),reason:h["b"].string};var Pe="GDRIVE_FILE_PICKER";var Re={FILENAME_TOO_LONG:"filename_too_long",UNIDENTIFIED_EXTERNAL_URL:"unidentified_external_url",FILE_TYPE_HAS_NO_HANDLER:"file_type_has_no_handler"};var Me=Object(W["b"])("Open a window to pick a GDrive file",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,i=r.metadata,s=r.reason;if(!Object(_["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object(ee["i"])(a,n,i);var o=t();var l=Object(U["b"])(o);var c=location.origin+"/files/import/gdrive?team="+l;return e(de({url:c,windowFeatures:{height:675}})).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=r.chosen_files;var c=Date.now();Promise.map(l,function(r){return e(Object(Te["s"])({channels:a,threadTs:n,link:r.url,reason:s||"open-gdrive-file-picker"})).then(function(){var e;var t=Object(P["a"])({state:o});t.track(w["l"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},we()(e,w["d"].type,w["o"].EXTERNAL),we()(e,w["d"].duration,Date.now()-c),we()(e,w["d"].has_upload_message,false),we()(e,w["d"].file_count,1),we()(e,w["d"].retry_count,0),we()(e,w["d"].upload_size,r.sizeBytes?r.sizeBytes:0),we()(e,w["d"].retry_reason,""),we()(e,w["d"].did_disconnect_during_upload,false),we()(e,w["d"].file_upload_action,i&&i.fileUploadAction),we()(e,w["d"].file_upload_src,i&&i.fileUploadSrc),e))}).catch(function(r){var i=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.text,s=r.ephemeralType;return e(Object(re["addOrFlashEphemeralBotMsg"])({ephemeralType:s||re["EphemeralTypes"].gdriveShareFileError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:i||Ae.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"app_management_modal"})}}))};var s=r&&r.data&&r.data.error;if(s===Re.FILENAME_TOO_LONG)return i({text:"Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."});var o=[Re.FILE_TYPE_HAS_NO_HANDLER,Re.UNIDENTIFIED_EXTERNAL_URL];if(o.includes(s)&&r.args&&r.args.link)return e(Object(Ie["a"])({channel:a,thread_ts:n,text:r.args.link,unfurl_links:false,unfurl_media:false})).then(function(){return i({ephemeralType:re["EphemeralTypes"].fileTypeHasNoHandler,text:Ae.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")})}).catch(i);Object(R["a"])({getState:t}).error(Pe,r);return i()})})})});Me.propTypes=Ne;var xe=Me;var De=r(1443);var Fe=new N["b"]("files");var Le={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])}),reason:h["b"].string};var Be="OneDrive_plus_button_import_failure";var Ue={AUTH_REQUIRED:"auth_required",ONENOTE_NOT_SUPPORTED:"onenote_not_supported",POPUP_BLOCKED:"popupOpen"};var qe=function e(t){var r=Object(L["d"])(t);return Object(B["getTeamUrl"])(r,ae["isDev"]?"apps/A061CBSP3":"apps/A53TM6XA9")};var Ge=Object(W["b"])("Open a window to pick a OneDrive file",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs,i=r.metadata,s=r.reason;if(!Object(_["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object(ee["j"])(a,n,i);var o=t();var l=Object(U["b"])(o);var c=location.origin+"/files/import/onedrive?team="+l;return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;if(403===t)throw new Error(Ue.AUTH_REQUIRED)}).then(function(){return e(de({url:c,hidden:true}))}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.chosen_files;var l=Date.now();return Promise.map(r,function(t){return e(Object(Te["s"])({channels:a,threadTs:n,link:t,reason:s||"open-onedrive-file-picker"})).then(function(){var e;var t=Object(P["a"])({state:o});t.track(w["l"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},we()(e,w["d"].type,w["o"].EXTERNAL),we()(e,w["d"].duration,Date.now()-l),we()(e,w["d"].has_upload_message,false),we()(e,w["d"].file_count,1),we()(e,w["d"].retry_count,0),we()(e,w["d"].upload_size,0),we()(e,w["d"].retry_reason,""),we()(e,w["d"].did_disconnect_during_upload,false),we()(e,w["d"].file_upload_action,i&&i.fileUploadAction),we()(e,w["d"].file_upload_src,i&&i.fileUploadSrc),e))}).catch(function(e){e.subtype="files.uploadExternal";throw e})})}).catch(function(r){var i=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.text,s=r.ephemeralType;return e(Object(re["addOrFlashEphemeralBotMsg"])({ephemeralType:s||re["EphemeralTypes"].onedriveSdkError,message:{channel:a,thread_ts:n,slackbot_feels:"sad_surprise",text:i||Fe.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.")}}))};var s=r&&(r.data&&r.data.error||r.message);if(s===Ue.AUTH_REQUIRED)return i({text:Fe.t("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <{url}|OneDrive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using OneDrive in Slack>.",{url:qe(o)})});if(s===Ue.ONENOTE_NOT_SUPPORTED)return i({text:Fe.t("It seems like we\u2019re not able to import OneNote notebooks.")});if(s===Ue.POPUP_BLOCKED)return e(Object(De["updateEnablePopupsBannerVisibility"])(true));Object(R["a"])({getState:t}).error(Be,r);return i()})});Ge.propTypes=Le;var He=Ge;var We=r(208);var Ve=r(38);var Ke=r(428);var ze=r(568);var Qe=r(49);var Ye=r(60);var Je=Object(W["b"])("Creates and opens a legacy Post",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.openInBrowser;if(!Object(Qe["a"])()){Object(ee["b"])(null,a);return}var n=t();var i=Object(L["d"])(n);var s=Object(B["getTeamUrl"])(i,"/files/create/post"+location.search);var o=Object(U["a"])(n);s=Object(Ye["setUrlQueryStringValue"])(s,"origin_team",o||i.id);var l=Object(D["a"])(n);s=Object(Ye["setUrlQueryStringValue"])(s,"origin_channel",Object(x["a"])(l)?l:"");Object(ze["a"])(s)});Je.defaultProps={openInBrowser:true};Je.propTypes={openInBrowser:h["b"].bool};var Xe=r(3421);var Ze=new N["b"]("menu_file");var $e={channelId:h["b"].string.isRequired,threadTs:h["b"].string,viewContext:h["b"].string,disableFileUploadsPref:h["b"].string,menuProps:h["b"].object,featureDocs:h["b"].bool,featureSonicInputs:h["b"].bool,featureSonicSnippets:h["b"].bool,hiddenFileInputRef:h["b"].object,clogger:h["b"].object.isRequired,logger:h["b"].object.isRequired,createDocPost:h["b"].func,createAndOpenLegacyPost:h["b"].func.isRequired,showBoxMenuItem:h["b"].bool,showDropboxMenuItem:h["b"].bool,showGdriveMenuItem:h["b"].bool,showOneDriveMenuItem:h["b"].bool,openSnippetDialog:h["b"].func,openCreateGDocDialog:h["b"].func,openBoxFilePicker:h["b"].func,openOnedriveFilePicker:h["b"].func,openDropboxFilePicker:h["b"].func,openGdriveFilePicker:h["b"].func,featureBoxContentPicker:h["b"].bool,featureSonicCloudFilesPicker:h["b"].bool,featureOfflineMode:h["b"].bool.isRequired,isOffline:h["b"].bool.isRequired,featureModernGdriveCreate:h["b"].bool};var et={threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureDocs:false,featureSonicInputs:false,featureSonicSnippets:false,hiddenFileInputRef:void 0,createDocPost:b["noop"],showBoxMenuItem:false,showDropboxMenuItem:false,showGdriveMenuItem:false,showOneDriveMenuItem:false,openSnippetDialog:b["noop"],openCreateGDocDialog:b["noop"],openBoxFilePicker:b["noop"],openOnedriveFilePicker:b["noop"],openDropboxFilePicker:b["noop"],openGdriveFilePicker:b["noop"],featureBoxContentPicker:false,featureSonicCloudFilesPicker:false,featureModernGdriveCreate:false};var tt=function(e){p()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.activeCloudServices=[];Object(g["a"])(r,["selectFileFromComputer","createDoc","createSnippet","createLegacyPost","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices"]);return r}l()(t,[{key:"selectFileFromComputer",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.viewContext,i=t.hiddenFileInputRef,s=t.clogger,o=t.logger;if(i&&i.current){i.current.click();s.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})}else Object(Ve["a"])()?o.error("MSG_INPUT_FILE_BTN","Missing hidden input"):A(r,a,n)}},{key:"createDoc",value:function e(){this.props.createDocPost()}},{key:"createSnippet",value:function e(){var t=this.props,r=t.clogger,a=t.channelId,n=t.viewContext,i=t.threadTs;r.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});var s=Object(We["a"])({viewContext:n,channelId:a,threadTs:i});this.props.openSnippetDialog({initialText:s&&s.getDisplayValue?s.getDisplayValue():"",initialContents:s&&s.getContents?s.getContents():void 0,initialChannelId:a,threadTs:i,viewContext:n});s&&s.clear()}},{key:"createLegacyPost",value:function e(t){var r=Object(Ke["a"])(t);this.props.createAndOpenLegacyPost({openInBrowser:r});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_space"}}})}},{key:"createGDRiveDocument",value:function e(){this.props.openCreateGDocDialog({type:"document",displayType:this.props.featureSonicInputs?Ze.t("Document"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}},{key:"createGDRiveSpreadsheet",value:function e(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:this.props.featureSonicInputs?Ze.t("Spreadsheet"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}},{key:"createGDRivePresentation",value:function e(){this.props.openCreateGDocDialog({type:"presentation",displayType:this.props.featureSonicInputs?Ze.t("Presentation"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}},{key:"handleBoxFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;var n={fileUploadAction:w["m"].PLUS_MENU,fileUploadSrc:w["n"].BOX};return this.props.openBoxFilePicker({channelId:r,threadTs:a,metadata:n})}},{key:"handleDropboxFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;var n={fileUploadAction:w["m"].PLUS_MENU,fileUploadSrc:w["n"].DROPBOX};return this.props.openDropboxFilePicker({channelId:r,threadTs:a,metadata:n})}},{key:"handleGdriveFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;var n={fileUploadAction:w["m"].PLUS_MENU,fileUploadSrc:w["n"].GOOGLE_DRIVE};return this.props.openGdriveFilePicker({channelId:r,threadTs:a,metadata:n,reason:"cloud-files-menu/gdrive"})}},{key:"handleOnedriveFileProvider",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs;var n={fileUploadAction:w["m"].PLUS_MENU,fileUploadSrc:w["n"].ONEDRIVE};return this.props.openOnedriveFilePicker({channelId:r,threadTs:a,metadata:n,reason:"cloud-files-menu/onedrive"})}},{key:"renderMultipleCloudServices",value:function e(){var t=this.props,r=t.featureSonicCloudFilesPicker,a=t.featureOfflineMode,n=t.isOffline;var i={};var s=this.props;i.box=s.showBoxMenuItem;i.dropbox=s.showDropboxMenuItem;i.gdrive=s.showGdriveMenuItem;i.onedrive=s.showOneDriveMenuItem;var o=[{name:"box",props:{label:Ze.t("Box",{fallbackHash:"239ca5767afac9641593464ce02bc454d6ac07a9",fallbackHashNs:"files"}),icon:m.a.createElement(E["b"],{type:"box"}),onSelected:this.handleBoxFileProvider,enableForSonic:this.props.featureBoxContentPicker,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:Ze.t("Dropbox",{fallbackHash:"ac88abd7dfaa8f7a7ddc7b890eb6757030e093f4",fallbackHashNs:"files"}),icon:m.a.createElement(E["b"],{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,enableForSonic:true,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:Ze.t("Google Drive",{fallbackHash:"07c2964c41f409a224efb389f282268e4928b85f",fallbackHashNs:"files"}),icon:m.a.createElement(E["b"],{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,enableForSonic:true,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:Ze.t("OneDrive",{fallbackHash:"80753c986574153732103504426f45909268f96b",fallbackHashNs:"files"}),icon:m.a.createElement(E["b"],{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,enableForSonic:true,dataQa:"onedrive_picker_menu_item"}}];this.activeCloudServices=Object(b["filter"])(o,function(e){return i[e.name]?i[e.name]:null});var l=Object(b["map"])(this.activeCloudServices,function(e,t){return m.a.createElement(j["b"],{key:t,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected,className:r&&e.props.enableForSonic?"":Object(S["b"])(),disabled:a&&n,showOfflineIcon:a&&n,"data-qa":e.props.dataQa},r&&e.props.enableForSonic?null:m.a.createElement(S["a"],null))});return l}},{key:"renderCreateNewMenuItems",value:function e(){var t=this.props,r=t.featureDocs,a=t.featureSonicSnippets,n=t.showGdriveMenuItem,i=t.threadTs,s=t.featureOfflineMode,o=t.isOffline,l=t.featureModernGdriveCreate;var c=Ze.t("Post");var u=!i&&m.a.createElement(j["b"],{key:"create-new-post",label:c,icon:m.a.createElement(E["b"],{type:"create-post"}),onSelected:r?this.createDoc:this.createLegacyPost,disabled:s&&o,showOfflineIcon:s&&o,"data-qa":"create_new_doc"});var d=(a&&Object(Ve["a"])()||!i)&&m.a.createElement(j["b"],{key:"create-new-snippet",label:Ze.t("Code or text snippet"),icon:m.a.createElement(E["b"],{type:"create-snippet"}),onSelected:this.createSnippet,className:a?void 0:Object(S["b"])(),disabled:s&&o,showOfflineIcon:s&&o,"data-qa":"create_new_snippet"},a?null:m.a.createElement(S["a"],null));var p=!n||i&&!Object(Ve["a"])()?[]:[(d||u)&&m.a.createElement(j["d"],{key:"gdrive-separator"}),m.a.createElement(j["c"],{key:"gdrive-header",label:Ze.t("Google Drive")}),m.a.createElement(j["b"],{key:"gdrive_doc",label:Ze.t("Document"),icon:m.a.createElement(E["b"],{type:"google-drive",className:"p-new_file_menu__gdoc_icon"}),onSelected:this.createGDRiveDocument,className:l?"undefined":Object(S["b"])(),disabled:s&&!Object(S["b"])()&&o,showOfflineIcon:s&&o,"data-qa":"google_doc_menu_item"},l?null:m.a.createElement(S["a"],null)),m.a.createElement(j["b"],{key:"gdrive_sheet",label:Ze.t("Spreadsheet"),icon:m.a.createElement(E["b"],{type:"google-drive",className:"p-new_file_menu__gsheet_icon"}),onSelected:this.createGDRiveSpreadsheet,className:l?void 0:Object(S["b"])(),disabled:s&&!Object(S["b"])()&&o,showOfflineIcon:s&&o,"data-qa":"google_sheet_menu_item"},l?null:m.a.createElement(S["a"],null)),m.a.createElement(j["b"],{key:"gdrive_presentation",label:Ze.t("Presentation"),icon:m.a.createElement(E["b"],{type:"google-drive",className:"p-new_file_menu__gpres_icon"}),onSelected:this.createGDRivePresentation,className:l?void 0:Object(S["b"])(),disabled:s&&!Object(S["b"])()&&o,showOfflineIcon:s&&o,"data-qa":"google_presentation_menu_item"},l?null:m.a.createElement(S["a"],null))];return Object(b["filter"])([u,d].concat(p))}},{key:"renderCreateNewSubmenu",value:function e(t){var r=this.props.menuProps;var a=this.renderCreateNewMenuItems();return m.a.createElement(j["f"],n()({},r,t,{"data-qa":"create_new_submenu"}),a)}},{key:"renderCreateNew",value:function e(){var t=this.props,r=t.threadTs,a=t.showGdriveMenuItem;var n=this.renderCreateNewMenuItems();if(0===n.length)return null;var i=!r&&Object(Ve["a"])()&&a?{top:-80}:void 0;return[1===n.length?n[0]:m.a.createElement(C["a"],{key:"create-new-submenu",label:Ze.t("Create new..."),icon:m.a.createElement(E["b"],{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!r,submenuStyle:i}),m.a.createElement(j["d"],{key:"create-new-separator"})]}},{key:"render",value:function e(){var t=this.props,r=t.disableFileUploadsPref,a=t.menuProps,n=t.showBoxMenuItem,i=t.showDropboxMenuItem,s=t.showGdriveMenuItem,o=t.showOneDriveMenuItem;var l=n||i||s||o;var c="disable_all"!==r;var u="disable_all_except_images"===r;var d=l?Ze.t("Add from\u2026"):Ze.t("Add an image from\u2026");return m.a.createElement(j["f"],a,this.renderCreateNew(),m.a.createElement(j["c"],{label:u?d:Ze.t("Add a file from\u2026")}),this.renderMultipleCloudServices(this.props),c&&m.a.createElement(j["b"],{"data-qa":"add_file_from_computer_menu_item",label:Ze.t("Your computer"),icon:m.a.createElement(E["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]);return t}(v["Component"]);tt.displayName="NewFileMenu";tt.defaultProps=et;var rt=function e(t){return{createDocPost:function e(){return t(q.apply(void 0,arguments))},createAndOpenLegacyPost:function e(){return t(Je.apply(void 0,arguments))},openSnippetDialog:function e(){return t(G["a"].apply(void 0,arguments))},openCreateGDocDialog:function e(){return t(H["a"].apply(void 0,arguments))},openBoxFilePicker:function e(){return t(be.apply(void 0,arguments))},openDropboxFilePicker:function e(){return t(Ce.apply(void 0,arguments))},openGdriveFilePicker:function e(){return t(xe.apply(void 0,arguments))},openOnedriveFilePicker:function e(){return t(He.apply(void 0,arguments))}}};function at(e){var t=Object(y["a"])(e,"dropbox_legacy_picker");var r=Object(O["g"])(e,"dropbox_enabled");var a=r||t;return{disableFileUploadsPref:Object(y["a"])(e,"disable_file_uploads"),featureSonicInputs:Object(_["isFeatureEnabled"])(e,"feature_sonic_inputs"),featureSonicSnippets:Object(_["isFeatureEnabled"])(e,"feature_sonic_snippets"),featureDocs:Object(_["isFeatureEnabled"])(e,"feature_docs"),featureBoxContentPicker:Object(_["isFeatureEnabled"])(e,"feature_box_content_picker"),featureSonicCloudFilesPicker:Object(_["isFeatureEnabled"])(e,"feature_sonic_cloud_files_picker"),featureModernGdriveCreate:Object(_["isFeatureEnabled"])(e,"feature_modern_gdrive_create"),clogger:Object(P["a"])({state:e}),logger:Object(R["a"])({state:e}),showBoxMenuItem:Object(O["g"])(e,"box_enabled")&&!Object(_["isFeatureEnabled"])(e,"feature_disable_box_plus_menu"),showDropboxMenuItem:a,showGdriveMenuItem:Object(y["a"])(e,"gdrive_enabled_team"),showOneDriveMenuItem:Object(_["isFeatureEnabled"])(e,"feature_onedrive_picker")&&Object(y["a"])(e,"onedrive_enabled_team"),featureOfflineMode:Object(_["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(k["c"])(e)}}var nt=t["a"]=Object(f["connect"])(at,rt)(tt)},function(e,t,r){"use strict";var a=r(2);var n=r.n(a);var i=r(15);var s=r(4);var o=r(23);var l=r(27);var c=r(98);var u=r(103);var d=r(108);var p=r(1472);var v=r(1064);var m=r(582);var h=r(38);var f=r(12);var b=6e4;var g=function e(t){var r=Object(l["c"])(t);if(Object(h["a"])()&&!Object(d["j"])(r))return Promise.resolve();var n=Object(s["isFeatureEnabled"])(r,"feature_vitess_sidebar")?v["a"]:p["a"];return Object(l["a"])(t,n({reason:"requestOfflineCounts"})).tap(function(){return Object(l["a"])(t,Object(u["resetReachedEnd"])())}).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l["a"])(t,Object(m["a"])(e))}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=Object(a["compact"])(Object(a["concat"])(e.channels,e.groups));Object(l["a"])(t,Object(c["reconcileChannelAccess"])({channels:r}))}).catch(function(e){Object(f["a"])({state:r}).error("Failed to fetch offline users counts for "+t+": "+e)})};var _=Object(a["throttle"])(g,b,{trailing:false});var y=Object(i["b"])("Request offline users counts",function(e,t){return Object(s["isFeatureEnabled"])(t(),"feature_degraded_send")&&_(Object(o["b"])(t()))});y.propTypes={};t["a"]=y;var O={fetchOfflineUsersCounts:g}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(4604);var d=u["a"];var p=r(163);var v=function e(t,r,a){if(!t)throw new Error("mountAppsBrowser must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(p["a"],null,n.a.createElement(d,a))),r)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h={mountAppsBrowser:v};var f=r(44);Object(f["a"])("interop.mountAppsBrowser",v);Object(f["a"])("interop.unmountAppsBrowser",m)},,,,,,function(e,t,r){"use strict";var a=r(0);var n=r(1);var i=r.n(n);var s=r(13);var o=r(4399);var l=r(310);var c=r(1534);var u=r(4);var d=r(10);var p=r(28);var v=r(22);var m=r(128);var h=new d["b"]("apps_browser");var f={app:a["b"].shape({app_id:a["b"].string,is_installed:a["b"].bool,bot_user_id:a["b"].string}).isRequired,appCanBeAdded:a["b"].bool.isRequired,className:a["b"].string.isRequired,featureAppBrowserViewInstall:a["b"].bool.isRequired,onClick:a["b"].func,onMouseLeave:a["b"].func,"data-app_index":a["b"].number.isRequired};var b={onClick:void 0,onMouseLeave:void 0};var g=function e(t){return i.a.createElement(m["a"],{className:"p-apps_browser__enter_button","aria-label":t,key:"enter-or-preview"},i.a.createElement(v["b"],{type:"enter",inline:true}),i.a.createElement("span",null,t))};g.displayName="renderEnter";var _=function e(t){var r=t.app,a=t.appCanBeAdded,n=t.className,s=t.featureAppBrowserViewInstall,o=t.onClick,u=t.onMouseLeave,d=t["data-app_index"];var v=h.t("Install");var m=h.t("Install app",{fallbackHash:"fd6c3ebf7befca9f8208f86c76e4d4180303745c"});if("tutorial_app"===r.app_id){v=h.t("Start");m=h.t("Start app tutorial",{fallbackHash:"952f375412e89ff213a8aca383d18e5691354347"})}else if(a){v=h.t("Add");m=h.t("Add app",{fallbackHash:"61cc55aa0453184734c3fa0b621eda6fa874bd83"})}else if(r.is_installed){v=h.t("View");m=h.t("View app",{fallbackHash:"69bd4ef9fbd0894a22759c3766b859defbdedbc8"})}var f=Object(l["a"])(r,72);return i.a.createElement("div",{className:n,onClick:o,onMouseLeave:u,"data-app":true,"data-app_index":d,"data-is_installed":r.is_installed,"data-app_id":r.app_id,"data-bot_id":r.bot_id,"data-bot_user_id":r.bot_user_id,"data-can_app_be_added":a||null,"data-qa":"apps_browser_row",role:"presentation"},i.a.createElement("img",{className:"p-apps_browser__app_icon",src:f,alt:r.name}),i.a.createElement("div",{className:"p-apps_browser__app_info"},i.a.createElement("div",{className:"p-apps_browser__app_name"},i.a.createElement("strong",null,r.name)),i.a.createElement("div",{className:"p-apps_browser__app_description"},Object(c["a"])(r.short_description,function(e,t){return i.a.createElement("strong",{key:t},e)}))),s?g(v):i.a.createElement(p["d"],{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline","aria-label":m},v))};_.displayName="AppsBrowserActionText";_.defaultProps=b;var y=function e(t,r){var a=r.addAppsVariant,n=r.app,i=r.channelId;return{appCanBeAdded:a&&Object(o["a"])(t,n,i),featureAppBrowserViewInstall:Object(u["isFeatureEnabled"])(t,"feature_app_browser_view_install")}};t["a"]=Object(s["connect"])(y)(_)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(119);var c=r(27);var u=r(4632);var d=u["a"];var p=r(163);var v=function e(t,r,a){if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(p["a"],null,n.a.createElement(d,a))),r)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h={mountChannelOptions:v,unmountChannelOptions:m};var f=r(44);Object(f["a"])("interop.mountChannelOptions",v);Object(f["a"])("interop.unmountChannelOptions",m)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(3);var d=r.n(u);var p=r(6);var v=r.n(p);var m=r(7);var h=r.n(m);var f=r(8);var b=r.n(f);var g=r(9);var _=r.n(g);var y=r(5);var O=r.n(y);var k=r(0);var E=r(10);var j=r(4);var C=r(29);var S=r(25);var w=r(12);var I=r(2);var T=Object(S["a"])("Get Entereprise Auth SSO preferences",function(e,t,r){var a=r.reason;return e(Object(C["a"])({method:"enterprise.auth.sso.get",reason:a})).catch(function(e){var r="failed to get enterprise auth sso preferences";Object(w["a"])({getState:t}).error("Enterprise",r);throw e})});T.propTypes={reason:k["b"].string};var A=Object(S["a"])("Set Entereprise Auth SSO preferences",function(e,t,r){var a=r.syncWithProvider,n=r.changeEmail,i=r.chooseUsername,s=r.authRestrictions,o=r.samlProviderLabel,l=r.reason;var c=Object(I["omitBy"])({sync_with_provider:a,change_email:n,choose_username:i,auth_restrictions:s,saml_provider_label:o},I["isUndefined"]);return e(Object(C["a"])({method:"enterprise.auth.sso.set",args:c,reason:l})).catch(function(e){var r="failed to set enterprise auth SSO preferences";Object(w["a"])({getState:t}).error("Enterprise",r);throw e})});A.propTypes={syncWithProvider:k["b"].bool,changeEmail:k["b"].bool,chooseUsername:k["b"].bool,authRestrictions:k["b"].number,reason:k["b"].string};var N=r(701);var P=r(150);var R=r(157);var M=r(96);var x=r(54);var D=r(179);var F=r(354);var L=r(126);var B=r(211);var U=r(364);var q=r(17);var G=r(22);var H=r(28);var W=r(1757);var V=r(1831);var K=r(4396);var z;var Q=new E["b"]("enterprise_dashboard");var Y={featureOrgModernSsoPreferencesPage:k["b"].bool,updateProfilesOnLogin:k["b"].bool,editableEmailAddresses:k["b"].bool,editableDisplayName:k["b"].bool,guestsMustSSO:k["b"].string,customSignInLabel:k["b"].string,getEnterpriseAuthSSOPrefs:k["b"].func.isRequired,setEnterpriseAuthSSOPrefs:k["b"].func.isRequired,enqueueToast:k["b"].func.isRequired,idpButtonLabel:k["b"].string,idpLabel:k["b"].string,user:k["b"].object};var J={featureOrgModernSsoPreferencesPage:false,updateProfilesOnLogin:false,editableEmailAddresses:false,editableDisplayName:false,customSignInLabel:"",guestsMustSSO:"",idpButtonLabel:"SAML",idpLabel:"IDP",user:{}};var X=Symbol("UPDATE_PROFILES_ON_LOGIN_SETTING");var Z=Symbol("EDITABLE_EMAIL_ADDRESSES_SETTING");var $=Symbol("EDITABLE_DISPLAY_NAME_SETTING");var ee=Symbol("GUEST_ACCOUNTS_REQUIRE_SSO_SETTING");var te=Symbol("CUSTOM_SIGN_IN_BUTTON_SETTING");var re=(z={},O()(z,X,"syncWithProvider"),O()(z,Z,"changeEmail"),O()(z,$,"chooseUsername"),O()(z,ee,"authRestrictions"),O()(z,te,"samlProviderLabel"),z);var ae="checkbox";var ne="radio";var ie="button_preview";var se=function(e){_()(t,e);function t(e){v()(this,t);var r=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={settingsItems:[{id:X,value:r.props.updateProfilesOnLogin,saving:false,open:false},{id:Z,value:r.props.editableEmailAddresses,saving:false,open:false},{id:$,value:r.props.editableDisplayName,saving:false,open:false},{id:ee,value:r.props.guestsMustSSO,saving:false,open:false},{id:te,value:r.props.customSignInLabel,saving:false,open:false}],loading:true};Object(W["a"])(r,["onEdit","onCancel","saveSetting","settingClicked","onButtonPreviewChange"]);return r}h()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getEnterpriseAuthSSOPrefs().then(function(e){var r=e.sso;var a=r.sync_with_provider;var n=r.change_email;var i=r.choose_username;var s=""+(r.auth_restrictions||0);var o=r.saml_provider_label;t.setState(function(e){var t=e.settingsItems.slice();Object(I["find"])(t,{id:X}).value=a;Object(I["find"])(t,{id:Z}).value=n;Object(I["find"])(t,{id:$}).value=i;Object(I["find"])(t,{id:ee}).value=s;Object(I["find"])(t,{id:te}).value=o;return{settingsItems:t,loading:false}})})}},{key:"onEdit",value:function e(t){var r=this;return function(){var e=r.state.settingsItems[t];r._setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:e.value}])}}},{key:"onCancel",value:function e(t){var r=this;return function(){r._setSettingsItemKeys(t,[{k:"open",v:false}])}}},{key:"onCheckboxChange",value:function e(t){var r=this;return function(e){r._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.checked}])}}},{key:"onRadioChange",value:function e(t){var r=this;return function(e){e.target.checked&&r._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.value}])}}},{key:"onButtonPreviewChange",value:function e(t){var r=this;return function(e){r._setSettingsItemKeys(t,[{k:"tempValue",v:e}])}}},{key:"settingClicked",value:function e(t){var r=this;return function(){return r.onEdit(t)()}}},{key:"saveSetting",value:function e(t){var r=this;return function(){var e=r.state.settingsItems[t];var a=e.id;var n=O()({},re[a],e.tempValue);n.authRestrictions&&(n.authRestrictions=+n.authRestrictions);return r._apiSet(n,t)}}},{key:"_apiSet",value:function e(t,r){var a=this;this._setSettingsItemKeys(r,[{k:"saving",v:true}]);return this.props.setEnterpriseAuthSSOPrefs(t).then(function(){var e=a.state.settingsItems[r];a._setSettingsItemKeys(r,[{k:"value",v:e.tempValue}]);var t=a.props.featureOrgModernSsoPreferencesPage?Q.t("Setting saved."):"";t&&a.props.enqueueToast({element:n.a.createElement(R["b"],null,n.a.createElement(G["b"],{className:"p-sso_preferences_view__toast__icon",type:"check-circle-o-large"})," ",n.a.createElement("strong",null,t))});a._setSettingsItemKeys(r,[{k:"saving",v:false},{k:"open",v:false}])}).catch(function(){var e=a.props.featureOrgModernSsoPreferencesPage?Q.t("Something went wrong."):"";e&&a.props.enqueueToast({element:n.a.createElement(R["b"],null,n.a.createElement("strong",null,e))})})}},{key:"_toggleBooleanValue",value:function e(t,r){var a=this;var n=this.state.settingsItems[t].id;var i=Object(I["isBoolean"])(r)?r:!this.state.settingsItems[t].value;var s=O()({},re[n],n===ee?Object(I["toNumber"])(!i):i);return this._apiSet(s,t).then(function(){a._setSettingsItemKeys(t,[{k:"value",v:i}])})}},{key:"_setSettingsItemKeys",value:function e(t,r){this.setState(function(e){var a=e.settingsItems.slice();var n=Object(I["reduce"])(r,function(e,t){e[t.k]=t.v;return e},{});a.splice(t,1,d()({},a[t],n));return{settingsItems:a}})}},{key:"renderControl",value:function e(t,r,a){if(!this.props.featureOrgModernSsoPreferencesPage)return null;switch(a[t.id].type){case ae:return n.a.createElement(x["a"],{text:a[t.id].onState,subtext:a[t.id].onDescription,type:"inline",cursor:"pointer"},n.a.createElement(L["a"],{name:"checkbox-"+r,checked:t.tempValue,onChange:this.onCheckboxChange(r)}));case ne:return n.a.createElement("div",null,n.a.createElement(U["a"],{field:ne+"-"+r,legendText:Q.t("SSO authentication must be used by:")},n.a.createElement(x["a"],{text:Q.t("All org members"),subtext:Q.t("All accounts in the organization must sign in with SSO."),type:"inline",cursor:"pointer"},n.a.createElement(B["a"],{name:ne+"-"+r,value:"0",checked:"0"===t.tempValue,onChange:this.onRadioChange(r)})),n.a.createElement(x["a"],{text:Q.t("All org members, except guests"),subtext:Q.t("Guest accounts can sign in with a Slack email and password"),type:"inline",cursor:"pointer"},n.a.createElement(B["a"],{name:ne+"-"+r,value:"1",checked:"1"===t.tempValue,onChange:this.onRadioChange(r)}))));case ie:return n.a.createElement("div",null,n.a.createElement("div",{className:"p-sso_preferences_view__custom_button_layout"},n.a.createElement(x["a"],{className:"elevation_2 rounded",text:Q.t("Button preview:"),htmlFor:"custom-text",id:"custom-text-label"},n.a.createElement(H["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view__custom_button_layout__preview_button"},Q.t("Sign in with {label}",{label:t.tempValue||this.props.idpButtonLabel})),n.a.createElement("div",{className:"c-hint"},Q.t("This is what your button will look like."))),n.a.createElement(x["a"],{text:Q.t("Sign in button label"),htmlFor:"custom-text",id:"custom-text-label"},n.a.createElement(D["a"],{ariaDescribedby:"custom-text-label",name:"custom-text",id:"custom-text",value:t.tempValue,placeholder:Q.t("Sign in with {label}",{label:this.props.idpButtonLabel}),hintText:Q.t("Customize your button label"),onChange:this.onButtonPreviewChange(r),size:"medium",maxCharacterLimit:20,maxLength:"20"}))));default:return null}}},{key:"renderIdentitySettings",value:function e(){var t,r=this;if(!this.props.featureOrgModernSsoPreferencesPage)return null;var a=(t={},O()(t,X,{label:Q.t("User profiles"),prompt:Q.t("Choose whether profile fields are synced each time a user logs in."),onDescription:Q.t("Available user profile fields will be synced from your identity provider every time a user logs in."),offDescription:Q.t("User profile fields will not be synced from your identity provider on log in."),onState:Q.t("Update profile each time a user logs in"),offState:Q.t("Don\u2019t update profile each time a user logs in"),type:ae}),O()(t,Z,{label:Q.t("Email addresses"),prompt:Q.t("Choose whether users can change their email addresses in Slack."),onDescription:Q.t("Users will be able to change their email address to something other than the one from their {idpLabel} account. They\u2019ll still log in with {idpLabel}.",{idpLabel:this.props.idpLabel}),offDescription:Q.t("Users will not be able to change their email address to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),onState:Q.t("Allow users to change their email address"),offState:Q.t("Don\u2019t allow users to change their email address"),type:ae}),O()(t,$,{label:Q.t("Display names"),prompt:Q.t("Choose whether users can change their display name in Slack."),onDescription:Q.t("Users will be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),offDescription:Q.t("Users will not be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),onState:Q.t("Allow users to change their display name"),offState:Q.t("Don\u2019t allow users to change their display name"),type:ae}),O()(t,ee,{label:Q.t("SSO authentication"),prompt:Q.t("Choose whether guest accounts need to sign in through your SSO provider."),onDescription:Q.t("All accounts in the organization must sign in with SSO."),offDescription:Q.t("Guest accounts can sign in with a Slack email and password."),onState:Q.t("Must be used by all org members"),offState:Q.t("Must be used by all org members, except guests"),type:ne}),O()(t,te,{label:Q.t("Custom sign-in button"),prompt:Q.t("Have a nickname for your SSO system? Add it here to help your members sign in."),onDescription:Q.t("This is what your sign in button will look like"),onState:Q.t("Button preview:"),offState:Q.t("Button preview:"),type:ie}),t);var i=Q.t("Save Setting");var s=function e(t){return true===t.value||"0"===t.value};var o=function e(t){var i=a[t.id];if(i.type===ie)return n.a.createElement("div",null,n.a.createElement(H["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view__custom_button_layout__preview_button readonly"},Q.rt("Sign in with {label}",{label:t.value||r.props.idpButtonLabel})),i.onDescription);return s(t)?i.onDescription:i.offDescription};var l=Object(q["isEnterpriseOwner"])(this.props.user);return n.a.createElement("div",null,this.state.settingsItems.map(function(e,t){return n.a.createElement("div",{key:e.id.toString()},n.a.createElement(V["a"],{label:a[e.id].label,state:s(e)?a[e.id].onState:a[e.id].offState,description:o(e),onClick:r.settingClicked(t),type:"button",control:{type:"button",onEdit:r.onEdit(t),editOnly:true},readonly:!l,readonlyTooltip:l?"":Q.t("Only Org Owners can change this setting")}),n.a.createElement(F["a"],{title:a[e.id].label,isOpen:e.open,onCancel:r.onCancel(t),onGo:r.saveSetting(t),goButtonText:i,goButtonIsPending:e.saving,withHeader:true},n.a.createElement("p",null,a[e.id].prompt),r.renderControl(e,t,a)))}))}},{key:"render",value:function e(){return this.props.featureOrgModernSsoPreferencesPage?n.a.createElement("div",{className:"p-sso_preferences_view"},n.a.createElement("h1",{className:"p-sso_preferences_view__title"},Q.t("SSO Preferences")),this.state.loading?n.a.createElement(M["a"],{color:"blue",size:"jumbo"}):n.a.createElement("div",null,this.renderIdentitySettings()),n.a.createElement(N["a"],null)):null}}]);return t}(a["PureComponent"]);se.displayName="SSOPreferencesView";se.defaultProps=J;var oe=function e(t){return{featureOrgModernSsoPreferencesPage:Object(j["isFeatureEnabled"])(t,"feature_org_modern_sso_preferences_page")}};var le=function e(t){return{enqueueToast:function e(){return t(P["enqueueToast"].apply(void 0,arguments))},getEnterpriseAuthSSOPrefs:function e(){return t(T({reason:"SSOPreferencesView_getEnterpriseAuthSSOPrefs"}))},setEnterpriseAuthSSOPrefs:function e(r){return t(A(d()({},r,{reason:"SSOPreferencesView_setEnterpriseAuthSSOPrefs"})))}}};var ce=Object(o["connect"])(oe,le)(se);var ue=ce;Object(c["a"])("interop.ssoPreferences",{render:function e(t,r,a){if(!t)throw new Error("ssoPreferences render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(ue,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,function(e,t,r){"use strict";var a=r(2);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(0);var l=r(13);var c=r(10);var u=r(19);var d=r(67);var p=r(41);var v=r(1565);var m=r(714);var h=r(1160);var f=new c["b"]("file-upload");function b(e){var t=e.label,r=e.replyCount,a=e.replyUsers,n=e.replyUsersCount;if(!a)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},t||f.t("Sharing file in a thread"),s.a.createElement("br",null),s.a.createElement(v["a"],{replyCount:r,replyUsers:a,replyUsersCount:n}))}b.displayName="FileUploadThreadLabel";b.defaultProps={label:void 0,replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0};function g(e,t){var r=t.channelId,n=t.threadTs;var i=Object(d["a"])(e,r,n);if(!i){var s=Object(u["d"])(e,r);i=Object(m["d"])(s,n);i||(i=Object(h["a"])(s,n))}if(!i)return{};var o=Object(p["getReplyUsers"])(i);var l=Object(p["getReplyUsersCount"])(i);if(i.replies){o=Object(a["map"])(i.replies,"user");i.user&&o.push(i.user);l=Object(a["uniq"])(o).length}else i.user&&o.push(i.user);return{replyCount:Object(p["getReplyCount"])(i),replyUsers:o,replyUsersCount:l}}t["a"]=Object(l["connect"])(g)(b)},,,,,,,function(e,t,r){"use strict";r.d(t,"e",function(){return c});r.d(t,"d",function(){return u});r.d(t,"c",function(){return d});r.d(t,"a",function(){return p});r.d(t,"b",function(){return v});var a=r(65);var n=r(12);var i=0;var s=0;var o=true;var l=Object(n["b"])({label:"HISTORY-NAVIGATION"});var c=function e(){if(s===i)return;l.info("Incrementing the users current position in the history stack");s+=1;o=false};var u=function e(){if(1===s)return;l.info("Decrementing the users current position in the history stack");s-=1;o=false};var d=function e(){if(!o){o=true;return}l.info("Adding route to the history stack");if(s!==i){s+=1;i=s;return}s+=1;i+=1};var p=function e(){return 1===s};var v=function e(){return s===i};Object(a["exportToGlobalDebugger"])("history",{getHistoryLength:function e(){return i},getHistoryIndex:function e(){return s}})},,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(1);var l=r.n(o);var c=r(0);var u=r(16);var d=r.n(u);var p=r(38);var v={regionId:c["b"].oneOf(["main","name","info"]).isRequired,className:c["b"].string,flex:c["b"].bool};var m={className:void 0,flex:false};function h(e){var t=e.regionId,r=e.className,a=e.flex,i=s()(e,["regionId","className","flex"]);if(Object(p["a"])())return null;var o=d()(r,{"p-classic_nav__page_header__legacy_drag_region":true,flex_one:a,channel_header_drag_region:true});return l.a.createElement("div",n()({},i,{className:o,"data-region":t}))}h.displayName="LegacyPageHeaderDragRegion";h.defaultProps=m;t["a"]=h},,,,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(15);var i=r(375);var s=r(4);var o=r(34);var l=r(132);var c=r(71);var u=r(12);var d="https://app.slack.com/api/api.test";var p="app_subdomain_check";var v="app_subdomain_check_completed";var m=6;var h=Object(n["b"])("Tests whether `app.slack.com` is a blocked subdomain",function(e,t){var r=t();var a=Object(c["c"])({state:r});var n=Object(u["a"])({getState:t});if(!Object(s["isFeatureEnabled"])(r,"feature_app_subdomain_check")||Object(o["g"])(r,v)===m)return;i["b"].fetch({url:d+"?_x_"+p+"="+m}).then(function(){a.count(p+"_passed_"+m)}).catch(function(e){a.count(p+"_failed_"+m);var t="Check for `app.slack.com` failed";var r=p;n.error(e,t,{subtype:r})}).finally(function(){e(Object(l["d"])({pref:v,value:m}))})});Object(a["a"])("interop.appSubdomainCheck",function(){return TS.redux.dispatch(h())})},,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(0);var m=r(54);var h=r(126);var f=r(10);var b=r(3223);var g=r.n(b);var _=new f["b"]("file-upload");var y=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleChange=r.handleChange.bind(r);return r}s()(t,[{key:"handleChange",value:function e(t){var r=t.target.checked;this.props.onChange(r)}},{key:"render",value:function e(){var t=this.props,r=t.channelType,a=t.selectedChannelName,n=t.value;var i="file-upload-broadcast-to-channel";var s="";s="mpim"===r?_.t("Also send to the group"):"im"===r?_.t("Also send as direct message"):_.rt("Also send to <span></span>",null,function(){return p.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},a)});return p.a.createElement(m["a"],{text:s,className:"p-file_upload_dialog__broadcast_label",htmlFor:i,type:"inline"},p.a.createElement(h["a"],{className:"p-file_upload_dialog__broadcast_checkbox","data-qa":"file_upload_broadcast_checkbox",id:i,checked:n,onChange:this.handleChange}))}}]);return t}(d["PureComponent"]);y.displayName="FileUploadBroadcastCheckbox";t["a"]=y},,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(15);var s=r(48);var o=r(4);var l=r(292);var c=r(13);var u=r(0);var d=r(10);var p=r(4395);var v=r(1239);function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,r=e.title,a=e.description,i=e.children;return n.a.createElement(n.a.Fragment,null,n.a.createElement(v["c"],null,n.a.createElement(v["h"],{height:300,width:500,alt:"",src:t}),n.a.createElement(v["i"],{title:r}),n.a.createElement(v["d"],null,n.a.createElement("p",null,a))),i)}m.displayName="AppsTutorialStep";var h=r(3);var f=r.n(h);var b=r(37);var g=r.n(b);var _=r(4403);var y=r(28);function O(e){var t=e.tutorialStatus,r=e.actions;return n.a.createElement(_["a"],null,n.a.createElement("span",null,t),n.a.createElement(v["f"],null,r.map(function(e){var t=e.label,r=g()(e,["label"]);return n.a.createElement(y["d"],f()({},r,{key:t}),t)})))}O.displayName="AppsTutorialFooter";O.defaultProps={tutorialStatus:"",actions:[]};var k=O;var E=new d["b"]("step_tutorial");function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,r=void 0===t?[]:t;return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.index,n=t.navigate,i=t.end;if(a<0||a>=r.length)return;var s=0===a;var o=a===r.length-1;var l=[];var c=E.t("{current} of {total}",{current:a+1,total:r.length});s||l.push({type:"outline",label:E.t("Back"),onClick:function e(){return n(r[a-1].id)}});l.push({label:o?E.t("Done"):E.t("Next"),onClick:o?i:function(){return n(r[a+1].id)}});return{step:r[a],footer:{tutorialStatus:c,actions:l}}}}var C=new d["b"]("apps_browser");function S(e){var t=e.closeModal;var r=Object(a["useMemo"])(function(){var e=[{id:"common_tasks",image:cdn_url+"/436da/img/app_space_tutorial_illustration_01.jpg",title:C.t("Common tasks, done in a jiffy"),description:C.t("Approve requests, schedule meetings, share documents, and more \u2014 all inside Slack.")},{id:"connect_tools",image:cdn_url+"/436da/img/app_space_tutorial_illustration_02.jpg",title:C.t("Connect the tools you already use"),description:C.t("Slack works with the systems you use, for everything from accounting to customer support.")},{id:"discover_ways",image:cdn_url+"/436da/img/app_space_tutorial_illustration_03.jpg",title:C.t("Discover new ways to work"),description:C.t("Poll your workspace, send kudos, and automate the coffee run. Have a better workday with apps.")}];var r=j({steps:e});return e.reduce(function(e,a,i){e[a.id]={render:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.switchPane;var o=r({index:i,navigate:s,end:t});return n.a.createElement(m,o.step,n.a.createElement(k,o.footer))}};return e},{})},[t]);return n.a.createElement(p["b"],{defaultPane:"common_tasks",isOpen:true,invertCloseButton:true,panes:r,closeModal:t})}S.displayName="AppsTutorial";var w=function e(t){return Object(l["bindActionCreators"])({closeModal:s["closeModal"]},t)};var I=Object(c["connect"])(null,w)(S);var T=r(1100);var A=r(333);var N=r(34);var P=r(45);var R="seen_app_space_tutorial";var M=Object(i["b"])("Opens the apps tutorial modal",function(e,t){var r=t();var a=Object(P["a"])({state:r});if(!Object(o["isFeatureEnabled"])(r,"feature_m11n_apps_browser")){Object(T["d"])();return}a.track("APP_TUTORIAL_VIEW",null);Object(N["g"])(r,R)||e(Object(A["b"])({pref:R,value:true}));e(Object(s["openModal"])({element:n.a.createElement(I),isStackable:true}))});M.propTypes=null;var x=t["a"]=M},function(e,t,r){},,function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(34);var n=r(15);var i=r(933);var s=r(4402);var o=Object(n["b"])("Cancels onboarding",function(e,t){var r=t();Object(a["g"])(r,"tractor_enabled")?e(Object(s["a"])(false)):Object(i["a"])()})},,,,,,,,,function(e,t,r){"use strict";var a=r(6);var n=r.n(a);var i=r(7);var s=r.n(i);var o=r(8);var l=r.n(o);var c=r(9);var u=r.n(c);var d=r(1);var p=r.n(d);var v=r(13);var m=r(0);var h=r(4599);var f=r(4415);var b=r(4414);var g=r(360);var _=r(1166);var y=r(12);var O="GLOBAL-RXN-SHORTCUT";var k={children:m["b"].node.isRequired,channelId:m["b"].string.isRequired,threadTs:m["b"].string,logger:m["b"].object.isRequired,getLastMessageInChannel:m["b"].func.isRequired,getLastMessageInThread:m["b"].func.isRequired,changeReactionFromUserAction:m["b"].func.isRequired};var E={threadTs:void 0};var j=function(e){u()(t,e);function t(e){n()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={forceOpen:false};r.onEmojiSelected=r.onEmojiSelected.bind(r);r.onClose=r.onClose.bind(r);return r}s()(t,[{key:"onEmojiSelected",value:function e(t,r){if(!this.reactionKey){this.props.logger.warn(O,"No reaction key");return}this.props.changeReactionFromUserAction({key:this.reactionKey,name:r})}},{key:"onClose",value:function e(){this.setState(function(){return{forceOpen:false}})}},{key:"startReactionPopoverForLastMessage",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.logger;var i=void 0;i=a?this.props.getLastMessageInThread(r,a):this.props.getLastMessageInChannel(r);if(!i){n.info(O,"Could not find last message");return}this.reactionKey=Object(g["b"])(i);n.info(O,"Opening reaction popover for "+this.reactionKey);this.setState(function(){return{forceOpen:true}})}},{key:"render",value:function e(){var t=this.props.children;var r=this.state.forceOpen;return p.a.createElement(_["a"],{showHandyReactions:true,customTrigger:true,forceOpen:r,onEmojiSelected:this.onEmojiSelected,onClose:this.onClose},p.a.createElement(I,null,t))}}]);return t}(d["PureComponent"]);j.displayName="MessageInputReactionPopover";j.defaultProps=E;function C(e){return{logger:Object(y["a"])({state:e})}}var S={getLastMessageInChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(e,t){return f["a"].apply(void 0,[t()].concat(r))}},getLastMessageInThread:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(e,t){return b["a"].apply(void 0,[t()].concat(r))}},changeReactionFromUserAction:function e(){return h["a"].apply(void 0,arguments)}};var w=Object(v["connect"])(C,S,null,{withRef:true})(j);t["a"]=w;var I=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){return this.props.children}}]);return t}(d["PureComponent"]);I.displayName="PassThrough"},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(308);var i=r(902);var s=r(781);var o=r(4271);var l=r(100);var c=r(1740);var u=r(1358);var d=r(2176);var p=r(1216);var v=r(1784);var m=r(4609);var h=r(4390);Object(a["a"])("interop.actions",{displayModelOrViewById:n["a"],setLastRead:i["d"],markLastRead:i["b"],markDelayedWithAPI:i["a"],openDmBrowserModal:u["a"],openChannelCreateModal:d["a"],requestOfflineHistory:s["a"],requestOfflineCounts:o["a"],toggleKeyboardShortcuts:l["r"],showKeyboardShortcuts:l["h"],slackJsPathCommand:c["default"],filterFilesForUpload:p["a"],launchWorkflowBuilder:v["a"],openSMSDownloadAppDialog:m["a"],rebuildExternalTeamChannels:h["a"]})},,,function(e,t,r){},,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(0);var c=r(108);var u=r(567);var d=r(6);var p=r.n(d);var v=r(7);var m=r.n(v);var h=r(8);var f=r.n(h);var b=r(9);var g=r.n(b);var _=r(2);var y=r.n(_);var O=r(1757);var k=r(2414);var E=r(16);var j=r.n(E);var C=r(85);var S=r(34);var w=r(24);var I=r(199);var T=r(918);var A=r(77);var N=r(17);var P=r(87);var R=r(164);var M=r(10);var x=r(181);var D=r(428);var F=r(565);var L=r(891);var B=r(61);var U=r(1091);var q=r(1540);var G=r(51);var H=r(782);var W=r(1559);var V=r(442);var K=r(1793);var z=r(2400);var Q={comments:l["b"].array,fileId:l["b"].string};var Y={comments:void 0,fileId:void 0};var J=function(e){g()(t,e);function t(e){p()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggle=r.toggle.bind(r);r.state={expanded:false};return r}m()(t,[{key:"toggle",value:function e(){this.setState(function(e){return{expanded:!e.expanded}})}},{key:"render",value:function e(){var t=this.props,r=t.comments,a=t.fileId;var i=this.state.expanded;if(Object(_["isEmpty"])(r))return null;var s=r.map(function(e){var t=e.id;return n.a.createElement(W["a"],{key:t,comment:e,fileId:a})});var o=j()("p-comment_list",{"p-comment_list--expanded":i});return n.a.createElement("div",{className:o},n.a.createElement(K["a"],{expanded:i,commentCount:r.length,toggleList:this.toggle}),n.a.createElement("div",{className:"p-comment_list__comments"},s))}}]);return t}(V["a"]);J.displayName="CommentList";J.propTypes=Q;J.defaultProps=Y;var X=J;var Z=W["a"];var $=r(4);var ee=r(571);var te=r(2245);var re=r(1323);var ae=r(506);var ne=r(38);var ie=r(12);var se=r(100);var oe=r(35);var le=r(919);var ce=r(41);var ue=r(31);var de=r(1566);var pe=new M["b"]("file-details");var ve={fileId:l["b"].string.isRequired,share:l["b"].shape({sharedTeamIds:l["b"].arrayOf(l["b"].string),teamId:l["b"].string,channelId:l["b"].string,channelName:l["b"].string,isPublic:l["b"].bool,ts:l["b"].string,threadTs:l["b"].string,replyCount:l["b"].number}).isRequired,teamIdForIcon:l["b"].string,teamDomain:l["b"].string,openThread:l["b"].func};var me={teamIdForIcon:void 0,teamDomain:void 0,openThread:y.a.noop};var he=function(e){g()(t,e);function t(e){p()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onShareClick=r.onShareClick.bind(r);return r}m()(t,[{key:"onShareClick",value:function e(t){var r=this.props,a=r.share,n=r.fileId,i=r.openThread;t.preventDefault();var s=a.threadTs||a.ts;var o=s!==a.ts?a.ts:null;var l="file_details";var c=n;i({channelId:a.channelId,threadTs:s,highlightTs:o,origin:l,originId:c})}},{key:"getReplyCountText",value:function e(t,r,a){var i=t||{},s=i.replyCount,o=i.ts,l=i.threadTs;if(!s)return null;var c="";c=l&&o!==l?pe.t("from a thread"):pe.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:s});return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),n.a.createElement(G["a"],{href:r,onClick:a},n.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},c)))}},{key:"render",value:function e(){var t=this.props,r=t.share,a=t.teamIdForIcon,i=t.teamDomain;var s=void 0;var o=void 0;var l=void 0;a?s={id:r.channelId,name:r.channelName,is_channel:true,is_private:!r.isPublic,shared_team_ids:r.sharedTeamIds,team_id:a}:l=this.onShareClick;i&&(o=Object(ce["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:r.channelId,ts:r.ts,threadTs:r.threadTs}));return n.a.createElement("div",{className:"p-file_details__share",key:r.channelId+"_"+r.ts},n.a.createElement(G["a"],{href:o,onClick:l,className:"p-file_details__share_channel_link"},n.a.createElement(de["a"],{channel:s,channelId:r.channelId,className:"p-file_details__share_channel",truncate:true,truncateWidth:"100%"})),n.a.createElement("span",{className:"p-file_details__share_metadata"},n.a.createElement(le["a"],{timestamp:r.ts,relative:true}),this.getReplyCountText(r,o,l)))}}]);return t}(a["Component"]);he.displayName="FileDetailsShareLocation";he.defaultProps=me;function fe(e,t){var r=t.share;var a=Object(oe["d"])(e);if(!a)return{};var n=a.id;var i=a.enterprise_id;var s=a.domain;var o=void 0;var l=r.teamId===i&&!y.a.isEmpty(r.sharedTeamIds)&&!y.a.includes(r.sharedTeamIds,n);var c=r.teamId&&r.teamId!==n&&r.teamId!==i;if(l||c){o=y.a.first(r.sharedTeamIds)||r.teamId;var u=Object(oe["k"])(e,[o]);s=Object(ue["isExistent"])(u&&u[0])?u[0].domain:null}return{teamIdForIcon:o,teamDomain:s}}var be=Object(i["connect"])(fe,{openThread:se["l"]})(he);var ge=new M["b"]("file-details");var _e={file:P["a"].File()};var ye={file:null};var Oe=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"getFormattedSharesData",value:function e(t){var r=this;var a=[];y.a.forEach(t.public,function(e,t){y.a.forEach(e,function(e){var n=true;var i=r.formatShareData(e,t,n);i&&a.push(i)})});var n=[];y.a.forEach(t.private,function(e,t){y.a.forEach(e,function(e){var n=false;var i=r.formatShareData(e,t,n);i&&a.push(i)})});var i=a.concat(n);return y.a.orderBy(i,"ts","desc")}},{key:"formatShareData",value:function e(t,r,a){if("0000000000.000000"===t.ts){Object(ie["b"])().warn("Skipping 0000000000.000000 share for "+this.props.file.id);return null}var n=t.reply_count||null;var i=t.reply_users;var s=t.reply_users_count;var o=t.latest_reply||t.ts;var l=t.internal_team_ids;return{channelId:r,replyCount:n,replyUsers:i,replyUsersCount:s,latest:o,ts:t.ts,threadTs:t.thread_ts,channelName:t.channel_name,teamId:t.team_id,sharedTeamIds:l,isPublic:a}}},{key:"render",value:function e(){var t=this.props.file;if(!t||!t.shares)return null;var r=t.shares;var a=!!Object.keys(t.shares).length;var i=a&&this.getFormattedSharesData(r);return a&&n.a.createElement("div",{className:"p-file_details__shares"},n.a.createElement("div",{className:"p-file_details__share_divider"},n.a.createElement("span",null,ge.rt("Shared in")),n.a.createElement("hr",null)),i.map(function(e){return n.a.createElement(be,{key:e.ts+"-"+e.channelId,share:e,fileId:t.id})}))}}]);return t}(a["PureComponent"]);Oe.displayName="FileDetailsShares";var ke=Oe;Oe.defaultProps=ye;var Ee=r(921);var je=r(28);var Ce=new M["b"]("file-details");var Se={tryAgain:l["b"].func};var we={tryAgain:_["noop"]};function Ie(e){var t=e.tryAgain;return n.a.createElement("div",{role:"alert",className:"p-file_details__error"},n.a.createElement("p",{className:"p-file_details__error_header"},Ce.t("Couldn't load file")),n.a.createElement("p",null,Ce.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,r=e.key;return n.a.createElement(G["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:r},t)})),n.a.createElement(je["d"],{type:"primary",onClick:t},Ce.t("Try Again")))}Ie.displayName="FileDetailsError";Ie.defaultProps=we;var Te=r(22);var Ae=new M["b"]("file-details");function Ne(){return n.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},n.a.createElement("div",{className:"p-file_details__tombstone_icon"},n.a.createElement(Te["b"],{type:"trash",size:"inherit"})),n.a.createElement("p",null,Ae.t("This file was deleted.")))}Ne.displayName="FileDetailsTombstone";var Pe=r(3175);var Re=r(2401);var Me=new M["b"]("file-details");var xe={file:P["a"].File(),origin:l["b"].string,do24hrTime:l["b"].bool,fileIsFetching:l["b"].bool,reloadFile:l["b"].func,userId:l["b"].string,botId:l["b"].string,ownerName:l["b"].string,featureReactMemberProfileCard:l["b"].bool,clogFileClick:l["b"].func};var De={file:null,origin:null,do24hrTime:false,fileIsFetching:false,reloadFile:_["noop"],userId:"",botId:"",ownerName:"",featureReactMemberProfileCard:false,clogFileClick:_["noop"]};var Fe=function(e){g()(t,e);function t(e){p()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(r,["renderPreview","onNameClick","clogLinkClick","renderBody"]);return r}m()(t,[{key:"onNameClick",value:function e(t){if(Object(D["a"])(t))return;var r=this.props,a=r.userId,n=r.botId,i=r.featureReactMemberProfileCard;if(!a&&!n)return;t.preventDefault();t.persist();if(i)return;n?Object(L["a"])(t,n):Object(F["a"])(t,a)}},{key:"clogLinkClick",value:function e(t){var r=this.props.file;this.props.clogFileClick({file:r,payload:t})}},{key:"isImage",value:function e(){return"image"===Object(A["getFileType"])(this.props.file)}},{key:"renderPreview",value:function e(){return n.a.createElement(re["a"],{file:this.props.file,showActions:false,forceExpanded:true,largeImage:true,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}},{key:"renderUserNameAndTimestamp",value:function e(){var t=this.props,r=t.file,a=t.do24hrTime,i=t.ownerName,s=t.userId,o=t.botId,l=t.featureReactMemberProfileCard;var c="";Object(A["isFilePublic"])(r)||(c=n.a.createElement("div",{className:"p-file_details__private"},Me.t("Private file")));var u="";u=o?"/services/"+o:"/team/"+s;var d=void 0;d=l?n.a.createElement(ae["a"],{botId:o,userId:s,onClick:this.onNameClick},n.a.createElement(G["a"],{href:u,className:"p-file_details__user_link"},i)):n.a.createElement(G["a"],{href:u,className:"p-file_details__user_link",onClick:this.onNameClick},i);return n.a.createElement("div",{className:"p-file_details__user_meta"},d,o&&n.a.createElement(ee["a"],null),n.a.createElement("div",{className:"p-file_details__upload_date"},Me.t("{date} at {time}",{date:Object(R["l"])(r.timestamp),time:Object(R["p"])(r.timestamp,{do24hrTime:a})})),c)}},{key:"renderComments",value:function e(){var t=this.props.file;if(Object(_["isEmpty"])(t.comments))return null;return n.a.createElement("div",{className:"p-file_details__comments"},n.a.createElement("hr",{className:"p-file_details__comment_separator"}),n.a.createElement(X,{comments:t.comments,fileId:t.id}))}},{key:"renderFileDetails",value:function e(){var t=this.props,r=t.file,a=t.fileIsFetching,i=t.reloadFile;if(a&&(!r||Object(B["d"])(r)&&!Object(B["c"])(r)))return null;if(!r||Object(B["c"])(r))return n.a.createElement(Ie,{tryAgain:i});if(Object(A["isTombstone"])(r))return n.a.createElement(Ne,null);var s=!Object(A["isHiddenByStorageLimit"])(r);var o={};if(this.isImage()){o.maxWidth=(r.thumb_480_w||r.thumb_360_w)+"px";o.maxHeight=(r.thumb_480_h||r.thumb_360_h)+"px"}var l=Object(A["getFileType"])(r);var c="image"===l||"snippet"===l;var u=j()("p-file_details__meta",{"p-file_details__meta--show_filename":c});return n.a.createElement(n.a.Fragment,null,s?n.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},n.a.createElement("div",{className:u},c?n.a.createElement(U["a"],{file:r,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),n.a.createElement(te["a"],{file:r,clogLinkClick:this.clogLinkClick,inFileDetails:true})):null,n.a.createElement("div",{className:"p-file_details__preview",style:o},this.renderPreview()),this.renderComments(),n.a.createElement(ke,{file:r}))}},{key:"renderBody",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__content"},n.a.createElement(k["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(H["b"],{width:r,height:a,fade:true},n.a.createElement("div",{className:"p-file_details"},t.renderFileDetails()))}))}},{key:"render",value:function e(){var t=this.props.origin;var r={member_preview:Me.t("Member"),starred_items:Me.t("Starred Items"),search_results:Me.t("Search Results"),channel_page:Me.t("Channel Details"),group_page:Me.t("Channel Info"),im_page:Me.t("Conversation Details"),mentions:Me.t("Activity")};var a=Me.t("Files");var i=r[t]||a;var s=j()("p-file_flexpane","p-file_flexpane--detail");return n.a.createElement(Ee["a"],{flexOrigin:t,className:s,title:i,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:Object(ne["a"])()?void 0:4.9})}}]);return t}(a["PureComponent"]);Fe.displayName="FileDetails";Fe.defaultProps=De;var Le=function e(t,r){var a=r.fileId;if(!a)return{};var n=Object(C["getFileById"])(t,a);if(!n)return{};var i=Object(A["getFileEntityId"])(n),s=i.userId,o=i.botId;var l=s?Object(w["d"])(t,s):null;var c=l?Object(N["getBotIdFromMember"])(l):null;var u=o||c;var d="";if(u){var p=Object(I["getBotById"])(t,u);p&&p.name&&(d=p.name)}!d&&l&&(d=Object(N["getPrefCompliantMemberName"])(t,l));d||(d=n.username);return{file:Object(C["getFileById"])(t,a),useGlobalNav:Object(x["b"])(t),do24hrTime:Object(S["g"])(t,"time24"),featureEmailWorkobjectUi:Object($["isFeatureEnabled"])(t,"feature_email_workobject_ui"),featureReactMemberProfileCard:Object($["isFeatureEnabled"])(t,"feature_react_member_profile_card"),userId:s,botId:u,ownerName:d}};var Be={clogFileClick:function e(){return T["a"].apply(void 0,arguments)}};var Ue=Object(i["connect"])(Le,Be)(Fe);var qe=Object(q["a"])(Ue,{alwaysFetchOnMount:true});var Ge=r(3);var He=r.n(Ge);var We=r(37);var Ve=r.n(We);var Ke=r(26);var ze=r.n(Ke);var Qe=r(760);var Ye=r(21);var Je=r(537);var Xe=r(1067);var Ze=r(1794);var $e=r(3033);var et=r(45);var tt=r(1781);var rt=r(290);var at=r(429);var nt=r(289);var it=new M["b"]("files");var st={member:l["b"].object,onChange:l["b"].func,searchMembers:l["b"].func.isRequired};var ot={member:null,onChange:_["noop"]};var lt=function(e){g()(t,e);function t(e){p()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.state={value:e.member?e.member.id:null,selectedOption:e.member?ct(e.member.id):null};return r}m()(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState(function(){return{value:t.member?t.member.id:null,selectedOption:t.member?ct(t.member.id):null}})}},{key:"onChange",value:function e(t,r){this.setState(function(){return{value:t,selectedOption:{value:t,label:r}}});this.props.onChange(t)}},{key:"render",value:function e(){return n.a.createElement(at["a"],{className:"p-file_list__select p-file_list__members_select",placeholder:it.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}]);return t}(a["PureComponent"]);lt.displayName="FilesFlexpaneMembersSelect";lt.defaultProps=ot;function ct(e){return{value:e,label:n.a.createElement("div",{className:"p-file_list__select__member"},n.a.createElement(nt["b"],{id:e,size:"small"}))}}var ut=function e(t){return{searchMembers:function e(r){return t(Object(rt["e"])({query:r,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true}},sort:{selfFirst:true},allowEmptyQuery:true}})).then(function(e){return{options:e.map(function(e){return ct(e.id)})}})}}};var dt=Object(i["connect"])(function(e,t){var r=t.userId;return{member:Object(w["d"])(e,r)}},ut)(lt);var pt=r(3178);var vt=new M["b"]("files");var mt=Object($e["a"])(Ze["a"]);var ht={files:l["b"].arrayOf(l["b"].shape({id:l["b"].string,ts:l["b"].number})),filetype:l["b"].string,user:l["b"].string,scrollmark:l["b"].shape({key:l["b"].string,offset:l["b"].number}),fetchFilesPre:l["b"].func,fetchFilesPost:l["b"].func,saveScrollmark:l["b"].func,setFiletype:l["b"].func,setUser:l["b"].func,previewFile:l["b"].func,clogger:l["b"].object.isRequired,useGlobalNav:l["b"].bool,clogFileClick:l["b"].func,overStorageLimit:l["b"].bool.isRequired};var ft={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:_["noop"],fetchFilesPost:_["noop"],saveScrollmark:_["noop"],setFiletype:_["noop"],setUser:_["noop"],previewFile:_["noop"],useGlobalNav:false,clogFileClick:_["noop"]};var bt=function(e){g()(t,e);function t(e){p()(this,t);var r=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["a"])(r,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody","focus","isEmpty","isFocusableItem","onItemTabWithin"]);r.requestPre=null;r.requestPost=null;r.reachedStart=false;r.reachedEnd=false;r.keys=null;r.layout=new Xe["a"];r.list=n.a.createRef();r.flexpane=n.a.createRef();r.layout.heightCache.DEFAULT_HEIGHT=69;return r}m()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.scrollmark,a=t.clogger,n=t.overStorageLimit;if(r){var i=r.key,s=r.offset;this.layout.setAnchor(i,s);this.props.saveScrollmark(null)}n&&a.track(Ye["l"].GROWTH_PRICING,{contexts:{ui_context:{action:Ye["w"].IMPRESSION,step:Ye["A"].FILE_PANE,ui_component:Ye["x"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props,a=r.filetype,n=r.user;if(t.filetype!==a||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.reachedStart=false;this.reachedEnd=false;this.layout&&this.layout.setAnchor(false)}}},{key:"onFileClick",value:function e(t){var r=t.id;var a=this.list.current;if(!a)return;if(!r)return;var n=this.props.clogger;n.track(Ye["l"].FLEXPANE_FILE_CLICKED,{click_file_id:r});this.props.saveScrollmark({key:r,offset:this.layout.getOffsetForKey(r)-a.getScrollTop()});this.props.previewFile({fileId:r,flexOrigin:"files"})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.reachedStart)return false;var r=this.props,a=r.filetype,n=r.user;this.requestPre=this.props.fetchFilesPre({types:a,user:n});return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.paging;var a=r.page;1===a&&(t.reachedStart=true)}).finally(function(){t.requestPre=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.reachedEnd)return false;var r=this.props,a=r.filetype,n=r.user;this.requestPost=this.props.fetchFilesPost({types:a,user:n});return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.paging;var a=r.page,n=r.pages;a>=n&&(t.reachedEnd=true)}).finally(function(){t.requestPost=null})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.reachedEnd)return this.fetchPre();if(this.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"clogFileClick",value:function e(t,r){this.props.clogFileClick({file:r,payload:t})}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(Ye["l"].GROWTH_PRICING,{contexts:{ui_context:{action:Ye["w"].CLICK,step:Ye["A"].FILE_PANE,ui_element:Ye["z"].PRICING_LINK,ui_component:Ye["x"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isEmpty",value:function e(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"isFocusableItem",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.key;return Object(u["a"])(r)}},{key:"renderRow",value:function e(t){var r=this.keys[t];if(!r)return null;switch(r[0]){case"L":return n.a.createElement("div",{className:"p-file_list__loading"},vt.t("Loading\u2026"));case"P":return n.a.createElement("div",{className:"p-file_list__empty"},vt.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderFile",value:function e(t){var r=this.props.files[t]&&this.props.files[t].id;if(!r)return null;var a=t===this.props.files.length-1;var i=j()("p-file_list__file",{"p-file_list__file--last":a});return n.a.createElement(mt,{fileId:r,className:i,clogLinkClick:this.clogFileClick,fullWidth:true,useRowAction:true})}},{key:"renderStorageWarningBanner",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},n.a.createElement("div",{className:"display_flex"},n.a.createElement(Te["b"],{className:"p-message_limit_banner__graphic",type:"eye-closed"}),n.a.createElement("div",null,n.a.createElement("span",null,vt.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(e){var r=e.text;return n.a.createElement(G["a"],{href:"/pricing?ui_step="+Ye["A"].FILE_PANE+"&ui_element="+Ye["z"].PRICING_LINK,onClick:t.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},r)})))))}},{key:"renderBody",value:function e(){var t=this;var r=this.props,a=r.files,i=r.overStorageLimit;var s=a.map(function(e){return e.id});this.keys=[].concat(ze()(s));this.reachedEnd||this.keys.push("Loading"+this.keys.length);this.isEmpty()&&this.keys.push("Placeholder");return n.a.createElement(n.a.Fragment,null,i&&this.renderStorageWarningBanner(),n.a.createElement("div",{className:"p-file_list"},n.a.createElement(k["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(Je["a"],{width:r,height:a,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,onItemTabWithin:t.onItemTabWithin,onItemClick:t.onFileClick,isFocusableItem:t.isFocusableItem})})))}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.filetype,i=r.useGlobalNav,s=r.user;return n.a.createElement(Ee["a"],{ref:this.flexpane,focus:this.focus,isEmpty:this.isEmpty(),title:vt.t("Files"),className:j()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:function e(){return n.a.createElement("div",{className:j()("p-file_list__filters",{"p-file_list__filters--global-nav":i})},n.a.createElement(tt["a"],{filetype:a,onChange:t.props.setFiletype}),n.a.createElement(dt,{userId:s,onChange:function e(r){t.props.setUser(r)}}))},viewId:"file-list",kbNavOrder:Object(ne["a"])()?void 0:4.8})}}]);return t}(a["PureComponent"]);bt.displayName="FileList";bt.defaultProps=ft;var gt=function e(t){return{files:Object(Qe["getFlexpaneFiles"])(t),scrollmark:Object(Qe["getScrollmark"])(t),filetype:Object(Qe["getFiletype"])(t),user:Object(Qe["getUser"])(t),useGlobalNav:Object(x["b"])(t),clogger:Object(et["a"])({state:t}),overStorageLimit:Object(ue["isOverStorageLimit"])(Object(oe["d"])(t))}};var _t={fetchFilesPre:function e(){return Qe["fetchFilesPre"].apply(void 0,arguments)},fetchFilesPost:function e(){return Qe["fetchFilesPost"].apply(void 0,arguments)},saveScrollmark:function e(){return Qe["saveScrollmark"].apply(void 0,arguments)},setFiletype:function e(){return Qe["setFiletype"].apply(void 0,arguments)},setUser:function e(){return Qe["setUser"].apply(void 0,arguments)},previewFile:function e(){return se["c"].apply(void 0,arguments)},clogFileClick:function e(){return T["a"].apply(void 0,arguments)}};var yt=Object(i["connect"])(gt,_t)(function(e){var t=e.forwardedRef,r=Ve()(e,["forwardedRef"]);return n.a.createElement(bt,He()({ref:t},r))});var Ot=n.a.forwardRef(function(e,t){return n.a.createElement(yt,He()({forwardedRef:t},e))});function kt(e){if(e.fileId)return n.a.createElement(qe,e);if(e.list)return n.a.createElement(Ot,e);return null}kt.defaultProps={fileId:null,list:false,origin:null};function Et(e){var t=Object(c["i"])(e);var r=Object(c["e"])(e)[0];var a=Object(c["c"])(e);var n=Object(u["a"])(r);return{list:"files"===t&&!n,fileId:"files"===t&&n?r:null,origin:"files"===t?a:null}}var jt=Object(i["connect"])(Et)(kt);var Ct=jt;var St=r(163);var wt=function e(t,r){if(!t)throw new Error("mountFilesFlexpane must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(St["a"],null,n.a.createElement(Ct,null))),r)};var It=wt;var Tt=r(44);Object(Tt["a"])("interop.mountFilesFlexpane",It)},,,,,,,,function(e,t,r){},function(e,t,r){"use strict";r.d(t,"a",function(){return m});r.d(t,"b",function(){return h});var a=r(0);var n=r(15);var i=r(12);var s=r(45);var o=r(21);var l=r(1406);var c=r(4389);var u="HISTORY-NAVIGATION";var d="back";var p="forward";var v=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.fromKeyboardShortcut,n=r.elementName;var i=Object(s["a"])({state:t});i.track(o["l"].HISTORY_NAVIGATION,{contexts:{ui_context:{action:a?o["w"].KEYDOWN:o["w"].CLICK,ui_properties:{element_type:o["k"].BUTTON,element_name:n}}}})};var m=Object(n["b"])("Go back in history",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.event,n=r.fromKeyboardShortcut,s=void 0!==n&&n;a&&a.preventDefault();var o=t();var p=Object(i["a"])({state:o,label:u});if(Object(l["b"])(o)){if(Object(c["a"])()){p.debug("This is the beginning of the history stack \u2b05\ufe0f");return}p.debug("Moving back in history");window.history.back();Object(c["d"])();v(o,{fromKeyboardShortcut:s,elementName:d})}else{p.debug("Moving back in history");window.history.back();v(o,{fromKeyboardShortcut:s,elementName:d})}});m.propTypes={event:a["b"].object,fromKeyboardShortcut:a["b"].bool};var h=Object(n["b"])("Go forward in history",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.event,n=r.fromKeyboardShortcut,s=void 0!==n&&n;a&&a.preventDefault();var o=t();var d=Object(i["a"])({state:o,label:u});if(Object(l["b"])(o)){if(Object(c["b"])()){d.debug("This is the end of the history stack \u27a1\ufe0f");return}d.debug("Moving forward in history");window.history.forward();Object(c["e"])();v(o,{fromKeyboardShortcut:s,elementName:p})}else{d.debug("Moving forward in history");window.history.forward();v(o,{fromKeyboardShortcut:s,elementName:p})}});h.propTypes={event:a["b"].object,fromKeyboardShortcut:a["b"].bool}},,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(88);var o=r.n(s);var l=r(119);var c=r(27);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(2);var y=r(1757);var O=r(10);var k=r(39);var E=r(4);var j=r(759);var C=r(296);var S=r(38);var w=r(921);var I=r(37);var T=r.n(I);var A=r(3);var N=r.n(A);var P=r(26);var R=r.n(P);var M=r(2414);var x=r(207);var D=r(16);var F=r.n(D);var L=r(1352);var B=r(15);var U=r(85);var q=r(77);var G=r(17);var H=r(34);var W=r(683);var V=r(1530);var K=r(164);var z=new O["b"]("files");var Q=Object(B["b"])("build file summary for aria labels",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fileId,n=r.hasFocus;var i=t();if(!(Object(W["isScreenReaderEnabled"])(i)||n))return;var s=Object(U["getFileById"])(i,a);if(!s)return;var o=s.created,l=s.timestamp,c=s.user;var u=o||l;var d=Object(q["isExternal"])(s)?Object(V["a"])(s):Object(q["getFileType"])(s);var p=Object(q["getFileDisplayName"])(s);var v=Object(G["getPrefCompliantMemberNameById"])(i,c);var m=Object(K["k"])(u,{shortenMonth:false,excludeYear:Object(K["i"])(u)});var h=Object(H["g"])(i,"time24");var f=Object(K["p"])(u,{do24hrTime:h});var b=z.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:d,fileName:p,userName:v,dateStr:m,timeStr:f});return b});Q.propTypes={fileId:g["b"].string.isRequired,hasFocus:g["b"].bool};var Y=Q;var J=r(1368);var X=r(537);var Z=r(96);var $=r(3257);var ee=function e(){return n.a.createElement("div",{className:"p-flexpane__loader_item"},n.a.createElement(Z["a"],{noMargin:true,size:"medium"}))};ee.displayName="FlexpaneLoaderItem";var te=ee;var re=r(55);var ae=r(1092);var ne=r(925);var ie=r(926);var se=r(1093);var oe=r(1776);var le=r(762);var ce=r(1066);var ue=r(1224);var de=r(1214);var pe=r(1347);var ve=r(1095);var me=r(1832);var he=r(1215);var fe=r(1778);var be=r(1779);var ge=r(318);var _e=r(360);var ye=r(41);var Oe={msg:g["b"].object.isRequired,hasReactionOrReplies:g["b"].bool};var ke={hasReactionOrReplies:false};var Ee=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this.props,r=t.hasReactionOrReplies,a=t.msg;if(!r)return null;return n.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies","data-qa":"starred-item-reaction-reply-bar"},n.a.createElement(fe["a"],{msg:a}),n.a.createElement(be["a"],{msg:a,flexOrigin:"starred_items"}))}}]);return t}(n.a.PureComponent);Ee.displayName="StarredItemReactionReplyBar";Ee.defaultProps=ke;var je=function e(t,r){var a=r.msg;var n=Object(_e["b"])(a);var i=Object(ge["getReactionsForKey"])(t,n);var s=Object(ye["getReplyCount"])(a);return{hasReactionOrReplies:!!(s>0||i&&i.length)}};var Ce=Object(i["connect"])(je)(Ee);var Se=r(1722);var we={msg:g["b"].object.isRequired,className:g["b"].string,"data-qa":g["b"].string};var Ie={className:void 0,"data-qa":void 0};var Te=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t["data-qa"];var i=F()("p-starred_item__message",this.props.className);return n.a.createElement(ve["a"],{className:i,"data-qa":a},n.a.createElement(he["a"],{msg:r,position:"inside",className:"p-starred_item__message_actions",showComment:false,showShare:false,showReact:false,showJump:true,showMoreActions:false,jumpOrigin:"starred_items"},n.a.createElement(pe["a"],{msg:r},n.a.createElement(de["a"],{light:n.a.createElement(ae["a"],{msg:r,size:36})},n.a.createElement(ne["a"],{msg:r}),"\xa0\xa0",n.a.createElement(ie["a"],{msg:r,full:true}),n.a.createElement("br",null),n.a.createElement(se["a"],{msg:r}),n.a.createElement(ce["a"],{msg:r,blocksContainerContext:re["a"].starred_message}),n.a.createElement(oe["a"],{msg:r}),n.a.createElement(le["b"],{msg:r}),n.a.createElement(ue["a"],{msg:r}),n.a.createElement(me["a"],{flexOrigin:"starred_items",msg:r}),n.a.createElement(Ce,{msg:r})))))}}]);return t}(a["PureComponent"]);Te.displayName="StarredItemMessage";Te.defaultProps=Ie;var Ae=Te;var Ne=r(100);var Pe=r(1794);var Re={file:g["b"].object.isRequired,id:g["b"].string.isRequired,className:g["b"].string,useRowAction:g["b"].bool,previewFile:g["b"].func,"data-qa":g["b"].string};var Me={className:void 0,useRowAction:true,previewFile:_["noop"],"data-qa":void 0};var xe=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onFileClick=r.onFileClick.bind(r);return r}v()(t,[{key:"onFileClick",value:function e(t,r){if(!r)return;var a="starred_items";this.props.previewFile({fileId:r.id,flexOrigin:a})}},{key:"render",value:function e(){var t=F()("p-starred_item__message",this.props.className);var r=this.props["data-qa"];if(!this.props.file)return null;return n.a.createElement(Pe["a"],{file:this.props.file,className:t,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:false,includeRootStarAction:true,fullWidth:true,onClick:this.onFileClick,"data-qa":r})}}]);return t}(a["PureComponent"]);xe.displayName="StarredItemFile";xe.defaultProps=Me;var De=function e(t,r){var a=r.id;return{file:Object(U["getFileById"])(t,a)}};var Fe=Object(i["connect"])(De,{previewFile:Ne["c"]})(xe);var Le={comment:g["b"].object,fileId:g["b"].string,className:g["b"].string,"data-qa":g["b"].string};var Be={comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0};var Ue=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this.props,r=t.comment,a=t.fileId,i=t.className,s=t["data-qa"];if(!r)return null;var o={user:r.user,ts:r.timestamp.toString(),subtype:"file_comment",comment:r,files:[a]};return n.a.createElement(Ae,{msg:o,className:i,"data-qa":s})}}]);return t}(a["PureComponent"]);Ue.displayName="StarredItemFileComment";Ue.defaultProps=Be;var qe=function e(t,r){var a=r.fileId,n=r.commentId;return{comment:Object(U["getFileCommentById"])(t,a,n)}};var Ge=Object(i["connect"])(qe)(Ue);var He=new O["b"]("starred_items");var We=Object(J["b"])(Ae);var Ve={fetchMoreItems:g["b"].func,isLoading:g["b"].bool,items:g["b"].arrayOf(g["b"].object.isRequired),makeMessageSummary:g["b"].func.isRequired,makeFileSummary:g["b"].func.isRequired,onItemTabWithin:g["b"].func};var Ke={fetchMoreItems:_["noop"],isLoading:false,items:void 0,onItemTabWithin:_["noop"]};var ze={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var Qe=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(r,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]);r.getItemKeys=Object(x["createSelector"])(function(e){var t=e.items;return t},function(e){var t=e.isLoading;return t},function(e,t){var a=["top-anchor-hack"];var n=e.map(function(e){return r.getStarredItemId(e)});a.push.apply(a,R()(n));t&&a.push("loader");return a});r.list=n.a.createRef();r.state={hasKeyboardFocus:false};return r}v()(t,[{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getStarredItemId",value:function e(t){switch(t.type){case ze.MESSAGE:return t.channel+t.ts;case ze.FILE:return t.id;case ze.FILE_COMMENT:return t.id;default:return null}}},{key:"getAriaLabelForRow",value:function e(t){var r=this.props.items;var a=this.state.hasKeyboardFocus;var n=r[t-1];if(!n||!n.type)return null;if(n.type===ze.MESSAGE)return this.props.makeMessageSummary({channelId:n.channel,ts:n.ts,hasFocus:a,viewContext:k["MESSAGE_CONTAINERS"].STARS_FLEXPANE});return this.props.makeFileSummary({fileId:n.id,hasFocus:a})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var r=t.index;var a=this.props,n=a.isLoading,i=a.items;var s=this.getItemKeys({isLoading:n,items:i});var o=s[r];if(!o)return false;if("top-anchor-hack"===o)return false;if("loader"===o)return false;return true}},{key:"renderItem",value:function e(t){var r=this.props,a=r.isLoading,i=r.items;var s=this.getItemKeys({isLoading:a,items:i});if("top-anchor-hack"===s[t])return n.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===s[t])return n.a.createElement(te,null);var o=i[t-1];var l={key:this.getStarredItemId(o),className:F()("p-starred_item",{"p-starred_item--first":o===i[0]}),"data-qa":"starred_item_"+o.type};switch(o.type){case ze.MESSAGE:return n.a.createElement(We,N()({},l,{channelId:o.channel,ts:o.ts}));case ze.FILE:return n.a.createElement(Fe,N()({},l,{id:o.id}));case ze.FILE_COMMENT:return n.a.createElement(Ge,N()({},l,{fileId:o.fileId,commentId:o.id}));default:return null}}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.isLoading,i=r.items,s=r.onItemTabWithin;return n.a.createElement(M["a"],null,function(e){var r=e.width,o=e.height;return n.a.createElement(X["a"],{ref:t.list,width:r,height:o,keys:t.getItemKeys({isLoading:a,items:i}),rowRenderer:t.renderItem,loadPost:t.props.fetchMoreItems,animateOnScroll:false,ariaLabel:He.t("Starred Items"),getAriaLabelForRow:t.getAriaLabelForRow,isFocusableItem:t.isFocusableItem,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onItemTabWithin:s})})}}]);return t}(a["PureComponent"]);Qe.displayName="StarredItemsList";Qe.defaultProps=Ke;function Ye(e){return{makeMessageSummary:function t(){return e(L["a"].apply(void 0,arguments))},makeFileSummary:function t(){return e(Y.apply(void 0,arguments))}}}var Je=Object(i["connect"])(null,Ye)(function(e){var t=e.forwardedRef,r=T()(e,["forwardedRef"]);return n.a.createElement(Qe,N()({ref:t},r))});var Xe=n.a.forwardRef(function(e,t){return n.a.createElement(Je,N()({forwardedRef:t},e))});var Ze=new O["b"]("starred_items");var $e={currentPage:g["b"].number.isRequired,fetchStarsList:g["b"].func,isLoading:g["b"].bool,starredItems:g["b"].arrayOf(g["b"].object.isRequired),totalPages:g["b"].number.isRequired,cursorMark:g["b"].string,featureStarredItemsCursorPagination:g["b"].bool.isRequired};var et={fetchStarsList:_["noop"],isLoading:false,starredItems:void 0,cursorMark:void 0};var tt=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["a"])(r,["fetchMoreStarredItems","fetchStarredItems","renderEmpty","focus","onItemTabWithin"]);r.list=n.a.createRef();r.flexpane=n.a.createRef();r.requestStars=null;return r}v()(t,[{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.starredItems,n=r.cursorMark,i=r.featureStarredItemsCursorPagination;if(!i)return;!Object(_["isEmpty"])(t.starredItems)&&Object(_["isEmpty"])(a)&&n&&this.fetchStarredItemsCursor(n)}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"fetchStarredItems",value:function e(t){if(t&&t>this.props.totalPages)return;this.props.fetchStarsList({exclude:"Ch,Gh,Dh",count:20,page:t})}},{key:"fetchStarredItemsCursor",value:function e(t){var r=this;if(this.requestStars)return false;this.requestStars=this.props.fetchStarsList({exclude:"Ch,Gh,Dh",limit:20,cursor:t});return this.requestStars.finally(function(){r.requestStars=null})}},{key:"fetchMoreStarredItems",value:function e(){var t=this.props,r=t.isLoading,a=t.currentPage,n=t.cursorMark,i=t.featureStarredItemsCursorPagination;if(r)return;if(i){if(!n)return;this.fetchStarredItemsCursor(n)}else this.fetchStarredItems(a+1)}},{key:"renderEmpty",value:function e(t){var r=t.isOffline;if(r)return n.a.createElement(C["a"],{title:Ze.t("Couldn\u2019t load your Starred Items"),description:Ze.t("Try again when you\u2019re online"),primaryActionText:Ze.t("Retry"),onClickPrimaryAction:this.fetchStarredItems});return n.a.createElement(C["a"],{imageUrl:cdn_url+"/b83595/img/posts.png",imageUrl2x:cdn_url+"/b83595/img/posts@2x.png",title:Ze.t("No starred items",{fallbackHash:"d46c3b7fbafdaa0aee845d35ce59b0d5f6de8b70"}),description:Ze.t("Star a message or file to save it here. Mark your to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!",{fallbackHash:"02f88652fff0da938a523c5543e133eefa38b085"})})}},{key:"render",value:function e(){var t=this;return n.a.createElement(w["a"],{ref:this.flexpane,focus:this.focus,className:"p-starred_items_flexpane",isEmpty:Object(_["isEmpty"])(this.props.starredItems),isLoading:this.props.isLoading,renderBody:function e(){return n.a.createElement(Xe,{ref:t.list,fetchMoreItems:t.fetchMoreStarredItems,isLoading:t.props.isLoading,items:t.props.starredItems,onItemTabWithin:t.onItemTabWithin})},renderEmpty:this.renderEmpty,title:Ze.t("Starred Items"),viewId:k["MESSAGE_CONTAINERS"].STARS_FLEXPANE,kbNavOrder:Object(S["a"])()?void 0:4.3})}}]);return t}(a["PureComponent"]);tt.displayName="StarredItemsFlexpane";tt.defaultProps=et;var rt=function e(t){return{currentPage:Object(j["getCurrentPageNumber"])(t),featureStarredItemsCursorPagination:Object(E["isFeatureEnabled"])(t,"feature_starred_items_cursor_pagination"),isLoading:Object(j["getLoadingState"])(t),starredItems:Object(j["getAllStarredItems"])(t),totalPages:Object(j["getTotalPages"])(t),cursorMark:Object(j["getCursorMark"])(t)}};var at={fetchStarsList:function e(){return j["fetchStarsList"].apply(void 0,arguments)}};var nt=Object(i["connect"])(rt,at)(tt);var it=nt;var st=r(163);var ot=function e(t,r){if(!t)throw new Error("mountStarredItemsFlexpane must be called with a teamId parameter");var a=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(st["a"],null,n.a.createElement(it,null))),r)};var lt=function e(t){o.a.unmountComponentAtNode(t)};var ct=r(44);Object(ct["a"])("interop.mountStarredItemsFlexpane",ot);Object(ct["a"])("interop.unmountStarredItemsFlexpane",lt)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(0);var c=r(68);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(54);var _=r(211);var y=r(364);var O=r(4);var k=r(1218);var E=r(19);var j=r(832);var C=r(1757);var S=r(10);var w=r(3);var I=r.n(w);var T=r(11);var A=r(1175);var N=r(2217);var P=new S["b"]("admin");var R={entities:{channels:{includeArchived:false,includeRequired:true}},allowEmptyQuery:true,returnMetadata:false,sort:{preferExactMatch:false,frecency:false,preferChannelsUserBelongsTo:true,flat:true}};var M={featureRequestToInvite:l["b"].bool.isRequired,isDisabled:l["b"].bool.isRequired,onChangeChannel:l["b"].func.isRequired,selectedChannel:l["b"].object};var x={selectedChannel:null};var D=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(C["a"])(r,["renderEmptyStateMessage","processChannelSearchResults"]);return r}v()(t,[{key:"getChannelSelectObject",value:function e(t){if(!t)return null;return{entity:t,label:Object(T["getName"])(t),value:t.id}}},{key:"processChannelSearchResults",value:function e(t){if(!this.props.featureRequestToInvite)return null;var r=[];var a=[];t.forEach(function(e){Object(T["isExternallySharedChannel"])(e.entity)||(Object(T["isPrivateChannel"])(e.entity)?a.push(I()({},e,{label:Object(T["getName"])(e.entity)})):r.push(I()({},e,{label:Object(T["getName"])(e.entity)})))});var n=[];r.length&&n.push({label:P.t("Channels"),options:r});a.length&&n.push({label:P.t("Private Channels"),options:a});return Promise.resolve(n)}},{key:"renderEmptyStateMessage",value:function e(){if(!this.props.featureRequestToInvite)return null;return n.a.createElement("div",null,P.rt("No channels found"))}},{key:"renderOption",value:function e(t){var r="heading"===t.type;if(r)return t.label;return n.a.createElement(N["a"],{channel:t.entity})}},{key:"render",value:function e(){if(!this.props.featureRequestToInvite)return null;return n.a.createElement(A["e"],{ariaLabel:"",className:"admin_invite_settings_channel_select cursor_pointer nudge_left_2",classPrefix:"admin_invite_settings",emptyStateMessage:this.renderEmptyStateMessage,isDisabled:this.props.isDisabled,onOptionSelected:this.props.onChangeChannel,placeholderText:P.t("Choose a channel"),processOptions:this.processChannelSearchResults,renderOption:this.renderOption,searcherOptions:R,selectedOption:this.getChannelSelectObject(this.props.selectedChannel),selectId:"invites_channel_select",width:"100%"})}}]);return t}(a["Component"]);D.displayName="AdminInviteSettingsChannelSelect";D.defaultProps=x;var F=D;var L=r(4031);var B={SLACKBOT:"slackbot",CHANNEL:"channel"};var U=new S["b"]("admin");var q={inviteRequestsApprovalChannel:"invite_requests_approval_channel",invitesOnlyAdmin:"invites_only_admins"};var G={invitesOnlyAdmin:l["b"].bool.isRequired,selectedChannel:l["b"].object,setMultipleTeamPrefsByApi:l["b"].func.isRequired,featureRequestToInvite:l["b"].bool};var H={selectedChannel:void 0,featureRequestToInvite:false};var W=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={inviteDeliveryMethod:e.selectedChannel?B.CHANNEL:B.SLACKBOT,isSaving:false,requireAdminApproval:e.invitesOnlyAdmin,selectedChannel:e.selectedChannel,submitButtonText:U.t("Save")};Object(C["a"])(r,["onChangeChannel","onSubmit"]);return r}v()(t,[{key:"onChangeAdminApproval",value:function e(t){this.setState(function(){return{requireAdminApproval:t,inviteDeliveryMethod:B.CHANNEL,submitButtonText:U.t("Save")}})}},{key:"onChangeChannel",value:function e(t){this.setState(function(){return{selectedChannel:t.entity,submitButtonText:U.t("Save")}})}},{key:"onRadioSelect",value:function e(t){this.setState(function(){return{inviteDeliveryMethod:t,submitButtonText:U.t("Save")}})}},{key:"onSubmit",value:function e(){var t=this;if(!this.props.featureRequestToInvite)return Promise.resolve();this.setState(function(){return{isSaving:true}});return this.props.setMultipleTeamPrefsByApi({invite_requests_approval_channel:this.getSelectedChannelIdForSubmit(),invites_only_admins:this.state.requireAdminApproval}).then(function(){t.setState(function(){return{submitButtonText:U.t("Saved")}})}).catch(function(){TS.generic_dialog.alert(U.t("Sorry! Something went wrong. Please try again."))}).finally(function(){t.setState(function(){return{isSaving:false}})})}},{key:"getSelectedChannelIdForSubmit",value:function e(){return this.state.requireAdminApproval&&this.state.inviteDeliveryMethod===B.CHANNEL?this.state.selectedChannel.id:null}},{key:"maybeRenderSubForm",value:function e(t){var r=this;if(!this.props.featureRequestToInvite)return null;if(!t)return null;var a=this.state,i=a.inviteDeliveryMethod,s=a.selectedChannel;return n.a.createElement("div",null,n.a.createElement("p",{className:"admin_invite_settings_delivery_instructions margin_top_200"},U.t("Send invitation requests to...")),n.a.createElement(y["a"],{className:"margin_bottom_0"},n.a.createElement("div",null,n.a.createElement(g["a"],{htmlFor:"invites_destination_slackbot",className:"admin_invite_settings_delivery_method",text:U.t("All admins, via Slackbot"),type:"inline",cursor:"pointer"},n.a.createElement(_["a"],{id:"invites_destination_slackbot",checked:i===B.SLACKBOT,onChange:function e(){return r.onRadioSelect(B.SLACKBOT)}}))),n.a.createElement("div",null,n.a.createElement(g["a"],{htmlFor:"invites_destination_channel",className:"admin_invite_settings_delivery_method",text:U.t("This channel:"),type:"inline",cursor:"pointer"},n.a.createElement(_["a"],{id:"invites_destination_channel",checked:i===B.CHANNEL,onChange:function e(){return r.onRadioSelect(B.CHANNEL)}})),n.a.createElement(F,{featureRequestToInvite:this.props.featureRequestToInvite,isDisabled:i!==B.CHANNEL,onChangeChannel:this.onChangeChannel,selectedChannel:s}))))}},{key:"render",value:function e(){var t=this;if(!this.props.featureRequestToInvite)return null;var r=this.state,a=r.inviteDeliveryMethod,i=r.isSaving,s=r.requireAdminApproval,o=r.selectedChannel,l=r.submitButtonText;var c=s&&a===B.CHANNEL&&!o;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(g["a"],{htmlFor:"change_invites_only_admins",className:"checkbox",text:U.t("Require admin approval"),type:"inline"},n.a.createElement("input",{type:"checkbox",name:"invites_only_admins",id:"change_invites_only_admins",checked:s,onChange:function e(){return t.onChangeAdminApproval(!s)}}))),this.maybeRenderSubForm(s),n.a.createElement(j["a"],{className:"admin_invite_settings_submit_button",disabled:c,onClick:this.onSubmit,loading:i},l))}}]);return t}(a["Component"]);W.displayName="AdminInviteSettings";W.defaultProps=H;function V(e){var t=Object(c["a"])(e,q.inviteRequestsApprovalChannel);return{selectedChannel:t&&Object(E["d"])(e,t,true),invitesOnlyAdmin:Object(c["a"])(e,q.invitesOnlyAdmin),featureRequestToInvite:Object(O["isFeatureEnabled"])(e,"feature_request_to_invite")}}var K={setMultipleTeamPrefsByApi:k["a"]};var z=Object(i["connect"])(V,K)(W);var Q={invitesOnlyAdmin:l["b"].bool};var Y={invitesOnlyAdmin:void 0};function J(e){if(void 0===e.invitesOnlyAdmin)return null;return n.a.createElement(z,null)}J.displayName="AdminInviteSettingsContainer";function X(e){return{invitesOnlyAdmin:Object(c["a"])(e,"invites_only_admins")}}J.defaultProps=Y;var Z=Object(i["connect"])(X)(J);function $(e,t){var r=document.getElementById("admin_invite_settings_mount_point");if(!r||!e)return;var a=Object(o["d"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(Z,t)),r)}var ee={mountAdminInviteSettings:$};var te=r(44);Object(te["a"])("interop.mountAdminInviteSettings",$)},,function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(14);var n=r(73);var i=Object(a["b"])(function(e){return"Pwelcome"===Object(n["a"])(e)})},,function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"g",function(){return d});r.d(t,"e",function(){return p});r.d(t,"f",function(){return v});r.d(t,"d",function(){return m});r.d(t,"c",function(){return h});r.d(t,"b",function(){return b});var a=r(2);var n=r.n(a);var i={"en-us":["en-US","English"],"es-es":["es","Spanish"],"fr-fr":["fr","French"],"de-de":["de","German"],"ja-jp":["ja","Japanese"]};var s=function e(){return new Promise(function(e){var t=void 0;var r=function r(){if(window.$zopim&&window.zE&&window.zE.hide){clearInterval(t);window.zE.hide();e()}};t=setInterval(r,500);r()})};var o=function e(t){window.$zopim&&window.$zopim(function(){window.$zopim.livechat.addTags(t)})};var l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=t.name,a=t.email;window.zE.identify({name:r,email:a})};var c=function e(t){var r=i[t];if(r){var a=r[0];var n=r[1];window.zE.setLocale(a);o(n)}};var u=function e(){window.zE.show();window.zE.activate()};var d=function e(){window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.show()})};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.onHide(t)})};var v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.onShow(t)})};var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.setOnChatStart(t)})};var h=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.setOnChatEnd(t)})};var f=function e(){window.$zopim&&window.$zopim(function(){if(!window.$zopim.livechat.isChatting()){m(d);window.$zopim.livechat.sendVisitorPath({url:"https://slack.com",title:"Slack"});window.$zopim.livechat.sendVisitorPath()}})};var b=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s().then(function(){l(t);c(r);a.autoOpenOnChatStart&&f();u();return Promise.resolve(true)}).catch(function(){return Promise.resolve(false)})}},,,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(4501);Object(a["a"])("interop.zendeskWidget",{initWidget:n["b"],openChat:n["g"],onHideChat:n["e"],onShowChat:n["f"],enableChat:n["a"],onChatStart:n["d"],onChatEnd:n["c"]})},,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(88);var l=r.n(o);var c=r(13);var u=r(2);var d=r(119);var p=r(27);var v=r(2261);var m=r(163);var h=function e(t,r){var a=document.getElementById("channel_create_modal_mount_point");if(!a)throw new Error("Could not find a valid channel create modal mount point.");if(!t)throw new Error("mountChannelCreateModal must be called with a valid teamId parameter.");var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(m["a"],null,s.a.createElement(v["a"],n()({},r,{onClose:o})))),a)};var f={mountChannelCreateModal:h};var b=r(44);Object(b["a"])("interop.mountChannelCreateModal",h)},,,,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(1453);Object(a["a"])("interop.welcomePlace",{isWelcomePlacePageEnabled:function e(){return Object(n["h"])(TS.redux.getState())}})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(37);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(1);var f=r.n(h);var b=r(0);var g=r(16);var _=r.n(g);var y=r(13);var O=r(2);var k=r(1757);var E=r(4);var j=r(1348);var C=r(1827);var S=r(11);var w=r(17);var I=r(231);var T=r(151);var A=r(19);var N=r(24);var P=r(48);var R=r(150);var M=r(100);var x=r(308);var D=r(99);var F=r(38);var L=r(10);var B=r(12);var U=r(899);var q=r(157);var G=r(289);var H=r(139);var W=r(28);var V=r(66);var K=r(707);var z=r(296);var Q=r(537);var Y=r(921);var J=r(50);var X=r(26);var Z=r.n(X);var $=r(1202);var ee={groupId:b["b"].string.isRequired,isActive:b["b"].bool.isRequired,isAutoGenerated:b["b"].bool.isRequired,isDetailsView:b["b"].bool,featureSonicUserGroups:b["b"].bool,onEnableUserGroup:b["b"].func,onDisableUserGroup:b["b"].func,openModal:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,menuProps:b["b"].object,onClick:b["b"].func};var te={isDetailsView:false,featureSonicUserGroups:false,onEnableUserGroup:O["noop"],onDisableUserGroup:O["noop"],canEditUserGroups:O["noop"],canCreateAndDeleteUserGroups:O["noop"],openModal:O["noop"],menuProps:{},onClick:O["noop"]};var re=new L["b"]("user_groups");var ae=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]);return r}u()(t,[{key:"onEnableUserGroup",value:function e(){this.props.onClick();return this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function e(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})});this.props.onClick()}},{key:"onEditDetails",value:function e(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,r=t.isAutoGenerated,a=t.isDetailsView;if(r&&a)return null;var n=[];a||r||n.push({key:"menu-edit-members",label:re.t("Edit group members..."),onSelected:this.onEditMembers});n.push({key:"menu-edit-details",label:re.t("Edit group details..."),onSelected:this.onEditDetails});return n}},{key:"getMenuItems",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=[];if(this.userGroupIsEditable()){var a=this.getEditMenuItems();a&&r.push.apply(r,Z()(a))}this.canEnableUserGroup()?r.push({key:"menu-enable",label:re.t("Enable group"),onSelected:function e(){return t.onEnableUserGroup()}}):this.canDisableUserGroup()&&r.push({key:"menu-disable",label:re.t("Deactivate group"),danger:true,onSelected:function e(){return t.onDisableUserGroup()}});return r}},{key:"userGroupIsEditable",value:function e(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function e(t){var r=t.action,a=t.onSubmit;var n=this.props.groupId;return f.a.createElement(Pe,{groupId:n,action:r,onSubmit:a})}},{key:"renderEditDialog",value:function e(t){return f.a.createElement($["a"],{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(gt,{groupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(V["f"],n()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return f.a.createElement(V["b"],e)}))}}]);return t}(h["PureComponent"]);ae.displayName="UserGroupContextMenu";ae.defaultProps=te;var ne=function e(t,r){var a=r.groupId,n=r.isDetailsView;var i=Object(T["e"])(t,a);var s=Object(D["t"])(i);var o=Object(D["m"])(i);var l=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");return{isActive:s,isAutoGenerated:o,isDetailsView:n,canEditUserGroups:function e(){return Object(D["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(D["b"])(t)},featureSonicUserGroups:l}};var ie=function e(t,r){var a=r.groupId;return{openModal:function e(){return t(P["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(I["i"])({groupId:a}))},onDisableUserGroup:function e(){t(Object(I["g"])({groupId:a})).then(function(){return t(Object(M["o"])())})},onEnableUserGroup:function e(){t(Object(I["h"])({groupId:a})).then(function(){return t(Object(M["n"])({groupId:a}))})}}};var se=Object(y["connect"])(ne,ie)(ae);var oe=r(2410);var le=new L["b"]("user_groups");var ce={userGroup:b["b"].object,onEditMembers:b["b"].func.isRequired,onEditDetails:b["b"].func.isRequired,featureSonicUserGroups:b["b"].bool.isRequired};var ue={userGroup:void 0};var de=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderUserGroupOptionsMenu=r.renderUserGroupOptionsMenu.bind(r);return r}u()(t,[{key:"renderUserGroupOptionsMenu",value:function e(t){return f.a.createElement(se,{menuProps:t,groupId:this.props.userGroup.id,isDetailsView:true})}},{key:"renderUserGroupOptions",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=le.t("More actions");return f.a.createElement(V["e"],{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},f.a.createElement(J["c"],{tip:t,delay:J["a"],position:"top-right"},f.a.createElement(W["d"],{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":true,"aria-label":t,icon:"ellipsis"})))}},{key:"renderEditMembersButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(W["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":true},le.t("Edit Members"))}},{key:"renderEditDetailsButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(W["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":true},le.t("Edit Details"))}},{key:"renderPrimaryAction",value:function e(){if(Object(D["m"])(this.props.userGroup))return this.renderEditDetailsButton();return this.renderEditMembersButton()}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions())}}]);return t}(h["Component"]);de.displayName="UserGroupsDetailsActionBar";var pe=function e(t,r){var a=r.groupId;return{userGroup:Object(T["e"])(t,a),featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};de.defaultProps=ue;var ve=Object(y["connect"])(pe)(de);var me={members:"members",channels:"channels"};var he=new L["b"]("user_groups");var fe={userGroup:b["b"].shape({created_by:b["b"].string,date_create:b["b"].number,date_delete:b["b"].number,date_update:b["b"].number,deleted_by:b["b"].string,description:b["b"].string,enterprise_subteam_id:b["b"].string,handle:b["b"].string,id:b["b"].string,is_external:b["b"].bool,is_subteam:b["b"].bool,is_usergroup:b["b"].bool,name:b["b"].string,prefs:b["b"].shape({channels:b["b"].array,groups:b["b"].array}),team_id:b["b"].string,updated_by:b["b"].string,user_count:b["b"].number,users:b["b"].array,_name_lc:b["b"].string}),fetchUserGroupMembers:b["b"].func,onChannelSwitch:b["b"].func,removeMember:b["b"].func,removeChannel:b["b"].func,openModal:b["b"].func,openUserGroupList:b["b"].func,enqueueToast:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,showMemberProfile:b["b"].func,groupId:b["b"].string.isRequired,userGroupMembers:b["b"].array,newMembers:b["b"].array,userGroupDefaultChannels:b["b"].array,featureSonicUserGroups:b["b"].bool,featureSonicUserGroupsA11yRefactor:b["b"].bool};var be={userGroup:{},fetchUserGroupMembers:O["noop"],onChannelSwitch:O["noop"],removeMember:O["noop"],removeChannel:O["noop"],openModal:O["noop"],openUserGroupList:O["noop"],enqueueToast:O["noop"],canEditUserGroups:O["noop"],canCreateAndDeleteUserGroups:O["noop"],userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],showMemberProfile:O["noop"],featureSonicUserGroups:false,featureSonicUserGroupsA11yRefactor:false};var ge=Object(B["b"])();var _e=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent","focus","getAriaLabelForChannelRow","getAriaLabelForMemberRow","onItemTabWithin"]);r.memberList=f.a.createRef();r.channelsList=f.a.createRef();r.flexpane=f.a.createRef();r.channelListKeys=null;r.memberListKeys=null;return r}u()(t,[{key:"componentDidMount",value:function e(){Object(D["t"])(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}},{key:"componentDidUpdate",value:function e(t){var r=t.userGroup,a=r.users,n=s()(r,["users"]);var i=this.props.userGroup,o=i.users,l=s()(i,["users"]);Object(O["isEqual"])(n,l)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate")}},{key:"onRemoveMember",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function e(){r.props.removeMember(t).then(function(){r.props.enqueueToast({element:f.a.createElement(q["b"],null,he.t("Member removed from group."))})}).catch(function(e){ge.error("Error removing member from user group: "+e);"no_users_provided"===e.data.error&&r.props.enqueueToast({element:f.a.createElement(q["b"],null,he.t("User groups need to have at least one member."))})})},id:t})})}},{key:"onRemoveChannel",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function e(){r.props.removeChannel(t).then(function(){r.props.enqueueToast({element:f.a.createElement(q["b"],null,he.t("Channel removed from group."))})}).catch(function(e){ge.error("Error removing default channel from user group: "+e)})},id:t})})}},{key:"onAddMembers",value:function e(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function e(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function e(t){var r=t.type,a=t.id;r===me.members?this.onRemoveMember(a):r===me.channels&&this.onRemoveChannel(a)}},{key:"onViewProfile",value:function e(t){var r=t.type,a=t.id;if(r===me.members)return this.props.showMemberProfile({memberId:a});if(r===me.channels)return this.props.onChannelSwitch(a);return null}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"getTabs",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,r=t.userGroup,a=t.userGroupDefaultChannels,n=void 0===a?[]:a;var i=Object(D["l"])(r);return[{title:he.rt("Members"),titleCount:i,id:"user-groups-members-tab",content:this.renderMembersList()},{title:he.rt("Channels"),titleCount:n.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"getAriaLabelForChannelRow",value:function e(t){if(!this.channelListKeys)return null;var r=this.props.userGroupDefaultChannels;var a=r[t];return Object(j["a"])({type:Object(S["getChannelType"])(a),displayName:Object(S["getDisplayName"])(a),isShared:Object(S["isExternallySharedChannel"])(a),isOrgShared:Object(S["isOrgShared"])(a),isArchived:Object(S["isArchived"])(a)})}},{key:"getAriaLabelForMemberRow",value:function e(t){if(!this.memberListKeys)return null;var r=this.props.userGroupMembers;var a=r[t];return Object(C["a"])({name:Object(w["getMemberRealName"])(a),isDeleted:Object(w["isDeleted"])(a),isAppOrBot:false,isGuest:false})}},{key:"focus",value:function e(){var t=this.memberList.current||this.channelsList.current;t&&t.focus()}},{key:"displayMemberManagementDialog",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function e(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function e(){var t=this.props.userGroup;return this.props.canEditUserGroups()&&Object(D["t"])(t)}},{key:"canRemoveItem",value:function e(t){var r=this.props.userGroup;if(t===me.members&&Object(D["m"])(r))return false;return true}},{key:"renderHeader",value:function e(){var t=this.props.userGroup;return f.a.createElement("div",{className:"p-user_group_details__section"},f.a.createElement("div",{className:"p-user_group_details__name"},Object(D["h"])(t)),f.a.createElement("div",{className:"p-user_group_details__description"},Object(D["e"])(t)),f.a.createElement("div",{className:"p-user_group_details__handle"},Object(D["f"])(t,{includeAtSign:true})))}},{key:"renderActions",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;if(!this.userGroupIsEditable()||!this.props.canCreateAndDeleteUserGroups())return null;return f.a.createElement("div",{className:"p-user_group_details__section"},f.a.createElement(ve,{groupId:this.props.groupId,onEditMembers:function e(){return t.displayMemberManagementDialog()},onEditDetails:function e(){return t.displayEditDetailsDialog()}}))}},{key:"renderTabs",value:function e(){var t="user-groups-members-tab";var r=this.getTabs();return f.a.createElement(K["a"],{tabs:r,defaultTabId:t,fullHeight:true,fullWidthMenu:true})}},{key:"renderListItemOptionsMenu",value:function e(t){var r=this;var a=t.menuProps,i=t.id,s=t.type;if(!this.props.featureSonicUserGroups)return null;var o=s===me.channels?he.t("Open channel"):he.t("View profile");var l=[f.a.createElement(V["b"],{key:i,label:o,onSelected:function e(){return r.onViewProfile({type:s,id:i})}})];this.canRemoveItem(s)&&l.push(f.a.createElement(V["b"],{key:i,label:he.t("Remove from group..."),onSelected:function e(){return r.onRemoveFromGroup({type:s,id:i})},danger:true}));return f.a.createElement(V["f"],n()({},a,{width:"auto"}),l)}},{key:"renderMemberItem",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.userGroupIsEditable();var n=Object(O["includes"])(this.props.newMembers,r);var i=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":a,"p-user_group_base_row--active":n});var s={className:i,isContextButtonVisible:a,tooltip:this.renderTooltip(),onClick:function e(){return t.onViewProfile({type:me.members,id:r.id})},renderMenu:function e(a){return t.renderListItemOptionsMenu({menuProps:a,id:r.id,type:me.members})},customProps:{key:r.id,"data-qa-user-group-details-members-list-item":true,"data-qa-user-group-details-members-list-item-id":r.id},id:r.id};if(this.props.featureSonicUserGroupsA11yRefactor)return f.a.createElement(ct,s);return f.a.createElement(ct,s,f.a.createElement("div",{className:"full_width"},f.a.createElement(G["b"],{id:r.id,size:"medium",showTooltip:false,forcedPrimary:"real_name",showPresence:false,showStatus:false,"data-qa-user-group-details-members-list-item-member":true})))}},{key:"renderChannelItem",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.userGroupIsEditable();var n=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":a});var i=r.purpose?f.a.createElement("div",{className:"p-user_group_details__channel_purpose"},r.purpose.value):null;var s={className:n,isContextButtonVisible:a,tooltip:this.renderTooltip(),onClick:function e(){return t.onViewProfile({type:me.channels,id:r.id})},renderMenu:function e(a){return t.renderListItemOptionsMenu({menuProps:a,id:r.id,type:me.channels})},customProps:{key:r.id,"data-qa-user-group-details-channels-list-item":true,"data-qa-user-group-details-channels-list-item-id":r.id},id:r.id};if(this.props.featureSonicUserGroupsA11yRefactor)return f.a.createElement(ct,s);return f.a.createElement(ct,s,f.a.createElement("div",{className:"p-user_group_details__list_item_info"},f.a.createElement(H["a"],{channel:r,className:"bold cursor_pointer"}),i))}},{key:"renderTooltip",value:function e(){if(!this.props.featureSonicUserGroups)return null;return he.t("More actions")}},{key:"renderMembersList",value:function e(){var t=this;var r=this.props,a=r.userGroupMembers,n=r.userGroup;if(!a||Object(O["isEmpty"])(a))return this.renderEmptyMemberState();this.memberListKeys=Object(O["map"])(a,"id");var i=Object(D["h"])(n);return f.a.createElement(U["a"],null,function(e){var r=e.width,n=e.height,s=e.measureRef;return f.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":true,ref:s},f.a.createElement(Q["a"],{ref:t.memberList,width:r,height:n,keys:t.memberListKeys,rowRenderer:function e(r){return t.renderMemberItem(a[r])},ariaLabel:he.t("{userGroupName} Members",{userGroupName:i,fallbackHash:"1cb449c1126609b4b41e1d87f65f0d7cd19b49b9"}),getAriaLabelForRow:t.getAriaLabelForMemberRow,onItemTabWithin:t.onItemTabWithin}))})}},{key:"renderChannelsList",value:function e(){var t=this;var r=this.props,a=r.userGroupDefaultChannels,n=r.userGroup;if(!a||Object(O["isEmpty"])(a))return this.renderEmptyChannelState();this.channelListKeys=Object(O["map"])(a,"id");var i=Object(D["h"])(n);return f.a.createElement(U["a"],null,function(e){var r=e.width,n=e.height,s=e.measureRef;return f.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":true,ref:s},f.a.createElement(Q["a"],{ref:t.channelsList,width:r,height:n,keys:t.channelListKeys,rowRenderer:function e(r){return t.renderChannelItem(a[r])},ariaLabel:he.t("{userGroupName} Default Channels",{userGroupName:i,fallbackHash:"2ec0a5de1b2e256a3e6c96a289fdfe0abf7dc5d0"}),getAriaLabelForRow:t.getAriaLabelForChannelRow,onItemTabWithin:t.onItemTabWithin}))})}},{key:"renderEmptyMemberState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=he.t("Add Members");var r=this.userGroupIsEditable()?f.a.createElement(W["d"],{type:"outline",size:"small",onClick:this.onAddMembers},t):null;var a=he.t("No members");if(this.props.featureSonicUserGroupsA11yRefactor)return f.a.createElement("div",{className:"p-user_group_details__empty_list"},f.a.createElement(z["a"],{title:a,primaryActionText:t,onClickPrimaryAction:this.onAddMembers}));return f.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":me.members},f.a.createElement("div",{className:"p-user_group_details__empty_list_header"},a),r)}},{key:"renderEmptyChannelState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=he.t("Add Default Channels");var r=this.userGroupIsEditable()?f.a.createElement(W["d"],{type:"outline",size:"small",onClick:this.onAddChannels},t):null;var a=he.t("No default channels");var n=he.t("All members of a user group are automatically added to its default channels.");if(this.props.featureSonicUserGroupsA11yRefactor)return f.a.createElement("div",{className:"p-user_group_details__empty_list"},f.a.createElement(z["a"],{title:a,description:n,primaryActionText:t,onClickPrimaryAction:this.onAddChannels}));return f.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":me.channels},f.a.createElement("div",{className:"p-user_group_details__empty_list_header"},a),f.a.createElement("div",{className:"p-user_group_details__empty_list_subtext"},n),r)}},{key:"renderConfirmationDialog",value:function e(t){var r=t.action,a=t.onSubmit,n=t.id;var i=this.props.groupId;return f.a.createElement(Pe,{action:r,onSubmit:a,id:n,groupId:i})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(gt,{groupId:t})}},{key:"renderEditDetailsDialog",value:function e(){var t=this.props.groupId;return f.a.createElement($["a"],{userGroupId:t})}},{key:"renderContent",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.userGroup;return f.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":true,"data-qa-user-group-details-id":t.id},this.renderHeader(),this.renderActions(),this.renderTabs())}},{key:"render",value:function e(){var t=this.props.featureSonicUserGroups;if(!t)return null;return f.a.createElement(Y["a"],{ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:he.t("User Groups"),viewId:"user-group-details",kbNavOrder:Object(F["a"])()?void 0:7})}}]);return t}(h["PureComponent"]);_e.displayName="UserGroupDetails";_e.defaultProps=be;var ye=function e(t,r){var a=r.groupId;var n=Object(T["e"])(t,a);var i=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");if(Object(D["s"])(n))return{userGroup:n,featureSonicUserGroups:i};var s=Object(D["g"])(n);var o=Object(O["map"])(s,function(e){return Object(N["d"])(t,e)});var l=Object(D["d"])(t,n);var c=Object(O["map"])(l,function(e){return Object(A["d"])(t,e)});var u=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups_a11y_refactor");return{userGroup:n,featureSonicUserGroups:i,featureSonicUserGroupsA11yRefactor:u,userGroupMembers:o,userGroupDefaultChannels:c,canEditUserGroups:function e(){return Object(D["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(D["b"])(t)}}};var Oe=function e(t,r){var a=r.groupId;return{openModal:function e(){return t(P["openModal"].apply(void 0,arguments))},fetchUserGroupMembers:function e(r){return t(Object(I["i"])({groupId:a,reason:r}))},removeMember:function e(r){return t(Object(I["m"])({groupId:a,memberId:r}))},removeChannel:function e(r){return t(Object(I["l"])({groupId:a,channelId:r}))},onChannelSwitch:function e(r){return t(Object(x["a"])({id:r}))},openUserGroupList:function e(){return t(Object(M["o"])())},enqueueToast:function e(){return t(R["enqueueToast"].apply(void 0,arguments))},showMemberProfile:function e(){return t(M["j"].apply(void 0,arguments))}}};var ke=Object(y["connect"])(ye,Oe)(_e);var Ee=r(156);var je=r(134);var Ce=r(84);var Se=new L["b"]("user_groups");var we={disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"};var Ie={action:b["b"].oneOf(Object(O["values"])(we)).isRequired,onSubmit:b["b"].func.isRequired,label:b["b"].string,groupName:b["b"].string,featureSonicUserGroups:b["b"].bool};var Te={label:"",groupName:"",featureSonicUserGroups:false};var Ae=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);return r}u()(t,[{key:"onGo",value:function e(){return this.props.onSubmit()}},{key:"getTitle",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,r=t.action,a=t.groupName;switch(r){case"disable_group":return Se.t("Deactivate {groupName}?",{groupName:a});case"remove_member":return Se.t("Remove from group?");case"remove_channel":return Se.t("Remove default channel?");default:}return""}},{key:"getButtonText",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props.action;switch(t){case"disable_group":return Se.t("Deactivate");case"remove_member":case"remove_channel":return Se.t("Remove");default:}return""}},{key:"getDialogBody",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,r=t.groupName,a=t.label,n=t.action;switch(n){case"disable_group":return Se.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:r});case"remove_member":return Se.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:a,groupName:r});case"remove_channel":return Se.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:a,groupName:r});default:}return""}},{key:"render",value:function e(){return f.a.createElement(Ce["a"],{showHeader:true,showGoButton:true,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},f.a.createElement("p",null,this.getDialogBody()))}}]);return t}(h["Component"]);Ae.displayName="UserGroupConfirmationDialog";Ae.defaultProps=Te;var Ne=function e(t,r){var a=r.id,n=r.groupId;var i="";var s=Object(T["e"])(t,n);if(Object(je["a"])(a)){var o=Object(A["d"])(t,a);i=Object(S["getDisplayNameForChannel"])(t,o)}else if(Object(Ee["a"])(a)){var l=Object(N["d"])(t,a);i=Object(w["getMemberRealName"])(l)}return{groupName:Object(D["h"])(s),label:i,featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Pe=Object(y["connect"])(Ne)(Ae);var Re=r(1727);var Me=r(1509);var xe=r(1183);var De=r(4326);var Fe=r(790);var Le=r(1701);var Be=r(22);var Ue=r(2236);var qe=new L["b"]("user_groups");var Ge={className:b["b"].string,userGroup:b["b"].object,featureSonicUserGroups:b["b"].bool.isRequired};var He={className:void 0,userGroup:void 0};var We={unknown:"unknown",nonexistent:"non-existent"};var Ve=function e(t){var r=Object(D["h"])(t);return f.a.createElement(Fe["c"],{className:"c-user_group__name"},f.a.createElement(Be["b"],{type:"user_groups",inline:true,className:"c-medium_user_group__icon"}),r)};Ve.displayName="renderName";var Ke=function e(t){var r=Object(D["e"])(t);return f.a.createElement(Fe["b"],null,r)};Ke.displayName="renderDescription";var ze=function e(t,r){var a=Object(D["f"])(t);var n=Object(D["l"])(t);return f.a.createElement(Fe["a"],null,f.a.createElement("span",{className:"c-medium_user_group__handle"},a),r?qe.rt("{count} {count, plural, =1 {member} other {members}}",{count:n}):void 0)};ze.displayName="renderMetaData";function Qe(e){var t=e.className,r=e.userGroup,a=e.featureSonicUserGroups;var n=!Object(D["t"])(r);if(Object(D["r"])(r)||Object(D["q"])(r))return f.a.createElement(Le["a"],{type:Object(D["r"])(r)?We.unknown:We.nonexistent,size:"medium"});var i=n?De["c"].dim:null;return f.a.createElement(Fe["d"],{className:t,size:"medium",style:i,text:Ve(r),subtext:Ke(r),metadata:ze(r,a)})}Qe.displayName="MediumUserGroupEntity";Qe.defaultProps=He;function Ye(e,t){var r=t.id,a=t.group;var n=a||Object(T["e"])(e,r);var i=Object(E["isFeatureEnabled"])(e,"feature_sonic_user_groups");return{userGroup:n,featureSonicUserGroups:i}}var Je=Object(y["connect"])(Ye)(Qe);var Xe={className:b["b"].string,id:b["b"].string.isRequired,isActive:b["b"].bool,isDeactivated:b["b"].bool,isDisabled:b["b"].bool,secondaryContent:b["b"].node};var Ze={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0};function $e(e){var t=e.className,r=e.isActive,a=e.isDeactivated,i=e.isDisabled,o=e.secondaryContent,l=s()(e,["className","isActive","isDeactivated","isDisabled","secondaryContent"]);var c=void 0;r?c=i||a?De["c"].highlightDim:De["c"].highlightLight:(i||a)&&(c=De["c"].dim);return f.a.createElement(xe["a"],{className:t,primaryContent:f.a.createElement(Je,n()({isDeactivated:a},l)),secondaryContent:o,size:"medium",style:c})}$e.displayName="MediumUserGroupListEntity";$e.defaultProps=Ze;var et=$e;var tt=r(2287);var rt=r(4513);var at=r(504);var nt=r(3304);var it={id:b["b"].string,renderMenu:b["b"].func.isRequired,className:b["b"].string,isContextButtonVisible:b["b"].bool,onClick:b["b"].func,tooltip:b["b"].string};var st=new L["b"]("user_groups");var ot={id:null,className:"",isContextButtonVisible:false,onClick:O["noop"],tooltip:void 0};var lt=function(e){m()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"getTooltipLabel",value:function e(){return this.props.tooltip||st.t("Edit user groups")}},{key:"renderContextButton",value:function e(){var t=this.props,r=t.isContextButtonVisible,a=t.renderMenu;if(!r)return null;var n={tooltip:this.getTooltipLabel(),icon:"ellipsis",tooltipPosition:"top-right",onClick:a,menuProps:{renderMenu:a,width:"auto"}};return f.a.createElement(Me["b"],{customClasses:"p-user_group_base_row__list_item_option"},f.a.createElement(Me["a"],n))}},{key:"render",value:function e(){var t=this.props,r=t.className,a=t.id,n=t.onClick;var i=_()("p-user_group_base_row__list_item","p-user_group_base_row__entity",{"p-user_group_base_row__entity_group":a&&Object(at["a"])(a)},r);if(Object(je["a"])(a))return f.a.createElement(tt["a"],{channelId:a,secondaryContent:this.renderContextButton(),showPurpose:false,onClick:n,className:i});if(Object(Ee["a"])(a))return f.a.createElement(rt["a"],{className:i,id:a,secondaryContent:this.renderContextButton()});return f.a.createElement(et,{id:a,secondaryContent:this.renderContextButton(),className:i})}}]);return t}(h["PureComponent"]);lt.displayName="UserGroupBaseRow";lt.defaultProps=ot;var ct=lt;var ut=r(828);var dt=r(2403);var pt=new L["b"]("user_groups");var vt={featureSonicUserGroups:b["b"].bool,groupId:b["b"].string.isRequired,bulkUpsertUserGroupMembers:b["b"].func.isRequired,enqueueToast:b["b"].func.isRequired};var mt={featureSonicUserGroups:false};var ht=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={searchResultMode:false,disableGoButton:false};Object(k["a"])(r,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef","onSelectedItemsChange"]);r.userGroupMemberManagementRef=null;return r}u()(t,[{key:"onSave",value:function e(){if(!this.userGroupMemberManagementRef)return false;var t=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!t)return false;var r=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(r).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onSelectedItemsChange",value:function e(t){this.setState(function(){return{disableGoButton:!t.length}})}},{key:"onUpsertSuccess",value:function e(){if(!this.props.featureSonicUserGroups)return;this.props.enqueueToast({element:f.a.createElement(q["b"],null,pt.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function e(t){Object(B["b"])().error("Error updating user group members: "+JSON.stringify(t))}},{key:"onToggleSearchResultsMode",value:function e(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=pt.t("Edit members");return f.a.createElement(Ce["a"],{showHeader:true,showGoButton:true,showFooter:true,bodyClassName:"p-user_group_member_management__dialog_body",title:t,contentLabel:t,goButtonText:pt.t("Save"),onGo:this.onSave,goOnEnterPressed:false,goButtonIsDisabled:this.state.disableGoButton},f.a.createElement(ut["a"],{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}))}}]);return t}(h["PureComponent"]);ht.displayName="UserGroupMemberManagementDialog";ht.defaultProps=mt;var ft=function e(t){return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var bt=function e(t,r){var a=r.groupId;return{bulkUpsertUserGroupMembers:function e(r){return t(Object(I["e"])({groupId:a,users:r}))},enqueueToast:function e(){return t(R["enqueueToast"].apply(void 0,arguments))}}};var gt=Object(y["connect"])(ft,bt)(ht);var _t=r(108);var yt=r(692);var Ot=r(392);var kt=r(3939);var Et=r(1818);var jt=r(2411);var Ct={userGroups:b["b"].object,featureSonicUserGroups:b["b"].bool,openModal:b["b"].func,searchTerm:b["b"].string,searchQuery:b["b"].string,onSearchInputChange:b["b"].func,onClearSearch:b["b"].func,setSearchQuery:b["b"].func,shouldDisplayCreateUserGroupOption:b["b"].bool,isActive:b["b"].func,showUserGroupDetails:b["b"].func};var St={userGroups:{},featureSonicUserGroups:false,openModal:O["noop"],searchTerm:"",searchQuery:"",onSearchInputChange:O["noop"],onClearSearch:O["noop"],setSearchQuery:O["noop"],shouldDisplayCreateUserGroupOption:false,isActive:O["noop"],showUserGroupDetails:O["noop"]};var wt=new L["b"]("user_groups");var It=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["a"])(r,["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch","focus","onItemClick","onItemTabWithin"]);r.searchableGroupList=f.a.createRef();r.groupList=f.a.createRef();r.flexpane=f.a.createRef();return r}u()(t,[{key:"onItemClick",value:function e(t){var r=t.id;this.props.isActive(r)&&this.props.showUserGroupDetails({groupId:r})}},{key:"onCreateUserGroup",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onSearchInputChange",value:function e(t){return this.props.setSearchQuery(t.target.value)}},{key:"onClearSearch",value:function e(){return this.props.setSearchQuery("")}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"getGroupedUserGroups",value:function e(t){var r=Object(O["groupBy"])(t,function(e){return Object(D["t"])(e)?"active":"inactive"});r.active=r.active||[];r.inactive=r.inactive||[];return r.active.concat(r.inactive)}},{key:"getSearchResults",value:function e(t,r){var a=this;if(!r)return Object.values(t);return Object(O["filter"])(t,function(e){if(!e)return false;var t=Object(D["h"])(e);var n=Object(D["f"])(e)||"";var i=Object(D["e"])(e)||"";if(a.checkForMatch(t,r))return true;if(a.checkForMatch(n,r))return true;if(a.checkForMatch(i,r,false))return true;return false})}},{key:"getSortedResults",value:function e(t){return Object(O["sortBy"])(t,function(e){var t=Object(D["h"])(e);return t.toLocaleLowerCase()})}},{key:"focus",value:function e(){var t=this.searchableGroupList.current||this.groupList.current;t&&t.focus()}},{key:"checkForMatch",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(t,a).includes(this.prepStringForSearch(r,a))}},{key:"prepStringForSearch",value:function e(t,r){if(!t)return"";var a=t.toLocaleLowerCase();r&&(a=a.replace(/[\s-_]/g,""));return Object(L["a"])(a)}},{key:"renderSearch",value:function e(){var t=this.props.searchQuery;if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_list__search"},f.a.createElement(Ot["a"],{value:t,onChange:this.onSearchInputChange,placeholder:wt.t("Find by name..."),autoFocus:true,icon:"search"}))}},{key:"renderRow",value:function e(t){var r=this.keys[t];return f.a.createElement(Et["a"],{id:r})}},{key:"renderEmptySearchResults",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_list__empty_search_results"},f.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},wt.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),f.a.createElement(W["d"],{type:"outline",size:"small",onClick:this.props.onClearSearch},wt.t("Clear Search")))}},{key:"renderSearchableList",value:function e(){return f.a.createElement(kt["a"],{ref:this.searchableGroupList,onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:true,onClearSearch:this.onClearSearch,onItemClick:this.onItemClick,onItemTabWithin:this.onItemTabWithin})}},{key:"renderContent",value:function e(){return f.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList())}},{key:"renderCreateEditDialog",value:function e(){return f.a.createElement($["a"],null)}},{key:"render",value:function e(){var t=this.props,r=t.featureSonicUserGroups,a=t.shouldDisplayCreateUserGroupOption;if(!r)return null;var i={renderBody:this.renderContent,title:wt.t("User Groups"),viewId:"user-group-list"};if(a){i.onOptionsClick=this.onCreateUserGroup;i.headerProps={optionsIconType:"compose-dm",optionsTooltipText:wt.t("Create a user group")}}return f.a.createElement(Y["a"],n()({ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container"},i,{kbNavOrder:Object(F["a"])()?void 0:7}))}}]);return t}(h["PureComponent"]);It.displayName="UserGroupList";It.defaultProps=St;var Tt=function e(t,r){var a=Object(T["b"])(t);var i=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");var s=Object(D["b"])(t);return n()({userGroups:a,searchQuery:Object(yt["getSearchQuery"])(t),featureSonicUserGroups:i,shouldDisplayCreateUserGroupOption:s,isActive:function e(r){return Object(D["t"])(Object(T["e"])(t,r))}},r)};var At={openModal:P["openModal"],setSearchQuery:yt["setSearchQuery"],showUserGroupDetails:M["n"]};var Nt=Object(y["connect"])(Tt,At)(It);var Pt=r(3309);var Rt={groupId:b["b"].string,featureSonicUserGroups:b["b"].bool,userGroupMembers:b["b"].array};var Mt={groupId:null,featureSonicUserGroups:false,userGroupMembers:[]};var xt=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={newMembers:[],timeoutId:null,searchTerm:""};Object(k["a"])(r,["onSearchInputChange","onClearSearch"]);return r}u()(t,[{key:"componentDidUpdate",value:function e(t){var r=this;var a=[];t.userGroupMembers.length&&!Object(O["isEqual"])(t.userGroupMembers,this.props.userGroupMembers)&&(a=Object(O["differenceBy"])(this.props.userGroupMembers,t.userGroupMembers,"id"));if(a.length){this.setState(function(){return{newMembers:a}});var n=this.state.timeoutId;n&&clearTimeout(n);var i=setTimeout(function(){r.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:i}})}}},{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{searchTerm:r}})}},{key:"onClearSearch",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.groupId;var r=this.state,a=r.newMembers,n=r.searchTerm;if(t)return f.a.createElement(ke,{groupId:t,newMembers:a});return f.a.createElement(Nt,{searchTerm:n,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]);return t}(h["PureComponent"]);xt.displayName="UserGroupsFlexpane";xt.defaultProps=Mt;var Dt=function e(t){var r=Object(_t["e"])(t)[0];var a=Object(T["e"])(t,r);var n=Object(D["g"])(a);var i=Object(O["map"])(n,function(e){return Object(N["d"])(t,e)});return{groupId:r,userGroupMembers:i,featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ft=Object(y["connect"])(Dt)(xt);r.d(t,"d",function(){return $["a"]});r.d(t,"b",function(){return Pe});r.d(t,"c",function(){return se});r.d(t,"a",function(){return ct});r.d(t,"e",function(){return gt});var Lt=t["f"]=Ft},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(6);var s=r.n(i);var o=r(7);var l=r.n(o);var c=r(8);var u=r.n(c);var d=r(9);var p=r.n(d);var v=r(1);var m=r.n(v);var h=r(13);var f=r(16);var b=r.n(f);var g=r(2);var _=r(0);var y=r(24);var O=r(17);var k=r(1183);var E=r(1150);var j=r(61);var C=r(19);var S=r(11);var w=r(216);var I=r(2285);var T=r(2284);var A=r(2235);var N=r(2286);var P=r(451);var R=r(22);var M=r(4368);var x=r(373);var D=r(4326);var F=r(4299);var L={right:"right",bottom:"bottom"};var B={className:_["b"].string,id:_["b"].string.isRequired,secondaryContent:_["b"].node,secondaryContentPosition:_["b"].oneOf(Object(g["values"])(L)),invert:_["b"].bool,isDeactivated:_["b"].bool,showAvatar:_["b"].bool,showPresence:_["b"].bool,showTooltip:_["b"].bool,useShortMode:_["b"].bool,member:_["b"].object,memberPrimaryName:_["b"].string,memberSecondaryName:_["b"].string,showDraftIcon:_["b"].bool,showStatus:_["b"].bool};var U={className:void 0,member:void 0,memberPrimaryName:void 0,memberSecondaryName:void 0,secondaryContent:void 0,secondaryContentPosition:L.bottom,invert:false,showAvatar:true,showDraftIcon:false,showPresence:true,showStatus:true,showTooltip:true,isDeactivated:false,useShortMode:false};function q(e){var t=e.className,r=e.id,a=e.invert,i=e.member,s=e.memberPrimaryName,o=e.memberSecondaryName,l=e.secondaryContent,c=e.secondaryContentPosition,u=e.showAvatar,d=e.showDraftIcon,p=e.showPresence,v=e.showStatus,h=e.showTooltip,f=e.isDeactivated,g=e.useShortMode;var _=Object(O["isAppOrBot"])(i);var y=Object(O["isDeleted"])(i);var k=Object(O["isSelf"])(i);var E=Object(j["c"])(r);var C=Object(j["d"])(r);var S=m.a.createElement(M["a"],{"data-qa":"member-entity__primary-name",name:s,invert:a&&!f,isAppOrBot:_,isDeleted:y,isSelf:k,isNonExistent:E,isUnknown:C});var F=m.a.createElement(N["a"],{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},o);var B=i&&m.a.createElement(A["a"],{className:"c-member__title","data-qa":"member-entity__title"},Object(O["getMemberTitle"])(i));var U=m.a.createElement(R["b"],{type:"pencil",size:"inherit",className:"c-member__draft_icon","aria-hidden":true,"data-qa":"member-entity__draft-icon"});var q=!y&&m.a.createElement(x["a"],{memberId:r,className:"c-member__presence",invert:a&&!f,"data-qa":"member-entity__presence"});var G=m.a.createElement(P["b"],{memberId:r,tooltip:h,animated:g,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status"});var H=c===L.bottom&&l?m.a.createElement(T["a"],{"data-qa":"member-entity__metadata"},l):null;var W=m.a.createElement("span",{className:"c-member__primary_content"},S,p&&q,!g&&F,v&&G);var V=y||f?D["c"].dim:null;var K=b()(t,"c-member","c-member--medium",{"c-member--with-presence":p});return m.a.createElement(I["a"],{avatar:function e(t){return u&&(d?U:m.a.createElement(w["b"],n()({},t,{size:D["a"].medium,userId:r,"data-qa":"member-entity__avatar",isInteractive:false})))},className:K,size:"medium",style:V,text:W,subtext:B,metadata:!y&&H,"data-qa":"medium_member_entity"})}q.displayName="MediumMemberEntity";q.defaultProps=U;function G(e,t){var r=t.id,a=t.isDraftContext,n=t.showStatus,i=t.isUnknown;var s=Object(y["d"])(e,r);var o=void 0;if(a){var l=Object(C["j"])(e,r);o=!!(l&&Object(S["getHasDraft"])(e,l.id))}return{member:s,memberPrimaryName:Object(O["getPrefCompliantMemberName"])(e,s,false,false),memberSecondaryName:Object(O["getMemberSecondaryName"])(e,s),showDraftIcon:o,showStatus:n&&Object(O["hasCustomStatusSet"])(s),isUnknown:Object(g["isBoolean"])(i)?i:Object(j["d"])(s)}}var H=Object(h["connect"])(G)(q);var W={className:_["b"].string,id:_["b"].string.isRequired,isActive:_["b"].bool,isDeactivated:_["b"].bool,isDisabled:_["b"].bool,secondaryContent:_["b"].node,secondaryContentPosition:_["b"].oneOf(Object(g["values"])(L)),showUnreadCount:_["b"].bool,unreadCount:_["b"].number};var V={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0,secondaryContentPosition:L.right,showUnreadCount:false,unreadCount:null};var K=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=this.props,r=t.className,a=t.id,i=t.isActive,s=t.isDeactivated,o=t.isDisabled,l=t.secondaryContent,c=t.secondaryContentPosition,u=t.showUnreadCount,d=t.unreadCount;var p=m.a.createElement(E["b"],{className:"c-member__unread_count",count:d,style:E["a"].red});var v=m.a.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},l);var h=m.a.createElement("span",{className:"c-member__secondary_content"},l&&c===L.right&&v,u&&d&&p);var f=b()(r,"c-medium_member_list_entity");var g=void 0;i?g=o||s?D["c"].highlightDim:D["c"].highlightLight:(o||s)&&(g=D["c"].dim);return m.a.createElement(k["a"],{"data-qa":"medium_member_list_entity",className:f,style:g,primaryContent:m.a.createElement(H,n()({id:a,isDeactivated:s},this.props,{secondaryContent:c===L.right?null:l})),secondaryContent:h,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,size:"medium"})}}]);return t}(v["Component"]);K.displayName="MediumMemberListEntity";K.defaultProps=V;function z(e,t){var r=t.id;var a=Object(y["d"])(e,r);return{member:a,unreadCount:Object(O["getImUnreadCountByMember"])(e,a)}}var Q=t["a"]=Object(h["connect"])(z)(K)},,,,,function(e,t,r){},,,,,,,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(0);var b=r(28);var g=r(2);var _=r(4);var y=r(10);var O=r(29);var k=r(25);var E=Object(k["a"])("Gets the access logs",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reason,n=void 0===a?"get-access-logs":a;return e(Object(O["a"])({method:"users.accessLogs",reason:n,args:{}})).then(function(e){return e}).catch(function(e){throw e})});E.propTypes={};var j=r(16);var C=r.n(j);var S=new y["b"]("download_access_logs");var w={getAccessLogs:f["b"].func,featureDownloadAccessLogs:f["b"].bool};var I={getAccessLogs:g["noop"],featureDownloadAccessLogs:true};var T=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"onDownloadAccessLogs",value:function e(){var t=this;this.props.getAccessLogs({}).then(function(e){var r=t.getAccessLogsAsString(e.logins);var a=document.createElement("a");var n=new Blob([r],{type:"text/csv;encoding:utf-8"});var i="access_logs.csv";if(navigator.msSaveBlob)navigator.msSaveBlob(n,i);else if(URL&&"download"in a){a.href=URL.createObjectURL(n);a.setAttribute("download",i);document.body.appendChild(a);a.click();document.body.removeChild(a)}else location.href="data:application/octet-stream,"+encodeURIComponent(r)}).catch(function(e){throw e})}},{key:"getAccessLogsAsString",value:function e(t){var r=[];var a=["Date Accessed","User Agent - Simple","User Agent - Full","IP Address","Number of Logins","Last Date Accessed"];r.push(a);t.forEach(function(e){var t=[];var a=new Date(1e3*e.date_first);var n=a.toString();var i=new Date(1e3*e.date_last);var s=i.toString();t.push(n);t.push(e.user_agent_simple);t.push('"'+e.user_agent_full+'"');t.push(e.ip);t.push(e.login_count);t.push(s);r.push(t)});return r.map(function(e){return e.join(",")}).join("\n")}},{key:"render",value:function e(){var t=this;var r=C()("float_right","margin_bottom_100");if(this.props.featureDownloadAccessLogs)return n.a.createElement(b["d"],{className:r,type:"outline",onClick:function e(){return t.onDownloadAccessLogs()}},S.t("Download Access Logs"));return null}}]);return t}(a["Component"]);T.displayName="DownloadAccessLogsButton";T.defaultProps=I;var A=function e(t){return{getAccessLogs:function e(r){return t(E(r))}}};var N=function e(t){return{featureDownloadAccessLogs:Object(_["isFeatureEnabled"])(t,"feature_download_access_logs")}};var P=Object(i["connect"])(N,A)(T);var R=r(163);var M=function e(t,r){var a=document.getElementById("download_access_logs_button_mount_point");if(!a)throw new Error("Could not find a valid download access logs mount point.");if(!t)throw new Error("mountDownloadAccessLogs must be called with a valid teamId parameter.");var l=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(R["a"],null,n.a.createElement(P,r))),a)};var x={mountDownloadAccessLogsButton:M};var D=r(44);Object(D["a"])("interop.mountDownloadAccessLogsButton",M)},function(e,t,r){},,,function(e,t,r){},,,,,,function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(13);var s=r(2);var o=r.n(s);var l=r(45);var c=r(12);var u=r(548);var d=r(1541);var p=r(67);var v=r(1796);var m=r(441);var h=r(199);var f=r(24);var b=r(23);var g=r(35);var _=r(19);var y=r(85);var O=r(34);var k=r(423);var E=r(329);var j=r(516);var C=r(1797);var S=r(432);var w=r(358);var I=r(4);var T=r(234);var A=r(11);var N=r(41);var P=r(360);var R=r(1339);var M=r(1731);var x=r(181);var D=r(38);var F=r(5);var L=r.n(F);var B=r(58);var U=r.n(B);var q=r(6);var G=r.n(q);var H=r(7);var W=r.n(H);var V=r(8);var K=r.n(V);var z=r(9);var Q=r.n(z);var Y=r(0);var J=r(1);var X=r.n(J);var Z=r(16);var $=r.n(Z);var ee=r(577);var te=r(511);var re=r(711);var ae=r(1798);var ne=r(1698);var ie=r(87);var se=r(39);var oe=r(706);var le=r(339);var ce=r(579);var ue=r(220);var de=r(773);var pe=r(245);var ve=r(10);var me=r(1799);var he=r(1342);var fe=r(428);var be=r(168);var ge=r(1801);var _e=r(1521);var ye=r(28);var Oe=r(853);var ke=r(216);var Ee=r(1834);var je=r(795);var Ce=r(50);var Se=r(438);var we=r(928);var Ie=r(1220);var Te=r(1802);var Ae=r(22);var Ne=r(1757);var Pe=r(1223);var Re=r(1219);var Me=r(3491);var xe={blocks:ie["a"].BlockKitBlocks,dispatchSendActions:Y["b"].func.isRequired,botId:Y["b"].string,serviceTeamId:Y["b"].string,ts:Y["b"].string,channelId:Y["b"].string,isEphemeral:Y["b"].bool,isRichTextMessage:Y["b"].bool,clogLinkClick:Y["b"].func};var De={blocks:void 0,botId:void 0,serviceTeamId:void 0,ts:void 0,channelId:void 0,isEphemeral:void 0,isRichTextMessage:false,clogLinkClick:s["identity"]};var Fe=function(e){Q()(t,e);function t(e){G()(this,t);var r=K()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Ne["a"])(r,["handleAction"]);var a=e.botId,n=e.serviceTeamId,i=e.ts,s=e.channelId,o=e.isEphemeral;r.containerActionsPayload={serviceId:a,serviceTeamId:n,container:{type:Re["a"].message,messageTs:i,channelId:s,isEphemeral:o}};return r}W()(t,[{key:"handleAction",value:function e(t){var r=this.props.botId;if(r)return this.props.dispatchSendActions(n()({},this.containerActionsPayload,{actions:[t]}));return new Promise(function(e){return e()})}},{key:"renderBlockWrapper",value:function e(t,r){return X.a.createElement("div",{key:r.blockId,className:"p-block_kit_renderer__block_wrapper"},t)}},{key:"renderElementWrapper",value:function e(t){return X.a.createElement(t,{clogLinkClick:this.props.clogLinkClick})}},{key:"render",value:function e(){var t=this.props,r=t.blocks,a=t.ts,n=t.isRichTextMessage;var i=$()("c-message__message_blocks",{"c-message__message_blocks--rich_text":n});return X.a.createElement("div",{className:i},X.a.createElement(Me["a"],{blocks:r,onAction:this.handleAction,renderBlock:this.renderBlockWrapper,containerId:a,blocksContainerContext:Re["a"].message,containerActionsPayload:this.containerActionsPayload}))}}]);return t}(J["Component"]);Fe.displayName="MessageBlocksRenderer";function Le(e){return{dispatchSendActions:function t(){return e(Pe["d"].apply(void 0,arguments))}}}Fe.defaultProps=De;var Be=Object(i["connect"])(null,Le)(Fe);var Ue=r(3921);var qe=r(55);var Ge=r(762);var He=r(2238);var We=r(923);var Ve=r(4182);var Ke=r(919);var ze=r(1777);var Qe=r(1775);var Ye=r(1825);var Je=r(4181);var Xe=r(4179);var Ze=r(1803);var $e=r(1835);var et=r(1833);var tt=r(100);var rt=r(1804);var at=r(1805);var nt=r(430);var it={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"};var st={isPinned:Y["b"].bool,isStarred:Y["b"].bool,isEphemeral:Y["b"].bool,isCustomResponse:Y["b"].bool,isSliHighlight:Y["b"].bool,isSelfIm:Y["b"].bool,isSlackbotIm:Y["b"].bool,primaryType:Y["b"].oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),sliHighlight:Y["b"].shape({loading:Y["b"].bool,isHighlight:Y["b"].bool,feedbackOptions:Y["b"].object,justification:Y["b"].string,feedback:Y["b"].string}),isHovered:Y["b"].bool,channelId:Y["b"].string,ts:Y["b"].string,currentUserId:Y["b"].string,pinnedByMemberId:Y["b"].string,featureSonicInputs:Y["b"].bool.isRequired,showStarredItemsList:Y["b"].func};var ot={isPinned:false,isStarred:false,isEphemeral:false,isCustomResponse:false,isSliHighlight:false,isSelfIm:false,isSlackbotIm:false,primaryType:void 0,sliHighlight:void 0,isHovered:false,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:s["noop"]};var lt=function(e){Q()(t,e);function t(e){G()(this,t);var r=K()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderHighlight=r.renderHighlight.bind(r);r.renderStarButton=r.renderStarButton.bind(r);return r}W()(t,[{key:"renderHighlight",value:function e(){var t=this.props,r=t.sliHighlight,a=t.channelId,n=t.ts,i=t.isHovered;if(!Object(E["shouldShowHighlightsLabel"])(r))return null;return X.a.createElement(at["a"],{channelId:a,ts:n,isHovered:i,sliHighlight:r})}},{key:"renderPinnedBy",value:function e(t){return X.a.createElement(nt["a"],{id:t,className:"c-message__label_link"})}},{key:"renderStarButton",value:function e(t){var r=t.text;return X.a.createElement(ye["c"],{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},r)}},{key:"render",value:function e(){var t=this.props,r=t.primaryType,a=t.isPinned,n=t.isStarred,i=t.isEphemeral,s=t.isCustomResponse,o=t.isSliHighlight,l=t.isSelfIm,c=t.isSlackbotIm,u=t.currentUserId,d=t.pinnedByMemberId,p=t.featureSonicInputs;var v=Object(rt["a"])({isPinned:a,isStarred:n,isEphemeral:i,isCustomResponse:s,isSliHighlight:o,isSelfIm:l,isSlackbotIm:c,currentUserId:u,pinnedBy:d,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});if(!v)return null;var m=it[r];var h=$()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":p});return X.a.createElement("div",{className:"c-message__label"},X.a.createElement("div",{className:h},m&&X.a.createElement(Ae["b"],{type:m,className:"c-message__label__icon",size:"inherit",inline:true})),X.a.createElement("div",{className:"c-message__label__text"},v))}}]);return t}(J["PureComponent"]);lt.displayName="MessageLabel";lt.defaultProps=ot;var ct=function e(t){return{featureSonicInputs:Object(I["isFeatureEnabled"])(t,"feature_sonic_inputs")}};var ut=function e(t){return{showStarredItemsList:function e(){return t(tt["k"].apply(void 0,arguments))}}};var dt=Object(i["connect"])(ct,ut)(lt);var pt=r(3200);var vt=new ve["b"]("message");var mt=200;var ht=20;var ft=10;var bt="theme_install_button";var gt=1541628e3;var _t={quote:true,pre:true};var yt={logger:Y["b"].object,message:Y["b"].object,ts:Y["b"].string,messageNotFound:Y["b"].bool,channelId:Y["b"].string,alertType:Y["b"].string,subtype:Y["b"].string,text:Y["b"].string,noSpecials:Y["b"].bool,theme:Y["b"].oneOf(["dense","light"]),userId:Y["b"].string,botId:Y["b"].string,appId:Y["b"].string,username:Y["b"].string,hasAdHocSender:Y["b"].bool,reactionKey:Y["b"].string,reactionKeyForInitialFileComment:Y["b"].string,replies:Y["b"].arrayOf(Y["b"].shape({ts:Y["b"].string,user:Y["b"].string})),replyCount:Y["b"].number,replyUsers:Y["b"].arrayOf(Y["b"].string),replyUsersCount:Y["b"].number,latestReply:Y["b"].string,threadsEverythingPref:Y["b"].bool,expandInlineImgsPref:Y["b"].bool,expandNonMediaAttachmentsPref:Y["b"].bool,threadTs:Y["b"].string,attachments:Y["b"].arrayOf(Y["b"].shape({color:Y["b"].string,fallback:Y["b"].string})),fileId:Y["b"].string,fileIds:Y["b"].arrayOf(Y["b"].string),comment:Y["b"].shape({id:Y["b"].string,user:Y["b"].string,comment:Y["b"].string,is_starred:Y["b"].bool}),isUpload:Y["b"].bool,showUser:Y["b"].bool,isFileFollowup:Y["b"].bool,isEditing:Y["b"].bool,isHovered:Y["b"].bool,maybeStartEditingMessage:Y["b"].func,edited:Y["b"].shape({ts:Y["b"].string,user:Y["b"].string}),isLast:Y["b"].bool,rollup:ie["a"].Rollup(),logMessage:Y["b"].func,setUnreadPoint:Y["b"].func,isStarred:Y["b"].bool,isStandalone:Y["b"].bool,isPinned:Y["b"].bool,currentUserId:Y["b"].string,pinnedByMemberId:Y["b"].string,sliHighlight:Y["b"].shape({loading:Y["b"].bool,isHighlight:Y["b"].bool,feedbackOptions:Y["b"].object,justification:Y["b"].string,feedback:Y["b"].string}),isEphemeral:Y["b"].bool,isRichTextMessage:Y["b"].bool,shouldRenderBlocks:Y["b"].bool,isDeleting:Y["b"].bool,icons:Y["b"].shape({emoji:Y["b"].string}),botProfile:Y["b"].object,slackbotFeels:Y["b"].string,fadeAwayHighlight:Y["b"].bool,doneHighlighting:Y["b"].func,isUnprocessed:Y["b"].bool,showResend:Y["b"].bool,showCancel:Y["b"].bool,sourceTeamId:Y["b"].string,resendMsg:Y["b"].func,removeMsg:Y["b"].func,shouldJumpToTimestamp:Y["b"].bool,isSelfIm:Y["b"].bool,isSlackbotIm:Y["b"].bool,isEKMDeniedMessage:Y["b"].bool,isEKMError:Y["b"].bool,teamDomain:Y["b"].string,featureTinyspeck:Y["b"].bool.isRequired,featureHideUnfurlUrls:Y["b"].bool.isRequired,featureAttachmentsV2:Y["b"].bool,featureBlockKitRefactor:Y["b"].bool,useGlobalNav:Y["b"].bool,channelSessionId:Y["b"].string,previousMessageIsPinned:Y["b"].bool,previousMessageIsEphemeral:Y["b"].bool,previousMessageIsStarred:Y["b"].bool,previousMessageSubtype:Y["b"].string,previousMessageSliHighlight:Y["b"].object,previousMessagePinnedByMemberId:Y["b"].string,renderActions:Y["b"].bool,renderActionsOffscreen:Y["b"].bool,messageContainerType:Y["b"].string,ariaAssertive:Y["b"].bool,blocks:ie["a"].BlockKitBlocks,serviceTeamId:Y["b"].string,featureSonicInputs:Y["b"].bool,clogMessageClick:Y["b"].func,clogUserClick:Y["b"].func,isThreadExpanded:Y["b"].bool,threadListId:Y["b"].string,showThreadIfThreadable:Y["b"].func,blocksContainerContext:Y["b"].oneOf(Object(s["values"])(qe["a"])),hasKeyboardFocusWithin:Y["b"].bool,onFocus:Y["b"].func,onBlur:Y["b"].func};var Ot={logger:{info:s["noop"],warn:s["noop"],error:s["noop"]},message:null,ts:null,messageNotFound:false,channelId:void 0,text:null,noSpecials:false,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:false,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:false,showUser:true,isFileFollowup:false,isEditing:false,isHovered:false,maybeStartEditingMessage:s["noop"],edited:null,isLast:false,rollup:null,logMessage:s["noop"],setUnreadPoint:s["noop"],isStarred:false,isStandalone:false,isPinned:false,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:false,isRichTextMessage:false,shouldRenderBlocks:false,isDeleting:false,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:false,doneHighlighting:s["noop"],isUnprocessed:false,showResend:false,showCancel:false,sourceTeamId:"",resendMsg:s["noop"],removeMsg:s["noop"],shouldJumpToTimestamp:false,isSelfIm:false,isSlackbotIm:false,isEKMDeniedMessage:false,isEKMError:false,featureAttachmentsV2:false,teamDomain:void 0,useGlobalNav:false,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:false,renderActionsOffscreen:false,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:false,clogMessageClick:s["noop"],clogUserClick:s["noop"],isThreadExpanded:false,threadListId:void 0,showThreadIfThreadable:s["noop"],blocksContainerContext:qe["a"].message,hasKeyboardFocusWithin:false,onFocus:s["noop"],onBlur:s["noop"],featureBlockKitRefactor:false};var kt=function(e){Q()(t,e);function t(e){G()(this,t);var r=K()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.onContainerClick=r.onContainerClick.bind(r);r.onTimestampClick=r.onTimestampClick.bind(r);r.startEditing=r.startEditing.bind(r);r.onMouseEnter=r.onMouseEnter.bind(r);r.onMouseLeave=r.onMouseLeave.bind(r);r.onMenuToggle=r.onMenuToggle.bind(r);r.startHighlightingTimer=r.startHighlightingTimer.bind(r);r.onDoneHighlighting=r.onDoneHighlighting.bind(r);r.onDeleteAnimationTick=r.onDeleteAnimationTick.bind(r);r.onDeleteAnimationEnd=r.onDeleteAnimationEnd.bind(r);r.resendMsg=r.resendMsg.bind(r);r.removeMsg=r.removeMsg.bind(r);r.formatInlineAttachmentMaybe=r.formatInlineAttachmentMaybe.bind(r);r.formatThemeInstallButton=r.formatThemeInstallButton.bind(r);r.customFormatHandler=r.customFormatHandler.bind(r);r.customContentHandler=r.customContentHandler.bind(r);r.clogLinkClick=r.clogLinkClick.bind(r);r.clogUserClick=r.clogUserClick.bind(r);r.shouldShowAttachment=r.shouldShowAttachment.bind(r);r.messageRef=null;r.deleteAnimation=null;r.hasDisplayedContent=true;r.inlineAttachmentsKey=0;r.setAttachmentsSorted();r.state={isHovered:e.isHovered,actionsMenuOpen:false,height:null};return r}W()(t,[{key:"componentDidMount",value:function e(){this.props.fadeAwayHighlight&&this.startHighlightingTimer();this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props.fadeAwayHighlight;t.fadeAwayHighlight&&!r&&this.startHighlightingTimer();this.isDeleting(t)&&!this.isDeleting()&&this.startDeleteAnimation();this.setAttachmentsSorted(t);this.setState(function(){return{isHovered:t.isHovered}})}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.onDoneHighlighting()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onContainerClick",value:function e(t){if(t.shiftKey&&Object(fe["a"])(t)&&!Object(me["a"])(t.target)){t.stopPropagation();this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});return}if(t.altKey){t.preventDefault();this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts})}}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{isHovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{isHovered:false}})}},{key:"onMenuToggle",value:function e(t){var r=this;if(!t){setTimeout(function(){r.setState(function(){return{actionsMenuOpen:false}})},100);return}this.setState(function(){return{actionsMenuOpen:t}})}},{key:"onDoneHighlighting",value:function e(){this.props.doneHighlighting();this.highlightTimer=null}},{key:"onDeleteAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;if(!this.messageRef)return;this.setState(function(){return{height:r}},a)}},{key:"onDeleteAnimationEnd",value:function e(){this.removeMsg();this.deleteAnimation=null}},{key:"onTimestampClick",value:function e(t){t.preventDefault();this.props.shouldJumpToTimestamp&&Object(be["q"])(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"setAttachmentsSorted",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=r.attachments,n=r.text;var i=Object(s["partition"])(Object(s["map"])(Object(s["filter"])(a,this.shouldShowAttachment),le["b"]),function(e){return t.isInlineImage(e,n)}),o=U()(i,2),l=o[0],c=o[1];this.attachmentsInline&&l&&!Object(pe["a"])(this.attachmentsInline,l,2)&&(this.inlineAttachmentsKey+=1);this.attachmentsInline=l;this.attachmentsBelow=c}},{key:"setRef",value:function e(t){this.messageRef=t}},{key:"getTextWithThemes",value:function e(){if(!this.props.text)return this.props.text;var t=this.props.useGlobalNav?/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){8})(#[A-Fa-f0-9]{6})(\b)/g:/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g;return this.props.text.replace(t,function(e){return e+" <"+bt+"|"+e+">"})}},{key:"getUrlsToHide",value:function e(){var t=this.props,r=t.attachments,a=t.featureHideUnfurlUrls;if(!a)return[];return Object(s["compact"])(Object(s["map"])(Object(s["map"])(Object(s["filter"])(Object(s["map"])(Object(s["filter"])(r,this.shouldShowAttachment),le["b"]),"isMsgUnfurl"),"fromUrl"),s["unescape"]))}},{key:"getResendText",value:function e(){var t=this.props.isEKMError;if(t)return vt.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return vt.t("Slack couldn\u2019t send this message")}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var r=t?t.message:"";var a=t?t.stack:"";var n=this.props||{};var i=n.channel&&n.channelId;var s=n.logger;s.error("Message componentDidCatch: "+n.subtype+" "+n.ts+" in "+i+", "+r);a&&s.error(a)}},{key:"clogLinkClick",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.props,a=r.ts,i=r.channelId,s=r.userId,o=r.botId;var l={ts:a,user:s,channel:i,bot_id:o};var c=n()({},t,{request_id:null});"user_link"===t.type?this.props.clogUserClick({msg:l,payload:c}):this.props.clogMessageClick({msg:l,payload:c})}},{key:"clogUserClick",value:function e(t){this.clogLinkClick(n()({type:"user_link"},t))}},{key:"isInlineImage",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return r&&-1!==o.a.unescape(r).indexOf(t.fromUrl)&&Object(Se["m"])(t)}},{key:"shouldShowAttachment",value:function e(t){var r=this.props,a=r.text,n=r.subtype,i=r.isStandalone,s=r.expandInlineImgsPref,o=r.expandNonMediaAttachmentsPref;return Object(re["h"])({attachment:t,messageText:a,messageSubtype:n,messageIsStandalone:i,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:o})}},{key:"isDeleting",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var e=t.isDeleting,r=t.isStandalone;return e&&!r}},{key:"startHighlightingTimer",value:function e(){if(this.highlightTimer)return;this.highlightTimer=setTimeout(this.onDoneHighlighting,4500)}},{key:"startDeleteAnimation",value:function e(){if(!this.messageRef)return;var t=this.messageRef.clientHeight;this.deleteAnimation=Object(oe["a"])({fromValue:t,toValue:0,duration:mt,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startEditing",value:function e(){var t=this.props,r=t.maybeStartEditingMessage,a=t.channelId,n=t.ts;r({channelId:a,ts:n,scroll:true})}},{key:"formatInlineAttachmentMaybe",value:function e(t){var r=t.item,a=t.getDefaultOutput;var i=this.props,l=i.ts,c=i.channelId,u=i.sourceTeamId;var d=r.url;var p=Object(s["find"])(this.attachmentsInline,{fromUrl:o.a.unescape(d)});if(!p)return a();return X.a.createElement(J["Fragment"],null,a(),X.a.createElement(Oe["a"],n()({},p,{messageTs:l,activeChannelId:c,sourceTeamId:u,clogLinkClick:this.clogLinkClick,isInline:true})))}},{key:"formatThemeInstallButton",value:function e(t){var r=t.item;var a=r.contents[0].text.replace(/\s/g,"").split(",");return X.a.createElement("div",{className:"c-message__theme_button_container"},X.a.createElement(et["a"],{colors:a,clogLinkClick:this.clogLinkClick}))}},{key:"customContentHandler",value:function e(t){var r=this.props.edited;var a=t;var n=this.getUrlsToHide();n.length&&(a=Object(He["a"])({content:t,urls:n}));if(r){var i=o.a.last(a)||{};a.push({type:"custom_edited_label",omitWhitespace:!!_t[i.type]})}this.hasDisplayedContent=!!a.length;return a}},{key:"customFormatHandler",value:function e(t){var r=t.item,a=t.getDefaultOutput;var n=void 0;"link"===r.type?n=r.url===bt?this.formatThemeInstallButton(t):this.formatInlineAttachmentMaybe(t):"custom_edited_label"===r.type&&(n=this.renderEditedLabel({omitWhitespace:r.omitWhitespace}));return n||a()}},{key:"focusFirst",value:function e(t){this.focusNode(Object(ce["b"])(t))}},{key:"focusLast",value:function e(t){this.focusNode(Object(ce["c"])(t))}},{key:"focusNode",value:function e(t){if(!t)return;if(document.activeElement===t)return;t.focus();t.classList.add("focus-ring")}},{key:"isTombstone",value:function e(){return"tombstone"===this.props.subtype}},{key:"shouldShowResendControls",value:function e(){var t=this.props,r=t.showResend,a=t.showCancel;return r||a}},{key:"resendMsg",value:function e(){var t=this.props,r=t.ts,a=t.channelId;this.props.resendMsg(a,r)}},{key:"removeMsg",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.messageContainerType,i=t.subtype;var s="thread_broadcast"===i&&n===se["MESSAGE_CONTAINERS"].THREADS_FLEXPANE;this.props.removeMsg({channelId:a,ts:r,broadcastDelete:s})}},{key:"shouldShowMessageLabel",value:function e(t){var r=t.labelTypes;var a=this.props,n=a.showUser,i=a.isFileFollowup,s=a.pinnedByMemberId,l=a.previousMessageIsStarred,c=a.previousMessageIsPinned,u=a.previousMessageIsEphemeral,d=a.previousMessageSubtype,p=a.previousMessageSliHighlight,v=a.previousMessagePinnedByMemberId;if(o.a.isEmpty(r))return false;if(r.sliHighlight)return true;if(!n||i){var m=Object(ne["a"])({isStarred:l,isPinned:c,isEphemeral:u,subtype:d,sliHighlight:p});if(Object(pe["a"])(r,m))return r.isPinned&&m.isPinned&&v!==s}return true}},{key:"renderTimestamp",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.isHiddenFromCopy,a=void 0!==r&&r;var i=this.props,s=i.teamDomain,o=i.channelId,l=i.ts,c=i.threadTs,u=i.isStandalone,d=i.isEKMDeniedMessage;if(!l||!o||d)return null;var p=void 0;var v=void 0;if(!u){p=Object(N["constructAbsoluteMsgPermalink"])({teamDomain:s,channelId:o,ts:l,threadTs:c});v=this.onTimestampClick}var m={};a&&(m["data-stringify-text"]="");return X.a.createElement(Ke["b"],n()({timestamp:l,relative:false,full:false,link:p,onClick:v},m))}},{key:"renderAvatar",value:function e(){var t=36;if(this.isTombstone())return X.a.createElement("div",{className:"c-message__tombstone_icon"},X.a.createElement(Ae["a"],{type:"trash",align:"top"}));var r=this.props,a=r.userId,n=r.hasAdHocSender,i=r.botId,s=r.botProfile,o=r.isStandalone,l=r.icons,c=r.slackbotFeels,u=r.isEKMDeniedMessage;return X.a.createElement(ke["b"],{className:"c-message__avatar",userId:a,isAdHocMember:n,botId:i,botProfile:s,slackbotFeels:c,size:t,icons:l,isInteractive:!u&&!o,showCard:true,showTooltip:true,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderGutter",value:function e(){var t=$()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return X.a.createElement("div",{className:$()(t,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return X.a.createElement("div",{className:t},this.renderAvatar())}return X.a.createElement("div",{className:t},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderContent",value:function e(){var t=this.props,r=t.showUser,a=t.theme,n=t.isStandalone,i=t.reactionKey,s=t.reactionKeyForInitialFileComment;var o=$()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return X.a.createElement("div",{className:o,"data-qa":"message_content"},r&&this.renderContentHeader(),"light"===a&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFiles(),this.renderAttachments(),!n&&!this.isTombstone()&&this.renderReactions(i),!n&&!this.isTombstone()&&this.renderReactions(s),!n&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.userId,a=t.botId,n=t.username,i=t.theme,s=t.isUpload,o=t.isStandalone,l=t.isEKMDeniedMessage,c=t.botProfile;if(this.isTombstone())return null;var u=l?Object(he["a"])({upload:s}):void 0;return X.a.createElement("div",{className:"c-message__content_header"},X.a.createElement(We["a"],{overrideNameText:u,userId:r,botId:a,username:n,isInteractive:!o&&!l,botProfile:c,clogLinkClick:this.clogUserClick})," ","light"===i&&this.renderTimestamp(),"dense"===i&&X.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),X.a.createElement("br",null)),"dense"===i&&"\xa0","dense"===i&&this.renderThreadBroadcastPreamble())}},{key:"renderThreadBroadcastPreamble",value:function e(){var t=this.props,r=t.ts,a=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!r||!n||s||"thread_broadcast"!==i)return null;return X.a.createElement(Je["a"],{ts:r,threadTs:a,channelId:n})}},{key:"renderThreadBroadcastFooter",value:function e(){var t=this.props,r=t.ts,a=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!r||!n||!a||s||"thread_broadcast"!==i)return null;return X.a.createElement(Xe["a"],{ts:r,threadTs:a,channelId:n})}},{key:"renderEditedLabel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.omitWhitespace,a=void 0!==r&&r;var n=this.props.edited;var i=n.ts;var s=X.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!a&&"\xa0",vt.t("(edited)"),!a&&"\xa0");if(i){var o=vt.t("{date} at {time}",{date:Object(de["a"])(i,{shortenMonth:true}),time:Object(ue["a"])(i)});return X.a.createElement(Ce["c"],{key:"edited",delay:Ce["a"],tip:o},s)}return s}},{key:"renderReplyBar",value:function e(){var t=this.props,r=t.replies,a=t.replyCount,n=t.replyUsers,i=t.replyUsersCount,s=t.latestReply,o=t.channelId,l=t.threadTs,c=t.isThreadExpanded,u=t.threadListId,d=t.showThreadIfThreadable;if(!o||!a)return null;return X.a.createElement(Ve["a"],{channelId:o,threadTs:l,replies:r,replyCount:a,replyUsers:n,replyUsersCount:i,latestReply:s,isThreadExpanded:c,threadListId:u,showThreadIfThreadable:d})}},{key:"renderReactions",value:function e(t){if("file_comment"===this.props.subtype)return null;if(!t)return null;return X.a.createElement(Ee["a"],{reactionKey:t})}},{key:"renderAttachments",value:function e(){var t=this;var r=this.props,a=r.ts,i=r.channelId,o=r.blocks,l=r.text,c=r.blocksContainerContext,u=r.sourceTeamId;var d=this.attachmentsBelow;if(!d||!d.length)return null;var p=ht;var v=Object(s["map"])(d,function(e,r){var s=e.id||r+1;var d=e.botId||t.props.botId;e.blocks&&(p=ft);return X.a.createElement(Oe["a"],n()({},e,{service:d,messageTs:a,activeChannelId:i,sourceTeamId:u,key:s,clogLinkClick:t.clogLinkClick,isOnlyMessageContent:!t.hasDisplayedContent||!o&&!l,blocksContainerContext:c}))});var m=v.splice(p);return X.a.createElement("div",{className:"c-message__attachments"},v,this.renderAttachmentsOverLimitMaybe(m,p))}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t,r){if(!t.length)return null;var a={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(te["a"])("attachmentsOverLimit",this.props.ts,{limit:r})};return X.a.createElement("div",null,X.a.createElement(we["a"],a,t),X.a.createElement(Ie["a"],n()({},a,{render:function e(r,a){return X.a.createElement(Te["a"],{isExpanded:r.isExpanded,onClick:a,attachmentsOverLimitCount:t.length})}})))}},{key:"renderFile",value:function e(){var t=this.props,r=t.fileId,a=t.comment,n=t.subtype;if(!r)return null;if(a&&"file_comment"===n)return this.renderFileComment();return null}},{key:"renderFileComment",value:function e(){var t=this.props,r=t.fileId,a=t.comment,n=t.isFileFollowup,i=t.theme,s=t.subtype,o=t.userId;if(!r||!a)return null;var l="file_comment"===s&&(!n||"dense"===i)&&X.a.createElement(ze["a"],{fileId:r,comment:a,followup:n,key:a.id+"-meta"});return[l||null,X.a.createElement(je["a"],{text:a.comment,memberId:o,className:"c-message__comment c-message__body",key:a.id+"-body",clogLinkClick:this.clogLinkClick})]}},{key:"renderFiles",value:function e(){var t=this.props,r=t.fileIds,a=t.channelId,n=t.subtype,i=t.text;if(!r||!r.length||!a)return null;if("file_comment"===n)return null;var s=X.a.createElement(Ge["b"],{msg:this.props.message});var o=$()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!i});return X.a.createElement("div",{className:o},s)}},{key:"renderRollup",value:function e(){var t=this.props,r=t.rollup,a=t.channelId,n=t.userId;if(!r||!a)return null;return X.a.createElement(Qe["a"],{rollup:r,channelId:a,user:n})}},{key:"renderAutomatedSubtype",value:function e(){return X.a.createElement(Ye["a"],{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderBody",value:function e(){var t=this;var r=this.props,a=r.ts,n=r.fileId,i=r.subtype,s=r.rollup,o=r.userId,l=r.edited,c=r.noSpecials,u=r.ariaAssertive,d=r.attachments,p=r.blocks,v=r.featureBlockKitRefactor,m=r.channelId,h=r.botId,f=r.isEphemeral,b=r.isRichTextMessage,g=r.shouldRenderBlocks,_=r.serviceTeamId,y=r.blocksContainerContext,O=r.sourceTeamId;if(this.isTombstone())return X.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},vt.t("This message was deleted."));if(!a)return X.a.createElement("span",{className:"c-message__body c-message__body--unknown"});if(n||"file_comment"===i||"file_mention"===i)return null;if(s)return this.renderRollup();if(Object(ee["a"])(i))return this.renderAutomatedSubtype();var k=$()("c-message__body",{"c-message__body--me":"me_message"===i});var E=$()("c-message__message_blocks",{"c-message__message_blocks--rich_text":b&&g});if(p&&g){var j={serviceId:h,serviceTeamId:_,container:{type:qe["a"].message,messageTs:a,channelId:m,isEphemeral:f}};return v?X.a.createElement(Be,{blocks:p,service:h,clogLinkClick:function e(){return t.clogLinkClick()},botId:h,ts:a,channelId:m,isEphemeral:f,serviceTeamId:_,isRichTextMessage:b}):X.a.createElement("div",{className:E},X.a.createElement(Ue["a"],{containerActionsPayload:j,blocks:p,service:h,containerId:a,blocksContainerContext:y,clogLinkClick:function e(){return t.clogLinkClick()}}))}var C=parseInt(a,10)>gt;return X.a.createElement(je["a"],{"data-qa":"message-text",className:k,text:this.getTextWithThemes(),memberId:o,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:true,clogLinkClick:this.clogLinkClick,noSpecials:c,ariaAssertive:u,ignoredPropEdited:l,ignoredPropAttachments:d,addDirectionAttr:C,sourceTeamId:O})}},{key:"renderActions",value:function e(){var t=this;var r=this.props,a=r.ts,n=r.reactionKey,i=r.fileId,s=r.fileIds,o=r.comment,l=r.replies,c=r.replyCount,u=r.rollup,d=r.threadsEverythingPref,p=r.threadTs,v=r.channelId,m=r.subtype,h=r.isStarred,f=r.isPinned,b=r.isEphemeral,g=r.isDeleting,_=r.isStandalone,y=r.setUnreadPoint,O=r.theme,e=r.renderActions,k=r.renderActionsOffscreen,E=r.messageContainerType,j=r.hasKeyboardFocusWithin;var C=this.state,S=C.actionsMenuOpen,w=C.isHovered;if(!a||!v)return null;var I=k&&!j&&!w&&!e;if(!S&&!w&&!j&&!I&&!e)return null;if(g||_)return null;return X.a.createElement(Ze["a"],{reactionKey:n,fileId:i,fileIds:s,comment:o&&o.id,replies:l,replyCount:c,rollup:u,ts:a,threadsEverythingPref:d,threadTs:p,channelId:v,subtype:m,isStarred:h,isPinned:f,isEphemeral:b,editHandler:this.startEditing,unreadHandler:y,onMenuOpen:function e(){return t.onMenuToggle(true)},onMenuClose:function e(){return t.onMenuToggle(false)},theme:O,renderOffscreen:I,messageContainerType:E})}},{key:"renderEdit",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.messageContainerType;if(!a||!r)return null;return X.a.createElement("div",{className:"c-message__content"},X.a.createElement($e["a"],{channelId:r,ts:a,messageContainerType:n}))}},{key:"renderResendControls",value:function e(){var t=this.props,r=t.isEKMError,a=t.showResend,n=t.showCancel;var i=null;a&&(i=X.a.createElement(ye["c"],{className:"c-message__resend",onClick:this.resendMsg},vt.t("Try again")));var s=null;n&&(s=X.a.createElement(ye["c"],{className:"c-message__cancel",onClick:this.removeMsg},r?vt.t("Clear"):vt.t("Cancel")));var o=null;a&&n&&(o=" | ");return X.a.createElement("div",{className:"c-message__resend_controls"},X.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),i,o,s)}},{key:"renderError",value:function e(){if(!this.props.featureTinyspeck)return null;var t=this.props,r=t.ts,a=t.channelId;var n={background:"#FFCFCF",padding:"24px"};return X.a.createElement("div",{style:n},X.a.createElement("strong",null,"TS-ONLY: Message ",r," in ",a," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}},{key:"renderMessageLabel",value:function e(t){var r=t.labelTypes,a=t.primaryLabelType;var i=this.props,s=i.sliHighlight,o=i.isSlackbotIm,l=i.isSelfIm,c=i.channelId,u=i.ts,d=i.currentUserId,p=i.pinnedByMemberId,v=i.sourceTeamId;var m=this.state.isHovered;if(!this.shouldShowMessageLabel({labelTypes:r}))return null;return X.a.createElement(dt,n()({},r,{primaryType:a,channelId:c,ts:u,isHovered:m,isSlackbotIm:o,isSelfIm:l,sliHighlight:s,currentUserId:d,pinnedByMemberId:p,sourceTeamId:v}))}},{key:"render",value:function e(){var t;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var r=this.props,a=r.theme,n=r.isEditing,i=r.showUser,s=r.alertType,o=r.fadeAwayHighlight,l=r.isLast,c=r.isStandalone,u=r.isUnprocessed,d=r.subtype,p=r.rollup,v=r.sliHighlight,m=r.ts,h=r.isPinned,f=r.isEphemeral,b=r.isStarred,g=r.isEKMDeniedMessage,_=r.isEKMError,y=r.hasKeyboardFocusWithin;var O=this.state,k=O.isHovered,j=O.actionsMenuOpen,C=O.height;var S=Object(ne["a"])({isPinned:h,isEphemeral:f,isStarred:b,subtype:d,sliHighlight:v});var w=Object(ae["a"])(S);var I=$()("c-message",(t={},L()(t,"c-message--"+a,a),L()(t,"c-message--hover",k||j),L()(t,"c-message--focus-within",y),L()(t,"c-message--adjacent",!n&&!i&&!c),L()(t,"c-message--thread_broadcast","thread_broadcast"===d),L()(t,"c-message--highlight_yellow_bg","shared_channel_join"===s),L()(t,"c-message--highlight",!c&&n),L()(t,"c-message--fade_highlight",o&&!w),L()(t,"c-message--last",l),L()(t,"c-message--rollup",p),L()(t,"c-message--standalone",c),L()(t,"c-message--unprocessed",u),L()(t,"c-message--resend",this.shouldShowResendControls()),L()(t,"c-message--deleting",this.isDeleting()),L()(t,"c-message--editing",n),L()(t,"c-message--sli_highlight_negative",Object(E["isNegativeHighlightFeedback"])(v)),L()(t,"c-message--"+w,w),t));var T={};null!==C&&(T={height:C});return X.a.createElement("div",{ref:this.setRef,className:I,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,onFocus:this.props.onFocus,onBlur:this.props.onBlur,style:T,role:"document","data-qa":"message_container","data-qa-placeholder":Object(N["isTempTs"])(m)},this.renderMessageLabel({labelTypes:S,primaryLabelType:w}),this.renderGutter(),!c&&n&&this.renderEdit(),(c||!n)&&this.renderContent(),!g&&!_&&!c&&!n&&this.renderActions())}}]);return t}(J["PureComponent"]);kt.displayName="Message";kt.defaultProps=Ot;var Et=Object(_e["a"])(Object(ge["a"])(kt));var jt=function e(t,r){var a=r.ts,i=r.channelId,o=r.previousMessageTs;var u=Object(p["a"])(t,i,a);var d=Object(k["a"])(t);var v=Object(O["g"])(t,"threads_everything");var m=Object(O["g"])(t,"expand_inline_imgs");var C=Object(O["g"])(t,"expand_non_media_attachments");var F=Object(_["d"])(t,i);var L=Object(I["isFeatureEnabled"])(t,"feature_hide_unfurl_urls");var B=Object(I["isFeatureEnabled"])(t,"feature_attachments_v2");var U=Object(I["isFeatureEnabled"])(t,"feature_sonic_inputs");var q=Object(I["isFeatureEnabled"])(t,"feature_tinyspeck");var G=Object(I["isFeatureEnabled"])(t,"feature_message_history_cfm");var H=Object(I["isFeatureEnabled"])(t,"feature_block_kit_refactor");var W=Object(l["a"])({state:t});var V=Object(c["a"])({state:t});if(!u)return{channelId:i,clogger:W,logger:V,featureTinyspeck:q,featureHideUnfurlUrls:L,messageNotFound:true};if(G){var K=Object(b["b"])(t);a&&Object(j["d"])(K,i,a);o&&Object(j["d"])(K,i,o)}var z=u.files;var Q=Object(y["getFileById"])(t,Object(s["first"])(z));var Y=Object(N["isFileComment"])(u)?Q&&Q.id:void 0;var J=Object(p["a"])(t,i,o);var X=!Object(N["isAdjacentMessage"])(t,u,J);var Z=Object(M["a"])(u,J);var $=Object(P["b"])(u);var ee=Object(N["getMsgSenderEntity"])(t,u);var te=ee.botId&&Object(h["getBotByMsg"])(t,u);var re=te?te.app_id:null;var ae=u.slackbot_feels||null;var ne=u.comment&&Q&&Object(y["getFileCommentById"])(t,Q.id,u.comment.id)||u.comment;var ie=Object(E["getMessageMetaData"])(t,{channelId:i,ts:a}),se=ie.isDeleting,oe=ie.sliHighlight;var le=!!Object(w["getMessageEditData"])(t,{channelId:i,ts:a});var ce=Object(N["getMessagePinnedInfo"])(u);var ue=ce?ce.pinnedBy:null;var de=void 0;if(J){var pe=Object(N["getMessagePinnedInfo"])(J);var ve=pe?pe.pinnedBy:null;de={previousMessageIsStarred:Object(N["isStarred"])(J),previousMessageIsPinned:Object(T["isMessagePinned"])(t,{channelId:i,ts:o}),previousMessageIsEphemeral:Object(N["isEphemeral"])(J),previousMessageSubtype:J.subtype,previousMessageSliHighlight:J.sliHighlight,previousMessagePinnedByMemberId:ve}}var me=u.thread_ts;var he=void 0;if(me){he={replyCount:u.reply_count};if(Object(D["a"])())if(u.reply_users){he.replyUsers=u.reply_users;he.replyUsersCount=u.reply_users_count;he.latestReply=u.latest_reply}else u.replies&&(he.replies=u.replies);else if(u.replies)he.replies=u.replies;else{he.replyUsers=u.reply_users;he.replyUsersCount=u.reply_users_count;he.latestReply=u.latest_reply}}var fe=Object(I["getCurrentUserId"])(t);var be=Object(g["d"])(t);var ge=Object(b["b"])(t);var _e=be&&be.domain;var ye=void 0;if(te){var Oe=Object(f["d"])(t,u.user);var ke=Object(S["getTeamIdFromBotOrUser"])({bot:te,botProfile:u.bot_profile,member:Oe,teamId:ge});ye=Object(S["getTeamIdFromBotAppUser"])(Oe,ke)}return n()({message:u,channelId:i,clogger:W,logger:V,blocks:u.blocks,alertType:u.alert_type,subtype:u.subtype,text:u.text,noSpecials:false===u.mrkdwn,theme:d},ee,{appId:re,hasAdHocSender:Object(R["a"])(u)},he,{threadTs:me,threadsEverythingPref:v,expandInlineImgsPref:m,expandNonMediaAttachmentsPref:C,attachments:u.attachments,fileId:Y,fileIds:z,comment:ne,isUpload:u.upload,reactionKey:$,showUser:X,isFileFollowup:Z,edited:u.edited,isStarred:Object(N["isStarred"])(u,Q,"file_comment"===u.subtype&&ne),isPinned:Object(T["isMessagePinned"])(t,{channelId:i,ts:a}),currentUserId:fe,pinnedByMemberId:ue,sliHighlight:oe,botProfile:u.bot_profile,slackbotFeels:ae,icons:u.icons,isEditing:le,isUnprocessed:Object(N["isTempMsg"])(u)&&!Object(N["isEphemeral"])(u),isEphemeral:Object(N["isEphemeral"])(u),isDeleting:se,showResend:u.showResend,showCancel:u.showCancel,isSlackbotIm:Object(A["isSlackbot"])(F),isRichTextMessage:Object(N["isRichTextMessage"])(u),shouldRenderBlocks:Object(N["shouldRenderBlocksInsteadOfText"])(t,u),sourceTeamId:Object(N["getSourceTeamId"])(u)||Object(b["b"])(t),isSelfIm:Object(A["isYou"])(fe,F),isEKMDeniedMessage:Object(N["isEKMAccessDeniedMessage"])(u),isEKMError:u.isEKMError,teamDomain:_e},de,{featureTinyspeck:q,featureHideUnfurlUrls:L,useGlobalNav:Object(x["b"])(t),featureAttachmentsV2:B,ariaAssertive:Object(N["isDisconnectedFeedback"])(u),serviceTeamId:ye,featureSonicInputs:U,featureBlockKitRefactor:H})};var Ct={logMessage:function e(){return C["a"].apply(void 0,arguments)},clogMessageClick:function e(){return u["a"].apply(void 0,arguments)},clogUserClick:function e(){return d["a"].apply(void 0,arguments)},maybeStartEditingMessage:function e(){return w["maybeStartEditingMessage"].apply(void 0,arguments)},removeMsg:function e(){return m["a"].apply(void 0,arguments)},resendMsg:function e(){return v["a"].apply(void 0,arguments)}};var St=t["a"]=Object(i["connect"])(jt,Ct)(Et)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},,,,function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(232);var i=r(3754);var s=r(4402);var o=r(34);var l=r(73);var c=function e(t){if(false===Object(o["g"])(t,"seen_welcome_2"))return true;var r=Object(i["d"])(t);var a=Object(l["a"])(t);return!!(r.id&&r.id===a)};var u=r(15);var d=r(38);var p=r(1453);var v=Object(u["b"])("Starts creator onboarding",function(e){return e(Object(n["fetchTeamCreationWorkflow"])()).then(function(t){var r=t&&"completed"!==t.state;return e(Object(s["a"])(r))})});var m=r(43);var h=r(933);var f=r(316);var b=r(1103);var g=r(4499);var _=r(2222);var y=r(2);var O=r(241);var k=r(134);var E=void 0;var j=25;var C=Object(u["b"])("Starts the Joiner Landing Place onboarding experience",function(){var e=Object(m["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a,n,i,o;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:a=r();n=Object(l["a"])(a);if(!Object(k["a"])(n)){c.next=8;break}i=t(Object(O["getOrFetchMemberCounts"])({channelId:n}));c.next=6;return Object(m["resolve"])(i.promise||Promise.resolve(i));case 6:o=c.sent;Object(y["get"])(o,"counts.member_count",j+1)<=j&&t(Object(s["c"])(true));case 8:return c.abrupt("return",t(Object(_["a"])()));case 9:case"end":return c.stop()}},e,E)}));return function(t,r){return e.apply(this,arguments)}}());var S=Object(u["b"])("Starts joiner onboarding",function(){var e=Object(m["method"])(function(e,t){var r=t();if(Object(d["a"])()){e(Object(s["b"])(true));if(Object(p["g"])(r)){e(Object(_["a"])());return Promise.resolve()}return e(C())}if(Object(p["g"])(r)){e(Object(s["b"])(true));e(Object(_["a"])());if(Object(p["h"])(r)&&!Object(g["a"])(r)){e(Object(b["c"])());return e(Object(f["a"])({id:"Pwelcome",fromHistory:false,replaceHistoryState:false}))}return Promise.resolve()}return Object(h["f"])()});return function(t,r){return e.apply(this,arguments)}}());var w=Object(u["b"])("Start user onboarding if necessary",function(e,t){if(Object(d["a"])())return;var r=t();var a=Object(i["g"])(r);var n=Object(o["g"])(r,"onboarding_complete");if(a||n)return;var s=Object(o["g"])(r,"tractor_enabled");var l=!Object(o["g"])(r,"seen_welcome_2")||Object(p["g"])(r);s?e(v()):l&&e(S())});var I=r(4407);Object(a["a"])("interop.onboarding",{fetchTeamCreationWorkflow:function e(){return TS.redux.dispatch(Object(n["fetchTeamCreationWorkflow"])())},showSecondAccountSetupBanner:function e(){return TS.redux.dispatch(Object(n["showSecondAccountSetupBanner"])())},isInOnboarding:function e(){return Object(i["g"])(TS.redux.getState())},isInCreatorOnboarding:function e(){return Object(i["e"])(TS.redux.getState())},isInJoinerOnboarding:function e(){return Object(i["f"])(TS.redux.getState())},setNoLongerInOnboarding:function e(){TS.redux.dispatch(Object(s["d"])())},shouldShowFirstWelcome:function e(){return c(TS.redux.getState())},setInJoinerOnboarding:function e(t){TS.redux.dispatch(Object(s["b"])(!!t))},getWelcomeModel:function e(){return Object(i["d"])(TS.redux.getState())},setWelcomeModel:function e(t){TS.redux.dispatch(Object(s["h"])(t))},maybeStartOnboarding:function e(){TS.redux.dispatch(w())},cancelOnboarding:function e(){TS.redux.dispatch(Object(I["a"])())}})},,,,function(e,t,r){"use strict";var a=r(26);var n=r.n(a);var i=r(0);var s=r(1);var o=r.n(s);var l=r(16);var c=r.n(l);var u=r(95);var d=r(310);var p=r(10);var v=r(50);var m=r(4375);var h=r.n(m);var f=10;var b=new p["b"]("apps_browser");var g={apps:i["b"].arrayOf(i["b"].object),isFirefoxAndWindows:i["b"].bool,isFirefoxAndMac:i["b"].bool,isInternetExplorer:i["b"].bool,featureM11nAppsBrowser:i["b"].bool};var _={apps:[],isFirefoxAndWindows:false,isFirefoxAndMac:false,isInternetExplorer:false,featureM11nAppsBrowser:false};var y=function e(t){var r=t.apps,a=t.isFirefoxAndWindows,i=t.isFirefoxAndMac,l=t.isInternetExplorer,u=t.featureM11nAppsBrowser;if(!u)return null;if(r.length>f)return null;var p=[].concat(n()(r),n()(Array(f-r.length)));var m=p.map(function(e,t){var r=!e;var n="limit-apps-"+t;var s="bottom";0===t?s="bottom-left":t===f-1&&(s="bottom-right");var u=c()("p-apps_browser__app_limit_meter__apps","inline_block",{"p-apps_browser__app_limit_meter__blank_app_box":r,is_ff_and_win:a,is_ff_and_mac:i,is_ie:l});return o.a.createElement(v["c"],{key:n,tip:r?b.t("Try a new app"):e.name,position:s,offsetY:17},o.a.createElement("div",{className:u,"data-qa":r?"app_limit_meter__blank_app_box":"app_limit_meter__app_box"},!r&&o.a.createElement("img",{className:"p-apps_browser__app_limit_meter__app_icon align_top",src:Object(d["a"])(e,24),alt:""})))});var h=p.map(function(e,t){if(0===t)return null;var r="color-meter-"+t;var a=!e;var n=c()({first:1===t,meter_first_green:t<4&&!a,meter_second_green:4===t&&!a,meter_third_green:5===t&&!a,meter_fourth_green:6===t&&!a,meter_yellow:7===t&&!a,meter_orange:8===t&&!a,meter_red:9===t&&!a,on:!a,off:a&&1!==t});return o.a.createElement("li",{className:n,key:r})});var g=c()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:a});return o.a.createElement(s["Fragment"],null,o.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},m),o.a.createElement("ul",{className:g},h))};y.displayName="AppLimitMeter";y.defaultProps=_;t["a"]=Object(u["pure"])(y)},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(10);var y=r(4);var O=r(3964);var k=r(5);var E=r.n(k);var j=r(3);var C=r.n(j);var S=r(126);var w=r(211);var I=r(364);var T=r(54);var A=r(51);var N=r(40);var P=r.n(N);var R=r(1239);var M=r(701);var x=r(150);var D=r(157);var F=r(22);var L=r(179);var B=r(687);var U=r(28);var q=r(135);var G=r(216);var H=r(1757);var W=r(2);var V=r(29);var K=r(25);var z=r(12);var Q=Object(K["a"])("Get Enterprise Security preferences",function(e,t,r){var a=r.reason;return e(Object(V["a"])({method:"enterprise.prefs.get",reason:a})).catch(function(e){var r="failed to get enterprise security preferences";Object(z["a"])({getState:t}).error("Enterprise",r);throw e})});Q.propTypes={reason:g["b"].string};var Y=Object(K["a"])("Set Enterprise Security preferences",function(e,t,r){var a=r.message,n=r.reason;return e(Object(V["a"])({method:"enterprise.auth.twofactor.enable",args:{message:a},reason:n})).catch(function(e){var r="failed to disable two-factor authentication";Object(z["a"])({getState:t}).error("Enterprise",r);throw e})});Y.propTypes={message:g["b"].string,reason:g["b"].string};var J=Object(K["a"])("Set Enterprise Security preferences",function(e,t,r){var a=r.reason;return e(Object(V["a"])({method:"enterprise.auth.twofactor.disable",reason:a})).catch(function(e){var r="failed to disable two-factor authentication";Object(z["a"])({getState:t}).error("Enterprise",r);throw e})});J.propTypes={reason:g["b"].string};var X=Object(K["a"])("Set Enterprise Security preferences",function(e,t,r){var a=r.sessionDurationLength,n=r.sessionDurationType,i=r.reason;return e(Object(V["a"])({method:"enterprise.auth.session.set",args:{session_duration:a,session_duration_type:n},reason:i})).catch(function(e){var r="failed to set session duration";Object(z["a"])({getState:t}).error("Enterprise",r);throw e})});X.propTypes={sessionDurationLength:g["b"].number,sessionDurationType:g["b"].number,reason:g["b"].string};var Z=Object(K["a"])("Set Enterprise Security preferences",function(e,t,r){var a=r.forceLogout,n=r.reason;return e(Object(V["a"])({method:"enterprise.auth.password.reset",args:{force_logout:a},reason:n})).catch(function(e){var r="failed to reset passwords";Object(z["a"])({getState:t}).error("Enterprise",r);throw e})});Z.propTypes={reason:g["b"].string};var $=r(1831);var ee=new _["b"]("enterprise_dashboard");var te={featureOrgModernSecurityPreferencesPage:g["b"].bool,mandatoryTwoFactorAuthentication:g["b"].bool,sessionDurationType:g["b"].number,forcePasswordReset:g["b"].bool,getEnterpriseSecurityPrefs:g["b"].func.isRequired,enable2FA:g["b"].func.isRequired,disable2FA:g["b"].func.isRequired,setSessionDuration:g["b"].func.isRequired,forcePasswordResetFunction:g["b"].func.isRequired,enqueueToast:g["b"].func.isRequired};var re={featureOrgModernSecurityPreferencesPage:false,mandatoryTwoFactorAuthentication:false,sessionDurationType:-1,forcePasswordReset:false};var ae=Symbol("MANDATORY_TWO_FACTOR_AUTHENTICATION_SETTING");var ne=Symbol("LOGIN_SESSION_DURATION_SETTING");var ie=Symbol("FORCE_PASSWORD_RESET_SETTING");var se="radio";var oe=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={settingsItems:[{id:ae,value:r.props.mandatoryTwoFactorAuthentication,saving:false,open:false,custom2FAMessage:""},{id:ne,value:r.props.sessionDurationType,saving:false,open:false,sessionDurationValue:"12"},{id:ie,value:r.props.forcePasswordReset,saving:false,open:false}],loading:true,custom2FAMessage:""};Object(H["a"])(r,["onDisable","onEdit","onCancel","settingClicked"]);return r}v()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getEnterpriseSecurityPrefs().then(function(e){var r=e.locked_prefs;var a=r.two_factor_auth_required,n=r.session_duration,i=r.session_duration_type;t.setState(function(e){var t=e.settingsItems.slice();Object(W["find"])(t,{id:ae}).value=!!a;var r=Object(W["find"])(t,{id:ne});r.value=i;r.sessionDurationValue=1===i?""+n:"12";return{settingsItems:t,loading:false}})})}},{key:"onDisable",value:function e(t){var r=this;return function(){r._setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:false}])}}},{key:"onEdit",value:function e(t){var r=this;return function(){var e=r.state.settingsItems[t];var a=e.id===ne&&-1===e.value?0:e.value;r._setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:true},{k:"tempValue",v:a}])}}},{key:"onCancel",value:function e(t){var r=this;return function(){r._setSettingsItemKeys(t,[{k:"open",v:false},{k:"editing",v:false}])}}},{key:"onCheckboxChange",value:function e(t){var r=this;return function(e){r._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.checked}])}}},{key:"onRadioChange",value:function e(t){var r=this;return function(e){e.target.checked&&r._setSettingsItemKeys(t,[{k:"tempValue",v:parseInt(e.target.value,10)}])}}},{key:"settingClicked",value:function e(t){var r=this;return function(){return r.onEdit(t)()}}},{key:"saveSetting",value:function e(t){var r=this;return function(){return r._persistToApi(t)}}},{key:"_persistToApi",value:function e(t){var r=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var a=this.state.settingsItems[t];var i={};var s=void 0;var o="";var l=this.props,c=l.enable2FA,u=l.disable2FA,d=l.setSessionDuration,p=l.forcePasswordResetFunction;switch(a.id){case ae:if(a.editing){i.message=a.custom2FAMessage;a.tempValue=true;s=c;var v=ee.t("Mandatory two-factor authentication enabled");var m=ee.t("Mandatory two-factor authentication updated");o=a.value?m:v}else{a.tempValue=false;s=u;o=ee.t("Mandatory two-factor authentication disabled")}break;case ne:if(a.editing){i.sessionDurationType=a.tempValue;i.sessionDurationLength=1!==a.tempValue?a.tempValue:parseInt(a.sessionDurationValue,10);var h=ee.t("Session duration enabled");var f=ee.t("Session duration updated");o=-1!==a.value?f:h}else{a.tempValue=-1;i.sessionDurationLength=-1;i.sessionDurationType=-1;o=ee.t("Session duration disabled")}s=d;break;case ie:i.forceLogout=a.tempValue;s=p;o=ee.t("Password reset forced");break;default:return null}this._setSettingsItemKeys(t,[{k:"saving",v:true}]);return s(i).then(function(){r._setSettingsItemKeys(t,[{k:"value",v:a.tempValue}]);o&&r.props.enqueueToast({element:n.a.createElement(D["b"],null,n.a.createElement(F["b"],{type:"check-circle-o-large"})," ",n.a.createElement("strong",null,o))});r._setSettingsItemKeys(t,[{k:"saving",v:false},{k:"open",v:false},{k:"editing",v:false}])}).catch(function(){r._setSettingsItemKeys(t,[{k:"saving",v:false},{k:"open",v:false},{k:"editing",v:false}]);var e=ee.t("Something went wrong.");e&&r.props.enqueueToast({element:n.a.createElement(D["b"],null,n.a.createElement("strong",null,e))})})}},{key:"_setSettingsItemKeys",value:function e(t,r){this.setState(function(e){var a=e.settingsItems.slice();var n=Object(W["reduce"])(r,function(e,t){e[t.k]=t.v;return e},{});a.splice(t,1,C()({},a[t],n));return{settingsItems:a}})}},{key:"renderAlert",value:function e(t,r){if(r[t.id].alertText)return n.a.createElement(q["a"],{type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,r[t.id].alertText));return null}},{key:"renderControl",value:function e(t,r,a){var i=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var s=P()();var o=s.startOf("hour").add(1,"days");var l=o.format("MMMM DD")+" at "+o.format("h:mm A");var c=ee.t("Add a message...");var u=ee.t("Your custom message goes here.");var d=ee.t("Slackbot");var p=ee.t("A quick update: Mandatory two-factor authentication has been activated for your entire Slack workspace. This extra level of security protects your account by confirming that you're really you when you log in.");var v=ee.t("Starting on {twoFAStartTime}, you'll need to have two-factor authentication configured to access your account. It\u2019s quick and easy to do. Now\u2019s as good a time as any\u2026",{twoFAStartTime:l});var m=ee.t("Customize Slackbot Message");var h=ee.t("Configure two-factor authentication");var f=ee.t("(We\u2019ll also send you an email with this information, just in case. You can brush up on two-factor authentication ");var b=ee.t(".)");var g=ee.t("here");switch(t.id){case ie:return n.a.createElement(T["a"],{text:a[t.id].controlText,subtext:a[t.id].onDescription,type:"inline",cursor:"pointer"},n.a.createElement(S["a"],{name:"checkbox-"+r,checked:t.tempValue,onChange:this.onCheckboxChange(r)}));case ne:return n.a.createElement("div",{className:"p-security-preferences-view__div__session-duration"},n.a.createElement(I["a"],{field:se+"-"+r},n.a.createElement(T["a"],{text:ee.t("Sign users out when they close the application"),type:"inline",cursor:"pointer"},n.a.createElement(w["a"],{name:se+"-"+r,value:"0",checked:0===t.tempValue,onChange:this.onRadioChange(r)})),n.a.createElement(T["a"],{text:ee.t("Sign users out after a specific amount of hours (minimum 12)"),type:"inline",cursor:"pointer"},n.a.createElement(w["a"],{name:se+"-"+r,value:"1",checked:1===t.tempValue,onChange:this.onRadioChange(r)}))),1===t.tempValue&&n.a.createElement(L["a"],{className:"p-security-preferences-view__session-duration-input",min:"12",id:"login-session-duration",name:"login-session-duration",type:"number",useInlineAlert:true,value:t.sessionDurationValue,errorText:ee.t("You must enter at least 12"),onChange:function e(t){return i._setSettingsItemKeys(r,[{k:"sessionDurationValue",v:t}])}}));case ae:return n.a.createElement("div",{className:"slackbot-container"},n.a.createElement("p",{className:"bold"}," ",m," "),n.a.createElement("div",{className:"slackbot-message"},n.a.createElement("div",{className:"slackbot-avatar-2FA-modal"},n.a.createElement(G["a"],{size:36,imageUrl:"/img/slackbot/slackbot_72.png"})),n.a.createElement("div",{className:"slackbot-message-column"},n.a.createElement("p",{className:"bold"},d),n.a.createElement("p",null," ",p," "),n.a.createElement("p",null," ",v," "),n.a.createElement("p",null,n.a.createElement(A["a"],{href:"https://slack.com"},h)),n.a.createElement("p",null,f,n.a.createElement(A["a"],{href:"https://get.slack.help/hc/en-us/articles/204509068-Set-up-two-factor-authentication"},g),b),n.a.createElement("p",{className:"custom-2FA-message"},t.custom2FAMessage||n.a.createElement("em",null,u)))),n.a.createElement(B["a"],{className:"custom-slackbot-message-input",ariaDescribedby:"text-label-1",placeholder:c,size:"medium",id:"custom-slackbot-message",name:"custom-slackbot-message",onChange:function e(t){i._setSettingsItemKeys(r,[{k:"custom2FAMessage",v:t}])},value:t.custom2FAMessage}));default:return null}}},{key:"renderModalBodyText",value:function e(t){if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var r=void 0;var a=void 0;switch(t.id){case ae:r=ee.t(" Thanks for keeping your org's accounts safe and secure with mandatory two-factor authentication (2FA). Next, all members who don't use SSO and don't yet have 2FA set up will receive a Slackbot notification and an email about how to get set up.");a=ee.t("Members who don't set up 2FA within 24 hours will be logged out and prompted to set up 2FA before logging in again.");break;case ne:r=ee.t("Limiting session durations requires members to re-authenticate periodically. This can help increase security and prevent unauthorized access to your workspace.");break;case ie:r=ee.t("This will force members who sign in with an email address and password to create a new password. They\u2019ll automatically receive an email with instructions.");break;default:return null}return n.a.createElement("div",null,r&&n.a.createElement("p",null,r),a&&n.a.createElement("p",null,a))}},{key:"renderParagraphs",value:function e(t){return t.map(function(e){return n.a.createElement("p",{key:e},e)})}},{key:"renderSignInSettings",value:function e(){var t,r=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var a=(t={},E()(t,ae,{label:ee.t("Mandatory Two-Factor Authentication"),disabledDescription:ee.t("You can choose to make Two-Factor Authentication mandatory for all users."),enabledDescription:ee.t("Members must use two-factor authentication to sign in."),enabledState:ee.t("Enabled"),disabledState:ee.t("Disabled"),editModalText:[ee.t("Thanks for keeping your org's accounts safe and secure with mandatory two-factor authentication (2FA). Next, all members who don't use SSO and don't yet have 2FA set up will receive a Slackbot notification and an email about how to get set up."),ee.t("Members who don't set up 2FA within 24 hours will be logged out and prompted to set up 2FA before logging in again.")],disableModalText:[ee.t("This will allow members of your organization to sign in with a user name and password, and not require the use of two-factor authentication. ")],modalButtonType:"primary",modalButtonConfirmationText:ee.t("Enable"),messge:""}),E()(t,ne,{label:ee.t("Session Duration"),disabledDescription:ee.t("You can choose to sign users out after a specific amount of time or upon closing the app."),enabledDescription:function e(t){var r=ee.rt("<strong>Sign users out when they close the application</strong>{break}Members will be signed out when they close Slack.",{break:n.a.createElement("br",null)});var a=ee.rt("<strong>Sign users out after {hours} hours</strong>{break}Members will be signed out after the specified time.",{hours:t.sessionDurationValue,break:n.a.createElement("br",null)});return 0===t.value?r:a},enabledState:ee.t("Enabled"),disabledState:ee.t("Disabled"),editModalText:[ee.t("Limiting session durations requires members to re-authenticate periodically. This can help increase security and prevent unauthorized access to your workspace.")],disableModalText:[ee.t("This will allow members to remain signed in to your organzation indefinitely without re-authenticating.")],alertText:ee.t("Note: Session duration only applies to the Slack desktop app and in a web browser. With session duration turned on, members won't be signed out of their Slack mobile apps."),modalButtonType:"primary",modalButtonConfirmationText:ee.t("Enable")}),E()(t,ie,{label:ee.t("Force Password Reset"),disabledDescription:ee.t("Force members who sign in with an email address and password to create a new password."),enabledState:"",disabledState:"",editModalText:[ee.t("This will force members who sign in with an email address and password to create a new password. They\u2019ll automatically receive an email with instructions.")],disableModalText:[ee.t("This will force members who sign in with an email address and password to create a new password. They\u2019ll automatically receive an email with instructions.")],editOnly:true,editButtonText:ee.t("Reset"),alertText:ee.t("Note: This will only reset passwords for members who don\u2019t sign in with SSO."),modalButtonType:"danger",modalButtonConfirmationText:ee.t("Reset Passwords"),controlText:ee.t("Also sign these members out of Slack")}),t);var i=function e(t){switch(t.id){case ae:return t.value;case ne:return-1!==t.value;case ie:return false;default:return false}};var s=ee.t("Save");var o=function e(t){if(t.editing)return i(t)?s:a[t.id].modalButtonConfirmationText;return ee.t("Disable")};var l=function e(t){var r=a[t.id];var n=i(t)?r.enabledDescription:r.disabledDescription;if("function"===typeof n)return n(t);return n};return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__subtitle"},ee.t("Sign-in Settings")),n.a.createElement("p",{className:"p-security_preferences_view__subtext"},ee.t("Choose how you want to secure users\u2019 sign in experience.")),this.state.settingsItems.map(function(e,t){return n.a.createElement("div",{key:e.id.toString()},n.a.createElement($["a"],{label:a[e.id].label,state:i(e)?a[e.id].enabledState:a[e.id].disabledState,description:l(e),onClick:r.settingClicked(t),type:"button",control:{enabled:i(e),type:"button",onEdit:r.onEdit(t),editOnly:a[e.id].editOnly,editButtonText:a[e.id].editButtonText,onEnable:r.onEdit(t),onDisable:r.onDisable(t)}}),n.a.createElement(R["a"],{closeModal:r.onCancel(t),isOpen:e.open,centered:true},n.a.createElement(R["g"],null,n.a.createElement(R["i"],{title:a[e.id].label})),n.a.createElement(R["c"],null,n.a.createElement(R["d"],null,e.editing?r.renderParagraphs(a[e.id].editModalText):r.renderParagraphs(a[e.id].disableModalText),e.editing?r.renderControl(e,t,a):null,r.renderAlert(e,a))),n.a.createElement(R["e"],null,n.a.createElement(R["f"],null,n.a.createElement(R["b"],{type:"outline"},"Cancel"),n.a.createElement(U["d"],{type:e.editing?a[e.id].modalButtonType:"danger",onClick:function e(){return r.saveSetting(t)()}},o(e))))))}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-security_preferences_view"},n.a.createElement("div",null,this.renderSignInSettings()),n.a.createElement(M["a"],null))}}]);return t}(a["PureComponent"]);oe.displayName="SigninSettings";oe.defaultProps=re;var le=function e(t){return{featureOrgModernSecurityPreferencesPage:Object(y["isFeatureEnabled"])(t,"feature_org_modern_security_preferences_page")}};var ce=function e(t){return{enqueueToast:function e(){return t(x["enqueueToast"].apply(void 0,arguments))},getEnterpriseSecurityPrefs:function e(){return t(Q({reason:"SecurityPreferencesView_getEnterpriseSecurityPrefs"}))},enable2FA:function e(r){return t(Y(C()({},r,{reason:"SecurityPreferencesView_enable2FA"})))},disable2FA:function e(r){return t(J(C()({},r,{reason:"SecurityPreferencesView_disable2FA"})))},setSessionDuration:function e(r){return t(X(C()({},r,{reason:"SecurityPreferencesView_setSessionDuration"})))},forcePasswordResetFunction:function e(r){return t(Z(C()({},r,{reason:"SecurityPreferencesView_forcePasswordReset"})))}}};var ue=Object(o["connect"])(le,ce)(oe);var de=r(804);var pe=new _["b"]("enterprise_dashboard");var ve={featureOrgModernSecurityPreferencesPage:g["b"].bool,mobileDeviceApproval:g["b"].bool,blockFileDownloads:g["b"].bool,mobilePasscode:g["b"].bool};var me={featureOrgModernSecurityPreferencesPage:false,mobileDeviceApproval:false,blockFileDownloads:false,mobilePasscode:false};var he=Symbol("MOBILE_DEVICE_APPROVAL");var fe=Symbol("BLOCK_FILE_DOWNLOADS");var be=Symbol("MOBILE_PASSCODE");var ge=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={settingsItems:[{id:he,value:r.props.mobileDeviceApproval,saving:false,open:false},{id:fe,value:r.props.blockFileDownloads,saving:false,open:false},{id:be,value:r.props.mobilePasscode,saving:false,open:false}],mobilePasscodeTimeFrame:""};Object(H["a"])(r,["onEnable","onEdit","onCancel","saveSetting","settingClicked","onButtonPreviewChange","_toggleEnabled"]);return r}v()(t,[{key:"onEnable",value:function e(t){var r=this;return function(){var e=r.state.settingsItems[t];r._setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:e.value}])}}},{key:"onDisable",value:function e(t){var r=this;return function(){r._toggleEnabled(t,false)}}},{key:"onEdit",value:function e(t){var r=this;return function(){var e=r.state.settingsItems[t];r._setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:e.value}])}}},{key:"onCancel",value:function e(t){var r=this;return function(){r._setSettingsItemKeys(t,[{k:"open",v:false}])}}},{key:"onCheckboxChange",value:function e(t){var r=this;return function(e){r._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.checked}])}}},{key:"onRadioChange",value:function e(t){var r=this;return function(e){e.target.checked&&r._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.value}])}}},{key:"settingClicked",value:function e(t){var r=this;return function(){return r.onEdit(t)()}}},{key:"toggleableSettingClicked",value:function e(t){var r=this;return function(){r._toggleEnabled(t)}}},{key:"_setSettingsItemKeys",value:function e(t,r){this.setState(function(e){var a=e.settingsItems.slice();var n=Object(W["reduce"])(r,function(e,t){e[t.k]=t.v;return e},{});a.splice(t,1,C()({},a[t],n));return{settingsItems:a}})}},{key:"_toggleEnabled",value:function e(t,r){this.setState(function(e){var a=e.settingsItems.slice();var n=Object(W["isBoolean"])(r)?r:!a[t].enabled;a.splice(t,1,C()({},a[t],{enabled:n}));return{settingsItems:a}})}},{key:"renderAlert",value:function e(t,r){if(r[t.id].alertText)return n.a.createElement(q["a"],{type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,r[t.id].alertText));return null}},{key:"renderControl",value:function e(t){var r=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var a=pe.t("Immediately");var i=pe.t("After 5 minutes");var s=pe.t("After 15 minutes");var o=pe.t("After 30 minutes");var l=pe.t("After 1 hour");var c=[{label:a,value:"immediately"},{label:i,value:"fiveMinutes"},{label:s,value:"fifteenMinutes"},{label:o,value:"thirtyMinutes"},{label:l,value:"oneHour"}];var u=pe.t("Please select an option");var d=pe.t("Require mobile passcode:");switch(t.id){case be:return n.a.createElement("div",null,n.a.createElement("p",{className:"mobile-passcode-select-label"},d),n.a.createElement(de["a"],{className:"mobile-passcode-select",options:c,ariaLabel:u,selectId:"mobile-passcode-timeframe",width:"100%",onOptionSelected:function e(t){return r.setState(function(){return{mobilePasscodeTimeFrame:t}})}}));default:return null}}},{key:"renderModalBodyText",value:function e(t){if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var r=void 0;var a=void 0;switch(t.id){case fe:r=pe.t("When enabled, downloading of files and copying of content will be blocked on any mobile device that isn\u2019t enrolled in mobile device management.");break;case be:r=pe.t("When enabled, all members who access Slack from a unmanaged mobile device will be required to enter a passcode after a set amount of time away from the app.");a=pe.t("Depending on their device, members may also have the option to use biometric authentication such as a fingerprint or facial scan.");break;default:return null}return n.a.createElement("div",null,r&&n.a.createElement("p",null,r),a&&n.a.createElement("p",null,a))}},{key:"renderDeviceSettings",value:function e(){var t,r=this;if(!this.props.featureOrgModernSecurityPreferencesPage)return null;var a=(t={},E()(t,he,{label:pe.t("Mobile Device Approval"),description:pe.t("Any mobile device can be used to access Slack."),onState:pe.t("Enabled"),offState:pe.t("Disabled"),onClick:this.toggleableSettingClicked,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit,modalButtonType:"primary",modalButtonConfirmationText:pe.t("Enable"),descriptionAlertParagraphOne:pe.t("Enterprise mobility management settings at the organization level require a two-step confirmation to ensure Slack is set up with your EMM tool correctly."),descriptionAlertParagraphTwo:pe.t("Contact Slack to change your mobile security settings."),noButton:true}),E()(t,fe,{label:pe.t("Block File Downloads and Copying"),description:pe.t("You can choose to prevent members from downloading files or copying data out of Slack."),onState:pe.t("Enabled"),offState:pe.t("Disabled"),onClick:this.toggleableSettingClicked,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit,alertText:pe.t("Note: This will only apply to downloads and copying on mobile devices."),modalButtonType:"primary",modalButtonConfirmationText:pe.t("Enable")}),E()(t,be,{label:pe.t("Mobile Passcode"),description:pe.t("You can choose to have members set a passcode to access Slack from unmanaged mobile devices."),onState:pe.t("Enabled"),offState:pe.t("Disabled"),onClick:this.toggleableSettingClicked,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit,editOnly:true,editButtonText:pe.t("Enable"),alertText:pe.t("Note: This setting will only apply to guests. Settings for other members are controlled by your MDM service. View your mobile security settings"),modalButtonType:"danger",modalButtonConfirmationText:pe.t("Reset Passwords"),controlText:pe.t("Also sign these members out of Slack")}),t);return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__subtitle"},pe.t("Device Settings")),n.a.createElement("p",{className:"p-security_preferences_view__subtext"},pe.t("Configure settings for access to Slack and files from managed devices")),this.state.settingsItems.map(function(e,t){return n.a.createElement("div",{key:e.id.toString()},n.a.createElement($["a"],{label:a[e.id].label,state:e.enabled?a[e.id].onState:a[e.id].offState,readonly:a[e.id].readOnly,noButton:a[e.id].noButton,description:a[e.id].description,onClick:a[e.id].onClick(t),type:"button",descriptionAlertParagraphOne:a[e.id].descriptionAlertParagraphOne,descriptionAlertParagraphTwo:a[e.id].descriptionAlertParagraphTwo,control:{type:"button",enabled:e.enabled,onEnable:a[e.id].onEnable(t),onDisable:a[e.id].onDisable(t),onEdit:a[e.id].onEdit(t),editOnly:a[e.id].editOnly,editButtonText:a[e.id].editButtonText}}),n.a.createElement(R["a"],{closeModal:r.onCancel(t),isOpen:e.open,centered:true},n.a.createElement(R["g"],null,n.a.createElement(R["i"],{title:a[e.id].label})),n.a.createElement(R["c"],null,n.a.createElement(R["d"],null,r.renderModalBodyText(e),r.renderControl(e),r.renderAlert(e,a))),n.a.createElement(R["e"],null,n.a.createElement(R["f"],null,n.a.createElement(R["b"],{type:"outline"},"Cancel"),n.a.createElement(U["d"],{type:a[e.id].modalButtonType},a[e.id].modalButtonConfirmationText)))))}))}},{key:"render",value:function e(){return this.props.featureOrgModernSecurityPreferencesPage?n.a.createElement("div",{className:"p-security_preferences_view"},this.renderDeviceSettings()):null}}]);return t}(a["PureComponent"]);ge.displayName="DeviceSettings";ge.defaultProps=me;var _e=function e(t){return{featureOrgModernSecurityPreferencesPage:Object(y["isFeatureEnabled"])(t,"feature_org_modern_security_preferences_page")}};var ye=Object(o["connect"])(_e)(ge);var Oe=new _["b"]("enterprise_dashboard");var ke={featureOrgModernSecurityPreferencesPage:g["b"].bool};var Ee={featureOrgModernSecurityPreferencesPage:false};var je=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){return this.props.featureOrgModernSecurityPreferencesPage?n.a.createElement("div",{className:"p-security_preferences_view"},n.a.createElement("h1",{className:"p-security_preferences_view__title"},Oe.t("Security Settings")),n.a.createElement(ue,null),n.a.createElement(ye,null)):null}}]);return t}(a["PureComponent"]);je.displayName="SecurityPreferencesView";je.defaultProps=Ee;var Ce=function e(t){return{featureOrgModernSecurityPreferencesPage:Object(y["isFeatureEnabled"])(t,"feature_org_modern_security_preferences_page")}};var Se=Object(o["connect"])(Ce)(je);var we=Se;Object(c["a"])("interop.securityPreferences",{render:function e(t,r,a){if(!t)throw new Error("securityPreferences render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(we,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(26);var s=r.n(i);var o=r(6);var l=r.n(o);var c=r(7);var u=r.n(c);var d=r(8);var p=r.n(d);var v=r(9);var m=r.n(v);var h=r(0);var f=r(1);var b=r.n(f);var g=r(16);var _=r.n(g);var y=r(2);var O=r.n(y);var k=r(13);var E=r(292);var j=r(34);var C=r(1841);var S=r(45);var w=r(1100);var I=r(310);var T=r(10);var A=r(1534);var N=r(73);var P=r(48);var R=r(28);var M=r(392);var x=r(96);var D=r(51);var F=r(139);var L=r(182);var B=r(251);var U=r(894);var q=r(4204);var G=r(4);var H=r(4404);var W=r(35);var V=r(31);var K=r(122);var z=r(4312);var Q=r(4602);var Y=r(3140);var J=r.n(Y);var X=50;var Z=new T["b"]("apps_browser");var $={channelId:h["b"].string,hasSeenAppSpaceTutorial:h["b"].bool,isInternetExplorer:h["b"].bool,isFirefoxAndWindows:h["b"].bool,isFirefoxAndMac:h["b"].bool,isMacSsbBuild:h["b"].bool,scrollThreshold:h["b"].number,addAppsVariant:h["b"].bool,isUnpaid:h["b"].bool,fetchAppsIndexList:h["b"].func,submitAppsIndexSearch:h["b"].func,clogger:h["b"].object.isRequired,defaultAppIcon:h["b"].string.isRequired,openAboutApp:h["b"].func,featureM11nAppsBrowser:h["b"].bool,getChannelMembershipInfoForUsers:h["b"].func,addAppToChannelByMemberId:h["b"].func,closeModal:h["b"].func,openAppsTutorialModal:h["b"].func,team:h["b"].object,isAppBrowserBetterHeaderTreatment:h["b"].bool,featureAppBrowserBetterHeaderTranslations:h["b"].bool};var ee={channelId:void 0,hasSeenAppSpaceTutorial:false,isInternetExplorer:false,isFirefoxAndWindows:false,isFirefoxAndMac:false,isMacSsbBuild:false,scrollThreshold:500,addAppsVariant:false,isUnpaid:false,fetchAppsIndexList:O.a.noop,submitAppsIndexSearch:O.a.noop,openAboutApp:O.a.noop,featureM11nAppsBrowser:false,getChannelMembershipInfoForUsers:O.a.noop,addAppToChannelByMemberId:O.a.noop,closeModal:O.a.noop,openAppsTutorialModal:O.a.noop,team:void 0,isAppBrowserBetterHeaderTreatment:false,featureAppBrowserBetterHeaderTranslations:false};var te={listEnpoint:"apps.index.list",searchEndpoint:"apps.index.search"};var re=function e(){return{id:"tutorial_category",name:"",display_name:"",apps:[{name:Z.t("What are apps?"),short_description:Z.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/436da/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}]}};var ae=function(e){m()(t,e);function t(e){l()(this,t);var r=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.lastRequestId=0;r.currentDisplayedId=0;r.isMouseMoveEnabled=true;r.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;r.runningAppIndex=0;r.showLimitMeter=false;r.appsForLimitMeter=null;r.cloggedLimitMeterImpression=false;r.LimitMeterClogId=null;r.appLimitMeterClogPayload={};r.isPaginating=false;r.state={isShowingDefaultAppCategories:true,isSearching:false,searchTerm:"",appCategories:[],selectedAppIndex:null,showLoadingIndicator:false,showPaginationIndicator:false};r.handleKeydown=r.handleKeydown.bind(r);r.handleMouseMove=r.handleMouseMove.bind(r);r.handleAppsListScroll=r.handleAppsListScroll.bind(r);r.handleAppDirectoryButtonClick=r.handleAppDirectoryButtonClick.bind(r);r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.handleAppClick=r.handleAppClick.bind(r);r.handleAppMouseLeave=r.handleAppMouseLeave.bind(r);r.handleAppLimitMeterClickClog=r.handleAppLimitMeterClickClog.bind(r);r.fillDefaultAppsList=r.fillDefaultAppsList.bind(r);r.searchApps=r.searchApps.bind(r);r.completeRequest=r.completeRequest.bind(r);r.enableMouseMove=r.enableMouseMove.bind(r);r.throttledSearchApps=O.a.throttle(r.searchApps,500,{leading:false});r.debouncedEnableMouseMove=O.a.debounce(r.enableMouseMove,200);return r}u()(t,[{key:"componentDidMount",value:function e(){var t=this;document.body.addEventListener("keydown",this.handleKeydown);document.body.addEventListener("mousemove",this.handleMouseMove);this.loadingTimeout=setTimeout(function(){t.setState(function(){return{showLoadingIndicator:true}})},300);var r=this.props.fetchAppsIndexList({limit:X}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.defaultAppCategories=[re()].concat(s()(e.categories));return{categories:t.defaultAppCategories}});this.completeRequest(r,te.listEnpoint,false,this.fillDefaultAppsList)}},{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=this.getSelectedApp();"tutorial_app"===O.a.get(a,"dataset.app_id")&&!this.props.hasSeenAppSpaceTutorial&&t.hasSeenAppSpaceTutorial&&this.setState(function(){return{selectedAppIndex:null}},function(){r.firstSelectableAppIndex=r.state.isShowingDefaultAppCategories?1:0})}},{key:"componentWillUpdate",value:function e(t,r){this.state.isShowingDefaultAppCategories!==r.isShowingDefaultAppCategories&&(this.firstSelectableAppIndex=r.isShowingDefaultAppCategories&&t.hasSeenAppSpaceTutorial?1:0)}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.handleKeydown);document.body.removeEventListener("mousemove",this.handleMouseMove)}},{key:"getAppsListHeight",value:function e(){return document.querySelector("[data-apps_list]").scrollHeight}},{key:"getAppIcon",value:function e(t){var r=this.props.defaultAppIcon;return Object(I["a"])(t,72,r)}},{key:"getSelectedApp",value:function e(){return document.querySelector("[data-app_index='"+this.state.selectedAppIndex+"']")}},{key:"getTotalAppsCount",value:function e(){var t=0;for(var r=0;r<this.state.appCategories.length;r++)t+=O.a.get(this.state.appCategories[r],"apps",[]).length;return t}},{key:"enableMouseMove",value:function e(){this.isMouseMoveEnabled=true}},{key:"handleKeydown",value:function e(t){var r=this;var a=0;for(var n=0;n<this.state.appCategories.length;n++)a+=this.state.appCategories[n].apps.length;if(0===a)return;var i=void 0;switch(t.which){case 40:case 9:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var t=void 0;t=null===e.selectedAppIndex?r.firstSelectableAppIndex:e.selectedAppIndex===a-1?e.selectedAppIndex:e.selectedAppIndex+1;return{selectedAppIndex:t}},function(){r.scrollSelectedAppIntoView(false);r.debouncedEnableMouseMove()});break;case 38:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var a=void 0;a=null===e.selectedAppIndex?r.firstSelectableAppIndex:e.selectedAppIndex===r.firstSelectableAppIndex?r.firstSelectableAppIndex:t.getModifierState("Shift")?r.firstSelectableAppIndex:e.selectedAppIndex-1;return{selectedAppIndex:a}},function(){r.scrollSelectedAppIntoView(false);r.debouncedEnableMouseMove()});break;case 13:i=this.getSelectedApp();i&&this.selectApp(i.dataset);break;default:break}}},{key:"openAboutApp",value:function e(t){this.props.openAboutApp({appId:t.app_id,serviceId:t.bot_id,memberId:t.bot_user_id})}},{key:"isElementTextInput",value:function e(t){return"text"===t.type}},{key:"scrollSelectedAppIntoView",value:function e(){var t=this.getSelectedApp();if(!t)return;var r=document.querySelector("[data-apps_list]");var a=document.querySelector("[data-category_header]");var n=a?a.offsetHeight:0;t.offsetTop<r.scrollTop?r.scrollTop=t.offsetTop-n:t.offsetTop+t.offsetHeight>r.scrollTop+r.offsetHeight&&(r.scrollTop=t.offsetTop+t.offsetHeight-r.offsetHeight)}},{key:"handleAppClick",value:function e(t){this.selectApp(t.currentTarget.dataset)}},{key:"handleAppMouseLeave",value:function e(t){this.getSelectedApp()===t.currentTarget&&this.setState(function(){return{selectedAppIndex:null}})}},{key:"selectApp",value:function e(t){var r=this.props,a=r.clogger,i=r.channelId;var s={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.state.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===t.app_id){var o=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){Object(V["openAuthenticatedUrlInBrowser"])(this.props.team,"/pricing?ui_step=280&ui_element=5");a.track("GROWTH_PRICING",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{Object(V["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps");a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added)if(this.props.featureM11nAppsBrowser){this.props.closeModal();this.props.addAppToChannelByMemberId({memberId:t.bot_user_id,channelId:i})}else Object(w["a"])(t);else if("true"===t.is_installed){this.openAboutApp(t);a.track("APP_INDEX_VIEW_CLICK",s)}else{Object(V["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps/"+t.app_id+"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click");a.track("APP_INDEX_INSTALL_CLICK",s);a.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",n()({},s,{contexts:n()({},s.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})}))}}},{key:"handleMouseMove",value:function e(t){if(!this.isMouseMoveEnabled)return;var r=t.target.closest("[data-app]");r&&this.setState(function(){return{selectedAppIndex:parseInt(r.dataset.app_index,10)}})}},{key:"handleAppsListScroll",value:function e(t){var r=t.currentTarget;var a=r.offsetHeight+r.scrollTop+this.props.scrollThreshold;this.state.isShowingDefaultAppCategories&&a>r.scrollHeight&&this.loadMoreApps(this.state.appCategories[1],te.listEnpoint)}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;Object(V["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK");t.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}},{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"handleSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{searchTerm:r}});this.throttledSearchApps(r)}},{key:"fillDefaultAppsList",value:function e(){var t=this.state.appCategories[1];if(t.next_cursor&&window.innerHeight-230>this.getAppsListHeight())this.loadMoreApps(t,te.listEnpoint,this.fillDefaultAppsList);else{this.setState(function(){return{showLoadingIndicator:false}});clearTimeout(this.loadingTimeout)}}},{key:"loadMoreApps",value:function e(t,r,a){var i=this;if(this.isPaginating)return;if(!t.next_cursor)return;var o={category:t.id,cursor:t.next_cursor,limit:X};r===te.searchEndpoint&&(o.query=this.state.searchTerm);var l=setTimeout(function(){i.setState(function(){return{showPaginationIndicator:true}})},300);this.isPaginating=true;this.lastRequestId+=1;var c=this.lastRequestId;var u=r===te.searchEndpoint?this.props.submitAppsIndexSearch:this.props.fetchAppsIndexList;u(o).then(function(e){if(c<i.lastRequestId)return;var o=e.categories[0];if(!o)return;i.setState(function(e){if(c<i.lastRequestId)return{};for(var a=0;a<e.appCategories.length;a++)if(e.appCategories[a].id===t.id){var l=[].concat(s()(e.appCategories[a].apps),s()(o.apps));var u=n()({},e.appCategories[a]);u.apps=l;u.next_cursor=o.next_cursor;var d=[].concat(s()(e.appCategories));d[a]=u;r===te.listEnpoint&&(i.defaultAppCategories=d);return{appCategories:d,showPaginationIndicator:false}}return{}},function(){i.isPaginating=false;clearTimeout(l);a&&"function"===typeof a&&a()})})}},{key:"searchApps",value:function e(t){var r=this;var a=this.props.clogger;if(t){var n=setTimeout(function(){r.setState(function(){return{isSearching:true}})},300);var i=this.props.submitAppsIndexSearch({query:t}).then(function(e){clearTimeout(n);r.setState(function(){return{isShowingDefaultAppCategories:false,isSearching:false}});return e});this.completeRequest(i,te.searchEndpoint,true);a.track("APP_INDEX_SEARCH")}else this.setState(function(){return{showLoadingIndicator:false,appCategories:r.defaultAppCategories,isShowingDefaultAppCategories:true}})}},{key:"completeRequest",value:function e(t,r,a,n){var i=this;this.lastRequestId+=1;var s=this.lastRequestId;t.then(function(e){if(s>i.currentDisplayedId){i.currentDisplayedId=s;var t={appCategories:e.categories,selectedAppIndex:O.a.get(e,"categories[0].apps",[]).length&&r===te.searchEndpoint?0:null};a&&(t.showLoadingIndicator=false);if(i.props.addAppsVariant){var o=O.a.map(O.a.filter(O.a.flatMap(e.categories,"apps"),"bot_user_id"),"bot_user_id");i.props.featureM11nAppsBrowser?i.props.getChannelMembershipInfoForUsers({channelId:i.props.channelId,userIds:o}).then(function(){i.updateAfterRequest(t,n)}):Object(w["c"])(o).then(function(){i.updateAfterRequest(t,n)})}else i.updateAfterRequest(t,n)}}).catch(O.a.noop)}},{key:"updateAfterRequest",value:function e(t,r){this.setState(function(){return t},function(){r&&"function"===typeof r&&r()})}},{key:"createAppCategoryMarkup",value:function e(t,r){var a=this;return t.apps.map(function(e,t){var n=r+t;var i=_()("p-apps_browser__app",{"p-apps_browser__app--selected":n===a.state.selectedAppIndex});var s="app-"+e.app_id+"-"+e.bot_id;var o=a.getAppIcon(e);if(a.props.featureM11nAppsBrowser)return b.a.createElement(z["a"],{key:s,addAppsVariant:a.props.addAppsVariant,app:e,channelId:a.props.channelId,className:i,onClick:a.handleAppClick,onMouseLeave:a.handleAppMouseLeave,"data-app_index":n});var l=a.props.addAppsVariant&&e.is_installed&&Object(w["b"])(e.bot_user_id);var c=Z.t("Install");"tutorial_app"===e.app_id?c=Z.t("Start"):l?c=Z.t("Add"):e.is_installed&&(c=Z.t("View"));return b.a.createElement("div",{key:s,className:i,onClick:a.handleAppClick,onMouseLeave:a.handleAppMouseLeave,"data-app":true,"data-app_index":n,"data-is_installed":e.is_installed,"data-app_id":e.app_id,"data-bot_id":e.bot_id,"data-bot_user_id":e.bot_user_id,"data-can_app_be_added":l||null,"data-qa":"apps_browser_row",role:"presentation"},b.a.createElement("img",{className:"p-apps_browser__app_icon",src:o,alt:"App icon"}),b.a.createElement("div",{className:"p-apps_browser__app_info"},b.a.createElement("div",{className:"p-apps_browser__app_name"},b.a.createElement("strong",null,e.name)),b.a.createElement("div",{className:"p-apps_browser__app_description"},Object(A["a"])(e.short_description,function(e,t){return b.a.createElement("strong",{key:t},e)}))),b.a.createElement(R["d"],{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline"},c))})}},{key:"createAppCategoriesMarkup",value:function e(){var t=this;this.runningAppIndex=0;return this.state.appCategories.map(function(e){if(!O.a.get(e,"apps",[]).length)return null;var r="category-"+e.id;var a=_()("p-apps_browser__category_section",{"p-apps_browser__category_section--tutorial":"tutorial_category"===e.id},{"p-apps_browser__category_section--hidden":"tutorial_category"===e.id&&(t.props.hasSeenAppSpaceTutorial||!t.state.isShowingDefaultAppCategories||t.showLimitMeter)});var n=_()("p-apps_browser__category_header");var i=t.createAppCategoryMarkup(e,t.runningAppIndex);t.runningAppIndex+=e.apps.length;return b.a.createElement("section",{key:r,className:a},b.a.createElement("div",{className:n,"data-category_header":true},e.display_name),i)},this)}},{key:"createColorLimitMeterMarkup",value:function e(){return this.appsForLimitMeter.map(function(e,t){var r="color-meter-"+t;var a=_()({hidden:0===t,first:1===t,meter_first_green:t<4&&"blank_box"!==e.short_description,meter_second_green:4===t&&"blank_box"!==e.short_description,meter_third_green:5===t&&"blank_box"!==e.short_description,meter_fourth_green:6===t&&"blank_box"!==e.short_description,meter_yellow:7===t&&"blank_box"!==e.short_description,meter_orange:8===t&&"blank_box"!==e.short_description,meter_red:9===t&&"blank_box"!==e.short_description,on:"blank_box"!==e.short_description,off:"blank_box"===e.short_description&&1!==t});return b.a.createElement("li",{className:a,key:r})})}},{key:"createAppsForLimitMeterMarkup",value:function e(t){var r=this;if(!O.a.get(t,"apps",[]).length)return null;var a=10;this.appsForLimitMeter=JSON.parse(JSON.stringify(t.apps));var n=a-t.apps.length;while(n>0){var i={app_id:n,name:this.props.featureM11nAppsBrowser?Z.t("Try a new app"):"Try a new app",short_description:"blank_box"};this.appsForLimitMeter.push(i);n-=1}this.appsForLimitMeter[0].align="ts_tip_left";this.appsForLimitMeter[a-1].align="ts_tip_right";return this.appsForLimitMeter.map(function(e,t){var a="limit-apps-"+t;var n=_()("p-apps_browser__app_limit_meter__apps","inline_block","ts_tip","ts_tip_bottom",{"p-apps_browser__app_limit_meter__blank_app_box":"blank_box"===e.short_description,is_ff_and_win:r.props.isFirefoxAndWindows,is_ff_and_mac:r.props.isFirefoxAndMac,is_ie:r.props.isInternetExplorer,ts_tip_right:"ts_tip_right"===e.align,ts_tip_left:"ts_tip_left"===e.align,no_left_margin:"ts_tip_left"===e.align});var i=_()("ts_tip_tip",{large_top_margin:"blank_box"===e.short_description,medium_top_margin:"blank_box"!==e.short_description});var s="blank_box"===e.short_description?null:r.getAppIcon(e);return b.a.createElement("div",{className:n,key:a},b.a.createElement("img",{className:"align_top",src:s,alt:""}),b.a.createElement("span",{className:i},e.name))})}},{key:"createAppLimitMeterMarkup",value:function e(){var t=this;return this.state.appCategories.map(function(e){var r=10;var a=O.a.get(e,"apps",[]).length;var n=t.props,i=n.isUnpaid,s=n.isFirefoxAndWindows,o=n.isFirefoxAndMac,l=n.isInternetExplorer,c=n.clogger,u=n.featureM11nAppsBrowser;if(!a||a>r||"Ai01"!==e.id||!t.state.isShowingDefaultAppCategories)return null;var d=t.getSelectedApp();var p="num_of_apps="+a;var v=!!a;var m="limit-meter-"+e.id;t.showLimitMeter=v&&i;if(!t.showLimitMeter)return null;t.firstSelectableAppIndex=0;var h=void 0;var f=void 0;var g=void 0;var y=void 0;var k=void 0;var E=void 0;var j=_()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:s});var C=_()("p-apps_browser__app_limit_meter",{is_ff_and_mac:o});if(t.props.isAppBrowserBetterHeaderTreatment){if(!t.props.featureAppBrowserBetterHeaderTranslations)return null;if(a<6){h=Z.t("Add apps to get things done");y="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";k="link_app_directory";f=Z.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,function(e){var r=e.tag,a=e.text;if("a"!==r)return null;return b.a.createElement(D["a"],{href:y,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":k,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},a)})}else if(a<10){h=Z.t("Upgrade for unlimited apps");y="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";k="pricing_link";E=_()({hidden:t.props.isMacSsbBuild});f=Z.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:a},function(e){var r=e.tag,a=e.text;if("a"!==r)return null;return b.a.createElement(D["a"],{className:E,href:y,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":k,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},a)})}else{h=Z.t("Upgrade to add more apps");y="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";k="pricing_link";E=_()({hidden:t.props.isMacSsbBuild});f=Z.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,function(e){var r=e.tag,a=e.text;if("a"!==r)return null;return b.a.createElement(D["a"],{className:E,href:y,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":k,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},a)})}}else if(a<6){h=Z.t("Add apps to get things done");f=Z.t("Schedule meetings, share docs, and more \u2014\xa0straight from Slack. ");g=Z.t("See app suggestions");y="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";k="link_app_directory"}else if(a>5){h=Z.t("Upgrade for unlimited apps");f=Z.t("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. ",{numOfApps:a});g=Z.t("Learn more");y="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";k="pricing_link"}t.appLimitMeterClogPayload={num_of_apps:a,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:k}}};if(!t.cloggedLimitMeterImpression){if("GROWTH_PRICING"===t.LimitMeterClogId){c.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);c.track("UPGRDEXP_LIMIT_APPSPACE",t.appLimitMeterClogPayload)}else{c.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);c.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})}t.cloggedLimitMeterImpression=true}var S=_()({hidden:t.props.isMacSsbBuild&&"pricing_link"===k,bold:"app_limit_meter"===O.a.get(d,"dataset.app_id")});var w=t.createAppsForLimitMeterMarkup(e);var I=t.createColorLimitMeterMarkup();return b.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:m},b.a.createElement("div",{className:C,"data-qa":"apps_browser_app_limit_meter"},b.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},b.a.createElement("b",null,h)),b.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},f,!t.props.isAppBrowserBetterHeaderTreatment&&b.a.createElement(D["a"],{className:S,href:y,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":k,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":p,onClick:t.handleAppLimitMeterClickClog},g)),u?b.a.createElement(Q["a"],{apps:e.apps,isFirefoxAndWindows:s,isFirefoxAndMac:o,isInternetExplorer:l,featureM11nAppsBrowser:u}):b.a.createElement("div",null,b.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},w),b.a.createElement("ul",{className:j},I))))})}},{key:"render",value:function e(){var t=this.props,r=t.addAppsVariant,a=t.channelId;var n=void 0;var i=_()("p-apps_browser__apps_list",{"p-apps_browser__apps_list--loading":this.state.showLoadingIndicator,"p-apps_browser__apps_list--paginating":this.state.showPaginationIndicator});var s=void 0;s=r&&a?b.a.createElement("h2",{className:"overflow_hidden"},Z.rt("Add apps to {channelName}",{channelName:b.a.createElement(F["a"],{channelId:a,inline:true,className:"overflow_ellipsis"})})):b.a.createElement("h2",null,Z.t("Browse Apps"));n=!this.getTotalAppsCount()&&this.state.searchTerm?b.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results"},Z.t("There are no apps matching"),"\xa0",b.a.createElement("strong",null,this.state.searchTerm)):this.createAppCategoriesMarkup();var o=this.createAppLimitMeterMarkup();return b.a.createElement("div",{className:"p-apps_browser"},b.a.createElement("div",{className:"p-apps_browser__filter_container"},b.a.createElement("div",{className:"p-apps_browser__filter_header"},s,b.a.createElement(R["d"],{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},Z.t("View App Directory"))),b.a.createElement("div",null,b.a.createElement(M["a"],{placeholder:Z.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,value:this.state.searchTerm}))),b.a.createElement("div",{className:i,onScroll:this.handleAppsListScroll,"data-apps_list":true},o,n,b.a.createElement(x["a"],{className:"p-apps_browser__spinner",size:"jumbo"})))}}]);return t}(f["Component"]);ae.displayName="AppsBrowser";ae.defaultProps=ee;var ne=function e(t){var r=Object(j["g"])(t,"seen_app_space_tutorial");var a=Object(N["a"])(t);var n=Object(W["d"])(t);return{channelId:a,hasSeenAppSpaceTutorial:r,clogger:Object(S["a"])({state:t}),defaultAppIcon:Object(L["getDefaultAppIcon"])(t),featureM11nAppsBrowser:Object(G["isFeatureEnabled"])(t,"feature_m11n_apps_browser"),team:n,isAppBrowserBetterHeaderTreatment:"treatment"===Object(K["getGroupForUser"])(t,"lc_app_browser_better_header"),featureAppBrowserBetterHeaderTranslations:Object(G["isFeatureEnabled"])(t,"feature_app_browser_better_header_translations")}};var ie=function e(t){return Object(E["bindActionCreators"])({fetchAppsIndexList:C["a"],submitAppsIndexSearch:C["b"],openAboutApp:U["b"],openAppsTutorialModal:H["a"],getChannelMembershipInfoForUsers:B["getChannelMembershipInfoForUsers"],addAppToChannelByMemberId:q["a"],closeModal:P["closeModal"]},t)};t["a"]=Object(k["connect"])(ne,ie)(ae)},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(98);var c=r(308);var u=r(1415);var d=r(122);var p=r(930);var v=r(1094);var m=r(3);var h=r.n(m);var f=r(2);var b=r.n(f);var g=r(12);var _=r(71);var y=r(547);var O=r(796);var k=r(787);var E=r(34);var j=r(132);var C=r(19);var S=r(11);var w=r(217);var I=r(326);var T=r(188);var A=r(24);var N=r(35);var P=r(31);var R=r(4);var M=r(686);var x=r(73);var D=r(316);var F=r(209);var L=r(45);var B=r(1157);var U=r(781);var q=r(15);var G=r(38);var H=r(684);var W=r(691);var V=Object(q["b"])("Ensure channels with drafts exist in our model",function(e,t){var r=t();var a=Object(g["a"])({state:r,label:"DRAFTS"});var n=Object(G["a"])()?Object(H["getAllDraftChannelIds"])(r):Object(W["e"])();if(Object(f["isEmpty"])(n)){a.info("There are no channels with drafts");return}a.info("Ensuring we have channel objects for all channels with drafts");n.forEach(function(e){Object(C["d"])(r,e)})});V.propTypes=null;var K=V;var z=r(23);var Q=r(228);var Y=r(181);var J=r(1406);var X=r(531);var Z=r(178);var $=r(386);var ee=r(245);var te=r(26);var re=r.n(te);var ae=r(182);var ne=r(14);var ie=Object(ne["b"])(function(e){var t=Object(N["d"])(e);if(!Object(P["isPaidTeam"])(t))return"alphabetical";return Object(E["g"])(e,"channel_sort")});var se=ie;var oe=r(93);var le=r(17);var ce=r(10);var ue=r(799);var de=r(65);var pe=["drafts","starred","sharedChannels","channels","orgWideChannels","ims","apps"];var ve={drafts:{channelsOrdered:[],hasHeading:true},starred:{channelsOrdered:[],hasHeading:true},sharedChannels:{channelsOrdered:[],hasHeading:true},channels:{channelsOrdered:[],hasHeading:true},orgWideChannels:{channelsOrdered:[],hasHeading:true},ims:{channelsOrdered:[],hasHeading:true},apps:{channelsOrdered:[],hasHeading:true}};var me=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"];var he=b.a.invert(me);var fe={default:me.map(function(){return[]}),muted:me.map(function(){return[]}),suggested:me.map(function(){return[]})};var be=function e(t){return t&&t.has_draft};var ge=function e(t){var r=t.channel,a=t.members,n=t.isCurrentlySelected,i=t.isMuted,s=t.shouldHideReadChannels,o=t.shouldHideReadChannelsUnlessStarred,l=t.featureReactMessages,c=t.hasDraft,u=t.teamId,d=t.isSuggested,p=t.showAppDmSuggestions;if(Object(S["isFromAnotherTeam"])(r))return false;if(Object(S["isUnknownOrNonExistent"])(r))return false;if(n)return true;if(Object(S["isArchived"])(r))return false;if(Object(S["isImAndIsMemberDeleted"])(r,a[Object(S["getMemberIdFromIm"])(r)]))return false;if(!Object(S["isMemberOfChannel"])(r)&&!d)return false;if((Object(S["isIm"])(r)||Object(S["isMpim"])(r))&&!Object(S["isOpen"])(r)&&Object(S["isRead"])(r)&&!c)return false;if(Object(S["isIm"])(r)){var v=[Object(S["getMemberIdFromIm"])(r)];v[0]||Object(g["a"])({teamId:u}).error("SIDEBAR-SECTIONS","IM "+r.id+" is missing its associated user");if(!Object(le["haveMembersForIds"])({members:a,dangerouslyOverrideCreateSelectorSanityCheck:true},v))return false}if(Object(S["isMpim"])(r)){var m=Object(S["getMemberIdsFromMpim"])(r);m&&m.length||Object(g["a"])({teamId:u}).error("SIDEBAR-SECTIONS","MPIM "+r.id+" is missing its associated members");if(!Object(le["haveMembersForIds"])({members:a,teamId:u,dangerouslyOverrideCreateSelectorSanityCheck:true},m))return false}if(o&&Object(S["isStarred"])(r))return true;if(c)return true;if(i&&Object(S["shouldShowWithoutUnreads"])(r)&&!l)return true;if(p&&s&&Object(S["isAppChannel"])(r,a)&&Object(S["isStarred"])(r)&&Object(S["isRead"])(r))return false;if(p&&Object(S["isAppChannel"])(r,a))return true;if((o||s)&&Object(S["isRead"])(r))return false;return true};var _e={};var ye={};var Oe={};var ke=function e(t){var r=t.channel,a=t.isApp,n=t.isAppSpaceEnabled,i=t.shouldSeparateSharedChannels,s=t.shouldSeparateOrgWideChannels,l=t.draftChannelIds,c=t.featureChannelSidebarDraftsSection,u=t.currentlySelectedId,d=t.teamId;var p=Object(o["c"])(d);if(c&&(b.a.includes(l,r.id)||be(r))&&(Object(R["isFeatureEnabled"])(p,"feature_announce_only_websocket")||Object(oe["s"])(p,r.id))){u!==r.id||b.a.includes(ye[d],r.id)||_e[d]||(Oe[d]=r.id);Oe[d]&&u!==Oe[d]&&delete Oe[d];if(r.id!==Oe[d])return"drafts"}if(Object(S["isStarred"])(r))return"starred";if(Object(S["isSharedPublicOrPrivateChannel"])(r)&&i)return"sharedChannels";if(Object(S["isOrgGlobalSharedPublicOrPrivateChannel"])(r)&&!Object(S["isPrivateChannel"])(r)&&s)return"orgWideChannels";if(a&&n)return"apps";if(Object(S["isIm"])(r)||Object(S["isMpim"])(r))return"ims";return"channels"};var Ee=function e(t){var r=t.channel,a=t.currentUserId,n=t.shouldSeparatePrivateChannels,i=t.shouldSeparateSharedChannels,s=t.shouldBumpMention;if(Object(S["isSlackbot"])(r))return he.slackbot;if(Object(S["isUserId"])(r,a))return he.you;if(Object(S["isIm"])(r)||Object(S["isMpim"])(r))return s?he.imsMentions:he.ims;if(n&&Object(S["isPrivateChannel"])(r))return s?he.privateMentions:he.private;if(i&&Object(S["isSharedPublicOrPrivateChannel"])(r))return s?he.sharedMentions:he.shared;return s?he.defaultMentions:he.default};var je=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channels,a=t.currentlySelectedId,n=t.mutedChannels,i=t.members,s=t.sidebarBehaviorPref,o=t.featureReactMessages,l=t.draftChannelIds,c=t.teamId,u=t.suggestedChannelIds,d=t.showAppDmSuggestions;var p="hide_read_channels"===s;var v="hide_read_channels_unless_starred"===s;var m=[];var h=false;var f=false;var b=false;var g=Object.keys(r);for(var _=0;_<g.length;_+=1){var y=r[g[_]];var O=-1!==l.indexOf(y.id);Object(G["a"])()||(O=be(y));var k=ge({channel:y,members:i,isCurrentlySelected:a===y.id,isMuted:!!n[y.id],shouldHideReadChannels:p,shouldHideReadChannelsUnlessStarred:v,featureReactMessages:o,hasDraft:O,teamId:c,isSuggested:-1!==u.indexOf(y.id),showAppDmSuggestions:d});k&&m.push(y);h||(h=Object(S["isSharedPublicOrPrivateChannel"])(y)&&(Object(S["isMemberOfChannel"])(y)||a===y.id));f||(f=Object(S["isOrgGlobalSharedPublicOrPrivateChannel"])(y)&&!Object(S["isPrivateChannel"])(y));b||(b=Object(S["isStarred"])(y))}return{channelsVisible:m,belongsToOrPreviewingAnySharedChannels:h,belongsToAnyOrgChannels:f,hasAStarredChannel:b}};var Ce=Object(ue["a"])(je,2);var Se=function e(t){var r=t.channelsSorted,a=t.belongsToOrPreviewingAnySharedChannels,n=t.members,i=t.mutedChannels,s=t.draftChannelIds,o=t.suggestedChannelIds,l=t.currentUserId,c=t.currentlySelectedId,u=t.teamId,d=t.sortPref,p=t.isAppSpaceEnabled,v=t.shouldSeparateSharedChannels,m=t.shouldSeparateOrgWideChannels,f=t.shouldSeparatePrivateChannels,g=t.dismissedAppMembers,_=t.featureChannelSidebarDraftsSection,y=t.featureReactMessages,O=t.featureSilenceAppDMs,k=t.showAppDmSuggestions;var E={};var j=[];var C=pe.concat();C.forEach(function(e){E[e]=h()({},ve[e]);E[e].channelsOrdered=b.a.cloneDeep(fe)});var w=[];var I=[];r.forEach(function(e){Object(S["isIm"])(e)&&w.push(Object(S["getMemberIdFromIm"])(e));var t=Object(S["isAppChannel"])(e,n);var r=ke({channel:e,isApp:t,isAppSpaceEnabled:p,shouldSeparateSharedChannels:v,shouldSeparateOrgWideChannels:m,draftChannelIds:s,featureChannelSidebarDraftsSection:_,currentlySelectedId:c,teamId:u});t&&j.push(e);var a=!!i[e.id];var h=Object(S["getBadgeCountWithMuted"])(e,a,y,O,Object(S["isAppChannel"])({channel:e,members:n}));var b=h>0;var g=Ee({channel:e,currentUserId:l,shouldSeparatePrivateChannels:f,shouldSeparateSharedChannels:v,shouldBumpMention:"priority"===d&&b});var k=void 0;k=-1!==o.indexOf(e.id)?"suggested":a?"muted":"default";var C=E[r].channelsOrdered[k][g];C.push(e.id);Object(G["a"])()||be(e)&&I.push(e.id)});var T={};o.forEach(function(e,t){T[e]=t});E.channels.channelsOrdered.suggested.forEach(function(e){e.sort(function(e,t){return T[e]>T[t]?1:-1})});ye[u]=[].concat(re()(s),I);var A=b.a.mapValues(E,function(e){return h()({},e,{channelsOrdered:b.a.flatten([].concat(re()(e.channelsOrdered.default),re()(e.channelsOrdered.muted),re()(e.channelsOrdered.suggested)))})});if(!_||A.drafts.channelsOrdered.length<1){delete A.drafts;b.a.remove(C,function(e){return"drafts"===e})}if(A.starred.channelsOrdered.length<1){delete A.starred;b.a.remove(C,function(e){return"starred"===e})}if(!v||!a){delete A.sharedChannels;b.a.remove(C,function(e){return"sharedChannels"===e})}if(!m||A.orgWideChannels.channelsOrdered.length<1){delete A.orgWideChannels;b.a.remove(C,function(e){return"orgWideChannels"===e})}if(p)k&&(A.apps={hasHeading:true,channelsOrdered:[],membersOrdered:we({members:n,appChannels:j,flatSidebarSections:A,dismissedAppMembers:g})});else{delete A.apps;b.a.remove(C,function(e){return"apps"===e})}return{sidebarSectionsOrdered:C,sidebarSections:A,idsNeedingPresenceSubscription:w}};function we(e){var t=e.members,r=e.appChannels,a=e.flatSidebarSections,n=e.dismissedAppMembers,i=e.maxSuggestionsCount,s=void 0===i?10:i;var o=b.a.keyBy(r,S["getMemberIdFromIm"]);var l=r.reduce(function(e,t){a.starred&&-1!==a.starred.channelsOrdered.indexOf(t.id)||e.push(t.id);return e},[]);var c=[];var u=s-l.length;if(u>0){var d=Object.values(t).reduce(function(e,t){var r=t.is_bot,a=t.id;!r||o[a]||n[a]||Object(le["isDeleted"])(t)||e.push(t);return e},[]);d.sort(function(e,t){return Object(ce["p"])(e.name,t.name)});c=d.map(function(e){return e.id}).slice(0,u)}return l.concat(c)}var Ie=Object(ue["a"])(Se,3);var Te=function e(t){return Object(E["g"])(t,"sidebar_behavior")};var Ae=function e(t){return Object(E["g"])(t,"separate_private_channels")};var Ne=function e(t){return!Object(R["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel")&&Object(E["g"])(t,"separate_shared_channels")};var Pe=function e(t){return Object(E["g"])(t,"ent_org_wide_channels_sidebar")};var Re=function e(t){return Object(R["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section")};var Me=function e(t){var r=Object(z["b"])(t);var a=Object(C["b"])(t);var n=Object(w["getMutedChannels"])(t);var i=Object(A["a"])(t);var s=Object(H["getAllDraftChannelIds"])(t);var o=Object(S["getSuggestedChannels"])(t);var l=Object(x["a"])(t);var c=Object(R["getCurrentUserId"])(t);var u=Te(t);var p=Ae(t);var v=Ne(t);var m=Pe(t);var h=Object(E["d"])(t);var f=Object(ae["isAppSpaceEnabled"])(t);var b=Object(R["shouldUseReactMessages"])(t);var g=Object(R["shouldSilenceAppDMs"])(t);var _=Re(t);var y="variant"===Object(d["getGroupForUser"])(t,"show_more_apps_in_sidebar_new_and_free");void 0===_e[r]?_e[r]=true:_e[r]&&(_e[r]=false);var O=Ce({channels:a,currentlySelectedId:l,mutedChannels:n,members:i,sidebarBehaviorPref:u,featureReactMessages:b,draftChannelIds:s,teamId:r,suggestedChannelIds:o,showAppDmSuggestions:y}),k=O.channelsVisible,j=O.belongsToOrPreviewingAnySharedChannels;var I={};k.forEach(function(e){if(!e||!e.id)return;I[e.id]=Object(S["getDisplayNameForChannel"])(t,e,{publicChannelIncludeHashSign:false,imIncludeAtSign:false})});var T=function e(t,r){return Object(ce["p"])(t&&I[t.id],r&&I[r.id])};var N=function e(t,r){var a=t.priority||-1;var n=r.priority||-1;if(a===n)return T(t,r);return n-a};var P=function e(t){if("priority"===t)return N;return T};var M=se(t);var D=k.sort(P(M));return Ie({channelsSorted:D,belongsToOrPreviewingAnySharedChannels:j,members:i,mutedChannels:n,draftChannelIds:s,suggestedChannelIds:o,currentUserId:c,currentlySelectedId:l,teamId:r,sortPref:M,isAppSpaceEnabled:f,shouldSeparateSharedChannels:v,shouldSeparateOrgWideChannels:m,shouldSeparatePrivateChannels:p,dismissedAppMembers:h,featureChannelSidebarDraftsSection:_,featureReactMessages:b,featureSilenceAppDMs:g,showAppDmSuggestions:y})};var xe=Me;Object(de["exportToGlobalDebugger"])("channelSidebar",{getDraftChannelToWithhold:function e(){return Oe}});var De=r(207);var Fe=r(156);var Le=12;var Be=18;var Ue=26;var qe=52;var Ge={id:null,type:"topPadding",height:Le};var He={id:null,type:"spacer",height:Be};var We={id:"Vquick_switcher",type:"quickswitcherButton",height:qe};var Ve={id:"Vall_unreads",type:"allUnreadsLink",height:Ue};var Ke={id:"Vall_threads",type:"allThreadsLink",height:Ue};var ze={id:"Vsearch",type:"searchLink",height:Ue};var Qe={id:null,type:"sectionHeading",name:"",height:Ue};var Ye={id:null,type:"folderHeading",name:"",height:Ue};var Je={id:null,type:"channel",index:null,height:Ue};var Xe={id:null,type:"appDmSuggestion",index:null,height:Ue};var Ze={id:null,type:"addAChannelLink",dim:false,height:Ue};var $e={id:null,type:"invitePeopleLink",dim:false,height:Ue};var et={id:null,type:"installAppsLink",dim:false,height:Ue};var tt={id:null,type:"appSuggestionLinks",dim:false,height:Ue};var rt={id:null,type:"upgradeSlackLink",height:Ue};var at={id:null,type:"emptyState",index:null,height:Ue};var nt=Object(De["createSelector"])([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasAddAChannelLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.appSuggestionsCount},function(e){return e&&e.hasUpgradeSlackLink},function(e){return e&&e.sidebarFiltersIsEnabled},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders},function(e){return e&&e.pages},function(e){return e&&e.featurePages},function(e){return e&&e.featureReactAllUnreads}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{};var u=arguments.length>10&&void 0!==arguments[10]&&arguments[10];var d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[];var p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:[];var v=arguments.length>13&&void 0!==arguments[13]&&arguments[13];var m=arguments.length>14&&void 0!==arguments[14]&&arguments[14];var b=[];var g={};var _=0;e?b.push(h()({},We,{scrollTop:_,scrollBottom:_+=We.height})):b.push(h()({},Ge,{scrollTop:_,scrollBottom:_+=Ge.height}));var y=p.find(function(e){return"Pwelcome"===e.id});y&&b.push({id:y.id,type:"pageLink",height:Ue,scrollTop:_,scrollBottom:_+=Ue});var O=p.find(function(e){return"Pinbox"===e.id});O&&b.push({id:O.id,type:"pageLink",height:Ue,scrollTop:_,scrollBottom:_+=Ue});t&&(v&&m?b.push({id:"Punreads",type:"pageLink",height:Ue,scrollTop:_,scrollBottom:_+=Ue}):b.push(h()({},Ve,{scrollTop:_,scrollBottom:_+=Ve.height})));b.push(h()({},Ke,{scrollTop:_,scrollBottom:_+=Ke.height}));r&&b.push(h()({},ze,{scrollTop:_,scrollBottom:_+=ze.height}));v&&p.filter(function(e){return-1===["Punreads","Pwelcome","Pinbox"].indexOf(e.id)}).forEach(function(e){b.push({id:e.id,type:"pageLink",height:Ue,scrollTop:_,scrollBottom:_+=Ue})});var k=0;u&&d.forEach(function(e){"folderHeading"!==Object(f["last"])(b).type&&b.push(h()({},He,{scrollTop:_,scrollBottom:_+=He.height}));b.push(h()({},Ye,{id:e.name,name:e.name}));e.channelIds.forEach(function(t){var r=false;l.forEach(function(e){var a=c[e]||{};var n=a.channelsOrdered||[];r=r||n.filter(function(e){return e===t}).length>0});if(!r)return;if(!e.isCollapsed){b.push(h()({},Je,{id:t,index:k,scrollTop:_,scrollBottom:_+=Je.height,sectionName:e.name}));k+=1}g[t]=true})});l.forEach(function(e){var t=c[e]||{};var r=t.channelsOrdered||[];("sectionHeading"!==Object(f["last"])(b).type||r.length>0)&&b.push(h()({},He,{scrollTop:_,scrollBottom:_+=He.height}));t.hasHeading&&b.push(h()({},Qe,{name:e,scrollTop:_,scrollBottom:_+=Qe.height,sectionName:e}));o&&t.hasHeading&&0===r.length&&b.push(h()({},at,{name:e,scrollTop:_,scrollBottom:_+=at.height}));t.channelsOrdered.forEach(function(t){if(g[t])return;b.push(h()({},Je,{id:t,index:k,scrollTop:_,scrollBottom:_+=Je.height,sectionName:e}));k+=1});if("channels"===e&&a){b.push(h()({},He,{scrollTop:_,scrollBottom:_+=He.height}));b.push(h()({},Ze,{dim:true,height:Ze.height,scrollTop:_,scrollBottom:_+=Ze.height}))}if("ims"===e&&n){b.push(h()({},He,{scrollTop:_,scrollBottom:_+=He.height}));b.push(h()({},$e,{dim:"dim"===n,height:$e.height,scrollTop:_,scrollBottom:_+=$e.height}))}if("apps"===e){t.membersOrdered&&t.membersOrdered.forEach(function(t){var r=Object(Fe["a"])(t)?Xe:Je;b.push(h()({},r,{id:t,index:k,scrollTop:_,scrollBottom:_+=r.height,sectionName:e}));k+=1});b.push(h()({},He,{scrollTop:_,scrollBottom:_+=He.height}));if(Number.isFinite(i)&&i>0){var s=i*tt.height;b.push(h()({},tt,{height:s,scrollTop:_,scrollBottom:_+=s}))}b.push(h()({},et,{height:et.height,scrollTop:_,scrollBottom:_+=et.height}))}});if(s){b.push(h()({},at,{scrollTop:_,scrollBottom:_+=at.height}));b.push(h()({},rt,{height:rt.height,scrollTop:_,scrollBottom:_+=rt.height}));b.push(h()({},at,{scrollTop:_,scrollBottom:_+=at.height}))}b.push(h()({},He,{scrollTop:_,scrollBottom:_+=He.height}));b.push(h()({},He,{scrollTop:_,scrollBottom:_+=He.height}));return{rows:b,rowsMap:Object(f["keyBy"])(b,"id"),rowIds:Object(f["map"])(b,"id")}});var it=nt;var st=r(3933);var ot=new ce["b"]("channel_sidebar");var lt=function e(t,r){var a=Object(O["getAppSuggestionPrompt"])(t,r);return Object(st["c"])(a)};var ct=function e(t,r){var a=Object(O["getAppSuggestionPrompt"])(t,r);return Object(st["a"])(a)};var ut=function e(t,r){var a=Object(O["getAppSuggestionPrompt"])(t,r);var n=Object(st["b"])(a);var i=Object(st["d"])(a);var s=lt(t,r);var o=Object(N["d"])(t);if(!n||!i)return{};var l="";"ocal"!==r||s?"dropbox"!==r||s||(l="https://www.dropbox.com/landing/dropbox_slack"):l=Object(P["getTeamUrl"])(o,"/interop/ocalapp/install");return{appId:n,isInstall:s,href:l||Object(P["getTeamUrl"])(o,"/apps/"+n),text:s?ot.t("Install {name}",{name:i}):ot.t("Connect {name}",{name:i}),label:ot.t("Dismiss {name} suggestion",{name:i}),dismissKey:s?r+"_install_prompt_dismissed":r+"_connect_prompt_dismissed",clogUiElement:s?"app_install_prompt":"app_connect_prompt"}};var dt=function e(t){return Object(O["getEnabledAppSuggestionPromptsKeyList"])(t).length};var pt=r(42);function vt(e){var t=Object(N["d"])(e);var r=Object(A["b"])(e);var a=Object(le["getMemberEmail"])(r);var n=Object(R["isFeatureEnabled"])(e,"feature_upgrade_slack_translations");var i=Object(pt["isAppStoreBuild"])();var s=Object(P["isOnFreePlan"])(t);var o=Object(le["isAdmin"])(r);var l=!/@(gmail|yahoo|aol)\.com$/.exec(a)&&!/\.edu$/.exec(a);var c=n&&!i&&s&&l&&o;if(!c)return false;var u="treatment"===Object(d["getGroupForUser"])(e,"lc_sidebar_upgrade_cta");var p="treatment"===Object(d["getGroupForUser"])(e,"lc_sidebar_upgrade_cta_existing_teams");return u||p}var mt=r(6);var ht=r.n(mt);var ft=r(7);var bt=r.n(ft);var gt=r(8);var _t=r.n(gt);var yt=r(9);var Ot=r.n(yt);var kt=r(0);var Et=r(16);var jt=r.n(Et);var Ct=r(49);var St=r(208);var wt=r(1449);var It=r(376);var Tt=r(407);var At=r(168);var Nt=r(431);var Pt=r(186);var Rt=r(1696);var Mt=r(1068);var xt=r(2264);var Dt=r(30);var Ft=r(81);var Lt=r(22);var Bt=r(28);var Ut=r(3052);var qt=r(850);var Gt=r(1720);var Ht=new ce["b"]("channel_sidebar");var Wt={coachmarkState:kt["b"].oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),setJumperCoachmarkState:kt["b"].func,setUserPrefByApi:kt["b"].func,maybeShowQuickSwitcher:kt["b"].func,clogger:kt["b"].object.isRequired,openFromQuickSwitcherCmd:kt["b"].func,historyNavigationEnabled:kt["b"].bool,useHistoryNavigation:kt["b"].bool};var Vt={coachmarkState:void 0,setJumperCoachmarkState:f["noop"],setUserPrefByApi:f["noop"],maybeShowQuickSwitcher:f["noop"],openFromQuickSwitcherCmd:f["noop"],historyNavigationEnabled:false,useHistoryNavigation:false};var Kt=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.hideCoachmark=r.hideCoachmark.bind(r);r.hideButton=r.hideButton.bind(r);r.onShowContinue=r.onShowContinue.bind(r);r.onShowSkip=r.onShowSkip.bind(r);r.onHideContinue=r.onHideContinue.bind(r);r.onHideSkip=r.onHideSkip.bind(r);r.onButtonClick=r.onButtonClick.bind(r);return r}bt()(t,[{key:"onShowContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideCoachmark()}},{key:"onShowSkip",value:function e(t,r){t.stopPropagation();switch(r){case"SKIP":this.clog("SKIP");return this.hideButton();case"CLOSE":this.clog("CLOSE");return this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideButton()}},{key:"onHideSkip",value:function e(t,r){t.stopPropagation();switch(r){case"SKIP":this.clog("SKIP");return this.hideCoachmark();case"CLOSE":this.clog("CLOSE");return this.hideButton();default:return null}}},{key:"onButtonClick",value:function e(){this.props.openFromQuickSwitcherCmd({key:"button"})}},{key:"clog",value:function e(t){var r=this.props,a=r.clogger,n=r.coachmarkState;var i={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[n];a.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:t,step:i}}})}},{key:"hideCoachmark",value:function e(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function e(){this.hideCoachmark();this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:false});this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function e(t){var r={SHOW:{title:Ht.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,r=e.key;if("sparkles"===t)return n.a.createElement(Ft["b"],{key:r,text:":sparkles:",emojiSize:Ft["a"].MEDIUM});return null}),content:Ht.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(Dt["isMac"])()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:Ht.t("Hide the sidebar button"),continueButtonText:Ht.t("OK")},HIDE:{title:Ht.t("You\u2019re a pro at keyboard shortcuts"),content:Ht.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(Dt["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:Ht.t("No thanks, I like the button"),continueButtonText:Ht.t("Hide Button")}};var a={skipLinkPre:"",position:"right-bottom",shouldShow:true,hasCloseButton:false,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":this.clog("IMPRESSION");return n.a.createElement(Ut["a"],h()({},a,r.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),t);case"HIDE_BUTTON":this.clog("IMPRESSION");return n.a.createElement(Ut["a"],h()({},a,r.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),t);default:return t}}},{key:"render",value:function e(){var t=this.props,r=t.historyNavigationEnabled,a=t.useHistoryNavigation;var i=n.a.createElement(Bt["c"],{type:"button",className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":Ht.t("Open the Quick Switcher to jump to a conversation.")},n.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},n.a.createElement(Lt["a"],{type:"filter",inherit:true,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),Ht.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),!a&&n.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},Object(Dt["isMac"])()?"\u2318K":"Ctrl+K"));return r?i:this.maybeRenderCoachmark(i)}}]);return t}(a["Component"]);Kt.displayName="QuickswitcherButton";Kt.defaultProps=Vt;var zt=function e(t){return{coachmarkState:Object(O["getJumperCoachmarkState"])(t),clogger:Object(L["a"])({state:t}),historyNavigationEnabled:Object(J["a"])(t),useHistoryNavigation:Object(J["b"])(t)}};var Qt=function e(t){return{setJumperCoachmarkState:function e(){return t(O["setJumperCoachmarkState"].apply(void 0,arguments))},setUserPrefByApi:function e(){return t(j["d"].apply(void 0,arguments))},maybeShowQuickSwitcher:function e(){return t(xt["a"].apply(void 0,arguments))},openFromQuickSwitcherCmd:function e(){return t(qt["h"].apply(void 0,arguments))}}};var Yt=Object(i["connect"])(zt,Qt)(Kt);var Jt=r(4453);var Xt=r(4389);var Zt=r(854);var $t={iconType:kt["b"].string.isRequired,onClick:kt["b"].func.isRequired,isDisabled:kt["b"].bool.isRequired,tooltip:kt["b"].string,ariaLabel:kt["b"].string,className:kt["b"].string};var er={tooltip:void 0,ariaLabel:void 0,className:void 0};var tr=function e(t){var r=t.iconType,a=t.onClick,i=t.isDisabled,s=t.tooltip,o=t.ariaLabel,l=t.className;var c=jt()("p-channel_sidebar__history_button",l,{"p-channel_sidebar__history_button--disabled":i});return n.a.createElement(Zt["c"],{tip:s,position:"bottom",delay:Zt["a"]},n.a.createElement(Bt["c"],{className:c,onClick:a,"aria-label":o,"aria-disabled":i,tabIndex:i?-1:void 0},n.a.createElement(Lt["b"],{type:r})))};tr.displayName="HistoryButton";tr.defaultProps=er;var rr=tr;var ar=new ce["b"]("navigation");var nr={primaryView:kt["b"].string.isRequired,triggerNavigateBack:kt["b"].func.isRequired,triggerNavigateForward:kt["b"].func.isRequired,historyNavigationEnabled:kt["b"].bool};var ir={historyNavigationEnabled:false};var sr=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBackClick=r.onBackClick.bind(r);r.onForwardClick=r.onForwardClick.bind(r);return r}bt()(t,[{key:"componentDidMount",value:function e(){Object(Xt["c"])()}},{key:"componentDidUpdate",value:function e(t){if(this.props.primaryView===t.primaryView)return;Object(Xt["c"])()}},{key:"onBackClick",value:function e(){this.props.triggerNavigateBack({fromKeyboardShortcut:false})}},{key:"onForwardClick",value:function e(){this.props.triggerNavigateForward({fromKeyboardShortcut:false})}},{key:"render",value:function e(){var t=this.props.historyNavigationEnabled;if(!t)return null;return n.a.createElement(a["Fragment"],null,n.a.createElement(rr,{onClick:this.onBackClick,tooltip:ar.t("Previous conversation"),ariaLabel:ar.t("Move to the previous conversation"),className:"p-channel_sidebar__history_button-left",iconType:"chevron-medium-left",isDisabled:Object(Xt["a"])()}),n.a.createElement(rr,{onClick:this.onForwardClick,tooltip:ar.t("Next conversation"),ariaLabel:ar.t("Move to the next conversation"),className:"p-channel_sidebar__history_button-right",iconType:"chevron-medium-right",isDisabled:Object(Xt["b"])()}))}}]);return t}(a["Component"]);sr.displayName="History";sr.defaultProps=ir;var or=function e(t){return{historyNavigationEnabled:Object(J["a"])(t),primaryView:Object(x["a"])(t)}};var lr=function e(t){return{triggerNavigateForward:function e(r){return t(Object(Jt["b"])(r))},triggerNavigateBack:function e(r){return t(Object(Jt["a"])(r))}}};var cr=Object(i["connect"])(or,lr,null,{pure:false})(sr);var ur={useHistoryNavigation:kt["b"].bool};var dr={useHistoryNavigation:false};var pr=function e(t){return n.a.createElement("div",{className:"p-channel_sidebar__navigation_bar"},n.a.createElement(Yt,null),t.useHistoryNavigation&&n.a.createElement(cr,null))};pr.displayName="NavigationBar";pr.defaultProps=dr;var vr=pr;var mr=r(1757);var hr=r(2414);var fr=r(706);var br=r(782);var gr=r(1574);var _r=r(586);var yr=r(4358);var Or=r(58);var kr=r.n(Or);var Er=r(317);var jr=r(373);var Cr=r(292);var Sr=r(50);var wr=r(2225);var Ir=r(391);var Tr={children:kt["b"].node.isRequired,getTemplate:kt["b"].func.isRequired,overrideDefaultMenu:kt["b"].bool};var Ar={overrideDefaultMenu:false};var Nr=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onDesktopContextMenu=r.onDesktopContextMenu.bind(r);return r}bt()(t,[{key:"onDesktopContextMenu",value:function e(){var t=this.props,r=t.getTemplate,a=t.overrideDefaultMenu;var n=r().map(function(e){return h()({},e,{id:Object(Ir["a"])()})});Object(pt["showContextMenu"])(n,a)}},{key:"render",value:function e(){var t=this;if(!Object(G["a"])()){Object(g["b"])().error("Context menus are only supported in Sonic");return this.props.children}if(pt["isDesktop"]){var r=n.a.Children.map(this.props.children,function(e){return n.a.cloneElement(e,{onContextMenu:t.onDesktopContextMenu})});return r[0]}return this.props.children}}]);return t}(a["PureComponent"]);Nr.displayName="ContextMenuTrigger";var Pr=Nr;Nr.defaultProps=Ar;var Rr=r(21);var Mr={};function xr(e,t){var r=Mr[e.teamId];if(!r){r={};Mr[e.teamId]=r}return function(){var a=t({eventId:arguments.length<=0?void 0:arguments[0],payload:arguments.length<=1?void 0:arguments[1]});if(!r[a]){r[a]=true;e.track.apply(e,arguments)}}}var Dr=Object(f["memoize"])(xr);var Fr={clearCache:function e(){Object.keys(Mr).forEach(function(e){Mr[e]={}})}};var Lr=new ce["b"]("channel_sidebar");var Br={id:kt["b"].string.isRequired,appId:kt["b"].string.isRequired,startImByMemberId:kt["b"].func,name:kt["b"].string.isRequired,teamDomain:kt["b"].string.isRequired,dismissInstalledAppDmSuggestion:kt["b"].func,featureShowInstalledAppDmSuggestions:kt["b"].bool,featureSidebarContextMenu:kt["b"].bool.isRequired,clogger:kt["b"].object};var Ur={selectItem:f["noop"],dismissInstalledAppDmSuggestion:f["noop"],featureShowInstalledAppDmSuggestions:false,clogger:{track:f["noop"]}};var qr=function e(t){var r=t.eventId,a=t.payload;return r+"-"+a.contexts.ui_context.action+"-"+a.contexts.core.app_id};var Gr=function e(t){var r=t.action,a=t.appId;return{contexts:{ui_context:{action:r},core:{app_id:a}}}};function Hr(e){var t=e.id,r=e.name,i=e.appId,s=e.teamDomain,o=e.startImByMemberId,l=e.dismissInstalledAppDmSuggestion,c=e.featureShowInstalledAppDmSuggestions,u=e.featureSidebarContextMenu,d=e.clogger;Object(a["useEffect"])(function(){var e=Dr(d,qr);e(Rr["l"].APP_SIDEBAR,Gr({action:Rr["w"].IMPRESSION,appId:i}))});var p=Object(a["useState"])(false),v=kr()(p,2),m=v[0],h=v[1];var f=Object(a["useCallback"])(function(e){e.preventDefault();d.track(Rr["l"].APP_SIDEBAR,Gr({action:Rr["w"].CLICK,appId:i}));o({memberId:t})},[d,i,o,t]);var b=Object(a["useCallback"])(function(){return l({memberId:t,appId:i})},[i,l,t]);var g=Object(a["useCallback"])(function(){return c?[{label:Lr.t("Dismiss app"),click:b}]:[]},[c,b]);var _=Object(a["useCallback"])(function(e){e.target.offsetWidth<e.target.scrollWidth&&h(true)},[h]);if(!c)return null;var y=n.a.createElement(Bt["c"],{onClick:b,className:"p-channel_sidebar__close","aria-label":Lr.t("Dismiss app")},n.a.createElement(Lt["a"],{type:"times-circle-medium"}));var O=n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Er["a"],{href:Object(S["constructAbsoluteChannelPermalink"])({channelId:t,teamDomain:s}),className:"p-channel_sidebar__channel p-channel_sidebar__channel--im p-channel_sidebar__channel--suggested",onClick:f,"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-id":t,draggable:false,"data-drag-type":"channel","data-drag-id":t},n.a.createElement(jr["a"],{memberId:t,enablePresenceSubscriptions:false,inline:false}),n.a.createElement(Sr["c"],{delay:Sr["a"],position:"top-left",tip:r,tipClassName:jt()({hidden:!m})},n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name",onMouseEnter:_},r))),y);if(u)return n.a.createElement(Pr,{getTemplate:g},O);return O}Hr.defaultProps=Ur;var Wr=function e(t,r){var a=r.id;var n=false;var i=Object(A["d"])(t,a,n);return{featureShowInstalledAppDmSuggestions:Object(R["isFeatureEnabled"])(t,"feature_show_installed_app_dm_suggestions"),featureSidebarContextMenu:Object(R["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),teamDomain:Object(N["d"])(t).domain,name:Object(le["getPrefCompliantMemberNameById"])(t,a),appId:Object(le["getAppIdFromMember"])(i),clogger:Object(L["a"])({state:t})}};var Vr=function e(t){return Object(Cr["bindActionCreators"])({dismissInstalledAppDmSuggestion:wr["a"],startImByMemberId:l["startImByMemberId"]},t)};var Kr=Object(i["connect"])(Wr,Vr)(Hr);var zr=r(276);var Qr=Object(q["b"])("Copy channel name",function(e,t,r){var a=t();var n=Object(C["d"])(a,r);var i=Object(S["getDisplayNameForChannel"])(a,n);Object(zr["writeText"])(i)});Qr.propTypes=kt["b"].string.isRequired;var Yr=Qr;var Jr=r(120);var Xr=Object(q["b"])("Dismiss suggested channel from channels list",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;e(Object(Jr["d"])({ids:[a]}));var n=Object(E["e"])(t()).split(",");var i=n.indexOf(a);if(-1!==i){n.splice(i,1);e(Object(j["d"])({pref:"newxp_suggested_channels",value:n.join(",")}))}});Xr.propTypes={channelId:kt["b"].string.isRequired};var Zr=Xr;var $r=r(1359);var ea=r(865);var ta=Object(q["b"])("Updates the muted_channels pref from the current list of muted channels",function(e,t){var r=t();var a=Object.keys(Object(w["getMutedChannels"])(r)).join(",");return e(Object(j["d"])({pref:"muted_channels",value:a,reason:"update-muted-channels"}))});ta.propTypes=null;var ra=Object(q["b"])("Mute a channel given a channelId",function(e,t,r){var a=t();var n=Object(g["a"])({state:a,label:"CHANNEL-MUTE"});var i=Object(C["d"])(a,r);if(!i)return Promise.reject(new Error("Channel does not exist"));if(Object(S["isIm"])(i))return Promise.reject(new Error("Channel is an IM"));if(Object(w["isChannelMutedById"])(a,r))return Promise.reject(new Error("Channel is already muted"));n.info("Muting channel "+r);e(Object(w["setMutedChannel"])({id:r,muted:true}));return e(ta()).catch(function(){n.error("CHANNEL-MUTE","Muting channel "+r+" failed, could not set pref");e(Object(w["setMutedChannel"])({id:r,muted:false}))})});ra.propTypes=kt["b"].string.isRequired;var aa=Object(q["b"])("Unmute a channel given a channelId",function(e,t,r){var a=t();var n=Object(g["a"])({state:a,label:"CHANNEL-MUTE"});var i=Object(C["d"])(a,r);if(!i)return Promise.reject(new Error("Channel does not exist"));if(Object(S["isIm"])(i))return Promise.reject(new Error("Channel is an IM"));if(!Object(w["isChannelMutedById"])(a,r))return Promise.reject(new Error("Channel is already unmuted"));n.info("Unmuting channel "+r);e(Object(w["setMutedChannel"])({id:r,muted:false}));return e(ta()).catch(function(){n.error("CHANNEL-MUTE","Unmuting channel "+r+" failed, could not set pref");e(Object(w["setMutedChannel"])({id:r,muted:true}))})});aa.propTypes=kt["b"].string.isRequired;var na=r(452);var ia=r(309);var sa=r(2288);var oa=r(442);var la=r(451);var ca=r(1312);var ua=r(383);var da=r(1348);var pa=r(861);var va="CHANNEL-SIDEBAR";var ma={LOG_LABEL:va};var ha=new ce["b"]("channel_sidebar");var fa={isChannel:kt["b"].bool,isPendingShared:kt["b"].bool,isShared:kt["b"].bool,isOrgShared:kt["b"].bool,type:kt["b"].oneOf(["channel","private","im","mpim"]),isSlackbot:kt["b"].bool,isYou:kt["b"].bool,isMuted:kt["b"].bool,isSuggested:kt["b"].bool,hasUnreads:kt["b"].bool,hasDraft:kt["b"].bool,isArchived:kt["b"].bool,isFrozen:kt["b"].bool,sharedTeamIds:kt["b"].arrayOf(kt["b"].string),displayName:kt["b"].string,teamDomain:kt["b"].string.isRequired,isSelected:kt["b"].bool,unreadCount:kt["b"].number,badgeCount:kt["b"].number,userCount:kt["b"].number,userId:kt["b"].string,userActive:kt["b"].bool,id:kt["b"].string.isRequired,priority:kt["b"].number,selectItem:kt["b"].func,closeIM:kt["b"].func,dismissSuggestedChannel:kt["b"].func,isTyping:kt["b"].bool,isStarred:kt["b"].bool,members:kt["b"].arrayOf(kt["b"].string),memberPresences:kt["b"].arrayOf(kt["b"].string),onContextMenu:kt["b"].func,featureSidebarContextMenu:kt["b"].bool.isRequired,index:kt["b"].number.isRequired,sidebarFoldersIsEnabled:kt["b"].bool,onDragStart:kt["b"].func,onDragEnd:kt["b"].func,onDrop:kt["b"].func,onDragOver:kt["b"].func,featureSonicPresenceManager:kt["b"].bool,featureCopyChannelName:kt["b"].bool,clogger:kt["b"].object.isRequired,canPostInChannel:kt["b"].bool,featureAnnounceOnly:kt["b"].bool,maybeLeaveChannel:kt["b"].func,muteChannelById:kt["b"].func,unmuteChannelById:kt["b"].func,updateStar:kt["b"].func,copyChannelNameById:kt["b"].func,onItemSelected:kt["b"].func};var ba={isChannel:true,isSelected:false,isPendingShared:false,isShared:false,isOrgShared:false,type:"channel",isSlackbot:false,isYou:false,isMuted:false,isSuggested:false,hasUnreads:false,hasDraft:false,isArchived:false,isFrozen:false,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:true,priority:null,selectItem:b.a.noop,closeIM:b.a.noop,dismissSuggestedChannel:b.a.noop,isTyping:false,isStarred:false,members:null,memberPresences:null,onContextMenu:b.a.noop,sidebarFoldersIsEnabled:false,onDragStart:b.a.noop,onDragEnd:b.a.noop,onDrop:b.a.noop,onDragOver:b.a.noop,featureSonicPresenceManager:false,featureCopyChannelName:false,clogger:{},canPostInChannel:true,featureAnnounceOnly:false,maybeLeaveChannel:b.a.noop,muteChannelById:b.a.noop,unmuteChannelById:b.a.noop,updateStar:b.a.noop,copyChannelNameById:b.a.noop,onItemSelected:b.a.noop};var ga=Object(g["b"])();var _a=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.closeIM=r.closeIM.bind(r);r.closeSuggestedChannel=r.closeSuggestedChannel.bind(r);r.handleMouseEnter=r.handleMouseEnter.bind(r);r.getContextMenuTemplate=r.getContextMenuTemplate.bind(r);r.linkRef=n.a.createRef();r.state={isTruncated:false};return r}bt()(t,[{key:"componentDidMount",value:function e(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function e(t){!t.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"handleMouseEnter",value:function e(t){t.target.offsetWidth<t.target.scrollWidth&&this.setState(function(){return{isTruncated:true}})}},{key:"onClick",value:function e(t){t.preventDefault();ga.action(va,"Selected "+this.props.id);this.props.selectItem(this.props.id);this.clogClick()}},{key:"closeIM",value:function e(t){t.preventDefault();t.stopPropagation();ga.action(va,"Closed "+this.props.id);this.props.closeIM({channelId:this.props.id})}},{key:"closeSuggestedChannel",value:function e(t){var r=this.props,a=r.id,n=r.index,i=r.isSelected,s=r.clogger,o=r.dismissSuggestedChannel;t.preventDefault();t.stopPropagation();ga.action(va,"Closed suggested channel "+a);o({channelId:a});s.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:a[0],item_id:a,index:n,is_selected:i})}},{key:"clogClick",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isMuted,i=t.isSuggested,s=t.isStarred,o=t.hasUnreads,l=t.isArchived,c=t.isFrozen,u=t.isSelected,d=t.badgeCount,p=t.clogger;p.track("SIDEBAR_ITEM_CLICK",{item_type:r[0],item_id:r,index:a,is_muted:n,is_suggested:i,is_starred:s,has_unreads:o,is_archived:l,is_frozen:c,is_selected:u,badge_count:d})}},{key:"shouldShowPresence",value:function e(){var t=this.props,r=t.type,a=t.isSlackbot,n=t.isSelected,i=t.hasDraft,s=t.isTyping,o=t.isArchived,l=t.isFrozen;if("im"!==r)return false;if(a)return false;if(i&&!n)return false;if(s&&!n)return false;if(o&&!l)return false;return true}},{key:"shouldShowClose",value:function e(){var t=this.props,r=t.type,a=t.hasUnreads,n=t.isSuggested,i=t.hasDraft;if("im"!==r&&"mpim"!==r&&!n)return false;if(a)return false;if(i)return false;return true}},{key:"shouldShowDraftIcon",value:function e(){var t=this.props,r=t.hasDraft,a=t.isSelected,n=t.canPostInChannel;return r&&n&&!a}},{key:"shouldShowExternalSharedIcon",value:function e(){var t=this.props,r=t.isShared,a=t.type;return r&&!("im"===a||"mpim"===a)}},{key:"shouldShowOrgSharedIcon",value:function e(){var t=this.props,r=t.isOrgShared,a=t.type;return r&&!("im"===a||"mpim"===a)}},{key:"buildName",value:function e(){var t=this.props,r=t.displayName,a=t.type;if("im"===a)return this.buildImName();if("mpim"===a)return this.buildMpimName();return this.renderName(r)}},{key:"buildImName",value:function e(){var t=this.props,r=t.userId,a=t.isYou;return this.renderName(n.a.createElement(n.a.Fragment,null,n.a.createElement(la["b"],{memberId:r}),n.a.createElement(ua["a"],{id:r}),a&&n.a.createElement("span",{className:"p-channel_sidebar__you_label"},ha.t("(you)"))))}},{key:"buildMpimName",value:function e(){var t=this.props,r=t.type,a=t.members,i=t.memberPresences;if("mpim"!==r||!a||!i)return null;var s=b.a.flatMap(a,function(e,t){return[n.a.createElement(ua["a"],{id:e,key:e}),t<a.length-1?", ":null]});return this.renderName(s)}},{key:"buildAriaLabel",value:function e(){var t=this.props,r=t.type,a=t.displayName,n=t.isShared,i=t.isOrgShared,s=t.isYou,o=t.isMuted,l=t.isSuggested,c=t.hasUnreads,u=t.hasDraft,d=t.isArchived,p=t.unreadCount,v=t.badgeCount,m=t.isSelected,h=t.userActive,f=t.isTyping,b=t.canPostInChannel,g=t.featureAnnounceOnly;return Object(da["a"])({type:r,displayName:a,isShared:n,isOrgShared:i,isYou:s,isMuted:o,isSuggested:l,hasUnreads:c,hasDraft:u,isArchived:d,unreadCount:p,badgeCount:v,isSelected:m,userActive:h,isTyping:f,canPost:b,featureAnnounceOnly:g})}},{key:"getContextMenuTemplate",value:function e(){var t=new ce["b"]("menu");var r=this.props,a=r.id,n=r.displayName,i=r.isChannel,s=r.isStarred,o=r.isMuted,l=r.canMute,c=r.canLeave,u=r.maybeLeaveChannel,d=r.updateStar,p=r.muteChannelById,v=r.unmuteChannelById,m=r.copyChannelNameById,h=r.featureCopyChannelName;var f=void 0;var b=void 0;var g=void 0;var _=void 0;var y=void 0;var O=void 0;if(i){f=t.t("Star Channel");b=t.t("Unstar Channel");g=t.t("Mute {channel}",{channel:"#"+n});_=t.t("Unmute {channel}",{channel:"#"+n});y=t.t("Leave {channel}",{channel:"#"+n});h&&(O=t.t("Copy Channel Name"))}else{f=t.t("Star Conversation");b=t.t("Unstar Conversation");g=t.t("Mute Conversation");_=t.t("Unmute Conversation");y=t.t("Leave Conversation")}var k=[{label:s?b:f,click:function e(){return d(!s,{channel:a})}}];c&&k.push({label:y,click:function e(){return u({channelId:a})}});l&&k.push({label:o?_:g,click:function e(){return o?v(a):p(a)}});O&&k.push({label:O,click:function e(){return m(a)}});return k}},{key:"renderName",value:function e(t){var r=this.props,a=r.type,i=r.userActive;var s=this.state.isTruncated;return n.a.createElement(Sr["c"],{delay:Sr["a"],position:"top-left",tip:t,tipClassName:jt()({hidden:!s})},n.a.createElement("span",{dir:"auto",className:jt()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":"im"===a&&!i}),"data-qa":"channel_sidebar_name",onMouseEnter:this.handleMouseEnter},t))}},{key:"renderPresence",value:function e(t){return n.a.createElement(jr["a"],{memberId:t,enablePresenceSubscriptions:this.props.featureSonicPresenceManager||Object(Ct["a"])(),inline:false})}},{key:"render",value:function e(){var t=this.props,r=t.id,a=t.type,i=t.isChannel,s=t.isPendingShared,o=t.isSlackbot,l=t.isYou,c=t.isMuted,u=t.isSuggested,d=t.hasUnreads,p=t.isArchived,v=t.isFrozen,m=t.badgeCount,f=t.isSelected,b=t.userCount,g=t.displayName,_=t.userId,y=t.priority,O=t.isTyping,k=t.isStarred,E=t.sharedTeamIds,j=t.onContextMenu,C=t.teamDomain,w=t.featureSidebarContextMenu;var I=jt()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--private":"private"===a,"p-channel_sidebar__channel--shared":this.shouldShowExternalSharedIcon(),"p-channel_sidebar__channel--org-shared":this.shouldShowOrgSharedIcon(),"p-channel_sidebar__channel--mpim":"mpim"===a,"p-channel_sidebar__channel--im":"im"===a,"p-channel_sidebar__channel--im-slackbot":o,"p-channel_sidebar__channel--im-you":l,"p-channel_sidebar__channel--selected":f,"p-channel_sidebar__channel--muted":c,"p-channel_sidebar__channel--suggested":u,"p-channel_sidebar__channel--unread":d&&!p,"p-channel_sidebar__channel--draft":this.shouldShowDraftIcon(),"p-channel_sidebar__channel--archived":p&&(!v||i),"p-channel_sidebar__channel--typing":O&&!f});var T=n.a.createElement(pa["b"],{count:m,className:"p-channel_sidebar__badge"});var A={"data-user-count":b};var N=this.shouldShowPresence()&&this.renderPresence(_);var P=this.buildName();var R=this.shouldShowExternalSharedIcon()&&n.a.createElement(ca["a"],{tooltip:true,sharedTeamIds:E,className:"p-channel_sidebar__icon",pending:s});var M=n.a.createElement(Er["a"],h()({href:Object(S["constructAbsoluteChannelPermalink"])({channelId:r,teamDomain:C}),ref:this.linkRef,className:I,onClick:this.onClick,onContextMenu:j},A,{"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-is-selected":f,"data-qa-channel-sidebar-channel-id":r,"data-qa-channel-sidebar-channel-type":a,"data-qa-channel-sidebar-is-starred":k,"data-qa-channel-sidebar-is-you":l,"data-qa-channel-sidebar-priority":y,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":r,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}),N,P,T,R);if(this.shouldShowClose()){var x=ha.t("Close Direct Message with {name}",{name:g});u&&(x=ha.t("Dismiss suggested channel"));var D=n.a.createElement(Bt["c"],{onClick:u?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","aria-label":x},n.a.createElement(Lt["a"],{type:"times-circle-medium"}));M=n.a.createElement("div",{className:"p-channel_sidebar__close_container"},M,D)}if(w)return n.a.createElement(Pr,{getTemplate:this.getContextMenuTemplate},M);return M}}]);return t}(oa["a"]);_a.displayName="Channel";_a.propTypes=fa;_a.defaultProps=ba;var ya=_a;var Oa={closeIM:l["closeChannelApi"],dismissSuggestedChannel:Zr,maybeLeaveChannel:$r["a"],muteChannelById:ra,unmuteChannelById:aa,updateStar:ea["a"],copyChannelNameById:function e(){return Yr.apply(void 0,arguments)}};var ka=function e(t,r){var a=r.id;var n=Object(C["d"])(t,a);if(!n)return{id:a,featureSidebarContextMenu:Object(R["isFeatureEnabled"])(t,"feature_sidebar_context_menu")};var i=Object(S["isMpim"])(n)?Math.min(Math.max(b.a.get(n,"members.length",1)-1,2),9):0;var s=Object(S["getChannelType"])(n);var o="im"===s&&Object(E["g"])(t,"show_typing")&&Object(na["getTyperIdsInChannel"])(t,a).length>0;var l="im"!==s||"active"===Object(ia["getPresenceByMemberId"])(t,Object(S["getMemberIdFromIm"])(n));var c=Object(R["getCurrentUserId"])(t);var u="mpim"===s&&Object(S["getMemberIdsFromMpim"])(n)&&b.a.filter(Object(S["getMemberIdsFromMpim"])(n),function(e){return e!==c});var d="mpim"===s&&u&&b.a.map(u,function(e){return Object(ia["getPresenceByMemberId"])(t,e)});var p=!Object(S["isMpim"])(n)&&!Object(S["isIm"])(n)||Object(S["isPrivateChannel"])(n);var v=!Object(S["isMpim"])(n)&&!Object(S["isIm"])(n);var m=Object(S["isMemberOfChannel"])(n)||Object(S["isPrivateChannel"])(n);var h=Object(S["getDisplayNameForChannel"])(t,n,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var f=Object(N["d"])(t).domain;var g=Object(S["getPendingAndConnectedTeamIds"])(t,n);return{isSelected:Object(x["a"])(t)===a,isPendingShared:Object(S["isPendingExternallySharedChannel"])(n),isShared:Object(S["isExternallySharedChannel"])(n),isOrgShared:Object(S["isOrgShared"])(n),isSlackbot:Object(S["isSlackbot"])(n),isYou:Object(S["isYou"])(c,n),isMuted:Object(w["isChannelMutedById"])(t,a),isSuggested:!Object(S["isMemberOfChannel"])(n)&&Object(S["isSuggestedChannel"])(t,n),hasUnreads:!!Object(S["getUnreadCount"])(n),hasDraft:Object(S["getHasDraft"])(t,a),isArchived:Object(S["isArchived"])(n),isFrozen:Object(R["isFeatureEnabled"])(t,"feature_esc_disconnect_v2_client")&&Object(S["isFrozen"])(n),sharedTeamIds:g.length?g:sa["a"],displayName:h,unreadCount:Object(S["getUnreadCount"])(n),badgeCount:Object(C["c"])(t,n),userCount:i,userId:Object(S["getMemberIdFromIm"])(n)||n.user_id,userActive:l,type:s,id:a,isTyping:o,isStarred:Object(S["isStarred"])(n),canPostInChannel:Object(oe["s"])(t,n.id),featureAnnounceOnly:Object(R["isFeatureEnabled"])(t,"feature_announce_only"),members:u||null,memberPresences:d||null,priority:n.priority,isPrivateChannel:Object(S["isPrivateChannel"])(n),isMemberOfChannel:S["isMemberOfChannel"],canMute:p,canLeave:m,isChannel:v,teamDomain:f,featureSidebarContextMenu:Object(R["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),featureCopyChannelName:Object(R["isFeatureEnabled"])(t,"feature_copy_channel_name"),featureSonicPresenceManager:Object(R["isFeatureEnabled"])(t,"feature_sonic_presence_manager"),clogger:Object(L["a"])({state:t})}};var Ea=Object(i["connect"])(ka,Oa,null,{withRef:true})(ya);var ja=r(1543);var Ca=new ce["b"]("channel_sidebar");var Sa={id:kt["b"].string.isRequired,label:kt["b"].string.isRequired,icon:kt["b"].string,labelUnread:kt["b"].string,hasUnreads:kt["b"].bool,badgeCount:kt["b"].number,isSelected:kt["b"].bool,selectItem:kt["b"].func,isDim:kt["b"].bool,qaLabel:kt["b"].string,disabledInSonic:kt["b"].bool,onItemSelected:kt["b"].func,onClick:kt["b"].func};var wa={isSelected:false,labelUnread:"",hasUnreads:false,badgeCount:0,icon:void 0,selectItem:b.a.noop,isDim:false,qaLabel:"",disabledInSonic:false,onItemSelected:b.a.noop,onClick:b.a.noop};var Ia=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.linkRef=n.a.createRef();r.state={};return r}bt()(t,[{key:"componentDidMount",value:function e(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function e(t){!t.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"onClick",value:function e(t){Object(g["b"])().action(va,"Selected "+this.props.id);this.props.selectItem(this.props.id,t);"function"===typeof this.props.onClick&&this.props.onClick()}},{key:"render",value:function e(){var t=this.props,r=t.id,a=t.label,i=t.labelUnread,s=t.icon,o=t.hasUnreads,l=t.badgeCount,c=t.isSelected,u=t.isDim,d=t.qaLabel,p=t.disabledInSonic;var v=jt()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===r,"p-channel_sidebar__link--all-threads":"Vall_threads"===r,"p-channel_sidebar__link--search":"Vsearch"===r,"p-channel_sidebar__link--invites":"Vinvites"===r,"p-channel_sidebar__link--add-channel":"Vadd_channel"===r,"p-channel_sidebar__link--selected":c,"p-channel_sidebar__link--unread":o,"p-channel_sidebar__link--dim":u});var m=o&&i?i:a;var h=n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"+d},m);var f=b.a.filter([c?Ca.t("selected"):null,o&&!l?Ca.t("has unreads"):null,l?Ca.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:l}):null],b.a.identity);var g=m+(f.length?" ("+f.join(", ")+")":"");var _=n.a.createElement(pa["b"],{count:l,className:"p-channel_sidebar__badge"});var y=s&&n.a.createElement(Lt["b"],{type:s,size:"inherit",className:"p-channel_sidebar__link__icon"});var O=n.a.createElement(Bt["c"],{className:v,onClick:this.onClick,"aria-label":g,"data-sidebar-link-id":r,"data-qa-channel-sidebar-link-id":r,ref:this.linkRef},y,h,_);if(p)return n.a.createElement(ja["a"],null,O);return O}}]);return t}(a["PureComponent"]);Ia.displayName="Link";Ia.defaultProps=wa;var Ta=Ia;var Aa=new ce["b"]("channel_sidebar");var Na="Vall_unreads";var Pa=function e(t){return{id:Na,label:Aa.t("All Unreads"),hasUnreads:Object(R["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(T["hasUnreadChannels"])(t):Object(I["hasUnreads"])(t),isSelected:Object(x["a"])(t)===Na}};var Ra=Object(i["connect"])(Pa,null,null,{withRef:true})(Ta);var Ma=Ra;var xa=r(150);var Da=r(157);var Fa=new ce["b"]("sonic_pilot");function La(e){var t=e.onCloseComplete,r=e.featureSonicPlaceholderLabels;if(!Object(G["a"])())return null;if(!r)return null;return n.a.createElement(Da["b"],{shouldAutoFade:true,position:"top-right",onCloseComplete:t,icon:"hourglass"},n.a.createElement("div",null,n.a.createElement("strong",null,Fa.t("Coming soon")),n.a.createElement("div",null,Fa.t("This feature has not been implemented yet."))))}La.displayName="SonicPlaceholderToast";La.defaultProps={onCloseComplete:f["noop"],featureSonicPlaceholderLabels:false};var Ba=function e(t){return{featureSonicPlaceholderLabels:Object(R["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};var Ua=Object(i["connect"])(Ba)(La);var qa=new ce["b"]("channel_sidebar");var Ga="Vall_unreads";function Ha(e){return{id:Ga,label:qa.t("All Unreads"),hasUnreads:Object(I["hasUnreads"])(e),isSelected:false}}function Wa(e){return{selectItem:function t(){return e(Object(xa["enqueueToast"])({element:n.a.createElement(Ua,null)}))}}}var Va=Object(i["connect"])(Ha,Wa,null,{withRef:true})(Ta);var Ka=Va;var za=new ce["b"]("channel_sidebar");var Qa="Vall_threads";var Ya=function e(t){return{id:Qa,label:za.t("Threads"),labelUnread:za.t("Threads"),hasUnreads:Object(R["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(T["hasUnreadThreads"])(t):Object(I["hasUnreadThreads"])(t),badgeCount:Object(R["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(T["getThreadsMentionCount"])(t):Object(I["getThreadsMentionCount"])(t),isSelected:Object(x["a"])(t)===Qa}};var Ja=Object(i["connect"])(Ya,null,null,{withRef:true})(Ta);var Xa=Ja;var Za=new ce["b"]("channel_sidebar");var $a="Vsearch";var en=function e(t){var r="";Object(R["isFeatureEnabled"])(t,"feature_primary_search")&&Object(X["a"])(t)&&(r=Za.t("Search Results"));return{id:$a,label:r,isSelected:Object(x["a"])(t)===$a}};var tn=Object(i["connect"])(en)(Ta);var rn=tn;var an=r(550);var nn=r(128);var sn=new ce["b"]("channel_sidebar");var on={label:kt["b"].string.isRequired,isDim:kt["b"].bool,qaLabel:kt["b"].string,clogger:kt["b"].object.isRequired,openChannelBrowser:kt["b"].func.isRequired,featureNewxp2798:kt["b"].bool.isRequired,onClickClose:kt["b"].func};var ln={isDim:false,qaLabel:"",onClickClose:f["noop"]};var cn=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onItemSelect=r.onItemSelect.bind(r);return r}bt()(t,[{key:"onItemSelect",value:function e(){var t=this.props.clogger;t.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}});Object(G["a"])()?this.props.openChannelBrowser():Object(p["b"])()}},{key:"render",value:function e(){var t=this.props,r=t.label,a=t.qaLabel,i=t.isDim,s=t.onClickClose;return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Ta,{key:"Vadd_channel",id:"Vadd_channel",isDim:i,qaLabel:a,label:r,selectItem:this.onItemSelect}),n.a.createElement(nn["a"],{onClick:s,className:"p-channel_sidebar__close","aria-label":this.props.featureNewxp2798?sn.t("Hide Add Channel button"):null},n.a.createElement(Lt["b"],{type:"times-circle-medium"})))}}]);return t}(n.a.Component);cn.displayName="AddChannelLink";var un=function e(t){return{clogger:Object(L["a"])({state:t}),featureNewxp2798:Object(R["isFeatureEnabled"])(t,"feature_newxp_2798")}};var dn={openChannelBrowser:function e(){return an["a"].apply(void 0,arguments)}};cn.defaultProps=ln;var pn=Object(i["connect"])(un,dn)(cn);var vn=r(37);var mn=r.n(vn);var hn=r(4631);var fn={id:kt["b"].string.isRequired,views:kt["b"].shape({label:kt["b"].func.isRequired,sidebar:kt["b"].shape({icon:kt["b"].string.isRequired,isBold:kt["b"].func,badgeCount:kt["b"].func,getCloseLinkLabel:kt["b"].func})}).isRequired,isBold:kt["b"].bool,badgeCount:kt["b"].number,isSelected:kt["b"].bool,isCloseButtonVisible:kt["b"].bool,onClickClose:kt["b"].func,onClick:kt["b"].func,featurePages:kt["b"].bool};var bn={isBold:false,badgeCount:void 0,isSelected:false,featurePages:false,isCloseButtonVisible:false,onClickClose:f["noop"],onClick:f["noop"]};var gn=function e(t){var r=t.id,a=t.views,i=t.isBold,s=t.isCloseButtonVisible,o=t.onClick,l=t.onClickClose,c=t.badgeCount,u=t.featurePages,d=mn()(t,["id","views","isBold","isCloseButtonVisible","onClick","onClickClose","badgeCount","featurePages"]);if(!u)return null;var p=Object(f["isFunction"])(a.label)&&a.label();var v=a.sidebar||{},m=v.icon,b=v.getCloseLinkLabel;var g=n.a.createElement(Ta,h()({},d,{id:r,label:p,icon:m,hasUnreads:i,badgeCount:c,onClick:o}));if(!s)return g;var _=n.a.createElement(nn["a"],{onClick:l,className:"p-channel_sidebar__close","aria-label":Object(f["isFunction"])(b)?b():""},n.a.createElement(Lt["b"],{type:"times-circle-medium"}));return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},g,_)};gn.displayName="PageLink";gn.defaultProps=bn;var _n=function e(t,r){var a=r.id;var n=Object(hn["a"])(a);var i=n.sidebar||{};return{id:a,views:n,isBold:Object(f["isFunction"])(i.isBold)&&i.isBold(t),badgeCount:Object(f["isFunction"])(i.badgeCount)?i.badgeCount(t):void 0,isSelected:Object(x["a"])(t)===a,featurePages:Object(R["isFeatureEnabled"])(t,"feature_pages"),isCloseButtonVisible:Object(f["isFunction"])(i.onClickClose)}};var yn=function e(t,r){var a=r.id;var n=Object(hn["a"])(a);var i=n.sidebar||{};return{onClickClose:Object(f["isFunction"])(i.onClickClose)?function(){i.onClickClose(t)}:null,onClick:Object(f["isFunction"])(i.onClick)?function(){i.onClick(t)}:null}};var On=Object(i["connect"])(_n,yn)(gn);var kn=r(95);var En=new ce["b"]("channel_sidebar");var jn=function e(t){var r=t.selectItem,a=t.dim,i=t.label,s=t.qaLabel,o=t.showClose,l=t.onClickClose,c=t.featureModernizeInvites;var u=i||En.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"});var d=n.a.createElement(Ta,{key:"Vinvites",id:"Vinvites",label:u,selectItem:r,isDim:a,qaLabel:s,disabledInSonic:!c});if(!o)return d;var p=n.a.createElement(nn["a"],{onClick:l,className:"p-channel_sidebar__close","aria-label":En.t("Hide Invite People button")},n.a.createElement(Lt["b"],{type:"times-circle-medium"}));return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},d,p)};jn.displayName="InvitePeopleLink";jn.defaultProps={selectItem:b.a.noop,dim:true,label:void 0,qaLabel:"",showClose:false,onClickClose:b.a.noop,featureModernizeInvites:false};var Cn=Object(kn["pure"])(jn);var Sn=Object(q["b"])("Dismiss Add Apps link in sidebar",function(e){e(Object(j["d"])({pref:"add_apps_prompt_dismissed",value:true}))});var wn=Sn;var In=r(1446);var Tn=new ce["b"]("channel_sidebar");var An={isEnterprise:kt["b"].bool,isPaidTeam:kt["b"].bool,clogger:kt["b"].object.isRequired,appLinkImpression:kt["b"].bool,setAppLinkImpressionClogged:kt["b"].func,hideAppLinkPrompt:kt["b"].func,dismissInstallAppsPrompt:kt["b"].func,isAppLinkDismissed:kt["b"].bool,openAppsBrowserModal:kt["b"].func,featureM11nAppsBrowser:kt["b"].bool};var Nn={isEnterprise:false,isPaidTeam:false,appLinkImpression:false,setAppLinkImpressionClogged:b.a.noop,hideAppLinkPrompt:b.a.noop,dismissInstallAppsPrompt:b.a.noop,isAppLinkDismissed:false,openAppsBrowserModal:b.a.noop,featureM11nAppsBrowser:false};var Pn=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleAppsBrowserClick=r.handleAppsBrowserClick.bind(r);r.dismissLink=r.dismissLink.bind(r);return r}bt()(t,[{key:"componentDidMount",value:function e(){if(!this.props.appLinkImpression&&this.willVisibleRender()){this.clogEvent("impression");this.props.setAppLinkImpressionClogged()}}},{key:"clogEvent",value:function e(t){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:t,ui_element:"ADD_APPS"}}})}},{key:"handleAppsBrowserClick",value:function e(){this.clogEvent("click");var t=this.props.clogger;t.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK");this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal():Object(p["a"])()}},{key:"dismissLink",value:function e(){this.props.hideAppLinkPrompt();this.clogEvent("decline");this.props.dismissInstallAppsPrompt()}},{key:"willVisibleRender",value:function e(){if(this.props.isEnterprise||this.props.isPaidTeam)return false;if(this.props.isAppLinkDismissed)return false;return true}},{key:"render",value:function e(){if(!this.willVisibleRender())return null;var t=Tn.t("Add apps");var r=Tn.t('Dismiss "Add apps" prompt');return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Bt["c"],{className:"p-channel_sidebar__link",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link"},"+ ",t),n.a.createElement(Bt["c"],{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":r,"data-qa":"add_apps_dismiss_link"},n.a.createElement(Lt["b"],{type:"times-circle-medium"})))}}]);return t}(a["Component"]);Pn.displayName="InstallAppsLink";Pn.defaultProps=Nn;var Rn=function e(t){return{setAppLinkImpressionClogged:function e(){return t(O["setAppLinkImpressionClogged"].apply(void 0,arguments))},hideAppLinkPrompt:function e(){return t(O["hideAppLinkPrompt"].apply(void 0,arguments))},dismissInstallAppsPrompt:function e(){return t(wn.apply(void 0,arguments))},openAppsBrowserModal:function e(){return t(In["a"].apply(void 0,arguments))}}};function Mn(e){return{isEnterprise:!b.a.isEmpty(Object(N["h"])(e)),isPaidTeam:Object(P["isPaidTeam"])(Object(N["d"])(e)),clogger:Object(L["a"])({state:e}),appLinkImpression:Object(O["getAppLinkImpressionClogged"])(e),isAppLinkDismissed:Object(E["g"])(e,"add_apps_prompt_dismissed")||Object(O["getAppLinkIsHidden"])(e),featureM11nAppsBrowser:Object(R["isFeatureEnabled"])(e,"feature_m11n_apps_browser")}}var xn=Object(i["connect"])(Mn,Rn)(Pn);var Dn=r(242);var Fn=r(51);var Ln={appKey:kt["b"].string.isRequired,appId:kt["b"].string.isRequired,isInstall:kt["b"].bool.isRequired,dismissKey:kt["b"].string.isRequired,href:kt["b"].string.isRequired,text:kt["b"].string.isRequired,label:kt["b"].string.isRequired,clogUiElement:kt["b"].string.isRequired,clogger:kt["b"].object.isRequired,appSuggestionImpressions:kt["b"].object.isRequired,setUserPrefByApi:kt["b"].func,hideAppSuggestion:kt["b"].func,setAppSuggestionImpressionClogged:kt["b"].func};var Bn={setUserPrefByApi:f["noop"],hideAppSuggestion:f["noop"],setAppSuggestionImpressionClogged:f["noop"]};function Un(e){var t=e.appKey,r=e.appId,i=e.isInstall,s=e.setUserPrefByApi,o=e.hideAppSuggestion,l=e.dismissKey,c=e.href,u=e.text,d=e.label,p=e.clogUiElement,v=e.clogger,m=e.appSuggestionImpressions,h=e.setAppSuggestionImpressionClogged;var f=Object(a["useCallback"])(function(e){v.track(Rr["l"].APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:p},core:{app_id:r}}})},[r,v,p]);Object(a["useEffect"])(function(){if(!m[t]){h(t);f("impression")}},[m,h,f,t]);var b=Object(a["useCallback"])(function(){o(t);i||s({pref:l,value:true});f("click")},[o,s,l,t,f,i]);var g=Object(a["useCallback"])(function(){o(t);s({pref:l,value:true});f("decline")},[o,s,t,l,f]);return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Fn["a"],{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__channel p-channel_sidebar__channel--im",href:c,onClick:b},n.a.createElement("span",{className:"p-channel_sidebar__name"},"+ ",u)),n.a.createElement(Bt["c"],{"data-qa":"app_suggestion_prompt_dismiss",onClick:g,className:"p-channel_sidebar__close","aria-label":d},n.a.createElement(Lt["b"],{type:"times-circle-medium"})))}Un.displayName="AppSuggestionLink";Un.defaultProps=Bn;var qn=function e(t){return{setUserPrefByApi:function e(){return t(j["d"].apply(void 0,arguments))},hideAppSuggestion:function e(){return t(O["hideAppSuggestion"].apply(void 0,arguments))},setAppSuggestionImpressionClogged:function e(){return t(O["setAppSuggestionImpressionClogged"].apply(void 0,arguments))}}};var Gn=function e(t,r){var a=r.appKey;return h()({},ut(t,a),{clogger:Object(L["a"])({state:t}),appSuggestionImpressions:Object(O["getAppSuggestionImpressionsClogged"])(t)})};var Hn=Object(i["connect"])(Gn,qn)(Un);var Wn={displayedAppSuggestionsList:kt["b"].arrayOf(kt["b"].shape({appKey:kt["b"].string.isRequired,appName:kt["b"].string.isRequired}))};var Vn={displayedAppSuggestionsList:[]};var Kn=function e(t,r){var a=t.appName;var n=r.appName;return Object(Dn["a"])(a,n)};function zn(e){var t=e.displayedAppSuggestionsList;return n.a.createElement(a["Fragment"],null,t.sort(Kn).map(function(e){var t=e.appKey;return n.a.createElement(Hn,{appKey:t,key:t})}))}zn.displayName="AppSuggestionLinks";zn.defaultProps=Vn;var Qn=function e(t){return{displayedAppSuggestionsList:Object(O["getEnabledAppSuggestionPromptsKeyList"])(t)}};var Yn=Object(i["connect"])(Qn)(zn);var Jn=r(2268);var Xn=r(2270);var Zn=r(1327);var $n=new ce["b"]("channel_browser_coachmark");var ei={label:kt["b"].string.isRequired,qaLabel:kt["b"].string,iconClass:kt["b"].string,tooltip:kt["b"].node,headerAriaLabel:kt["b"].string,tooltipClassName:kt["b"].string,tooltipArrowOffset:kt["b"].number,onLabelClick:kt["b"].func,showPlus:kt["b"].bool,plusTooltip:kt["b"].node,plusAriaLabel:kt["b"].string,onPlusClick:kt["b"].func,seenChannelBrowserCoachmark:kt["b"].bool,hasRecentlySharedAChannel:kt["b"].bool,setUserPrefByApi:kt["b"].func,openChannelBrowser:kt["b"].func,featureChannelIsRemoveCreateSharedChannel:kt["b"].bool};var ti={qaLabel:"",iconClass:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:f["noop"],showPlus:false,plusTooltip:null,plusAriaLabel:"",onPlusClick:f["noop"],seenChannelBrowserCoachmark:false,hasRecentlySharedAChannel:false,setUserPrefByApi:f["noop"],openChannelBrowser:f["noop"],featureChannelIsRemoveCreateSharedChannel:false};var ri=Object(g["b"])();var ai=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLabelClick=r.onLabelClick.bind(r);r.onPlusClick=r.onPlusClick.bind(r);r.setTooltipRef=r.setTooltipRef.bind(r);r.setPlusTooltipRef=r.setPlusTooltipRef.bind(r);return r}bt()(t,[{key:"onLabelClick",value:function e(t){t.preventDefault();ri.action(va,"Selected heading "+this.props.qaLabel);this.props.onLabelClick();this.tooltip&&this.tooltip.hideTip()}},{key:"onPlusClick",value:function e(t){t.preventDefault();ri.action(va,"Clicked plus button for "+this.props.qaLabel);this.props.onPlusClick();this.plusTooltip&&this.plusTooltip.hideTip()}},{key:"setTooltipRef",value:function e(t){this.tooltip=t}},{key:"setPlusTooltipRef",value:function e(t){this.plusTooltip=t}},{key:"renderIconMaybe",value:function e(){var t=this.props.iconClass;if(!t)return null;return n.a.createElement(Lt["a"],{type:t})}},{key:"renderPlusButtonMaybe",value:function e(){var t=this.props,r=t.showPlus,a=t.plusTooltip,i=t.plusAriaLabel,s=t.qaLabel;if(!r)return null;var o=this.props.onPlusClick===this.props.onLabelClick;var l=o?"-1":void 0;var c=o?"true":void 0;var u=n.a.createElement(Bt["c"],{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":i,tabIndex:l,"data-qa":"channel_sidebar__plus__"+s});var d=a?n.a.createElement(Sr["c"],{tip:a,position:"top",ref:this.setPlusTooltipRef,delay:Sr["a"]},u):u;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading_right","aria-hidden":c},d)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function e(t){var r=this;var a=this.props,i=a.seenChannelBrowserCoachmark,s=a.hasRecentlySharedAChannel,o=a.qaLabel,l=a.featureChannelIsRemoveCreateSharedChannel;if("shared_channels"!==o&&!l||"channels"!==o&&l||i||!s)return t;var c=function e(){r.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:true})};var u=function e(){c();if(Object(G["a"])())r.props.openChannelBrowser();else{Object(p["b"])();Object(Zn["a"])()}};var d=n.a.createElement(Jn["a"],{secondaryCallToActionText:$n.t("Close"),primaryCallToActionText:$n.t("Show Me"),title:$n.t("View and manage shared channels"),content:$n.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),isOpen:true,onClickSecondaryButton:c,onClickPrimaryButton:u,orientation:"right",closeCoachmark:c},n.a.createElement("h3",{className:"margin_bottom_50"},$n.t("View and manage shared channels")),n.a.createElement("p",null,$n.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar.")));return n.a.createElement("div",null,n.a.createElement(Xn["b"],{orientation:"right",coachmarkElement:d},t))}},{key:"render",value:function e(){var t=this.props,r=t.label,a=t.qaLabel,i=t.tooltip,s=t.headerAriaLabel,o=t.tooltipClassName,l=t.tooltipArrowOffset,c=t.onLabelClick;var u=void 0;var d=c!==f["noop"];u=d?n.a.createElement(Bt["c"],{className:jt()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable"),onClick:this.onLabelClick,"aria-label":s},this.renderIconMaybe()," ",r):n.a.createElement("span",{role:"heading","aria-level":"2",className:"p-channel_sidebar__section_heading_label"},this.renderIconMaybe()," ",r);var p=i?n.a.createElement(Sr["c"],{tip:i,tipClassName:o,position:"top-left",tipArrowOffset:l,ref:this.setTooltipRef,delay:Sr["a"]},this.renderSharedChannelsCoachmarkMaybe(u)):u;var v=d?n.a.createElement("h2",{className:"offscreen"},r):null;var m=this.props.onPlusClick!==this.props.onLabelClick;var h=m?"group":void 0;var b=m?r:void 0;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading","data-qa-channel-sidebar-section-heading":a,role:h,"aria-label":b},v,p,this.renderPlusButtonMaybe())}}]);return t}(n.a.PureComponent);ai.displayName="SectionHeading";ai.defaultProps=ti;var ni=function e(t){return{seenChannelBrowserCoachmark:Object(E["g"])(t,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(E["g"])(t,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(R["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel")}};var ii={setUserPrefByApi:function e(){return j["d"].apply(void 0,arguments)},openChannelBrowser:function e(){return an["a"].apply(void 0,arguments)}};var si=Object(i["connect"])(ni,ii)(ai);var oi=new ce["b"]("channel_sidebar");var li={featureChannelSidebarDraftsSection:kt["b"].bool,setUserPrefByApi:kt["b"].func,showDraftsSectionCoachmark:kt["b"].bool,scrollToTopOfChannelList:kt["b"].func};var ci={featureChannelSidebarDraftsSection:false,setUserPrefByApi:f["noop"],showDraftsSectionCoachmark:false,scrollToTopOfChannelList:f["noop"]};var ui=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={showCoachmark:e.showDraftsSectionCoachmark};r.markCoachmarkSeen=r.markCoachmarkSeen.bind(r);r.onShow=r.onShow.bind(r);return r}bt()(t,[{key:"componentDidMount",value:function e(){this.props.showDraftsSectionCoachmark&&this.props.scrollToTopOfChannelList()}},{key:"onShow",value:function e(){if(!this.state.showCoachmark)return;this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:true})}},{key:"markCoachmarkSeen",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"render",value:function e(){var t=this.props.featureChannelSidebarDraftsSection;var r=this.state.showCoachmark;if(!t)return null;var a=n.a.createElement(si,{label:oi.t("Drafts"),qaLabel:"drafts"});if(r){this.onShow();var i=oi.t("Pick up where you left off");var s=oi.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send.");var o=n.a.createElement(Jn["a"],{orientation:"right",onClickPrimaryButton:this.markCoachmarkSeen,closeCoachmark:this.markCoachmarkSeen,primaryCallToActionText:oi.t("Got it",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0",fallbackHashNs:"coachmarks"}),isOpen:true,"data-qa":"drafts-coachmark"},n.a.createElement("h3",{className:"margin_bottom_50"},i),n.a.createElement("p",null,s));return n.a.createElement(Xn["b"],{orientation:"right",coachmarkElement:o},n.a.createElement("div",null,a))}return a}}]);return t}(a["Component"]);ui.displayName="DraftsHeading";ui.defaultProps=ci;var di=function e(t){return{featureChannelSidebarDraftsSection:Object(R["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section"),showDraftsSectionCoachmark:!Object(E["g"])(t,"seen_drafts_section_coachmark")}};var pi=function e(t){return{setUserPrefByApi:function e(r){return t(Object(j["d"])(r))}}};var vi=Object(i["connect"])(di,pi)(ui);var mi=r(138);var hi=new ce["b"]("channel_sidebar");var fi="plans?ui_step="+Rr["A"].SIDEBAR+"&ui_element="+Rr["z"].PRICING_LINK;var bi="upgrade_button";var gi={featureUpgradeSlackTranslations:kt["b"].bool,team:kt["b"].object.isRequired,clogger:kt["b"].object.isRequired};var _i={featureUpgradeSlackTranslations:false};var yi=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}bt()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.clogger.track(Rr["l"].GROWTH_PRICING,{contexts:{ui_context:{step:Rr["A"].SIDEBAR,action:Rr["w"].CLICK,ui_properties:{element_type:Rr["k"].LINK,element_name:bi}}}});Object(P["openAuthenticatedUrlInBrowser"])(this.props.team,fi)}},{key:"render",value:function e(){var t=this.props.featureUpgradeSlackTranslations;if(!t)return null;return n.a.createElement(Fn["a"],{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack",onClick:this.onClick,href:fi},n.a.createElement("span",{className:"p-channel_sidebar__name"},hi.t("Upgrade")))}}]);return t}(a["PureComponent"]);yi.displayName="UpgradeSlackLink";yi.defaultProps=_i;function Oi(e){return{team:Object(N["d"])(e),clogger:Object(L["a"])({state:e})}}var ki=yi;var Ei=Object(i["connect"])(Oi)(Object(mi["a"])("feature_upgrade_slack_translations")(yi));var ji=new ce["b"]("channel_sidebar");var Ci=function e(t){return n.a.createElement(si,h()({},t,{label:ji.t("Starred"),qaLabel:"starred"}))};Ci.displayName="StarredHeading";var Si=Object(kn["pure"])(Ci);var wi=r(257);var Ii=r(68);var Ti=r(2216);var Ai=r(1358);var Ni=r(1257);var Pi=new ce["b"]("channel_sidebar");var Ri={canOpenChannelBrowser:kt["b"].bool,sharedChannelsEnabled:kt["b"].bool,showPlus:kt["b"].bool,openSharedChannelCreationOrRequestModal:kt["b"].func,openChannelBrowser:kt["b"].func.isRequired,canUserRequestSharedChannel:kt["b"].bool,canUserCreateSharedChannel:kt["b"].bool,featureSonicDmBrowser:kt["b"].bool,openDmBrowserModal:kt["b"].func};var Mi={canOpenChannelBrowser:true,sharedChannelsEnabled:false,showPlus:false,openSharedChannelCreationOrRequestModal:f["noop"],canUserRequestSharedChannel:false,canUserCreateSharedChannel:false,featureSonicDmBrowser:false,openDmBrowserModal:f["noop"]};var xi=function e(){return Object(p["e"])({element:"shared_channels_channel_sidebar_plus_btn"})};var Di=function e(t){var r=t.canOpenChannelBrowser,a=t.showPlus,i=t.canUserRequestSharedChannel,s=t.canUserCreateSharedChannel,o=t.featureSonicDmBrowser;var l=void 0;r&&(l=Pi.t("Browse all shared channels"));var c=void 0;r&&(c=Object(G["a"])()?function(){return t.openChannelBrowser({initialFilter:"shared"})}:p["c"]);var u=void 0;var d=i&&!s&&o;u=Object(G["a"])()?t.openSharedChannelCreationOrRequestModal:d?t.openDmBrowserModal.bind(null,{adminMode:Ni["a"].createChannel,showOpenTransition:true}):xi;return n.a.createElement(si,h()({},t,{onLabelClick:c,tooltip:l,headerAriaLabel:Pi.t("Browse all shared channels"),tooltipArrowOffset:50,label:Pi.t("Shared Channels"),qaLabel:"shared_channels",showPlus:a,plusTooltip:Pi.t("Create a shared channel"),onPlusClick:u}))};Di.displayName="SharedChannelsHeading";Di.defaultProps=Mi;var Fi=function e(t){return{canOpenChannelBrowser:!Object(le["isUltraRestricted"])(Object(A["b"])(t)),sharedChannelsEnabled:1===Object(Ii["a"])(t,"enable_shared_channels"),featureSonicEscCreation:Object(R["isFeatureEnabled"])(t,"feature_sonic_esc_creation"),featureSonicChannelBrowser:Object(R["isFeatureEnabled"])(t,"feature_sonic_channel_browser"),showPlus:qi(t),canUserRequestSharedChannel:Object(oe["P"])(t),canUserCreateSharedChannel:Object(oe["H"])(t),featureSonicDmBrowser:Object(R["isFeatureEnabled"])(t,"feature_sonic_dm_browser")}};var Li={openSharedChannelCreationOrRequestModal:function e(){return Ti["a"].apply(void 0,arguments)},openChannelBrowser:function e(){return an["a"].apply(void 0,arguments)},openDmBrowserModal:function e(){return Ai["a"].apply(void 0,arguments)}};var Bi=Object(kn["pure"])(Di);var Ui=Object(i["connect"])(Fi,Li)(Bi);function qi(e){var t=!Object(R["isFeatureEnabled"])(e,"feature_shared_channels_block_large_orgs");var r=Object(A["b"])(e);if(Object(wi["e"])(e)&&t)return Object(le["canManageExternalSharedChannels"])(e);if(Object(le["isUltraRestricted"])(r)||Object(le["isRestricted"])(r))return false;return Object(oe["P"])(e)}var Gi=r(195);var Hi=r(4028);var Wi=r(1351);var Vi=r(3953);var Ki=new ce["b"]("coachmarks");var zi={currentMember:kt["b"].object,featureSonicChannelBrowser:kt["b"].bool,firstListedChannel:kt["b"].string,inSinglePublicChannel:kt["b"].bool,inSinglePrivateChannel:kt["b"].bool,setAboutChannelsCoachmarkIsVisible:kt["b"].func.isRequired,anchorElement:kt["b"].instanceOf(Element)};var Qi={featureSonicChannelBrowser:false,currentMember:f["noop"],firstListedChannel:null,inSinglePublicChannel:false,inSinglePrivateChannel:false,anchorElement:null};var Yi=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClose=r.onClose.bind(r);r.renderCoachmarkContent=r.renderCoachmarkContent.bind(r);return r}bt()(t,[{key:"onClose",value:function e(t){t.preventDefault();this.props.setAboutChannelsCoachmarkIsVisible(false)}},{key:"renderCoachmarkContent",value:function e(){var t=this.props,r=t.currentMember,a=t.inSinglePublicChannel,i=t.inSinglePrivateChannel,s=t.firstListedChannel;var o="";o=Object(le["isAdmin"])(r)?Ki.t("Channels bring order and searchability to your team\u2019s conversations. Organize by topic (#research), working group (#sales), or specific project (#sales-tv-ad)."):Object(le["isRestricted"])(r)?a?Ki.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in one channel, {channelName}.",{channelName:n.a.createElement("strong",null,s),fallbackHash:"714a97c13fc44eebbf3c57a94f5e275f6c6da22f",fallbackHashNs:"coachmarks"}):i?Ki.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can access one channel, {channelName}. This is a private, invitation-only channel.",{channelName:n.a.createElement("strong",null,s),fallbackHash:"6b2988717e064c5abfcad7bc9ba9187458753ac3",fallbackHashNs:"coachmarks"}):Ki.t("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in the channels listed here."):Ki.t("Channels bring order and searchability to your team\u2019s conversations. They\u2019re organized by topic (#research), working group (#sales), or specific project (#sales-tv-ad).");return o}},{key:"render",value:function e(){var t=this.props,r=t.featureSonicChannelBrowser,a=t.anchorElement;if(!r)return null;return n.a.createElement(Jn["a"],{anchorElement:a,orientation:"right",onClickPrimaryButton:this.onClose,closeCoachmark:this.onClose,primaryCallToActionText:Ki.t("Got it!"),isOpen:true},n.a.createElement("h3",{className:"margin_bottom_50"},Ki.t("Messaging happens in channels")),n.a.createElement("p",null,this.renderCoachmarkContent()))}}]);return t}(a["Component"]);Yi.displayName="ChannelHeadingCoachmark";Yi.defaultProps=Qi;var Ji=function e(t){var r=Object(C["t"])(t);var a=r.filter(S["isPrivateChannel"]);var n=r.filter(S["isPublicChannel"]);return{currentMember:Object(A["b"])(t),featureSonicChannelBrowser:Object(R["isFeatureEnabled"])(t,"feature_sonic_channel_browser"),inSinglePrivateChannel:1===r.length&&1===a.length,inSinglePublicChannel:1===r.length&&1===n.length,firstListedChannel:r.length?r[0].name:""}};var Xi={setAboutChannelsCoachmarkIsVisible:function e(){return O["setAboutChannelsCoachmarkIsVisible"].apply(void 0,arguments)}};var Zi=Object(i["connect"])(Ji,Xi)(Yi);var $i=r(2292);var es=2500;var ts=new ce["b"]("channel_sidebar");var rs={showPlus:kt["b"].bool,canOpenChannelBrowser:kt["b"].bool,wasRecentlyOnline:kt["b"].bool.isRequired,featureSonicChannelBrowser:kt["b"].bool,featureOfflineMode:kt["b"].bool.isRequired,aboutChannelsCoachmarkIsVisible:kt["b"].bool.isRequired,openChannelBrowser:kt["b"].func.isRequired,maybeShowSharedChannelsCoachmark:kt["b"].func.isRequired,sharedChannelsCoachmarkIsVisible:kt["b"].bool.isRequired};var as={showPlus:true,canOpenChannelBrowser:true,featureSonicChannelBrowser:false};var ns=function e(t){var r=t.featureOfflineMode,i=t.featureSonicChannelBrowser,s=t.showPlus,o=t.canOpenChannelBrowser,l=t.wasRecentlyOnline,c=t.aboutChannelsCoachmarkIsVisible,u=t.sharedChannelsCoachmarkIsVisible,d=t.maybeShowSharedChannelsCoachmark;Object(a["useEffect"])(function(){var e=setTimeout(d,es);return function(){return clearTimeout(e)}},[d]);var v=void 0;o&&(v=i?ts.t("Browse all channels"):n.a.createElement(Vi["a"],null,ts.t("Browse all channels")));var m=ts.t("Create a channel");r&&!l&&(m=n.a.createElement(Wi["a"],{tooltipLabel:ts.t("Create a channel")}));var f=void 0;o&&(f=Object(G["a"])()&&i?t.openChannelBrowser:p["b"]);var b=n.a.createElement(si,h()({},t,{onLabelClick:f,label:ts.t("Channels"),qaLabel:"channels",tooltip:v,headerAriaLabel:ts.t("Browse all channels"),tooltipArrowOffset:30,showPlus:s,plusTooltip:m,plusAriaLabel:ts.t("Create a channel")}));if(c)return n.a.createElement(Xn["b"],{orientation:"right",coachmarkElement:n.a.createElement(Zi,null)},b);if(u)return n.a.createElement($i["b"],null,b);return b};ns.defaultProps=as;var is=function e(t){return{showPlus:Object(oe["G"])(t)||Object(oe["F"])(t),canOpenChannelBrowser:!Object(le["isUltraRestricted"])(Object(A["b"])(t)),featureSonicChannelBrowser:Object(R["isFeatureEnabled"])(t,"feature_sonic_channel_browser"),featureOfflineMode:Object(R["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(Gi["h"])(t),aboutChannelsCoachmarkIsVisible:Object(O["getAboutChannelsCoachmarkIsVisible"])(t),sharedChannelsCoachmarkIsVisible:Object(O["getSharedChannelsCoachmarkIsVisible"])(t)}};var ss={openChannelBrowser:function e(){return an["a"].apply(void 0,arguments)},maybeShowSharedChannelsCoachmark:function e(){return Hi["a"].apply(void 0,arguments)}};var os=Object(i["connect"])(is,ss)(ns);var ls=r(795);var cs={name:kt["b"].string,setIsRenaming:kt["b"].func,saveFolderData:kt["b"].func,renameFolder:kt["b"].func,toggleFolderCollapse:kt["b"].func,setFolderCollapse:kt["b"].func,badgeCount:kt["b"].number,hasUnreads:kt["b"].bool,isCollapsed:kt["b"].bool,isRenaming:kt["b"].bool,onDragStart:kt["b"].func,onDragEnd:kt["b"].func,onDrop:kt["b"].func,onDragOver:kt["b"].func};var us={name:"",setIsRenaming:b.a.noop,saveFolderData:b.a.noop,renameFolder:b.a.noop,toggleFolderCollapse:b.a.noop,setFolderCollapse:b.a.noop,badgeCount:0,hasUnreads:false,isCollapsed:false,isRenaming:false,onDragStart:b.a.noop,onDragEnd:b.a.noop,onDrop:b.a.noop,onDragOver:b.a.noop};var ds=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggleFolderCollapse=r.toggleFolderCollapse.bind(r);r.renameFolder=r.renameFolder.bind(r);r.showRenameBox=r.showRenameBox.bind(r);r.setRenamingLabel=r.setRenamingLabel.bind(r);r.setInputRef=r.setInputRef.bind(r);r.onBlur=r.onBlur.bind(r);r.state={renamingLabel:r.props.name,hasTyped:false};return r}bt()(t,[{key:"onBlur",value:function e(t){if(this.props.isRenaming){var r=this.props.name;var a=t.target.value;this.props.renameFolder({oldName:r,newName:a});this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function e(t){var r=t.target.value;this.setState(function(){return{renamingLabel:r,hasTyped:true}})}},{key:"setInputRef",value:function e(t){if(t&&!this.state.hasTyped){t.select();t.focus()}}},{key:"showRenameBox",value:function e(){var t=this.props.name;this.props.setIsRenaming({name:t});this.setState(function(){return{renamingLabel:t,hasTyped:false}})}},{key:"toggleFolderCollapse",value:function e(t){t.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name});this.props.saveFolderData()}},{key:"renameFolder",value:function e(t){var r=this.props.name;var a=void 0;"Enter"===t.key&&(a=t.target.value);"Escape"===t.key&&(a=this.props.name);if(void 0!==a){this.props.renameFolder({oldName:r,newName:a});this.props.saveFolderData()}}},{key:"render",value:function e(){var t=this.props.isRenaming?"":n.a.createElement(Bt["c"],{className:jt()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});var r="";var a=void 0;a=this.props.isRenaming?n.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):b.a.includes(this.props.name,"<")?n.a.createElement(Bt["c"],{className:jt()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":r},this.props.name):n.a.createElement(Bt["c"],{className:jt()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":r},n.a.createElement(ls["a"],{text:this.props.name,noJumbomoji:true,noHighlights:true}));var i=this.props.isCollapsed?n.a.createElement(Bt["c"],{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse},n.a.createElement(pa["b"],{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return n.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:true,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},n.a.createElement("h2",{className:"offscreen"},this.props.name),a,i,t)}}]);return t}(n.a.PureComponent);ds.displayName="FolderHeading";ds.defaultProps=us;var ps=function e(t,r){var a=r.name;var n=Object(k["getFolderByName"])(t,a);var i=n?b.a.map(n.channelIds,function(e){return Object(C["d"])(t,e)}):[];var s=!!n&&n.isCollapsed;var o=!!n&&n.isRenaming;var l=i.length>0?b.a.sum(b.a.map(i,function(e){return Object(C["c"])(t,e)})):0;var c=i.length>0&&!!b.a.find(i,function(e){return Object(S["isUnread"])(e)&&!Object(w["isChannelMutedById"])(t,e.id)});return{isCollapsed:s,isRenaming:o,hasUnreads:c,badgeCount:l}};var vs={toggleFolderCollapse:k["toggleFolderCollapse"],setFolderCollapse:k["setFolderCollapse"],saveFolderData:k["saveFolderData"],renameFolder:k["renameFolder"],setIsRenaming:k["setIsRenaming"]};var ms=Object(i["connect"])(ps,vs)(ds);var hs=new ce["b"]("channel_sidebar");var fs={orgName:kt["b"].string.isRequired};var bs=function e(t){return n.a.createElement(si,h()({},t,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:hs.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:hs.t("Shared with all workspaces at {orgName}",{orgName:t.orgName}),tooltipArrowOffset:50}))};bs.displayName="OrgWideChannelsHeading";var gs=Object(kn["pure"])(bs);var _s=function e(t){var r=Object(N["f"])(t);return{orgName:r}};var ys=Object(i["connect"])(_s)(gs);var Os=new ce["b"]("channel_sidebar");var ks=function e(t){return n.a.createElement(si,{label:Os.t("Direct Messages"),qaLabel:"ims",tooltip:Os.t("Open a direct message"),headerAriaLabel:Os.t("Open a direct message"),tooltipArrowOffset:50,showPlus:true,plusTooltip:Os.t("Open a direct message"),plusAriaLabel:Os.t("Open a direct message"),onLabelClick:function e(){return t.openDmBrowserModal()},onPlusClick:function e(){return t.openDmBrowserModal()}})};ks.displayName="DirectMessagesHeading";ks.defaultProps={openDmBrowserModal:f["noop"]};var Es={openDmBrowserModal:function e(){return Ai["a"].apply(void 0,arguments)}};var js=Object(i["connect"])(null,Es)(ks);var Cs=new ce["b"]("channel_sidebar");var Ss=function e(t){var r=t.featureM11nAppsBrowser?Cs.t("Browse Apps"):n.a.createElement(Vi["a"],null,Cs.t("Browse apps"));var a=t.featureM11nAppsBrowser?t.openAppsBrowserModal:p["a"];return n.a.createElement(si,h()({},t,{onLabelClick:a,onPlusClick:a,label:Cs.t("Apps"),qaLabel:"apps",tooltip:r,headerAriaLabel:Cs.t("Browse apps"),tooltipArrowOffset:16,showPlus:true,plusTooltip:r,plusAriaLabel:Cs.t("Browse apps")}))};Ss.displayName="AppsHeading";Ss.defaultProps={featureM11nAppsBrowser:false};var ws=function e(t){return{featureM11nAppsBrowser:Object(R["isFeatureEnabled"])(t,"feature_m11n_apps_browser")}};var Is=function e(t){return Object(Cr["bindActionCreators"])({openAppsBrowserModal:In["a"]},t)};var Ts=Object(i["connect"])(ws,Is)(Ss);var As={},Ns=As.getLastTeamSwitchTimestamp;var Ps={},Rs=Ps.getFocusedWorkspace;var Ms=new ce["b"]("channel_sidebar");var xs={rows:kt["b"].arrayOf(kt["b"].shape({type:kt["b"].string,scrollBottom:kt["b"].number})).isRequired,onItemSelect:kt["b"].func,onInviteClick:kt["b"].func,onCreateChannelClick:kt["b"].func,onCreateSharedChannelClick:kt["b"].func,onResize:kt["b"].func,onScroll:kt["b"].func,sidebarFoldersIsEnabled:kt["b"].bool,onDragStart:kt["b"].func,onDragEnd:kt["b"].func,onDrop:kt["b"].func,onDragOver:kt["b"].func,onCreateFolder:kt["b"].func,telemeter:kt["b"].object.isRequired,logger:kt["b"].object,clogger:kt["b"].object,shouldTrackTTFMP:kt["b"].bool,bootType:kt["b"].oneOf(["warm","cold"]),featureReactAllUnreads:kt["b"].bool,featureModernizeInvites:kt["b"].bool,setHideInviteButton:kt["b"].func,setHideAddChannelButton:kt["b"].func,teamId:kt["b"].string,featureSeeMoreChannels:kt["b"].bool,userAttentionIsOnChat:kt["b"].bool,removeFromSectionNavigation:kt["b"].func,addToSectionNavigation:kt["b"].func};var Ds={onItemSelect:b.a.noop,onInviteClick:b.a.noop,onCreateChannelClick:b.a.noop,onCreateSharedChannelClick:b.a.noop,onResize:b.a.noop,onScroll:b.a.noop,sidebarFoldersIsEnabled:false,onDragStart:b.a.noop,onDragEnd:b.a.noop,onDrop:b.a.noop,onDragOver:b.a.noop,onCreateFolder:b.a.noop,shouldTrackTTFMP:true,logger:null,clogger:null,bootType:null,featureReactAllUnreads:false,featureModernizeInvites:false,setHideInviteButton:b.a.noop,setHideAddChannelButton:b.a.noop,teamId:null,featureSeeMoreChannels:false,userAttentionIsOnChat:false,removeFromSectionNavigation:b.a.noop,addToSectionNavigation:b.a.noop};var Fs=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(mr["a"])(r,["setScrollbarRef","getCurrentScrollTop","resetCurrentScrollTopMaybe","setListRef","onResize","onScroll","onItemClick","onInviteClick","onInviteCloseClick","onAddChannelCloseClick","renderRow","renderRowWithWrapper","onItemSelected","scrollToTopOfChannelList","focus"]);r.currentScrollTop=0;r.height=0;return r}bt()(t,[{key:"componentDidMount",value:function e(){var t=this;if(!b.a.get(window,"performance.timing.fetchStart"))return;var r=this.props.shouldTrackTTFMP;if(r&&Object(G["a"])()){var a=Object(o["b"])();r=Object(gr["shouldLogAppBootMetrics"])(a.getState());r&&a.dispatch(Object(gr["setShouldLogAppBootMetrics"])(false))}var n=Promise.resolve();Object(pt["hasDeviceStorage"])()&&Object(Dt["isSSB"])()&&(n=Object(pt["getItem"])("shouldLogFirstMeaningfulPaint").then(function(e){"false"===e&&(r=false)}));(Dt["isDev"]||Dt["isQa"]||Dt["isJsPath"])&&(r=false);var i=Object(_r["d"])(window.desktop);var s=Object(Dt["isReload"])()?"_reload":"";var l=Date.now()-(window.performance.timing.fetchStart+i);var c=Object(G["a"])()?"ttfmp_sonic_"+this.props.bootType+s:"ttfmp_legacy"+s;n.then(function(){if(r){t.shouldLogFirstMeaningfulPaint=false;Object(pt["hasDeviceStorage"])()&&Object(Dt["isSSB"])()&&Object(pt["setItem"])("shouldLogFirstMeaningfulPaint","false");t.props.logger.info("PERF","First meaningful paint: "+l+"ms");t.props.telemeter.store(c,l)}});this.clogInvitePeopleButton()}},{key:"componentDidUpdate",value:function e(t){if(Object(G["a"])()){var r=Object(o["b"])();var a=r.getState();var n=Rs(a);if(Object(gr["shouldLogTeamSwitchMetrics"])(a)&&n===this.props.teamId){var i=Ns();var s=Date.now()-i;this.props.telemeter.store("team_switch_sonic",s);r.dispatch(Object(gr["setShouldLogTeamSwitchMetrics"])(false))}}this.List&&t.rows!==this.props.rows&&this.List.recomputeRowHeights();!t.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation();!this.props.userAttentionIsOnChat&&t.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"onResize",value:function e(t){var r=t.height;this.resetCurrentScrollTopMaybe(r);this.height=r;this.props.onResize({height:r})}},{key:"onScroll",value:function e(t,r){var a=r.scrollTop;this.currentScrollTop=a;this.List&&this.List.Grid.handleScrollEvent({scrollTop:a});this.props.onScroll&&this.props.onScroll(a)}},{key:"onItemClick",value:function e(t,r){t.preventDefault();this.props.onItemSelect(r)}},{key:"onInviteClick",value:function e(t,r){this.props.onInviteClick(r)}},{key:"onInviteCloseClick",value:function e(){this.props.setHideInviteButton()}},{key:"onAddChannelCloseClick",value:function e(){this.props.setHideAddChannelButton()}},{key:"onItemSelected",value:function e(t){this.selectedItemRef=t}},{key:"setScrollbarRef",value:function e(t){this.Scrollbar=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getCurrentScrollTop",value:function e(){return this.currentScrollTop}},{key:"getContentHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return t.length?t[t.length-1].scrollBottom:0}},{key:"focus",value:function e(){this.selectedItemRef&&this.selectedItemRef.focus()}},{key:"clogInvitePeopleButton",value:function e(){var t=this.props.clogger;t.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});t.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});t.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});t.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}},{key:"resetCurrentScrollTopMaybe",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;t>this.getContentHeight(r)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function e(t){var r=this;var a=Math.max(0,Math.min(this.getContentHeight()-this.height,t));Object(fr["a"])({fromValue:this.currentScrollTop,toValue:a,duration:200,easing:"easeOutQuad",onTick:function e(t){var a=t.value,n=t.nextTick;r.Scrollbar.scrollTop(a);n()}})}},{key:"scrollToTopOfChannelList",value:function e(){this.Scrollbar&&this.Scrollbar.scrollTop(0)}},{key:"renderRowWithWrapper",value:function e(t,r){var a=t.height,i=t.id,s=t.type;var o=i||r+"-"+s;var l={quickswitcherButton:"listitem",allUnreadsLink:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",app:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackLink:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[s];return n.a.createElement("div",{key:o,style:{height:a},role:l},this.renderRow(t))}},{key:"renderRow",value:function e(t){var r=this.props,a=r.onItemSelect,i=r.featureReactAllUnreads,s=r.featureSeeMoreChannels;switch(t.type){case"quickswitcherButton":return n.a.createElement(Yt,null);case"allUnreadsLink":if(Object(G["a"])()&&!i)return n.a.createElement(Ka,{onItemSelected:this.onItemSelected});return n.a.createElement(Ma,{selectItem:a,onItemSelected:this.onItemSelected});case"allThreadsLink":return n.a.createElement(Xa,{selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected});case"searchLink":return n.a.createElement(rn,{selectItem:a});case"pageLink":return n.a.createElement(On,{id:t.id,selectItem:a,onItemSelected:this.onItemSelected});case"sectionHeading":return this.renderSectionHeading(t.name);case"folderHeading":return this.renderFolderHeading(t.name);case"channel":return this.renderChannel(t.id,t.index);case"appDmSuggestion":return this.renderAppDmSuggestion(t.id,t.index);case"addAChannelLink":return n.a.createElement(pn,{isDim:t.dim,qaLabel:"_add_channel",label:s?Ms.t("See more channels"):Ms.t("Add a channel"),onClickClose:this.onAddChannelCloseClick});case"invitePeopleLink":return n.a.createElement(Cn,{selectItem:this.onInviteClick,dim:t.dim,qaLabel:"_invite_people",label:Ms.t("Invite people"),showClose:true,onClickClose:this.onInviteCloseClick,featureModernizeInvites:this.props.featureModernizeInvites});case"installAppsLink":return n.a.createElement(xn,null);case"appSuggestionLinks":return n.a.createElement(Yn,null);case"upgradeSlackLink":return n.a.createElement(Ei,null);case"spacer":return null;case"topPadding":return null;default:Object(g["b"])().warn("Row type "+t.type+" not implemented",t)}return null}},{key:"renderSectionHeading",value:function e(t){var r=this.props,a=r.onCreateChannelClick,i=r.onCreateSharedChannelClick;switch(t){case"drafts":return n.a.createElement(vi,{scrollToTopOfChannelList:this.scrollToTopOfChannelList});case"starred":if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(si,{label:Ms.t("Starred"),qaLabel:"starred",showPlus:true,onPlusClick:this.props.onCreateFolder});return n.a.createElement(Si,null);case"sharedChannels":return n.a.createElement(Ui,{onPlusClick:i});case"channels":return n.a.createElement(os,{onPlusClick:a});case"orgWideChannels":return n.a.createElement(ys,null);case"ims":return n.a.createElement(js,null);case"apps":return n.a.createElement(Ts,null);default:return null}}},{key:"renderFolderHeading",value:function e(t){return n.a.createElement(ms,{name:t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderAppDmSuggestion",value:function e(t,r){return n.a.createElement(Kr,{id:t,index:r})}},{key:"renderChannel",value:function e(t,r){if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(Ea,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:r,sidebarFoldersIsEnabled:true,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver});var a=n.a.createElement(Ea,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:r});return a}},{key:"render",value:function e(){var t=this;return n.a.createElement(hr["a"],{onResize:this.onResize},function(e){var r=e.width,a=e.height;return n.a.createElement(br["a"],{width:r,height:a,contentHeight:t.getContentHeight(),onScroll:t.onScroll,ref:t.setScrollbarRef,serializationKey:"channel-list-scrollbar"},n.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":Ms.t("Channels and direct messages"),role:"list"},t.props.rows.map(t.renderRowWithWrapper)))})}}]);return t}(n.a.PureComponent);Fs.displayName="ChannelList";Fs.defaultProps=Ds;var Ls=Object(G["a"])()?Object(yr["a"])(Fs,"ChannelList",{index:2}):Fs;var Bs=Ls;var Us=new ce["b"]("channel_sidebar");var qs={isShowing:kt["b"].bool.isRequired,linkedId:kt["b"].oneOfType([kt["b"].string,kt["b"].bool]),isMention:kt["b"].bool,position:kt["b"].oneOf(["top","bottom"]),ensureRowInView:kt["b"].func};var Gs={linkedId:null,isMention:false,position:"top",ensureRowInView:b.a.noop};var Hs=function(e){Ot()(t,e);function t(){ht()(this,t);var e=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onClick=e.onClick.bind(e);return e}bt()(t,[{key:"onClick",value:function e(t){var r=this.props,a=r.linkedId,n=r.ensureRowInView;t.preventDefault();a&&n(a)}},{key:"render",value:function e(){var t=this.props,r=t.isShowing,a=t.position,i=t.isMention,s=t.linkedId;if(!r)return null;var o=jt()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":i,"p-channel_sidebar__banner--unreads":!i,"p-channel_sidebar__banner--top":"top"===a,"p-channel_sidebar__banner--bottom":"bottom"===a});var l="top"===a?"up":"down";var c=i?Us.t("Unread Mentions"):Us.t("More Unreads");return n.a.createElement(Bt["c"],{className:o,onClick:this.onClick,"data-qa-linked-id":s},c,n.a.createElement(Lt["b"],{type:"arrow_"+l,inline:true,className:"p-channel_sidebar__banner_icon"}))}}]);return t}(n.a.PureComponent);Hs.displayName="UnreadBanner";Hs.defaultProps=Gs;var Ws=Hs;var Vs=r(1697);var Ks=new ce["b"]("channel_sidebar");var zs="react_channel_sidebar_update";var Qs=Object(Q["a"])(1);var Ys=2;var Js=10;var Xs=24;var Zs={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var $s={isBooted:kt["b"].bool,selectedItemId:kt["b"].string,unreadIds:kt["b"].arrayOf(kt["b"].string),mutedMentionIds:kt["b"].arrayOf(kt["b"].string),mentionIds:kt["b"].arrayOf(kt["b"].string),rows:kt["b"].arrayOf(kt["b"].object),rowsMap:kt["b"].object,rowIds:kt["b"].arrayOf(kt["b"].string),idsNeedingPresenceSubscription:kt["b"].arrayOf(kt["b"].string),onItemSelect:kt["b"].func,onInviteClick:kt["b"].func,onCreateChannelClick:kt["b"].func,jumperCoachmarkState:kt["b"].string,historyNavigationEnabled:kt["b"].bool,useHistoryNavigation:kt["b"].bool,useGlobalNav:kt["b"].bool,featureGlobalNavLayout:kt["b"].bool,featureClassicNav:kt["b"].bool,sidebarFoldersIsEnabled:kt["b"].bool,initializeFolderData:kt["b"].func,initializeAppSuggestionLinksData:kt["b"].func,createFolder:kt["b"].func,ensureDraftChannelObjects:kt["b"].func,dragFolderOrChannel:kt["b"].func,ariaLandmarkLabel:kt["b"].string,featureSonicPresenceManager:kt["b"].bool,featureSonicInputs:kt["b"].bool,featureReactAllUnreads:kt["b"].bool,telemeter:kt["b"].object,logger:kt["b"].object,isWindowFocused:kt["b"].bool,bootType:kt["b"].oneOf(["warm","cold"]),teamId:kt["b"].string,clogger:kt["b"].object,suggestedChannelsMap:kt["b"].object,setHideInviteButton:kt["b"].func,setHideAddChannelButton:kt["b"].func,featureSeeMoreChannels:kt["b"].bool,featureModernizeInvites:kt["b"].bool,userAttentionIsOnChat:kt["b"].bool};var eo={isBooted:false,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:b.a.noop,onInviteClick:b.a.noop,onCreateChannelClick:b.a.noop,jumperCoachmarkState:null,historyNavigationEnabled:false,useHistoryNavigation:false,useGlobalNav:false,featureGlobalNavLayout:false,featureClassicNav:false,sidebarFoldersIsEnabled:false,ensureDraftChannelObjects:void 0,initializeFolderData:b.a.noop,initializeAppSuggestionLinksData:b.a.noop,createFolder:b.a.noop,dragFolderOrChannel:b.a.noop,ariaLandmarkLabel:null,featureSonicPresenceManager:false,featureSonicInputs:false,featureReactAllUnreads:false,telemeter:null,isWindowFocused:false,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},setHideInviteButton:b.a.noop,setHideAddChannelButton:b.a.noop,featureSeeMoreChannels:false,featureModernizeInvites:false,userAttentionIsOnChat:false};var to=function(e){Ot()(t,e);function t(e){ht()(this,t);var r=_t()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.ensureRowInView=r.ensureRowInView.bind(r);r.onResize=r.onResize.bind(r);r.onScroll=r.onScroll.bind(r);r.onItemSelect=r.onItemSelect.bind(r);r.onDragStart=r.onDragStart.bind(r);r.onDragEnd=r.onDragEnd.bind(r);r.onDragOver=r.onDragOver.bind(r);r.onDrop=r.onDrop.bind(r);r.onCreateFolder=r.onCreateFolder.bind(r);if(!Object(G["a"])()){r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onFocusWithin=r.onFocusWithin.bind(r)}r.state=h()({},r.getUnreadRows(e),{scrolledBelowFirstMention:false,scrolledBelowFirstUnread:false,scrolledAboveLastMention:false,scrolledAboveLastUnread:false,listHeight:0,hasInitializedFolderData:false,hasInitializedAppSuggestionLinksData:false});Object(G["a"])()||(r.state.hasKeyboardFocus=Zs.NOT_FOCUSED);r.presenceList=Object(wt["a"])(r.props.idsNeedingPresenceSubscription);r.commands=[{keys:["option+up"],handler:r.gotoNext.bind(r,"up",false)},{keys:["option+down"],handler:r.gotoNext.bind(r,"down",false)},{keys:["option+shift+up"],handler:r.gotoNext.bind(r,"up",true)},{keys:["option+shift+down"],handler:r.gotoNext.bind(r,"down",true)}];r.pendingEnsureRowInView=false;r.shouldTrackTTFMP=true;r.isSuggestedChannelsClogSent=false;r.hasInitializedDraftsData=false;return r}bt()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new Pt["a"];this.keyCommands.bindAll(this.commands);this.maybeLoadFolderData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();this.shouldTrackTTFMP=this.props.isWindowFocused}},{key:"componentWillReceiveProps",value:function e(t){var r=this;this.shouldTrackTTFMP=this.shouldTrackTTFMP&&t.isWindowFocused;if(!t.isBooted)return;if(!t.featureSonicPresenceManager&&!Object(Ct["a"])()&&!Object(ee["a"])(this.props.idsNeedingPresenceSubscription,t.idsNeedingPresenceSubscription)&&this.presenceList){this.presenceList.clear();this.presenceList.add(t.idsNeedingPresenceSubscription)}var a="SHOW_BUTTON"===t.jumperCoachmarkState||"HIDE_BUTTON"===t.jumperCoachmarkState;var n=this.props.rows.length&&t.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===t.rows[0].id)&&this.props.rows[0].id!==t.rows[0].id;(a||n)&&this.ChannelList&&this.ChannelList.Scrollbar&&this.ChannelList.Scrollbar.scrollTop(0);this.setState(function(e){var a=h()({},e,r.getUnreadRows(t));r.ChannelList&&r.ChannelList.resetCurrentScrollTopMaybe(a.listHeight,t.rows);return h()({},a,r.getBannerState(a))})}},{key:"componentWillUpdate",value:function e(t){Qs&&t.telemeter.mark(zs+"_mark")}},{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.selectedItemId,n=r.isBooted,i=r.jumperCoachmarkState,s=r.rows,o=r.suggestedChannelsMap,l=r.clogger,c=r.telemeter;var u="SHOW_BUTTON"===i||"HIDE_BUTTON"===i;var d=t.selectedItemId!==a;var p=n&&!t.isBooted;u||!d&&!p||this.ensureRowInView(a);this.maybeLoadFolderData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();Qs&&c.measureAndClear(zs+"_mark",zs);if(!this.isSuggestedChannelsClogSent&&Object.keys(o).length){var v=s.filter(function(e){return"channel"===e.type&&o[e.id]}).length;if(v&&l.track){this.isSuggestedChannelsClogSent=true;l.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:v})}}}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.createFolder()}},{key:"onDragStart",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var r=t.dataTransfer;r.effectAllowed="move";r.dropEffect="move";var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;var n={src:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:n}})}},{key:"onDragOver",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;t.preventDefault()}},{key:"onDrop",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var r=t.target;while(r&&!r.attributes["data-drag-type"])r=r.parentNode;this.setState(function(e){return{dragData:h()({},e.dragData,{dest:{type:r.attributes["data-drag-type"].value,id:r.attributes["data-drag-id"].value}})}})}},{key:"onDragEnd",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.dragFolderOrChannel(this.state.dragData);this.setState(function(){return{dragData:null}})}},{key:"onScroll",value:function e(){this.setState(this.getBannerState)}},{key:"onResize",value:function e(t){var r=this;var a=t.height;this.setState(function(e){var t=h()({},e,{listHeight:a});return h()({},t,r.getBannerState(t))},function(){false!==r.pendingEnsureRowInView&&r.ensureRowInView(r.pendingEnsureRowInView)})}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent,a=t.target,n=t.currentTarget;if(r&&"mousedown"===r.type)return;var i=a===n?Zs.CONTAINER_FOCUSED:Zs.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:i}})}},{key:"onFocusWithin",value:function e(){this.setState(function(){return{hasKeyboardFocus:Zs.FOCUS_WITHIN}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:Zs.NOT_FOCUSED}})}},{key:"onItemSelect",value:function e(t){return this.props.onItemSelect(t)}},{key:"setRef",value:function e(t){this.ChannelList=t}},{key:"getUnreadRows",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=t.rowsMap,a=t.unreadIds,n=t.mentionIds;return{firstUnread:r[b.a.first(a)],lastUnread:r[b.a.last(a)],firstMention:r[b.a.first(n)],lastMention:r[b.a.last(n)]}}},{key:"getBannerState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,r=t.firstMention,a=t.firstUnread,n=t.lastMention,i=t.lastUnread,s=t.listHeight;var o=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;var l=!!(a&&a.scrollBottom-Js<=o);var c=!!(i&&i.scrollTop+Js>=o+s);var u=!!(r&&r.scrollBottom-Js-(l?Xs:0)<=o);var d=!!(n&&n.scrollTop+Js+(c?Xs:0)>=o+s);return{scrolledBelowFirstMention:u,scrolledBelowFirstUnread:l,scrolledAboveLastMention:d,scrolledAboveLastUnread:c}}},{key:"maybeLoadFolderData",value:function e(){if(this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData){this.props.initializeFolderData();this.setState(function(e){return h()({},e,{hasInitializedFolderData:true})})}}},{key:"maybeLoadDraftsData",value:function e(){if(this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData){this.props.ensureDraftChannelObjects();this.hasInitializedDraftsData=true}}},{key:"maybeLoadAppSuggestionLinksData",value:function e(){if(!this.state.hasInitializedAppSuggestionLinksData&&this.props.initializeAppSuggestionLinksData!==b.a.noop){this.props.initializeAppSuggestionLinksData();this.setState(function(){return{hasInitializedAppSuggestionLinksData:true}})}}},{key:"ensureRowInView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId;var r=this.props,a=r.rows,n=r.rowsMap,i=r.rowIds;var s=n[t];if(!s)return;var o=this.ChannelList.currentScrollTop;var l=this.state.listHeight;if(0===l){this.pendingEnsureRowInView=t;return}this.pendingEnsureRowInView=false;var c=Math.max(i.indexOf(t)-Ys,0);var u=a[c].scrollTop;if(u<o){this.ChannelList.scrollToTarget(u);return}var d=Math.min(i.indexOf(t)+Ys,a.length-1);var p=a[d].scrollBottom-l;p>o&&this.ChannelList.scrollToTarget(p)}},{key:"gotoNext",value:function e(t,r,a){var n=this;var i=this.props,s=i.rows,o=i.rowIds,l=i.selectedItemId,c=i.featureSonicInputs,u=i.userAttentionIsOnChat;if(Object(G["a"])()){if(!u)return}else if(!Object(At["f"])())return;if(c){var d=Object(St["b"])(document.activeElement);if(d){if(!d.isEmpty()){if("up"===t&&(!d.isCursorAtBeginning||!d.isCursorAtBeginning()))return;if("down"===t&&(!d.isCursorAtEnd||!d.isCursorAtEnd()))return}}else if(Object(Mt["a"])(document.activeElement))return}else{var p=Object(It["c"])();var v=Object(Tt["e"])(p);if(Object(Tt["f"])(p)&&v>0){if(Object(Tt["h"])(p))return;var m=Object(Tt["b"])(p).start;if("up"===t&&0!==m)return;if("down"===t&&m!==v)return}}var f=o.indexOf(l);var g=b.a.filter(b.a.filter(b.a.map(s,function(e,t){return h()({},e,{index:t})}),function(e){return"channel"===e.type}),function(e){return!r||b.a.indexOf(n.props.unreadIds,e.id)>=0||b.a.indexOf(n.props.mutedMentionIds,e.id)>=0});if(0===g.length)return;var _=void 0;_="down"===t?b.a.find(g,function(e){return e.index>f}):b.a.findLast(g,function(e){return e.index<f});void 0===_&&(_="down"===t?b.a.first(g):b.a.last(g));this.props.onItemSelect(_.id);a&&a.preventDefault()}},{key:"renderFocusOutline",value:function e(){if(this.state.hasKeyboardFocus===Zs.CONTAINER_FOCUSED)return n.a.createElement("div",{className:"sectionfocusindicator"});return null}},{key:"render",value:function e(){if(!this.props.isBooted)return null;var t=this.props,r=t.rows,a=t.onInviteClick,i=t.onCreateChannelClick,s=t.selectedItemId,o=t.historyNavigationEnabled,l=t.useHistoryNavigation,c=t.useGlobalNav,u=t.featureGlobalNavLayout,d=t.featureClassicNav,p=t.featureReactAllUnreads,v=t.sidebarFoldersIsEnabled,m=t.ariaLandmarkLabel,f=t.telemeter,b=t.logger,g=t.bootType,_=t.teamId,y=t.featureModernizeInvites,O=t.featureSeeMoreChannels,k=t.clogger,E=t.userAttentionIsOnChat;var j=this.state,C=j.scrolledBelowFirstMention,S=j.scrolledBelowFirstUnread,w=j.scrolledAboveLastMention,I=j.scrolledAboveLastUnread,T=j.firstMention,A=j.firstUnread,N=j.lastMention,P=j.lastUnread;var R=!Object(G["a"])()&&this.state.hasKeyboardFocus!==Zs.NOT_FOCUSED;var M=Object(G["a"])()||this.state.hasKeyboardFocus!==Zs.CONTAINER_FOCUSED?null:"-1";var x=jt()("p-channel_sidebar",{focusablesection:!Object(G["a"])()&&R,"p-channel_sidebar--global_nav":c,"p-channel_sidebar--global_nav_layout":u,"p-channel_sidebar--classic_nav":d});var D=null;c&&(D=u?n.a.createElement(Rt["a"],null):n.a.createElement("div",{className:"p-global_nav__sidebar_divider"}));var F=Object(G["a"])()?{}:{"data-is-focusable-section":true,tabIndex:M};var L=n.a.createElement("nav",h()({className:x,"data-qa-channel-sidebar":true,"data-qa-channel-sidebar-selected-item-id":s,"aria-labelledby":m},F),n.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},Ks.t("Channel Sidebar")),!c&&n.a.createElement(Vs["a"],null),D,o&&n.a.createElement(vr,{useHistoryNavigation:l}),n.a.createElement("div",{className:"p-channel_sidebar__list"},n.a.createElement(Ws,{position:"top",isShowing:C||S,isMention:C,linkedId:C&&T.id||S&&A.id,ensureRowInView:this.ensureRowInView}),n.a.createElement(Bs,{rows:r,onItemSelect:this.onItemSelect,onInviteClick:a,onCreateChannelClick:i,onScroll:this.onScroll,onResize:this.onResize,featureReactAllUnreads:p,sidebarFoldersIsEnabled:v,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:f,logger:b,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:g,teamId:_,setHideInviteButton:this.props.setHideInviteButton,setHideAddChannelButton:this.props.setHideAddChannelButton,featureModernizeInvites:y,featureSeeMoreChannels:O,clogger:k,userAttentionIsOnChat:E}),n.a.createElement(Ws,{position:"bottom",isShowing:w||I,isMention:w,linkedId:w&&N.id||I&&P.id,ensureRowInView:this.ensureRowInView})),Object(G["a"])()?null:this.renderFocusOutline());return Object(G["a"])()?L:n.a.createElement(Nt["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},L)}}]);return t}(a["PureComponent"]);to.displayName="ChannelSidebar";to.defaultProps=eo;var ro=to;var ao=10;var no="react_channel_sidebar_selector_factory";var io=Object(Q["a"])(1);var so=function e(t,r){return io&&Object(_["c"])({state:r}).mark(t+"_mark")};var oo=function e(t,r){return io&&Object(_["c"])({state:r}).measureAndClear(t+"_mark",t)};var lo=function e(t){if(Object(E["g"])(t,"add_channel_prompt_dismissed"))return false;var r=Object(A["l"])(t);if(r)return false;var a=!!Object(E["e"])(t);if(a)return true;var n=Object(C["b"])(t)||{};var i=Object.keys(n);var s=0;for(var o=0;o<i.length;o++){Object(S["isUserInChannel"])(n[i[o]])&&(s+=1);if(s>ao)return false}return true};var co=function e(t){var r=Object(N["d"])(t);if(Object(P["isEnterpriseTeam"])(r)||!Object(B["canUserSeeInviteModal"])(t))return false;var a=b.a.size(b.a.filter(Object(A["a"])(t),function(e){return!e.is_slackbot}));if(Object(E["g"])(t,"channel_sidebar_hide_invite"))return false;if(a>=2)return"dim";return true};var uo=function e(t){var r=Object(Y["b"])(t);var a=Object(J["a"])(t);var n=xe(t),i=n.sidebarSections,s=n.sidebarSectionsOrdered,o=n.idsNeedingPresenceSubscription;var l="enabled"===Object(d["getGroupForUser"])(t,"folders_sidebar")&&Object(E["g"])(t,"folders_enabled");var c=l?Object(k["getFolders"])(t):[];var u=Object(R["isFeatureEnabled"])(t,"feature_pages");var p=it({hasQuickswitcherButton:!r&&!a&&Object(E["g"])(t,"show_sidebar_quickswitcher_button"),hasAllUnreadsLink:true===Object(E["g"])(t,"enable_unread_view"),hasAddAChannelLink:lo(t),hasInvitePeopleLink:co(t),hasSearchLink:Object(X["a"])(t),appSuggestionsCount:dt(t),hasUpgradeSlackLink:vt(t),sidebarSectionsOrdered:s,sidebarSections:i,sidebarFoldersIsEnabled:l,sidebarFolders:c,pages:u&&Object($["a"])().filter(function(e){return Object($["d"])(t,e)}),featurePages:u,featureReactAllUnreads:Object(R["isFeatureEnabled"])(t,"feature_react_all_unreads")}),v=p.rows,m=p.rowsMap,h=p.rowIds;return{rows:v,rowsMap:m,rowIds:h,idsNeedingPresenceSubscription:o}};var po=function e(t){var r=void 0;var a=void 0;var n=void 0;var i=void 0;var s=void 0;var o=void 0;var l=void 0;var c=void 0;var u=void 0;var p=void 0;var v=void 0;var m=void 0;var f=void 0;var A=void 0;var N=void 0;var P=void 0;var B=void 0;return function(e,q){so(no,e);var H=Object(y["isFullyBooted"])(e);var W=Object(g["a"])({state:e});var V=Object(L["a"])({state:e});var Q=Object(_["c"])({state:e});var X=Object(F["isWindowFocused"])(e);var $=Object(F["getBootType"])(e);if(!H)return{isBooted:H,isWindowFocused:X};var te=Object(x["a"])(e);var re=q.onItemSelect;var ae=uo(e),ne=ae.rows,ie=ae.rowsMap,se=ae.rowIds,oe=ae.idsNeedingPresenceSubscription;var le=dt(e);var ce=b.a.filter(se,function(t){return Object(C["w"])(e,t)&&!Object(w["isChannelMutedById"])(e,t)});var ue=b.a.filter(se,function(t){return Object(C["x"])(e,t)&&!Object(w["isChannelMutedById"])(e,t)});var de=b.a.filter(se,function(t){return Object(C["w"])(e,t)&&Object(w["isChannelMutedById"])(e,t)});if(Object(R["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){Object(T["getThreadsMentionCount"])(e)&&ce.unshift("Vall_threads");Object(T["hasUnreadThreads"])(e)&&ue.unshift("Vall_threads")}else{Object(I["getThreadsMentionCount"])(e)&&ce.unshift("Vall_threads");Object(I["hasUnreadThreads"])(e)&&ue.unshift("Vall_threads")}var pe=Object(Z["e"])(e);var ve=Object(O["getJumperCoachmarkState"])(e);var me=Object(E["g"])(e,"sidebar_behavior");var he="enabled"===Object(d["getGroupForUser"])(e,"folders_sidebar")&&Object(E["g"])(e,"folders_enabled");var fe=Object(J["a"])(e);var be=Object(J["b"])(e);var ge=Object(Y["b"])(e);var _e=Object(R["isFeatureEnabled"])(e,"feature_global_nav_layout");var ye=Object(R["isFeatureEnabled"])(e,"feature_sonic_inputs");var Oe=Object(R["isFeatureEnabled"])(e,"feature_classic_nav");var ke=Object(R["isFeatureEnabled"])(e,"feature_sonic_presence_manager");var Ee=Object(R["isFeatureEnabled"])(e,"feature_degraded_send");var je=Object(R["isFeatureEnabled"])(e,"feature_react_all_unreads");var Ce=Object(R["isFeatureEnabled"])(e,"feature_see_more_channels");var Se=Object(R["isFeatureEnabled"])(e,"feature_modernize_invites");var we=b.a.some(ne,function(e){return"addAChannelLink"===e.type});var Ie=Object(z["b"])(e);var Te=Object(S["getSuggestedChannels"])(e);var Ae=Te.join(",");if(te===a&&Object(ee["a"])(ue,n)&&Object(ee["a"])(ce,i)&&Object(ee["a"])(de,s)&&Object(ee["a"])(se,o)&&ve===l&&me===c&&he===u&&ge===p&&_e===v&&Oe===m&&Object(ee["a"])(q,f)&&we===A&&Ae===N&&pe===P&&le===B)return r;var Ne=h()({},q,{isBooted:H,rows:ne,rowsMap:ie,rowIds:se,selectedItemId:te,unreadIds:ue,mentionIds:ce,mutedMentionIds:de,userAttentionIsOnChat:pe,jumperCoachmarkState:ve,historyNavigationEnabled:fe,useHistoryNavigation:be,useGlobalNav:ge,featureGlobalNavLayout:_e,featureClassicNav:Oe,idsNeedingPresenceSubscription:oe,featureSonicPresenceManager:ke,featureSonicInputs:ye,featureReactAllUnreads:je,featureSeeMoreChannels:Ce,featureModernizeInvites:Se,sidebarFoldersIsEnabled:he,ensureDraftChannelObjects:function e(){return t(K())},initializeFolderData:function e(){return t(Object(k["initializeFolderData"])())},initializeAppSuggestionLinksData:function e(){return t(Object(O["initializeAppSuggestionLinksData"])())},dragFolderOrChannel:function e(r){var a=r.src,n=r.dest;t(Object(k["dragFolderOrChannel"])({src:a,dest:n}));t(Object(k["saveFolderData"])())},createFolder:function e(){return t(Object(k["createFolder"])())},setHideInviteButton:function e(){V.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});V.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});return t(Object(j["d"])({pref:"channel_sidebar_hide_invite",value:true}))},setHideAddChannelButton:function e(){return t(Object(j["d"])({pref:"add_channel_prompt_dismissed",value:true}))},onItemSelect:function e(r){W.info("CHANNEL-SIDEBAR","onItemSelect",r);Ee&&te===r&&t(Object(U["a"])({channelId:r}));if(Object(G["a"])()){t(Object(D["a"])({id:r}));t(Object(M["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:r}))}else re&&re(r).then(function(){t(Object(M["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:r}))}).catch(b.a.noop)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:W,clogger:V,telemeter:Q,isWindowFocused:X,bootType:$,teamId:Ie,suggestedChannelsMap:Te.reduce(function(e,t){e[t]=t;return e},{})});r=Ne;a=te;n=ue;i=ce;s=de;o=se;l=ve;c=me;u=he;p=ge;v=_e;m=Oe;f=q;A=we;N=Ae;P=pe;B=le;oo(no,e);return Ne}};var vo={withRef:true};var mo=Object(i["connectAdvanced"])(po,vo)(ro);var ho=mo;var fo=r(573);var bo=r(4195);var go=r(163);var _o="react_channel_sidebar_display_item";var yo=Object(Q["a"])(1);var Oo=function e(t,r,a){var n=Object(_["c"])({state:r()});yo&&n.mark(_o+"_mark");document&&document.activeElement&&document.activeElement.blur();return t(Object(c["a"])({id:a})).catch(function(e){Object(fo["c"])("beep");Object(g["a"])({getState:r}).error(e,"displayModelOrViewById errored",{subtype:"displayModelOrViewById_beep"});throw e}).finally(function(){yo&&n.measureAndClear(_o+"_mark",_o)})};var ko=function e(t){return Object(v["a"])({source:"channel_sidebar"},t,true)};var Eo=function e(t,r,a){if(!t)throw new Error("mountChannelSidebar must be called with a teamId parameter");var c=Object(o["d"])(t);var v=c.getState();var m=Object(d["getGroupForUser"])(v,"speedy_sidebar_boot");"experiment"===m&&c.dispatch(Object(l["bulkAddChannels"])({channels:Object(u["a"])()}));var h=function e(t){return Oo(c.dispatch,c.getState,t)};var f=Object(L["a"])({state:v});var b=Object(R["isFeatureEnabled"])(v,"feature_modernize_invites")?function(){f.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}});c.dispatch(Object(bo["a"])({source:"channel_sidebar"}))}:ko;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(go["a"],null,n.a.createElement(ho,{onItemSelect:h,onCreateChannelClick:p["d"],onInviteClick:b,ref:a}))),r)};var jo={onInviteClickLegacy:ko};var Co=Eo;var So=r(44);Object(So["a"])("interop.mountChannelSidebar",Co)},,,,function(e,t,r){"use strict";r.r(t);var a=r(588);var n=r(589);var i=r(590);var s=r(591);var o=r(592);var l=r(593);var c=r(594);var u=r(595);var d=r(596);var p=r(597);var v=r(598);var m=r(599);var h=r(600);var f=r(601);var b=r(602);var g=r(603);var _=r(604);var y=r(605);var O=r(606);var k=r(607);var E=r(608);var j=r(609);var C=r(610);var S=r(611);var w=r(612);var I=r(613);var T=r(614);var A=r(615);var N=r(616);var P=r(617);var R=r(618);var M=r(619);var x=r(620);var D=r(621);var F=r(622);var L=r(623);var B=r(624);var U=r(625);var q=r(626);var G=r(627);var H=r(628);var W=r(629);var V=r(630);var K=r(631);var z=r(632);var Q=r(633);var Y=r(634);var J=r(635);var X=r(636);var Z=r(637);var $=r(638);var ee=r(639);var te=r(640);var re=r(641);var ae=r(642);var ne=r(643);var ie=r(644);var se=r(645);var oe=r(646);var le=r(510);var ce=r(647);var ue=r(648);var de=r(649);var pe=r(650);var ve=r(651);var me=r(652);var he=r(653);var fe=r(654);var be=r(655);var ge=r(656);var _e=r(657);var ye=r(658);var Oe=r(659);var ke=r(660);var Ee=r(661);var je=r(662);var Ce=r(663);var Se=r(664);var we=r(665);var Ie=r(666);var Te=r(667);var Ae=r(668);var Ne=r(669);var Pe=r(670);var Re=r(671);var Me=r(672);var xe=r(673);var De=r(674);var Fe=r(675);var Le=r(676);var Be=r(677);var Ue=r(678);var qe=r(679);var Ge=r(680);var He=r(1);var We=r.n(He);var Ve=r(88);var Ke=r.n(Ve);var ze=r(701);var Qe=r(3);var Ye=r.n(Qe);var Je=r(6);var Xe=r.n(Je);var Ze=r(7);var $e=r.n(Ze);var et=r(8);var tt=r.n(et);var rt=r(9);var at=r.n(rt);var nt=r(13);var it=r(16);var st=r.n(it);var ot=r(0);var lt=r(10);var ct=r(4);var ut=r(180);var dt=r(73);var pt=r(19);var vt=r(66);var mt=r(128);var ht=r(22);var ft=r(50);var bt=r(1728);var gt=r(2);var _t=r(34);var yt=r(132);var Ot=r(1045);var kt=r(139);var Et=r(11);var jt=r(1102);var Ct=r(553);var St=r(794);var wt=r(1846);var It=r(1217);var Tt=r(21);var At=r(45);var Nt=r(1714);var Pt=new lt["b"]("do_not_disturb");var Rt={inDndBySnooze:ot["b"].bool.isRequired,snoozeNotifications:ot["b"].func.isRequired,endDndSnooze:ot["b"].func.isRequired,endDndSchedule:ot["b"].func.isRequired,snoozeEndTs:ot["b"].number,dndEndTs:ot["b"].number,do24hrTime:ot["b"].bool,currentChannel:ot["b"].object,menuProps:ot["b"].object,openPrefsModal:ot["b"].func,openDndDialog:ot["b"].func,openChannelNotificationPrefsModal:ot["b"].func,clogger:ot["b"].object,setUserPrefByApi:ot["b"].func,showNotificationScheduleNewBadge:ot["b"].bool,featureGranularDnd:ot["b"].bool};var Mt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,currentChannel:{},menuProps:{},openPrefsModal:gt["noop"],openDndDialog:gt["noop"],openChannelNotificationPrefsModal:gt["noop"],clogger:{track:gt["noop"]},showNotificationScheduleNewBadge:false,setUserPrefByApi:gt["noop"],featureGranularDnd:false};var xt=function(e){at()(t,e);function t(e){Xe()(this,t);var r=tt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSubmenu=r.renderSubmenu.bind(r);r.onClickDoNotDisturbSchedule=r.onClickDoNotDisturbSchedule.bind(r);r.onClickNotificationPreferences=r.onClickNotificationPreferences.bind(r);return r}$e()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,r=t.featureGranularDnd,a=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});r&&a&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderDndMenuHeader",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.snoozeEndTs,n=t.dndEndTs,i=t.do24hrTime,s=t.featureGranularDnd;var o=r?a:n;var l=Object(jt["b"])(o,{do24hrTime:i});var c=st()({"p-dnd_menu__snooze_header":r||s,"p-dnd_menu__schedule_header":!r&&!s});return We.a.createElement("div",{className:c},We.a.createElement("div",{className:"p-dnd_menu__header_status"},We.a.createElement("div",null,We.a.createElement("strong",null,s?Pt.t("Do Not Disturb"):Pt.t("Do Not Disturb: ON"))),We.a.createElement("div",null,l)))}},{key:"renderSubmenu",value:function e(t){var r=this;var a=this.props.clogger;return We.a.createElement(vt["f"],Ye()({},t,{width:200}),We.a.createElement(vt["b"],{label:Pt.t("30 minutes"),onSelected:function e(){var t=30;r.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:30m"});a.track(Tt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["i"].DURATION_30_MINUTES,dnd_snooze_type:Tt["j"].SNOOZE_ADJUST})}}),We.a.createElement(vt["b"],{label:Pt.t("1 hour"),onSelected:function e(){var t=60;r.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:1hr"});a.track(Tt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["i"].DURATION_1_HOUR,dnd_snooze_type:Tt["j"].SNOOZE_ADJUST})}}),We.a.createElement(vt["b"],{label:Pt.t("2 hours"),onSelected:function e(){var t=120;r.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:2hr"});a.track(Tt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["i"].DURATION_2_HOURS,dnd_snooze_type:Tt["j"].SNOOZE_ADJUST})}}),We.a.createElement(vt["b"],{label:Pt.t("4 hours"),onSelected:function e(){var t=240;r.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:4hr"});a.track(Tt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["i"].DURATION_4_HOURS,dnd_snooze_type:Tt["j"].SNOOZE_ADJUST})}}),We.a.createElement(vt["b"],{label:Pt.t("Until tomorrow"),onSelected:function e(){var t=Object(jt["d"])();r.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:tomorrow"});a.track(Tt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["i"].DURATION_TOMORROW,dnd_snooze_type:Tt["j"].SNOOZE_ADJUST})}}),We.a.createElement(vt["b"],{label:Pt.t("Until next week"),onSelected:function e(){var t=Object(jt["c"])();r.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:week"});a.track(Tt["l"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["i"].DURATION_NEXT_WEEK,dnd_snooze_type:Tt["j"].SNOOZE_ADJUST})}}),We.a.createElement(vt["b"],{label:Pt.t("Custom\u2026"),onSelected:function e(){r.props.openDndDialog();a.track(Tt["l"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}},{key:"renderAdjustMenuItem",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.featureGranularDnd;if(r||a)return We.a.createElement(Ot["a"],{label:Pt.t("Adjust time"),renderSubmenu:this.renderSubmenu});return We.a.createElement(vt["b"],{label:Pt.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var r=this.props.currentChannel;if(!r.id||Object(Et["isIm"])(r))return null;var a=We.a.createElement(kt["a"],{channelId:r.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=Pt.rt("Settings for {name}\u2026",{name:We.a.createElement("strong",null,a),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return We.a.createElement(vt["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:r.id})}})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.inDndBySnooze,n=r.menuProps,i=r.featureGranularDnd,s=r.showNotificationScheduleNewBadge;var o=void 0;var l=void 0;if(i){o=We.a.createElement("span",{className:"p-dnd_menu__new_pill"},Pt.t("NEW"));l=s?We.a.createElement("span",null,Pt.t("Notification schedule\u2026")," ",o):Pt.t("Notification schedule\u2026")}var c=function e(){a?t.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):t.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})};return We.a.createElement("div",null,this.renderDndMenuHeader(),We.a.createElement(vt["f"],Ye()({},n,{menuClassNames:"p-dnd_menu"}),We.a.createElement(vt["b"],{label:i?Pt.t("Turn off"):Pt.t("Resume notifications now"),onSelected:c,danger:i}),this.renderAdjustMenuItem(),We.a.createElement(vt["d"],null),i&&We.a.createElement(vt["b"],{label:i?l:Pt.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&this.renderSettingsMenuItem(),!i&&We.a.createElement(vt["b"],{label:Pt.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences})))}}]);return t}(He["PureComponent"]);xt.displayName="DndEnabledMenu";xt.defaultProps=Mt;var Dt=function e(t){var r=Object(ct["getCurrentUserId"])(t);var a=Object(ut["getDndScheduleByMemberId"])(t,r),n=a.nextDndEndTs;var i=Object(ut["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(_t["g"])(t,"time24"),clogger:Object(At["a"])({state:t}),featureGranularDnd:Object(ct["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(_t["g"])(t,"dnd_notification_schedule_new_badge_seen")}};var Ft=function e(t){return{snoozeNotifications:function e(r){return t(Object(Ct["e"])(r))},openDndDialog:function e(){return t(Object(wt["a"])())},endDndSnooze:function e(r){return t(Object(Ct["b"])(r))},endDndSchedule:function e(r){return t(Object(Ct["a"])(r))},openChannelNotificationPrefsModal:function e(r){return t(Object(It["a"])(r))},setUserPrefByApi:function e(r){return t(Object(yt["d"])(r))},openPrefsModal:function e(r){return t(Object(St["a"])(r))}}};var Lt=Object(nt["connect"])(Dt,Ft)(xt);var Bt=new lt["b"]("do_not_disturb");var Ut={inDnd:ot["b"].bool.isRequired,currentChannel:ot["b"].object,className:ot["b"].string,featureGranularDnd:ot["b"].bool,featureClassicNav:ot["b"].bool};var qt={currentChannel:{},className:void 0,featureGranularDnd:false,featureClassicNav:false};var Gt=function(e){at()(t,e);function t(e){Xe()(this,t);var r=tt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}$e()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.inDnd,n=r.currentChannel,i=r.featureClassicNav;var s=void 0;i&&(s={menuProps:Ye()({},t,{onMenuItemSelected:function e(r,a){a.stopPropagation();t.onMenuItemSelected(r,a)}})});if(a)return We.a.createElement(Lt,Ye()({currentChannel:n,menuProps:t},s));return We.a.createElement(bt["a"],Ye()({currentChannel:n,menuProps:t},s))}},{key:"render",value:function e(){var t=this.props,r=t.inDnd,a=t.className,n=t.featureGranularDnd;var i=r?"snooze-outline":"bell-o";return We.a.createElement(vt["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8},We.a.createElement(ft["c"],{tip:n?Bt.t("Do Not Disturb"):Bt.t("Notifications"),position:"bottom"},We.a.createElement(mt["a"],{className:st()("p-dnd_button",a),"data-qa":"do_not_disturb_btn","aria-label":n?Bt.t("Do Not Disturb"):Bt.t("Notifications")},We.a.createElement(ht["b"],{type:i}))))}}]);return t}(He["PureComponent"]);Gt.displayName="DndButton";Gt.defaultProps=qt;var Ht=function e(t){var r=Object(dt["a"])(t);return{inDnd:!!Object(ut["getCurrentMemberDnd"])(t),currentChannel:Object(pt["d"])(t,r)||void 0,featureGranularDnd:Object(ct["isFeatureEnabled"])(t,"feature_granular_dnd"),featureClassicNav:Object(ct["isFeatureEnabled"])(t,"feature_classic_nav")}};var Wt=Object(nt["connect"])(Ht)(Gt);var Vt=r(350);var Kt=r(89);var zt=r(1505);var Qt=r(3584);var Yt=r(1302);var Jt=r(24);var Xt=r(17);var Zt=r(4608);var $t=r(31);var er=r(35);var tr=r(100);var rr=r(532);var ar=r(1285);var nr=r(1455);var ir=r(1490);var sr=r(1457);var or=r(1458);var lr=r(1459);var cr=r(1316);var ur=r(807);var dr=r(251);var pr=r(1662);var vr=r(187);var mr=r(384);var hr=r(93);var fr=r(1682);var br=new lt["b"]("member_profile");var gr={memberId:ot["b"].string.isRequired,onMenuItemSelected:ot["b"].func,canRemoveFromChannel:ot["b"].bool,channelId:ot["b"].string,dispatchOpenRemoveMemberDialog:ot["b"].func.isRequired,featureModernProfileFlexpane:ot["b"].bool};var _r={onMenuItemSelected:gt["noop"],canRemoveFromChannel:false,channelId:void 0,featureModernProfileFlexpane:false};function yr(e){var t=e.memberId,r=e.onMenuItemSelected,a=e.canRemoveFromChannel,n=e.channelId,i=e.dispatchOpenRemoveMemberDialog,s=e.featureModernProfileFlexpane;if(a&&n){var o=We.a.createElement("strong",null,We.a.createElement(kt["a"],{className:"p-member_profile_card__context_action_channel_name",inline:true,channelId:n,iconProps:{inherit:true,align:"baseline"}}));var l=s?br.rt("Remove from {channelName}",{channelName:o}):"";var c=function e(){i({memberId:t,channelId:n});r()};var u="member_profile_card_remove_from_channel";return We.a.createElement("div",{className:"p-member_profile_card__context_action_container"},We.a.createElement(vr["a"],{className:"p-member_profile_card__context_action","data-qa":u,onClick:c},l))}return null}yr.defaultProps=_r;function Or(e,t){var r=t.memberId,a=t.viewContext;var n=Object(fr["a"])(e,a),i=n.channelId;var s=i&&Object(dr["getChannelMembershipInfoForUser"])(e,i,r);var o=Object(ct["getCurrentUserId"])(e)===r;var l=!o&&s&&s.isKnown&&s.isMember&&Object(hr["h"])(e,i)&&Object(Xt["canMemberBeRemoved"])(e,r);return{canRemoveFromChannel:l,channelId:i,featureModernProfileFlexpane:Object(ct["isFeatureEnabled"])(e,"feature_modern_profile_flexpane")}}var kr={dispatchOpenRemoveMemberDialog:function e(){return pr["a"].apply(void 0,arguments)}};var Er=Object(mr["b"])(Object(nt["connect"])(Or,kr)(yr));var jr=r(2024);var Cr=new lt["b"]("member_profile");var Sr={currentMember:ot["b"].object,member:ot["b"].object,memberTeam:ot["b"].object,onClose:ot["b"].func,showMemberProfile:ot["b"].func,team:ot["b"].object,includeRemoveFromChannelAction:ot["b"].bool,canInteract:ot["b"].bool};var wr={currentMember:void 0,member:void 0,memberTeam:void 0,onClose:gt["noop"],showMemberProfile:gt["noop"],team:void 0,includeRemoveFromChannelAction:false,canInteract:true};function Ir(e){var t=e.currentMember,r=e.member,a=e.memberTeam,n=e.onClose,i=e.showMemberProfile,s=e.team,o=e.includeRemoveFromChannelAction,l=e.canInteract;var c=Object(ar["a"])(function(){var e=[ur["a"].STATUS];t!==r&&e.push(ur["a"].TIME);return e},[t,r]);var u=Object(rr["a"])(),d=u.featureEscGridMigrationsClient,p=u.featureModernProfileFlexpane;if(!p)return null;var v=We.a.createElement(nr["a"],{className:"p-member_profile_card__picture",member:r});var m=We.a.createElement(sr["a"],{className:"p-member_profile_card__restriction",member:r,team:a});var h=We.a.createElement(cr["a"],{className:"p-member_profile_card__name",member:r});if(d&&Object($t["isUnavailable"])(a))return We.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},We.a.createElement("div",{className:"p-member_profile_card__header"},v,m),h,We.a.createElement(or["a"],{memberTeam:a}));if(!l)return We.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},We.a.createElement("div",{className:"p-member_profile_card__header"},v,m),h,We.a.createElement(lr["a"],{member:r}));return We.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},We.a.createElement("div",{className:"p-member_profile_card__header"},We.a.createElement(mt["a"],{className:"p-member_profile_card__picture_trigger","data-qa":"member_profile_card_photo",onClick:function e(){i({memberId:r.id});n()}},We.a.createElement("span",{className:"p-member_profile_card__picture_hint"},Cr.t("Click to view profile")),v),m),We.a.createElement(cr["a"],{className:"p-member_profile_card__name",member:r,onClick:function e(){i({memberId:r.id});n()}}),We.a.createElement(ur["b"],{member:r,onClick:n,team:s,types:c}),We.a.createElement(ir["a"],{className:"p-member_profile_card__buttons",member:r,onClick:n,showCallButton:true}),o?We.a.createElement(Er,{memberId:r.id,onMenuItemSelected:n}):null)}Ir.displayName="MemberProfileCard";Ir.defaultProps=wr;function Tr(e,t){var r=t.memberId;var a=Object(Jt["d"])(e,r);if(!a)return{};var n=Object(ct["isFeatureEnabled"])(e,"feature_stranger_danger")?Object(Zt["canMemberInteractById"])(e,r):!Object(Xt["isStranger"])(a);return{currentMember:Object(Jt["b"])(e),member:a,memberTeam:Object(er["j"])(e,Object(Xt["getMemberTeamId"])(a)),team:Object(er["d"])(e),canInteract:n}}var Ar={showMemberProfile:function e(){return tr["j"].apply(void 0,arguments)}};var Nr=Object(nt["connect"])(Tr,Ar)(Ir);var Pr=Nr;var Rr=r(199);var Mr=r(23);var xr=r(432);var Dr={menuProps:ot["b"].object,serviceId:ot["b"].string,memberId:ot["b"].string,homeWorkspaceId:ot["b"].string,memberIsHuman:ot["b"].bool,includeRemoveFromChannelAction:ot["b"].bool};var Fr={serviceId:void 0,memberId:void 0,homeWorkspaceId:void 0,menuProps:void 0,memberIsHuman:false,includeRemoveFromChannelAction:false};function Lr(e){var t=e.serviceId,r=e.memberId,a=e.homeWorkspaceId,n=e.menuProps,i=e.memberIsHuman,s=e.includeRemoveFromChannelAction;if(t&&!i)return We.a.createElement(Yt["a"],{serviceId:t,memberId:r,homeWorkspaceId:a,menuProps:n});if(r&&i){var o=n||{},l=o.onClose;return We.a.createElement(Pr,{memberId:r,onClose:l,includeRemoveFromChannelAction:s})}return null}Lr.defaultProps=Fr;var Br={userId:ot["b"].string,botId:ot["b"].string,botProfile:ot["b"].object};var Ur=function e(t,r){var a=r.userId,n=r.botId,i=r.botProfile;var s=Object(Rr["maybeGetBotAndMemberByIds"])(t,{userId:a,botId:n,botProfile:i}),o=s.member,l=s.bot,c=s.memberIsHuman;var u=Object(Mr["b"])(t);var d=Object(xr["getTeamIdFromBotOrUser"])({member:o,bot:l,botProfile:i,currentTeamId:u});return{serviceId:l&&l.id,memberId:o&&o.id,homeWorkspaceId:d,memberIsHuman:c}};var qr=Object(nt["connect"])(Ur)(Lr);qr.propTypes=Br;var Gr=function e(t){return We.a.createElement(qr,t)};Gr.displayName="renderProfileCard";var Hr=qr;var Wr=r(3989);Wr["a"].register(Qt["a"]);Wr["b"].register(Gr);Object(Vt["a"])({ToastContainer:ze["a"],DndButton:Wt});Object(zt["a"])(r(2822));window.React=We.a;window.ReactDOM=Ke.a;window.moment=Kt["a"]},,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(3);var n=r.n(a);var i=r(2);var s=r.n(i);var o=r(37);var l=r.n(o);var c=r(42);var u=r(901);var d=r(58);var p=r.n(d);var v=r(6);var m=r.n(v);var h=r(7);var f=r.n(h);var b=r(45);var g=function(){function e(){m()(this,e)}f()(e,[{key:"reportLocale",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getLocaleInformation"])();t&&Object(b["a"])().track("SYSTEM_LOCALE",t)}},{key:"reportCrash",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getCrashInformation"])();t&&Object(b["a"])().track("DESKTOP_CRASH",t)}},{key:"reportHang",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getHangInformation"])();t&&Object(b["a"])().track("DESKTOP_HANG",t)}},{key:"reportDisplays",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getDisplayInformation"])();if(!t||!t.displays||!t.windowFrame)return;var r=t.displays,a=t.windowFrame;var n=a.size,i=a.position;var s=p()(n,2),o=s[0],l=s[1];var u=p()(i,2),d=u[0],v=u[1];var m=[o||0,l||0,d||0,v||0];var h=[];r.forEach(function(e){if(e&&e.size&&e.size.width&&e.size.height){h.push(e.size.width);h.push(e.size.height)}h.push(e.scaleFactor||1)});Object(b["a"])().track("DISPLAY_INFO",{display_resolutions:h,window_frame:m})}}]);return e}();var _=r(30);var y=function(){function e(){m()(this,e)}f()(e,[{key:"updateElements",value:function e(t){var r=this;var a=[];Array.isArray(t)&&t.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return a.push(r.updateElement(e))});return a}},{key:"updateElement",value:function e(t,r){var a=r||t.id||t.type+"."+t.classList.toString().replace(/ /g,".");var n=t.getBoundingClientRect();var i={id:a,width:Math.round(n.width+2),height:Math.round(n.height+2),top:Math.round(n.top),left:Math.round(n.left)};var s=Object(_["isSSBAndAtLeastVersion"])("3.0.0");if(i.width<2&&i.height<2&&s){var o=Object(c["getNoDragRegions"])();var l=o.filter(function(e){return e.id!==i.id});o.length>l.length&&Object(c["updateNoDragRegion"])(l)}else Object(c["updateNoDragRegion"])(i);return i}}]);return e}();var O=r(1786);var k=r(298);var E=r(1767);var j=r(168);var C=r(1771);var S=r(20);var w=Object(S["b"])("TS.inline_videos.maybeStopInlineVideoPlayback");var I=r(1367);var T=r(407);var A=r(1047);var N=r(100);var P=r(4196);var R=r(794);var M=r(1518);var x=r(850);var D=r(683);var F=r(4);var L=r(193);var B=r(34);var U=r(309);var q=r(73);var G=r(23);var H=r(24);var W=r(67);var V=r(35);var K=r(31);var z=r(690);var Q=r(311);var Y=r(12);var J=r(1292);var X=r(181);var Z=r(294);var $=r(60);var ee={},te=ee.setFocusedWorkspace,re=ee.focusNextWorkspace,ae=ee.focusPreviousWorkspace;var ne=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//];var ie=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,}|U[A-Z0-9]{8,})\/F[A-Z0-9]{8,}(\/[a-zA-Z0-9_]+)?/];var se=Object(Y["b"])();function oe(){return Object(D["setScreenReaderEnabled"])(Object(c["isScreenReaderEnabled"])())}function le(e,t){if(!t)return false;if(t.startsWith("chrome://"))return true;if(Object($["isGantryUrl"])(t))return true;if(ne.some(function(e){return e instanceof RegExp?e.test(t):t.startsWith(e)}))return true;var r=Object(K["getTeamUrl"])(Object(V["d"])(e));var a=Object($["parseUrl"])(t);var n=a.hostname;return ie.some(function(e){if(e instanceof RegExp&&Object($["isValidSlackHostName"])(n)&&e.test(t))return t.startsWith(a.protocol+"//"+a.hostname);return e instanceof RegExp?t.startsWith(""+r)&&e.test(t):t.startsWith(""+r+e)})}function ce(e,t,r,a){se.info("DESKTOP","notificationActivated",{channelId:t,messageTs:r,threadTs:a});e(Object(u["a"])({channelId:t,messageTs:r,threadTs:a}))}function ue(e){var t=Object(q["a"])(e);var r=[];if(t){r=Object(i["take"])(Object(i["values"])(Object(W["b"])(e,t)),50);Object(_["isMac"])()||Object(_["isSSBAndAtLeastVersion"])("3.3.0")||(r=r.map(function(e){return e.subtype?e:Object(i["omit"])(e,"subtype")}))}return{user_id:Object(F["getCurrentUserId"])(e),msgs:r}}function de(){var e=void 0;var t=void 0;var r=void 0;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];if(4===n.length){e=n[0];t=n[1];r=n[3]}else{e=n[0];t=n[1];r=n[2]}return Object(M["a"])({channelId:e,text:t,replyToTs:r})}function pe(e){return Object(H["b"])(e).name}function ve(e){try{var t=JSON.parse(Object(B["g"])(e,"sidebar_theme_custom_values"));return Object(X["b"])(e)?n()({},t,Object(X["a"])(t)):t}catch(e){return Q["a"]}}function me(){var e=document.activeElement;var t=Object(T["b"])(e);return Object(T["d"])(e,t.start,t.length)}function he(){return false}function fe(e,t,r){switch(r){case"prefs":e(Object(R["a"])());break;case"shortcuts":e(Object(N["h"])());break;default:se.warn("openDialog failed, unrecognized dialog: "+r);break}}function be(){Object(J["a"])({bustCache:true})}function ge(e,t){Object(I["b"])();Object(j["b"])();w();e(Object(L["setActiveTeam"])(t))}var _e=n()({analytics:new g,nodrag:new y},C,{accessibilitySupportChanged:oe,canOpenURLInWindow:le,closeCall:A["a"],focusNextWorkspace:re,focusPreviousWorkspace:ae,getCurrentUserId:F["getCurrentUserId"],getCurrentUserName:pe,getEnterpriseId:G["a"],getSelectedInputText:me,getThemeValues:ve,getTokenFromBootData:F["getTokenFromBootData"],getUserPref:B["g"],getWebappVersionUid:F["getWebappVersionUid"],handleDeepLinkWithArgs:k["g"],handleDeepLinkFromDesktop:P["b"],isOnBetaReleaseChannel:he,maybeTickleMS:O["a"],notificationActivated:ce,notificationClicked:u["a"],openDialog:fe,openFromCmdF:x["b"],recentMessagesFromCurrentChannel:ue,reload:Z["b"],replyToNotification:de,setCurrentMemberPresence:U["setCurrentMemberPresence"],setFocusedWorkspace:te,ssbChromeClicked:i["noop"],systemTextSettingsChanged:be,teamSelectionChanged:ge,track:z["c"],updateDownloadsView:E["b"],updateState:L["updateFromDesktop"]});var ye=r(108);var Oe=r(15);var ke=r(27);var Ee=r(374);var je=r(38);var Ce={},Se=Ce.dispatchActionToAllBootedTeams;var we=Object(Oe["b"])("Create a delegate object for interop with the desktop app",function(e,t){if(!Object(Ee["a"])())return;if(!c["isDesktop"]){var r=Object(b["a"])({state:t()});r.track("DESKTOP_SCRIPTS_MISSING");return}window.desktop.delegate||Object.defineProperty(window.desktop,"delegate",{get:function e(){var r=t();var a=Object(ye["f"])(r)||Object(G["b"])(r);return window.desktop.delegates&&window.desktop.delegates[a]},configurable:true});Ie(e,t)});we.propTypes=null;function Ie(e,t){var r=Object(G["b"])(t());var a=Te(e,t);window.desktop.delegates||(window.desktop.delegates={});window.desktop.delegates[r]=a}function Te(e,t){var r=_e.accessibilitySupportChanged,a=_e.canOpenURLInWindow,i=_e.focusNextWorkspace,s=_e.focusPreviousWorkspace,o=_e.getCurrentUserId,c=_e.getCurrentUserName,u=_e.getEnterpriseId,d=_e.getThemeValues,p=_e.getTokenFromBootData,v=_e.getUserPref,m=_e.getWebappVersionUid,h=_e.handleDeepLinkWithArgs,f=_e.handleDeepLinkFromDesktop,b=_e.maybeTickleMS,g=_e.notificationActivated,_=_e.notificationClicked,y=_e.openDialog,O=_e.openFromCmdF,k=_e.recentMessagesFromCurrentChannel,E=_e.replyToNotification,j=_e.setCurrentMemberPresence,C=_e.setFocusedWorkspace,S=_e.teamSelectionChanged,w=_e.updateState,I=l()(_e,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","getWebappVersionUid","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]);var T=function t(r){return function(){return e(r.apply(void 0,arguments))}};var A=function e(t){return function(){return Object(ke["b"])().dispatch(t.apply(void 0,arguments))}};var N=function t(r){return function(){if(Object(je["a"])()){var t=Object(ke["b"])();return t.dispatch(Se(r.apply(void 0,arguments)))}return e(r.apply(void 0,arguments))}};var P=function t(r){return function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r.apply(void 0,[e].concat(a))}};var R=function e(r){return function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return r.apply(void 0,[t()].concat(a))}};var M=function r(a){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return a.apply(void 0,[e,t()].concat(n))}};return n()({accessibilitySupportChanged:T(r),canOpenURLInWindow:R(a),focusNextWorkspace:A(i),focusPreviousWorkspace:A(s),getCurrentUserId:R(o),getCurrentUserName:R(c),getEnterpriseId:R(u),getThemeValues:R(d),getTokenFromBootData:R(p),getUserPref:R(v),getWebappVersionUid:R(m),handleDeepLinkWithArgs:Object(je["a"])()?T(f):h,maybeTickleMS:N(b),notificationActivated:P(g),notificationActivationHandler:function e(t){var r=t.channelId,a=t.messageTs,n=t.threadTs,i=t.teamId;if(Object(je["a"])())return A(C)({teamId:i}).then(function(){return T(_)({channelId:r,messageTs:a,threadTs:n})});return T(_)({channelId:r,messageTs:a,threadTs:n})},openDialog:M(y),openFromCmdF:T(O),recentMessagesFromCurrentChannel:R(k),replyToNotification:T(E),setCurrentMemberPresence:T(j),setFocusedWorkspace:function e(t){return A(C)({teamId:t})},startSearch:T(O),teamSelectionChanged:P(S),updateState:function e(){Object(je["a"])()&&A(w).apply(void 0,arguments);return N(w).apply(void 0,arguments)}},I)}function Ae(e){var t=e.canOpenURLInWindow,r=e.getCurrentUserId,a=e.getSelectedInputText,i=e.getTokenFromBootData,s=e.notificationActivated,o=e.replyToNotification,c=e.openFromCmdF,u=l()(e,["canOpenURLInWindow","getCurrentUserId","getSelectedInputText","getTokenFromBootData","notificationActivated","replyToNotification","openFromCmdF"]);return n()({canUrlBeOpenedInSSBWindow:t,focusTabAndSwitchToChannel:s,getAPIToken:i,getUserId:r,getSelectedInputTxt:a,searchForTxt:c,sendMsgFromUser:function e(t,r,a,n){return o(t,r,n)}},u)}var Ne=r(2259);var Pe=r(505);var Re=r(441);var Me=r(269);var xe=r(1563);var De=r(1053);var Fe=r(48);var Le=r(4599);var Be=r(1217);var Ue=r(1700);var qe=r(708);var Ge=r(1828);var He=r(1344);var We=r(1856);var Ve=r(1057);var Ke=r(1531);var ze=r(1532);var Qe=r(1847);var Ye=r(1440);var Je=r(909);var Xe=r(717);var Ze=r(1430);var $e=r(784);var et=r(210);var tt=r(1099);var rt=r(1547);var at=r(1);var nt=r.n(at);var it=r(0);var st=r(150);var ot=r(8);var lt=r.n(ot);var ct=r(9);var ut=r.n(ct);var dt=r(157);var pt=r(10);var vt=new pt["b"]("unavailable_channel");var mt={teamName:it["b"].string.isRequired,featureEscGridMigrationsClient:it["b"].bool};var ht={featureEscGridMigrationsClient:false};var ft=function(e){ut()(t,e);function t(){m()(this,t);return lt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){if(!this.props.featureEscGridMigrationsClient)return null;var t=this.props,r=t.teamName,a=l()(t,["teamName"]);var i=vt.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:r});return nt.a.createElement(dt["b"],n()({fadeDelay:1e4,type:"error"},a),nt.a.createElement("span",null,i))}}]);return t}(at["PureComponent"]);ft.displayName="UnavailableMemberToast";ft.defaultProps=ht;var bt=ft;var gt=Object(Oe["b"])("Show unavailable member toast",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.teamId,n=r.featureEscGridMigrationsClient;var i=t();var s=Object(V["j"])(i,a);var o=Object(K["getTeamDisplayName"])(s);return e(Object(st["enqueueToast"])({element:nt.a.createElement(bt,{type:"error",teamName:o,featureEscGridMigrationsClient:n})}))});var _t=gt;var yt=r(1479);var Ot=r(1170);var kt=r(217);var Et=r(1480);var jt=r(895);var Ct=r(686);var St=r(44);var wt=r(1505);var It=Object(wt["a"])(r(3317));var Tt=Object(wt["a"])(r(3318));var At=Object(wt["a"])(r(3319));var Nt=Object(wt["a"])(r(3320));function Pt(e){var t=s.a.camelCase(e);if(-1===t.indexOf("Store"))return null;t=t.slice(0,t.lastIndexOf("Store"));return t}function Rt(e){return s.a.reduce(e,function(e,t,r){var a=Pt(r);a&&(e[a]=t);return e},{})}var Mt=n()({},Rt(It),Rt(At),{unreadsView:{refreshAllUnreads:rt["b"]}});var xt=n()({},Rt(Tt),Rt(Nt));Object(St["a"])("interop.redux",{configureStore:Ne["a"],createDesktopDelegate:we,actions:{sendMessage:Pe["d"],prepareAndSendMessage:Pe["a"],saveMessageEdit:xe["a"],removeMessageAndTimestamp:Re["a"],openCustomStatusDialog:De["a"],openPrefsModal:R["a"],openChannelNotificationPrefsModal:Be["a"],openRequestToJoinWorkspacePermalinkDialog:Je["c"],openFileUploadDialog:Ue["a"],openShareDialog:qe["a"],getChannelIdForSharing:He["a"],openRenameFileDialog:We["a"],openCreateGDocDialog:Ge["a"],openSnippetDialog:Ve["a"],universalSearchSetVisible:Ke["a"],clearSearchInput:ze["a"],editLastUserMessageText:Qe["a"],maybeAnimateDeleteMessage:Ye["a"],loadEmoji:tt["loadEmoji"],showUnavailableMemberToast:_t,setEnterpriseId:$e["a"],changeReactionFromUserAction:Le["a"]},features:Mt,getDelegateForLegacy:Ae,middleware:{socketManager:Me},models:n()({},xt,{channelsMeta:{channelNamesToIds:yt,inviters:Ot,mutedChannels:kt,needsApiMarking:Et,needsCreatedMessage:jt,prqMetrics:Ct},emoji:n()({},xt.emoji,Xe,et,tt,{reducer:Ze["a"]})}),selectors:{getCurrentModals:Fe["getCurrentModals"]}})},,,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(2);var b=r(1757);var g=r(0);var _=r(88);var y=r.n(_);var O=r(107);var k=r.n(O);var E=r(10);var j=r(57);var C=r(11);var S=r(93);var w=r(73);var I=r(19);var T=r(505);var A=r(452);var N=r(24);var P=r(34);var R=r(3992);var M=r(3754);var x=r(4402);var D=r(1453);var F=r(23);var L=r(1806);var B=r(1057);var U=r(66);var q=r(17);var G=r(38);var H=r(178);var W=r(1258);var V=r(4416);var K=r(1807);var z=r(4168);var Q=r(1842);var Y=r(900);var J=r(2268);var X=new E["b"]("coachmarks");var Z={anchorElement:g["b"].instanceOf(Element),completeJoinerOnboarding:g["b"].func};var $={anchorElement:null,completeJoinerOnboarding:false};var ee=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.anchorElement,a=t.completeJoinerOnboarding;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(J["a"],{anchorElement:r,isOpen:true,onClickPrimaryButton:a,closeCoachmark:a,coachmarkClassNames:"c-joiner-coachmark",arrowPosition:10,offsetX:30,offsetY:45,primaryCallToActionText:X.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"}),orientation:"top"},n.a.createElement("h3",null,X.rt("Say hello!",{fallbackHash:"ff30242209ddac7a521de4f37aabe952bc39165f"})),n.a.createElement("p",null,X.rt("Type a message to let your team know you\u2019re here.",{fallbackHash:"cacc432d26db2e0a0a36a197f329204ee25e63e1"}))))}}]);return t}(J["a"]);ee.displayName="JoinerOnboardingCoachmark";var te=ee;ee.propTypes=Z;ee.defaultProps=$;var re=new E["b"]("coachmarks");var ae={anchorElement:g["b"].instanceOf(Element),setTractorMessageCoachmarkVisibility:g["b"].func};var ne={anchorElement:null,setTractorMessageCoachmarkVisibility:f["noop"]};var ie=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.anchorElement,a=t.setTractorMessageCoachmarkVisibility;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(J["a"],{anchorElement:r,"data-qa":"coachmark",isOpen:true,orientation:"top",offsetX:30,offsetY:45,arrowPosition:10,closeCoachmark:function e(){return a(false)}},n.a.createElement("h3",null,re.t("Just type and press Enter")),n.a.createElement("p",null,re.t("Your Slack teammates will see your messages when they join. Feel free to use your own words instead!"))))}}]);return t}(J["a"]);ie.displayName="TractorSendMessageCoachmark";var se=ie;ie.propTypes=ae;ie.defaultProps=ne;var oe=r(2270);var le=r(39);var ce=r(208);var ue=r(1800);var de=r(1808);var pe=r(1048);var ve=r(71);var me=r(2288);var he=r(4358);var fe=r(3);var be=r.n(fe);var ge=r(37);var _e=r.n(ge);var ye=r(16);var Oe=r.n(ye);var ke=r(693);var Ee=r(1072);var je=r(14);var Ce=r(192);var Se=r(15);var we=r(898);var Ie=r(4);var Te=r(2223);var Ae=function e(t,r){return Object(o["a"])(t,Object(we["b"])({resourceType:"channel",resourceId:r})).then(function(e){return e.map(function(e){return{appId:Object(f["get"])(e,"app.app_id"),id:Object(f["get"])(e,"action_id"),name:Object(f["get"])(e,"name"),description:Object(f["get"])(e,"description"),type:Object(f["get"])(e,"type"),app:Object(f["get"])(e,"app"),channelId:r}})})};var Ne=function e(t,r){return Ae(t,r).then(function(e){Object(o["a"])(t,Object(Te["b"])({channelId:r}));Object(o["a"])(t,Object(Te["d"])({channelId:r,isLoaded:false}));var a=Pe();a.markObjectsAsFresh(t,[r]);Object(o["a"])(t,Object(Te["e"])({channelId:r,actions:e}));Object(o["a"])(t,Object(Te["d"])({channelId:r,isLoaded:true}))})};var Pe=Object(f["memoize"])(function(){return new Ce["b"]({fetch:function e(t,r){return Promise.map(r,function(e){return Ne(t,e)})},isEnabled:function e(t){var r=Object(o["c"])(t);return Object(Ie["isFeatureEnabled"])(r,"feature_channel_actions_client")}})});var Re=Object(Se["b"])("Mark actions for channelIds as stale",function(e,t,r){var a=Pe();var n=t();var i=Object(F["b"])(n);a.markObjectsAsStale(i,r)});Re.propTypes=g["b"].arrayOf(g["b"].string).isRequired;var Me=function e(t,r){Pe().maybeRefetch(t,r)};var xe=Object(je["b"])(function(e){return e&&e.channelActions||{}});var De=Object(Ee["a"])(xe,function(e){return e.actionMetaByChannelId});var Fe=Object(Ee["a"])(xe,function(e,t){return t},function(e,t){var r=e.actions;return r[t]||null});var Le=Object(Ee["a"])(xe,function(e,t){return t},function(e,t){var r=e.actionIdsByChannelId;var a=r[t];if(Array.isArray(a))return a;return[]});var Be=Object(Ee["a"])(Le,xe,function(e,t){var r=t.actions;if(e)return e.map(function(e){return r[e]}).filter(function(e){return void 0!==e});return[]});var Ue=Object(Ee["a"])(De,function(e,t){return t},function(e,t){return e[t]||null});var qe=Object(Ee["a"])(Ue,Le,function(e,t){if(e){if(false===e.isLoaded&&e.count>=0)return e.count;if(true===e.isLoaded)return t.length}return null});var Ge=Object(Ee["a"])(F["b"],Ue,Be,function(e,t){return t},function(e,t,r,a){t&&t.count>0&&Me(e,a);return r});var He=r(277);var We=r(138);var Ve=r(26);var Ke=r.n(Ve);var ze=r(58);var Qe=r.n(ze);var Ye=r(1742);var Je=r(399);var Xe=r(1702);var Ze=r(150);var $e=r(517);var et=Object(Se["b"])("Runs a channel action",function(e,t,r){if(!Object(Ie["isFeatureEnabled"])(t(),"feature_channel_actions_client"))return Promise.resolve();var a=be()({},r,{type:$e["a"].channelAction});return e(Object(we["c"])(a)).catch(function(){var t=function t(){return e(et(a))};var r=Object(Xe["a"])({onRetry:t});e(Object(Ze["enqueueToast"])({element:r}))})});et.propTypes={actionId:g["b"].string.isRequired,appId:g["b"].string.isRequired,channelId:g["b"].string.isRequired};var tt=r(139);var rt=r(1175);var at=r(475);var nt=r(1446);var it=r(51);var st=r(532);var ot=r(1704);var lt=r(4520);var ct=r(310);var ut=r(182);var dt=r(1311);var pt=r(270);var vt=r(22);var mt=r(372);var ht=r(467);var ft=r(2285);var bt=r(1183);var gt=r(2271);var _t=function e(t){var r=t.children,a=_e()(t,["children"]);return n.a.createElement("span",be()({},a,{className:"p-app_action_picker_item__text--secondary"}),r)};_t.displayName="SecondaryText";_t.defaultProps={children:null};var yt=Object(a["memo"])(function(e){var t=e.renderAvatar,r=e.primaryContent,a=e.secondaryContent,i=e.isActive;return n.a.createElement(bt["a"],{size:"small",className:Oe()("p-app_action_picker_item",{"p-app_action_picker_item--active":i}),primaryContent:n.a.createElement(ft["a"],{size:"medium",avatar:function e(r){var a=r.className;return t(Oe()(a,"p-app_action_picker_item__icon"))},text:r,subtext:a})})});yt.propTypes={primaryContent:g["b"].node,secondaryContent:g["b"].node,renderAvatar:g["b"].func,isActive:g["b"].bool};yt.defaultProps={primaryContent:null,secondaryContent:null,renderAvatar:f["noop"],isActive:false};var Ot=yt;var kt=36;var Et=new mt["a"]("app_action_picker");var jt=function e(t){var r=t.command,i=t.app,s=t.appName,o=t.teamId,l=t.isActive,c=_e()(t,["command","app","appName","teamId","isActive"]);var u=Object(st["a"])(),d=u.featureChannelActionsClient;var p=Object(Je["g"])(r).replace(/^\//,"");var v=Object(Je["i"])(r);var m=Object(Je["e"])(r);var h=Object(Je["b"])(r);var f=void 0;h&&h.length>0&&(f=d?Et.t("or {aliases}",{aliases:Object(ht["a"])(h,{noConj:true}).join("")}):"");var b=Object(a["useCallback"])(function(e){var t=Object(Je["f"])(r),a=t.icon,l=t.iconClassName;var c=Object(Je["h"])(r);if("custom"===c)return n.a.createElement(pt["b"],{id:o,className:e,size:kt});var u=n.a.createElement(vt["b"],{type:a,className:Oe()(e,l),alt:s});if("app"===c){var d=Object(ct["a"])(i,2*kt);return n.a.createElement(dt["a"],{className:e,src:d,alt:s,renderError:function e(){return u},renderPending:function e(){return u}})}return u},[i,s,r,o]);var g=n.a.createElement("span",null,n.a.createElement("b",null,p),h&&n.a.createElement(a["Fragment"],null," (",f,")"),v&&n.a.createElement(a["Fragment"],null," ",v));var _=n.a.createElement(_t,null,m);return n.a.createElement(Ot,be()({},c,{isActive:l,renderAvatar:b,primaryContent:g,secondaryContent:_}))};jt.displayName="AppActionPickerCommandItem";jt.defaultProps={isActive:false,appName:"",app:null,teamId:""};var Ct=function e(t,r){var a=r.command.app;return{app:Object(ut["getAppById"])(t,a)||null,teamId:Object(F["b"])(t)}};var St=Object(i["connect"])(Ct)(jt);var wt=function e(t){var r=t.action,i=t.app,s=t.appName,o=_e()(t,["action","app","appName"]);var l=n.a.createElement(_t,null,s);var c=Object(a["useCallback"])(function(e){var t=Object(f["get"])(r,"app.icons.image_64",Object(ct["a"])(i,64));return n.a.createElement(dt["a"],{className:e,src:t,alt:name})},[r,i]);return n.a.createElement(Ot,be()({},o,{renderAvatar:c,primaryContent:r.name,secondaryContent:l}))};wt.displayName="AppActionPickerActionItem";wt.defaultProps={app:null,appName:""};var It=function e(t,r){var a=r.action.appId;return{app:Object(ut["getAppById"])(t,a)||null}};var Tt=Object(i["connect"])(It)(wt);var At=r(3253);var Nt=new E["b"]("app_action_picker");var Pt="OPTION_CHANNEL_ACTION";var Rt="OPTION_SLASH_COMMAND";var Mt="LABEL_CHANNEL_ACTIONS";var xt="LABEL_ALL_ACTIONS";var Dt=function e(t){return(t||"").split(/\s+/)[0]};var Ft=function e(t){return"/"===(t||"").charAt(0)?t:"/"+t};var Lt=function e(t,r){return t.replace(r,"")};var Bt=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=Dt(r);var n=Object(at["a"])(r);var i="/"===r.charAt(0);return t.reduce(function(e,t){var r=t.options.filter(function(e){if(i&&e.type!==Rt)return false;var t=Object(at["a"])(e.label);var r=Object(at["a"])(e.description)||"";var s=Object(at["a"])(e.appName)||"";if(e.type===Rt){var o=Object(ot["a"])(e.command,a,{allowPartialMatches:true});if(i)return o;if(o)return true;if(r.includes(n))return true;if(s.includes(n))return true}if(e.type===Pt){if(t.includes(n))return true;if(r.includes(n))return true;if(s.includes(n))return true}return false});if(r.length>0){var s=be()({},t,{options:r});return e.concat(s)}return e},[])};var Ut=Object(a["memo"])(function(e){var t=e.channelActions,r=e.viewContext,i=e.channelId,s=e.commandCategories,o=e.initialFilterValue,l=e.onSelected,c=e.openAppsBrowserModal,u=e.runChannelAction,d=e.threadTs;var p=Object(a["useRef"])(null);var v=Object(a["useState"])({filterQuery:o||"",activeRowIndex:null}),m=Qe()(v,2),h=m[0],f=m[1];var b=Object(st["a"])(),g=b.featureChannelActionsClient;var _=Object(a["useCallback"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r=e(),a=r.activeRowIndex,n=r.filterQuery;void 0===a&&void 0===n||f(be()({},h,void 0!==a?{activeRowIndex:a}:{},void 0!==n?{filterQuery:n}:{}));t&&t()},[h]);var y=Object(a["useMemo"])(function(){return{label:Mt,options:(t||[]).map(function(e){return{value:e.id,label:e.name,description:e.description,type:Pt,appName:e.app.app_name,action:e}})}},[t]);var O=Object(a["useMemo"])(function(){return s.map(function(e){return{label:e.name,options:e.commands.map(function(e){return{value:Object(Je["d"])(e),label:Object(Je["g"])(e),description:Object(Je["e"])(e),type:Rt,appName:e.appName,command:e}})}})},[s]);var E=Object(a["useMemo"])(function(){return Bt([y].concat(Ke()(O)),h.filterQuery)},[y,O,h.filterQuery]);var j=Object(a["useCallback"])(function(e){if(e.type===Rt){var t=e.command;var a=Dt(h.filterQuery);var n=Lt(h.filterQuery,a);var s=Object(ot["a"])(t,Ft(a),{allowPartialMatches:false});var o=s?""+t.name+n+" ":t.name+" ";var c=Object(ce["a"])({viewContext:r,channelId:i,threadTs:d||void 0});c.prependContents({contents:(new k.a).insert(o).ops});c.focus();l()}else if(e.type===Pt){var p=e.action;u({appId:p.appId,actionId:p.id,channelId:i});l()}},[r,i,d,u,l,h.filterQuery]);var C=Object(a["useCallback"])(function(e,t){var r=t.isActive;if("heading"===e.type){if(e.label===Mt)return n.a.createElement("div",null,g?Nt.rt("Workflows in {channelName}",{channelName:n.a.createElement(tt["a"],{channelId:i})}):"");if(e.label===xt)return n.a.createElement("div",null,g?Nt.t("All actions"):"");return n.a.createElement("div",null,e.label)}if(e.type===Pt)return n.a.createElement(Tt,{key:e.key,action:e.action,channelId:i,onSelected:l,isActive:r,appName:e.appName});return n.a.createElement(St,{key:e.key,command:e.command,channelId:i,onSelected:l,isActive:r,appName:e.appName})},[i,g,l]);var S=Object(a["useCallback"])(function(e){return n.a.createElement("div",{className:"app_action_picker__empty"},g?Nt.rt('No app action results found for "{query}"',{query:n.a.createElement("strong",null,e)}):"",n.a.createElement("br",null),g?Nt.rt("Try again or <a>add an app</a>.",null,function(e){var t=e.text;return n.a.createElement(it["a"],{onClick:function e(){l();c()}},t)}):"")},[g,l,c]);return n.a.createElement("div",{className:"p-app_action_picker"},n.a.createElement(rt["b"],{ariaLabel:g?Nt.t("Search commands"):"",focusOnMount:true,inputRef:p,maxOptionsListHeight:296,onOptionSelected:j,optionsRowHeight:60,placeholderText:g?Nt.t("Search commands"):"",renderOption:C,resultsInPopover:false,selectState:{filterQuery:h.filterQuery,activeRowIndex:h.activeRowIndex,options:E,isExpanded:true,selectId:"app_action_picker"},emptyStateMessage:S,setSelectState:_,showDropdownIcon:false,size:"medium",width:400}))});Ut.defaultProps={commandCategories:[],channelActions:[],onSelected:f["noop"],initialFilterValue:null,threadTs:null};var qt=function e(t,r){var a=r.channelId,n=r.threadTs;var i=Object(Ye["a"])(t,a,n&&n.length>0);var s=Object(lt["b"])(t,i,a);var o=Object(Ye["c"])(t);var l=n?null:Ge(t,a);return{cacheTs:o,channelId:a,commandCategories:s,channelActions:l}};var Gt=function e(t){return{runChannelAction:function e(r){return t(et(r))},openAppsBrowserModal:function e(){return t(Object(nt["a"])())}}};var Ht=Object(i["connect"])(qt,Gt,null,{areStatePropsEqual:function e(t,r){return t.cacheTs===r.cacheTs&&t.channelId===r.channelId&&t.channelActions===r.channelActions}})(Ut);var Wt=new E["b"]("app_action_picker");var Vt=15;var Kt={channelId:g["b"].string,viewContext:g["b"].string.isRequired,children:g["b"].node.isRequired,offsetX:g["b"].number,offsetY:g["b"].number,position:g["b"].string,onClick:g["b"].func,onClose:g["b"].func,forceOpen:g["b"].bool,initialFilterValue:g["b"].string,featureChannelActionsClient:g["b"].bool,threadTs:g["b"].string};var zt={channelId:null,offsetX:0,offsetY:-8,position:"top-right",onClick:f["noop"],onClose:f["noop"],forceOpen:false,featureChannelActionsClient:false,initialFilterValue:null,threadTs:null};var Qt=function e(t){var r=t.children,a=t.channelId,i=t.featureChannelActionsClient,s=t.forceOpen,o=t.initialFilterValue,l=t.offsetX,c=t.offsetY,u=t.onClick,d=t.onClose,p=t.position,v=t.threadTs,m=t.viewContext,h=_e()(t,["children","channelId","featureChannelActionsClient","forceOpen","initialFilterValue","offsetX","offsetY","onClick","onClose","position","threadTs","viewContext"]);if(!i)return null;return n.a.createElement(He["b"],be()({},h,{ariaHasPopup:true,onClick:u,onClose:d,forceOpen:s,renderPopover:function e(t){return n.a.createElement(He["a"],be()({shouldFade:false,allowanceX:Vt,allowanceY:Vt,position:p,offsetX:l,offsetY:c,ariaLabel:Wt.t("App Actions"),ariaRole:"dialog"},t),n.a.createElement(Ht,{channelId:a,onSelected:t.onClose,initialFilterValue:o,threadTs:v,viewContext:m}))}}),r)};Qt.displayName="AppActionPickerTrigger";Qt.defaultProps=zt;var Yt=Object(We["a"])("feature_channel_actions_client")(Qt);var Jt=r(4490);var Xt=Object(a["forwardRef"])(function(e,t){var r=e.teamId,i=e.channelId,s=e.channelActionsCount,o=e.viewContext,l=e.tabIndex,c=_e()(e,["teamId","channelId","channelActionsCount","viewContext","tabIndex"]);var u=s&&s>0;Object(a["useEffect"])(function(){u&&Me(r,i)},[r,i,u]);return n.a.createElement(Yt,be()({channelId:i,viewContext:o},c),n.a.createElement(ke["a"],{ref:t,className:Oe()("p-app_action_picker_trigger_button",{"p-app_action_picker_trigger_button--in_message_pane":o===le["MESSAGE_CONTAINERS"].MESSAGE_PANE}),icon:"bolt",tabIndex:l}))});Xt.defaultProps={channelActionsCount:null,tabIndex:void 0};Xt.displayName="AppActionPickerTriggerButton";var Zt=function e(t,r){var a=r.channelId,n=r.threadTs;return{channelActionsCount:n?0:qe(t,a),teamId:Object(F["b"])(t)}};var $t=Object(i["connect"])(Zt)(Xt);var er=r(1442);var tr=r(122);var rr=r(691);var ar=r(376);var nr=r(241);var ir=r(2265);var sr=r(3229);var or=new E["b"]("messages");var lr=3;var cr={isShared:g["b"].bool,isPendingShared:g["b"].bool,guestCount:g["b"].number,connectedTeamIds:g["b"].array,type:g["b"].oneOf(["channel","private","im","mpim"]),featureContextBar:g["b"].bool,contextBarExperimentGroup:g["b"].oneOf(["control","test"])};var ur={isShared:false,isPendingShared:false,guestCount:0,connectedTeamIds:[],type:"channel",featureContextBar:false,contextBarExperimentGroup:"control"};var dr=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderTeamIcons",value:function e(){var t=this.props,r=t.isPendingShared,a=t.connectedTeamIds;var i=[];var s=a.length>lr?lr:a.length;for(var o=0;o<s;o++)i.push(n.a.createElement(pt["b"],{isPendingShared:r,className:"p-context_bar__icon",id:a[o],key:a[o],size:16}));return i}},{key:"renderIcon",value:function e(){var t=this.props,r=t.isPendingShared,a=t.isShared,i=t.guestCount;if(r)return n.a.createElement(vt["b"],{type:"paper-plane",size:"inherit",style:{fontSize:16},className:"p-context_bar__icon"});if(a)return this.renderTeamIcons();if(i>0)return n.a.createElement(vt["b"],{type:"user-filled",size:"inherit",style:{fontSize:16},className:"p-context_bar__icon"});return null}},{key:"renderText",value:function e(){var t=this.props,r=t.type,a=t.isShared,i=t.guestCount,s=t.isPendingShared,o=t.connectedTeamIds,l=t.featureContextBar;if(l){if("im"===r){if(a)return or.rt("This person is from {team}.",{team:n.a.createElement(ir["a"],{id:o[0]})});if(i>0)return or.rt("This person is a <strong>guest</strong> in your organization.");return null}if("mpim"===r){if(a)return or.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this conversation.",{guestCount:i,singleTeamName:n.a.createElement(ir["a"],{id:o[0]}),numConnectedTeams:o.length});if(i>0)return or.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this conversation.",{guestCount:i})}if(s)return or.rt("{numConnectedTeams, plural, =1 {{singleTeamName} has} other {<strong># other organizations</strong> have}} been invited to this channel.",{singleTeamName:n.a.createElement(ir["a"],{id:o[0]}),numConnectedTeams:o.length});if(a)return or.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this channel.",{guestCount:i,singleTeamName:n.a.createElement(ir["a"],{id:o[0]}),numConnectedTeams:o.length});if(i>0)return or.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this channel.",{guestCount:i})}return""}},{key:"render",value:function e(){var t=this.props,r=t.featureContextBar,a=t.contextBarExperimentGroup,i=t.isShared,s=t.guestCount;var o=r&&"test"===a;var l=i||s>0;if(o&&l)return n.a.createElement("div",{className:"p-context_bar"},this.renderIcon(),n.a.createElement("span",{className:"p-context_bar__text",id:"context-bar-text"},this.renderText()));return null}}]);return t}(a["PureComponent"]);dr.displayName="ContextBar";dr.defaultProps=ur;var pr=function e(t){var r=Object(w["a"])(t);var a=Object(I["d"])(t,r);var n=Object(C["isExternallySharedChannel"])(a);var i=Object(C["isPendingExternallySharedChannel"])(a);var s=Object(C["getChannelType"])(a);var o=Object(C["getPendingAndConnectedTeamIds"])(t,a);var l=Object(nr["getMemberCounts"])(t,r);var c=Object(Ie["isFeatureEnabled"])(t,"feature_context_bar_guests");var u=c?Object(f["get"])(l,"counts.restricted_member_count"):0;var d=Object(tr["getGroupForUser"])(t,"context_bar");var p=Object(Ie["isFeatureEnabled"])(t,"feature_context_bar");return{isShared:n,isPendingShared:i,type:s,connectedTeamIds:o,guestCount:u,featureContextBar:p,contextBarExperimentGroup:d}};var vr=Object(i["connect"])(pr)(dr);var mr=r(98);var hr=r(1054);var fr=r(308);var br=r(1811);var gr=r(28);var _r=new E["b"]("view");var yr={channelId:g["b"].string.isRequired,channel:g["b"].object,showCloseButton:g["b"].bool,channelIsIMWithDeletedMember:g["b"].bool,prevChannelId:g["b"].string,closeChannelApi:g["b"].func.isRequired,member:g["b"].object,archiveChannel:g["b"].func.isRequired,displayModelOrViewById:g["b"].func.isRequired,featureEscDisconnectV2Client:g["b"].bool,featureAnnounceOnly:g["b"].bool};var Or={channel:void 0,showCloseButton:false,channelIsIMWithDeletedMember:false,prevChannelId:void 0,member:void 0,featureEscDisconnectV2Client:false,featureAnnounceOnly:false};var kr=function(e){h()(t,e);function t(){c()(this,t);var e=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onCloseButtonClicked=e.onCloseButtonClicked.bind(e);return e}d()(t,[{key:"onCloseButtonClicked",value:function e(){Object(C["isIm"])(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:false});this.props.displayModelOrViewById({id:this.props.prevChannelId})}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.showCloseButton,i=t.channelIsIMWithDeletedMember,s=t.member,o=t.featureEscDisconnectV2Client,l=t.featureAnnounceOnly;if(!r)return null;var c=Object(C["isChannel"])(r)?_r.t("Close Channel"):_r.t("Close");var u=null;var d="";if(o&&Object(C["isFrozen"])(r))d=Object(C["isIm"])(r)?_r.rt("Your two organizations are no longer connected."):Object(C["isMpim"])(r)?_r.rt("These organizations are no longer connected."):_r.rt("This channel is no longer shared with your organization.");else if(Object(C["isArchived"])(r)&&!Object(C["isIm"])(r))d=Object(C["getIsChannelMoved"])(r)?_r.rt("You are viewing {channel_or_group}, a moved channel",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(tt["a"],{channel:r}))}):_r.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(tt["a"],{channel:r}))});else if(i&&s&&Object(q["isAppUser"])(s))d=_r.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object(q["getMemberRealName"])(s)});else if(i){u=n.a.createElement(vt["b"],{type:"archive"});d=_r.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"})}else{if(l){var p=_r.t("Posting to this channel has been restricted to select members");return n.a.createElement(br["a"],{tooltip:p,featureAnnounceOnly:l,border:true,padding:"large"})}d=_r.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(tt["a"],{channel:r}))})}return n.a.createElement("div",{className:"p-message_pane_input__disabled"},n.a.createElement("span",{className:"p-message_pane_input__disabled_text"},u," ",d),a&&n.a.createElement(gr["d"],{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},c))}}]);return t}(a["Component"]);kr.displayName="MessagePaneInputDisabled";kr.defaultProps=Or;var Er=function e(t,r){var a=r.channelId;var n=Object(Ie["isFeatureEnabled"])(t,"feature_esc_disconnect_v2_client");var i=Object(I["d"])(t,a);var s=Object(C["isIm"])(i)?Object(N["d"])(t,Object(C["getMemberIdFromIm"])(i)):null;var o=Object(C["isImWithDeletedMember"])(t,i);var l=Object(hr["a"])(t);return{channel:i,member:s,channelIsIMWithDeletedMember:o,prevChannelId:l,showCloseButton:Object(C["isArchived"])(i)&&(!n||!Object(C["isFrozen"])(i))||o,featureEscDisconnectV2Client:n,featureAnnounceOnly:Object(Ie["isFeatureEnabled"])(t,"feature_announce_only")}};var jr={closeChannelApi:mr["closeChannelApi"],archiveChannel:mr["archiveChannel"],displayModelOrViewById:fr["a"]};var Cr=Object(i["connect"])(Er,jr)(kr);var Sr=r(108);var wr=r(100);var Ir=r(168);var Tr=r(298);var Ar=r(195);var Nr=r(164);var Pr=r(1068);var Rr=r(1351);var Mr=r(50);var xr=r(1566);var Dr=r(289);var Fr=r(301);var Lr=r(79);var Br=new E["b"]("archives");var Ur={channelId:g["b"].string.isRequired,channel:g["b"].object.isRequired,channelCreatedBySelf:g["b"].bool,channelDetailsVisible:g["b"].bool,dateCreated:g["b"].number,createdById:g["b"].string,showDetails:g["b"].func.isRequired,joinConversationApi:g["b"].func.isRequired,displayModelOrViewById:g["b"].func.isRequired,userAttentionIsOnChat:g["b"].bool,previousChannelId:g["b"].string,featureOfflineMode:g["b"].bool.isRequired,isOffline:g["b"].bool.isRequired};var qr={channelCreatedBySelf:false,channelDetailsVisible:false,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:false,previousChannelId:void 0};var Gr=function(e){h()(t,e);function t(){c()(this,t);var e=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onJoinButtonClicked=e.onJoinButtonClicked.bind(e);e.onDetailsButtonClicked=e.onDetailsButtonClicked.bind(e);e.handleKeyDown=e.handleKeyDown.bind(e);return e}d()(t,[{key:"componentDidMount",value:function e(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"onDetailsButtonClicked",value:function e(){this.props.showDetails()}},{key:"onJoinButtonClicked",value:function e(){this.props.joinConversationApi({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function e(t){var r=this.props,a=r.userAttentionIsOnChat,n=r.previousChannelId;if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;if(Object(Pr["a"])(document.activeElement))return;if(Object(G["a"])()&&!a)return;if(!Object(G["a"])()&&!Object(Ir["f"])())return;if(t.keyCode===Lr["e"]){this.onJoinButtonClicked();return}if(t.keyCode===Lr["f"]){if(Object(G["a"])()){this.props.displayModelOrViewById({id:n});return}Object(Tr["a"])()}}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.dateCreated,i=t.createdById,s=t.channelCreatedBySelf,o=t.channelDetailsVisible,l=t.featureOfflineMode,c=t.isOffline;var u=n.a.createElement(Fr["a"],{type:"unknown"});a&&(u=Object(Nr["k"])(a));var d=n.a.createElement(Fr["a"],{type:"unknown"});i&&(d=n.a.createElement(Dr["a"],{id:i}));var p=Br.rt("You are viewing {channel_name}",{channel_name:n.a.createElement("strong",null,n.a.createElement(xr["a"],{channel:r,boldIcon:true}))});var v="";v=s?Br.rt("Created by you on {created_at}",{created_at:u}):Br.rt("Created by {name} on {created_at}",{name:d,created_at:u});var m=n.a.createElement(gr["d"],{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium",disabled:l&&c},Br.t("Join Channel"));if(l&&c){var h=n.a.createElement(Rr["a"],{tooltipLabel:Br.t("Go online to join this channel")});m=n.a.createElement(Mr["c"],{tip:h},n.a.createElement("div",{className:"inline_block"},m))}return n.a.createElement("div",{className:"p-message_pane_input__preview"},n.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},p),n.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},v),n.a.createElement("div",null,m,!o&&n.a.createElement(gr["d"],{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},Br.t("See More Details"))))}}]);return t}(a["Component"]);Gr.displayName="MessagePaneInputPreview";Gr.defaultProps=qr;var Hr=function e(t,r){var a=r.channelId;var n=Object(I["d"])(t,a);var i=Object(Sr["i"])(t);return{channel:n,channelDetailsVisible:"details"===i||"channel_info"===i,createdById:n.creator,dateCreated:n.created,channelCreatedBySelf:n.creator===Object(Ie["getCurrentUserId"])(t),userAttentionIsOnChat:Object(H["e"])(t),previousChannelId:Object(hr["a"])(t),featureOfflineMode:Object(Ie["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(Ar["c"])(t)}};var Wr={joinConversationApi:mr["joinConversationApi"],showDetails:wr["e"],displayModelOrViewById:fr["a"]};var Vr=Object(i["connect"])(Hr,Wr)(Gr);var Kr=r(451);var zr=new E["b"]("msg_input");function Qr(e){var t=e.channelName,r=e.isSelfDm;if(r)return zr.t("Jot something down");if(t)return zr.t("Message {msg}",{msg:Object(E["o"])(t)});return zr.t("Message channel")}var Yr={isSelfDm:g["b"].bool,channelName:g["b"].string,memberId:g["b"].string,showStatus:g["b"].bool,forcePlaceholderText:g["b"].string};var Jr={isSelfDm:false,channelName:void 0,memberId:void 0,showStatus:false,forcePlaceholderText:void 0};var Xr=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.channelName,a=t.isSelfDm,i=t.showStatus,s=t.memberId,o=t.forcePlaceholderText;var l=o||Qr({channelName:r,isSelfDm:a});var c=!o&&i&&n.a.createElement(Kr["b"],{memberId:s,tooltip:false});return n.a.createElement("div",{className:"c-texty_input__placeholder"},l,c)}}]);return t}(a["Component"]);Xr.displayName="MessagePaneInputPlaceholder";Xr.defaultProps=Jr;var Zr=function e(t,r){var a=r.channelId,n=r.isSelfDm;var i=Object(I["d"])(t,a);var s=Object(C["getMemberIdFromIm"])(i);var o=s?Object(N["d"])(t,s):null;return{memberId:s||void 0,showStatus:Object(C["isIm"])(i)&&!n&&Object(q["hasCustomStatusSet"])(o)}};var $r=Object(i["connect"])(Zr)(Xr);var ea={channel:g["b"].object,channelId:g["b"].string,isSelfDm:g["b"].bool,channelName:g["b"].string,prepareAndSendMessage:g["b"].func,currentUserStartedTyping:g["b"].func,currentUserEndedTyping:g["b"].func,editLastMessageInChannel:g["b"].func,openSnippetDialog:g["b"].func,typingNames:g["b"].array,useSendButton:g["b"].bool,userCanPost:g["b"].bool,teamId:g["b"].string,featureWysiwygComposer:g["b"].bool,telemeter:g["b"].object.isRequired,isUnavailable:g["b"].bool,shouldShowJoinerLandingPlaceCoachmark:g["b"].bool,completeJoinerOnboardingCallback:g["b"].func,shouldShowTractorMessageCoachmark:g["b"].bool,setTractorMessageCoachmarkVisibility:g["b"].func,shouldShowWorkflowItemCoachmark:g["b"].bool,userAttentionIsOnChat:g["b"].bool,appActionPickerEnabled:g["b"].bool,removeFromSectionNavigation:g["b"].func,addToSectionNavigation:g["b"].func,resetSectionNavigation:g["b"].func,useContextBar:g["b"].bool};var ta={channel:void 0,channelId:void 0,isSelfDm:false,channelName:void 0,prepareAndSendMessage:function e(){return Promise.resolve()},currentUserStartedTyping:f["noop"],currentUserEndedTyping:f["noop"],editLastMessageInChannel:f["noop"],openSnippetDialog:f["noop"],useSendButton:false,userCanPost:true,typingNames:[],teamId:void 0,featureWysiwygComposer:false,isUnavailable:false,shouldShowJoinerLandingPlaceCoachmark:false,completeJoinerOnboardingCallback:f["noop"],shouldShowTractorMessageCoachmark:false,setTractorMessageCoachmarkVisibility:f["noop"],userAttentionIsOnChat:false,removeFromSectionNavigation:f["noop"],addToSectionNavigation:f["noop"],resetSectionNavigation:f["noop"],appActionPickerEnabled:false,shouldShowWorkflowItemCoachmark:false,useContextBar:false};var ra=function(e){h()(t,e);function t(){c()(this,t);var e=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(b["a"])(e,["handleKeyDown","onTextChange","sendMessage","editLastMessage","snippetCallback","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onFocus","onBlur"]);e.textyRef=n.a.createRef();e.reactionPopoverRef=n.a.createRef();e.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:false};return e}d()(t,[{key:"componentDidMount",value:function e(){this.updatePlaceholder();this.registerInput();this.restoreLegacyDraft()}},{key:"shouldComponentUpdate",value:function e(t){var r=this.props,a=r.userCanPost,n=r.channel;(a&&!t.userCanPost||!Object(C["isPreview"])(n)&&Object(C["isPreview"])(t.channel))&&this.unmountPlaceholder();return true}},{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.userAttentionIsOnChat,n=r.channelId,i=r.userCanPost,s=r.channel;if(t.userAttentionIsOnChat&&!a){this.props.removeFromSectionNavigation();this.stopListeningToKeydown()}else if(!t.userAttentionIsOnChat&&a){this.props.addToSectionNavigation();this.startListeningToKeydown()}if(t.channelId!==n){t.channelId&&this.unregisterInput(t.channelId);if(n){this.registerInput();this.restoreLegacyDraft()}}(n&&t.channelId!==n||!t.userCanPost&&i||(!t.channel||Object(C["isPreview"])(t.channel))&&!Object(C["isPreview"])(s))&&this.updatePlaceholder()}},{key:"componentWillUnmount",value:function e(){var t=this.props.channelId;this.stopListeningToKeydown();this.unmountPlaceholder();this.unregisterInput(t);this.shouldNotListenToKeyDownAgain=true}},{key:"onTextChange",value:function e(t,r){var a=this.props.channelId;this.setState(function(){return{textyValue:t,textyWysiwygLength:Object(pe["a"])(new k.a(r))}});Object(G["a"])()||Object(ar["h"])(t);t&&0!==t.indexOf("/")&&Object(f["trim"])(t).length?this.props.currentUserStartedTyping({channelId:a}):this.props.currentUserEndedTyping({channelId:a})}},{key:"onFocus",value:function e(){this.stopListeningToKeydown();this.props.resetSectionNavigation()}},{key:"onBlur",value:function e(){this.startListeningToKeydown();var t=this.getInputRef();t&&this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getInputRef",value:function e(){if(!this.textyRef.current)return null;return this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current}},{key:"restoreLegacyDraft",value:function e(){var t=this.props.channelId;var r=this.getInputRef();if(!t)return;if(Object(G["a"])())return;if(!r)return;var a=Object(rr["a"])(t);r.value(a||"");var n=Object(ar["b"])(t);n?r.setCursor(n.start,n.length):r.setCursorAtEnd()}},{key:"registerInput",value:function e(){var t=this;var r=this.props.channelId;if(!r)return;Object(ce["c"])({viewContext:le["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:r,functions:{getContainer:function e(){var r=t.getInputRef();return r?r.container:null},isEmpty:function e(){var r=t.getInputRef();return r?r.isEmpty():null},clear:function e(){var r=t.getInputRef();r&&r.clear()},prependContents:function e(r){var a=t.getInputRef();a&&a.prependContents(r)},setContents:function e(r){var a=t.getInputRef();a&&a.setContents(r)},getContents:function e(){var r=t.getInputRef();return r?r.getContents():null},setText:function e(r){var a=t.getInputRef();a&&a.value(r)},getText:function e(){var r=t.getInputRef();return r?r.value():null},getLength:function e(){var r=t.getInputRef();return r?r.getLength():null},getDisplayValue:function e(){var r=t.getInputRef();return r?r.displayValue():null},focus:function e(){var r=t.getInputRef();r&&r.setCursorAtEnd()},focusWithoutSettingCursor:function e(){var r=t.getInputRef();r&&r.focus()},hasFocus:function e(){var r=t.getInputRef();return!!r&&r.hasFocus()},isEnabled:function e(){var r=t.getInputRef();return!!r&&r.isEnabled()},getSelection:function e(){var r=t.getInputRef();return r?r.getSelection():null},insertContentsAtCursor:function e(r){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";var i=t.getInputRef();i&&i.insertContentsAtCursor(r,a,n)},setCursor:function e(r,a){var n=t.getInputRef();n&&n.setCursor(r,a)},setCursorAtEnd:function e(){var r=t.getInputRef();r&&r.setCursorAtEnd()},setPlaceholder:function e(r){t.updatePlaceholder(r)},getContentsForCurrentSelection:function e(){var r=t.getInputRef();if(!r)return null;var a=r.getSelection();if(!a)return null;return r.getContentsForRange(a.index,a.length)},openReactionPopoverForLastMessage:function e(){t.reactionPopoverRef.current&&t.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:function e(){var r=t.getInputRef();if(!r)return false;var a=r.getSelection();return a&&0===a.index},isCursorAtEnd:function e(){var r=t.getInputRef();if(!r)return false;var a=r.getSelection();return a&&a.index===r.getLength()}}})}},{key:"unregisterInput",value:function e(t){if(!t)return;Object(ce["d"])({viewContext:le["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t})}},{key:"unmountPlaceholder",value:function e(){var t=this.getInputRef();if(!t)return;var r=t.container.querySelector(".ql-placeholder");r&&y.a.unmountComponentAtNode(r)}},{key:"updatePlaceholder",value:function e(t){var r=this.props,a=r.channelName,s=r.isSelfDm,l=r.teamId,c=r.channelId;var u=this.getInputRef();if(!u)return;var d=u.container.querySelector(".ql-placeholder");if(d){y.a.render(n.a.createElement(i["Provider"],{store:Object(o["d"])(l)},n.a.createElement($r,{channelId:c,channelName:a,forcePlaceholderText:t,isSelfDm:s})),d);var p=t||Qr({channelName:a,isSelfDm:s});var v=u.container.querySelector(".ql-editor");v.setAttribute("aria-label",p)}}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function e(t){if(!Object(de["a"])({e:t,isMenuVisible:Object(U["g"])()}))return;var r=Object(ue["a"])(t.target,function(e){return e.classList.contains("p-threads_flexpane")});if(r)return;var a=this.getInputRef();Object(j["c"])()?setTimeout(function(){return a.focus()},0):a.focus()}},{key:"startListeningToKeydown",value:function e(){if(this.shouldNotListenToKeyDownAgain)return;var t=this.props.userAttentionIsOnChat;if(!t)return;document.addEventListener("keydown",this.handleKeyDown)}},{key:"stopListeningToKeydown",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"sendMessage",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.useSendButton,i=r.featureWysiwygComposer,s=r.telemeter;var o=this.getInputRef();var l=o.value();var c=o.getContents();if(!Object(K["a"])(o.getContents(),{featureWysiwygComposer:i}))return null;Object(er["a"])()&&s.mark("msg_input_try_to_submit");o.clear();n&&o.focus();return this.props.prepareAndSendMessage({channelId:a,text:l,delta:i?new k.a(c.contents):null,includeBroadcastKeywordWarning:true,includePrivateFileReshareWarning:true}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){o.isEmpty()&&o.setContents(c)})}},{key:"snippetCallback",value:function e(){var t=this.getInputRef();this.props.openSnippetDialog({initialChannelId:this.props.channelId,initialText:t.displayValue(),initialContents:t.getContents&&t.getContents(),fromPrompt:true,viewContext:le["MESSAGE_CONTAINERS"].MESSAGE_PANE});t.clear()}},{key:"focus",value:function e(){var t=this.getInputRef();if(t){t.setCursorAtEnd();this.setState(function(){return{hasKeyboardFocus:true}})}}},{key:"blur",value:function e(){var t=this.getInputRef();t&&t.blur();this.onBlur()}},{key:"renderInput",value:function e(){var t=this.props,r=t.channelId,a=t.useSendButton,i=t.useContextBar;var s=this.state.hasKeyboardFocus;var o=i?"context-bar-text":void 0;var l=n.a.createElement(W["c"],{channelId:r,viewContext:le["MESSAGE_CONTAINERS"].MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:a,useLegacyDrafts:!Object(G["a"])(),ref:this.textyRef,enableEmojiButton:true,enableMentionButton:true,focusOnMount:true,focusOnPaste:true,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,maxLines:null,showFocusOutline:s,tabIndex:1,fileButtonTabIndex:2,ariaDescribedBy:o});if(Object(G["a"])())return n.a.createElement(V["a"],{ref:this.reactionPopoverRef,channelId:r},l);return l}},{key:"render",value:function e(){var t=this.props,r=t.typingNames,a=t.useSendButton,i=t.completeJoinerOnboardingCallback,s=t.userCanPost,o=t.channel,l=t.channelId,c=t.shouldShowTractorMessageCoachmark,u=t.setTractorMessageCoachmarkVisibility,d=t.shouldShowJoinerLandingPlaceCoachmark,p=t.shouldShowWorkflowItemCoachmark,v=t.appActionPickerEnabled;var m=this.state,h=m.textyValue,f=m.textyWysiwygLength;var b=null;d?b=n.a.createElement(te,{completeJoinerOnboarding:i}):c?b=n.a.createElement(se,{setTractorMessageCoachmarkVisibility:u}):p&&(b=n.a.createElement(te,{completeJoinerOnboarding:function e(){return Object(x["c"])(false)}}));if(this.props.isUnavailable)return null;if(l&&!s)return n.a.createElement(Cr,{channelId:this.props.channelId});if(l&&Object(C["isPreview"])(o))return n.a.createElement(Vr,{channelId:this.props.channelId});var g=n.a.createElement("div",{className:"p-workspace__message_pane_input"},n.a.createElement("div",{className:"p-workspace__message_pane_input_inner"},n.a.createElement(vr,null),this.renderInput(),n.a.createElement(Q["a"],{typingNames:r,snippetCallback:this.snippetCallback,inputText:h,wysiwygTextLength:f})),a&&n.a.createElement(W["b"],{isDisabled:!h,sendMessage:this.sendMessage,className:"p-workspace__message_pane_send",tabIndex:1}),v&&n.a.createElement($t,{key:l,channelId:l,viewContext:le["MESSAGE_CONTAINERS"].MESSAGE_PANE,tabIndex:5}));if(Object(G["a"])()){if(b)return n.a.createElement(oe["b"],{coachmarkElement:b,orientation:"top",style:{width:"100%"}},g);return g}return n.a.createElement(Y["a"],{component:this,order:2},g)}}]);return t}(a["Component"]);ra.displayName="MessagePaneInput";ra.defaultProps=ta;var aa=function e(t){var r=Object(w["a"])(t);var a=Object(I["d"])(t,r);var n=Object(f["map"])(Object(A["getTyperIdsInChannel"])(t,r),function(e){return Object(N["d"])(t,e)});n.sort(function(e,r){return Object(E["p"])(Object(q["getPrefCompliantMemberNameLowerCase"])(t,e),Object(q["getPrefCompliantMemberNameLowerCase"])(t,r))});var i=Object(S["s"])(t,r)||Object(Ie["isFeatureEnabled"])(t,"feature_announce_only_websocket")&&Object(C["getHasReadOnlyDraft"])(t,a);var s=n.map(function(e){return Object(q["getPrefCompliantMemberName"])(t,e)});var o=Object(Ie["getCurrentUserId"])(t);var l=Object(tr["getGroupForUser"])(t,"context_bar");var c=Object(Ie["isFeatureEnabled"])(t,"feature_context_bar");var u=c&&"test"===l;var d=Object(G["a"])()&&Object(Ie["isFeatureEnabled"])(t,"feature_channel_actions_client");return{channelId:r,channel:a,channelName:Object(C["getDisplayNameForChannel"])(t,a,{imIncludeAtSign:false}),isSelfDm:Object(C["isYou"])(o,a),userCanPost:i&&!Object(C["isArchived"])(a),typingNames:s.length>0?s:me["a"],useSendButton:Object(P["g"])(t,"msg_input_send_btn"),userAttentionIsOnChat:Object(H["e"])(t),teamId:Object(F["b"])(t),featureWysiwygComposer:Object(z["a"])(t),isUnavailable:Object(C["isUnavailable"])(t,a),telemeter:Object(ve["c"])({state:t}),shouldShowTractorMessageCoachmark:Object(M["c"])(t),shouldShowJoinerLandingPlaceCoachmark:Object(M["a"])(t),shouldShowWorkflowItemCoachmark:Object(D["f"])(t),useContextBar:u,appActionPickerEnabled:d}};var na={prepareAndSendMessage:function e(){return T["a"].apply(void 0,arguments)},currentUserStartedTyping:function e(){return A["currentUserStartedTyping"].apply(void 0,arguments)},currentUserEndedTyping:function e(){return A["currentUserEndedTyping"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return L["a"].apply(void 0,arguments)},openSnippetDialog:function e(){return B["a"].apply(void 0,arguments)},completeJoinerOnboardingCallback:function e(){return R["a"].apply(void 0,arguments)},setTractorMessageCoachmarkVisibility:function e(){return x["g"].apply(void 0,arguments)}};var ia=Object(G["a"])()?Object(he["a"])(ra,"MessagePaneInput",{index:5}):ra;var sa=Object(i["connect"])(aa,na)(ia);var oa=sa;var la=r(163);var ca=function e(t,r){if(!t)throw new Error("mountMessagePaneInput must be called with a teamId parameter");var a=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(la["a"],null,n.a.createElement(oa,null))),r)};var ua=ca;var da=r(44);Object(da["a"])("interop.mountMessagePaneInput",ua)},function(e,t,r){},,,,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(13);var s=r(119);var o=r(27);var l=r(2);var c=r.n(l);var u=r(207);var d=r(71);var p=r(12);var v=r(284);var m=r(858);var h=r(3);var f=r.n(h);var b=r(0);var g=r(15);var _=r(409);var y=r(2223);var O=r(533);var k=r(234);var E=r(4);var j=r(377);var C=r(281);var S=Object(g["b"])("Helper for handling history",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.oldest,n=r.latest,i=r.channelId,s=r.msgs,o=r.hasMore,l=r.pinCount,u=r.channelActionsCount,d=r.isLimited,p=r.deleted;var v=c.a.map(s,"ts");e(a||n?Object(_["a"])({msgs:s,channelId:i,oldest:a,latest:n,hasMore:o,isLimited:d,loading:false,deleted:p}):Object(_["a"])({msgs:s,channelId:i,isLimited:d,latest:c.a.max(v),oldest:c.a.min(v),hasMore:{hasMoreStart:o,hasMoreEnd:false},loading:false,deleted:p}));c.a.isNumber(l)&&e(Object(k["updatePinCount"])({channelId:i,count:l}));Object(E["isFeatureEnabled"])(t(),"feature_channel_actions_client")&&c.a.isNumber(u)&&e(Object(y["d"])({channelId:i,count:u}))});S.propTypes={oldest:b["b"].string,latest:b["b"].string,channelId:b["b"].string,msgs:b["b"].array,hasMore:b["b"].oneOfType([b["b"].object,b["b"].bool]),pinCount:b["b"].number,channelActionsCount:b["b"].number,isLimited:b["b"].bool,deleted:b["b"].array};var w=Object(g["b"])("Fetch conversation history",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.type,i=r.oldest,s=void 0===i?null:i,o=r.latest,l=void 0===o?null:o,u=r.reason,d=void 0===u?"message-pane-store/fetchHistory":u;if(!a||!n)return false;var v=t();var h=Object(O["isChannelLoading"])(v,a);if(h)return false;Object(p["a"])({getState:t}).info("HISTORY-FETCH","Fetching history for message pane: "+a+" oldest: "+s+" latest: "+l);if(l&&s){var b=e(Object(j["b"])({channelId:a,type:n,oldest:null,latest:l,reason:d}));var g=e(Object(j["b"])({channelId:a,type:n,oldest:s,latest:null,reason:d}));var _=Promise.all([b,g]).then(function(t){var r=t[0],n=r.msgs,i=r.hasMore,o=r.isLimited,u=r.pinCount,d=r.channelActionsCount,p=r.deleted;var v=t[1],m=v.msgs,h=v.hasMore,f=v.deleted;var b=c.a.uniqBy(n.concat(m),"ts");var g=c.a.uniq(c.a.concat(p,f));var _=c.a.map(b,"ts");e(S({channelId:a,msgs:b,isLimited:o,pinCount:u,channelActionsCount:d,hasMore:{hasMoreStart:i,hasMoreEnd:h},oldest:c.a.min([s,c.a.min(_)]),latest:c.a.max([l,c.a.max(_)]),deleted:g}))}).catch(function(t){Object(C["e"])(t,"Failed to fetch history for "+a,"message_pane_history_fetch_fail");e(Object(O["doneLoading"])({channelId:a}))});e(Object(O["startLoading"])({channelId:a,loadingOlder:true,request:_}));return _}l&&e(Object(m["searchInProductEducationIncrement"])());var y=e(Object(j["b"])({channelId:a,type:n,oldest:s,latest:l,reason:d})).then(function(t){e(S(f()({},t,{oldest:s,latest:l,channelId:a})))}).catch(function(t){Object(C["e"])(t,"Failed to fetch history for "+a,"message_pane_history_fetch_fail");e(Object(O["doneLoading"])({channelId:a}))});e(Object(O["startLoading"])({channelId:a,loadingOlder:!!l,request:y}));return y});w.propTypes={channelId:b["b"].string.isRequired,type:b["b"].string,oldest:b["b"].string,latest:b["b"].string,reason:b["b"].string};var I=w;var T=r(101);var A=r(19);var N=r(11);var P=Object(g["b"])("Save the scrollmark if the current user is viewing a public channel that they are a member of",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.scrollmark;var i=t();var s=Object(A["d"])(i,a);if(Object(N["isPublicChannel"])(s)&&!Object(N["isMemberOfChannel"])(s))return;e(Object(T["d"])({channelId:a,scrollmark:n}))});P.propTypes={channelId:b["b"].string,scrollmark:b["b"].object};var R=r(217);var M=r(448);var x=r(329);var D=r(103);var F=r(122);var L=r(98);var B=r(67);var U=r(423);var q=r(686);var G=r(73);var H=r(385);var W=r(1352);var V=r(25);var K=r(29);var z=Object(V["a"])("Call to trigger App Home Open Event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.appHomeSection;return e(Object(K["a"])({method:"apps.home.dispatchOpenEvent",args:{id:a,type:n},reason:"app-home-logging"})).catch(l["noop"])});z.propTypes={channelId:b["b"].string.isRequired,appHomeSection:b["b"].string};var Q=r(302);var Y=r(195);var J=r(178);var X=r(41);var Z=r(109);var $=r(93);var ee=r(245);var te=r(23);var re=r(209);var ae=r(683);var ne=r(181);var ie=r(1790);var se=r(1169);var oe=r(5);var le=r.n(oe);var ce=r(6);var ue=r.n(ce);var de=r(7);var pe=r.n(de);var ve=r(8);var me=r.n(ve);var he=r(9);var fe=r.n(he);var be=r(16);var ge=r.n(be);var _e=r(74);var ye=r.n(_e);var Oe=r(87);var ke=r(1574);var Ee=r(38);var je=r(586);var Ce=r(1106);var Se=r(21);var we=r(39);var Ie=r(208);var Te=r(168);var Ae=r(1859);var Ne=r(2414);var Pe=r(442);var Re=r(228);var Me=r(1068);var xe=r(889);var De=r(3945);var Fe=r(1801);var Le={channelId:b["b"].string,channelType:b["b"].string,hasLimitedHistory:b["b"].bool,isShared:b["b"].bool,isSlackbotIm:b["b"].bool,newxpOnboardingStep:b["b"].string};var Be={channelId:null,channelType:null,hasLimitedHistory:false,isShared:false,isSlackbotIm:false,newxpOnboardingStep:null};var Ue=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.channelType,i=t.hasLimitedHistory,s=t.isShared,o=t.isSlackbotIm,l=t.newxpOnboardingStep;if(o){if(l&&l!==Ea.COMPLETE)return n.a.createElement(Ca,{step:l});return n.a.createElement(da,null)}if(i)return n.a.createElement(Kr,{channelId:r});if("channel"===a||"private"===a){if(s)return n.a.createElement(ga,{channelId:r});return n.a.createElement(tr,{channelId:r})}if("im"===a){if(s)return n.a.createElement(Pr,{channelId:r});return n.a.createElement(Er,{channelId:r})}if("mpim"===a)return n.a.createElement(oa,{channelId:r});Object(p["b"])().warn('Unknown foreword type "'+a+'"');return null}}]);return t}(a["PureComponent"]);Ue.displayName="Foreword";Ue.defaultProps=Be;function qe(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return null;return{isShared:Object(N["isExternallySharedChannel"])(a),isSlackbotIm:Object(N["isSlackbot"])(a),newxpOnboardingStep:Object(v["j"])(e)}}var Ge=Object(i["connect"])(qe)(Ue);var He=r(24);var We=r(10);var Ve=r(164);var Ke=r(17);var ze=r(301);var Qe=r(430);var Ye=r(139);var Je=r(1566);var Xe=r(20);var Ze=Object(Xe["b"])("TS.ui.purpose_dialog.start",c.a.noop);var $e=r(48);var et=r(113);var tt=r(84);var rt=r(1203);var at=r(1097);var nt=r(1208);var it=r(1791);var st=new We["b"]("dialogs_purpose");var ot={channelId:b["b"].string.isRequired,currentRawPurpose:b["b"].string,currentFormattedPurpose:b["b"].oneOfType([b["b"].string,b["b"].object]),featureM11nChannelDetails:b["b"].bool,logger:b["b"].object.isRequired,submitChannelPurpose:b["b"].func,featureChangePurposeToDescription:b["b"].bool};var lt={currentRawPurpose:void 0,currentFormattedPurpose:void 0,featureM11nChannelDetails:false,submitChannelPurpose:l["noop"],featureChangePurposeToDescription:false};var ct=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSubmit=r.onSubmit.bind(r);r.renderInput=r.renderInput.bind(r);r.input=n.a.createRef();return r}pe()(t,[{key:"onSubmit",value:function e(){var t=this.input.current&&this.input.current.getWrappedInstance().value();var r=this.props.featureChangePurposeToDescription;if(void 0===t||null===t){r&&this.props.logger.error("Channel Description dialog submitted with undefined value");this.props.logger.error("Channel Purpose dialog submitted with undefined value");return}if(t===this.props.currentRawPurpose)return;this.props.submitChannelPurpose({channelId:this.props.channelId,purpose:t})}},{key:"renderInput",value:function e(t){var r=t.modules,a=t.isOpen;var i=this.props,s=i.currentFormattedPurpose,o=i.featureChangePurposeToDescription;return n.a.createElement(rt["b"],{initialText:s,focusOnMount:true,minLines:3,modules:r,isAutocompleteOpen:a,maxLength:N["CHANNEL_PURPOSE_MAX_LENGTH"],ariaLabel:o?st.t("Edit channel description"):st.t("Edit channel purpose"),ref:this.input})}},{key:"render",value:function e(){if(!this.props.featureM11nChannelDetails)return null;var t=this.props.featureChangePurposeToDescription;return n.a.createElement(tt["a"],f()({className:"p-channel_purpose_dialog",title:t?st.t("Edit channel description"):st.t("Edit channel purpose"),goButtonText:t?st.t("Update description"):st.t("Update purpose"),onGo:this.onSubmit,footerText:st.t("Describe what this channel is for.")},this.props),n.a.createElement(at["a"],{renderInput:this.renderInput,completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,shouldCompleteOnTab:false}))}}]);return t}(a["Component"]);ct.displayName="ChannelPurposeDialog";ct.defaultProps=lt;var ut=function e(t,r){var a=r.channelId;var n=Object(p["a"])({label:"CHANNEL-PURPOSE",state:t});var i=Object(A["d"])(t,a);var s=i&&i.purpose&&i.purpose.value;var o=s&&Object(nt["a"])(t,{text:s});return{channelId:i.id,currentRawPurpose:s,currentFormattedPurpose:o,featureM11nChannelDetails:Object(E["isFeatureEnabled"])(t,"feature_m11n_channel_details"),featureChangePurposeToDescription:Object(E["isFeatureEnabled"])(t,"feature_change_purpose_to_description"),logger:n}};var dt=function e(t){return{submitChannelPurpose:function e(){return t(et["D"].apply(void 0,arguments))}}};var pt=Object(i["connect"])(ut,dt)(ct);var vt=r(1500);var mt=r(4174);var ht=r(1100);var ft=r(1446);var bt=r(45);var gt=r(22);var _t=r(187);var yt=new We["b"]("message_pane_foreword");var Ot={onClick:b["b"].func};var kt={onClick:c.a.noop};var Et=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"render",value:function e(){var t=this.props.onClick;return n.a.createElement(_t["a"],{className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(gt["b"],{type:"plus",size:"inherit"})," ",yt.t("Add an app"))}}]);return t}(a["PureComponent"]);Et.displayName="AppButton";Et.defaultProps=kt;var jt=Et;var Ct=new We["b"]("message_pane_foreword");var St={isPrivate:b["b"].bool,onClick:b["b"].func};var wt={isPrivate:false,onClick:c.a.noop};var It=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"render",value:function e(){var t=this.props,r=t.isPrivate,a=t.onClick;var i=void 0;i=r?Ct.t("Add people to this private channel",{fallbackHash:"e39d2befa2a64ec5522429e9d4be5aace4c8f08b"}):Ct.t("Add people to this channel",{fallbackHash:"379e588d09f8d3998101d407aac8b99c9555d635"});return n.a.createElement(_t["a"],{className:"p-message_pane__foreword__button",onClick:a},n.a.createElement(gt["b"],{type:"user",size:"inherit"})," ",i)}}]);return t}(a["PureComponent"]);It.displayName="InviteButton";It.defaultProps=wt;var Tt=It;var At=r(138);var Nt=new We["b"]("message_pane_foreword");var Pt={onClick:b["b"].func,featureChangePurposeToDescription:b["b"].bool};var Rt={onClick:c.a.noop,featureChangePurposeToDescription:false};var Mt=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"render",value:function e(){var t=this.props,r=t.onClick,a=t.featureChangePurposeToDescription;return n.a.createElement(_t["a"],{className:"p-message_pane__foreword__button",onClick:r},n.a.createElement(gt["b"],{type:"pencil",size:"inherit"})," ",a?Nt.t("Set a description"):Nt.t("Set a purpose"))}}]);return t}(a["PureComponent"]);Mt.displayName="PurposeButton";Mt.defaultProps=Rt;var xt=Object(At["a"])("feature_change_purpose_to_description")(Mt);var Dt={channelId:b["b"].string,purpose:b["b"].string,isUserRestricted:b["b"].bool,isChannelArchived:b["b"].bool,channelType:b["b"].string,clogger:b["b"].object.isRequired,canInviteToChannel:b["b"].bool,canAddAppsToChannel:b["b"].bool,startChannelInviteModal:b["b"].func,openAppsBrowserModal:b["b"].func,openModal:b["b"].func,featureSonicChannelInviteModal:b["b"].bool,featureM11nAppsBrowser:b["b"].bool};var Ft={channelId:null,purpose:null,isUserRestricted:false,isChannelArchived:false,channelType:null,canInviteToChannel:false,canAddAppsToChannel:false,startChannelInviteModal:l["noop"],openModal:l["noop"],openAppsBrowserModal:l["noop"],featureSonicChannelInviteModal:false,featureM11nAppsBrowser:false};var Lt=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPurposeButtonClick=r.onPurposeButtonClick.bind(r);r.onInviteButtonClick=r.onInviteButtonClick.bind(r);r.onAppButtonClick=r.onAppButtonClick.bind(r);return r}pe()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(Ee["a"])()?this.props.openModal({element:n.a.createElement(pt,{channelId:t})}):Ze(t)}},{key:"onInviteButtonClick",value:function e(){var t=this.props,r=t.channelId,a=t.clogger,n=t.featureSonicChannelInviteModal;a.track(Se["l"].CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}});n?this.props.startChannelInviteModal({channelId:r}):Object(vt["a"])(r,[],"channel_foreword")}},{key:"onAppButtonClick",value:function e(){var t;var r=this.props,a=r.channelId,n=r.clogger;var i=Se["l"].CHANNEL_FOREWORD;var s=(t={},le()(t,Se["y"].action,Se["w"].CLICK),le()(t,Se["y"].ui_element,Se["z"].BTN_ADD_APPS),t);n.track(i,{contexts:le()({},Se["c"].ui_context,s)});this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal({addAppsVariant:true,referringEventId:i,referringUiContext:s,channelId:a}):Object(ht["e"])(i,s)}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.canAddAppsToChannel,i=t.isUserRestricted,s=t.purpose,o=t.channelType,l=t.canInviteToChannel,c=t.isChannelArchived;var u=void 0;s||i||c||(u=n.a.createElement(xt,{channelId:r,onClick:this.onPurposeButtonClick}));var d=void 0;a&&(d=n.a.createElement(jt,{onClick:this.onAppButtonClick}));var p=void 0;l&&(p=n.a.createElement(Tt,{onClick:this.onInviteButtonClick,isPrivate:"private"===o}));return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},u,d,p)}}]);return t}(a["PureComponent"]);Lt.displayName="ChannelForewordButtons";Lt.defaultProps=Ft;function Bt(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return{};var n=Object(He["b"])(e);var i=a.purpose?a.purpose.value:null;var s=Object($["L"])(e,r);var o=Object($["B"])(e,r);return{purpose:i,isUserRestricted:Object(Ke["isRestricted"])(n),isChannelArchived:Object(N["isArchived"])(a),channelType:Object(N["getChannelType"])(a),clogger:Object(bt["a"])({state:e}),canInviteToChannel:s,canAddAppsToChannel:o,featureSonicChannelInviteModal:Object(E["isFeatureEnabled"])(e,"feature_sonic_channel_invite_modal"),featureM11nAppsBrowser:Object(E["isFeatureEnabled"])(e,"feature_m11n_apps_browser")}}var Ut=function e(t){return{startChannelInviteModal:function e(){return t(mt["b"].apply(void 0,arguments))},openAppsBrowserModal:function e(){return t(ft["a"].apply(void 0,arguments))},openModal:function e(){return t($e["openModal"].apply(void 0,arguments))}}};var qt=Object(i["connect"])(Bt,Ut)(Lt);var Gt=r(795);var Ht=new We["b"]("message_pane_foreword");var Wt={channelId:b["b"].string,description:b["b"].node,purpose:b["b"].string,isUserRestricted:b["b"].bool,userCanSetPurposeForChannel:b["b"].bool,featureChangePurposeToDescription:b["b"].bool,openModal:b["b"].func};var Vt={channelId:null,description:null,purpose:null,isUserRestricted:false,userCanSetPurposeForChannel:true,featureChangePurposeToDescription:false,openModal:l["noop"]};var Kt=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPurposeButtonClick=r.onPurposeButtonClick.bind(r);return r}pe()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(Ee["a"])()?this.props.openModal({element:n.a.createElement(pt,{channelId:t})}):Ze(t)}},{key:"maybeRenderPurpose",value:function e(){var t=this.props,r=t.purpose,a=t.featureChangePurposeToDescription;if(!r)return null;return n.a.createElement("span",null," ",a?Ht.t("Description:"):Ht.t("Purpose:")," ",n.a.createElement(Gt["a"],{text:r}))}},{key:"maybeRenderPurposeEditLink",value:function e(){var t=this.props,r=t.purpose,a=t.isUserRestricted,i=t.userCanSetPurposeForChannel;if(!r||a||!i)return null;return n.a.createElement("span",{className:"no_wrap"}," ","(",n.a.createElement(_t["a"],{onClick:this.onPurposeButtonClick},Ht.t("edit")),")")}},{key:"render",value:function e(){var t=this.props.description;return n.a.createElement("div",{className:"p-message_pane__foreword__description"},t,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]);return t}(a["PureComponent"]);Kt.displayName="ChannelForewordDescription";Kt.defaultProps=Vt;var zt=function e(t,r){var a=Object($["y"])(t,r.channelId),n=a.ok;return{userCanSetPurposeForChannel:n}};var Qt=function e(t){return{openModal:function e(){return t($e["openModal"].apply(void 0,arguments))}}};var Yt=Object(i["connect"])(zt,Qt)(Object(At["a"])("feature_change_purpose_to_description")(Kt));var Jt=new We["b"]("message_pane_foreword");var Xt={channelId:b["b"].string,purpose:b["b"].string,creatorIsYou:b["b"].bool,createdById:b["b"].string,dateCreated:b["b"].number,isPrivate:b["b"].bool,isUserRestricted:b["b"].bool,featureLongerChannelNames:b["b"].bool.isRequired};var Zt={channelId:null,purpose:null,creatorIsYou:false,createdById:null,dateCreated:null,isPrivate:false,isUserRestricted:false};var $t=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"renderTitle",value:function e(){var t=this.props,r=t.channelId,a=t.featureLongerChannelNames;var i=ge()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!a});var s={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:i},a?n.a.createElement(Je["a"],{channelId:r}):n.a.createElement(Ye["a"],{channelId:r,inline:true,iconProps:s}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.channelId,a=t.createdById,i=t.creatorIsYou,s=t.dateCreated,o=t.isPrivate,l=t.purpose,c=t.isUserRestricted,u=t.featureLongerChannelNames;var d=void 0;if(s){d=Object(Ve["l"])(s);d=Object(Ve["f"])(s)||Object(Ve["g"])(s)?d.toLowerCase():Jt.t("on {date}",{date:d})}else d=Jt.rt("on {date}",{date:n.a.createElement(ze["a"],{type:"unknown"})});var p={inherit:true,align:"baseline"};var v=u?n.a.createElement("strong",null,n.a.createElement(Je["a"],{channelId:r,boldIcon:true})):n.a.createElement(Ye["a"],{channelId:r,inline:true,iconProps:p,className:"bold"});var m=void 0;if(i)m=o?Jt.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:d,name:v}):Jt.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:d,name:v});else{var h=a?n.a.createElement(Qe["a"],{id:a,showTooltip:true}):n.a.createElement(ze["a"],{type:"unknown"});m=o?Jt.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:h,date:d,name:v}):Jt.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:h,date:d,name:v})}return n.a.createElement(Yt,{channelId:r,description:m,purpose:l,isUserRestricted:c})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isPrivate;var i=ge()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return n.a.createElement("div",{className:i},this.renderTitle(),this.renderDescription(),n.a.createElement(qt,{channelId:r}))}}]);return t}(a["PureComponent"]);$t.displayName="ChannelForeword";$t.defaultProps=Zt;function er(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return{};var n=Object(He["b"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(N["isPrivateChannel"])(a);return{purpose:i,creatorIsYou:n&&n.id===a.creator,createdById:a.creator,dateCreated:a.created,isPrivate:s,isUserRestricted:Object(Ke["isRestricted"])(n),featureLongerChannelNames:Object(E["isFeatureEnabled"])(e,"feature_longer_channel_names")}}var tr=Object(i["connect"])(er)($t);var rr=r(182);var ar=r(100);var nr=r(34);var ir=r(894);var sr=r(289);var or=r(28);var lr=r(51);var cr=new We["b"]("message_pane_foreword");var ur={botName:b["b"].string,botId:b["b"].string,clogger:b["b"].object.isRequired,openAboutAppWithMemberId:b["b"].func};var dr={botName:null,botId:null,openAboutAppWithMemberId:void 0};var pr=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}pe()(t,[{key:"onClick",value:function e(){var t=this.props.botId;this.props.openAboutAppWithMemberId({memberId:t});var r=this.props.clogger;r.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:true})}},{key:"render",value:function e(){var t=this.props.botName;return n.a.createElement(_t["a"],{className:"p-message_pane__foreword__button",onClick:this.onClick},n.a.createElement(gt["b"],{type:"lightbulb-o",size:"inherit"})," ",cr.t("How does {name} work?",{name:Object(We["o"])(t)}))}}]);return t}(a["PureComponent"]);pr.displayName="AppHelpButton";pr.defaultProps=dr;function vr(e,t){var r=t.botId;var a=Object(He["d"])(e,r);var n=Object(bt["a"])({state:e});if(!a)return{clogger:n};var i=Object(Ke["getMemberMentionName"])(a);return{botName:i,clogger:n}}var mr=function e(t){return{openAboutAppWithMemberId:function e(){return t(ir["c"].apply(void 0,arguments))}}};var hr=Object(i["connect"])(vr,mr)(pr);var fr=new We["b"]("message_pane_foreword");var br={isAppSpaceEnabled:b["b"].bool.isRequired,memberId:b["b"].string,type:b["b"].oneOf(["self","bot","member"]).isRequired,prefWhoCanSeeThis:b["b"].bool,openAboutAppWithMemberId:b["b"].func,showMemberProfile:b["b"].func.isRequired,featureReactMemberProfileCard:b["b"].bool.isRequired};var gr={memberId:null,prefWhoCanSeeThis:false,openAboutAppWithMemberId:l["noop"]};var _r=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMemberClick=r.onMemberClick.bind(r);return r}pe()(t,[{key:"onMemberClick",value:function e(t){t.preventDefault();var r=this.props,a=r.memberId,n=r.featureReactMemberProfileCard;this.canAppSpaceBeUsed()?this.props.openAboutAppWithMemberId({memberId:a}):n?this.props.showMemberProfile({memberId:a}):Object(Te["i"])(a)}},{key:"canAppSpaceBeUsed",value:function e(){var t=this.props,r=t.isAppSpaceEnabled,a=t.type;return"bot"===a&&r}},{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(or["c"],{onClick:this.onMemberClick},n.a.createElement(sr["b"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true})))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.memberId,a=t.type;if("self"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},fr.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var i=fr.rt("This is the very beginning of your direct message history with {name}",{name:n.a.createElement(Qe["a"],{id:r,showTooltip:true})});this.props.prefWhoCanSeeThis&&(i=fr.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:n.a.createElement(Qe["a"],{id:r,showTooltip:true})},function(e){var t=e.text,r=e.key;return n.a.createElement(lr["a"],{key:r,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},i)}},{key:"renderButtons",value:function e(){var t=this.props.memberId;if(this.canAppSpaceBeUsed())return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},n.a.createElement(hr,{botId:t}));return null}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]);return t}(a["PureComponent"]);_r.displayName="BaseImForeword";_r.defaultProps=gr;function yr(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return{};var n=Object(N["getMemberIdFromIm"])(a);var i=Object(He["d"])(e,n);var s=Object(E["getCurrentUserId"])(e);var o=void 0;o=n===s?"self":Object(Ke["isAppOrBot"])(i)?"bot":"member";return{isAppSpaceEnabled:Object(rr["isAppSpaceEnabled"])(e),memberId:n,type:o,prefWhoCanSeeThis:Object(nr["g"])(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(E["isFeatureEnabled"])(e,"feature_react_member_profile_card")}}var Or=function e(t){return{openAboutAppWithMemberId:function e(){return t(ir["c"].apply(void 0,arguments))},showMemberProfile:function e(){return t(ar["j"].apply(void 0,arguments))}}};var kr=Object(i["connect"])(yr,Or)(_r);kr.propTypes={channelId:b["b"].string};kr.defaultProps={channelId:null};var Er=kr;var jr=r(35);var Cr=r(31);var Sr=r(512);var wr=new We["b"]("message_pane_foreword");var Ir={memberId:b["b"].string,sharedTeam:b["b"].object};var Tr={memberId:void 0,sharedTeam:void 0};var Ar=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(sr["b"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.sharedTeam,a=t.memberId;var i=!r||Object(Cr["isUnknown"])(r)?n.a.createElement(Sr["a"],{type:"unknown"}):n.a.createElement("strong",null,Object(Cr["getTeamDisplayName"])(r));var s=wr.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:n.a.createElement(Qe["a"],{id:a,showTooltip:true}),team:i});return n.a.createElement("div",{className:"p-message_pane__foreword__description"},s)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]);return t}(a["PureComponent"]);Ar.displayName="ImSharedForeword";Ar.defaultProps=Tr;function Nr(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return null;var n=Object(He["d"])(e,Object(N["getMemberIdFromIm"])(a));var i=Object(Ke["getMemberTeamId"])(n);var s=Object(jr["j"])(e,i);return{memberId:Object(N["getMemberIdFromIm"])(a),sharedTeam:s}}var Pr=Object(i["connect"])(Nr)(Ar);var Rr=r(81);var Mr=r(530);var xr=r(226);var Dr=r(394);var Fr=r(357);var Lr=r(1145);var Br=r(125);var Ur=new We["b"]("message_pane_foreword");var qr={channelType:b["b"].string.isRequired,channelName:b["b"].string,clogger:b["b"].object.isRequired,showPricingPlans:b["b"].func.isRequired,workspaceName:b["b"].string,teamCreationDateInSeconds:b["b"].number,teamMessageLimitInSeconds:b["b"].number,isCutoffDateTreatmentGroup:b["b"].bool,isTimeHiddenTreatmentGroup:b["b"].bool,featureTimeBasedMessageLimitV0Translations:b["b"].bool};var Gr={channelName:"",workspaceName:"",teamCreationDateInSeconds:0,teamMessageLimitInSeconds:0,isCutoffDateTreatmentGroup:false,isTimeHiddenTreatmentGroup:false,featureTimeBasedMessageLimitV0Translations:false};var Hr=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.pricingPlansPageUrl="pricing?ui_step=42&ui_element="+r.getClogUiElementVal();r.onClickLearnMore=r.onClickLearnMore.bind(r);return r}pe()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"onClickLearnMore",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}});this.props.showPricingPlans({pricingPlansPageUrl:this.pricingPlansPageUrl,source:"limited_history_foreword"})}},{key:"getClogUiElementVal",value:function e(){var t=this.props.channelType;if("mpim"===t||"im"===t)return 33;return 34}},{key:"formatMessagesHiddenTime",value:function e(t){if(!this.props.featureTimeBasedMessageLimitV0Translations)return"";var r=Object(Dr["a"])(t,{unitsIn:"seconds",unitsOut:"years"});var a=Object(Dr["a"])(t,{unitsIn:"seconds",unitsOut:"months"});var n=Object(Dr["a"])(t,{unitsIn:"seconds",unitsOut:"weeks"});var i=Object(Dr["a"])(t,{unitsIn:"seconds",unitsOut:"days"});i<1&&(i=1);var s="";s=i<30?Ur.t("{days, plural, =1 {1 day} other {# days}}",{days:i}):n<16?Ur.t("{weeks, plural, =1 {1 week} other {# weeks}}",{weeks:n}):a<18?Ur.t("{months, plural, =1 {1 month} other {# months}}",{months:a}):Ur.t("{years, plural, =1 {more than a year} other {more than # years}}",{years:r,fallbackHash:"a089f4bc63e29c3406e93a0e7a1bec7886dc07b2"});return s}},{key:"render",value:function e(){var t=this.props,r=t.channelName,i=t.channelType,s=t.workspaceName,o=t.teamCreationDateInSeconds,l=t.teamMessageLimitInSeconds,c=t.isCutoffDateTreatmentGroup,u=t.isTimeHiddenTreatmentGroup,d=t.featureTimeBasedMessageLimitV0Translations;var p=true;var v="";var m="";var h=Ur.t("Learn More");if(d&&u&&l){p=false;v=Ur.t("Unlock {formatMessagesHiddenTime} of past messages in {workspaceName}",{formatMessagesHiddenTime:this.formatMessagesHiddenTime(Object(Lr["a"])(Object(Br["a"])(l),Object(Br["a"])(o))),workspaceName:Object(We["o"])(s)});m=Ur.t("To view and search all the messages in your workspace\u2019s history, upgrade to one of our paid plans.");h=Ur.t("See Upgrade Options")}else if(d&&c&&l){p=false;v=Ur.t("Unlock messages prior to {priorToDate} in {workspaceName}",{priorToDate:Object(Fr["a"])(l,"{date}"),workspaceName:Object(We["o"])(s)});m=Ur.t("To view and search all the messages in your workspace\u2019s history, rather than just the {maxMesssageLimitCount} most recent, upgrade to one of our paid plans.",{maxMesssageLimitCount:Object(xr["a"])(1e4)});h=Ur.t("See Upgrade Options")}else if("mpim"===i||"im"===i){m=Ur.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans.");v=Ur.t("There\u2019s more to this conversation")}else{v=Ur.t("There\u2019s more to the conversation in {name}",{name:r});m=Ur.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")}return n.a.createElement("div",{className:"p-message_pane__limited_history_foreword","data-qa":"msg_lim_header"},n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline"},p&&n.a.createElement(a["Fragment"],null,n.a.createElement(Rr["b"],{text:":speech_balloon:",emojiSize:Rr["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0"),v),n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading"},m),n.a.createElement(or["d"],{onClick:this.onClickLearnMore,"data-qa":"learn_more_btn",size:"small"},h))}}]);return t}(a["PureComponent"]);Hr.displayName="LimitedHistoryForeword";Hr.defaultProps=Gr;function Wr(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return{};var n=Object(jr["d"])(e);var i=n?Object(Cr["getTeamDisplayName"])(n):"";var s=Object(Cr["getTeamCreationDateTimestamp"])(n);var o=Object(Cr["getTeamMessageLimitTimestamp"])(n);var l=0;o>0&&(l=o/1e6);return{channelType:Object(N["getChannelType"])(a),channelName:Object(N["getDisplayNameForChannel"])(e,a),clogger:Object(bt["a"])({state:e}),workspaceName:i,teamCreationDateInSeconds:s,teamMessageLimitInSeconds:l,isCutoffDateTreatmentGroup:"treatment_cutoff_date"===Object(F["getGroupForUser"])(e,"lc_time_based_message_limit_v0"),isTimeHiddenTreatmentGroup:"treatment_time_hidden"===Object(F["getGroupForUser"])(e,"lc_time_based_message_limit_v0")}}var Vr={showPricingPlans:Mr["showPricingPlans"]};var Kr=Object(i["connect"])(Wr,Vr)(Object(At["a"])("feature_time_based_message_limit_v0_translations")(Hr));var zr=r(1079);var Qr=r(239);var Yr=r(216);var Jr=r(317);var Xr=r(1217);var Zr=r(794);var $r=new We["b"]("message_pane_foreword");var ea={channelId:b["b"].string.isRequired,memberIds:b["b"].arrayOf(b["b"].string),externalTeams:b["b"].arrayOf(b["b"].object),notificationPermission:b["b"].string,notificationSetting:b["b"].oneOf(["everything","mentions_dms","nothing"]),featureReactMessages:b["b"].bool,prefWhoCanSeeThis:b["b"].bool,openChannelNotificationPrefsModal:b["b"].func,openPrefsModal:b["b"].func,featureReactMemberProfileCard:b["b"].bool.isRequired};var ta={memberIds:[],externalTeams:[],notificationPermission:"na",notificationSetting:"everything",featureReactMessages:true,prefWhoCanSeeThis:false,openChannelNotificationPrefsModal:l["noop"],openPrefsModal:l["noop"]};var ra=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openPrefsDialog=r.openPrefsDialog.bind(r);r.openChannelPrefsDialog=r.openChannelPrefsDialog.bind(r);r.state=Object(Qr["m"])();return r}pe()(t,[{key:"componentWillReceiveProps",value:function e(t){this.props.notificationPermission!==t.notificationPermission&&this.setState(function(){return Object(Qr["m"])()})}},{key:"getNotificationWarningText",value:function e(){var t=this;var r=this.state,a=r.notificationsEnabled,i=r.notificationDisabledType;if(a)return null;switch(i){case"not_yet_allowed":return $r.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(e){var r=e.key,a=e.text;return n.a.createElement(_t["a"],{onClick:t.openPrefsDialog,key:r},a)});case"not_allowed":return $r.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return $r.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,r=e.text;return n.a.createElement(Jr["a"],{target:"_blank",key:t,href:"/downloads"},r)});default:return null}}},{key:"openPrefsDialog",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"openChannelPrefsDialog",value:function e(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId})}},{key:"renderAvatars",value:function e(){var t=this.props,r=t.memberIds,a=t.featureReactMemberProfileCard;var i=r.map(function(e){return n.a.createElement(Yr["b"],{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56,showCard:a})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},i)}},{key:"renderTeamName",value:function e(t){if(Object(Cr["isUnknown"])(t))return n.a.createElement(Sr["a"],{type:"unknown"});return Object(Cr["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.memberIds,a=t.externalTeams;if(a.length){var i=a.map(this.renderTeamName);var s=$r.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(We["g"])(i,{noEscape:true,react:true,strong:true})});return n.a.createElement("div",{className:"p-message_pane__foreword__description"},s,this.renderDescriptionActions())}var o=r.map(function(e){return n.a.createElement(Qe["a"],{id:e,showTooltip:true})});var l=$r.rt("This is the very beginning of your direct message history with {names}",{names:Object(We["g"])(o,{noEscape:true,react:true})});this.props.prefWhoCanSeeThis&&(l=$r.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(We["g"])(o,{noEscape:true,react:true}),number:o.length+1},function(e){var t=e.text,r=e.key;return n.a.createElement(Jr["a"],{key:r,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description"},l,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function e(){var t=this.getNotificationWarningText();if(t)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},t);if(!this.props.featureReactMessages)return null;var r=this.props.notificationSetting;if("everything"===r)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},$r.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton());if("mentions_dms"===r)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},$r.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton());return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},$r.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function e(){if(!this.props.featureReactMessages)return null;return n.a.createElement(_t["a"],{onClick:this.openChannelPrefsDialog},$r.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]);return t}(a["PureComponent"]);ra.displayName="BaseMpimForeword";ra.defaultProps=ta;var aa=Object(u["createSelector"])(function(e,t){var r=t.channelId;return Object(A["d"])(e,r)},E["getCurrentUserId"],function(e,t){var r=Object(N["getMemberIdsFromMpim"])(e);return Object(l["without"])(r,t)});function na(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return null;var n=[];if(Object(N["isExternallySharedChannel"])(a)){var i=Object(N["getPendingAndConnectedTeamIds"])(e,a,{includeSelfTeamId:true});var s=Object(Cr["omitCurrentTeamId"])(e,i);n=s.map(function(t){return Object(jr["j"])(e,t)})}return{memberIds:aa(e,{channelId:r}),externalTeams:n,notificationPermission:Object(zr["getNotificationPermission"])(e),notificationSetting:Object(Qr["g"])(e,r),featureReactMessages:Object(E["isFeatureEnabled"])(e,"feature_react_messages"),prefWhoCanSeeThis:Object(nr["g"])(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(E["isFeatureEnabled"])(e,"feature_react_member_profile_card")}}function ia(e){return{openChannelNotificationPrefsModal:function t(){return e(Xr["a"].apply(void 0,arguments))},openPrefsModal:function t(){return e(Zr["a"].apply(void 0,arguments))}}}var sa=Object(i["connect"])(na,ia)(ra);sa.propTypes={channelId:b["b"].string};sa.defaultProps={channelId:null};var oa=sa;var la=new We["b"]("message_pane_foreword");var ca="USLACKBOT";var ua=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=n.a.createElement("h1",{className:"p-message_pane__foreword__title"},la.t("Hi, Slackbot here!"));var r=n.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},n.a.createElement(Yr["b"],{userId:ca,size:48,className:"p-message_pane__foreword__avatar"}),n.a.createElement("div",null,n.a.createElement("p",null,la.rt("You can ask me simple questions about how Slack works, or just type a few keywords. For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.")),n.a.createElement("p",{className:"margin_0"},la.rt("I\u2019m only a bot, but I\u2019ll do my best to answer! If I don\u2019t understand, I\u2019ll search the <a>Help Center</a>.",null,function(e){var t=e.key,r=e.text;return n.a.createElement(lr["a"],{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},r)}))));var a=ge()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return n.a.createElement("div",{className:a},t,r)}}]);return t}(a["Component"]);ua.displayName="SlackbotForeword";var da=ua;var pa=r(270);var va=new We["b"]("message_pane_foreword");var ma={channel:b["b"].object,channelId:b["b"].string,isPrivate:b["b"].bool,isPendingShared:b["b"].bool,sharedTeams:b["b"].arrayOf(b["b"].shape({id:b["b"].string.isRequired,name:b["b"].string})),externalTeams:b["b"].arrayOf(b["b"].shape({id:b["b"].string.isRequired,name:b["b"].string})),purpose:b["b"].string,isUserRestricted:b["b"].bool,featureLongerChannelNames:b["b"].bool.isRequired};var ha={channel:null,channelId:null,isPrivate:false,isPendingShared:false,sharedTeams:[],externalTeams:[],purpose:null,isUserRestricted:false};var fa=function(e){fe()(t,e);function t(){ue()(this,t);var e=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderTeamName=e.renderTeamName.bind(e);return e}pe()(t,[{key:"renderTitle",value:function e(){var t=this.props,r=t.channel,a=t.featureLongerChannelNames;var i=ge()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!a});var s={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:i},a?n.a.createElement(Je["a"],{channel:r}):n.a.createElement(Ye["a"],{channel:r,inline:true,iconProps:s}))}},{key:"renderAvatars",value:function e(){var t=this.props,r=t.channel,a=t.sharedTeams;if(c.a.isEmpty(a))return null;var i=a.map(function(e){var t=Object(N["isPendingSharedForTeamId"])(r,e.id);return n.a.createElement(pa["b"],{key:e.id,id:e.id,size:56,isPendingShared:t,className:"p-message_pane__foreword__avatar"})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},i)}},{key:"renderTeamName",value:function e(t){if(Object(Cr["isUnknown"])(t))return n.a.createElement(Sr["a"],{type:"unknown"});return Object(Cr["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.channelId,a=t.purpose,i=t.sharedTeams,s=t.externalTeams,o=t.isPendingShared,l=t.isUserRestricted;var c=void 0;if(o){var u=s.map(this.renderTeamName);var d=Object(We["g"])(u,{noEscape:true,react:true,strong:true});c=va.rt("This is a shared channel. Waiting for {names} to join...",{names:d})}else{var p=i.map(this.renderTeamName);var v=Object(We["g"])(p,{noEscape:true,react:true,strong:true});c=va.rt("This is a shared channel between {names}.",{names:v})}return n.a.createElement(Yt,{channelId:r,description:c,purpose:a,isUserRestricted:l})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isPrivate;var i=ge()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return n.a.createElement("div",{className:i},this.renderAvatars(),this.renderTitle(),this.renderDescription(),n.a.createElement(qt,{channelId:r}))}}]);return t}(a["PureComponent"]);fa.displayName="SharedForeword";fa.defaultProps=ha;function ba(e,t){var r=t.channelId;var a=Object(A["d"])(e,r);if(!a)return null;var n=Object(He["b"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(N["isPrivateChannel"])(a);var o=Object(N["isExternallySharedChannel"])(a);var l=Object(N["isPendingExternallySharedChannel"])(a);var c=[];var u=[];if(o||l){var d=Object(N["getPendingAndConnectedTeamIds"])(e,a,{includeSelfTeamId:true});c=d.map(function(t){return Object(jr["j"])(e,t)});var p=Object(Cr["omitCurrentTeamId"])(e,d);u=p.map(function(t){return Object(jr["j"])(e,t)})}return{channel:a,isPendingShared:l,isPrivate:s,isUserRestricted:n.is_restricted,purpose:i,sharedTeams:c,externalTeams:u,featureLongerChannelNames:Object(E["isFeatureEnabled"])(e,"feature_longer_channel_names")}}var ga=Object(i["connect"])(ba)(fa);var _a=r(933);var ya=new We["b"]("newxp_onboarding");var Oa={step:b["b"].string};var ka={step:null};var Ea={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};var ja=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"renderHeaderAction",value:function e(){if(this.props.step===Ea.CANCELLED)return ya.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,r=e.text;return n.a.createElement(lr["a"],{key:t,onClick:_a["b"]},r)});if(this.props.step===Ea.SLACKBOT)return ya.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,r=e.text;return n.a.createElement(lr["a"],{key:t,onClick:_a["a"]},r)});return null}},{key:"renderFooter",value:function e(){if(this.props.step!==Ea.START)return null;return n.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},n.a.createElement(or["d"],{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:_a["g"]},ya.rt("Explore Slack")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},ya.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,r=e.text;return n.a.createElement(lr["a"],{key:t,onClick:_a["a"],"data-qa":"skip_tutorial"},r)})))}},{key:"render",value:function e(){var t=this.props.step;var r=ge()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===t});return n.a.createElement("div",{className:r},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_text"},ya.rt("Welcome!")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},ya.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]);return t}(a["PureComponent"]);ja.displayName="NewxpForeword";ja.defaultProps=ka;var Ca=ja;var Sa=Ge;var wa=new We["b"]("message_pane_foreword");var Ia={clogger:b["b"].object.isRequired};var Ta=35;var Aa=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:Ta}}})}},{key:"render",value:function e(){var t="/pricing?ui_step=42&ui_element="+Ta;return n.a.createElement("div",{className:"p-message_pane__limited_history_alert"},n.a.createElement(Rr["b"],{text:":speech_balloon:",emojiSize:Rr["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",wa.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",n.a.createElement(lr["a"],{href:t,target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},wa.t("Learn More")))}}]);return t}(a["PureComponent"]);Aa.displayName="LimitedHistoryAlert";var Na=function e(t){return{clogger:Object(bt["a"])({state:t})}};var Pa=Object(i["connect"])(Na)(Aa);var Ra=r(2280);var Ma=r(2279);var xa=r(1812);var Da=r(1813);var Fa=r(112);var La=r.n(Fa);var Ba=r(1067);var Ua=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));c.a.isFunction(e.shouldExcludeFirstItemFromGravity)&&(r.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity);return r}pe()(t,[{key:"layout",value:function e(){La()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this);if(this.totalHeight<this.containerHeight){var r=this.containerHeight-this.totalHeight;this.tops=c.a.mapValues(this.tops,function(e){return e+r});this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[c.a.first(this.keys)]=0)}}]);return t}(Ba["a"]);var qa=Ua;var Ga=r(1174);var Ha=r(1814);var Wa=r(4537);var Va=Wa["a"];var Ka=r(96);var za=r(374);var Qa=r(1761);var Ya=r(3930);var Ja=r(3233);var Xa=xa["a"];var Za=Da["a"];var $a={channelId:b["b"].string,timestamps:b["b"].arrayOf(b["b"].string),requestHistory:b["b"].func,lastReadTs:b["b"].string,isGhostLastRead:b["b"].bool,startTs:b["b"].string,startTsOffset:b["b"].number,highlightTs:b["b"].string,focusRequestedTs:b["b"].string,rollups:b["b"].objectOf(Oe["a"].Rollup()),setUnreadPoint:b["b"].func,isLoading:b["b"].bool,isLoadingOlder:b["b"].bool,reachedStart:b["b"].bool,reachedEnd:b["b"].bool,prevReachedEnd:b["b"].bool,oldest:b["b"].string,latest:b["b"].string,onScroll:b["b"].func,onVisibleRowsChanged:b["b"].func,doneHighlighting:b["b"].func,isFileExpanding:b["b"].bool,isLimited:b["b"].bool,isSlackbotIm:b["b"].bool,useStickyDayDividers:b["b"].bool,shouldIgnoreScrollKeys:b["b"].func,shouldIgnoreArrowKeys:b["b"].func,channelSessionId:b["b"].string,theme:b["b"].string,firstUnreadTs:b["b"].string,featureReactMessages:b["b"].bool,featureTinyspeck:b["b"].bool,featureAriaApplicationMode:b["b"].bool,messageContainerType:b["b"].string,ariaLabel:b["b"].string.isRequired,teamId:b["b"].string,enterpriseId:b["b"].string,sessionId:b["b"].string,msgTriggers:b["b"].object,currentUserId:b["b"].string,jumpToTimestamp:b["b"].func,makeMessageSummary:b["b"].func,isScreenReaderEnabled:b["b"].bool,windowLastFocusEvent:b["b"].number,onFocusEnter:b["b"].func,onFocusLeave:b["b"].func,isBannerVisible:b["b"].bool,setFocusRequestedTs:b["b"].func,showThreadIfThreadable:b["b"].func,featureReactThreads:b["b"].bool,currentThreadKey:b["b"].string,isThreadable:b["b"].func,threadListId:b["b"].string,telemeter:b["b"].object,featureOfflineMode:b["b"].bool,isOffline:b["b"].bool,userAttentionIsOnChat:b["b"].bool,removeFromSectionNavigation:b["b"].func,addToSectionNavigation:b["b"].func,setInitialActiveSection:b["b"].func};var en={channelId:null,timestamps:[],requestHistory:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:c.a.noop,isFileExpanding:false,isLoading:false,isLoadingOlder:false,reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,onScroll:c.a.noop,onVisibleRowsChanged:c.a.noop,doneHighlighting:c.a.noop,isLimited:false,isSlackbotIm:false,useStickyDayDividers:true,shouldIgnoreScrollKeys:function e(){return false},shouldIgnoreArrowKeys:function e(){return false},channelSessionId:null,theme:"light",firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureAriaApplicationMode:false,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:c.a.noop,makeMessageSummary:void 0,isScreenReaderEnabled:false,windowLastFocusEvent:null,onFocusEnter:c.a.noop,onFocusLeave:c.a.noop,isBannerVisible:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,featureReactThreads:false,currentThreadKey:void 0,isThreadable:c.a.noop,threadListId:void 0,telemeter:{store:c.a.noop,measure:c.a.noop},featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,removeFromSectionNavigation:c.a.noop,addToSectionNavigation:c.a.noop,setInitialActiveSection:c.a.noop};var tn=80;var rn=60;var an=64;var nn=120;var sn=28;var on="MESSAGE-LIST";var ln=864e5;var cn={ABOVE:1,VISIBLE:2,BELOW:3};var un="0000000000.000001";var dn=function e(t){var r=Math.floor(t/1e3);return r+".000000"};var pn=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=Object(Ha["a"])();r.state={degraded:a,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:false,hasKeyboardFocus:false,isFileExpanding:false};r.DEFAULT_ROW_HEIGHT="light"===e.theme?tn:rn;r.STICKY_EPSILON=r.DEFAULT_ROW_HEIGHT/2;r.ANCHOR_OFFSET=a?nn:an;r.heightCache=new Ga["a"]({DEFAULT_HEIGHT:r.DEFAULT_ROW_HEIGHT});r.layout=new qa({heightCache:r.heightCache,stickToBottom:!e.isFileExpanding||e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:r.isFirstRowLimitedHistoryForeword.bind(r),STICKY_EPSILON:r.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:r.ANCHOR_OFFSET});r.keys=[];r.rows=[];r.visibleRows=[];r.unreadIndex=null;r.list=null;r.useAnchor=true;r.keyToScrollTo=null;r.width=0;r.hasRenderedOneMessage=false;r.requestAround=r.requestAround.bind(r);r.requestOlder=r.requestOlder.bind(r);r.requestNewer=r.requestNewer.bind(r);r.renderRow=r.renderRow.bind(r);r.setListRef=r.setListRef.bind(r);r.getAriaLabelForRow=r.getAriaLabelForRow.bind(r);r.isItemAriaExpanded=r.isItemAriaExpanded.bind(r);r.onScroll=r.onScroll.bind(r);r.onListScrolled=r.onListScrolled.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onItemTabWithin=r.onItemTabWithin.bind(r);r.debouncedOnListScrolled=Object(xe["a"])(r.onListScrolled,150);r.isMessage=r.isMessage.bind(r);r.onSelectionChange=r.onSelectionChange.bind(r);r.onJumpToUnreadShortcut=r.onJumpToUnreadShortcut.bind(r);r.focus=r.focus.bind(r);r.onShiftPageUp=r.onShiftPageUp.bind(r);r.onShiftPageDown=r.onShiftPageDown.bind(r);r.onEnd=r.onEnd.bind(r);r.onArrowKeyRight=r.onArrowKeyRight.bind(r);r.scrollToOffset=c.a.throttle(r.scrollToOffset.bind(r),200);r.messagesRendered={};r.loadingHistoriesSeen=0;r.loadingHistoriesSeenHighEnd=0;r.loadingHistoriesPerHowManyMessages=84;r.loadingHistoriesPerHowManyMessagesHighEnd=500;r.scrollMetricsGatheringEnabled=Object(Re["a"])(1)||r.props.featureTinyspeck;if(r.scrollMetricsGatheringEnabled){var n=Object(o["c"])(e.teamId);var i=Object(d["c"])({state:n});r.debounceBatchMessagesSeen=c.a.debounce(function(){i.store("modern_history_load_seen_per_84_messages",r.loadingHistoriesSeen,{allow_zero:true});r.loadingHistoriesSeen=0},1e3);r.debounceBatchMessagesSeenHighEnd=c.a.debounce(function(){i.store("modern_history_load_seen_per_500_messages",r.loadingHistoriesSeenHighEnd,{allow_zero:true});r.loadingHistoriesSeenHighEnd=0},1e3)}r.debounceCountHistoryLoadSeen=c.a.debounce(function(){r.loadingHistoriesSeen+=1;r.loadingHistoriesSeenHighEnd+=1},1e3);r.prqMetrics={channelSwitch:{}};return r}pe()(t,[{key:"componentDidUpdate",value:function e(t){if(this.keyToScrollTo&&this.list){this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll});this.keyToScrollTo=null}var r=this.props.isLoading||this.props.isLoadingOlder;if(c.a.isFunction(this.onJump)&&!r&&this.props.timestamps.length){this.onJump();this.onJump=null}var a=!!t.isFileExpanding&&!this.props.isFileExpanding;a?this.layout.setStickToBottom(false):this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd);this.onListScrolled();this.maybeLogChannelSwitch(t);!t.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation();!this.props.userAttentionIsOnChat&&t.userAttentionIsOnChat&&this.props.removeFromSectionNavigation()}},{key:"maybeLogChannelSwitch",value:function e(t){if(!navigator.onLine)return;if("undefined"===typeof this.props.msgTriggers[this.props.channelId]||this.props.windowLastFocusEvent!==this.props.msgTriggers[this.props.channelId].lastFocus){this.prqMetrics.channelSwitch={};return}if(t.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(t.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&false===t.isLoading&&true===this.props.isLoading&&true!==this.props.isLoadingOlder&&false===this.prqMetrics.channelSwitch.hasLoggedVisible&&false===this.prqMetrics.channelSwitch.hasLoggedUsable){var r=false;this.trackChannelSwitchWithSync(je["g"],r)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&true===t.isLoading&&false===this.props.isLoading&&true!==this.props.isLoadingOlder&&true===this.prqMetrics.channelSwitch.hasLoggedVisible){var a=true;this.trackChannelSwitchWithSync(je["f"],a)}}},{key:"trackChannelSwitchWithoutSync",value:function e(t){if(this.prqMetrics.channelSwitch.duration){Object(je["f"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);Object(je["g"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}var r=Object(o["c"])(this.props.teamId);var a=Object(d["c"])({state:r});var n="start_channel_change_"+this.props.channelId;var i=a.measure(n,"channel_change_react_msgs",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.channelSwitch={duration:i,prevChannelId:t,nextChannelId:this.props.channelId,fetchHistoryState:je["c"],hasLoggedVisible:false,hasLoggedUsable:false}}},{key:"trackChannelSwitchWithSync",value:function e(t,r){var a="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId;var n=Object(o["c"])(this.props.teamId);var i=Object(d["c"])({state:n});t(i.measure(a,"channel_change_not_stored",null,{ephemeral:true,return_unprocessed:true}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,je["a"],this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);if(r){this.prqMetrics.channelSwitch={};this.prqMetrics.channelSwitch.hasLoggedUsable=true}else this.prqMetrics.channelSwitch.hasLoggedVisible=true}},{key:"findTimestampClosestToStartTs",value:function e(){var t=this.props,r=t.startTs,a=t.timestamps;if(!a.length)return false;if(!r)return null;return c.a.find(a,function(e){return e>=r})}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"jumpToUnread",value:function e(t){var r=this;var a=this.props,n=a.lastReadTs,i=a.isScreenReaderEnabled,s=a.firstUnreadTs;var o=t&&"keydown"===t.type&&(i||this.state.hasKeyboardFocus);var l=c.a.isNumber(this.unreadIndex)&&this.keys[this.unreadIndex];if(l){if(o){this.list.setActiveItem(s);this.list.scrollToKey(s)}else this.list.scrollToKey(l);return}this.jumpToTimestamp({ts:n,onJump:function e(){r.state.hasKeyboardFocus&&r.list.setActiveItem(r.props.firstUnreadTs)}})}},{key:"isAtBottom",value:function e(){if(!this.list)return false;var t=this.list.getScrollTop();var r=this.layout.getTotalHeight();var a=this.height;return t+a>=Math.floor(r)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function e(){if("number"!==typeof this.unreadIndex)return cn.ABOVE;if(!this.list)return cn.ABOVE;var t=this.list.getVisibleRange(),r=t.start,a=t.end;if(this.unreadIndex<r)return cn.ABOVE;if(this.unreadIndex<a)return cn.VISIBLE;return cn.BELOW}},{key:"getVisibleRows",value:function e(){if(!this.list)return[];var t=this.list.getVisibleRange(),r=t.start,a=t.end;var n=this.rows.slice(r,a);return n}},{key:"getScrollmarkForFocusedItem",value:function e(t){var r=t===un?this.props.timestamps[0]:t;return{mark:t,offset:this.layout.getTop(r)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function e(){if(!this.list||!this.layout)return null;var t=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;this.previouslyActiveItem=null;if(t)return this.getScrollmarkForFocusedItem(t);var r=this.list.getScrollTop();if(this.layout.shouldStickToBottom(r))return null;var a=this.props.timestamps;var n=this.layout.findAnchor(a,a,r+this.ANCHOR_OFFSET);var i=this.layout.getTop(n)-r;return{mark:n,offset:i}}},{key:"onScroll",value:function e(){this.useAnchor=false;this.layout.setAnchor(false);this.debouncedOnListScrolled();this.props.onScroll()}},{key:"onSelectionChange",value:function e(t){if(!this.node)return;this.setState(function(){return{isSelecting:t}})}},{key:"isMessage",value:function e(t){var r=this.rows[t.index];return r&&("message"===r.type||"foreword"===r.type)}},{key:"onListScrolled",value:function e(){var t=this.getVisibleRows();if(c.a.isEqual(t,this.visibleRows))return;this.visibleRows=t;this.props.onVisibleRowsChanged(t)}},{key:"onShiftPageUp",value:function e(){var t=this;var r=this.getTimestampOfPrevDay();if(!r)return;var a=this.state.hasKeyboardFocus;if(this.list.isScrolledToTop()&&this.props.reachedStart&&a){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(r));return}var n=dn(r);var i=this.props.isBannerVisible?an:sn;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(r);a&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onShiftPageDown",value:function e(){var t=this;var r=this.getTimestampOfNextDay();if(!r)return;var a=this.state.hasKeyboardFocus;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&a){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(r));return}var n=dn(r);var i=this.props.isBannerVisible?an:sn;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(r);a&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onEnd",value:function e(){var t=this;var r=this.props,a=r.reachedEnd,n=r.timestamps;var i=a?n[n.length-1]:null;this.jumpToTimestamp({ts:i,onJump:function e(){if(!t.state.hasKeyboardFocus)return;var r=t.rows;var a=r[r.length-1];var n=a&&a.type;"message"===n&&t.list.setActiveItem(a.ts)}});return false}},{key:"onArrowKeyRight",value:function e(t){var r=t.target;if(Object(Me["a"])(r))return;var a=this.props,n=a.channelId,i=a.timestamps,s=a.featureReactThreads;if(!s)return;if(!this.state.hasKeyboardFocus)return;var o=this.list.getInitialActiveItem();if(!o||!c.a.includes(i,o))return;var l=this.props.showThreadIfThreadable({channelId:n,threadTs:o,requestFocus:true});l&&this.blur()}},{key:"onJumpToUnreadShortcut",value:function e(t){if(!za["a"])return;this.jumpToUnread(t)}},{key:"onFocusEnter",value:function e(t){var r=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){r.props.onFocusEnter(t);var e=r.props,a=e.featureReactThreads,n=e.focusRequestedTs,i=e.setFocusRequestedTs;a&&n&&n===r.list.getActiveItem()&&i(null)})}},{key:"onFocusLeave",value:function e(t){var r=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=t.activeItem);this.setState(function(){return{hasKeyboardFocus:false}},function(){r.props.onFocusLeave(t)})}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"scrollToOffset",value:function e(){var t;if(!this.list)return;(t=this.list).scrollToOffset.apply(t,arguments)}},{key:"shouldShowLimitedHistoryAlert",value:function e(){var t=this.props,r=t.isLimited,a=t.isSlackbotIm;return r&&a}},{key:"shouldShowLimitedHistoryForeword",value:function e(){var t=this.props,r=t.isLimited,a=t.isSlackbotIm;return r&&!a}},{key:"isFirstRowLimitedHistoryForeword",value:function e(){if(!this.shouldShowLimitedHistoryForeword())return false;var t=c.a.first(this.rows);return t&&"foreword"===t.type}},{key:"requestAround",value:function e(){var t=this;if(this.state.isLoading)return false;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(p["a"])({teamId:this.props.teamId}).info(on,"requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+c.a.size(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var r=this.props,a=r.oldest,n=r.latest,i=r.timestamps,s=r.startTs;if(c.a.isEmpty(i)&&!s)return this.props.requestHistory({});var o=a||i&&c.a.first(i)||s;var l=n||i&&c.a.last(i)||s;var u=this.props.requestHistory({latest:o,oldest:l});if(u){this.prqMetrics.channelSwitch.fetchHistoryState!==je["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=je["b"]);u.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=je["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return u}},{key:"requestOlder",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.oldest,n=r.timestamps,i=r.startTs;var s=a||n&&c.a.first(n)||i;var o=this.props.requestHistory({latest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==je["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=je["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=je["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:true}})}return o}},{key:"requestNewer",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.latest,n=r.timestamps,i=r.startTs;var s=a||n&&c.a.last(n)||i;var o=this.props.requestHistory({oldest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==je["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=je["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=je["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return o}},{key:"renderMessage",value:function e(t,r){var a=r.hasFocus,i=r.isHovered,s=r.isExpanded;var o=t.ts,l=t.previousMessageTs;var u=c.a.last(this.props.timestamps);var d=o&&o===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[t.ts]=true;var p=c.a.keys(this.messagesRendered).length;p%this.loadingHistoriesPerHowManyMessages===0&&this.debounceBatchMessagesSeen();p%this.loadingHistoriesPerHowManyMessagesHighEnd===0&&this.debounceBatchMessagesSeenHighEnd()}return n.a.createElement(Va,{ts:o,key:o,channelId:this.props.channelId,previousMessageTs:l,isLast:o===u,rollup:this.props.rollups[o],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:d,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,isHovered:i,isThreadExpanded:s,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:i||a,hasFocus:a,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable})}},{key:"renderForeword",value:function e(){return n.a.createElement(Sa,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}},{key:"renderRow",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.hasFocus,i=r.isHovered,s=r.isExpanded;var o=this.rows[t];if(!o||!o.type)return null;switch(o.type){case"message":return this.renderMessage(o,{hasFocus:a,isHovered:i,isExpanded:s});case"dayDividerLabel":return n.a.createElement(Ya["b"],{key:o.day,date:o.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return n.a.createElement(Ya["a"],{key:o.day,date:o.day,isUnread:o.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return n.a.createElement(Qa["a"],{key:"unread",ghost:this.props.isGhostLastRead});case"loading":this.debounceCountHistoryLoadSeen();if(this.props.featureOfflineMode&&this.props.isOffline)return n.a.createElement(Ma["a"],null);return n.a.createElement("div",{key:"loading",className:ge()("c-message_list__placeholders","c-message_list__placeholders--"+this.props.theme,{"c-message_list__placeholders--legacy":!Object(Ee["a"])()})});case"loadingSpinner":if(this.props.featureOfflineMode&&this.props.isOffline)return n.a.createElement(Ma["a"],null);return n.a.createElement("div",{className:"c-message_list__spinner"},n.a.createElement(Ka["a"],{size:"jumbo"}));case"foreword":return this.renderForeword({hasFocus:a});case"limited_history":return n.a.createElement(Pa,null);default:return null}}},{key:"isItemAriaExpanded",value:function e(t,r){var a=this.props,n=a.channelId,i=a.isThreadable,s=a.currentThreadKey;if(!i)return;var o=this.rows[r];if(!o||!o.type)return;if("message"!==o.type)return;var l=Object(Z["decodeThreadKey"])(s),c=l.threadTs,u=l.channelId;var d=c===t&&n===u;if(i({channelId:n,threadTs:t}))return d;return}},{key:"getAriaLabelForRow",value:function e(t){var r=this.props,a=r.channelId,n=r.makeMessageSummary,i=r.isScreenReaderEnabled;if(!n)return null;var s=this.rows[t];if(!s||!s.type)return null;if("message"!==s.type)return null;var o=s.ts,l=s.previousMessageTs,c=s.isFirstMsgForDay,u=s.isLastMsgForDay,d=s.isFirstUnreadMsg,p=s.day;var v=this.props.rollups[o];if(!this.state.hasKeyboardFocus&&!i)return null;return n({channelId:a,ts:o,isFirstUnreadMsg:d,isFirstMsgForDay:c,isLastMsgForDay:u,previousMessageTs:l,day:p,rollup:v,hasFocus:this.state.hasKeyboardFocus,viewContext:we["MESSAGE_CONTAINERS"].MESSAGE_PANE})}},{key:"componentWillReceiveProps",value:function e(t){var r=this;this.setState(function(e){if(t.isLoading===e.isLoading&&t.isLoadingOlder===e.isLoadingOlder)return null;Object(p["a"])({teamId:r.props.teamId}).info(on,"componentWillReceiveProps isLoading: "+t.isLoading+" isLoadingOlder: "+t.isLoadingOlder+" timestamps: "+c.a.size(t.timestamps));return{isLoading:t.isLoading,isLoadingOlder:t.isLoadingOlder}});if(t.channelId!==this.props.channelId||t.startTs!==this.props.startTs||t.highlightTs&&t.highlightTs!==this.props.highlightTs||t.timestamps.length&&!this.props.timestamps.length){this.useAnchor=true;var a=t.startTs;var n=this.props.timestamps;var i=t.timestamps;if(c.a.inRange(a,c.a.floor(c.a.first(n)),c.a.ceil(c.a.last(n)))&&t.channelId===this.props.channelId){var s=c.a.findLast(i,function(e){return e<=t.startTs});this.keyToScrollTo=s;this.lazyScroll=t.highlightLazy;this.useAnchor=false}}if(t.channelId!==this.props.channelId){this.heightCache.invalidate();this.list&&this.list.resetRendered&&this.list.resetRendered();Object(p["a"])({teamId:this.props.teamId}).info(on,"Switching channels: "+t.channelId+" timestamps: "+c.a.size(t.timestamps))}t.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"groupTimestampsByDay",value:function e(t){return c.a.groupBy(t,function(e){return Object(De["a"])(e)})}},{key:"getTimestampsForDays",value:function e(t){return c.a.keys(this.groupTimestampsByDay(t)).sort()}},{key:"getTimestampOfDayClosestToTop",value:function e(){var t=this.list.getVisibleRange(),r=t.start;var a=this.rows[r];if(!a)return;if("dayDivider"===a.type)return a.day.toString();if("dayDividerLabel"===a.type)return a.day.toString();if("message"===a.type)return a.day.ts.toString();return}},{key:"getStartTimestampForDayNavigation",value:function e(){if(this.state.hasKeyboardFocus)return Object(De["a"])(this.list.getInitialActiveItem());return this.getTimestampOfDayClosestToTop()}},{key:"getTimestampOfPrevDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var r=this.getTimestampOfFirstMessageForDay(t);if(!r)return t;if(r&&!this.list.isItemInView(r))return t;var a=this.getTimestampsForDays(this.props.timestamps);var n=c.a.indexOf(a,t);var i=n-1;return a[i]}},{key:"getTimestampOfNextDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var r=this.getTimestampsForDays(this.props.timestamps);var a=c.a.indexOf(r,t);var n=r[a+1];if(n)return n;return(parseInt(t,10)+ln).toString()}},{key:"getTimestampOfFirstMessageForDay",value:function e(t){var r=this.getTimestampsForDays(this.props.timestamps);var a=c.a.indexOf(r,t);if(a<0)return;if(0===a&&!this.props.reachedStart)return;var n=this.groupTimestampsByDay(this.props.timestamps);var i=n[t];return i?i[0]:void 0}},{key:"jumpToTimestamp",value:function e(t){var r=t.ts,a=t.offset,n=t.onJump;c.a.isFunction(n)&&(this.onJump=n);this.props.jumpToTimestamp({ts:r,offset:a})}},{key:"render",value:function e(){var t=this;if(this.props.featureOfflineMode&&this.props.isOffline&&c.a.isEmpty(this.props.timestamps))return n.a.createElement(Ra["a"],null);var r=this.groupTimestampsByDay(this.props.timestamps);var a=c.a.keys(r).sort();var i=[];var s=[];var o=[];var l=this.findTimestampClosestToStartTs();var u=this.props.firstUnreadTs;var d=l;if(this.props.reachedStart){s.push(un);i.push({type:"foreword",ts:un});if(this.shouldShowLimitedHistoryAlert()){s.push("limited_history");i.push({type:"limited_history"})}}this.unreadIndex=null;var p=c.a.first(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;c.a.forEach(a,function(e,n){var l=parseInt(e,10);var v=r[e];var m=e+"."+t.props.channelId;var h=p&&c.a.first(v)===u;if(h){t.unreadIndex=i.length;t.props.startTs===t.props.lastReadTs&&(d=m)}i.push({type:"dayDividerLabel",day:l,showDayDividerAsUnread:h});t.props.useStickyDayDividers&&o.push({key:m,index:s.length});s.push(m);if(n>0||t.props.reachedStart||t.state.degraded){i.push({type:"dayDivider",day:l,showDayDividerAsUnread:h});s.push(e+"divider")}if(!t.state.degraded&&!t.state.isSelecting&&0===n&&t.state.isLoadingOlder){s.push("loading");i.push({type:"loading"})}var f=void 0;c.a.forEach(v,function(e,r){if(p&&0!==r&&e===u){t.unreadIndex=i.length;var o="unreadDivider";s.push(o);i.push({type:"unread",day:l});t.props.startTs===t.props.lastReadTs&&(d=u)}var c=0===n&&t.props.reachedStart;var m=n===a.length-1&&t.props.reachedEnd;var h=0===r&&(n>0||t.props.reachedStart);var b=r===v.length-1&&(n<a.length-1||t.props.reachedEnd);var g=u===e;i.push({type:"message",ts:e,previousMessageTs:f,isFirstMsgForDay:h,isLastMsgForDay:b,isFirstUnreadMsg:g,day:{ts:l,isFirstDay:c,isLastDay:m}});s.push(e);f=e})});if(this.state.isLoading&&!this.state.isLoadingOlder&&!this.props.reachedEnd&&!this.props.prevReachedEnd){s.push("loadingSpinner");i.push({type:"loadingSpinner"})}this.layout.setAnchor(this.useAnchor&&d,this.useAnchor&&this.props.startTsOffset);!this.useAnchor&&this.keyToScrollTo&&c.a.isNumber(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset);this.keys=s;this.rows=i;var v={firstVisibleUnreadTs:u,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:c.a.last(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers};var m=this.state.degraded?Za:Xa;var h=this.props.shouldIgnoreScrollKeys;var f=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:h},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:h},{keys:["right"],handler:this.onArrowKeyRight,filter:this.props.shouldIgnoreArrowKeys}];var b=function(){if(t.state.isLoading)return null;var e=i[i.length-1];var r=e&&e.type;var a=t.props.startTs===un||false===l&&"foreword"===r;if(a)return un;if(null===l&&"message"===r)return e.ts;if(u)return u;if(l)return l;return null}();return n.a.createElement(Ne["a"],null,function(e){var r=e.width,a=e.height;if(0===r||0===a)return null;if(r!==t.width){t.heightCache.invalidate();t.width=r}t.height=a;return n.a.createElement(m,{ref:t.setListRef,className:"c-message_list",ariaLabel:t.props.ariaLabel,height:a,width:r,keys:s,rowRenderer:t.renderRow,getAriaLabelForRow:t.getAriaLabelForRow,layout:t.layout,stickyItems:o,stickyOffsetTop:-21,stickyZIndex:200,loadAround:t.requestAround,loadPre:t.requestOlder,loadPost:t.requestNewer,isLoading:t.state.isLoading,reachedStart:t.props.reachedStart,reachedEnd:t.props.reachedEnd||t.props.prevReachedEnd,fadeScrollbar:true,onScroll:t.onScroll,onSelectionChange:t.onSelectionChange,onEnd:t.onEnd,onFocusEnter:t.onFocusEnter,onItemTabWithin:t.onItemTabWithin,onFocusLeave:t.onFocusLeave,keyCommands:f,shouldIgnoreScrollKeys:t.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:t.props.shouldIgnoreArrowKeys,isFocusableItem:t.isMessage,unrelatedUpdateProps:v,featureReactMessages:t.props.featureReactMessages,activeItem:t.props.focusRequestedTs,initialActiveItem:b,useAriaApplicationMode:t.props.featureAriaApplicationMode,isItemAriaExpanded:t.isItemAriaExpanded,itemAriaControls:t.props.threadListId,featureOfflineMode:t.props.featureOfflineMode,isOffline:t.props.isOffline})})}}]);return t}(Pe["a"]);pn.displayName="MessageList";pn.propTypes=$a;pn.defaultProps=en;var vn=Object(Fe["a"])(pn);var mn=vn;var hn=r(1815);var fn=r(1561);var bn=r(900);var gn=r(780);var _n=r(775);var yn=r(1348);var On=r(1826);var kn=r(4358);var En=r(189);var jn=r(2405);var Cn=new We["b"]("messages");var Sn={firstTimestamp:b["b"].string.isRequired,lastTimestamp:b["b"].string.isRequired,jumpToRecent:b["b"].func.isRequired};var wn={};var In=function(e){fe()(t,e);function t(){ue()(this,t);return me()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}pe()(t,[{key:"render",value:function e(){var t=Object(En["a"])(this.props.firstTimestamp,{shortenMonth:true});var r=Object(En["a"])(this.props.lastTimestamp,{shortenMonth:true});return n.a.createElement("div",{className:"p-archives_banner"},n.a.createElement("span",{className:"p-archives_banner__date_range"},Cn.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:t,rangeEnd:r})),n.a.createElement(or["c"],{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent},Cn.t("Jump to recent messages"),n.a.createElement(gt["a"],{type:"arrow_down"})))}}]);return t}(a["PureComponent"]);In.displayName="ArchivesBanner";var Tn=In;In.defaultProps=wn;var An=r(50);var Nn=r(220);var Pn=r(706);var Rn=r(79);var Mn=r(30);var xn=new We["b"]("messages");var Dn=3e3;var Fn=100;var Ln={hasUnreads:b["b"].bool.isRequired,displayCount:b["b"].number,since:b["b"].oneOfType([b["b"].string,b["b"].number]),known:b["b"].bool,do24hrTime:b["b"].bool,channelId:b["b"].string,ghost:b["b"].bool,unreadPlacement:b["b"].oneOf(Object(l["values"])(cn)),jumpToUnread:b["b"].func,markMostRecentMsgRead:b["b"].func,onHide:b["b"].func};var Bn={displayCount:0,since:null,do24hrTime:false,known:false,channelId:null,ghost:false,unreadPlacement:cn.VISIBLE,jumpToUnread:l["noop"],markMostRecentMsgRead:l["noop"],onHide:l["noop"]};var Un=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.startFade=r.startFade.bind(r);r.onAnimationTick=r.onAnimationTick.bind(r);r.onAnimationEnd=r.onAnimationEnd.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.jumpOrMark=r.jumpOrMark.bind(r);r.markAsRead=r.markAsRead.bind(r);r.animation=null;r.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1};return r}pe()(t,[{key:"componentWillReceiveProps",value:function e(t){t.channelId!==this.props.channelId&&this.animation&&this.animation.cancel();if(this.state.hasUnreads&&!t.hasUnreads){var r=t.ghost?Dn:0;this.startFade(r);return}this.setState(function(){return{hasUnreads:t.hasUnreads,displayCount:t.displayCount,since:t.since,unreadPlacement:t.unreadPlacement,opacity:1}})}},{key:"componentWillUnmount",value:function e(){this.animation&&this.animation.cancel()}},{key:"onAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;if(!this.animation)return;this.setState(function(){return{opacity:r}});a()}},{key:"onAnimationEnd",value:function e(){var t=this;this.setState(function(){return{hasUnreads:false,opacity:1}},function(){t.props.onHide()})}},{key:"onKeyDown",value:function e(t){var r=[Rn["e"],Rn["j"]];Object(l["includes"])(r,t.keyCode)&&this.jumpOrMark(t)}},{key:"startFade",value:function e(t){this.animation=Object(Pn["a"])({delay:t,fromValue:1,toValue:0,duration:Fn,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"markAsRead",value:function e(t){t.stopPropagation();Object(p["b"])().action("UNREAD-BANNER","Mark "+this.props.channelId+" read");this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:we["MARKED_REASONS"].CLICKED});this.animation&&this.animation.cancel();this.onAnimationEnd()}},{key:"jumpOrMark",value:function e(t){this.state.unreadPlacement===cn.VISIBLE?this.markAsRead(t):this.props.jumpToUnread(t)}},{key:"makeJumpLabel",value:function e(){if(!Object(za["a"])())return xn.t("Jump");var t=Object(Mn["isMac"])()?xn.t("Cmd"):xn.t("Ctrl");return xn.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:t},function(e){var t=e.text,r=e.key;return n.a.createElement("span",{key:r,className:"normal"},t)})}},{key:"makeJumpAriaLabel",value:function e(){if(!Object(za["a"])())return;var t=Object(Mn["isMac"])()?xn.t("Cmd"):xn.t("Ctrl");return xn.t("Jump to first unread message ({cmdButton} J)",{cmdButton:t,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}},{key:"renderJump",value:function e(){var t=this.state.unreadPlacement;if(t===cn.VISIBLE)return null;var r=t===cn.ABOVE?"arrow_up":"arrow_down";var a=this.makeJumpLabel();var i=this.makeJumpAriaLabel();return n.a.createElement(or["c"],{"aria-label":i,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},n.a.createElement(gt["a"],{type:r,className:"p-message_pane__unread_banner__jump__arrow"}),a)}},{key:"renderClose",value:function e(){var t=ge()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==cn.VISIBLE});return n.a.createElement(An["c"],{tip:xn.t("Mark as read (esc)"),position:"bottom-right"},n.a.createElement(or["c"],{className:t,onClick:this.markAsRead,"aria-label":xn.t("Mark as read")},n.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},xn.t("Mark as read")),n.a.createElement(gt["a"],{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"render",value:function e(){var t=this.state,r=t.hasUnreads,a=t.since,i=t.displayCount;var s=this.props,o=s.do24hrTime,l=s.known;if(!r||!a)return null;var c=Math.floor(parseFloat(a));if(!c)return null;var u=Object(En["a"])(c,{excludeYear:true});var d=Object(Nn["a"])(c,{do24hrTime:o});var p=l?"":"+";var v=i;!l&&v>10&&(v=10*Math.floor(v/10));var m=xn.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:p,count:v,time:d,date:u});v&&(1!==v||l)||(m=xn.t("New messages since {time} on {date}",{time:d,date:u}));return n.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},n.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),n.a.createElement(or["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},m)),this.renderClose())}}]);return t}(a["PureComponent"]);Un.displayName="UnreadBanner";Un.defaultProps=Bn;var qn=function e(t,r){var a=r.since;if("0000000000.000000"===a){var n=Object(A["d"])(t,r.channelId);a=n.created}return{do24hrTime:Object(nr["g"])(t,"time24"),since:a}};var Gn=Object(i["connect"])(qn)(Un);var Hn=r(1757);var Wn=r(183);var Vn=r(1693);var Kn=r(4193);var zn=new We["b"]("search");var Qn={clogger:b["b"].object.isRequired,showSearchScrollbackTip:b["b"].bool.isRequired,searchInProductEducationDismiss:b["b"].func,channelForCurrentInFilterQuery:b["b"].object};var Yn={searchInProductEducationDismiss:l["noop"],channelForCurrentInFilterQuery:null};var Jn=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Hn["a"])(r,["onClickClose","onClickBannerContent"]);return r}pe()(t,[{key:"componentDidUpdate",value:function e(t){this.props.showSearchScrollbackTip&&!t.showSearchScrollbackTip&&this.props.clogger.track("SEARCH_SCROLL_TIP",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"onClickClose",value:function e(t){t.stopPropagation();t.preventDefault();this.props.clogger.track("SEARCH_SCROLL_TIP_DISMISS",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id});this.props.searchInProductEducationDismiss()}},{key:"onClickBannerContent",value:function e(t){t.stopPropagation();t.preventDefault();this.props.clogger.track("SEARCH_SCROLL_TIP_CLICK",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"render",value:function e(){var t=this.props.showSearchScrollbackTip;return t&&n.a.createElement(Wn["a"],{enabled:["feature_strollers_to_perch"]},n.a.createElement("div",{className:"p-message_pane__search_tip_banner"},n.a.createElement("div",{className:"p-message_pane__search_tip_banner_content",onClick:this.onClickBannerContent,role:"presentation"},zn.rt("<strong>Tip</strong>: Looking for something specific? Try a quick search.",{fallbackHash:"f74de2cccbeb348dd34450e1fc92a0fd0f502e71"}),n.a.createElement(or["c"],{className:"p-message_pane__search_tip_banner_action","aria-label":zn.t("Close",{ns:"toast"}),onClick:this.onClickClose},n.a.createElement(gt["b"],{inline:true,type:"times"})))))}}]);return t}(a["PureComponent"]);Jn.displayName="SearchTipBanner";Jn.defaultProps=Yn;var Xn=function e(t){return{showSearchScrollbackTip:Object(m["searchInProductEducationShouldDisplay"])(t),clogger:Object(bt["a"])({state:t}),channelForCurrentInFilterQuery:Object(Vn["a"])(t)}};var Zn={searchInProductEducationDismiss:m["searchInProductEducationDismiss"]};var $n=Object(i["connect"])(Xn,Zn)(Jn);var ei=r(1646);var ti=r(308);var ri=new We["b"]("messages");var ai={displayModelOrViewById:b["b"].func.isRequired,isHighlightsBackButtonVisible:b["b"].bool};var ni={isHighlightsBackButtonVisible:false};var ii=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.backToBriefings=r.backToBriefings.bind(r);return r}pe()(t,[{key:"backToBriefings",value:function e(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function e(){if(!this.props.isHighlightsBackButtonVisible)return null;return n.a.createElement(or["d"],{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},n.a.createElement(gt["b"],{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),ri.t("Back to my highlights"))}}]);return t}(a["PureComponent"]);ii.displayName="BriefingsBackButton";ii.defaultProps=ni;var si=function e(t){return{isHighlightsBackButtonVisible:Object(v["o"])(t)}};var oi=function e(t){return{displayModelOrViewById:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.id;return t(Object(ti["a"])({id:a}))}}};var li=Object(i["connect"])(si,oi)(ii);var ci=r(186);var ui=r(1551);var di={channelId:b["b"].string.isRequired,userAttentionIsOnChat:b["b"].bool.isRequired};var pi=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.triggerFileUpload=r.triggerFileUpload.bind(r);r.hiddenFileInputRef=n.a.createRef();r.commands=[{keys:["mod+u"],handler:r.triggerFileUpload}];return r}pe()(t,[{key:"componentDidMount",value:function e(){if(Object(Ee["a"])()){this.keyCommands=new ci["a"];this.keyCommands.bindAll(this.commands)}}},{key:"componentWillUnmount",value:function e(){if(Object(Ee["a"])()){this.keyCommands.reset();this.keyCommands=null}}},{key:"triggerFileUpload",value:function e(){var t=this.props.userAttentionIsOnChat;if(!t)return;this.hiddenFileInputRef&&this.hiddenFileInputRef.current.click()}},{key:"render",value:function e(){var t=this.props.channelId;if(!Object(Ee["a"])())return null;return n.a.createElement(ui["a"],{ref:this.hiddenFileInputRef,channelId:t,viewContext:we["MESSAGE_CONTAINERS"].MESSAGE_PANE})}}]);return t}(a["Component"]);pi.displayName="FileUploadShortcut";function vi(e){return{userAttentionIsOnChat:Object(J["e"])(e)}}var mi=Object(i["connect"])(vi)(pi);var hi=Object(Ee["a"])()?Object(kn["a"])(mn,"MessagePane",{index:0}):mn;var fi={logger:b["b"].object,channelId:b["b"].string,channelDisplayName:b["b"].string,type:b["b"].oneOf(["channel","private","im","mpim"]),theme:b["b"].oneOf(["light","dense"]),timestamps:b["b"].arrayOf(b["b"].string),reachedStart:b["b"].bool,reachedEnd:b["b"].bool,prevReachedEnd:b["b"].bool,oldest:b["b"].string,latest:b["b"].string,fetchHistory:b["b"].func,fetchSliHighlights:b["b"].func,onMount:b["b"].func,callAppHomeOpenEventByChannelId:b["b"].func,lastReadTs:b["b"].string,isGhostLastRead:b["b"].bool,unreadCount:b["b"].number,unreadCountKnown:b["b"].bool,startTs:b["b"].string,startTsOffset:b["b"].number,highlightTs:b["b"].string,highlightLazy:b["b"].bool,focusRequestedTs:b["b"].string,rollups:b["b"].objectOf(Oe["a"].Rollup()),isLoading:b["b"].bool,isLoadingOlder:b["b"].bool,setUnreadPoint:b["b"].func,markMostRecentMsgRead:b["b"].func,setUnreadLineVisibility:b["b"].func,clearHighlightTs:b["b"].func,jumpToTimestamp:b["b"].func,saveScrollmark:b["b"].func,isArchived:b["b"].bool,isLimited:b["b"].bool,isSlackbotIm:b["b"].bool,isAppIm:b["b"].bool,overlayVisible:b["b"].bool,channelSessionId:b["b"].string,prevChannelSwitchTs:b["b"].string,newxpOnboardingStep:b["b"].string,firstUnreadTs:b["b"].string,featureReactMessages:b["b"].bool,featureTinyspeck:b["b"].bool,useGlobalNav:b["b"].bool,featureClassicNav:b["b"].bool,featureAriaApplicationMode:b["b"].bool,teamId:b["b"].string,enterpriseId:b["b"].string,sessionId:b["b"].string,msgTriggers:b["b"].object,hasMessagePaneUnmounted:b["b"].bool,setMessagePaneHasUnmounted:b["b"].func,currentUserId:b["b"].string,isAppSpaceOpen:b["b"].bool,isShared:b["b"].bool,isOrgShared:b["b"].bool,isYou:b["b"].bool,isMuted:b["b"].bool,hasUnreads:b["b"].bool,hasDraft:b["b"].bool,badgeCount:b["b"].number,screenReaderOverride:b["b"].bool,windowLastBlurEvent:b["b"].number,windowLastFocusEvent:b["b"].number,makeMessageSummary:b["b"].func,isScreenReaderEnabled:b["b"].bool,setFocusRequestedTs:b["b"].func,showThreadIfThreadable:b["b"].func,featureReactThreads:b["b"].bool,currentThreadKey:b["b"].string,isThreadable:b["b"].func,unavailableTeamId:b["b"].string,canPostInChannel:b["b"].bool,featureAnnounceOnly:b["b"].bool,featureSonicInputs:b["b"].bool,featureTriggerUserDmClick:b["b"].bool,telemeter:b["b"].object.isRequired,searchInProductEducationReset:b["b"].func,bootInFlight:b["b"].bool,bootType:b["b"].oneOf(["warm","cold"]),isFileExpanding:b["b"].bool,featureOfflineMode:b["b"].bool,isOffline:b["b"].bool,userAttentionIsOnChat:b["b"].bool};var bi={logger:{error:c.a.noop},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,fetchHistory:c.a.noop,fetchSliHighlights:c.a.noop,onMount:c.a.noop,callAppHomeOpenEventByChannelId:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,unreadCount:0,unreadCountKnown:false,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:false,isLoadingOlder:false,setUnreadPoint:c.a.noop,markMostRecentMsgRead:c.a.noop,setUnreadLineVisibility:c.a.noop,clearHighlightTs:c.a.noop,jumpToTimestamp:c.a.noop,saveScrollmark:c.a.noop,isArchived:false,isLimited:false,isSlackbotIm:false,isAppIm:false,overlayVisible:false,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,useGlobalNav:false,featureClassicNav:false,featureAriaApplicationMode:false,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:false,setMessagePaneHasUnmounted:c.a.noop,currentUserId:null,isAppSpaceOpen:false,isShared:false,isOrgShared:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,featureReactThreads:false,currentThreadKey:void 0,isThreadable:c.a.noop,unavailableTeamId:"",canPostInChannel:true,featureAnnounceOnly:false,featureSonicInputs:false,featureTriggerUserDmClick:false,searchInProductEducationReset:c.a.noop,bootInFlight:false,bootType:null,isFileExpanding:false,featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false};var gi=function(e){fe()(t,e);function t(e){ue()(this,t);var r=me()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.list=null;r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onVisibleRowsChanged=r.onVisibleRowsChanged.bind(r);r.onUnreadBannerHide=r.onUnreadBannerHide.bind(r);r.setListRef=r.setListRef.bind(r);r.shouldIgnoreScrollKeys=r.shouldIgnoreScrollKeys.bind(r);r.shouldIgnoreArrowKeys=r.shouldIgnoreArrowKeys.bind(r);r.requestHistory=r.requestHistory.bind(r);r.jumpToMostRecent=r.jumpToMostRecent.bind(r);r.jumpToUnread=r.jumpToUnread.bind(r);r.focus=r.focus.bind(r);r.state={showingArchiveBanner:false,showingUnreadBanner:false,unreadPlacement:cn.VISIBLE};r.historyRequests={};r.prqMetrics={usableVisible:{}};r.sendSessionFrameStats=r.sendSessionFrameStats.bind(r);r.recordSessionFrameStats=r.recordSessionFrameStats.bind(r);return r}pe()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.onMount();var r=!!this.props.timestamps.length;var a=!!(this.props.unreadCount||this.props.unreadCountKnown);r&&a&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:c.a.filter(this.props.timestamps,function(e){return e>t.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages");this.recordAndTrackTimeToVisible();document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=this.props.channelId;this.setState(function(e){var a=r.getUnreadLinePlacement();if(!t.isLoading&&!c.a.isEmpty(t.timestamps)){var n=false===t.reachedEnd&&!t.prevReachedEnd;if(n!==e.showingArchiveBanner)return f()({},e,{unreadPlacement:a,showingArchiveBanner:n})}if(e.unreadPlacement!==a)return f()({},e,{unreadPlacement:a});return e});this.setState(function(e){var t=r.getUnreadBannerDisplayCount();var a=t>0;return f()({},e,{showingUnreadBanner:a})});this.setState(function(e){var t=r.getUnreadBannerDisplayCount();var a=t>0;return f()({},e,{showingUnreadBanner:a})});if(a&&t.channelId!==a){var n=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:a,scrollmark:n});this.historyRequests={};this.recordAndTrackTimeToUsable(Se["v"].ABANDONED);this.state.caughtError&&this.setState(function(){return{caughtError:false}});t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages")}t.channelId===a&&t.isAppIm!==this.props.isAppIm&&t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages");var i=this.props.timestamps.length!==t.timestamps.length;var s=this.props.unreadCount!==t.unreadCount||this.props.unreadCountKnown!==t.unreadCountKnown;!t.channelId||!i&&!s||"channel"!==t.type&&"private"!==t.type||this.props.fetchSliHighlights({channelId:t.channelId,timestamps:c.a.filter(t.timestamps,function(e){return e>t.lastReadTs}),lastReadTs:t.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs})}},{key:"componentDidUpdate",value:function e(){if(this.list){var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t)}(true===this.props.reachedStart&&true===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(Se["v"].COMPLETED)}},{key:"componentWillUnmount",value:function e(){if(Object(Ee["a"])()){var t=this.list&&this.list.getScrollmark();var r=this.props.channelId;this.props.saveScrollmark({channelId:r,scrollmark:t})}this.sendSessionFrameStats();window.removeEventListener("focus",this.recordSessionFrameStats);this.props.setMessagePaneHasUnmounted(true)}},{key:"onFocusEnter",value:function e(t){this.hasFocus=true;this.hasKeyboardFocus=t.isKeyboardFocus}},{key:"onFocusLeave",value:function e(){this.hasFocus=false;this.hasKeyboardFocus=false}},{key:"onVisibleRowsChanged",value:function e(){if(!this.list)return;var t=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:t}});var r=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(r);this.list.isAtBottom()&&this.props.searchInProductEducationReset()}},{key:"onUnreadBannerHide",value:function e(){this.setState(function(){return{showingUnreadBanner:false}})}},{key:"getUnreadLinePlacement",value:function e(){if(1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list)return cn.VISIBLE;return this.list.getUnreadLinePlacement()}},{key:"getUnreadBannerDisplayCount",value:function e(){var t=this.props,r=t.timestamps,a=t.lastReadTs,n=t.unreadCount,i=t.reachedEnd;return r.length&&i?r.filter(function(e){return e>a}).length:n}},{key:"setListRef",value:function e(t){this.list=t}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"recordAndTrackTimeToVisible",value:function e(){if(this.props.hasMessagePaneUnmounted&&!this.props.bootInFlight)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}if(Object(Ee["a"])()){var t=Object(o["b"])();if(!Object(ke["shouldLogTTVMetrics"])(t.getState()))return;t.dispatch(Object(ke["setShouldLogTTVMetrics"])(false))}var r=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:true}).unprocessed;Object(Ee["a"])()&&this.props.telemeter.store("prq_time_to_visible_"+this.props.bootType,r);this.prqMetrics.usableVisible=le()({},this.props.channelId,r);Object(je["j"])(r,"APP_ICON",false,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);this.props.setMessagePaneHasUnmounted(true);this.props.logger.info("PERF","Logged time to visible (TTV): "+r)}},{key:"recordAndTrackTimeToUsable",value:function e(t){if(Object(Ee["a"])()&&this.props.bootInFlight)return;if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}if(Object(Ee["a"])()){var r=Object(o["b"])();if(!Object(ke["shouldLogTTUMetrics"])(r.getState()))return;r.dispatch(Object(ke["setShouldLogTTUMetrics"])(false))}var a=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:true}).unprocessed;Object(Ee["a"])()&&this.props.telemeter.store("prq_time_to_usable_"+this.props.bootType,a);Object(je["i"])(a,"APP_ICON",true,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,t,window.desktop);this.prqMetrics.usableVisible={};this.props.logger.info("PERF","Logged time to usable (TTU): "+a)}},{key:"recordSessionFrameStats",value:function e(){window.removeEventListener("focus",this.recordSessionFrameStats);window.addEventListener("blur",this.sendSessionFrameStats);window.addEventListener("beforeunload",this.sendSessionFrameStats);Object(je["e"])(this.props.teamId,this.props.enterpriseId,Se["l"].PRQ_SESSION_FRAME_STATS)&&Object(Ce["g"])()}},{key:"sendSessionFrameStats",value:function e(){window.addEventListener("focus",this.recordSessionFrameStats);window.removeEventListener("blur",this.sendSessionFrameStats);window.removeEventListener("beforeunload",this.sendSessionFrameStats);if(!Object(Ce["e"])())return;Object(Ce["i"])();var t=Object(Ce["a"])();if(0===t.durationMs)return;Object(je["h"])(t.durationMs,t.histFrameRenderTime,t.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}},{key:"shouldIgnoreScrollKeys",value:function e(t){var r=t.target;var a=r===document.body;var n=this.hasFocus;var i=Object(Te["e"])();var s=this.props,o=s.channelId,l=s.featureSonicInputs;if(l){var c=Object(Ie["a"])({viewContext:we["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:o});i=!!c&&c.hasFocus()}return!(a||n||i)}},{key:"shouldIgnoreArrowKeys",value:function e(t){var r=t.target;var a=document.querySelector(".client_channels_list_container");var n=document.getElementById("col_flex");var i=a&&a.contains(r);var s=n&&n.contains(r);var o=this.props.featureSonicInputs?this.props.userAttentionIsOnChat:Object(Te["f"])();return!o||s||i||Object(_n["b"])()||!this.hasKeyboardFocus}},{key:"isUnreadLineVisible",value:function e(){var t=this.props,r=t.isGhostLastRead,a=t.unreadCount,n=t.reachedEnd,i=t.isLoading;if(i)return false;if(!r&&this.list.getUnreadLinePlacement()===cn.VISIBLE)return true;if(!a&&n&&this.list.isAtBottom())return true;return false}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});this.props.logger.error("MessagePane componentDidCatch:",t,"message_pane_componentDidCatch")}},{key:"requestHistory",value:function e(t){var r=t.oldest,a=t.latest;var n=this.props,i=n.channelId,s=n.type,o=n.reachedStart,l=n.reachedEnd,c=n.logger;if(o&&l)return false;var u=r;var d=a;if(d&&o){if(!u)return false;d=null}if(u&&l){if(!d)return false;u=null}if(this.shouldPreventHistoryRequest({oldest:r,latest:a})){c.error({channelId:i,latestTs:d,oldestTs:u},"message_pane_request_rate_limited");return false}var p="message-pane/requestHistory";var v=this.props.fetchHistory({channelId:i,type:s,oldest:u,latest:d,reason:p});v&&this.logHistoryRequest({oldest:u,latest:d});return v}},{key:"logHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=r+"_"+a;var o=this.historyRequests[s];if(!o){o={count:0,time:0};this.historyRequests[s]=o}if(i-1e4>o.time){o.count=1;o.time=i}else o.count+=1}},{key:"logAppHomeRequest",value:function e(t,r){this.props.featureTriggerUserDmClick&&this.props.callAppHomeOpenEventByChannelId({channelId:t,appHomeSection:r})}},{key:"shouldPreventHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[r+"_"+a];if(!s)return false;if(s.count<=3)return false;if(s.time<i-1e4)return false;return true}},{key:"jumpToMostRecent",value:function e(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function e(t){this.list.jumpToUnread(t)}},{key:"renderArchivesBanner",value:function e(){if(!this.state.showingArchiveBanner)return null;var t=this.props.timestamps;if(c.a.isEmpty(t))return null;return n.a.createElement(Tn,{firstTimestamp:c.a.first(t),lastTimestamp:c.a.last(t),jumpToRecent:this.jumpToMostRecent})}},{key:"renderUnreadBanner",value:function e(){var t=this.props,r=t.unreadCount,a=t.unreadCountKnown,i=t.lastReadTs,s=t.channelId,o=t.isGhostLastRead,l=t.markMostRecentMsgRead,c=t.newxpOnboardingStep,u=t.overlayVisible,d=t.isArchived;if(u)return null;if(c&&c!==Ea.CANCELLED&&c!==Ea.COMPLETE)return null;if(d)return null;return n.a.createElement(Gn,{channelId:s,hasUnreads:r>0,displayCount:this.getUnreadBannerDisplayCount(),known:a,since:i,ghost:o,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:l,onHide:this.onUnreadBannerHide})}},{key:"renderDegradedBanner",value:function e(){var t=this.props,r=t.newxpOnboardingStep,a=t.overlayVisible;if(a)return null;if(r)return null;return n.a.createElement(Ae["a"],null,n.a.createElement(ei["a"],null))}},{key:"renderSearchScrollbackTip",value:function e(){return n.a.createElement($n,null)}},{key:"renderMessagePaneBannerContainer",value:function e(){var t=this.props,r=t.newxpOnboardingStep,a=t.overlayVisible;if(a)return null;if(r)return null;return n.a.createElement(hn["a"],null)}},{key:"render",value:function e(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===Ea.START)return n.a.createElement(Ca,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return n.a.createElement(On["a"],{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;var t=ye.a.msie||ye.a.msedge;var r=!this.props.overlayVisible&&!t;var a=ge()("p-message_pane",{"p-message_pane--ie":t,"p-message_pane--global-nav":this.props.useGlobalNav,"p-message_pane--classic-nav":Object(Ee["a"])()&&this.props.featureClassicNav});var i=this.props,s=i.type,o=i.channelDisplayName,l=i.isShared,c=i.isOrgShared,u=i.isYou,d=i.isMuted,p=i.hasUnreads,v=i.hasDraft,m=i.isArchived,h=i.unreadCount,f=i.badgeCount,b=i.canPostInChannel,g=i.featureAnnounceOnly,_=i.isFileExpanding,y=i.userAttentionIsOnChat;var O=Object(yn["a"])({type:s,displayName:o,isShared:l,isOrgShared:c,isYou:u,isMuted:d,hasUnreads:p,hasDraft:v,isArchived:m,unreadCount:h,badgeCount:f,canPost:b,featureAnnounceOnly:g,isSelected:false,userActive:false,isTyping:false});var k=Object(Z["makeIdForThreadList"])(this.props.currentThreadKey);var E=n.a.createElement("div",{className:a,"data-qa":"message_pane"},n.a.createElement("div",{className:"p-message_pane__top_banners"},n.a.createElement(fn["a"],null),this.renderDegradedBanner(),n.a.createElement(li,null),this.renderUnreadBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),n.a.createElement(hi,{ref:this.setListRef,channelId:this.props.channelId,ariaLabel:O,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:r,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:we["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureReactMessages:this.props.featureReactMessages,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,featureReactThreads:this.props.featureReactThreads,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:k,isFileExpanding:_,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,userAttentionIsOnChat:y}),this.renderArchivesBanner(),Object(Ee["a"])()?n.a.createElement(mi,{channelId:this.props.channelId}):null);if(Object(Ee["a"])())return E;return n.a.createElement(bn["a"],{component:this,order:0},E)}}]);return t}(a["PureComponent"]);gi.displayName="BaseMessagePane";gi.defaultProps=bi;var _i=Object(gn["a"])(gi,{updateStore:function e(t){var r=t.instance,a=t.dispatch;var n=r.list&&r.list.getScrollmark();a(P({channelId:r.props.channelId,scrollmark:n}))}});var yi=r(1527);var Oi=Object(u["createSelectorCreator"])(u["defaultMemoize"],ee["a"]);var ki=20;var Ei=Oi([D["getPotentiallyOutdatedTimestamps"],B["b"],function(e,t,r){return r}],function(e,t,r){var a=e.timestamps,n=e.start,i=e.end,s=e.reachedStart,o=e.reachedEnd,l=e.prevReachedEnd;if(!o&&!l&&a&&a.length-c.a.sortedLastIndex(a,r)<ki)return{messages:[],rollups:{},reachedStart:false,reachedEnd:false};var u=c.a.reject(c.a.map(a,function(e){return t[e]}),X["isHidden"]);var d=Object(yi["a"])(u),p=d.rollups,v=d.messages;return{messages:v,timestamps:c.a.map(v,function(e){return e.ts}),rollups:p,reachedStart:s,reachedEnd:o,prevReachedEnd:l,oldest:n,latest:i}});function ji(e){var t=e.state,r=e.channelId,a=e.timestamps,n=e.rollups,i=e.lastReadTs;return c.a.find(a,function(e){var a=Object(B["a"])(t,r,e);var s=Object(E["getCurrentUserId"])(t);if(!a)return false;if(n[e]){var o=c.a.values(n[e]);var l=c.a.map(o,"ts");var u=c.a.map(l,function(e){return Object(B["a"])(t,r,e)});return c.a.some(u,function(e){return Object(X["isMessageUnread"])(e,i,s)})}return Object(X["isMessageUnread"])(a,i,s)})}var Ci=function e(t){var r=Object(G["a"])(t);var a=Object(A["d"])(t,r);var n=Object(F["getGroupForUser"])(t,"context_bar");var i=Object(E["isFeatureEnabled"])(t,"feature_react_messages");var s=Object(E["isFeatureEnabled"])(t,"feature_tinyspeck");var o=Object(ne["b"])(t);var l=Object(E["isFeatureEnabled"])(t,"feature_classic_nav");var u=Object(E["isFeatureEnabled"])(t,"feature_aria_application_mode");var m=Object(E["isFeatureEnabled"])(t,"feature_context_bar");var h=Object(E["getCurrentUserId"])(t);var f=Object(te["b"])(t);var b=Object(te["a"])(t);var g=Object(v["b"])(t);var _=Object(q["getChannelTriggers"])(t);var y=Object(v["e"])(t);var k=Object(re["getWindowLastBlurEvent"])(t);var j=Object(re["getWindowLastFocusEvent"])(t);var C=Object(Z["getCurrentThreadKey"])(t);var S=Object(d["c"])({state:t});var w=Object(p["a"])({state:t});var I=Object(Q["isBootInFlight"])(t);var T=Object(re["getBootType"])(t);if(!a)return{featureReactMessages:i,featureTinyspeck:s,featureClassicNav:l,currentUserId:h,teamId:f,enterpriseId:b,sessionId:g,msgTriggers:_,hasMessagePaneUnmounted:y,windowLastBlurEvent:k,windowLastFocusEvent:j,telemeter:S,logger:w,bootInFlight:I,bootType:T};var P=Object(O["isChannelLoading"])(t,r);var M=Object(O["isChannelLoadingOlder"])(t,r);var x=Object(N["getLastReadTs"])(a);var L=false;var B=Object(v["d"])(t);if(B&&B!==x){x=B;L=true}var H=Object(v["h"])(t);var W=Object(v["i"])(t);var V=Object(v["g"])(t);var K=Object(v["f"])(t);var z=Object(N["getUnreadCount"])(a);var X=Object(D["getTimestampsByChannelId"])(t,r,x);var ee=X&&X.reachedEnd;var oe=Object(v["b"])(t);var le=Object(v["l"])(t);var ce=Object(U["a"])(t);var ue=Ei(t,r,H),de=ue.timestamps,pe=ue.rollups,ve=ue.reachedStart,me=ue.reachedEnd,he=ue.prevReachedEnd,fe=ue.oldest,be=ue.latest;(Object(N["isPublicChannel"])(a)&&!Object(N["isMemberOfChannel"])(a)||Object(N["isArchived"])(a))&&(x=c.a.last(de));var ge=ji({state:t,channelId:r,timestamps:de,rollups:pe,lastReadTs:x});var _e=Object(ae["isScreenReaderEnabled"])(t);var ye=Object(E["isFeatureEnabled"])(t,"feature_react_threads");var Oe=Object(v["n"])(t)&&Object(ie["a"])(t,r);var ke=void 0;Object(N["isUnavailable"])(t,a)&&(ke=Object(N["getUnavailableTeamId"])(t,a));var Ee=Object(se["isAnyFileExpanding"])(t);var je=Object(J["e"])(t);return{isFileExpanding:Ee,channelId:r,type:Object(N["getChannelType"])(a),channelDisplayName:Object(N["getDisplayNameForChannel"])(t,a,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),timestamps:de,reachedStart:ve,reachedEnd:me,prevReachedEnd:he,oldest:fe,latest:be,lastReadTs:x,isGhostLastRead:L,unreadCount:z,unreadCountKnown:ee,startTs:H,startTsOffset:W,highlightTs:V,highlightLazy:K,focusRequestedTs:Object(E["isFeatureEnabled"])(t,"feature_react_threads")?Object(v["c"])(t):null,rollups:pe,isAppSpaceOpen:Oe,isArchived:Object(N["isArchived"])(a),isLoading:P,isLoadingOlder:M,isLimited:Object(D["getIsLimited"])(t,r),isSlackbotIm:Object(N["isSlackbot"])(a),isAppIm:Object(N["isImWithApp"])(t,r),overlayVisible:Object(v["p"])(t),channelSessionId:oe,prevChannelSwitchTs:le,theme:ce,newxpOnboardingStep:Object(v["j"])(t),firstUnreadTs:ge,featureReactMessages:i,featureTinyspeck:s,useGlobalNav:o,featureClassicNav:l,featureAriaApplicationMode:u,teamId:f,enterpriseId:b,sessionId:g,msgTriggers:_,hasMessagePaneUnmounted:y,windowLastBlurEvent:k,windowLastFocusEvent:j,currentUserId:h,badgeCount:Object(A["c"])(t,a),isShared:Object(N["isExternallySharedChannel"])(a),isOrgShared:Object(N["isOrgShared"])(a),isYou:Object(N["isYou"])(t,a),isMuted:Object(R["isChannelMutedById"])(t,r),hasUnreads:!!Object(N["getUnreadCount"])(a),hasDraft:Object(N["getHasDraft"])(t,r),isScreenReaderEnabled:_e,featureReactThreads:ye,currentThreadKey:ye?C:void 0,unavailableTeamId:ke,canPostInChannel:Object($["s"])(t,r),featureAnnounceOnly:Object(E["isFeatureEnabled"])(t,"feature_announce_only"),featureTriggerUserDmClick:Object(E["isFeatureEnabled"])(t,"feature_trigger_user_dm_click"),featureContextBar:m,featureSonicInputs:Object(E["isFeatureEnabled"])(t,"feature_sonic_inputs"),telemeter:S,logger:w,bootInFlight:I,bootType:T,featureOfflineMode:Object(E["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(Y["c"])(t),userAttentionIsOnChat:je,contextBarExperimentGroup:n}};function Si(e){return function(t,r){var a=Object(v["q"])(r());if(a!==e){Object(p["a"])({getState:r}).info("CHECK-UNREADS","unreadLineVisible updated: "+a+" -> "+e);t(Object(T["n"])(e))}}}var wi=function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(e,t){return X["isThreadable"].apply(void 0,[t()].concat(r))}};var Ii={fetchHistory:I,fetchSliHighlights:x["fetchSliHighlights"],setUnreadPoint:L["setUnreadPoint"],markMostRecentMsgRead:L["markMostRecentMsgRead"],setUnreadLineVisibility:Si,clearHighlightTs:T["a"],jumpToTimestamp:T["c"],saveScrollmark:P,onMount:M["b"],setMessagePaneHasUnmounted:T["k"],makeMessageSummary:W["a"],setFocusRequestedTs:T["h"],callAppHomeOpenEventByChannelId:z,isThreadable:wi,showThreadIfThreadable:H["showThreadIfThreadable"],searchInProductEducationReset:m["searchInProductEducationReset"]};var Ti=Object(i["connect"])(Ci,Ii)(_i);var Ai=Ti;var Ni=r(163);var Pi=function e(t,r){if(!t)throw new Error("mountMessagePane must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(Ni["a"],null,n.a.createElement(Ai,null))),r)};var Ri=Pi;var Mi=r(44);Object(Mi["a"])("interop.mountMessagePane",Ri)},function(e,t,r){"use strict";r.r(t);var a=r(44);var n=r(196);var i=r(116);var s=r(273);var o=r(1693);var l=r(758);var c=r(850);var u=r(1792);var d=r(1);var p=r.n(d);var v=r(88);var m=r.n(v);var h=r(13);var f=r(2);var b=r(119);var g=r(27);var _=r(3990);var y=r(163);var O=function e(){return document.getElementById("search_popover_container")};var k=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(b["a"])(p.a.createElement(h["Provider"],{store:Object(g["d"])(t)},p.a.createElement(y["a"],null,p.a.createElement(_["a"],{onClickRefreshSearch:f["noop"]}))),r)};var E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();m.a.unmountComponentAtNode(t)};var j={mountPrimarySearch:k};var C=r(4199);var S=function e(t,r){if(!t)throw new Error("mountSearch must be called with a teamId parameter");if(!r)throw new Error("mountSearch must be called with a reactRoot parameter");Object(b["a"])(p.a.createElement(h["Provider"],{store:Object(g["d"])(t)},p.a.createElement(y["a"],null,p.a.createElement(C["a"],null))),r)};var w={mountSearch:S};var I=r(531);var T=r(366);var A=r(198);var N=function e(t){return function(){return TS.redux.dispatch(t.apply(void 0,arguments))}};Object(a["a"])("interop.searchUi",{getVisible:function e(){return Object(n["t"])(TS.redux.getState())}});Object(a["a"])("interop.searchInputBox",{getSearchInputBoxDisplayQuery:function e(){return Object(s["getSearchInputBoxDisplayQuery"])(TS.redux.getState())},getInFilterTextyString:function e(t){return Object(o["c"])(TS.redux.getState(),t)}});Object(a["a"])("interop.searchActions",{close:N(l["a"]),setFocusedViaTabKey:N(i["n"]),openFromCmdF:N(c["b"]),openFromCmdG:N(c["c"]),toggleFromQuickSwitcherCmd:N(u["a"]),openFromClick:N(c["a"]),openFromSlashCommand:N(c["i"]),openFromKeyDown:N(c["f"]),openFromFilesMenu:N(c["e"])});Object(a["a"])("interop.mountPrimarySearch",k);Object(a["a"])("interop.unmountPrimarySearch",E);Object(a["a"])("interop.mountSearch",S);Object(a["a"])("interop.usePrimarySearch",function(){return Object(I["a"])(TS.redux.getState())});Object(a["a"])("interop.isExperimentAnyOmniSwitcher",function(){return Object(T["b"])(TS.redux.getState())});Object(a["a"])("interop.isSearchAutocompleteOpen",function(){return Object(A["isSearchAutocompleteOpen"])(TS.redux.getState())})},,function(e,t,r){"use strict";r.r(t);var a=r(1);var n=r.n(a);var i=r(88);var s=r.n(i);var o=r(13);var l=r(27);var c=r(44);var u=r(6);var d=r.n(u);var p=r(7);var v=r.n(p);var m=r(8);var h=r.n(m);var f=r(9);var b=r.n(f);var g=r(0);var _=r(10);var y=r(701);var O=r(3088);var k={title:g["b"].string,subtitle:g["b"].string,description:g["b"].node};var E={title:"",subtitle:"",description:null};var j=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;return n.a.createElement("h1",{className:"padding_bottom_100"},this.props.title)}},{key:"renderSubtitle",value:function e(){if(!this.props.subtitle)return null;return n.a.createElement("h3",{className:"padding_top_150"},this.props.subtitle)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return n.a.createElement("p",{className:"padding_top_50 margin_0 sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ent_settings_header padding_bottom_150"},this.renderTitle(),this.renderSubtitle(),this.renderDescription())}}]);return t}(a["PureComponent"]);j.displayName="SettingsHeader";j.defaultProps=E;var C=j;var S=r(37);var w=r.n(S);var I=r(3);var T=r.n(I);var A=r(2);var N=r(1757);var P=r(1562);var R=r(159);var M=r(15);var x=r(48);var D=r(4);var F=r(4395);var L=r(1239);var B=r(28);var U=r(5);var q=r.n(U);var G=r(16);var H=r.n(G);var W=r(483);var V=r(22);var K=r(54);var z=r(51);var Q=r(126);var Y=r(179);var J=r(687);var X=r(3090);var Z=new _["b"]("enterprise_settings");var $="members";var ee="guests";var te="text";var re="url";var ae="all";var ne="/custom_tos_view";var ie=16e3;var se={guestsChecked:g["b"].bool,membersUrl:g["b"].string,membersText:g["b"].string,membersContentType:g["b"].oneOf([te,re]),onSubmit:g["b"].func.isRequired,onTextChange:g["b"].func,onCheckboxChange:g["b"].func,onUrlChange:g["b"].func,onMembersContentTypeChange:g["b"].func};var oe={guestsChecked:false,membersUrl:"",membersText:"",membersContentType:"text",onTextChange:A["noop"],onCheckboxChange:A["noop"],onUrlChange:A["noop"],onMembersContentTypeChange:A["noop"]};var le=function e(t){var r=t.error,a=t.url,i=t.type,s=t.onChange;var o=Z.t("https://\u2026");return n.a.createElement(Y["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:a,onChange:s,errorText:r,errorLevel:"error",placeholder:o})};le.displayName="renderInput";var ce=function e(t){var r=t.error,a=t.text,i=t.type,s=t.onChange;var o=Z.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_dark_grey cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,r=e.key,a=e.text;return"a"===t?n.a.createElement(z["a"],{key:r,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},a):null});return n.a.createElement(J["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:a,hintText:o,onChange:s,errorText:r,errorLevel:"error"})};ce.displayName="renderTextarea";var ue=function e(t,r){if(!Object(W["d"])(r)&&t===$)return Z.t("Please enter Terms of Service for Members.");if(r.length>=ie)return Z.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:ie});return""};var de=function e(t,r){if(!Object(W["d"])(r)){if(t===$)return Z.t("Please enter Terms of Service URL for Members.");if(t===ee)return Z.rt("Please enter Terms of Service URL for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(!Object(W["b"])(r))return Z.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var pe=function e(t){var r=t.type,a=t.value,i=t.label,s=t.onChange;return n.a.createElement(K["a"],{id:"tos_accept_all_"+r+"_label",htmlFor:"tos_accept_all_"+r+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(Q["a"],{id:"tos_accept_all_"+r+"_checkbox",checked:a,onChange:s}))};pe.displayName="renderCheckbox";var ve=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={membersUrl:r.props.membersUrl,membersText:r.props.membersText,membersContentType:r.props.membersContentType,membersUrlError:"",membersTextError:"",guestsChecked:r.props.guestsChecked};r.onAllChange=r.onAllChange.bind(r);r.onMembersTextChange=r.onTextChange.bind(r,$);r.onMembersUrlChange=r.onUrlChange.bind(r,$);r.onMembersToggle=r.onToggle.bind(r,$);r.onGuestsToggle=r.onToggle.bind(r,ee);r.onCheckboxChange=r.onCheckboxChange.bind(r,ee);return r}v()(t,[{key:"onAllChange",value:function e(t){var r=t.target.value;this.setState(function(){return{all:r}})}},{key:"onToggle",value:function e(t){var r=t+"ContentType";this.setState(function(e){return q()({},r,e[r]===te?re:te)})}},{key:"onTextChange",value:function e(t,r){this.setState(function(){var e;return e={},q()(e,t+"Text",r),q()(e,t+"TextError",""),e});this.props.onTextChange(t,r)}},{key:"onCheckboxChange",value:function e(t,r){var a=r.target.checked;this.setState(function(){var e;return e={},q()(e,t+"Checked",a),q()(e,t+"CheckboxError",""),e});this.props.onCheckboxChange(t,a)}},{key:"onUrlChange",value:function e(t,r){this.setState(function(){var e;return e={},q()(e,t+"Url",r),q()(e,t+"UrlError",""),e});this.props.onUrlChange(t,r);this.props.onMembersContentTypeChange()}},{key:"validate",value:function e(t){var r=this.state,a=r.membersUrl,n=r.membersText,i=r.membersContentType;var s={};i===te&&(s.membersTextError=ue($,n));i===re&&(s.membersUrlError=de($,a));this.setState(function(){return s},t)}},{key:"submit",value:function e(t){var r=this.state,a=r.all,n=w()(r,["all"]);var i=T()({all:a===ae},n);this.props.onSubmit(i,t)}},{key:"isValid",value:function e(){var t=this.state,r=t.all,a=t.membersUrl,n=t.membersText,i=t.membersContentType,s=t.membersUrlError,o=t.membersTextError;var l=i===te&&n&&!o||i===re&&a&&!s;if(r===ae||!l)return l;return l}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==re)return null;var t=this.state,r=t.membersUrl,a=t.membersUrlError;var n={error:a,url:r,type:$,onChange:this.onMembersUrlChange};return le(n)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==te)return null;var t=this.state,r=t.membersText,a=t.membersTextError;var n={error:a,text:r,type:$,onChange:this.onMembersTextChange};return ce(n)}},{key:"renderMembersInputBar",value:function e(){var t=this.state,r=t.membersUrl,a=t.membersText,n=t.membersContentType;var i=!a&&n===te||!r&&n===re;var s={previewIsDisabled:i,contentType:n,content:n===te?a:r,type:$,onToggle:this.onMembersToggle,onChange:this.onUrlChange};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var r=this;var a=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=Z.t("Preview");var c=i===re;var u=c?function(){var e=window.open((Object(A["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return r["tos_preview_"+o].submit()};var d=H()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_dark_grey:a});var p=n.a.createElement(z["a"],{disabled:a,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(V["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:ne,method:"POST",ref:function e(t){r["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderInputBar",value:function e(t){var r=t.contentType,a=t.onToggle;var i=Z.t("Terms of Service");var s=r===te?Z.t("Enter URL"):Z.t("Enter text");var o=H()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(z["a"],{onClick:a},n.a.createElement("span",{className:o},s)))}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"members",value:this.state.guestsChecked,label:Z.t("Use the same Terms of Service as Full Members"),onChange:this.onCheckboxChange};return pe(t)}},{key:"render",value:function e(){var t=Z.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var r=Z.t("Full Members");var a=Z.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderGuestsCheckbox())}}]);return t}(a["PureComponent"]);ve.displayName="CustomTOSModalInputForm";ve.defaultProps=oe;var me=ve;var he={switchPane:g["b"].func,onTextChange:g["b"].func,membersText:g["b"].string,membersUrl:g["b"].string,guestsChecked:g["b"].bool,onCheckboxChange:g["b"].func,onUrlChange:g["b"].func,membersContentType:g["b"].string,onMembersContentTypeChange:g["b"].func};var fe={guestsChecked:false,switchPane:A["noop"],onCheckboxChange:A["noop"],onTextChange:A["noop"],membersText:"",membersUrl:"",onUrlChange:A["noop"],membersContentType:"text",onMembersContentTypeChange:A["noop"]};var be=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this;var r=this.props.switchPane;var i="Custom Terms of Service";return n.a.createElement(a["Fragment"],null,n.a.createElement(L["g"],null,n.a.createElement(L["i"],{id:"customTOS__title-bar",title:i,"data-qa":"dialog_header"})),n.a.createElement(L["c"],null,n.a.createElement(L["d"],{"data-qa":"dialog_body"},n.a.createElement(me,{ref:function e(r){t.inputForm=r},membersText:this.props.membersText,onTextChange:this.props.onTextChange,guestsChecked:this.props.guestsChecked,onCheckboxChange:this.props.onCheckboxChange,membersUrl:this.props.membersUrl,onUrlChange:this.props.onUrlChange,membersContentType:this.props.membersContentType,onMembersContentTypeChange:this.props.onMembersContentTypeChange}))),n.a.createElement(L["e"],{"data-qa":"dialog_footer"},n.a.createElement("div",{className:"sk_dark_gray"},"Step 1 of 2"),n.a.createElement(L["f"],null,n.a.createElement(L["b"],{type:"outline"},"Cancel"),n.a.createElement(B["d"],{type:"primary","data-qa":"dialog_save",onClick:function e(){return r("accept")}},"Next"))))}}]);return t}(a["PureComponent"]);be.displayName="CustomTOSInputPane";be.defaultProps=fe;var ge=be;var _e=new _["b"]("enterprise_settings");var ye={membersShowAll:g["b"].bool,guestsShowAll:g["b"].bool,onSubmit:g["b"].func.isRequired};var Oe={membersShowAll:true,guestsShowAll:true};var ke=function e(t){var r=t.type,a=t.value,i=t.label,s=t.onChange;return n.a.createElement(K["a"],{id:"tos_accept_all_"+r+"_label",htmlFor:"tos_accept_all_"+r+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(Q["a"],{id:"tos_accept_all_"+r+"_checkbox",checked:a,onChange:s}))};ke.displayName="renderCheckbox";var Ee=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={membersShowAll:r.props.membersShowAll,guestsShowAll:r.props.guestsShowAll};Object(N["a"])(r,["onMembersShowAllChange","onGuestsShowAllChange"]);return r}v()(t,[{key:"onMembersShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{membersShowAll:r}})}},{key:"onGuestsShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{guestsShowAll:r}})}},{key:"submit",value:function e(t){var r=this.state,a=r.membersShowAll,n=r.guestsShowAll;var i={membersShowAll:a,guestsShowAll:n};this.props.onSubmit(i,t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:_e.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return ke(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:_e.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return ke(t)}},{key:"render",value:function e(){var t=_e.t("Require existing members to accept the new Terms of Service?");var r=_e.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},r),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(a["PureComponent"]);Ee.displayName="CustomTOSAcceptForm";Ee.defaultProps=Oe;var je=Ee;var Ce={switchPane:g["b"].func};var Se={switchPane:A["noop"]};function we(e){var t=e.switchPane;var r="Custom Terms of Service";return n.a.createElement(a["Fragment"],null,n.a.createElement(L["g"],null,n.a.createElement(L["i"],{id:"customTOS__title-bar",title:r,"data-qa":"dialog_header"})),n.a.createElement(L["c"],null,n.a.createElement(L["d"],{"data-qa":"dialog_body"},n.a.createElement(je,null))),n.a.createElement(L["e"],{"data-qa":"dialog_footer"},n.a.createElement("div",{className:"sk_dark_gray"},"Step 2 of 2"),n.a.createElement(L["f"],null,n.a.createElement(B["d"],{type:"outline",onClick:function e(){return t("input")}},"Back"),n.a.createElement(B["d"],{type:"primary","data-qa":"dialog_save"},"Save"))))}we.displayName="CustomTOSAcceptPane";we.defaultProps=Se;var Ie=we;var Te={closeModal:g["b"].func};var Ae={closeModal:A["noop"]};var Ne=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={membersText:"",guestsChecked:false,membersUrl:"",membersContentType:"text"};r.onTextChange=r.onTextChange.bind(r);r.onCheckboxChange=r.onCheckboxChange.bind(r);r.onUrlChange=r.onUrlChange.bind(r);r.onMembersContentTypeChange=r.onMembersContentTypeChange.bind(r);return r}v()(t,[{key:"onTextChange",value:function e(t,r){this.setState(function(){return{membersText:r}})}},{key:"onCheckboxChange",value:function e(t,r){this.setState(function(){return{guestsChecked:r}})}},{key:"onUrlChange",value:function e(t,r){this.setState(function(){return{membersUrl:r}})}},{key:"onMembersContentTypeChange",value:function e(){this.setState(function(){return{membersContentType:"url"}})}},{key:"getPanes",value:function e(){var t=this;return{input:{render:function e(r){return n.a.createElement(ge,T()({},r,{onTextChange:t.onTextChange,membersText:t.state.membersText,guestsChecked:t.state.guestsChecked,onCheckboxChange:t.onCheckboxChange,membersUrl:t.state.membersUrl,onUrlChange:t.onUrlChange,membersContentType:t.state.membersContentType,onMembersContentTypeChange:t.onMembersContentTypeChange}))}},accept:{render:function e(t){return n.a.createElement(Ie,t)}}}}},{key:"render",value:function e(){var t=this.props.closeModal;return n.a.createElement(F["b"],{closeModal:t,defaultPane:"input",panes:this.getPanes()})}}]);return t}(n.a.PureComponent);Ne.displayName="CustomTOSModal";Ne.defaultProps=Ae;var Pe={closeModal:function e(){return x["closeModal"].apply(void 0,arguments)}};var Re=Object(o["connect"])(null,Pe)(Ne);var Me=Object(M["b"])("Opens the custom-tos modal",function(e,t){var r=t();Object(D["isFeatureEnabled"])(r,"feature_org_modern_setting_page")&&e(Object(x["openModal"])({element:n.a.createElement(Re)}))});Me.propTypes=null;var xe=Me;var De=r(84);var Fe=new _["b"]("enterprise_settings");var Le={membersShowAll:g["b"].bool,guestsShowAll:g["b"].bool,onSubmit:g["b"].func.isRequired};var Be={membersShowAll:true,guestsShowAll:true};var Ue=function e(t){var r=t.type,a=t.value,i=t.label,s=t.onChange;return n.a.createElement(K["a"],{id:"tos_accept_all_"+r+"_label",htmlFor:"tos_accept_all_"+r+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(Q["a"],{id:"tos_accept_all_"+r+"_checkbox",checked:a,onChange:s}))};Ue.displayName="renderCheckbox";var qe=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={membersShowAll:r.props.membersShowAll,guestsShowAll:r.props.guestsShowAll};Object(N["a"])(r,["onMembersShowAllChange","onGuestsShowAllChange"]);return r}v()(t,[{key:"onMembersShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{membersShowAll:r}})}},{key:"onGuestsShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{guestsShowAll:r}})}},{key:"submit",value:function e(t){var r=this.state,a=r.membersShowAll,n=r.guestsShowAll;var i={membersShowAll:a,guestsShowAll:n};this.props.onSubmit(i,t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:Fe.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return Ue(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:Fe.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return Ue(t)}},{key:"render",value:function e(){var t=Fe.t("Require existing members to accept the new Terms of Service?");var r=Fe.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},r),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(a["PureComponent"]);qe.displayName="CustomTOSAcceptForm";qe.defaultProps=Be;var Ge=qe;var He=r(211);var We=r(364);var Ve=new _["b"]("enterprise_settings");var Ke="members";var ze="guests";var Qe="text";var Ye="url";var Je="all";var Xe="not_all";var Ze="/custom_tos_view";var $e=16e3;var et={membersUrl:g["b"].string,membersText:g["b"].string,membersContentType:g["b"].oneOf([Qe,Ye]),guestsUrl:g["b"].string,guestsText:g["b"].string,guestsContentType:g["b"].oneOf([Qe,Ye]),onSubmit:g["b"].func.isRequired};var tt={membersUrl:"",membersText:"",membersContentType:"text",guestsUrl:"",guestsText:"",guestsContentType:"text"};var rt=function e(t){var r=t.error,a=t.url,i=t.type,s=t.onChange;var o=Ve.t("https://\u2026");return n.a.createElement(Y["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:a,onChange:s,errorText:r,errorLevel:"error",placeholder:o})};rt.displayName="renderInput";var at=function e(t){var r=t.error,a=t.text,i=t.type,s=t.onChange;var o=Ve.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_dark_grey cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,r=e.key,a=e.text;return"a"===t?n.a.createElement(z["a"],{key:r,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},a):null});return n.a.createElement(J["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:a,hintText:o,onChange:s,errorText:r,errorLevel:"error"})};at.displayName="renderTextarea";var nt=function e(t,r){if(!Object(W["d"])(r)){if(t===Ke)return Ve.t("Please enter Terms of Service for Members.");if(t===ze)return Ve.rt("Please enter Terms of Service for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(r.length>=$e)return Ve.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:$e});return""};var it=function e(t,r){if(!Object(W["d"])(r)){if(t===Ke)return Ve.t("Please enter Terms of Service URL for Members.");if(t===ze)return Ve.rt("Please enter Terms of Service URL for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(!Object(W["b"])(r))return Ve.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var st=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={all:r.props.guestsText||r.props.guestsUrl?Xe:Je,membersUrl:r.props.membersUrl,membersText:r.props.membersText,membersContentType:r.props.membersContentType,membersUrlError:"",membersTextError:"",guestsUrl:r.props.guestsUrl,guestsText:r.props.guestsText,guestsContentType:r.props.guestsContentType,guestsUrlError:"",guestsTextError:""};r.onAllChange=r.onAllChange.bind(r);r.onMembersTextChange=r.onTextChange.bind(r,Ke);r.onGuestsTextChange=r.onTextChange.bind(r,ze);r.onMembersUrlChange=r.onUrlChange.bind(r,Ke);r.onGuestsUrlChange=r.onUrlChange.bind(r,ze);r.onMembersToggle=r.onToggle.bind(r,Ke);r.onGuestsToggle=r.onToggle.bind(r,ze);return r}v()(t,[{key:"onAllChange",value:function e(t){var r=t.target.value;this.setState(function(){return{all:r}})}},{key:"onToggle",value:function e(t){var r=t+"ContentType";this.setState(function(e){return q()({},r,e[r]===Qe?Ye:Qe)})}},{key:"onTextChange",value:function e(t,r){this.setState(function(){var e;return e={},q()(e,t+"Text",r),q()(e,t+"TextError",""),e})}},{key:"onUrlChange",value:function e(t,r){this.setState(function(){var e;return e={},q()(e,t+"Url",r),q()(e,t+"UrlError",""),e})}},{key:"validate",value:function e(t){var r=this.state,a=r.all,n=r.membersUrl,i=r.membersText,s=r.membersContentType,o=r.guestsUrl,l=r.guestsText,c=r.guestsContentType;var u={};s===Qe&&(u.membersTextError=nt(Ke,i));s===Ye&&(u.membersUrlError=it(Ke,n));if(a!==Je){c===Qe&&(u.guestsTextError=nt(ze,l));c===Ye&&(u.guestsUrlError=it(ze,o))}this.setState(function(){return u},t)}},{key:"submit",value:function e(t){var r=this.state,a=r.all,n=w()(r,["all"]);var i=T()({all:a===Je},n);this.props.onSubmit(i,t)}},{key:"isValid",value:function e(){var t=this.state,r=t.all,a=t.membersUrl,n=t.membersText,i=t.membersContentType,s=t.membersUrlError,o=t.membersTextError,l=t.guestsUrl,c=t.guestsText,u=t.guestsContentType,d=t.guestsUrlError,p=t.guestsTextError;var v=i===Qe&&n&&!o||i===Ye&&a&&!s;if(r===Je||!v)return v;var m=u===Qe&&c&&!p||u===Ye&&l&&!d;return m}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==Ye)return null;var t=this.state,r=t.membersUrl,a=t.membersUrlError;var n={error:a,url:r,type:Ke,onChange:this.onMembersUrlChange};return rt(n)}},{key:"maybeRenderGuestsInput",value:function e(){if(this.state.all===Je)return null;if(this.state.guestsContentType!==Ye)return null;var t=this.state,r=t.guestsUrl,a=t.guestsUrlError;var n={error:a,url:r,type:ze,onChange:this.onGuestsUrlChange};return rt(n)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==Qe)return null;var t=this.state,r=t.membersText,a=t.membersTextError;var n={error:a,text:r,type:Ke,onChange:this.onMembersTextChange};return at(n)}},{key:"maybeRenderGuestsTextarea",value:function e(){if(this.state.all===Je)return null;if(this.state.guestsContentType!==Qe)return null;var t=this.state,r=t.guestsText,a=t.guestsTextError;var n={error:a,text:r,type:ze,onChange:this.onGuestsTextChange};return at(n)}},{key:"maybeRenderGuestsInputBar",value:function e(){var t=this.state,r=t.all,a=t.guestsUrl,n=t.guestsText,i=t.guestsContentType;if(r===Je)return null;var s=!n&&i===Qe||!a&&i===Ye;var o={previewIsDisabled:s,contentType:i,content:i===Qe?n:a,type:ze,onToggle:this.onGuestsToggle};return this.renderInputBar(o)}},{key:"renderMembersInputBar",value:function e(){var t=this.state,r=t.membersUrl,a=t.membersText,n=t.membersContentType;var i=!a&&n===Qe||!r&&n===Ye;var s={previewIsDisabled:i,contentType:n,content:n===Qe?a:r,type:Ke,onToggle:this.onMembersToggle};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var r=this;var a=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=Ve.t("Preview");var c=i===Ye;var u=c?function(){var e=window.open((Object(A["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return r["tos_preview_"+o].submit()};var d=H()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_dark_grey:a});var p=n.a.createElement(z["a"],{disabled:a,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(V["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:Ze,method:"POST",ref:function e(t){r["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderInputBar",value:function e(t){var r=t.contentType,a=t.onToggle;var i=Ve.t("Terms of Service");var s=r===Qe?Ve.t("Enter URL"):Ve.t("Enter text");var o=H()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(z["a"],{onClick:a},n.a.createElement("span",{className:o},s)))}},{key:"renderRadio",value:function e(t){var r=this.state.all;var a=t.value,i=t.label;return n.a.createElement("div",{key:"tos_type_"+a},n.a.createElement(K["a"],{id:"tos_type_"+a+"_label",htmlFor:"tos_type_"+a+"_radio",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_input_form__label",text:i},n.a.createElement(He["a"],{id:"tos_type_"+a+"_radio",value:a,onChange:this.onAllChange,checked:a===r})))}},{key:"renderRadiogroup",value:function e(){var t=[{value:Je,label:Ve.t("Use the same Terms of Service as Full Members")},{value:Xe,label:Ve.t("Use a different Terms of Service")}];return n.a.createElement(We["a"],{field:"tos_type"},t.map(this.renderRadio,this))}},{key:"render",value:function e(){var t=Ve.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var r=Ve.t("Full Members");var a=Ve.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderRadiogroup(),this.maybeRenderGuestsInputBar(),this.maybeRenderGuestsTextarea(),this.maybeRenderGuestsInput())}}]);return t}(a["PureComponent"]);st.displayName="CustomTOSInputForm";st.defaultProps=tt;var ot=st;var lt=r(1831);var ct=new _["b"]("enterprise_settings");var ut="text";var dt="url";var pt={featureOrgModernSettingPage:g["b"].bool.isRequired,saving:g["b"].bool,customTos:g["b"].bool,membersTos:g["b"].string,membersContentType:g["b"].string,guestsTos:g["b"].string,guestsContentType:g["b"].string,openModal:g["b"].func,openCustomTOSModal:g["b"].func};var vt={saving:false,customTos:false,membersTos:"",membersContentType:"text",guestsTos:"",guestsContentType:"text",openModal:A["noop"],openCustomTOSModal:A["noop"]};var mt=function e(t){var r=t.customTos,a=t.membersTos,n=t.membersContentType,i=t.guestsTos,s=t.guestsContentType;return{all:!i,membersUrl:n===dt?a:"",membersText:n===ut?a:"",membersShowAll:!r,membersContentType:n,guestsUrl:s===dt?i:"",guestsText:s===ut?i:"",guestsShowAll:!r,guestsContentType:s}};var ht=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state=T()({},mt(r.props),{showEnable:false,showEdit:false,isPending:false,isValid:true});Object(N["a"])(r,["onClick","onEnable","onDisable","onEdit","onCancelEnable","onConfirmDisable","setFormSettings","onInputFormSubmit","onAcceptFormSubmit"]);return r}v()(t,[{key:"componentDidUpdate",value:function e(t,r){!this.props.saving&&this.state.isPending;this.dialog&&r.isPending!==this.state.isPending&&this.dialog.render({goButtonIsPending:this.state.isPending})}},{key:"onClick",value:function e(){var t=this.props.customTos;this.setState(function(){return t?{showEdit:true}:{showEnable:true}})}},{key:"onEnable",value:function e(){this.setState(function(){return{showEnable:true}});this.maybeRenderEnable()}},{key:"onDisable",value:function e(){this.dialog=this.props.openModal({element:this.renderDisable()})}},{key:"onEdit",value:function e(){this.setState(function(){return{showEdit:true}})}},{key:"onEnd",value:function e(){var t=this;this.reset(function(){t.settingsModalRef.setIndex(0);t.dialog&&t.dialog.close()})}},{key:"onCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}})}},{key:"onModCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}})}},{key:"onConfirmDisable",value:function e(){this.setIsPending(true);Object(R["b"])(Object(R["a"])().settings.deactivateOrgCustomTOSSettings())}},{key:"onConfirmEnable",value:function e(){this.setIsPending(true);var t=this.state,r=t.all,a=t.membersUrl,n=t.membersText,i=t.membersShowAll,s=t.membersContentType,o=t.guestsUrl,l=t.guestsText,c=t.guestsShowAll,u=t.guestsContentType;var d=s===ut?n:a;var p=this.props.customTos;var v={customTos:p,membersTos:d,membersShowAll:i,membersContentType:s,guestsShowAll:c};if(!r){var m=u===ut?l:o;v.guestsTos=m;v.guestsContentType=u}Object(R["b"])(Object(R["a"])().settings.createOrgCustomTOSSettings(v))}},{key:"onInputFormSubmit",value:function e(){var t=this;this.inputForm.validate(function(){var e=t.inputForm.isValid();t.setIsValid(e);e&&t.inputForm.submit(t.settingsModalRef.goToNextStep.bind(t.settingsModalRef))})}},{key:"onAcceptFormSubmit",value:function e(){this.acceptForm.submit(this.onConfirmEnable)}},{key:"setFormSettings",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A["noop"];this.setState(function(){return t},r)}},{key:"setIsPending",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setIsValid",value:function e(t){this.setState(function(){return{isValid:t}})}},{key:"reset",value:function e(t){var r=this;this.setState(function(){return T()({},mt(r.props),{showEnable:false,showEdit:false,isPending:false,isValid:true})},t)}},{key:"buildEnableSteps",value:function e(){var t=this;var r=this.renderInputForm();var a=this.renderAcceptForm();var n=function e(){return t.props.customTos?ct.t("Edit Custom Terms of Service"):ct.t("Enable Custom Terms of Service")};var i=function e(){return t.props.customTos?ct.t("Update Custom Terms of Service"):ct.t("Enable Custom Terms of Service")};var s=ct.t("Next");var o=ct.t("Cancel");var l=this.state.isPending;return[{children:r,goButtonText:s,cancelText:o,title:n(),withHeader:true,showBackButton:false,showCancelButton:true,buttonAlignment:"right",onGo:this.onInputFormSubmit,onCancel:this.onCancelEnable},{children:a,goButtonText:i(),goButtonIsPending:l,cancelText:o,title:n(),withHeader:true,showBackButton:true,showCancelButton:true,buttonAlignment:"right",onGo:this.onAcceptFormSubmit,onCancel:this.onCancelEnable}]}},{key:"maybeRenderEnable",value:function e(){var t=this;var r=this.props.featureOrgModernSettingPage;r&&this.props.openCustomTOSModal();return n.a.createElement(P["a"],{isOpen:this.state.showEnable||this.state.showEdit,onCancel:this.onCancelEnable,showCloseTransition:true,showOpenTransition:true,position:"fixed",steps:this.buildEnableSteps(),ref:function e(r){t.settingsModalRef=r},onSubmit:A["noop"]})}},{key:"renderDisable",value:function e(){var t=ct.t("Disable");var r="danger";var a=ct.t("When Custom Terms of Service are disabled, all members and guests will only be required to accept Slack\u2019s Terms of Service");var i=ct.t("Disable Custom Terms of Service");var s=this.state.isPending;return n.a.createElement(De["a"],{goButtonText:t,goButtonType:r,goButtonIsPending:s,title:i,onGo:this.onConfirmDisable,shouldCloseOnGo:false},n.a.createElement("p",null,a))}},{key:"renderInputForm",value:function e(){var t=this;var r=this.state,a=r.all,i=r.isValid,s=r.isPending,o=r.showEnable,l=r.showEdit,c=w()(r,["all","isValid","isPending","showEnable","showEdit"]);var u=T()({},c,{onSubmit:this.setFormSettings});return n.a.createElement(ot,T()({},u,{ref:function e(r){t.inputForm=r}}))}},{key:"renderAcceptForm",value:function e(){var t=this;var r=!this.props.customTos;var a={membersShowAll:r,guestsShowAll:r,onSubmit:this.setFormSettings};return n.a.createElement(Ge,T()({},a,{ref:function e(r){t.acceptForm=r}}))}},{key:"renderSetting",value:function e(){var t=this.props.customTos;var r={type:"button",enabled:t,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit};var a=ct.t("Custom Terms of Service");var i=t?ct.t("Enabled"):ct.t("Disabled");var s=ct.t("You can require members of your organization to accept custom Terms of Service before they can use Slack.");return n.a.createElement(lt["a"],{label:a,state:i,description:s,onClick:this.onClick,control:r,type:""})}},{key:"render",value:function e(){var t=this.props.featureOrgModernSettingPage;if(t)return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting());return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting()," ",this.maybeRenderEnable())}}]);return t}(a["PureComponent"]);ht.displayName="CustomTOSSetting";ht.defaultProps=vt;var ft=function e(t){return{featureOrgModernSettingPage:Object(D["isFeatureEnabled"])(t,"feature_org_modern_setting_page")}};var bt={openCustomTOSModal:function e(){return xe.apply(void 0,arguments)},openModal:x["openModal"]};var gt=Object(o["connect"])(ft,bt)(ht);var _t=gt;var yt=r(150);var Ot=r(24);var kt=r(1333);var Et=new _["b"]("enterprise_settings");var jt={featureCustomizedDomainClaimingClient:g["b"].bool,onSelect:g["b"].func.isRequired,orgContactEmail:g["b"].string.isRequired,onEmailChange:g["b"].func.isRequired,selected:g["b"].bool.isRequired,emailIsValid:g["b"].bool};var Ct={featureCustomizedDomainClaimingClient:false,emailIsValid:true};function St(e,t,r){if(!r)return null;if(!e&&t.length>0)return Et.t("This doesn\u2019t seem like an email address. Sorry!");return""}function wt(e){var t=e.orgContactEmail,r=e.onSelect,a=e.onEmailChange,i=e.selected,s=e.featureCustomizedDomainClaimingClient,o=e.emailIsValid;if(!s)return null;var l="ORG_PRIMARY_OWNER"===t?"":t;return n.a.createElement("div",null,n.a.createElement(K["a"],{htmlFor:"org_email",text:Et.t("Send emails to this address:"),cursor:"pointer",type:"inline"},n.a.createElement(He["a"],{id:"org_email",onChange:r,checked:i})),n.a.createElement("div",{className:"p-org_help_email__input"},n.a.createElement(Y["a"],{id:"org_email_text",ariaDescribedby:Et.t("organization help email"),name:"org_help_email",onChange:a,size:"medium",isDisabled:!i,value:i?l:"",errorText:St(o,l,s)})))}wt.displayName="CustomEmailRadio";wt.defaultProps=Ct;var It=wt;var Tt=r(444);var At=new _["b"]("enterprise_settings");var Nt={featureCustomizedDomainClaimingClient:g["b"].bool,selected:g["b"].bool.isRequired,onSelect:g["b"].func.isRequired,primaryOwner:g["b"].object};var Pt={featureCustomizedDomainClaimingClient:false,primaryOwner:{}};function Rt(e){var t=e.onSelect,r=e.selected,a=e.primaryOwner,i=e.featureCustomizedDomainClaimingClient;if(!i||!a.profile)return null;return n.a.createElement("div",null,n.a.createElement(K["a"],{htmlFor:"org_primary_owner",text:At.t("Send emails to the Org Primary Owner"),type:"inline",cursor:"pointer"},n.a.createElement(He["a"],{id:"org_primary_owner",onChange:t,checked:r})),n.a.createElement("div",{className:"p-org_help_email__primary_owner_info"},n.a.createElement(Tt["a"],{entityType:"member",dimension:32,entityData:a,customClasses:"p-org_help_email__primary_owner__icon"}),n.a.createElement("div",{className:"p-org_help_email__primary_owner__text"},n.a.createElement("div",{className:"p-org_help_email__primary_owner__name"},a.name),n.a.createElement("div",{className:"p-org_help_email__primary_owner__domain"},a.profile.email))))}Rt.displayName="PrimaryOwnerRadio";Rt.defaultProps=Pt;var Mt=Rt;var xt=new _["b"]("enterprise_settings");var Dt={featureCustomizedDomainClaimingClient:g["b"].bool,orgContactEmail:g["b"].string.isRequired,onSave:g["b"].func.isRequired,primaryOwner:g["b"].object};var Ft={featureCustomizedDomainClaimingClient:false,primaryOwner:{}};var Lt="ORG_PRIMARY_OWNER";var Bt=function(e){b()(t,e);function t(e){d()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.orgContactEmail;r.state={radioSelection:a===Lt?"primaryOwner":"custom",contactEmail:a,emailIsValid:true};r.onSave=r.onSave.bind(r);r.onSelectionChange=r.onSelectionChange.bind(r);r.onEmailChange=r.onEmailChange.bind(r);r.validateEmailOnChange=Object(A["debounce"])(r.validateEmailOnChange,500);return r}v()(t,[{key:"onSave",value:function e(){if(!this.state.emailIsValid)return;"primaryOwner"===this.state.radioSelection?this.props.onSave(Lt):this.props.onSave(this.state.contactEmail)}},{key:"onSelectionChange",value:function e(t){"primaryOwner"===t?this.setState(function(){return{radioSelection:t,emailIsValid:true}}):this.setState(function(e){var r=e.contactEmail;var a=r===Lt||Object(kt["a"])(r);return{radioSelection:t,emailIsValid:a}})}},{key:"onEmailChange",value:function e(t){this.setState(function(){return{contactEmail:t}});this.validateEmailOnChange(t)}},{key:"validateEmailOnChange",value:function e(t){this.setState(function(){return{emailIsValid:Object(kt["a"])(t)}})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.featureCustomizedDomainClaimingClient,i=r.primaryOwner;var s=this.state,o=s.radioSelection,l=s.contactEmail;if(!a)return null;return n.a.createElement(De["a"],{cancelText:"Cancel",goButtonText:"Save",onGo:this.onSave,title:xt.t("Organization Help Email"),titleAria:xt.t("Organization Help Email"),useSlackScrollbar:false},n.a.createElement("div",{className:"p-org_help_email_dialog__description"},xt.t("Choose where support related requests that require contacting an admin get sent to.")),n.a.createElement(Mt,{selected:"primaryOwner"===o,onSelect:function e(){return t.onSelectionChange("primaryOwner")},primaryOwner:i,featureCustomizedDomainClaimingClient:true}),n.a.createElement(It,{selected:"custom"===o,orgContactEmail:l,onSelect:function e(){return t.onSelectionChange("custom")},onEmailChange:this.onEmailChange,emailIsValid:this.state.emailIsValid,featureCustomizedDomainClaimingClient:true}))}}]);return t}(n.a.Component);Bt.displayName="OrgHelpEmailDialog";Bt.defaultProps=Ft;var Ut=Bt;var qt=r(157);var Gt=new _["b"]("enterprise_settings");var Ht={featureCustomizedDomainClaimingClient:g["b"].bool.isRequired,emailStatus:g["b"].oneOf(["error","success"]).isRequired};var Wt=function e(t){var r=t.featureCustomizedDomainClaimingClient,a=t.emailStatus;if(!r)return null;var i="check-circle-o";var s="sk_seafoam_green";var o=Gt.t("Organization contact email updated");if("error"===a){i="warning";s="sk_warning_red";o=Gt.t("Something\u2019s gone wrong. Mind trying again in a moment?")}return n.a.createElement(qt["b"],{position:"bottom-right",icon:i,iconClassName:s,shouldAutoFade:true},o)};Wt.displayName="OrgHelpEmailToast";var Vt=Wt;var Kt=r(2263);var zt=new _["b"]("enterprise_settings");var Qt={featureCustomizedDomainClaimingClient:g["b"].bool,openModal:g["b"].func.isRequired,enqueueToast:g["b"].func.isRequired,primaryOwner:g["b"].object};var Yt={featureCustomizedDomainClaimingClient:false,primaryOwner:{}};var Jt="ORG_PRIMARY_OWNER";function Xt(e,t){if(!e)return"";if("ORG_PRIMARY_OWNER"===t)return zt.t("Send emails to the Org Primary Owner");return zt.t("Send emails to {email}",{email:t})}function Zt(e,t){if(!e)return"";if(t===Jt)return zt.t("Support related requests that require cnotacting an admin will be sent to Primary Owner");return zt.t("Support related requests that require contacting an admin will be send to this address.")}function $t(e){var t=e.featureCustomizedDomainClaimingClient;if(!t)return null;var r=Jt;var a=function t(){e.enqueueToast({element:n.a.createElement(Vt,{emailStatus:"success",featureCustomizedDomainClaimingClient:true})})};var i=function t(){e.openModal({element:n.a.createElement(Ut,{orgContactEmail:r,onSave:a,primaryOwner:e.primaryOwner,featureCustomizedDomainClaimingClient:true})})};var s={type:"button",enabled:true,onEdit:i,editOnly:true};return n.a.createElement(lt["a"],{label:zt.t("Organization help email"),state:Xt(t,r),description:Zt(t,r),onClick:i,control:s,type:""})}$t.displayName="OrgHelpEmailPane";$t.defaultProps=Yt;var er=function e(t,r){var a=r.primaryOwnerId;var n=a?Object(Ot["d"])(t,a):{};return{featureCustomizedDomainClaimingClient:Object(D["isFeatureEnabled"])(t,"feature_customized_domain_claiming_client"),primaryOwner:n}};var tr={openModal:x["openModal"],enqueueToast:yt["enqueueToast"]};var rr=Object(o["connect"])(er,tr)($t);var ar=r(3092);var nr=new _["b"]("enterprise_settings");var ir={loading:g["b"].bool,saving:g["b"].bool,customTos:g["b"].bool,membersTos:g["b"].string,guestsTos:g["b"].string,membersContentType:g["b"].string,guestsContentType:g["b"].string,primaryOwnerId:g["b"].string};var sr={loading:true,saving:false,customTos:false,membersTos:"",guestsTos:"",membersContentType:"text",guestsContentType:"text",primaryOwnerId:""};var or=function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane__loading","data-org-wide-settings-pane-loading":true})};or.displayName="renderLoadingContainer";var lr=function(e){b()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"maybeRenderCustomTOS",value:function e(){if(this.props.loading)return null;var t=this.props,r=t.saving,a=t.customTos,i=t.membersTos,s=t.guestsTos,o=t.membersContentType,l=t.guestsContentType;var c={saving:r,customTos:a,membersTos:i,guestsTos:s,membersContentType:o,guestsContentType:l};return n.a.createElement(_t,c)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane"},n.a.createElement(C,{title:nr.t("Organization Settings")}),or(),this.maybeRenderCustomTOS(),n.a.createElement(rr,{primaryOwnerId:this.props.primaryOwnerId}),n.a.createElement(y["a"],null))}}]);return t}(a["PureComponent"]);lr.displayName="OrgWideSettingsPane";lr.defaultProps=sr;var cr=lr;var ur=lr;var dr=ur;Object(c["a"])("interop.orgWideSettingsPane",{render:function e(t,r,a){if(!t)throw new Error("orgWideSettingsPane render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(dr,a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,r){},,,function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(4);var s=r(326);var o=r(188);var l=r(6);var c=r.n(l);var u=r(7);var d=r.n(u);var p=r(8);var v=r.n(p);var m=r(9);var h=r.n(m);var f=r(16);var b=r.n(f);var g=r(13);var _=r(2);var y=r(10);var O=r(38);var k=r(45);var E=r(1453);var j=r(1103);var C=r(3312);var S=r(21);var w=r(3754);var I=r(3992);var T;(function(e){e["Pending"]="pending";e["InProgress"]="in_progress";e["Completed"]="completed"})(T||(T={}));var A;(function(e){e["SendMessage"]="send_message";e["EnableNotifications"]="enable_notifications";e["JoinChannel"]="join_channel";e["SeeWelcomePlace"]="see_welcome_place"})(A||(A={}));var N;(function(e){e[e["unknown"]=0]="unknown";e[e["direct"]=1]="direct";e[e["sidebar"]=2]="sidebar";e[e["history"]=3]="history"})(N||(N={}));var P=r(2228);var R=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.title,a=t.subtitle;return n.a.createElement("div",{className:"welcome-row margin_left_125 margin_right_125 margin_top_150 margin_bottom_200"},r?n.a.createElement("div",{className:a?"margin_bottom_50":"margin_bottom_75"},n.a.createElement("h3",null,r)):null,a?n.a.createElement("div",{className:"margin_bottom_75"},n.a.createElement("p",null,a)):null,n.a.createElement("div",null,this.props.children))}}]);return t}(a["Component"]);R.displayName="WelcomeRow";var M=R;var x=r(28);var D=r(11);var F=r(550);var L=r(35);var B=r(19);var U=r(930);var q=r(108);var G=r(239);var H=r(901);var W=new y["b"]("welcome_place");var V=function(e){var t=e.featureJiraNewxp2372,r=e.subtype;if(r===A.JoinChannel)return n.a.createElement("svg",{id:"join_channel","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35.74 23.77",role:"img"},n.a.createElement("title",null,t?W.t("An illustration of a pair of eyes",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"}):null),n.a.createElement("ellipse",{cx:"9.51",cy:"11.89",rx:"8.38",ry:"10.76",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M13.82,18.71c-1.74,0-3.15-1.81-3.15-4a5,5,0,0,1,.52-2.22,4.27,4.27,0,0,0-.81-.09c-2.73,0-5,2.85-5,6.35s2.22,6.35,5,6.35,4.95-2.84,4.95-6.35v-.49A2.68,2.68,0,0,1,13.82,18.71Z",transform:"translate(-0.13 -6.82)",style:{fill:"#007a5a"}}),n.a.createElement("ellipse",{cx:"26.25",cy:"11.89",rx:"8.37",ry:"10.76",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M30.57,18.71c-1.74,0-3.15-1.81-3.15-4a5,5,0,0,1,.52-2.22,4.27,4.27,0,0,0-.81-.09c-2.73,0-5,2.85-5,6.35s2.22,6.35,5,6.35,5-2.84,5-6.35v-.49A2.68,2.68,0,0,1,30.57,18.71Z",transform:"translate(-0.13 -6.82)",style:{fill:"#007a5a"}}));if(r===A.SendMessage)return n.a.createElement("svg",{id:"send_message","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35.73 35.41",role:"img"},n.a.createElement("title",null,t?W.t("An illustration of a waving hand",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"}):null),n.a.createElement("path",{d:"M17.8,24.26,10,16.44a2,2,0,0,1-.08-2.83l.08-.08h0a2.06,2.06,0,0,1,2.91,0l5.39,5.39",transform:"translate(-0.14 -0.2)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M20.71,21.34l-9.55-9.55a2.06,2.06,0,0,1,0-2.91h0a2.06,2.06,0,0,1,2.91,0l9.56,9.56",transform:"translate(-0.14 -0.2)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M17.8,24.26,13,19.48a2.06,2.06,0,0,0-2.91,2.92h0L19.66,32a8.24,8.24,0,0,0,14-7.25s-1-7.22.63-10.08-1.48-4.73-3.18-3-2.56,5.88-2.56,5.88l-10-10a2.06,2.06,0,1,0-2.91,2.92L21,15.77",transform:"translate(-0.14 -0.2)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M9.24,27.81a4.21,4.21,0,0,1-2.33-1.35,4.28,4.28,0,0,1-1.36-2.33",transform:"translate(-0.14 -0.2)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M7.18,32.25A8.12,8.12,0,0,1,3.53,30a8.12,8.12,0,0,1-2.26-3.65",transform:"translate(-0.14 -0.2)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M26.72,9.32A4.21,4.21,0,0,0,25.37,7,4.28,4.28,0,0,0,23,5.63",transform:"translate(-0.14 -0.2)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("path",{d:"M30.89,7.23a8,8,0,0,0-2.25-3.66A8.13,8.13,0,0,0,25,1.32",transform:"translate(-0.14 -0.2)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}));if(r===A.EnableNotifications)return n.a.createElement("svg",{id:"enable_notifications","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25.22 35.61",role:"img"},n.a.createElement("title",null,t?W.t("An illustration of a ringing bell",{note:"Alt text for accessibility of a small illustration in a task card of the Welcome Place project"}):null),n.a.createElement("path",{d:"M29,28.19l-2.17-2.36c.51-7.65-3-10.61-4.4-11.5V14a4.5,4.5,0,0,0-9,0h0v.33C12,15.22,8.51,18.18,9,25.83L6.93,28.19a1.71,1.71,0,0,0,1.26,2.86H14a3.94,3.94,0,0,0,7.86,0h5.83A1.7,1.7,0,0,0,29,28.19Z",transform:"translate(-5.36 -0.23)",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"3.74",y1:"25.6",x2:"21.43",y2:"25.6",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"8.66",y1:"30.82",x2:"16.52",y2:"30.82",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"12.59",y1:"5.12",x2:"12.59",y2:"1.13",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"5.24",y1:"7.01",x2:"2.42",y2:"4.2",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}),n.a.createElement("line",{x1:"19.98",y1:"6.97",x2:"22.8",y2:"4.16",style:{fill:"none",stroke:"#007a5a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.25px"}}));return null};var K=r(4525);var z=r(3);var Q=r.n(z);var Y=n.a.createContext({});function J(){return function(e){var t=function(t){h()(r,t);function r(){c()(this,r);var t=v()(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments));t.renderWithConsumer=function(r){var a=r.addElementToVisibilityLogging,i=r.removeElementFromVisibilityLogging;return n.a.createElement(e,Q()({addElementToVisibilityLogging:a,removeElementFromVisibilityLogging:i},t.props))};return t}d()(r,[{key:"render",value:function e(){return n.a.createElement(Y.Consumer,null,this.renderWithConsumer)}}]);return r}(a["Component"]);t.displayName="WithVisibilityLogger";t.displayName="WithVisibilityLogger("+(e.displayName||"Component")+")";return t}}var X=new y["b"]("welcome_place");var Z=new y["b"]("prefs");var $=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=function(){var e=r.props,t=e.featureSonicChannelBrowser,a=e.userHasAvailableChannels,n=e.workflowTask,i=n.state,s=n.subtype,o=n.user_task_id;if(i===T.Completed)return;if(s===A.SendMessage){r.props.updateActionStateAndReload({userTaskId:o,state:T.InProgress});r.props.startSendMessageWorkflowItem()}else if(s===A.EnableNotifications){r.props.updateActionStateAndReload({userTaskId:o,state:T.InProgress});r.props.promptForPermissionAndSetPref().then(function(){r.props.updateActionStateAndReload({userTaskId:o,state:T.Completed})})}else if(s===A.JoinChannel){a?r.props.updateActionStateAndReload({userTaskId:o,state:T.InProgress}):r.props.updateActionStateAndReload({userTaskId:o,state:T.Completed});Object(O["a"])()&&t?r.props.openChannelBrowser():Object(U["b"])()}r.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"]["WELCOME_PLACE_ACTION_"+s.toUpperCase()],ui_element_type:S["k"].BUTTON},welcome_place:{welcome_session_id:r.props.pageViewingSessionId}}})};r.getCopy=function(e){var t=r.props,a=t.featureJiraNewxp2372,i=t.currentTeam.name,s=t.generalChannelName,o=t.userHasAvailableChannels,l=t.workflowTask,c=l.subtype,u=l.state;var d=u===T.Completed;var p=d?T.Completed:T.Pending;var v=X.rt("Completed",{note:"Button label for completed state of all tasks."});var m={send_message:{pending:{body:a?X.rt("<b>Post a quick hello</b> in the #{generalChannelName} channel to let your team know you\u2019re here.",{generalChannelName:s,note:"Incomplete state copy for second action step. Most important info should be bolded."}):X.rt("<b>Post a quick hello</b> in the #general channel to let your team know you\u2019re here.",{note:"Incomplete state copy for second action step. Most important info should be bolded."}),button:X.rt("Send a Message",{note:"Button label for incomplete state of second step."}),tip:null},completed:{body:a?X.rt("<b>Sent a message</b>",{note:"Completed state copy, bolded, no punctuation"}):null,button:v,tip:X.rt("Tip: The channel name will appear <b>bolded</b> in the sidebar if there are any new messages.",{note:"Completed state body copy conveying a tip about how unread activity is shown in the UI. Use bolding on the word that indicates \u201cbold\u201d."})}},enable_notifications:{pending:{body:X.rt("<b>Get notified</b> when a teammate sends you a message or mentions your name.",{note:"Incomplete state copy for third action step. Most important info should be bolded."}),button:a?X.rt("Turn On Notifications",{note:"Button label for incomplete state of third step. This should not convey customization, just enablement."}):X.rt("Turn on Notifications",{note:"Button label for incomplete state of third step. This should not convey customization, just enablement."}),tip:null},completed:{body:n.a.createElement("b",null,X.rt("Turned on notifications",{note:"Completed state copy, bolded, no punctuation"})),button:v,tip:null}},join_channel:{pending:{body:X.rt("<b>See what people are talking about</b> in your team\u2019s channels.",{note:"Incomplete state copy for fourth action step. Most important info should be bolded."}),button:X.rt("Join Channels",{note:"Button label for incomplete state of fourth step."}),tip:null},completed:{body:n.a.createElement("b",null,X.rt("Joined a channel",{note:"Completed state copy, bolded, no punctuation"})),button:v,tip:X.rt("Tip: To find more channels later \u2014 or create new ones \u2014 click on <b>Channels</b> in the sidebar. ",{note:"Completed state body copy conveying a tip about how to return to the channel browser in the future; use bolding on the word \u201cChannels\u201d."})}},see_welcome_place:{pending:{body:X.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:i,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:v,tip:null},completed:{body:X.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:i,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:v,tip:null}}};if(c===A.JoinChannel&&"button"===e&&!d&&!o)return X.t("Browse Channels",{ns:"channel_browser",fallbackHash:"f3783ed57f3ec287bdc59897500c8d674a2f1ec8"});return m[c][p][e]};r.containerRef=n.a.createRef();return r}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props.workflowTask,r=t.user_task_id,a=t.state,n=t.subtype;n===A.SeeWelcomePlace&&a!==T.Completed&&this.props.updateActionStateAndReload({userTaskId:r,state:T.Completed});n===A.EnableNotifications&&a!==T.Completed&&Object(G["f"])()&&this.props.updateActionStateAndReload({userTaskId:r,state:T.Completed});this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:S["z"]["WELCOME_PLACE_ACTION_"+n.toUpperCase()],ui_element_value:a}})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.props,r=t.isFlexpaneOpen,a=t.canPostInGeneralChannel,i=t.featureJiraNewxp2372,s=t.workflowTask,o=s.subtype,l=s.state;var c=Object(G["n"])();if(o===A.EnableNotifications&&"na"===c||o===A.SendMessage&&!a)return null;if(o===A.EnableNotifications&&"denied"===c)return n.a.createElement("div",{className:"c-workflow-item-card disabled"},n.a.createElement("div",{className:"c-workflow-item-card__section"},n.a.createElement("p",null,i?X.rt("<b>You've disallowed notifications in your browser.</b> You'll need to open your browser preferences to change that.",{fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"pref"}):Z.t("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that."))));var u=this.getCopy("tip");var d="completed"===l;var p=b()("c-workflow-item-card",{complete:d,flexpaneOpen:r});return n.a.createElement("div",{className:p,ref:this.containerRef},n.a.createElement("div",{className:"c-workflow-item-card__section"},d?null:n.a.createElement(V,{subtype:o,featureJiraNewxp2372:i}),n.a.createElement("div",null,n.a.createElement("p",null,this.getCopy("body")),u&&n.a.createElement("p",null,u))),n.a.createElement("div",{className:"c-workflow-item-card__section"},n.a.createElement(x["d"],{disabled:d,type:"outline",size:"medium",onClick:this.onClick},this.getCopy("button"))))}}]);return t}(a["Component"]);$.displayName="WorkflowItemCard";function ee(e){return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),featureSonicChannelBrowser:Object(i["isFeatureEnabled"])(e,"feature_sonic_channel_browser"),isFlexpaneOpen:Object(q["i"])(e),canPostInGeneralChannel:!Object(D["isReadOnly"])(e,Object(B["i"])(e)),clogger:Object(k["a"])({state:e}),pageViewingSessionId:Object(E["e"])(e),currentTeam:Object(L["d"])(e)||{name:""},userHasAvailableChannels:Object(B["p"])(e).length>Object(B["q"])(e).length,generalChannelName:(Object(B["i"])(e)||{}).name||"general"}}var te={updateActionStateAndReload:j["f"],promptForPermissionAndSetPref:H["c"],openChannelBrowser:F["a"],startSendMessageWorkflowItem:j["e"]};var re=Object(g["connect"])(ee,te)(J()($));var ae=r(4531);var ne=new y["b"]("welcome_place");var ie=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props.workflowItems;return n.a.createElement(M,{title:ne.t("What to do next",{note:"Title for a module with tasks / action steps."}),subtitle:ne.t("It\u2019s helpful to do these things first, so you can get connected and on the same page with your team.",{note:"Subtitle for \u201cWhat to do next\u201d module. Should convey confidence and authority without being pushy."})},n.a.createElement("div",{className:"c-workflow-item-container"},t.map(function(e){return n.a.createElement(re,{key:"workflow_item_card_"+e.subtype,workflowTask:e})})))}}]);return t}(a["Component"]);ie.displayName="WorkflowItemContainer";var se=ie;var oe=r(2230);var le=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.className,a=t.hasNoPadding;var i=b()("welcome-card bordered extra-rounded sk_white_bg overflow_hidden",r,{padding_125:!a});return n.a.createElement("div",{className:i},this.props.children)}}]);return t}(a["Component"]);le.displayName="WelcomeCard";var ce=le;var ue=r(4594);var de=new y["b"]("welcome_place");var pe=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.showPlayer=function(){var e=r.state.showPlayer;var t=r.props,a=t.clogger,n=t.pageViewingSessionId;r.setState(function(){return{showPlayer:!e}});a.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"].WELCOME_PLACE_VIDEO,ui_properties:{element_value:"start",element_type:S["k"].VIDEO,element_name:"Team Chat & Channels | Slack Features"}},welcome_place:{welcome_session_id:n}}})};r.containerRef=n.a.createRef();r.state={showPlayer:false};return r}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:S["z"].WELCOME_PLACE_VIDEO}})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.state.showPlayer;var r=this.props,a=r.youtubeEmbedUrl,i=r.className,s=r.featureJiraNewxp2372;var o=b()("video-player__title-card video-player__content",{"player-is-active":t});var l=b()("video-player__iframe__container video-player__content",{"player-is-active":t});var c=a+"&modestbranding=1&rel=0";return s?n.a.createElement(ce,{className:i,hasNoPadding:true},n.a.createElement("link",{rel:"preload",href:c+"&autoplay=1",as:"document"}),n.a.createElement("div",{className:"video-player",ref:this.containerRef},n.a.createElement("div",{className:"video-player__container"},n.a.createElement("div",{className:o},n.a.createElement("h1",{className:"sk_white margin_bottom_50"},de.rt("Welcome to Slack!")),n.a.createElement("p",{className:"sk_white margin_bottom_75"},de.t("Slack helps your team communicate, connect, and do your best work together.")),n.a.createElement(x["d"],{onClick:this.showPlayer},de.t("Watch Video",{note:"Button copy for call-to-action on video module.",fallbackHash:"5ccd18c8a398d9f789a385b18ecb4678bd622f21"}))),n.a.createElement("div",{className:l},n.a.createElement("iframe",{className:"full_height",style:{height:"100%",width:"100%"},src:c+(t?"&autoplay=1":""),frameBorder:"0",allowFullScreen:true,title:de.t("Team Chat & Channels | Slack Features",{note:"A video by Slack, on Youtube, that explains Slack features."})}))))):null}}]);return t}(a["Component"]);pe.displayName="VideoCard";function ve(e){var t=Object(k["a"])({state:e});return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),clogger:t,pageViewingSessionId:Object(E["e"])(e)}}var me={};var he=Object(g["connect"])(ve,me)(J()(pe));var fe=r(51);var be=r(22);var ge=r(100);var _e=r(24);var ye=r(98);var Oe=r(31);var ke=r(1566);var Ee=r(50);var je=r(216);var Ce=r(1316);var Se=new y["b"]("welcome_place");var we=function(e){h()(t,e);function t(){c()(this,t);var e=v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.startIm=function(){var t=e.props,r=t.member,a=t.clogger,n=t.idx,i=t.pageViewingSessionId;e.props.startImByMemberId({memberId:r.id});a.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"].WELCOME_PLACE_PROFILE_CARD,ui_properties:{element_value:r.id,element_index:n,element_type:S["k"].BUTTON}},welcome_place:{welcome_session_id:i}}})};return e}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.member,i=t.type,s=t.channels,o=t.teamDomain,l=t.featureJiraNewxp2372;if(!l)return null;var c=r.profile;var u=i?n.a.createElement("p",{className:"member-card__content"},Se.t("Invited you to Slack",{fallbackHash:"9064cf8eb6c496f261172fb4d28eb5e38c796b7e"})):null;var d=1===s.length?Se.t("A channel they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}):Se.t("A few channels they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"});var p=s.map(function(e,t){var r=Object(D["constructAbsoluteChannelPermalink"])({channelId:e,teamDomain:o});return n.a.createElement(a["Fragment"],{key:"fragment-"+e},n.a.createElement(fe["a"],{key:"link-"+e,href:r,className:"no_wrap"},n.a.createElement(ke["a"],{key:"entity-"+e,channelId:e})),t+1===s.length?".":", ")});return n.a.createElement(ce,{className:"member-card-container flex_one",hasNoPadding:true},n.a.createElement("div",{className:"member-card"},n.a.createElement(Ee["c"],{tip:Se.rt("Message {name}",{name:c.real_name}),position:"top"},n.a.createElement(fe["a"],{onClick:this.startIm,className:"member-card__top-link"},n.a.createElement("div",{className:"member-card__top"},n.a.createElement(je["a"],{size:56,isInteractive:false,imageUrl:c.image_72,imageUrl2x:c.image_192,className:"member-card__avatar"}),n.a.createElement("div",{className:"flex_one"},n.a.createElement(Ce["a"],{member:r,className:"member-card__name"}),u)))),n.a.createElement("div",{className:"member-card__bottom"},n.a.createElement("p",{className:"member-card__content"},d,p))))}}]);return t}(a["Component"]);we.displayName="MemberCard";function Ie(e,t){var r=t.id;var a=Object(_e["d"])(e,r);var n=Object(Oe["getTeamDomain"])(Object(L["j"])(e,a.team_id));var s=Object(k["a"])({state:e});return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),teamDomain:n,member:a,clogger:s,pageViewingSessionId:Object(E["e"])(e)}}var Te={startImByMemberId:ye["startImByMemberId"]};var Ae=Object(g["connect"])(Ie,Te)(we);var Ne=r(4452);var Pe=new y["b"]("welcome_place");var Re=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.showMoreUsers=function(){var e=r.props,t=e.clogger,a=e.pageViewingSessionId;r.setState(function(){return{showMore:true}});t.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"].WELCOME_PLACE_MEMBERS_SHOW_ALL,ui_properties:{element_type:S["k"].LINK}},welcome_place:{welcome_session_id:a}}})};r.showMemberDirectory=function(){var e=r.props,t=e.clogger,a=e.pageViewingSessionId;t.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"].WELCOME_PLACE_MEMBERS_SHOW_MEMBER_DIRECTORY,ui_properties:{element_type:S["k"].LINK}},welcome_place:{welcome_session_id:a}}});r.props.showMemberDirectory()};r.containerRef=n.a.createRef();r.state={showMore:false,initialUsersCards:[],additionalUserCards:[],suggestOrgChart:false};return r}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:S["z"].WELCOME_PLACE_MEMBERS_BLOCK},visibilityRatio:.33})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this;var r=this.props,i=r.className,s=r.featureJiraNewxp2372;var o=this.state,l=o.initialUsersCards,c=o.additionalUserCards,u=o.suggestOrgChart,d=o.showMore;var p=function e(){var r=d&&u?Pe.t("View directory"):Pe.t("Show more");if(c.length){var a=t.showMoreUsers;if(d&&!u)return null;d&&u&&(a=t.showMemberDirectory);return n.a.createElement("div",{className:"align_center margin_top_100 member-card__show-more-link"},n.a.createElement(fe["a"],{onClick:a},r),n.a.createElement(be["b"],{type:"chevron-down"}))}return null};return s?n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:b()("member-card-grid",i),ref:this.containerRef},l.map(function(e,t){return n.a.createElement(Ae,{id:e.id,idx:t,key:e.id,type:e.type,channels:e.channels})}),d&&c.map(function(e,t){return n.a.createElement(Ae,{id:e.id,idx:t+l.length,key:e.id,channels:e.channels})})),p()):null}}],[{key:"getDerivedStateFromProps",value:function e(t){var r=Object(_["chunk"])(t.userCards,6);var a=r.shift()||[];var n=[];r.length&&(n=Object(_["chunk"])(Object(_["flatten"])(r),12));var i=n.shift()||[];var s=!!n.length;return{initialUsersCards:a,additionalUserCards:i,suggestOrgChart:s}}}]);return t}(a["Component"]);Re.displayName="MemberRow";function Me(e){var t=Object(k["a"])({state:e});return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),clogger:t,pageViewingSessionId:Object(E["e"])(e)}}function xe(e){return{showMemberDirectory:function t(){e(Object(ge["i"])())}}}var De=Object(g["connect"])(Me,xe)(J()(Re));var Fe=r(2227);var Le=r(57);var Be=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clogLinkClick=function(e){var t=e.url,a=e.index,n=e.query,i=e.articleId;r.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"].WELCOME_PLACE_HELP_LINK,ui_properties:{element_type:S["k"].LINK,element_value:i.toString(),element_index:a},article_url:t,search_terms:n,locale:Object(Le["a"])()},welcome_place:{welcome_session_id:r.props.pageViewingSessionId}}})};r.containerRef=n.a.createRef();return r}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:S["z"].WELCOME_PLACE_HELP_BLOCK},visibilityRatio:.5})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.props.defaultArticlesData;return n.a.createElement("div",{ref:this.containerRef,className:"welcome-place__search_container"},n.a.createElement(Fe["a"],{defaultArticlesData:t,onOpenLink:this.clogLinkClick}))}}]);return t}(a["Component"]);Be.displayName="HelpSearchCard";function Ue(e){return{clogger:Object(k["a"])({state:e}),pageViewingSessionId:Object(E["e"])(e)}}var qe=Object(g["connect"])(Ue)(J()(Be));var Ge=r(2232);var He=.8;var We=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.elementsForLogging=[];r.addElementForLogging=function(e){r.elementsForLogging.push(e);requestAnimationFrame(function(){r.props.scrollContainerEl&&r.checkElementsForClogging(r.props.scrollContainerEl)})};r.removeElementFromLogging=function(e){if(!e)return;var t=Object(_["findIndex"])(r.elementsForLogging,function(t){return t.element===e});-1!==t&&r.elementsForLogging.splice(t,1)};r.onScrollListenerDebounced=Object(_["debounce"])(function(e){r.checkElementsForClogging(e.target)},1e3);return r}d()(t,[{key:"componentDidMount",value:function e(){this.setupEventListeners()}},{key:"componentDidUpdate",value:function e(t){var r=this;if(t.scrollContainerEl!==this.props.scrollContainerEl){t.scrollContainerEl&&t.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced);this.setupEventListeners();requestAnimationFrame(function(){r.props.scrollContainerEl&&r.checkElementsForClogging(r.props.scrollContainerEl)})}}},{key:"componentWillUnmount",value:function e(){this.props.scrollContainerEl&&this.props.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced)}},{key:"checkElementsForClogging",value:function e(t){var r=this;var a=t.getClientRects()[0];if(!a)return;this.elementsForLogging.slice().forEach(function(e){var t=e.element,n=e.uiContext,i=e.visibilityRatio;if(!t)return;var s=t.getClientRects()[0];if(!s)return;var o=i||He;var l=s.top<a.top&&s.bottom>a.bottom;var c=s.top>a.top&&s.bottom<a.bottom;var u=0;l||c?u=1:s.top<a.top&&s.bottom>a.top&&s.bottom<a.bottom?u=(s.bottom-a.top)/(s.bottom-s.top):s.bottom>a.bottom&&s.top>a.top&&s.top<a.bottom&&(u=(a.bottom-s.top)/(s.bottom-s.top));if(u>=o){r.removeElementFromLogging(t);r.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:Q()({},n,{action:S["w"].IMPRESSION}),welcome_place:{welcome_session_id:r.props.pageViewingSessionId}}})}})}},{key:"setupEventListeners",value:function e(){if(!this.props.scrollContainerEl)return;this.props.scrollContainerEl.addEventListener("scroll",this.onScrollListenerDebounced)}},{key:"render",value:function e(){return n.a.createElement(Y.Provider,{value:{scrollContainerEl:this.props.scrollContainerEl,addElementToVisibilityLogging:this.addElementForLogging,removeElementFromVisibilityLogging:this.removeElementFromLogging}},this.props.children)}}]);return t}(a["Component"]);We.displayName="VisibilityLoggerProviderBase";var Ve=Object(g["connect"])(function(e){return{clogger:Object(k["a"])({state:e}),pageViewingSessionId:Object(E["e"])(e)}})(We);var Ke=new y["b"]("welcome_place");var ze=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.containerRef=n.a.createRef();return r}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.isOnboarding,a=t.completeOnboarding,n=t.pageEntryPoint,i=t.pageViewingSessionId;r&&a();this.props.maybeRefreshWelcomePlaceData();this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].IMPRESSION,ui_element:S["z"].WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:i,entry_point:N[n||"direct"]}}});this.props.setPageEntryPoint("direct")}},{key:"componentWillUnmount",value:function e(){var t=this.props.pageViewingSessionId;this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].EXIT_VIEW,ui_element:S["z"].WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:t}}});this.props.regeneratePageViewingSessionId()}},{key:"render",value:function e(){var t=this.props.items;return n.a.createElement(Ve,{scrollContainerEl:this.containerRef.current},n.a.createElement("div",{ref:this.containerRef,className:b()("overflow_x_scroll flex_one sk_off_white_bg",{"welcome-place-page-container--typography":!Object(O["a"])(),"welcome-place-page-container--border-inset":!Object(O["a"])(),"welcome-place-page-container--height-fix":Object(O["a"])(),full_height:!Object(O["a"])()}),"data-qa":"welcome-place-page-container"},t.map(function(e,t){switch(e.type){case"video":return n.a.createElement(M,{key:""+e.type+t},n.a.createElement(he,{youtubeEmbedUrl:e.content.video.url}));case"workflow":return n.a.createElement(se,{key:""+e.type+t,workflowItems:e.content.workflow.tasks});case"user_cards":return n.a.createElement(M,{key:""+e.type+t,title:Ke.t("See who else is here"),subtitle:Ke.t("You can message people directly, or check out the channels they\u2019re in.",{note:"Subtitle for the teammates module that shares the two main ways to connect."})},n.a.createElement(De,{userCards:e.content.user_cards}));case"help_center_search":return n.a.createElement(M,{key:""+e.type+t,title:Ke.t("Have a question?")},n.a.createElement(qe,{defaultArticlesData:Object(_["get"])(e,"content.help_center_search.articles",null)}));default:return null}})))}}]);return t}(a["Component"]);ze.displayName="WelcomePlace";function Qe(e){return{items:Object(E["c"])(e),isOnboarding:!!Object(w["f"])(e),clogger:Object(k["a"])({state:e}),pageEntryPoint:Object(E["d"])(e),pageViewingSessionId:Object(E["e"])(e)}}function Ye(e){return{completeOnboarding:function t(){e(Object(I["a"])())},maybeRefreshWelcomePlaceData:function t(){e(Object(j["d"])())},setPageEntryPoint:function t(){e(C["e"].apply(void 0,arguments))},regeneratePageViewingSessionId:function t(){e(Object(C["c"])())}}}var Je=Object(g["connect"])(Qe,Ye)(ze);var Xe=r(1757);var Ze=r(0);var $e=r(103);var et=r(67);var tt=r(14);var rt=Object(tt["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount});var at=Object(tt["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.refreshId});var nt=Object(tt["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.focusRequestedThreadKey});var it=r(1547);var st=r(902);var ot=r(195);var lt=r(1687);var ct=r(1561);var ut=r(1859);var dt=r(1646);var pt=r(4194);var vt=r(4178);var mt=r(384);var ht=r(1815);var ft=r(2280);var bt=r(1554);var gt=r(12);var _t=r(39);var yt=r(1164);var Ot=r(34);var kt=r(23);var Et=r(124);var jt=r(178);var Ct=r(168);var St=r(1068);var wt=r(30);var It=r(187);var Tt=r(186);var At=r(4180);var Nt=r(268);var Pt=r(217);function Rt(e){var t=void 0;var r=void 0;var a=void 0;if(Object(i["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){t=Object(o["getCountsPerChannel"])(e);r=Object(_["keys"])(t);a=Object(o["hasCountsPerChannelChanged"])(e)}else{r=Object(Nt["g"])();r=r.filter(function(t){return!Object(Pt["isChannelMutedById"])(e,t)});a=Object(Nt["h"])();t={};r.forEach(function(r){var a=Object(B["d"])(e,r);t[a.id]={unreadCnt:Object(D["getUnreadCount"])(a),unreadHighlightCnt:Object(D["getUnreadHighlightCount"])(a)}})}return{countsPerChannel:t,unreadChannelIds:r,unreadChannelsAreKnown:a}}var Mt=Rt;var xt=new y["b"]("all_unreads");var Dt={featureReactAllUnreads:Ze["b"].bool.isRequired,visible:Ze["b"].bool.isRequired,showUndo:Ze["b"].bool.isRequired,teamId:Ze["b"].string.isRequired,preferredSkinTone:Ze["b"].string.isRequired,emojiMode:Ze["b"].string.isRequired,undoMarkAllRead:Ze["b"].func.isRequired,totalUnreads:Ze["b"].number.isRequired,refreshAllUnreads:Ze["b"].func.isRequired,userAttentionIsOnChat:Ze["b"].bool.isRequired};var Ft=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUndo=r.onUndo.bind(r);r.onRefresh=r.onRefresh.bind(r);r.onEnter=r.onEnter.bind(r);r.generateMessage();r.state={allowRefreshButton:e.visible};r.containerRef=n.a.createRef();return r}d()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new Tt["a"];this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}},{key:"componentDidUpdate",value:function e(t){var r=this;t.visible&&!this.props.visible?this.generateMessage():!t.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(function(){r.setState(function(){return{allowRefreshButton:true}})},1e3))}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.buttonDelayTimer);this.keyCommands&&this.keyCommands.reset()}},{key:"onEnter",value:function e(t){var r=this.props.visible;var a=Object(O["a"])()?this.props.userAttentionIsOnChat:Object(Ct["f"])();if(!r||!a)return;if(!this.shouldShowNewButton())return;var n=t.target;if(Object(St["a"])(n))return;var i="BODY"===n.nodeName;var s=this.containerRef.current&&this.containerRef.current.contains(n);(i||s)&&this.onRefresh()}},{key:"onRefresh",value:function e(){this.props.refreshAllUnreads();this.setState(function(){return{allowRefreshButton:false}})}},{key:"onUndo",value:function e(){this.props.undoMarkAllRead();this.setState(function(){return{allowRefreshButton:false}})}},{key:"generateMessage",value:function e(){var t=this.props,r=t.teamId,a=t.preferredSkinTone,n=t.emojiMode;this.message=Object(At["a"])({locale:Object(yt["a"])({teamId:r}),preferredSkinTone:a,emojiMode:n});var i=new Image;i.src=this.message.emojiUrl}},{key:"shouldShowNewButton",value:function e(){var t=this.state.allowRefreshButton;var r=this.props.totalUnreads;return t&&r>0}},{key:"render",value:function e(){var t=this.props,r=t.visible,a=t.featureReactAllUnreads,i=t.showUndo,s=t.totalUnreads;if(!a)return null;if(!r)return null;var o=this.shouldShowNewButton();var l=b()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":o});var c=function e(t){var r=t.tag,a=t.text;if("enter-icon"===r)return n.a.createElement(be["b"],{type:"enter",size:"inherit"});return n.a.createElement("b",null,a)};return n.a.createElement("div",{className:l,ref:this.containerRef},n.a.createElement("div",{className:"p-unreads_view__empty__message"},n.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),n.a.createElement("div",null,this.message.lineOne,n.a.createElement("br",null),this.message.lineTwo)),o&&n.a.createElement(n.a.Fragment,null,n.a.createElement(x["d"],{onClick:this.onRefresh},xt.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:s})),n.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(wt["isMac"])()?xt.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,c):xt.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,c))),i&&n.a.createElement("div",{className:"p-unreads_view__empty__undo"},n.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},xt.t("You marked all your channels read."),n.a.createElement(It["a"],{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},xt.t("Undo")))))}}]);return t}(a["Component"]);Ft.displayName="EmptyState";function Lt(e){var t=Mt(e),r=t.countsPerChannel;var a=Object(_["sum"])(Object(_["map"])(r,"unreadCnt"));return{featureReactAllUnreads:Object(i["isFeatureEnabled"])(e,"feature_react_all_unreads"),teamId:Object(kt["b"])(e),preferredSkinTone:Object(Ot["g"])(e,"preferred_skin_tone")||"1",emojiMode:Object(Et["h"])(e,{forceDisplay:true}),totalUnreads:a,userAttentionIsOnChat:Object(jt["e"])(e)}}var Bt=Object(g["connect"])(Lt)(Ft);var Ut=r(26);var qt=r.n(Ut);var Gt=r(2414);var Ht=r(423);var Wt=r(385);var Vt=r(1352);var Kt=r(409);var zt=r(377);var Qt=r(25);var Yt=r(333);var Jt=r(29);var Xt=Object(Qt["a"])("Expand a channel in All Unreads",function(e,t,r){var a=Object(Ot["f"])(t());if(!a.includes(r))return;var n=Object(_["without"])(a,r);e(Object(Yt["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(Jt["b"])({method:"unread.expand",args:{channel:r},reason:"all_unreads_expand"}))});Xt.propTypes=Ze["b"].string.isRequired;var Zt=Object(Qt["a"])("Collapse a channel in All Unreads",function(e,t,r){var a=Object(Ot["f"])(t());if(a.includes(r))return;var n=[].concat(qt()(a),[r]);e(Object(Yt["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(Jt["b"])({method:"unread.collapse",args:{channel:r},reason:"all_unreads_collapse"}))});Zt.propTypes=Ze["b"].string.isRequired;var $t=r(109);var er=r(1812);var tr=r(1067);var rr=r(1368);var ar=r(3930);var nr=r(1761);var ir=r(900);var sr=r(2279);var or=r(4358);var lr=r(41);var cr=r(3945);var ur=r(1146);var dr=r(1527);function pr(e,t){var r=[];var a=[];var n=[];var i=true;Object(_["forEach"])(e,function(e){var s=e.channelId,o=e.channelType,l=e.start,c=e.end,u=e.timestamps,d=e.sliceEnd,p=e.reachedEnd,v=e.messages,m=e.lastRead,h=e.initialLastRead,f=e.markedMsgCount,b=e.collapsed;var g=u.filter(function(e){var r=v[e];if(Object(lr["isHidden"])(r))return false;if(Object(lr["isJoinLeave"])(r)&&!Object(lr["isInviteForCurrentUser"])(r,t))return false;if(Object(lr["isTempMsg"])(r))return false;return true});var y=g.filter(function(e){return e>l&&e<=c});var O=g.filter(function(e){return e>c});var k=y.length&&!b;var E=!Object(ur["a"])(y[0]);var j=m>l&&Object(_["find"])(y,function(e){var r=v[e];return Object(lr["isMessageUnread"])(r,m,t)});r.push("header-"+s);n.push({key:"header-"+s,index:a.length});a.push({type:"header",channelId:s,channelType:o,end:c,initialLastRead:h,markedMsgCount:f,messageCount:y.length,messageCountAfterLatest:O.length,messageCountIsExact:p,collapsed:b});if(k&&!E){r.push("spacer-top-"+s);a.push({type:"spacer"})}if(k){var C=y.map(function(e){return v[e]});var S=Object(dr["a"])(C),w=S.rollups;y.forEach(function(e,t){var n=y[t-1];var i=e===j;var o=n&&Object(cr["a"])(n);var l=Object(cr["a"])(e);if(E&&o!==l){r.push("day-divider-"+s+"-"+l);a.push({type:"day-divider",dayTs:l,unread:i})}else if(i){r.push("unread-divider-"+s);a.push({type:"unread-divider"})}r.push("message-"+s+"-"+e);a.push({type:"message",channelId:s,ts:e,prevTs:n,isFirstMessage:0===t,rollup:w[e]})})}if(!p&&!b){var I=d||l;r.push("loading-"+s+"-"+I);a.push({type:"loading",channelId:s,oldest:I});i=false;return false}if(k)if(O.length){r.push("show-newer-"+s);a.push({type:"show-newer",channelId:s,count:O.length})}else{r.push("spacer-bottom-"+s);a.push({type:"spacer",isBottom:true})}return true});if(i){r.push("footer");a.push({type:"footer"})}return{keys:r,rows:a,stickyItems:n}}var vr=r(15);var mr=new y["b"]("all_unreads");var hr=Object(vr["b"])("Build an aria-label for an All Unreads header row",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.messageCount,i=r.messageCountAfterLatest,s=r.markedMsgCount,o=r.messageCountIsExact,l=r.collapsed;var c=t();var u=Object(D["getDisplayNameForChannel"])(c,Object(B["d"])(c,a));var d=n>0;var p=i>0;var v=s>0;var m=void 0;m=d||!v||p?!d&&p||l?o?mr.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:i+n}):mr.t("New messages"):o?mr.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:n}):mr.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:n}):mr.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:s});return u+" ("+m+")"});hr.propTypes={channelId:Ze["b"].string.isRequired,messageCount:Ze["b"].number,messageCountAfterLatest:Ze["b"].number,markedMsgCount:Ze["b"].number,messageCountIsExact:Ze["b"].bool,collapsed:Ze["b"].bool};var fr=hr;var br=r(316);var gr=r(139);var _r=r(693);var yr=new y["b"]("all_unreads");var Or={messageCount:Ze["b"].number,messageCountIsExact:Ze["b"].bool,selected:Ze["b"].bool.isRequired,markRead:Ze["b"].func.isRequired,featureReactAllUnreads:Ze["b"].bool.isRequired};var kr={messageCount:0,messageCountIsExact:true};var Er=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getMessageCountText",value:function e(){var t=this.props,r=t.messageCountIsExact,a=t.messageCount,n=t.featureReactAllUnreads;if(!n)return null;if(!a)return"";if(r)return yr.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:a});return yr.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:a})}},{key:"renderButton",value:function e(t){return n.a.createElement(x["d"],{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},t)}},{key:"renderContent",value:function e(){var t=this;var r=this.props,a=r.featureReactAllUnreads,i=r.selected;if(!a)return null;if(i)return yr.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>Esc</key> to </span><button>Mark as Read</button>',null,function(e){var r=e.text,a=e.tag;if("button"===a)return t.renderButton(r);if("key"===a)return n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},r);return null});var s=yr.t("Mark as Read");return this.renderButton(s)}},{key:"render",value:function e(){var t=b()("p-unreads_view__header__kb_instructions_container");return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),n.a.createElement("span",{className:t},this.renderContent()))}}]);return t}(a["PureComponent"]);Er.displayName="HeaderDefault";Er.defaultProps=kr;var jr=Er;var Cr=new y["b"]("all_unreads");var Sr={featureReactAllUnreads:Ze["b"].bool.isRequired,channelId:Ze["b"].string.isRequired,channelType:Ze["b"].string.isRequired,latest:Ze["b"].string.isRequired,initialLastRead:Ze["b"].string.isRequired,collapsed:Ze["b"].bool.isRequired,messageCount:Ze["b"].number,messageCountIsExact:Ze["b"].bool,messageCountAfterLatest:Ze["b"].number,markedMsgCount:Ze["b"].number,totalUnreadCount:Ze["b"].number,markChannelLastRead:Ze["b"].func.isRequired,showNewerMessages:Ze["b"].func.isRequired,setPrimaryView:Ze["b"].func.isRequired,toggleCollapse:Ze["b"].func.isRequired,selected:Ze["b"].bool.isRequired,clogLinkClick:Ze["b"].func.isRequired};var wr={messageCount:0,messageCountIsExact:true,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};var Ir=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Xe["a"])(r,["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"]);return r}d()(t,[{key:"markRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}},{key:"undoMarkRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}},{key:"showNew",value:function e(){this.props.showNewerMessages(this.props.channelId,true)}},{key:"openChannel",value:function e(){this.props.setPrimaryView({id:this.props.channelId})}},{key:"toggleCollapse",value:function e(){this.props.toggleCollapse(this.props.channelId)}},{key:"renderUndo",value:function e(){var t=this.props,r=t.featureReactAllUnreads,a=t.markedMsgCount;if(!r)return null;var i=void 0;a&&(i=Cr.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:a}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},i),n.a.createElement(It["a"],{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},Cr.t("Undo")))}},{key:"renderNewMsgs",value:function e(t){var r=this.props,a=r.featureReactAllUnreads,i=r.messageCountAfterLatest,s=r.messageCountIsExact,o=r.messageCount;if(!a)return null;var l=void 0;l=s?Cr.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:i+o}):Cr.t("New messages");return n.a.createElement(It["a"],{onClick:t,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},l," ",n.a.createElement(be["b"],{inline:true,size:"inherit",type:"circle-fill"}))}},{key:"renderDefault",value:function e(){var t=Object(_["pick"])(this.props,["messageCount","messageCountIsExact","selected","featureReactAllUnreads"]);return n.a.createElement(jr,Q()({},t,{markRead:this.markRead}))}},{key:"render",value:function e(){var t=this.props,r=t.featureReactAllUnreads,a=t.channelId,i=t.markedMsgCount,s=t.messageCount,o=t.messageCountAfterLatest,l=t.collapsed;if(!r)return null;var c=s>0;var u=o>0;var d=i>0;var p={EXPANDED:0,COLLAPSED:1,UNDO:2,SHOW_NEW:3};var v=p.EXPANDED;c||!d||u?!c&&u?v=p.SHOW_NEW:l&&(v=p.COLLAPSED):v=p.UNDO;var m=b()("p-unreads_view__header",{"p-unreads_view__header--was_marked":v===p.UNDO||v===p.SHOW_NEW,"p-unreads_view__header--collapsed":v===p.COLLAPSED});var h=l?"caret-right":"caret-down";var f=v===p.EXPANDED||v===p.COLLAPSED;var g=v===p.EXPANDED;return n.a.createElement("div",{className:m},n.a.createElement(It["a"],{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},n.a.createElement(gr["a"],{channelId:a,className:"p-unreads_view__header__channel_name"})),f&&n.a.createElement(_r["a"],{icon:h,className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse,"aria-expanded":g}),v===p.UNDO&&this.renderUndo(),v===p.SHOW_NEW&&this.renderNewMsgs(this.showNew),v===p.COLLAPSED&&this.renderNewMsgs(this.toggleCollapse),v===p.EXPANDED&&this.renderDefault())}}]);return t}(a["Component"]);Ir.displayName="Header";Ir.defaultProps=wr;var Tr={setPrimaryView:function e(){return br["a"].apply(void 0,arguments)}};var Ar=Object(g["connect"])(null,Tr)(Ir);var Nr=r(87);var Pr=r(55);var Rr=r(1224);var Mr=r(1092);var xr=r(762);var Dr=r(925);var Fr=r(926);var Lr=r(1093);var Br=r(1066);var Ur=r(1225);var qr=r(4179);var Gr=r(4184);function Hr(e){var t=e.msg;if(!Object(lr["isThreadBroadcast"])(t))return null;return n.a.createElement(qr["a"],{className:"c-message_kit__broadcast_footer",ts:t.ts,threadTs:t.thread_ts,channelId:t.channel})}Hr.displayName="BroadcastFooter";var Wr=r(4182);var Vr={msg:Ze["b"].object.isRequired,className:Ze["b"].string,dispatchShowThreadIfThreadable:Ze["b"].func};var Kr={dispatchShowThreadIfThreadable:_["noop"],className:void 0};var zr=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.dispatchShowThreadIfThreadable;var i=b()("c-message_kit__thread_replies",this.props.className);var s=r.channel;var o=r.thread_ts;var l=r.replies;var c=r.reply_count;var u=r.reply_users;var d=r.reply_users_count;var p=r.latest_reply;if(!s||!c)return null;return n.a.createElement(Wr["a"],{channelId:s,threadTs:o,replies:l,replyCount:c,replyUsers:u,replyUsersCount:d,latestReply:p,showThreadIfThreadable:a,className:i})}}]);return t}(a["PureComponent"]);zr.displayName="ThreadReplies";zr.defaultProps=Kr;var Qr=function e(t){return{dispatchShowThreadIfThreadable:function e(){return t(Wt["showThreadIfThreadable"].apply(void 0,arguments))}}};var Yr=Object(g["connect"])(null,Qr)(zr);var Jr=r(1353);var Xr=r(922);var Zr=r(1095);var $r=r(1215);var ea=r(1214);var ta=r(4181);var ra=r(4186);var aa={msg:Ze["b"].object,children:Ze["b"].node,theme:Ze["b"].oneOf(["light","dense"])};var na={msg:Ze["b"].object,children:null,theme:"light"};var ia=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.children,i=t.theme;if(!Object(lr["isThreadBroadcast"])(r))return a;var s=b()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===i});return n.a.createElement("div",{className:s},a,n.a.createElement(ta["a"],{ts:r.ts,threadTs:r.thread_ts,channelId:r.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}]);return t}(a["PureComponent"]);ia.displayName="BroadcastPreamble";ia.defaultProps=na;var sa=Object(g["connect"])(function(e){return{theme:Object(Ht["a"])(e)}})(ia);var oa=r(1347);var la=r(1354);var ca=r(1355);var ua=r(1356);var da=new y["b"]("message_kit");var pa={msg:Ze["b"].object.isRequired,theme:Ze["b"].oneOf(["light","dense"]),adjacent:Ze["b"].bool,focused:Ze["b"].bool,renderActionsOffscreen:Ze["b"].bool,actionsPosition:Ze["b"].oneOf(["above","inside","default"]),onBackgroundClick:Ze["b"].func,rollup:Nr["a"].Rollup()};var va={theme:"light",adjacent:false,focused:false,renderActionsOffscreen:false,actionsPosition:void 0,onBackgroundClick:_["noop"],rollup:null};var ma=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleBackgroundClick=r.handleBackgroundClick.bind(r);return r}d()(t,[{key:"getMessageBody",value:function e(t){var r=this.props,a=r.adjacent,i=r.rollup;return n.a.createElement(n.a.Fragment,null,!a&&n.a.createElement(sa,{msg:t},n.a.createElement(Dr["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Fr["a"],{msg:t,clickable:true},da.t("Open in channel")),n.a.createElement("br",null)),n.a.createElement(Lr["a"],{msg:t,rollup:i}),n.a.createElement(Br["a"],{msg:t,blocksContainerContext:Pr["a"].all_unreads}),n.a.createElement(xr["b"],{msg:t}),n.a.createElement(Rr["a"],{msg:t}),n.a.createElement(Ur["a"],{msg:t}),n.a.createElement(Yr,{msg:t,className:"p-unreads_view__thread_replies"}),n.a.createElement(Hr,{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){var r=this.props,a=r.adjacent,i=r.rollup;return n.a.createElement(ua["a"],null,!a&&n.a.createElement(sa,{msg:t},n.a.createElement(Dr["a"],{msg:t,className:"p-unreads_view_sender--compact"}),"\xa0"),n.a.createElement(Lr["a"],{msg:t,rollup:i}),n.a.createElement(Br["a"],{msg:t,blocksContainerContext:Pr["a"].all_unreads}),n.a.createElement(xr["b"],{msg:t}),n.a.createElement(Rr["a"],{msg:t}),n.a.createElement(Ur["a"],{msg:t}),n.a.createElement(Yr,{msg:t,className:"p-unreads_view__thread_replies"}))}},{key:"getCompactGutter",value:function e(){var t=this.props,r=t.msg,a=t.theme,i=t.adjacent;var s="light"===a;var o=b()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":s,"p-unreads_view_compact_timestamp--adjacent":i});return n.a.createElement("div",{className:o},n.a.createElement(Fr["a"],{msg:r,meridiem:!(i&&s),clickable:true},da.t("Open in channel")))}},{key:"handleBackgroundClick",value:function e(t){if(t.altKey){t.preventDefault();this.props.onBackgroundClick(this.props.msg)}}},{key:"render",value:function e(){var t=this.props,r=t.msg,a=t.theme,i=t.adjacent,s=t.focused,o=t.renderActionsOffscreen,l=t.actionsPosition;var c=b()("p-unreads-view__message","c-message_kit__message");var u="dense"===a;var d=u?this.getCompactGutter():null;var p=i?this.getCompactGutter():n.a.createElement(Mr["a"],{msg:r});var v=u?this.getCompactMessageBody(r):this.getMessageBody(r);return n.a.createElement(Jr["a"],{msg:r},n.a.createElement(Xr["a"],{msg:r,className:c,onClick:this.handleBackgroundClick},n.a.createElement(Zr["a"],{"data-qa":"unreads_view_message_hover",hovered:s},n.a.createElement($r["a"],{msg:r,showComment:true,showShare:true,messageContainerType:_t["MESSAGE_CONTAINERS"].UNREAD_VIEW,position:l||(u||i?"above":"default"),renderOffscreen:o},n.a.createElement(oa["a"],{msg:r},n.a.createElement(la["a"],{msg:r,className:"p-unreads-view__message_label"},n.a.createElement(ea["a"],{light:p,compact:d},n.a.createElement(ca["a"],{msg:r},v))))))))}}]);return t}(a["PureComponent"]);ma.displayName="Message";var ha=ma;ma.defaultProps=va;var fa=new y["b"]("all_unreads");var ba=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}d()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.channelId,a=t.showNewerMessages;a(r)}},{key:"render",value:function e(){var t=this.props,r=t.count,a=t.featureReactAllUnreads;if(!a)return null;var i=fa.t("{count, plural, =1 {# new message} other {# new messages}}",{count:r});return n.a.createElement(It["a"],{className:"p-unreads_view__show_newer",onClick:this.onClick},i)}}]);return t}(a["PureComponent"]);ba.displayName="ShowNewerButton";var ga=ba;ba.defaultProps={featureReactAllUnreads:true};var _a={markAllRead:Ze["b"].func.isRequired,featureReactAllUnreads:Ze["b"].bool.isRequired};var ya=new y["b"]("all_unreads");function Oa(e){var t=e.markAllRead,r=e.featureReactAllUnreads;if(!r)return null;return n.a.createElement("div",{className:"p-unreads_view__footer"},n.a.createElement(x["d"],{onClick:t,type:"outline"},ya.t("Mark All Messages Read")))}Oa.displayName="Footer";var ka=Oa;var Ea=new y["b"]("all_unreads");function ja(e){var t=e.featureReactAllUnreads;if(!t)return null;return n.a.createElement("div",{className:"p-unreads_view__loading_more"},Ea.t("Loading more messages..."))}ja.displayName="LoadingMore";var Ca=ja;var Sa=new y["b"]("all_unreads");var wa="UNREADS-VIEW";var Ia=Object(rr["a"])(ha);var Ta={showNewerMessages:Ze["b"].func.isRequired,markChannelLastRead:Ze["b"].func.isRequired,markAllRead:Ze["b"].func.isRequired,removeFrames:Ze["b"].func.isRequired,totalUnreadCount:Ze["b"].number.isRequired,frames:Ze["b"].arrayOf(Ze["b"].shape({channelId:Ze["b"].string.isRequired,start:Ze["b"].string.isRequired,end:Ze["b"].string.isRequired,initialLastRead:Ze["b"].string.isRequired,markedMsgCount:Ze["b"].number.isRequired,channelType:Ze["b"].string.isRequired,collapsed:Ze["b"].bool.isRequired,lastRead:Ze["b"].string.isRequired,latest:Ze["b"].string.isRequired,timestamps:Ze["b"].arrayOf(Ze["b"].string).isRequired,reachedEnd:Ze["b"].bool.isRequired,messages:Ze["b"].object,isMember:Ze["b"].bool})).isRequired,logger:Ze["b"].object.isRequired,clogLinkClick:Ze["b"].func.isRequired,theme:Ze["b"].oneOf(["dense","light"]).isRequired,featureReactAllUnreads:Ze["b"].bool.isRequired,featureAriaApplicationMode:Ze["b"].bool.isRequired,allUnreadsSortOrder:Ze["b"].string.isRequired,focusRequestedThreadKey:Ze["b"].string,userAttentionIsOnChat:Ze["b"].bool.isRequired,featureOfflineMode:Ze["b"].bool.isRequired,isOffline:Ze["b"].bool.isRequired,fetchHistory:Ze["b"].func.isRequired,addMessagesFromHistory:Ze["b"].func.isRequired,setUnreadPoint:Ze["b"].func.isRequired,expandChannel:Ze["b"].func.isRequired,collapseChannel:Ze["b"].func.isRequired,makeMessageSummary:Ze["b"].func.isRequired,makeHeaderLabel:Ze["b"].func.isRequired,showThreadIfThreadable:Ze["b"].func.isRequired,setFocusRequestedThreadKey:Ze["b"].func.isRequired,removeFromSectionNavigation:Ze["b"].func,addToSectionNavigation:Ze["b"].func,setInitialActiveSection:Ze["b"].func};var Aa={focusRequestedThreadKey:void 0,removeFromSectionNavigation:_["noop"],addToSectionNavigation:_["noop"],setInitialActiveSection:_["noop"]};var Na=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Xe["a"])(r,["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onMarkReadKeyCommand","onMarkReadKeyCommandWithR","onLeftKeyCommand","onRightKeyCommand","onPreviousChannelKeyCommand","onNextChannelKeyCommand","onItemTabWithin","shouldIgnoreKeyEvent","shouldIgnoreFocusedKeyEvent","clogClick","isItemAriaExpanded","onFocusEnter","onFocusLeave","getAriaLabelForRow","focus"]);r.layout=new tr["a"]({ANCHOR_OFFSET:72});r.list=n.a.createRef();r.rows=[];r.loading=false;r.state={keyToFocus:null,hasKeyboardFocus:false};return r}d()(t,[{key:"componentDidUpdate",value:function e(t){!t.userAttentionIsOnChat&&this.props.userAttentionIsOnChat&&this.props.addToSectionNavigation();!this.props.userAttentionIsOnChat&&t.userAttentionIsOnChat&&this.props.removeFromSectionNavigation();this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(false);var r=Object(_["map"])(this.props.frames.filter(function(e){return!e.isMember}),"channelId");var a=Object(_["map"])(this.props.frames.filter(function(e){return e.reachedEnd&&(Object(_["isEmpty"])(e.timestamps)||Object(_["last"])(e.timestamps)<=e.initialLastRead)}),"channelId");var n=[].concat(qt()(r),qt()(a));if(n.length){this.props.logger.info("removing frames (non-member, empty):",r,a);this.props.removeFrames(n)}this.maybeClearKeyToFocus()}},{key:"maybeClearKeyToFocus",value:function e(){var t=this.list.current;if(t){var r=t.getActiveItem();r&&this.state.keyToFocus===r&&this.setState(function(){return{keyToFocus:null}})}}},{key:"determineKeyToFocus",value:function e(t,r){var a=this.state.keyToFocus;var n=this.props.focusRequestedThreadKey;if(n){var i=Object($t["decodeThreadKey"])(n),s=i.channelId,o=i.threadTs;return"message-"+s+"-"+o}if(a)return a;var l=this.list.current&&this.list.current.getInitialActiveItem();var c=Object(_["startsWith"])(l,"show-newer-");if(c&&!Object(_["includes"])(r,l)){var u=t.indexOf(l);if(-1===u)return null;var d=t[u-1];var p=r.indexOf(d);var v=r[p+1];if(v)return v}return null}},{key:"showNewerMessages",value:function e(t,r){var a=Object(_["find"])(this.props.frames,{channelId:t});var n=r&&a.lastRead;r&&this.maybeAnchorToHeader(t);this.props.showNewerMessages(t,a.latest,n)}},{key:"markAllRead",value:function e(){var t={};this.rows.filter(function(e){return"header"===e.type}).forEach(function(e){if(e.messageCountIsExact&&!e.messageCount)return;t[e.channelId]=e.end});this.props.markAllRead(t)}},{key:"getRowAndFrame",value:function e(t){var r=this.props,a=r.logger,n=r.frames;var i=this.keys.indexOf(t);var s=this.rows[i];if(!s||!s.channelId){a.warn("No valid row");return null}var o=s.channelId;var l=Object(_["find"])(n,{channelId:o});if(!l){a.warn("No frame for "+o);return null}return{row:s,frame:l}}},{key:"getActiveRow",value:function e(){var t=this.list.current&&this.list.current.getInitialActiveItem();if(!t)return null;return this.getRowAndFrame(t)}},{key:"getActiveRowForKeyboardMarking",value:function e(){var t=this.getActiveRow();if(t)return t;var r=this.defaultActiveItemForKeyboardMarking||this.keys[0];if(!r)return null;return this.getRowAndFrame(r)}},{key:"onMarkReadKeyCommand",value:function e(){var t=this.props,r=t.logger,a=t.frames;r.info("onMarkReadKeyCommand");var n=this.getActiveRowForKeyboardMarking()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=Object(_["filter"])(this.rows,{channelId:s.channelId,type:"message"}).length;if(!o){if(i.markedMsgCount){this.markChannelLastRead(s.channelId,s.initialLastRead);return}r.warn("No messages to mark or to undo");return}this.markChannelLastRead(s.channelId,s.end,o);var l=a.filter(function(e){return e.start<e.end}).length;if(1===l)return;var c=a[1+a.indexOf(s)];var u=c?"header-"+c.channelId:"header-"+s.channelId;this.setState(function(){return{keyToFocus:u}});this.defaultActiveItemForKeyboardMarking=u}},{key:"onMarkReadKeyCommandWithR",value:function e(){var t=this.props.logger;t.info("onMarkReadKeyCommandWithR");var r=this.getActiveRowForKeyboardMarking()||{},a=r.row,n=r.frame;if(!a||!n)return;if("header"!==a.type){t.info("Header not selected: "+a.type);return}this.onMarkReadKeyCommand()}},{key:"onLeftKeyCommand",value:function e(){var t=this.props.logger;t.info("onLeftKeyCommand");var r=this.getActiveRow(),a=r.row,n=r.frame;if(!a||!n)return;if("header"===a.type&&!n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}})}}},{key:"onRightKeyCommand",value:function e(){var t=this.props.logger;t.info("onRightKeyCommand");var r=this.getActiveRow(),a=r.row,n=r.frame;if(!a||!n)return;if("header"===a.type&&n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}});return}if("message"===a.type){var i=a.ts,s=a.channelId;this.props.showThreadIfThreadable({channelId:s,threadTs:i,requestFocus:true});this.blur()}}},{key:"onPreviousChannelKeyCommand",value:function e(){var t=this.props,r=t.logger,a=t.frames;r.info("onPreviousChannelKeyCommand");var n=this.getActiveRow()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=s;if("header"===i.type){o=a[a.indexOf(s)-1];if(!o){r.info("No previous frame");return}}this.setState(function(){return{keyToFocus:"header-"+o.channelId}})}},{key:"onNextChannelKeyCommand",value:function e(){var t=this.props,r=t.logger,a=t.frames;r.info("onNextChannelKeyCommand");var n=this.getActiveRow()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=a[a.indexOf(s)+1];if(!o){r.info("No next frame");return}this.setState(function(){return{keyToFocus:"header-"+o.channelId}})}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"shouldIgnoreKeyEvent",value:function e(t){if(Object(St["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;if(t.target===document.body)return false;if(t.target&&"Punreads"===t.target.getAttribute("data-sidebar-link-id"))return false;return!this.state.hasKeyboardFocus}},{key:"shouldIgnoreFocusedKeyEvent",value:function e(t){if(Object(St["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;return!this.state.hasKeyboardFocus}},{key:"checkUserAttentionIsOnChat",value:function e(){if(Object(O["a"])())return this.props.userAttentionIsOnChat;return Object(Ct["f"])()}},{key:"maybeAnchorToHeader",value:function e(t){if(!this.list.current)return;var r="header-"+t;var a=this.list.current.getTop(r)-this.list.current.getScrollTop();if(a>0)return;this.layout.setAnchor(r,0)}},{key:"markChannelLastRead",value:function e(t,r,a){this.maybeAnchorToHeader(t);this.props.markChannelLastRead(t,r,a)}},{key:"clogClick",value:function e(t,r){this.props.clogLinkClick({event:t,metadata:r})}},{key:"toggleCollapse",value:function e(t){var r=Object(_["find"])(this.props.frames,{channelId:t});if(!r)return;var a={channel_id:t,channel_type:r.channelType};this.maybeAnchorToHeader(t);if(r.collapsed){this.props.expandChannel(t);this.props.showNewerMessages(t,r.latest);this.clogClick("UNREADS_EXPAND_GROUP",a)}else{this.props.collapseChannel(t);this.clogClick("UNREADS_COLLAPSE_GROUP",a)}}},{key:"handleMessageBackgroundClick",value:function e(t){var r=t.channel,a=t.ts;this.props.setUnreadPoint({channelId:r,unreadTs:a})}},{key:"isFocusableItem",value:function e(t){var r=t.index;var a=this.rows[r];return["header","message","show-newer","footer"].includes(a.type)}},{key:"isItemAriaExpanded",value:function e(t,r){var a=this.rows[r];if(a&&"header"===a.type)return!a.collapsed;return}},{key:"scrollToTop",value:function e(){if(!this.list.current)return;this.list.current.scrollToOffset(0)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"blur",value:function e(){var t=this.list.current;t&&t.blur()}},{key:"onFocusEnter",value:function e(){var t=this;this.setState(function(){return{hasKeyboardFocus:true}},function(){var e=t.props.focusRequestedThreadKey;var r=t.list.current;if(!r||!e)return;var a=r.getActiveItem();"message-"+e===a&&t.props.setFocusRequestedThreadKey(null)})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var r=this.rows[t];if(!r||!r.type)return null;switch(r.type){case"message":var a=r.ts;return this.props.makeMessageSummary({channelId:r.channelId,ts:a,hasFocus:this.state.hasKeyboardFocus,day:{ts:a,isFirstDay:false,isLastDay:false},viewContext:_t["MESSAGE_CONTAINERS"].UNREAD_VIEW});case"header":return this.props.makeHeaderLabel({channelId:r.channelId,messageCount:r.messageCount,messageCountAfterLatest:r.messageCountAfterLatest,markedMsgCount:r.markedMsgCount,messageCountIsExact:r.messageCountIsExact,collapsed:r.collapsed});case"show-newer":return Sa.t("{count, plural, =1 {# new message} other {# new messages}}",{count:r.count});case"footer":return Sa.t("Mark All Messages Read");default:return null}}},{key:"renderRow",value:function e(t,r){var a=r.hasFocus;var i=this.rows[t];var s=this.list.current&&this.list.current.getInitialActiveItem();switch(i.type){case"header":return n.a.createElement(Ar,{featureReactAllUnreads:true,channelId:i.channelId,channelType:i.channelType,messageCount:i.messageCount,messageCountAfterLatest:i.messageCountAfterLatest,messageCountIsExact:i.messageCountIsExact,markedMsgCount:i.markedMsgCount,collapsed:i.collapsed,latest:i.end,initialLastRead:i.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:Object(_["includes"])(s,i.channelId),clogLinkClick:this.props.clogLinkClick});case"message":return n.a.createElement(Ia,{channelId:i.channelId,ts:i.ts,prevTs:i.prevTs,actionsPosition:i.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:a,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:i.rollup});case"loading":if(this.props.featureOfflineMode&&this.props.isOffline)return n.a.createElement(sr["a"],null);return n.a.createElement(Ca,{featureReactAllUnreads:true});case"day-divider":var o=+i.dayTs;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ar["b"],{date:o}),n.a.createElement(ar["a"],{date:o,isUnread:i.unread}));case"unread-divider":return n.a.createElement(nr["a"],null);case"show-newer":return n.a.createElement(ga,{count:i.count,channelId:i.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return n.a.createElement("div",{className:b()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!i.isBottom})});case"footer":return n.a.createElement(ka,{markAllRead:this.markAllRead,featureReactAllUnreads:true});default:this.props.logger.error("Unhandled row type:",i.type);return i.type}}},{key:"fetchPost",value:function e(){var t=this;var r=Object(_["last"])(this.rows);if(!r)return;if("loading"!==r.type)return;if(this.loading)return;this.loading=true;var a=r.channelId,n=r.oldest;this.props.logger.info("fetchPost",a,n);this.props.fetchHistory({channelId:a,oldest:n,reason:"unreads-view/fetchPost"}).then(function(e){var r=e.msgs,i=e.hasMore,s=e.deleted;t.props.addMessagesFromHistory({channelId:a,oldest:n,msgs:r,hasMore:i,deleted:s})}).finally(function(){t.loading=false})}},{key:"render",value:function e(){var t=this;if(!this.props.featureReactAllUnreads)return null;var r=this.props,a=r.allUnreadsSortOrder,i=r.frames,s=r.currentUserId,o=r.featureOfflineMode,l=r.isOffline;var c=pr(i,s),u=c.keys,d=c.rows,p=c.stickyItems;var v=!Object(_["some"])(d,function(e){return"message"===e.type});if(o&&l&&v)return n.a.createElement(ft["a"],null);var m=this.keys;this.rows=d;this.keys=u;var h=[{keys:["r"],handler:this.onMarkReadKeyCommandWithR,filter:this.shouldIgnoreKeyEvent},{keys:["esc"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pageup"],handler:this.onPreviousChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pagedown"],handler:this.onNextChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent}];var f=void 0;f="alphabetical"===a?Sa.t("All Unreads, sorted alphabetically"):"priority"===a?Sa.t("All Unreads, sorted scientifically"):"newest"===a?Sa.t("All Unreads, sorted by newest channel"):Sa.t("All Unreads, sorted by oldest channel");var b=this.determineKeyToFocus(m,this.keys);var g=n.a.createElement(Gt["a"],null,function(e){var r=e.width,a=e.height;return n.a.createElement(er["a"],{ref:t.list,layout:t.layout,width:r,height:a,keys:u,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchPost,loadPost:t.fetchPost,stickyItems:p,stickyZIndex:202,keyCommands:h,activeItem:b,isItemAriaExpanded:t.isItemAriaExpanded,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,useAriaApplicationMode:t.props.featureAriaApplicationMode,getAriaLabelForRow:t.getAriaLabelForRow,ariaLabel:f,onItemTabWithin:t.onItemTabWithin})});if(Object(O["a"])())return g;return n.a.createElement(ir["a"],{component:this,order:.2},g)}}]);return t}(bt["a"]);Na.displayName="UnreadsList";Na.propTypes=Ta;Na.defaultProps=Aa;function Pa(e,t){var r=Object(gt["a"])({label:wa,state:e});var a=Object(Ht["a"])(e);var n=Object(Ot["f"])(e);var s=t.frames.map(function(t){var r=Object(B["d"])(e,t.channelId);var a=Object(D["getLastReadTs"])(r);var i=Object($e["getTimestampsByChannelId"])(e,r.id);var s=Object(D["getLatestTs"])(r,i.timestamps);var o=Object($e["getTimestampsByChannelId"])(e,r.id,t.start);var l=o.timestamps;var c=o.end;var u=!!o.reachedEnd;var d=Object(et["b"])(e,r.id);var p=n.includes(t.channelId);var v=Object(D["isMemberOfChannel"])(r);return Q()({},t,{lastRead:a,latest:s,timestamps:l,sliceEnd:c,reachedEnd:u,messages:d,collapsed:p,isMember:v})});return{logger:r,theme:a,frames:s,currentUserId:Object(i["getCurrentUserId"])(e),featureReactAllUnreads:Object(i["isFeatureEnabled"])(e,"feature_react_all_unreads"),featureAriaApplicationMode:Object(i["isFeatureEnabled"])(e,"feature_aria_application_mode"),allUnreadsSortOrder:Object(lt["a"])(e),focusRequestedThreadKey:nt(e),userAttentionIsOnChat:Object(jt["e"])(e),featureOfflineMode:Object(i["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(ot["c"])(e)}}var Ra={fetchHistory:function e(){return zt["b"].apply(void 0,arguments)},addMessagesFromHistory:function e(){return Kt["a"].apply(void 0,arguments)},setUnreadPoint:function e(){return ye["setUnreadPoint"].apply(void 0,arguments)},expandChannel:function e(){return Xt.apply(void 0,arguments)},collapseChannel:function e(){return Zt.apply(void 0,arguments)},makeMessageSummary:function e(){return Vt["a"].apply(void 0,arguments)},makeHeaderLabel:function e(){return fr.apply(void 0,arguments)},showThreadIfThreadable:function e(){return Wt["showThreadIfThreadable"].apply(void 0,arguments)},setFocusRequestedThreadKey:function e(){return it["c"].apply(void 0,arguments)}};var Ma=Object(O["a"])()?Object(or["a"])(Na,"UnreadsList",{index:0}):Na;var xa=Object(g["connect"])(Pa,Ra,null,{withRef:true})(Ma);function Da(e){var t=e.channels,r=e.allUnreadsSortOrder,a=e.currentUserId;if("oldest"===r)return Ua(t,a);if("priority"===r)return La(t);if("newest"===r)return Ba(t);return Fa(t)}function Fa(e){var t=Ka(e),r=t.starred,a=t.notStarred;return Ha(r).concat(Ha(a))}function La(e){var t=Ka(e),r=t.starred,a=t.notStarred;return qa(r).concat(qa(a))}function Ba(e){return Object(_["reverse"])(Object(_["sortBy"])(e,"latest"))}function Ua(e,t){var r=Object(_["memoize"])(function(e){var r=e.lastRead,a=e.messages,n=e.oldestSliceTimestamps,i=e.createdTime;var s=false;var o=Object(_["find"])(n,function(e){if(e<=r)return false;var n=a[e];if(!n){s=true;return false}return Object(lr["isMessageUnread"])(n,r,t)});if(o&&!s)return o;if("0000000000.000000"===r)return i+".000000";return r});return Object(_["sortBy"])(e,r)}function qa(e){var t=za(e),r=t.publicChannels,a=t.privateChannels,n=t.ims,i=t.mpims;var s=r.concat(a);return Ga(s).concat(Va(n)).concat(Va(i))}function Ga(e){var t=Qa(e),r=t.hasMentions,a=t.noMentions;return Va(r).concat(Va(a))}function Ha(e){var t=za(e),r=t.publicChannels,a=t.privateChannels,n=t.ims,i=t.mpims;var s=Wa(r.concat(a));var o=Wa(n);var l=Wa(i);return s.concat(o).concat(l)}function Wa(e){return Object(_["clone"])(e).sort(function(e,t){return Object(y["p"])(e.displayName,t.displayName)})}function Va(e){return Object(_["clone"])(e).sort(function(e,t){if(e.priority===t.priority)return Object(y["p"])(e.displayName,t.displayName);return t.priority-e.priority})}function Ka(e){var t=Object(_["groupBy"])(e,"isStarred");var r=t.true||[];var a=t.false||[];return{starred:r,notStarred:a}}function za(e){var t=Object(_["groupBy"])(e,"channelType");var r=t.channel||[];var a=t.private||[];var n=t.im||[];var i=t.mpim||[];return{publicChannels:r,privateChannels:a,ims:n,mpims:i}}function Qa(e){var t=Object(_["groupBy"])(e,function(e){return e.unreadHighlightCnt>0});var r=t.true||[];var a=t.false||[];return{hasMentions:r,noMentions:a}}var Ya=Da;var Ja={newUnreadMsgCount:Ze["b"].number.isRequired,setNewUnreadMsgCount:Ze["b"].func.isRequired,refreshAllUnreads:Ze["b"].func.isRequired};var Xa=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Xe["a"])(r,["refreshFromKeyPress"]);return r}d()(t,[{key:"componentDidMount",value:function e(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentDidUpdate",value:function e(t){t.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentWillUnmount",value:function e(){this.props.setNewUnreadMsgCount(0)}},{key:"refreshFromKeyPress",value:function e(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}},{key:"render",value:function e(){return null}}]);return t}(a["Component"]);Xa.displayName="NewMessagesUpdater";function Za(e,t){var r=t.frames.map(function(e){return e.channelId});var a=Mt(e),n=a.countsPerChannel;var i=Object(_["filter"])(n,function(e,t){return!r.includes(t)});var s=Object(_["sum"])(Object(_["map"])(i,"unreadCnt"));return{newUnreadMsgCount:s}}var $a=Object(g["connect"])(Za)(Xa);var en=r(4188);var tn=new y["b"]("all_unreads");var rn="UNREADS-VIEW";var an={channels:Ze["b"].arrayOf(Ze["b"].shape({id:Ze["b"].string.isRequired,lastRead:Ze["b"].string.isRequired,latest:Ze["b"].string.isRequired,displayName:Ze["b"].string.isRequired,channelType:Ze["b"].string.isRequired,isStarred:Ze["b"].bool.isRequired,priority:Ze["b"].number.isRequired,unreadHighlightCnt:Ze["b"].number.isRequired,messages:Ze["b"].object.isRequired,oldestSliceTimestamps:Ze["b"].arrayOf(Ze["b"].string).isRequired,createdTime:Ze["b"].number.isRequired})).isRequired,logger:Ze["b"].object.isRequired,clogger:Ze["b"].object,allUnreadsSortOrder:Ze["b"].string.isRequired,currentUserId:Ze["b"].string.isRequired,featureReactAllUnreads:Ze["b"].bool.isRequired,refreshId:Ze["b"].number.isRequired,totalUnreadCount:Ze["b"].number.isRequired,unreadChannelsAreKnown:Ze["b"].bool.isRequired,featureOfflineMode:Ze["b"].bool.isRequired,isOffline:Ze["b"].bool.isRequired,markLastRead:Ze["b"].func.isRequired,setNewUnreadMsgCount:Ze["b"].func.isRequired};var nn={clogger:{track:_["noop"]}};var sn=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Xe["a"])(r,["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]);r.state=r.computeInitialState();r.unreadsEventSeqId=0;r.initializedTime=Date.now();r.listRef=n.a.createRef();return r}d()(t,[{key:"componentDidMount",value:function e(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{}});this.incrementTrackingSeqId()}},{key:"componentDidUpdate",value:function e(t){(t.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||t.refreshId<this.props.refreshId||!t.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",t)}},{key:"componentWillUnmount",value:function e(){var t={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:t})}},{key:"incrementTrackingSeqId",value:function e(){this.unreadsEventSeqId+=1}},{key:"clogUnreadsEvent",value:function e(t){var r=t.event,a=t.metadata;var n=this.props.clogger;n.track(r,Q()({is_unreads_view:1},a))}},{key:"computeInitialState",value:function e(){var t=this.props,r=t.channels,a=t.allUnreadsSortOrder,n=t.currentUserId;var i=Ya({channels:r,allUnreadsSortOrder:a,currentUserId:n});var s=i.map(function(e){var t=e.id,r=e.lastRead,a=e.latest,n=e.channelType;return{channelId:t,start:r,end:a,initialLastRead:r,markedMsgCount:0,channelType:n||""}});return{frames:s,showMarkAllUndo:false,markedChannels:[],errored:false}}},{key:"showNewerMessages",value:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return Q()({},e,{initialLastRead:a||e.initialLastRead,start:a||e.start,end:r})});return{frames:n}})}},{key:"markChannelLastRead",value:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.props.logger.info("Marking "+t+" to "+r);this.props.markLastRead({id:t,ts:r,immediate:true,reason:"unreads-view/markChannelLastRead"});this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return Q()({},e,{start:r,markedMsgCount:a})});return{frames:n}})}},{key:"markAllRead",value:function e(t){this.props.logger.info("Marking all: "+JSON.stringify(t));this.props.markManyLastRead({markers:t,reason:"unreads-view/markAllRead"});var r={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:r});this.setState(function(e){var r=e.frames.map(function(e){return Q()({},e,{start:e.end})});return Q()({},e,{frames:r,showMarkAllUndo:true,markedChannels:Object(_["keys"])(t)})})}},{key:"undoMarkAllRead",value:function e(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}});this.setState(function(e,t){var r=e.frames.map(function(t){if(!e.markedChannels.includes(t.channelId))return t;return Q()({},t,{start:t.initialLastRead})});var a={};r.forEach(function(t){if(!e.markedChannels.includes(t.channelId))return;if(t.initialLastRead>=t.end)return;a[t.channelId]=t.initialLastRead});t.logger.info("Undoing mark all: "+JSON.stringify(a));t.markManyLastRead({markers:a,reason:"unreads-view/undoMarkAllRead"});return Q()({},e,{frames:r,showMarkAllUndo:false,markedChannels:[]})})}},{key:"refreshAllUnreads",value:function e(){var t=this;this.props.logger.info("Refreshing");this.setState(function(){return t.computeInitialState()},function(){t.listRef&&t.listRef.current&&t.listRef.current.getWrappedInstance()&&t.listRef.current.getWrappedInstance().scrollToTop()});this.props.setNewUnreadMsgCount(0)}},{key:"removeFrames",value:function e(t){this.setState(function(e){return Q()({},e,{frames:e.frames.filter(function(e){return!t.includes(e.channelId)})})})}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__top_banners"},n.a.createElement(ct["a"],null),n.a.createElement(ut["a"],null,n.a.createElement(dt["a"],null))),n.a.createElement(ht["a"],null))}},{key:"render",value:function e(){if(!this.props.featureReactAllUnreads){this.props.logger.error("Tried rendering React All Unreads with the feature flag off");return null}if(!this.props.unreadChannelsAreKnown){var t=this.props,r=t.featureOfflineMode,i=t.isOffline;return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),r&&i?n.a.createElement(ft["a"],null):n.a.createElement(pt["a"],null))}var s=this.state,o=s.showMarkAllUndo,l=s.errored;if(l&&this.props.featureReactAllUnreads)return n.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),n.a.createElement(vt["a"],{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},tn.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",n.a.createElement("br",null),tn.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(fe["a"],{href:"https://slack.com/help/contact"},t)})));var c=n.a.createElement($a,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads});var u=!this.state.frames.some(function(e){return e.start<e.end});var d=n.a.createElement(Bt,{visible:u,showUndo:o,undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads});var p=n.a.createElement(mt["a"],{id:_t["MESSAGE_CONTAINERS"].UNREAD_VIEW},n.a.createElement("div",{className:"p-unreads_view"},n.a.createElement(xa,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return n.a.createElement(a["Fragment"],null,this.renderTopBanners(),d,!u&&p,!u&&c)}}]);return t}(bt["a"]);sn.displayName="UnreadsView";sn.propTypes=an;sn.defaultProps=nn;var on=sn;function ln(e){var t=Object(gt["a"])({label:rn,state:e});var r=Object(k["a"])({state:e});var a=Mt(e),n=a.countsPerChannel,s=a.unreadChannelIds,o=a.unreadChannelsAreKnown;var l=Object(_["sum"])(Object(_["map"])(n,"unreadCnt"));var c=s.map(function(t){return Object(B["d"])(e,t)}).map(function(t){var r=Object(D["getLastReadTs"])(t);var a=Object($e["getTimestampsByChannelId"])(e,t.id);var i=Object(D["getLatestTs"])(t,a.timestamps);var s=Object($e["getTimestampsByChannelId"])(e,t.id,r);var o=Object(et["b"])(e,t.id)||{};return{id:t.id,lastRead:r,latest:i,displayName:Object(D["getDisplayNameForChannel"])(e,t,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),channelType:Object(D["getChannelType"])(t),isStarred:Object(D["isStarred"])(t)||false,priority:Object(D["getPriority"])(t)||0,unreadHighlightCnt:n[t.id].unreadHighlightCnt||0,messages:o,oldestSliceTimestamps:s&&s.timestamps||[],createdTime:Object(D["getChannelCreatedTime"])(t)}});return{featureReactAllUnreads:Object(i["isFeatureEnabled"])(e,"feature_react_all_unreads"),logger:t,clogger:r,channels:c,allUnreadsSortOrder:Object(lt["a"])(e),currentUserId:Object(i["getCurrentUserId"])(e),refreshId:at(e),totalUnreadCount:l,unreadChannelsAreKnown:o,featureOfflineMode:Object(i["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(ot["c"])(e)}}var cn={markLastRead:function e(){return st["b"].apply(void 0,arguments)},markManyLastRead:function e(){return st["c"].apply(void 0,arguments)},setNewUnreadMsgCount:function e(){return it["d"].apply(void 0,arguments)}};var un=Object(g["connect"])(ln,cn)(sn);var dn=un;var pn=r(132);var vn=r(66);var mn=r(128);var hn=new y["b"]("all_unreads");var fn={newUnreadMsgCount:Ze["b"].number,incrementRefreshId:Ze["b"].func,featureReactAllUnreads:Ze["b"].bool};var bn={newUnreadMsgCount:0,incrementRefreshId:_["noop"],featureReactAllUnreads:false};var gn=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.refreshMessages=r.refreshMessages.bind(r);return r}d()(t,[{key:"refreshMessages",value:function e(){this.props.incrementRefreshId()}},{key:"render",value:function e(){var t=this.props,r=t.newUnreadMsgCount,a=t.featureReactAllUnreads;if(r<1||!a)return null;var i=hn.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:r});return n.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},n.a.createElement(x["d"],{type:"outline",onClick:this.refreshMessages},n.a.createElement(be["b"],{inline:true,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),i))}}]);return t}(a["Component"]);gn.displayName="RefreshUnreadMessagesButton";gn.defaultProps=bn;var _n=function e(t){return{newUnreadMsgCount:rt(t),featureReactAllUnreads:Object(i["isFeatureEnabled"])(t,"feature_react_all_unreads")}};var yn={incrementRefreshId:function e(){return it["a"].apply(void 0,arguments)}};var On=Object(g["connect"])(_n,yn)(gn);var kn=r(4392);var En=r(4190);var jn=new y["b"]("all_unreads");var Cn={className:Ze["b"].string,featureReactAllUnreads:Ze["b"].bool,allUnreadsSortOrder:Ze["b"].string.isRequired,teamIsPaid:Ze["b"].bool.isRequired,setUserPrefByApi:Ze["b"].func.isRequired};var Sn={className:void 0,featureReactAllUnreads:false};var wn=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}d()(t,[{key:"onSortSelected",value:function e(t){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t})}},{key:"renderMenu",value:function e(t){var r=this;var a=this.props,i=a.featureReactAllUnreads,s=a.teamIsPaid;if(!i)return null;var o=function e(t,a){if(!s&&"priority"===t)return null;return n.a.createElement(vn["b"],{key:t,label:a,onSelected:function e(){return r.onSortSelected(t)}})};var l=[{value:"alphabetical",label:jn.t("Alphabetically")},{value:"priority",label:jn.t("Scientifically")},{value:"newest",label:jn.t("Newest")},{value:"oldest",label:jn.t("Oldest")}];var c=jn.t("Sort...");return n.a.createElement(vn["f"],t,n.a.createElement(vn["c"],{label:c}),l.map(function(e){var t=e.value,r=e.label;return o(t,r)}))}},{key:"renderSortingMenuTrigger",value:function e(){var t=this.props,r=t.featureReactAllUnreads,a=t.allUnreadsSortOrder;if(!r)return null;var i="";i="alphabetical"===a?jn.t("Sorted alphabetically"):"priority"===a?jn.t("Sorted scientifically"):"newest"===a?jn.t("Sorted by newest channel"):jn.t("Sorted by oldest channel");return n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},n.a.createElement(vn["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(mn["a"],null,n.a.createElement("span",null,i),n.a.createElement(be["b"],{type:"chevron-down",className:"align_top"}))))}},{key:"render",value:function e(){var t=this.props,r=t.featureReactAllUnreads,a=t.className;if(!r)return null;var i=b()("p-classic_nav__channel_header__title","p-classic_nav__no_drag");var s=b()(a,{"p-classic_nav__channel_header__all_unreads_wrapper":!Object(O["a"])()});return n.a.createElement("div",{className:s},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:i},jn.t("All Unreads")),this.renderSortingMenuTrigger()),n.a.createElement(kn["a"],{flex:true,regionId:"main"}),n.a.createElement(On,null))}}]);return t}(a["Component"]);wn.displayName="AllUnreadsHeader";wn.defaultProps=Sn;var In=function e(t){return{featureReactAllUnreads:Object(i["isFeatureEnabled"])(t,"feature_react_all_unreads"),allUnreadsSortOrder:Object(lt["a"])(t),teamIsPaid:Object(Oe["isPaidTeam"])(Object(L["d"])(t))}};var Tn={setUserPrefByApi:function e(){return pn["d"].apply(void 0,arguments)}};var An=Object(g["connect"])(In,Tn)(wn);var Nn=r(48);var Pn=r(1186);var Rn=r(1255);var Mn=r(3919);var xn=r(4305);var Dn=r(3927);var Fn=r(4403);var Ln=r(3950);var Bn=r(574);var Un=new y["b"]("generic_dialog");var qn={title:Ze["b"].string,children:Ze["b"].node,submitButtonType:Ze["b"].oneOf(["primary","danger"]),submitButtonText:Ze["b"].string,cancelButtonText:Ze["b"].string,showCancelButton:Ze["b"].bool,onSubmit:Ze["b"].func,onCancel:Ze["b"].func,onClose:Ze["b"].func,"aria-describedby":Ze["b"].string,role:Ze["b"].oneOf(["dialog","alertdialog"]),"data-qa":Ze["b"].string};var Gn={title:"",children:null,submitButtonType:"primary",submitButtonText:null,showCancelButton:true,cancelButtonText:null,onSubmit:_["noop"],onCancel:_["noop"],onClose:_["noop"],"aria-describedby":null,role:"alertdialog","data-qa":"dialog"};var Hn=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,r=t["aria-describedby"],a=t.role,i=t["data-qa"],s=t.title,o=t.children,l=t.submitButtonType,c=t.submitButtonText,u=t.cancelButtonText,d=t.showCancelButton,p=t.onCancel,v=t.onClose,m=t.onSubmit;return n.a.createElement(Pn["a"],{labelledby:"base_dialog_title",describedby:r,closeModal:v,role:a},n.a.createElement(Rn["a"],null,n.a.createElement(Mn["a"],{title:s,id:"base_dialog_title","data-qa":i+"_header"})),n.a.createElement(xn["a"],null,n.a.createElement(Dn["a"],{"data-qa":i+"_body"},o)),n.a.createElement(Fn["a"],{"data-qa":i+"_footer"},n.a.createElement(Ln["a"],null,d&&n.a.createElement(Bn["b"],{type:"outline",onClick:p,"data-qa":i+"_cancel"},u),n.a.createElement(Bn["b"],{type:l,onClick:m,"data-qa":i+"_go"},c||Un.t("Confirm")))))}}]);return t}(a["PureComponent"]);Hn.displayName="BaseDialog";Hn.defaultProps=Gn;var Wn=Hn;var Vn=r(4499);var Kn=r(4628);var zn=new y["b"]("welcome_place");var Qn=function(e){h()(t,e);function t(){c()(this,t);var e=v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.isDismissClicked=false;e.clickDismiss=function(){e.isDismissClicked=true;e.props.dismissWelcomePlace();e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"].WELCOME_PLACE_DISMISS_MODAL_SUBMIT,ui_properties:{element_type:S["k"].BUTTON}},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})};e.hideModal=function(){e.props.closeModal();e.isDismissClicked||e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:S["w"].CLICK,ui_element:S["z"].WELCOME_PLACE_DISMISS_MODAL_HIDE},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})};return e}d()(t,[{key:"getWelcomeSessionId",value:function e(){return this.props.isOnWelcomePlacePage?this.props.pageViewingSessionId:null}},{key:"render",value:function e(){var t=this.props.featureJiraNewxp2372;return n.a.createElement(Wn,{title:zn.t("Remove the Get Started page?"),submitButtonText:zn.t("Remove",{note:"Primary call-to-action (button copy) on the \u201cRemove the Get Started page\u201d dialog. Implied direct object is the \u201cGet Started page.\u201d"}),cancelButtonText:zn.t("Cancel",{note:"Secondary call-to-action (button copy) that allows the user to close the modal."}),submitButtonType:"primary",onSubmit:this.clickDismiss,onCancel:this.hideModal,onClose:this.props.closeModal},n.a.createElement("div",{className:"welcome-place-dismiss-dialog__body"},t?zn.rt("If you're all set, you can remove this page permanently. If you need help later, head to our <a1>Help Center</a1>, or reach out to us at <a2>feedback@slack.com</a2>.",{note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."},function(e){var t=e.tag,r=e.text;if("a1"===t)return n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/"+Object(y["q"])()},r);if("a2"===t)return n.a.createElement("a",{href:"mailto:feedback@slack.com"},r);return null}):zn.t('If you\'re all set, you can remove this page permanently. If you need help later, head to our <a href="https://get.slack.help/hc/{locale}">Help Center</a>, or reach out to us at <a href="feedback@slack.com">feedback@slack.com.</a>',{locale:Object(y["q"])(),note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."})))}}]);return t}(a["Component"]);Qn.displayName="DismissWelcomePlaceDialog";function Yn(e){return{featureJiraNewxp2372:Object(i["isFeatureEnabled"])(e,"feature_jira_newxp_2372"),clogger:Object(k["a"])({state:e}),pageViewingSessionId:Object(E["e"])(e),isOnWelcomePlacePage:Object(Vn["a"])(e)}}var Jn={closeModal:Nn["closeModal"],dismissWelcomePlace:j["b"]};var Xn=Object(g["connect"])(Yn,Jn)(Qn);var Zn=r(4620);var $n=new y["b"]("welcome_place");var ei=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"p-classic_nav__channel_header welcome-place-page-header"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},$n.t("Get Started",{note:"The label for the Welcome place, both for the title of the page in the header and for the sidebar affordance. Conveys the purpose of the page (a place with learning/action modules to help you start using Slack)."})),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},$n.t("A few key things for you to know and do, to get up and running with Slack",{note:"The subtitle for the page that lets the reader know the purpose and what to expect from the page contents. Note: there should be no punctuation at the end."})))}}]);return t}(a["Component"]);ei.displayName="WelcomePlacePageHeader";var ti=ei;var ri=r(4408);var ai=r(60);var ni=r(1431);var ii=r(841);var si=r(773);var oi=r(771);var li=r(4633);var ci=r(1071);var ui={item:Ze["b"].object.isRequired,teamId:Ze["b"].string.isRequired,showThread:Ze["b"].func.isRequired,teamDomain:Ze["b"].string.isRequired,jumpToMessage:Ze["b"].func.isRequired};var di=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Xe["a"])(r,["onClickMessage"]);return r}d()(t,[{key:"onClickMessage",value:function e(){var t=this.props,r=t.item,a=t.teamDomain,n=t.teamId;var i=r.message;var s=r.channelId;var o=Object(lr["getMessageTs"])(i);var l=Object(lr["getMessageThreadTs"])(i);Object(lr["isReply"])(i)?this.props.showThread({channelId:s,threadTs:l,highlightTs:o}):this.props.jumpToMessage({channelId:s,ts:o,threadTs:l,teamId:n,subdomain:a})}},{key:"renderMention",value:function e(){var t=this.props.item;var r=t.message;if(!r)return null;return n.a.createElement(x["c"],{className:"p-inbox__item",onClick:this.onClickMessage},n.a.createElement("span",{className:"p-inbox__item_sender"},n.a.createElement(Mr["a"],{msg:r,size:24})," ",n.a.createElement(Dr["a"],{msg:r})),n.a.createElement("span",{className:"p-inbox__item_content"},n.a.createElement(ni["a"],{lines:1},n.a.createElement(Lr["a"],{msg:r}))),n.a.createElement("span",{className:"p-inbox__item_timestamp"},n.a.createElement(Fr["a"],{msg:r,compact:true})))}},{key:"renderStarredItem",value:function e(){var t=this.props.item;var r=t.message;if(!r)return null;return n.a.createElement(x["c"],{className:"p-inbox__item",onClick:this.onClickMessage},n.a.createElement(be["b"],{type:"star-o"})," ",n.a.createElement("span",{className:"p-inbox__item_sender"},n.a.createElement(Mr["a"],{msg:r,size:24})," ",n.a.createElement(Dr["a"],{msg:r})),n.a.createElement("span",{className:"p-inbox__item_content"},n.a.createElement(ni["a"],{lines:1},n.a.createElement(Lr["a"],{msg:r}))),n.a.createElement("span",{className:"p-inbox__item_timestamp"},n.a.createElement(Fr["a"],{msg:r,compact:true})))}},{key:"renderReminder",value:function e(){var t=this.props.item;var r=t.message;Object(ai["simpleIsUrl"])(t.message)&&(r=n.a.createElement(ci["a"],{href:t.message}));var a=Date.now();return n.a.createElement(x["c"],{className:"p-inbox__item"},n.a.createElement(be["b"],{type:"clock-o"})," ",r,n.a.createElement("span",{className:"p-inbox__item_timestamp"},Object(si["a"])(Object(oi["a"])(t.time),{shortenMonth:true,excludeYear:true}),t.time<a&&" (PAST)"))}},{key:"render",value:function e(){var t=this.props.item;return n.a.createElement(li["a"],null,"mention"===t.type&&this.renderMention(),"star"===t.type&&this.renderStarredItem(),"reminder"===t.type&&this.renderReminder())}}]);return t}(a["PureComponent"]);di.displayName="InboxItem";var pi=function e(t,r){var a=r.item.message;var n=Object(lr["getSourceTeamId"])(a)||Object(kt["b"])(t);var i=Object(L["j"])(t,n);var s=Object(Oe["getTeamDomain"])(i);return{item:r.item,teamId:n,teamDomain:s}};var vi={showThread:function e(){return ge["l"].apply(void 0,arguments)},jumpToMessage:function e(){return ii["a"].apply(void 0,arguments)}};var mi=Object(g["connect"])(pi,vi)(di);var hi=r(4634);var fi={items:Ze["b"].object.isRequired,refreshInbox:Ze["b"].func.isRequired};var bi=function(e){h()(t,e);function t(){c()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){this.props.refreshInbox()}},{key:"renderItems",value:function e(){var t=this.props.items;return Object.values(t).map(function(e){return n.a.createElement(mi,{key:e.id,item:e})})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body p-inbox"},this.renderItems())}}]);return t}(a["Component"]);bi.displayName="InboxView";var gi=function e(t){return{items:Object(ri["getInboxItems"])(t)}};var _i={refreshInbox:ri["refreshInbox"]};var yi=Object(g["connect"])(gi,_i)(bi);var Oi=new y["b"]("inbox");var ki=function(){return n.a.createElement("div",{className:"p-classic_nav__channel_header"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},Oi.t("Home",{fallbackHashNs:"prefs",fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65"})),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},"One place to catch up"))};r.d(t,"a",function(){return Si});var Ei=new y["b"]("channel_sidebar");var ji=new y["b"]("welcome_place");var Ci={Pexample:{label:function e(){return"Example Page"},view:function e(){return n.a.createElement("div",{className:"margin_100"},"Hi! This is an example page.")},sidebar:{icon:"small-quote",onClick:function e(t){},onClickClose:function e(t){},getCloseLinkLabel:function e(){return Ei.t("Dismiss example page",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}}},Punreads:{label:function e(){return Ei.t("All Unreads")},header:function e(t){return n.a.createElement(An,t)},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement(dn,null))},sidebar:{icon:"list",isBold:function e(t){return Object(i["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(o["hasUnreadChannels"])(t):Object(s["hasUnreads"])(t)}}},Pwelcome:{sidebar:{icon:"map",onClick:function e(t){return t(Object(C["e"])("sidebar"))},onClickClose:function e(t){t(Object(Nn["openModal"])({element:n.a.createElement(Xn,null)}));t(Object(j["a"])())},getCloseLinkLabel:function e(){return Ei.t("Dismiss",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})},isBold:function e(t){return Object(E["i"])(t)}},label:function e(){return ji.t("Get Started")},header:function e(t){return n.a.createElement(ti,t)},view:function e(){return n.a.createElement(Je,null)}},Pinbox:{label:function e(){return Ei.t("Home",{fallbackHashNs:"prefs",fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65"})},header:function e(t){return n.a.createElement(ki,t)},view:function e(){return n.a.createElement(yi,null)},sidebar:{icon:"home",isBold:function e(){return true}}}};function Si(e){return Ci[e]||{}}},,,function(e,t,r){}]),[[4610,0,1]]]);